(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9622],{55686:function(ge,Y,g){"use strict";var P=g(11849),k=g(94233),Z=g(51890),b=g(93224),w=g(89366),e=g(85893),K=function(q){var R=q.user,E=(0,b.Z)(q,["user"]);return!R||!R.avatar?(0,e.jsx)(Z.C,(0,P.Z)({icon:(0,e.jsx)(w.Z,{}),size:E.size||"small"},E)):(0,e.jsx)(Z.C,(0,P.Z)({src:"/api/public/preview/".concat(R.avatar),size:E.size||"small"},E))};Y.Z=K},78210:function(ge,Y,g){"use strict";var P=g(15020),k=g(85893),Z=function(w){var e=w.html,K=e===void 0?"":e,ae=w.replaceP,q=ae===void 0?!0:ae;return q?(0,k.jsx)(k.Fragment,{children:typeof K=="string"&&(0,P.ZP)(K.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,k.jsx)(k.Fragment,{children:typeof K=="string"&&(0,P.ZP)(K)})};Y.Z=Z},39017:function(ge,Y,g){"use strict";g.d(Y,{Rk:function(){return R},AK:function(){return Z},Al:function(){return ae}});var P=g(67294),k=g(24004);function Z(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",M=(0,P.useContext)(k.ZX),O=M.theme;return"survey-".concat(O)+E}function b(E,M){var O=(M&&M.depends||[]).reduce(function($,G){return $||!G},!1);return w(O?void 0:function($,G){return fetch($,G).then(function(I){if(!!I.ok)return I.json()})},E,M||{})}function w(E){for(var M=arguments.length,O=new Array(M>1?M-1:0),$=1;$<M;$++)O[$-1]=arguments[$];var G=useState(0),I=_slicedToArray(G,2),Q=I[0],re=I[1],T=useCallback(function(){re(Math.random())},[]),_=useState({loading:!1,mutate:T}),oe=_slicedToArray(_,2),be=oe[0],te=oe[1];return useEffect(function(){!E||O[1].manual&&Q===0||E.apply(null,O).then(function(ne){ne.code===200?te({loading:!1,data:ne.data,mutate:T}):te({error:ne.message,loading:!1,mutate:T})}).catch(function(ne){te({error:ne,loading:!1,mutate:T})})},e(Q,O)),be}function e(){for(var E=arguments.length,M=new Array(E),O=0;O<E;O++)M[O]=arguments[O];for(var $=[],G=0;G<arguments.length;G++){var I=arguments[G];if(I instanceof Array)for(var Q=0;Q<I.length;Q++)$=$.concat(e(I[Q]));else if(typeof URL!="undefined"&&I instanceof URL)$=$.concat(I.toJSON());else if(I instanceof Object)for(var re=Object.keys(I),T=0;T<re.length;T++){var _=re[T];_==="depends"?$=$.concat(I[_]):$=$.concat([_]).concat(e(I[_]))}else $=$.concat(I)}return $}var K=g(87998);function ae(){return(0,P.useContext)(K.ZX)}function q(){return useSurvey().attachments}function R(){var E=(0,P.useContext)(K.ZX);return E.innerStore}},61351:function(ge,Y,g){"use strict";g.r(Y),g.d(Y,{default:function(){return rt}});var P=g(78210),k=g(87998),Z=g(67294),b=g(39017),w=g(95522),e=g(85893);function K(a){var n=a.schema,s=a.index,o=a.seqNo,r=(0,b.AK)("-body-questionSet"),u=(0,Z.useContext)(k.ZX),m=u.questionNumber;return(0,e.jsxs)("div",{className:r,children:[(0,e.jsxs)("div",{className:r+"-title",children:[m?o||"".concat(s+1,"."):"",(0,e.jsx)(P.Z,{html:n.title})]}),a.children,(0,e.jsx)("div",{className:r+"-splitLine"})]})}(0,w.eC)("QuestionSet",K,"antd");var ae=g(9715),q=g(86835),R=g(94657),E=g(80937),M=g(45290),O=function(){var n=(0,b.AK)(),s=(0,Z.useContext)(k.ZX),o=s.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(M.hl,{html:o.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(M.hl,{html:o.description})})]})},$=function(n){var s=(0,b.AK)();return(0,e.jsx)("div",{className:s+"-body",children:n.children})},G=g(57663),I=g(71577),Q=(0,E.Pi)(function(){var a,n,s=(0,b.AK)("-footer"),o=(0,Z.useContext)(k.ZX),r=o.schema,u=o.loading,m=(0,b.Rk)(),d=m.pagination,i=d.pageSize>1,h=d.current===1,l=d.current===d.pageSize;return(0,e.jsxs)("div",{className:s,children:[l&&(0,e.jsx)("div",{className:s+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(M.hl,{html:r==null||(a=r.attribute)===null||a===void 0?void 0:a.suffix})}),(0,e.jsxs)("div",{className:s+"-pagination",children:[i&&!h&&(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{type:"primary",block:!0,onClick:function(){return m.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),i&&!l&&(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{type:"primary",block:!0,onClick:function(){return m.handleNext()},children:"\u4E0B\u4E00\u9875"})}),l&&(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{type:"primary",block:!0,onClick:function(){return m.submit()},loading:u,children:(0,e.jsx)(M.hl,{html:((n=r.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),i&&(0,e.jsxs)("div",{className:s+"-pagination-info",children:["\u7B2C",d.current,"\u9875/\u5171",d.pageSize,"\u9875"]})]})]})}),re=g(47673),T=g(4107),_=g(39002),oe=g(68351),be=g(14965),te=g(77121),ne=g(77883),Je=g(85482),qe=g(29985),_e=g(46842),ea=g(64302),aa=g(27484),ie=g.n(aa),lt=g(33852);ie().locale("zh-cn");var ta="YYYY-MM-DD",na="YYYY-MM-DD HH:mm:ss",ra="HH:mm:ss";function je(a,n){if(!!a){if(n==="date")return ie()(a,ta);if(n==="dateTime")return ie()(a,na);if(n==="time")return ie()(a,ra)}}var ue=function(n){var s=n.onChange,o=n.type,r=n.value,u=n.suffix,m=n.style,d=m===void 0?{width:"100%"}:m;return o==="number"?(0,e.jsx)(Je.Z,{onChange:s,value:r,style:d,addonAfter:u}):o==="date"?(0,e.jsx)(te.Z,{onChange:function(h,l){console.log(h),s(l)},value:je(r,o),style:d}):o==="dateTime"?(0,e.jsx)(te.Z,{showTime:!0,onChange:function(h,l){return s(l)},value:je(r,o),style:d}):o==="time"?(0,e.jsx)(oe.Z,{value:je(r,o),onChange:function(h,l){return s(l)},style:d}):o==="mobile"?(0,e.jsx)(T.Z,{prefix:(0,e.jsx)(qe.Z,{}),onChange:function(h){return s(h.target.value)},value:r}):o==="idCard"?(0,e.jsx)(T.Z,{prefix:(0,e.jsx)(_e.Z,{}),onChange:function(h){return s(h.target.value)},value:r,style:d}):o==="email"?(0,e.jsx)(T.Z,{prefix:(0,e.jsx)(ea.Z,{}),onChange:function(h){return s(h.target.value)},value:r,style:d}):(0,e.jsx)(T.Z,{onChange:function(h){return s(h.target.value)},value:r,suffix:u,style:d})},ot=g(49111),pe=g(19650),ia=g(17672),sa=function(n){var s=n.onChange,o=(0,Z.useRef)(null),r=(0,Z.useRef)(),u=(0,Z.useRef)(),m=(0,Z.useState)(0),d=(0,R.Z)(m,2),i=d[0],h=d[1];return(0,Z.useEffect)(function(){var l=o.current;if(l){var t,c=new ia.Z(o.current,{onBegin:function(){h(1)}});r.current=c;var v=Math.max(window.devicePixelRatio||1,1);l.width=l.offsetWidth*v,l.height=l.offsetHeight*v,(t=l.getContext("2d"))===null||t===void 0||t.scale(v,v)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:u.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:o,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:i!==2?"block":"none"}}),i===2&&(0,e.jsx)("img",{src:u.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(pe.Z,{children:[i===1&&(0,e.jsx)(I.Z,{type:"link",onClick:function(){var t;(t=r.current)===null||t===void 0||t.clear(),h(0)},children:"\u6E05\u7A7A"}),(i===0||i===1)&&(0,e.jsx)(I.Z,{type:"primary",disabled:i!==1,ghost:!0,size:"small",onClick:function(){var t;s(r.current.toDataURL()),u.current=(t=r.current)===null||t===void 0?void 0:t.toDataURL(),h(2)},children:"\u5B8C\u6210"}),i===2&&(0,e.jsx)(I.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var t;h(0),(t=r.current)===null||t===void 0||t.clear()},children:"\u91CD\u7B7E"})]})})]})]})},la=g(3024),oa=(0,E.Pi)(function(){var a=(0,Z.useContext)(k.ZX),n=a.progressBar,s=(0,b.AK)(),o=(0,b.Rk)(),r=o.progress;return n?(0,e.jsx)(la.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:s+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(r*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),ut=g(71194),ua=g(50146);function we(a){return a?a.substring(0,a.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var da=function(n){var s=n.onChange,o=n.value,r=n.mapMove,u=r===void 0?!1:r,m=n.optionId,d=(0,Z.useRef)(null),i=(0,Z.useRef)(),h=(0,Z.useRef)(),l=(0,Z.useRef)(),t=(0,Z.useState)(function(){if(!!o){var B=o.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(B&&B.length>2)return[parseFloat(B[1]),parseFloat(B[2])]}}),c=(0,R.Z)(t,2),v=c[0],f=c[1],x=(0,Z.useState)(function(){return we(o)}),j=(0,R.Z)(x,2),p=j[0],y=j[1],S=(0,Z.useState)(!1),F=(0,R.Z)(S,2),N=F[0],A=F[1],z=(0,Z.useCallback)(function(B){h.current.getLocation(B,function(D,W){if(D==="complete"&&W.geocodes.length){var U=W.geocodes[0].location;l.current.start(U)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,Z.useEffect)(function(){if(!!N){window["localMap".concat(m)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(ee){var me=new AMap.Map("map-".concat(m),{zoom:16,center:v,dragEnable:u,zoomEnable:u});if(i.current=me,u){var xe=new ee({mode:"dragMarker",map:me});xe.on("success",function(se){y(se.address),f([se.position.lng,se.position.lat])}),v?xe.start(v):xe.start(),me.panBy(0,1),l.current=xe}var it=new AMap.Geocoder({city:"010"});h.current=it;var st=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});st.getCurrentPosition(function(se,le){se=="complete"?(me.setCenter(le.position),y(le.formattedAddress),f([le.position.lng,le.position.lat])):console.error(le)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var B="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(m,"&plugin=AMap.Geocoder,AMap.Geolocation"),D=document.createElement("script");D.src=B,document.head.appendChild(D);var W="https://webapi.amap.com/ui/1.1/main-async.js",U=document.createElement("script");U.src=W,document.head.appendChild(U)}},[N]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(T.Z.TextArea,{readOnly:!0,value:we(o),onClick:function(){return A(!0)}}),(0,e.jsxs)(ua.Z,{visible:N,onCancel:function(){A(!1)},onOk:function(){v&&s("".concat(p,"[").concat(v[0],", ").concat(v[1],"]")),A(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:u&&(0,e.jsx)(T.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(D){return z(D)}})}),(0,e.jsx)("div",{ref:d,id:"map-".concat(m),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:p})]})]})},Se=function(n){var s,o=n.optionId,r=n.questionId,u=n.checked,m=n.checkedCount,d=(0,b.Al)(),i=d.statistics,h=i==null?void 0:i.questionStatistics[r],l=((h==null?void 0:h.optionStatistics.reduce(function(v,f){return v+f.count},0))||0)+m,t=(h==null||(s=h.optionStatistics.find(function(v){return v.optionId===o}))===null||s===void 0?void 0:s.count)||0;t=u?t+1:t;var c="".concat(Math.floor(t/l*1e3)/10,"%");return m===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[(0,e.jsxs)("span",{className:"vote-info-cnt ",children:[t,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:c}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:c}})})]})},Ce=function(n){var s=n.schema,o=n.type,r=s.attribute,u=r===void 0?{}:r,m=u.examCorrectAnswer,d=(0,b.Al)(),i=d.correctAnswerVisible,h=d.mode;return m&&i&&h==="exam"?o==="FillBlank"||o==="HorzBlank"||o==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:m}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},ca=function(n){var s=n.schema,o=s.attribute,r=o===void 0?{}:o,u=r.examScore,m=(0,b.Al)(),d=m.mode,i=m.examScoreVisible;return u&&d==="exam"&&i?(0,e.jsxs)("span",{className:"question-score",children:["\uFF08",u,"\u5206\uFF09"]}):(0,e.jsx)(e.Fragment,{})},dt=g(22385),Ne=g(61580),C=g(11849),de=g(93224),va=g(94184),Pe=g.n(va),Ze=(0,E.Pi)(function(a){var n=(0,b.Rk)(),s=n.props.answerSheetVisible,o=a.size,r=a.marked,u=r===void 0?!0:r,m=(0,de.Z)(a,["size","marked"]);return s?(0,e.jsx)(Ne.Z,{title:"\u6807\u8BB0",children:(0,e.jsx)("svg",(0,C.Z)((0,C.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:a.size||24,height:a.size||24,className:"marked"},m),{},{children:(0,e.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:u?"#EA4942":"#d8d8d8","p-id":"1287"})}))}):(0,e.jsx)(e.Fragment,{})}),ha=(0,E.Pi)(function(a){var n=(0,b.Rk)(),s=a.finished,o=a.id,r=a.marked,u=a.seqNo;return(0,e.jsxs)("div",{className:Pe()("answer-sheet-item",{marked:r,finished:s}),onClick:function(){return n.changePageIndex(o)},children:[u,r&&(0,e.jsx)(Ze,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),fa=(0,E.Pi)(function(){var a=(0,b.Rk)(),n=a.answerSheet;return(0,e.jsx)(e.Fragment,{children:n.filter(function(s){return s.display!=="none"}).map(function(s,o){return(0,Z.createElement)(ha,(0,C.Z)((0,C.Z)({},s),{},{seqNo:o+1,key:s.id}))})})}),ma=(0,E.Pi)(function(){var a=(0,b.Rk)(),n=a.answerSheet,s=n.filter(function(u){return u.finished}).length,o=n.filter(function(u){return!u.finished}).length,r=n.filter(function(u){return u.marked}).length;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:s})]}),(0,e.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:o})]}),(0,e.jsxs)("div",{className:"marked",children:[(0,e.jsx)(Ze,{size:18}),"\u6807\u8BB0",(0,e.jsx)("span",{style:{marginLeft:4},children:r})]})]})}),xa=(0,E.Pi)(function(){var a=(0,b.Rk)(),n=a.props.answerSheetVisible;return n?(0,e.jsxs)("div",{className:"answer-sheet",children:[(0,e.jsx)("div",{className:"answer-sheet-header",children:"\u7B54\u9898\u5361"}),(0,e.jsx)("div",{className:"answer-sheet-content",children:(0,e.jsx)(fa,{})}),(0,e.jsx)("div",{className:"answer-sheet-footer",children:(0,e.jsx)(ma,{})})]}):(0,e.jsx)(e.Fragment,{})});function ga(a){var n,s=a.schema,o=a.index,r=a.qsIndex,u=a.required,m=a.error,d=a.replaceTitle,i=a.seqNo,h=(0,Z.useContext)(k.ZX),l=h.questionNumber,t=(0,b.AK)("-body-question"),c=(0,Z.useState)(),v=(0,R.Z)(c,2),f=v[0],x=v[1],j=(0,b.Rk)(),p=(n=j.answerSheet.find(function(F){return F.id===s.id}))===null||n===void 0?void 0:n.marked;(0,Z.useEffect)(function(){if(f){var F,N;(F=document.querySelector("[data-id='".concat(s.id,"']")))===null||F===void 0||F.classList.remove("ant-form-item-has-error"),(N=document.querySelector("[data-id='".concat(s.id,"']")))===null||N===void 0||N.querySelectorAll("[data-id]").forEach(function(ee){ee.classList.remove("ant-form-item-has-error")})}if(m.length>0){var A,z=m[0].split("^"),B=(0,R.Z)(z,2),D=B[0],W=B[1],U;W?(U=document.querySelector("[data-id='".concat(D,"']")),x(W)):(U=document.querySelector("[data-id='".concat(s.id,"']")),x(D)),(A=U)===null||A===void 0||A.classList.add("ant-form-item-has-error")}else f&&x(void 0)},[m]);var y="";r!==void 0&&(y+=r+1+"-"),o!==void 0&&(y+=o+1+".");var S=function(){return f?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:f})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsx)("div",{className:t,children:(0,e.jsx)(q.Z.Item,{label:(0,e.jsxs)("span",{className:t+"-header",children:[l?i||y:"",(0,e.jsx)(M.hl,{html:d||s.title}),(0,e.jsx)(ca,{schema:s}),S(),(0,e.jsx)(Ze,{marked:p,onClick:function(){j.markQuestion(s.id,!p)}})]}),labelCol:{span:24},wrapperCol:{span:24},required:u,children:a.children})})}(0,w.eC)("Question",(0,E.Pi)(ga),"antd");var ct=g(84305),ja=g(88182),pa=g(82925);ie().locale("zh-cn");function Ca(a){var n=a.headerVisible,s=a.footerVisible,o=a.schema,r=(0,b.AK)(),u=(0,b.Al)(),m=function(){var i,h=(i=o.attribute)===null||i===void 0?void 0:i.headerImage;if(h)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(h),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Pe()(r,{preview:u.isPreview}),children:[(0,e.jsx)(oa,{}),(0,e.jsx)("div",{className:r+"-banner",children:m()}),n&&(0,e.jsx)(O,{}),(0,e.jsx)(ja.ZP,{locale:pa.Z,children:(0,e.jsx)($,{children:a.children})}),s&&(0,e.jsx)(Q,{}),(0,e.jsx)(xa,{})]})}(0,w.eC)("Survey",Ca,"antd");var vt=g(13062),V=g(71230),ht=g(89032),L=g(15746),Za=g(76826);function ya(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=(0,b.AK)("-body-question");function d(i,h){r[i]=h,h===""&&delete r[i],s((0,C.Z)({},r))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(i){var h=i.id,l=i.attribute,t=i.title,c=(0,Za.Ck)(l==null?void 0:l.autoSize,[2,4]);return(0,e.jsxs)(V.Z,{style:{marginBottom:10},"data-id":h,children:[t&&(0,e.jsx)(L.Z,{className:m+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:m+"-option-title",children:i.title})},i.id),(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(T.Z.TextArea,{autoSize:{minRows:c[1],maxRows:c[2]},value:r[h]||"",onChange:function(f){return d(h,f.target.value)}})})]},h)})})}(0,w.RM)("Textarea",ya,"antd");var ft=g(36877),ba=g(96607);function wa(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=u===void 0?[]:u;function d(i){var h={};i.forEach(function(l,t){var c=m[t].id;h[c]=l}),s(h)}return(0,e.jsx)(V.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(ba.Z,{value:m.map(function(i){return r[i.id]}).filter(function(i){return i}),style:{width:260},options:n.dataSource,onChange:d,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,w.RM)("Cascader",wa,"antd");function Ee(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=(0,b.AK)("-body-question");function d(i,h){r[i]=h,h===""&&delete r[i],s((0,C.Z)({},r))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(i){var h=i.id,l=i.attribute,t=i.title,c=l==null?void 0:l.suffix,v=l==null?void 0:l.dataType;return(0,e.jsxs)(V.Z,{style:{marginBottom:10},"data-id":h,children:[t&&(0,e.jsx)(L.Z,{className:m+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:m+"-option-title",children:(0,e.jsx)(M.hl,{html:i.title})})},i.id),(0,e.jsxs)(L.Z,{span:12,children:[(0,e.jsx)(ue,{type:v,value:r[h],onChange:function(x){return d(h,x)},suffix:c&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(M.hl,{html:c})})}),(0,e.jsx)(Ce,{schema:i,type:n.type})]})]},h)})})}(0,w.RM)("FillBlank",Ee,"antd"),(0,w.RM)("MultipleBlank",Ee,"antd");var ce=g(83279),mt=g(43358),ve=g(34041),J=g(79521),X=g(36602),Sa=g(54121),Na=function(n){var s=(0,X.XI)(200),o=(0,R.Z)(s,2),r=o[0],u=o[1],m=(0,X.XI)(200),d=(0,R.Z)(m,2),i=d[0],h=d[1];return(0,e.jsxs)("div",(0,C.Z)((0,C.Z)({},n.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:r,children:[n.cells.map(function(l){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},l.getCellProps()),{},{className:"td","data-id":"".concat(n.i,"-").concat(l.column.id),children:l.render("Cell")}))}),n.onDelete&&(0,e.jsx)("div",{ref:i,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(Sa.Z,{onClick:function(){n.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:u||h?"visible":"hidden"}})})]}))};function Ae(a){var n=a.columns,s=a.data,o=a.onAdd,r=a.onDelete,u=Z.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),m=(0,J.useTable)({columns:n,data:s,defaultColumn:u},J.useBlockLayout),d=m.getTableProps,i=m.getTableBodyProps,h=m.headerGroups,l=m.rows,t=m.prepareRow;return(0,e.jsxs)("div",(0,C.Z)((0,C.Z)({},d()),{},{className:"table",children:[(0,e.jsx)("div",{children:h.map(function(c){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},c.getHeaderGroupProps()),{},{className:"tr",children:c.headers.map(function(v){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},v.getHeaderProps()),{},{className:"th",children:v.render("Header")}))})}))})}),(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},i()),{},{children:l.map(function(c,v){return t(c),(0,Z.createElement)(Na,(0,C.Z)((0,C.Z)({},c),{},{key:v,i:v,onDelete:r?function(){return r(v)}:void 0}))})})),o&&(0,e.jsx)("div",{className:"footer",onClick:o,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Me(a){var n=a.schema,s=a.onChange,o=a.value||[{}],r=n.children,u=r===void 0?[]:r,m=(0,Z.useMemo)(function(){return u.map(function(d){var i;return{Header:(0,e.jsx)(P.Z,{html:d.title}),width:(i=d.attribute)===null||i===void 0?void 0:i.width,accessor:d.id,Cell:function(l){var t,c=l.value,v=l.row,f=l.data;if(((t=d.attribute)===null||t===void 0?void 0:t.dataType)==="select"){var x;return(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",value:c,style:{minWidth:80},onChange:function(p){f[v.index][d.id]=p},options:((x=d.dataSource)===null||x===void 0?void 0:x.map(function(j){return{label:j.label,value:j.value}}))||[]})}else return(0,e.jsx)(T.Z,{value:c,onChange:function(p){f[v.index][d.id]=p.target.value,s((0,ce.Z)(f))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ae,{columns:m,data:o,onAdd:function(){o.push({}),s((0,ce.Z)(o))},onDelete:function(i){o.splice(i,1),s((0,ce.Z)(o))}})})}var Pa=function(n){var s=n.schema,o=n.value||[{},{}],r=s.children,u=r===void 0?[]:r,m=(0,Z.useMemo)(function(){return u.map(function(d){var i;return{Header:(0,e.jsx)(P.Z,{html:d.title}),width:(i=d.attribute)===null||i===void 0?void 0:i.width,accessor:d.id,Cell:function(l){var t,c=l.value,v=l.row,f=l.data;if(((t=d.attribute)===null||t===void 0?void 0:t.dataType)==="select"){var x,j,p=((x=d.dataSource)===null||x===void 0||(j=x.find(function(y){return y.value===c}))===null||j===void 0?void 0:j.label)||"";return(0,e.jsx)("span",{children:p})}else return(0,e.jsx)("span",{children:c})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ae,{columns:m,data:o})})};Me.Preview=Pa,(0,w.RM)("MatrixAuto",Me,"antd");function Fe(a){var n=a.columns,s=a.data,o=Z.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,J.useTable)({columns:n,data:s,defaultColumn:o},J.useBlockLayout),u=r.getTableProps,m=r.getTableBodyProps,d=r.headerGroups,i=r.rows,h=r.prepareRow;return(0,e.jsxs)("div",(0,C.Z)((0,C.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(l){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(t){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},t.getHeaderProps()),{},{className:"th",children:t.render("Header")}))})}))})}),(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},m()),{},{children:i.map(function(l){return h(l),(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(t){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},t.getCellProps()),{},{className:"td","data-id":"".concat(l.original.rowId,"-").concat(t.column.id),children:t.render("Cell")}))})}))})}))]}))}function Re(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=u===void 0?[]:u,d=n.row,i=d===void 0?[]:d,h=(0,Z.useMemo)(function(){var t,c=m.map(function(v){var f;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(f=v.attribute)===null||f===void 0?void 0:f.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,S=j.data;return(0,e.jsx)(ue,{value:p,onChange:function(N){var A={};S.forEach(function(z,B){var D=z.title,W=z.rowId,U=(0,de.Z)(z,["title","rowId"]);y.index===B&&(U[v.id]=N),A[W]=U}),s(A)}})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((t=n.attribute)===null||t===void 0?void 0:t.width)||150,accessor:"title"}),c},[]),l=i.map(function(t,c){var v=t.id,f=r[v]||{};return(0,C.Z)({title:(0,e.jsx)(P.Z,{html:t.title}),rowId:v},f)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Fe,{columns:h,data:l})})}var Ea=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,m=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,h=(0,Z.useMemo)(function(){var t,c=m.map(function(v){var f;return{Header:function(){return(0,e.jsx)(P.Z,{html:v.title})},width:(f=v.attribute)===null||f===void 0?void 0:f.width,accessor:v.id,Cell:function(j){var p=j.value;return(0,e.jsx)("span",{children:p})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(t=s.attribute)===null||t===void 0?void 0:t.width,accessor:"title"}),c},[]),l=i.map(function(t,c){var v=t.id,f=r[v]||{};return(0,C.Z)({title:t.title,rowId:v},f)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Fe,{columns:h,data:l})})};Re.Preview=Ea,(0,w.RM)("MatrixFillBlank",Re,"antd");var xt=g(88983),he=g(47933);function Ie(a){var n=a.columns,s=a.data,o=Z.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,J.useTable)({columns:n,data:s,defaultColumn:o},J.useBlockLayout),u=r.getTableProps,m=r.getTableBodyProps,d=r.headerGroups,i=r.rows,h=r.prepareRow;return(0,e.jsxs)("div",(0,C.Z)((0,C.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(l){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(t){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},t.getHeaderProps()),{},{className:"th",children:t.render("Header")}))})}))})}),(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},m()),{},{children:i.map(function(l){return h(l),(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(t){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},t.getCellProps()),{},{className:"td",children:t.render("Cell")}))})}))})}))]}))}function $e(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=u===void 0?[]:u,d=n.row,i=d===void 0?[]:d,h=(0,Z.useMemo)(function(){var t,c=m.map(function(v){var f;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(f=v.attribute)===null||f===void 0?void 0:f.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,S=j.data;return(0,e.jsx)("div",{onClick:function(){var N={};S.forEach(function(A,z){var B=A.title,D=A.rowId,W=(0,de.Z)(A,["title","rowId"]);y.index===z?(N[D]={},N[D][v.id]=!0):N[D]=W}),s(N)},children:(0,e.jsx)(he.ZP,{checked:!!p})})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((t=n.attribute)===null||t===void 0?void 0:t.width)||150,accessor:"title"}),c},[]),l=i.map(function(t,c){var v=t.id,f=r[v]||{};return(0,C.Z)({title:(0,e.jsx)(P.Z,{html:t.title}),rowId:v},f)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ie,{columns:h,data:l})})}var Aa=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,m=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,h=(0,Z.useMemo)(function(){var t,c=m.map(function(v){var f;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(f=v.attribute)===null||f===void 0?void 0:f.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,S=j.data;return p?(0,e.jsx)("div",{children:(0,e.jsx)(he.ZP,{checked:!!p,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((t=s.attribute)===null||t===void 0?void 0:t.width)||150,accessor:"title"}),c},[]),l=i.map(function(t,c){var v=t.id,f=r[v]||{};return(0,C.Z)({title:(0,e.jsx)(P.Z,{html:t.title}),rowId:v},f)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ie,{columns:h,data:l})})};$e.Preview=Aa,(0,w.RM)("MatrixRadio",$e,"antd");var gt=g(63185),fe=g(9676);function Be(a){var n=a.columns,s=a.data,o=Z.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,J.useTable)({columns:n,data:s,defaultColumn:o},J.useBlockLayout),u=r.getTableProps,m=r.getTableBodyProps,d=r.headerGroups,i=r.rows,h=r.prepareRow;return(0,e.jsxs)("div",(0,C.Z)((0,C.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(l){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(t){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},t.getHeaderProps()),{},{className:"th",children:t.render("Header")}))})}))})}),(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},m()),{},{children:i.map(function(l){return h(l),(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(t){return(0,e.jsx)("div",(0,C.Z)((0,C.Z)({},t.getCellProps()),{},{className:"td",children:t.render("Cell")}))})}))})}))]}))}function Te(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=u===void 0?[]:u,d=n.row,i=d===void 0?[]:d,h=(0,Z.useMemo)(function(){var t,c=m.map(function(v){var f;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(f=v.attribute)===null||f===void 0?void 0:f.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,S=j.data;return(0,e.jsx)("div",{onClick:function(N){var A=!p,z={};S.forEach(function(B,D){var W=B.title,U=B.rowId,ee=(0,de.Z)(B,["title","rowId"]);y.index===D&&(A?ee[v.id]=!0:delete ee[v.id]),z[U]=ee}),s(z)},children:(0,e.jsx)(fe.Z,{checked:!!p})})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((t=n.attribute)===null||t===void 0?void 0:t.width)||150,accessor:"title"}),c},[]),l=i.map(function(t,c){var v=t.id,f=r[v]||{};return(0,C.Z)({title:(0,e.jsx)(P.Z,{html:t.title}),rowId:v},f)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Be,{columns:h,data:l})})}var Ma=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,m=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,h=(0,Z.useMemo)(function(){var t,c=m.map(function(v){var f;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(f=v.attribute)===null||f===void 0?void 0:f.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,S=j.data;return p?(0,e.jsx)("div",{children:(0,e.jsx)(fe.Z,{checked:!!p,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((t=s.attribute)===null||t===void 0?void 0:t.width)||150,accessor:"title"}),c},[]),l=i.map(function(t,c){var v=t.id,f=r[v]||{};return(0,C.Z)({title:(0,e.jsx)(P.Z,{html:t.title}),rowId:v},f)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Be,{columns:h,data:l})})};Te.Preview=Ma,(0,w.RM)("MatrixCheckbox",Te,"antd");var H=g(32059);function Fa(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=n.attribute,d=24/((m==null?void 0:m.columns)||1),i=(0,b.AK)("-body-question"),h=!!(m!=null&&m.statEnabled);function l(t,c,v){var f,x,j=(f=n.children)===null||f===void 0?void 0:f.find(function(y){return y.id===t}),p=j==null||(x=j.attribute)===null||x===void 0?void 0:x.dataType;c?r[t]=p?v:!0:delete r[t],s((0,C.Z)({},r))}return(0,Z.useEffect)(function(){u==null||u.forEach(function(t){var c;(c=t.attribute)!==null&&c!==void 0&&c.defaultChecked&&Object.keys(r).length===0&&s((0,H.Z)({},t.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(V.Z,{children:u==null?void 0:u.map(function(t){var c,v,f=t.title,x=t.id,j=(c=t.attribute)===null||c===void 0?void 0:c.dataType,p=(v=t.attribute)===null||v===void 0?void 0:v.suffix;return(0,e.jsxs)(L.Z,{span:d,className:i+"-option","data-id":x,children:[(0,e.jsxs)(fe.Z,{value:x,checked:r.hasOwnProperty(x),onChange:function(S){return l(x,S.target.checked)},children:[(0,e.jsx)(M.hl,{html:f}),(0,e.jsx)(Ce,{schema:t})]}),h&&(0,e.jsx)(Se,{checked:!!r[x],optionId:x,questionId:n.id,checkedCount:Object.keys(r).length}),j&&(0,e.jsx)(ue,{value:r[x],style:{maxWidth:120},type:j,onChange:function(S){return l(x,!0,S)},suffix:p&&(0,e.jsx)("span",{className:i+"-option-suffix",children:(0,e.jsx)(M.hl,{html:p})})})]},x)})})})}(0,w.RM)("Checkbox",Fa,"antd");function Ra(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=u===void 0?[]:u;function d(i){var h,l=(h=n.children)===null||h===void 0?void 0:h.find(function(t){return t.id===i});l&&s((0,H.Z)({},i,!0))}return(0,Z.useEffect)(function(){var i;(i=n.children)===null||i===void 0||i.forEach(function(h){var l,t=h.id;(l=h.attribute)!==null&&l!==void 0&&l.defaultChecked&&Object.keys(r).length===0&&s((0,H.Z)({},t,!0))})},[]),(0,e.jsx)(V.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){s(void 0)},showSearch:!0,value:Object.keys(r)[0],filterOption:function(h,l){return(l==null?void 0:l.label).toLowerCase().indexOf(h.toLowerCase())!==-1},onChange:d,style:{width:260},options:m.map(function(i){return{label:i.title,value:i.id}})})})})}(0,w.RM)("Select",Ra,"antd");var Ia=he.ZP.Group;function $a(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=n.attribute,d=24/((m==null?void 0:m.columns)||1),i=(0,b.AK)("-body-question"),h=!!(m!=null&&m.statEnabled);function l(c){var v,f=c.target.value,x=(v=n.children)===null||v===void 0?void 0:v.find(function(S){return S.id===f});if(x){var j=x.id,p=x.attribute,y=p==null?void 0:p.dataType;s((0,H.Z)({},c.target.value,y?r[j]:!0))}}function t(c,v){s((0,H.Z)({},c,v))}return(0,Z.useEffect)(function(){var c;(c=n.children)===null||c===void 0||c.forEach(function(v){var f,x=v.id,j=v.attribute,p=j==null?void 0:j.dataType;(f=v.attribute)!==null&&f!==void 0&&f.defaultChecked&&Object.keys(r).length===0&&s((0,H.Z)({},x,p?r[x]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(Ia,{onChange:l,value:Object.keys(r)[0],style:{width:"100%"},children:(0,e.jsx)(V.Z,{children:u==null?void 0:u.map(function(c){var v,f,x=c.title,j=c.id,p=(v=c.attribute)===null||v===void 0?void 0:v.dataType,y=(f=c.attribute)===null||f===void 0?void 0:f.suffix;return(0,e.jsxs)(L.Z,{span:d,className:i+"-option","data-id":j,children:[(0,e.jsxs)(he.ZP,{value:j,className:"radio-item",children:[(0,e.jsx)(M.hl,{html:x}),(0,e.jsx)(Ce,{schema:c})]}),h&&(0,e.jsx)(Se,{checked:!!r[j],optionId:j,questionId:n.id,checkedCount:Object.keys(r).length}),p&&(0,e.jsx)(ue,{value:r[j],type:p,style:{maxWidth:120},onChange:function(F){return t(j,F)},suffix:y&&(0,e.jsx)("span",{className:i+"-option-suffix",children:(0,e.jsx)(M.hl,{html:y})})})]},j)})})})})}(0,w.RM)("Radio",$a,"antd");var jt=g(48736),De=g(27049);function Oe(a){var n=(0,b.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(De.Z,{plain:!0})})}Oe.Preview=function(a){return(0,e.jsx)("div",{children:"hello world"})},(0,w.RM)("SplitLine",Oe,"antd");function He(a){var n=(0,b.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(M.hl,{html:"".concat(a.replaceTitle||a.schema.title||"")})})}He.Preview=function(a){return(0,e.jsx)("div",{children:"hello world"})},(0,w.RM)("Remark",He,"antd");var pt=g(34792),Ba=g(48086),Ta=g(3182),Ct=g(43185),ke=g(11324),Da=g(94043),Le=g.n(Da),Oa=g(43347),Ha=ke.Z.Dragger;function ze(a){var n=a.schema,s=a.onChange,o=a.value,r=a.readOnly,u=n.children,m=(0,b.Al)(),d=(0,Z.useState)(),i=(0,R.Z)(d,2),h=i[0],l=i[1];(0,Z.useEffect)(function(){var v=n.children[0].id,f=o&&o[v]||[];h==null&&f.length>0&&X.hi.loadFiles({ids:f}).then(function(x){l(x==null?void 0:x.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[o]);var t=function(){var v=(0,Ta.Z)(Le().mark(function f(x){var j,p,y,S;return Le().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:j=x.onSuccess,p=x.onError,y=x.file,S=x.onProgress,m.onUpload&&m.onUpload(y,function(A){S&&S({percent:A.loaded/A.total*100})}).then(function(A){if(A.success&&j&&j(A.data),!A.success&&p){var z=new Error("Some error");p({event:z})}});case 2:case"end":return N.stop()}},f)}));return function(x){return v.apply(this,arguments)}}(),c=function(f,x){if(l(f.fileList),(f.file.status==="removed"||f.file.status==="done")&&!f.fileList.find(function(p){return p.status!=="done"})){var j=f.fileList.filter(function(p){return p.status==="done"}).map(function(p){var y;return((y=p.response)===null||y===void 0?void 0:y.id)||p.uid});j.length===0?s(void 0):s((0,H.Z)({},x,j))}};return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(v){var f=v.id,x=v.attribute,j=[];if(x){var p=x.maxFileCount,y=x.maxFileSize,S=x.fileAccept;p&&j.push("\u6700\u591A\u4E0A\u4F20".concat(p,"\u4E2A")),y&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(y,"M\u4EE5\u5185")),S&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(S))}return(0,e.jsxs)(Ha,{multiple:!0,disabled:r,maxCount:(x==null?void 0:x.maxFileCount)||20,accept:x==null?void 0:x.fileAccept,beforeUpload:function(N){return x!=null&&x.maxFileSize&&N.size>x.maxFileSize*1024*1024?(Ba.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(x.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),ke.Z.LIST_IGNORE):!0},customRequest:t,onChange:function(N){return c(N,f)},fileList:h,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Oa.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},f)})})}var ka=function(n){var s=n.value,o=(0,Z.useState)(),r=(0,R.Z)(o,2),u=r[0],m=r[1];return(0,Z.useEffect)(function(){if(s){var d=Object.values(s).reduce(function(i,h){return i.push.apply(i,(0,ce.Z)(h)),i},[]);X.hi.loadFiles({ids:d}).then(function(i){m(i)})}},[s]),(0,e.jsx)("div",{className:"preview",children:u==null?void 0:u.map(function(d){return(0,e.jsx)("a",{onClick:function(){return X.hi.download("/api/files/".concat(d.id))},children:d.originalName},d.id)})})};ze.Preview=ka,(0,w.RM)("Upload",ze,"antd");var Zt=g(34669),La=g(54458);function Ue(a){var n=a.schema,s=a.onChange,o=n.children,r=(0,b.Al)(),u=(0,Z.useState)(0),m=(0,R.Z)(u,2),d=m[0],i=m[1];function h(l,t){var c="signature-".concat(t,"-").concat((0,k.kb)(6),".png");if(!r.onUpload){s((0,H.Z)({},t,[c]));return}fetch(l).then(function(v){return v.blob()}).then(function(v){var f=new File([v],c,{type:"image/png"});r.onUpload(f,function(x){i(x.loaded/x.total*100)}).then(function(x){x.success&&x.data.id&&s((0,H.Z)({},t,[x.data.id]))})})}return(0,e.jsx)("div",{children:o==null?void 0:o.map(function(l){var t=l.id,c=l.title;return(0,e.jsxs)(V.Z,{gutter:[10,0],"data-id":t,children:[c&&(0,e.jsx)(L.Z,{span:24},l.id),(0,e.jsxs)(L.Z,{span:24,children:[(0,e.jsx)(sa,{onChange:function(f){return h(f,t)}}),d>0&&d!==100&&(0,e.jsx)(La.Z,{percent:d,size:"small",showInfo:!1})]})]},t)})})}Ue.Preview=function(a){var n=a.value,s;return n&&(s=Object.values(n)[0][0]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("img",{src:"/api/files/".concat(s)})})},(0,w.RM)("Signature",Ue,"antd");var yt=g(96433),ye=g(2864),Ve=g(41687),za=g(46870),We=g(18613),Ua=g(57206),Va={1:(0,e.jsx)(Ve.Z,{}),2:(0,e.jsx)(Ve.Z,{}),3:(0,e.jsx)(za.Z,{}),4:(0,e.jsx)(We.Z,{}),5:(0,e.jsx)(We.Z,{})};function Wa(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=u===void 0?[]:u;function d(h,l){s((0,H.Z)({},h,l))}var i=function(l){var t=l.attribute||{},c=l.id,v=t.scope,f=v===void 0?"[0,5]":v,x=t.scoreStyle,j=f.replace("[","").replace("]","").split(","),p=(0,R.Z)(j,2),y=p[0],S=p[1];return x==="heart"?(0,e.jsx)(ye.Z,{defaultValue:parseInt(y),character:(0,e.jsx)(Ua.Z,{}),style:{color:"#ea7463"},count:parseInt(S),onChange:function(N){return d(c,N)}},c):x==="smile"?(0,e.jsx)(ye.Z,{defaultValue:parseInt(y),character:function(N){var A=N.index;return Va[A+1]},count:parseInt(S),onChange:function(N){return d(c,N)}},c):(0,e.jsx)(ye.Z,{defaultValue:parseInt(y),count:parseInt(S),onChange:function(N){return d(c,N)}},c)};return(0,e.jsx)(V.Z,{children:m.map(function(h){return i(h)})})}(0,w.RM)("Score",Wa,"antd");var Ke=g(55686),Ka=ve.Z.Option;function Ge(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=u===void 0?[]:u,d=m[0].id,i=(0,Z.useState)([]),h=(0,R.Z)(i,2),l=h[0],t=h[1];function c(x){d&&s((0,H.Z)({},d,x))}var v=(0,X.zE)(function(x){X.hi.userSelect({name:x,selected:r[d]||[]}).then(function(j){j.success&&t(j.data)})},5),f=function(j){c(j?l.map(function(p){return p.userId}):void 0)};return(0,Z.useEffect)(function(){var x;v(""),(x=n.children)===null||x===void 0||x.forEach(function(j){var p,y=j.id;(p=j.attribute)!==null&&p!==void 0&&p.defaultChecked&&Object.keys(r).length===0&&s((0,H.Z)({},y,!0))})},[]),(0,e.jsx)(V.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,mode:"multiple",onClear:function(){s(void 0)},value:r[d]||[],onSearch:v,showSearch:!0,onChange:c,filterOption:!1,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(De.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(fe.Z,{onChange:function(y){f(y.target.checked)},children:"\u5168\u9009"})})]})},children:l.map(function(x){return(0,e.jsx)(Ka,{value:x.userId,label:x.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Ke.Z,{user:x,size:20})}),x.name," ",x.deptName&&"(".concat(x.deptName,")")]})},x.userId)})})})})}var Ga=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,m=u===void 0?[]:u,d=m[0].id,i=(0,Z.useState)([]),h=(0,R.Z)(i,2),l=h[0],t=h[1];return(0,Z.useEffect)(function(){X.hi.userSelect({selected:r[d]||[],name:"^_^"}).then(function(c){c.success&&t(c.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(pe.Z,{children:l.map(function(c){return(0,e.jsx)(Ne.Z,{title:c.name,children:(0,e.jsx)(Ke.Z,{user:c,size:24})},c.userId)})})})};Ge.Preview=Ga,(0,w.RM)("User",Ge,"antd");var bt=g(71153),Xa=g(60331),wt=g(62999),Ya=g(54680),Qa=g(60780),Ja=g.n(Qa);function Xe(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=u===void 0?[]:u,d=m[0].id,i=(0,Z.useState)([]),h=(0,R.Z)(i,2),l=h[0],t=h[1];function c(f){d&&((f==null?void 0:f.length)===0?s(void 0):s((0,H.Z)({},d,f==null?void 0:f.map(function(x){return x.value}))))}var v=(0,Z.useMemo)(function(){return Ja()(l.map(function(f){return{title:f.name,key:f.id,value:f.id,parentId:f.parentId}}),{parentProperty:"parentId",customID:"key"})},[l]);return(0,Z.useEffect)(function(){X.hi.deptSelect({}).then(function(f){f.success&&t(f.data)})},[]),(0,e.jsx)(V.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(Ya.Z,{style:{width:"100%"},treeCheckable:!0,value:(r[d]||[]).map(function(f){return{value:f}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:v,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:c,showSearch:!1})})})}var qa=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,m=u===void 0?[]:u,d=m[0].id,i=(0,Z.useState)([]),h=(0,R.Z)(i,2),l=h[0],t=h[1];return(0,Z.useEffect)(function(){X.hi.deptSelect({selected:r[d]||[],name:"^_^"}).then(function(c){c.success&&t(c.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(pe.Z,{children:l.map(function(c){return(0,e.jsx)(Xa.Z,{color:"blue",children:c.name},c.id)})})})};Xe.Preview=qa,(0,w.RM)("Dept",Xe,"antd");function _a(a){for(var n=[],s=2;s<a+2;s++)n.push(s/(a+2));return n}function et(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=u===void 0?[]:u,d=m[0].id,i=(0,Z.useState)(function(){return r[d]||-1}),h=(0,R.Z)(i,2),l=h[0],t=h[1];function c(f){s((0,H.Z)({},d,f))}(0,Z.useEffect)(function(){Object.keys(r).length>0&&t(r[d])},[r,d]);var v=function(x){var j=r[d],p=_a(l||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){t(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:[0,1,2,3,4,5,6,7,8,9,10].map(function(y){var S={background:"#2672ff",opacity:p[y]};return(0,e.jsx)("div",{className:"nps-item",style:l>=y?S:void 0,onMouseOver:function(){t(y)},onClick:function(){return c(y)},children:y},y)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,e.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]},x.id)};return(0,e.jsx)(V.Z,{children:m.map(function(f){return v(f)})})}(0,w.RM)("Nps",et,"antd");var at=g(91220);function Ye(a,n,s){if(!a)return"";var o=RegExp("_{3,}","g"),r=a.matchAll(o),u=[],m=(0,at.Z)(r),d;try{for(m.s();!(d=m.n()).done;){var i=d.value,h=i.index,l=i.index+i[0].length;u.push([h,l])}}catch(y){m.e(y)}finally{m.f()}if(u.length===0)return a;for(var t=u[0][0]===0?"":a.substring(0,u[0][0]),c=0;c<u.length;c++){var v=u[c],f=u[c+1],x=a.substring(v[0],v[1]),j=a.substring(v[1],f?f[0]:a.length),p=s?s[n[c].id]:"";t+='<input data-id="'.concat(n[c].id,`" value='`).concat(p,`' class="mod_fillblank" style="width: `).concat(12*x.length,'px;">'),t+=j}return t}function Qe(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children,m=n.attribute,d=m===void 0?{}:m,i=d.content;function h(l,t){r[l]=t,t===""&&delete r[l],s((0,C.Z)({},r))}return(0,Z.useEffect)(function(){u==null||u.forEach(function(l){var t=document.querySelector("[data-id='".concat(l.id,"']"));if(t){var c=r[l.id];c&&(t.value=c),t.onchange=function(v){var f;h(l.id,(f=v.target)===null||f===void 0?void 0:f.value)}}})},[]),(0,Z.useEffect)(function(){Object.keys(r).forEach(function(l){var t=r[l],c=document.querySelector("[data-id='".concat(l,"']"));t!==c.value&&(c.value=t===void 0?"":t)})},[r]),(0,e.jsx)("div",{children:(0,e.jsx)(P.Z,{html:Ye(i,u),replaceP:!1})})}Qe.Preview=function(a){var n=a.schema,s=a.value,o=n.children,r=n.attribute,u=r===void 0?{}:r,m=u.content;return(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("div",{children:(0,e.jsx)(P.Z,{html:Ye(m,o,s),replaceP:!1})})})},(0,w.RM)("HorzBlank",Qe,"antd");function tt(a){var n=a.schema,s=a.onChange,o=a.value,r=o===void 0?{}:o,u=n.children;function m(d,i){s((0,H.Z)({},i,d))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(d){var i=d.id,h=d.title,l=d.attribute,t=l===void 0?{}:l,c=t.mapMove;return(0,e.jsxs)(V.Z,{gutter:[10,0],"data-id":i,children:[h&&(0,e.jsx)(L.Z,{span:24},d.id),(0,e.jsx)(L.Z,{span:24,children:(0,e.jsx)(da,{optionId:i,onChange:function(f){return m(f,i)},value:r[i],mapMove:c})})]},i)})})}(0,w.RM)("Address",tt,"antd");var nt=function(n){return(0,e.jsx)(e.Fragment,{children:n.children})},rt=nt}}]);
