(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6132],{55686:function(ht,Ce,o){"use strict";var O=o(11849),Se=o(94233),fe=o(51890),Fe=o(93224),G=o(89366),ne=o(85893),ft=function(Ye){var $=Ye.user,ee=(0,Fe.Z)(Ye,["user"]);return!$||!$.avatar?(0,ne.jsx)(fe.C,(0,O.Z)({icon:(0,ne.jsx)(G.Z,{}),size:ee.size||"small"},ee)):(0,ne.jsx)(fe.C,(0,O.Z)({src:"/api/public/preview/".concat($.avatar),size:ee.size||"small"},ee))};Ce.Z=ft},1997:function(ht,Ce,o){"use strict";o.d(Ce,{ML:function(){return Oe},tC:function(){return vt},sJ:function(){return lt},ZP:function(){return Ct}});var O=o(71194),Se=o(50146),fe=o(57663),Fe=o(71577),G=o(49111),ne=o(19650),ft=o(77576),$e=o(12028),Ye=o(22385),$=o(61580),ee=o(402),I=o(97272),H=o(67294),Je=o(94184),y=o.n(Je),B=o(94657),Y=o(29656),ce=o(63138),N=o(88386),h=o(85893),Pe=(0,H.forwardRef)(function(x,f){var j=x.value,C=x.readOnly,w=x.placeholder,A=(0,H.useState)(),U=(0,B.Z)(A,2),S=U[0],R=U[1];(0,H.useEffect)(function(){S&&S.focus()},[S]),(0,H.useImperativeHandle)(f,function(){return{getValue:function(){return S.getValue()},focus:function(){S.focus()},getDoc:function(){return S.getDoc()}}});var q=(0,H.useMemo)(function(){return{mode:"text/x-spreadsheet",line:!0,lineWrapping:!0,readOnly:C,placeholder:w}},[C]),re=function(T,e,b,z,p){var _=T.getDoc(),P=document.createElement("span");P.innerText=z.title||z.path,P.className="formula-tag ".concat(p||"formula-tag-value"),_.markText(e,b,{replacedWith:P})},ve=function K(T,e,b){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];(z||[]).forEach(function(p){for(var _="#{".concat(p.path,"}"),P=new RegExp(_,"g");P.exec(e)!==null;){var we={line:b,ch:P.lastIndex-_.length},he={line:b,ch:P.lastIndex};re(T,we,he,p)}for(_="#{_".concat(p.path,"}"),P=new RegExp(_,"g");P.exec(e)!==null;){var M={line:b,ch:P.lastIndex-_.length},Ee={line:b,ch:P.lastIndex};re(T,M,Ee,p,"formula-tag-text")}p.children&&p.children.length>0&&K(T,e,b,p.children)})},ae=function(T,e){var b=e.split(`
`);b.forEach(function(z,p){return ve(T,z,p,x.variable)})},De=function(T,e){R(T),j!=null&&j!==""&&ae(T,e)},pe=function(T,e,b){(b!=null||b!=="")&&ae(T,b),x.onChange&&x.onChange(b)};return(0,h.jsx)("div",{className:y()("formula-editor-content",{readOnly:C}),children:(0,h.jsx)(Y.Rt,{autoCursor:!1,value:j,options:q,editorDidMount:De,onChange:pe})})}),Oe=Pe,It=o(47673),k=o(4107),pt=o(83279),mt=o(18106),Ue=o(51752),xt=o(20136),Qe=o(55241),gt=o(7359),qe=o(7964),ie=qe.Z.Panel,_e=I.Z.Link;function ze(x,f,j){if(x.popover){var C,w;return(0,h.jsx)(Qe.Z,{content:(0,h.jsxs)("div",{className:"fn-popover-content",children:[(0,h.jsxs)("div",{className:"fn-popover-content-header",children:["\u516C\u5F0F\u7B80\u4ECB",(0,h.jsx)(_e,{href:x.popover.docHref,target:"_blank",children:"\u6587\u6863"})]}),(C=x.popover)===null||C===void 0?void 0:C.content]}),title:(w=x.popover)===null||w===void 0?void 0:w.title,placement:"right",className:"fn-popover",children:(0,h.jsxs)("div",{className:"function-item",onClick:function(){return j&&j(x.name)},children:[(0,h.jsx)("div",{className:"function-item__name",children:x.name}),(0,h.jsx)("div",{className:"function-item__desc",children:x.description})]})},f)}return(0,h.jsxs)("div",{className:"function-item",onClick:function(){return j&&j(x.name)},children:[(0,h.jsx)("div",{className:"function-item__name",children:x.name}),(0,h.jsx)("div",{className:"function-item__desc",children:x.description})]},f)}var We=function(f){var j=f.dataSource,C=j===void 0?[]:j,w=f.check,A="function-store";return(0,h.jsx)(qe.Z,{className:A,bordered:!1,defaultActiveKey:[0],expandIconPosition:"right",ghost:!0,children:C.map(function(U,S){return(0,h.jsx)(ie,{className:"".concat(A,"-group"),header:U.name,children:U.functions.map(function(R,q){return ze(R,q,w)})},S)})})},Ge=We,Le=o(11849),yt=function(x){return(0,h.jsx)("svg",(0,Le.Z)((0,Le.Z)({width:"1em",height:"1.2em",viewBox:"0 0 24 24"},x),{},{children:(0,h.jsx)("path",{d:"M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 0 1 2 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3c.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 0 1 4.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41l-2.83 2.83l-2.83-2.83l-1.43 1.41l2.85 2.85l-2.85 2.81l1.43 1.41l2.83-2.83l2.83 2.83L22 19.31l-2.83-2.81L22 13.65z",fill:"currentColor"})}))},et=function(x){return(0,h.jsx)("svg",(0,Le.Z)((0,Le.Z)({width:"1em",height:"1em",viewBox:"0 0 16 16"},x),{},{children:(0,h.jsx)("g",{fill:"currentColor",children:(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5h2V4H1.5l-.5.5v8l.5.5H4v-1H2V5zm12.5-1H12v1h2v7h-2v1h2.5l.5-.5v-8l-.5-.5zm-2.74 2.57L12 7v2.51l-.3.45l-4.5 2h-.46l-2.5-1.5l-.24-.43v-2.5l.3-.46l4.5-2h.46l2.5 1.5zM5 9.71l1.5.9V9.28L5 8.38v1.33zm.58-2.15l1.45.87l3.39-1.5l-1.45-.87l-3.39 1.5zm1.95 3.17l3.5-1.56v-1.4l-3.5 1.55v1.41z"})})}))},Rt=o(32157),tt=o(32138),Et=o(57254),nt=function(f){var j=f.id,C=f.type,w=f.title,A=f.pick,U=(0,H.useMemo)(function(){return C==="SplitLine"},[]);return(0,h.jsx)("div",{className:y()("field-variable",{disabled:U}),onClick:function(){A&&A()},children:w})},de=nt;function it(x,f){return{title:(0,h.jsx)(de,{type:x.type,id:x.id,title:x.title,pick:function(){return f&&f(x)}}),key:x.id,children:(x.children||[]).map(function(j){return it(j,f)})}}var Vt=function(f){var j=f.dataSource,C=f.pick,w=(0,H.useMemo)(function(){return j.map(function(A){return it(A,C)})},[C]);return(0,h.jsx)(tt.Z,{blockNode:!0,defaultExpandAll:!0,showLine:{showLeafIcon:!1},switcherIcon:(0,h.jsx)(Et.Z,{}),className:"hide-file-icon",treeData:w,selectable:!1})},X=Vt,ye=o(76570),rt=o(54421),Ie=o(38272),J=function(f){var j=f.check,C=f.dataSource;return(0,h.jsx)(Ie.ZP,{bordered:!1,dataSource:C,className:"function-store-group",renderItem:function(A){return(0,h.jsx)(Ie.ZP.Item,{children:ze(A,A.name,j)})}})},Q=J,Re=Ue.Z.TabPane,at=function(f){var j=f.variables,C=j===void 0?[]:j,w=f.insertFun,A=f.insertVariable,U=f.functionVisible,S=U===void 0?!0:U,R=f.helperVariables,q="formula-editor-toolbar",re=(0,H.useState)([]),ve=(0,B.Z)(re,2),ae=ve[0],De=ve[1],pe=(0,H.useCallback)(function(T){return(0,h.jsxs)("span",{children:[T.icon?(0,h.jsx)("span",{role:"img",className:"anticon",children:T.icon}):null,T.name]})},[]),K=function(e){var b;if(!e){De([]);return}var z=new Set;De(((b=f.functions)===null||b===void 0?void 0:b.reduce(function(p,_){return p.push.apply(p,(0,pt.Z)(_.functions.filter(function(P){return P.name.includes(e.toUpperCase())}))),p},[]).filter(function(p){return z.has(p.name)?!1:(z.add(p.name),!0)}))||[])};return(0,h.jsx)("div",{className:q,children:(0,h.jsxs)(Ue.Z,{defaultActiveKey:"field",centered:S,children:[(0,h.jsx)(Re,{tab:(0,h.jsx)(pe,{name:"\u95EE\u9898",icon:(0,h.jsx)(et,{})}),children:(0,h.jsx)("div",{children:(0,h.jsx)(X,{dataSource:C,pick:A})})},"field"),R&&(0,h.jsx)(Re,{tab:(0,h.jsx)(pe,{name:"\u547D\u540D\u53D8\u91CF",icon:(0,h.jsx)(et,{})}),children:(0,h.jsx)("div",{children:(0,h.jsx)(X,{dataSource:R,pick:A})})},"helperFiled"),S&&(0,h.jsxs)(Re,{tab:(0,h.jsx)(pe,{name:"\u51FD\u6570",icon:(0,h.jsx)(yt,{})}),children:[(0,h.jsx)(k.Z,{placeholder:"\u641C\u7D22\u516C\u5F0F",prefix:(0,h.jsx)(ye.Z,{}),allowClear:!0,onChange:function(e){return K(e.target.value)}}),ae.length>0&&(0,h.jsx)(Q,{dataSource:ae,check:w}),ae.length===0&&(0,h.jsx)(Ge,{dataSource:f.functions,check:w})]},"fx")]})})};function He(x){for(var f=arguments.length,j=new Array(f>1?f-1:0),C=1;C<f;C++)j[C-1]=arguments[C];return(0,h.jsxs)("div",{className:"fn-popover-title",children:[x,"(",j.map(function(w,A){return(0,h.jsxs)("span",{className:"fn-popover-arg",children:[w," ",A===j.length-1?"":","]},A)}),")"]})}var st="https://support.microsoft.com/zh-cn/office/",Xe=[{name:"\u903B\u8F91",functions:[{name:"IF",description:"\u6839\u636E\u5224\u65AD\u6761\u4EF6\uFF0C\u8FD4\u56DE\u6B63\u786E\u6216\u9519\u8BEF\u7684\u503C"},{name:"AND",description:"\u8FD4\u56DE\u903B\u8F91\u503C\uFF1A\u5982\u679C\u6240\u6709\u53C2\u6570\u503C\u5747\u4E3A\u903B\u8F91\u201Ctrue\u201D\uFF0C\u5219\u8FD4\u56DE\u903B\u8F91\u201Ctrue\u201D\uFF0C\u53CD\u4E4B\u8FD4\u56DE\u903B\u8F91\u201Cfalse",popover:{title:He("AND","logical1","logical2","..."),content:(0,h.jsxs)("div",{className:"fn-popover-content",children:["\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Afalse\uFF0C\u5373\u8FD4\u56DE false\uFF1B",(0,h.jsx)("br",{})," \u53EA\u6709\u5F53\u6240\u6709\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u624D\u8FD4\u56DE true\u3002",(0,h.jsx)("br",{}),"logical:\u903B\u8F91\u503C\uFF0C\u4F8B\u5982\uFF0C2>1\u7684\u903B\u8F91\u503C\u4E3A true"]})}},{name:"OR",description:"\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u5373\u8FD4\u56DEtrue\uFF1B\u53EA\u6709\u5F53\u6240\u6709\u903B\u8F91\u53C2\u6570\u503C\u4E3Afalse\uFF0C\u624D\u8FD4\u56DEfalse"},{name:"XOR",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u6570\u7684\u5F02\u6216\u503C"},{name:"NOT",description:"\u5BF9\u53C2\u6570\u903B\u8F91\u503C\u6C42\u53CD"}]},{name:"\u6587\u5B57",functions:[{name:"SUBSTITUTE",description:"\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text",popover:{title:He("SUBSTITUTE","old_text","new_text","[instance_num]"),content:(0,h.jsxs)("div",{className:"fn-popover-content",children:["\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text\u3002",(0,h.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u6307\u5B9A\u7684\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 SUBSTITUTE\uFF1B",(0,h.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u7279\u5B9A\u4F4D\u7F6E\u5904\u7684\u4EFB\u610F\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 REPLACE\u3002"]}),docHref:"".concat(st,"substitute-\u51FD\u6570-6434944e-a904-4336-a9b0-1e58df3bc332")}},{name:"CONCATENATE",description:"\u5C06\u591A\u4E2A\u6587\u5B57\u5408\u5E76"},{name:"LEFT",description:"\u4ECE\u5DE6\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"RIGHT",description:"\u4ECE\u53F3\u8FB9\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"MID",description:"\u622A\u53D6\u6307\u5B9A\u4F4D\u7F6E\u7684\u6587\u5B57"},{name:"REPLACE",description:"\u66FF\u6362\u6587\u672C\u4E2D\u7684\u6307\u5B9A\u6587\u5B57",popover:{title:He("REPLACE","old_text","start_num","num_chars","new_text"),content:(0,h.jsxs)("div",{className:"fn-popover-content",children:["\u6839\u636E\u6307\u5B9A\u7684\u5B57\u7B26\u6570\uFF0CREPLACE \u5C06\u90E8\u5206\u6587\u672C\u5B57\u7B26\u4E32\u66FF\u6362\u4E3A\u4E0D\u540C\u7684\u6587\u672C\u5B57\u7B26\u4E32\u3002",(0,h.jsx)("br",{}),"REPLACEB \u4F7F\u7528\u5176\u4ED6\u6587\u672C\u5B57\u7B26\u4E32\u5E76\u6839\u636E\u6240\u6307\u5B9A\u7684\u5B57\u8282\u6570\u66FF\u6362\u67D0\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7684\u90E8\u5206\u6587\u672C\u3002"]}),docHref:"".concat(st,"replace-replaceb-\u51FD\u6570-8d799074-2425-4a8a-84bc-82472868878a")}},{name:"TRIM",description:"\u79FB\u9664\u6587\u5B57\u5934\u5C3E\u7684\u7A7A\u683C"},{name:"LEN",description:"\u540E\u53BB\u6587\u5B57\u7684\u957F\u5EA6"},{name:"LOWER",description:"\u8F6C\u6210\u5C0F\u5199\u6587\u5B57"},{name:"UPPER",description:"\u8F6C\u6210\u5927\u5199\u6587\u5B57"}]},{name:"\u6570\u5B57",functions:[{name:"AVERAGE",description:"\u8BA1\u7B97\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u7684\u5E73\u5747\u503C"},{name:"COUNT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u6570\u5B57\u7684\u6570\u91CF"},{name:"COUNTA",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u4E0D\u4E3A\u7A7A\u7684\u6570\u91CF"},{name:"COUNTIF",description:"COUNTIF(\u8868\u683C[\u91D1\u989D], 100)\uFF0C\u53EF\u5F97\u5230\u8868\u683C\u4E2D\u91D1\u989D\u4E3A100\u7684\u6570\u636E\u6761\u6570"},{name:"MAX",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5927\u503C"},{name:"MIN",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5C0F\u503C"},{name:"ROUND",description:"\u5C06\u6570\u5B57\u56DB\u820D\u4E94\u5165\u5230\u6307\u5B9A\u7684\u4F4D\u6570"},{name:"INT",description:"\u5C06\u6570\u5B57\u5411\u4E0B\u53D6\u6574"},{name:"MOD",description:"\u8FD4\u56DE\u4E24\u6570\u76F8\u9664\u7684\u4F59\u6570"},{name:"PRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u4E58\u79EF"},{name:"SUM",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMPRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMIF",description:"\u7EDF\u8BA1\u8868\u683C\u4E2D\u7B26\u5408\u6761\u4EF6\u7684\u6570\u503C\uFF0C\u5E76\u6C42\u548C"},{name:"ROUNDUP",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0A\u53D6"},{name:"ROUNDDOWN",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0B\u53D6"},{name:"POWER",description:"\u8BA1\u7B97\u6570\u5B57num\u7684n\u6B21\u65B9\uFF0Cn\u53EF\u4EE5\u4E3A\u5206\u6570\u6216\u8005\u6574\u6570"},{name:"LN",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u81EA\u7136\u5BF9\u6570"},{name:"SQRT",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u5E73\u65B9\u6839"}]},{name:"\u65F6\u95F4",functions:[{name:"YEAR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5E74\u4EFD"},{name:"MONTH",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u6708\u4EFD"},{name:"DAY",description:"\u8FD4\u56DE\u65E5\u671F\u5728\u4E00\u4E2A\u6708\u4E2D\u7684\u7B2C\u51E0\u5929\u7684\u6570\u503C"},{name:"HOUR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5C0F\u65F6\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"MINUTE",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5206\u949F\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"SECOND",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u79D2\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"DATE",description:"\u5C06\u6570\u5B57\u62FC\u63A5\u6210\u4E3A\u5E74\u4EFD\uFF0C\u6570\u5B57\u5B57\u6BB5\u987A\u5E8F\u4E3A\uFF1A\u5E74\uFF0F\u6708\uFF0F\u65E5\uFF0F\u65F6\uFF0F\u5206\uFF0F\u79D2"},{name:"CURDATE",description:"\u8FD4\u56DE\u5F53\u524D\u65E5\u671F"},{name:"NOW",description:"\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4\uFF0C\u7CBE\u786E\u5230\u65F6/\u5206/\u79D2"},{name:"DAYS",description:"\u8FD4\u56DE\u65E5\u671F\u5B57\u6BB51\u4E0E\u65E5\u671F\u5B57\u6BB52\u7684\u5DEE\u503C\uFF0C\u5355\u4F4D\u4E3A\u5929"},{name:"DATEDELTA",description:"\u5C06\u6307\u5B9A\u65E5\u671F\u52A0/\u51CF\u6307\u5B9A\u5929\u6570\uFF0C\u5E76\u8FD4\u56DE\u76EE\u6807\u65E5\u671F"}]}];function jt(x){if(x){var f=Xe.map(function(C){return C.functions}).reduce(function(C,w){return C.concat(w)},[]),j=x.map(function(C){return f.find(function(w){return w.name===C})});return[{name:"\u5E38\u7528",functions:j}].concat(Xe)}return Xe}var Be=o(76826);function ot(x){return!!(x==="SplitLine"||x==="Pagination"||x==="Remark"||x==="Signature"||x==="Upload"||x&&x.startsWith("Matrix"))}function ut(x){return!!["Dept","FillBlank","User","Score","Nps","Textarea"].includes(x)}var kt=function x(f){var j;(j=f.children)===null||j===void 0||j.forEach(function(C){C.parent=f,x(C)})},lt=function x(f,j,C,w){var A;if(!f)return[];var U=!1;return((A=f.children)===null||A===void 0?void 0:A.filter(function(S){return S===j&&!C?(U=!0,!1):w&&!w.includes(S.type)?!1:!ot(S.type)&&!U}).map(function(S){var R=S.id,q=S.title,re=S.type,ve=S.type===void 0?"".concat(f==null?void 0:f.id,".").concat(R):R;return ut(S.type)?{id:R,path:ve,title:(0,Be.WO)(q),type:re}:{id:R,path:ve,title:(0,Be.WO)(q),type:re,children:x(S,j,C,w)}}))||[]},ct=o(1870),dt=I.Z.Link,vt=function(f){var j=f.title,C=f.subTitle,w=f.helpLink,A=f.onOk,U=f.value,S=f.className,R=f.onCancel,q=f.fieldAll,re=f.visible,ve=re===void 0?!0:re,ae=f.schema,De=f.current,pe=f.functions,K=f.functionVisible,T=f.fieldTypes,e=f.helperVariables,b=(0,H.useRef)(null),z="formula-editor",p=(0,H.useRef)(""),_=(0,H.useCallback)(function(he){if(b.current!=null){var M=b.current.getDoc(),Ee=M.getCursor();M.replaceRange("".concat(he,"()"),Ee),Ee.ch+=he.length+1,M.setCursor(Ee),b.current.focus()}},[]),P=(0,H.useCallback)(function(he){if(b.current!=null){var M=b.current.getDoc(),Ee=M.getCursor();M.replaceRange("#{".concat(p.current).concat(he.path,"}"),Ee,Ee),b.current.focus()}},[]),we=(0,H.useMemo)(function(){return lt(ae,De,q,T)},[ae,De,q,T]);return(0,h.jsx)(Se.Z,{onCancel:R,visible:ve,maskClosable:!1,getContainer:f.getContainer,title:j,width:1e3,footer:!1,onOk:function(M){M.stopPropagation(),A(b.current.getValue())},keyboard:!1,children:(0,h.jsxs)("div",{className:y()(z,S),children:[(0,h.jsx)(at,{functionVisible:K,functions:pe||jt(f.commonUseFunctionNames),variables:we,helperVariables:e,insertFun:_,insertVariable:P}),(0,h.jsxs)("div",{className:"".concat(z,"-main"),children:[(0,h.jsxs)("div",{className:"".concat(z,"-main__code"),children:[(0,h.jsxs)("h1",{children:[(0,h.jsxs)("span",{className:"equle",children:[C,"="]}),(0,h.jsxs)("span",{style:{float:"right"},children:[(0,h.jsx)($.Z,{title:"\u903B\u8F91\u8868\u793A\u4F7F\u7528\u5177\u4F53\u503C\u53C2\u4E0E\u903B\u8F91\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u4E3A true;\u6587\u672C\u8868\u793A\u4F7F\u7528\u6807\u9898\u53C2\u4E0E\u6587\u672C\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u9009\u9879\u7684\u6587\u672C\u3002",children:(0,h.jsx)(ct.Z,{style:{fontSize:16,marginRight:10}})}),(0,h.jsx)($e.Z,{checkedChildren:"\u903B\u8F91",defaultChecked:!0,unCheckedChildren:"\u6587\u672C",onChange:function(M){M?p.current="":p.current="_"}})]})]}),(0,h.jsx)("div",{style:{fontSize:14,color:"#b0b0b9"},children:"\u5728\u5DE6\u4FA7\u9009\u62E9\u51FD\u6570\u6216\u5B57\u6BB5\u53D8\u91CF\uFF0C\u4E14\u5728\u82F1\u6587\u8F93\u5165\u6CD5\u4E0B\u7F16\u8F91"})]}),(0,h.jsx)("div",{className:"".concat(z,"-main__panel"),children:(0,h.jsx)(Oe,{ref:b,variable:we.concat(e||[]),value:U})}),(0,h.jsxs)("div",{className:"".concat(z,"-main__footer"),children:[(0,h.jsxs)(ne.Z,{children:[(0,h.jsx)("span",{children:w}),K&&(0,h.jsx)(dt,{href:"https://support.microsoft.com/zh-cn/office/excel-%E5%87%BD%E6%95%B0-%E6%8C%89%E7%B1%BB%E5%88%AB%E5%88%97%E5%87%BA-5f91f4e9-7b42-46d2-9bd1-63f26a86c0eb",target:"_blank",children:"\u516C\u5F0F\u6587\u6863"})]}),(0,h.jsxs)(ne.Z,{children:[(0,h.jsx)(Fe.Z,{onClick:function(){R&&R()},children:"\u53D6\u6D88"}),(0,h.jsx)(Fe.Z,{type:"primary",onClick:function(M){M.stopPropagation(),A(b.current.getValue())},children:"\u786E\u5B9A"})]})]})]})]})})},Ct=vt},58977:function(ht,Ce,o){"use strict";o.r(Ce),o.d(Ce,{Flow:function(){return tn},default:function(){return qn}});var O=o(11849),Se=o(49111),fe=o(19650),Fe=o(57663),G=o(71577),ne=o(3182),ft=o(71194),$e=o(50146),Ye=o(34792),$=o(48086),ee=o(83279),I=o(94657),H=o(94043),Je=o.n(H),y=o(67294),B=o(59782),Y=o.n(B),ce=o(86319),N={pluginName:"control",__lf:null,__controlItems:[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"\u7F29\u5C0F\u6D41\u7A0B\u56FE",text:"\u7F29\u5C0F",onClick:function(){N.__lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"\u653E\u5927\u6D41\u7A0B\u56FE",text:"\u653E\u5927",onClick:function(){N.__lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"\u6062\u590D\u6D41\u7A0B\u539F\u6709\u5C3A\u5BF8",text:"\u9002\u5E94",onClick:function(){N.__lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"\u56DE\u5230\u4E0A\u4E00\u6B65",text:"\u4E0A\u4E00\u6B65",onClick:function(){N.__lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"\u79FB\u5230\u4E0B\u4E00\u6B65",text:"\u4E0B\u4E00\u6B65",onClick:function(){N.__lf.redo()}}],addItem:function(n){N.__controlItems.push(n)},removeItem:function(n){var t=N.__controlItems.findIndex(function(a){return a.key===n});return N.__controlItems.splice(t,1)[0]},install:function(){},render:function(n,t){N.__lf=n,N.__domContainer=t,N.__tool=this.__getControlTool(),t.appendChild(N.__tool)},destroy:function(){try{var n;(n=N.__domContainer)===null||n===void 0||n.removeChild(N.__tool)}catch(t){console.warn("unexpect destory error",t)}},__getControlTool:function(){var n="lf-control-item",t="lf-control-item disabled",a=document.createElement("div"),r=[];return a.className="lf-control",N.__controlItems.forEach(function(s){var l=document.createElement("div"),u=document.createElement("i"),c=document.createElement("span");switch(l.className=t,s.onClick&&(l.onclick=s.onClick.bind(null,N.__lf)),s.onMouseEnter&&(l.onmouseenter=s.onMouseEnter.bind(null,N.__lf)),s.onMouseLeave&&(l.onmouseleave=s.onMouseLeave.bind(null,N.__lf)),u.className=s.iconClass,c.className="lf-control-text",c.title=s.title,c.innerText=s.text,l.append(u,c),s.text){case"\u4E0A\u4E00\u6B65":N.__lf.on("history:change",function(d){var v=d.data.undoAble;l.className=v?n:t});break;case"\u4E0B\u4E00\u6B65":N.__lf.on("history:change",function(d){var v=d.data.redoAble;l.className=v?n:t});break;default:l.className=n;break}r.push(l)}),a.append.apply(a,r),a}},h=null;function Pe(i,n){for(var t=0;t<n;t++)i+="  ";return i}function Oe(i,n,t,a){var r="";if(i instanceof Array)for(var s=0,l=i.length;s<l;s++)r+=Pe(t,a)+Oe(i[s],n,t,a+1);else if(typeof i=="object"){var u=!1;r+=Pe(t,a)+"<"+n;for(var c in i)c.charAt(0)=="-"?r+=" "+c.substr(1)+'="'+i[c].toString().replace("<","&lt;")+'"':u=!0;if(r+=u?">":" />",u){for(var d in i)d=="#text"?r+=i[d]:d=="#cdata"?r+="<![CDATA["+i[d]+"]]>":d.charAt(0)!="-"&&(r+=Oe(i[d],d,t,a+1));r+=Pe(t,a)+"</"+n+">"}}else r+=Pe(t,a)+"<"+n+">"+i.toString()+"</"+n+">";return r}function It(i){var n="";for(var t in i)n+=Oe(i[t],t,`	
`,0);return n}var k=function(){};k.ObjTree=function(){return this},k.ObjTree.VERSION="0.23",k.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`,k.ObjTree.prototype.attr_prefix="-",k.ObjTree.prototype.parseXML=function(i){var n;if(window.DOMParser){var t=new DOMParser,a=t.parseFromString(i,"application/xml");if(!a)return;n=a.documentElement}else window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(i),n=t.documentElement);if(!!n)return this.parseDOM(n)},k.ObjTree.prototype.parseHTTP=function(i,n,t){var a={};for(var r in n)a[r]=n[r];if(a.method||(typeof a.postBody=="undefined"&&typeof a.postbody=="undefined"&&typeof a.parameters=="undefined"?a.method="get":a.method="post"),t){a.asynchronous=!0;var s=this,l=t,u=a.onComplete;a.onComplete=function(v){var m;v&&v.responseXML&&v.responseXML.documentElement&&(m=s.parseDOM(v.responseXML.documentElement)),l(m,v),u&&u(v)}}else a.asynchronous=!1;var c;if(typeof HTTP!="undefined"&&HTTP.Request){a.uri=i;var d=new HTTP.Request(a);d&&(c=d.transport)}else if(typeof Ajax!="undefined"&&Ajax.Request){var d=new Ajax.Request(i,a);d&&(c=d.transport)}if(t)return c;if(c&&c.responseXML&&c.responseXML.documentElement)return this.parseDOM(c.responseXML.documentElement)},k.ObjTree.prototype.parseDOM=function(i){if(!!i){if(this.__force_array={},this.force_array)for(var n=0;n<this.force_array.length;n++)this.__force_array[this.force_array[n]]=1;var t=this.parseElement(i);if(this.__force_array[i.nodeName]&&(t=[t]),i.nodeType!=11){var a={};a[i.nodeName]=t,t=a}return t}},k.ObjTree.prototype.parseElement=function(i){if(i.nodeType!=7){if(i.nodeType==3||i.nodeType==4){var n=i.nodeValue.match(/[^\x00-\x20]/);return n==null?void 0:i.nodeValue}var t,a={};if(i.attributes&&i.attributes.length){t={};for(var r=0;r<i.attributes.length;r++){var s=i.attributes[r].nodeName;if(typeof s=="string"){var l=i.attributes[r].nodeValue;!l||(s=this.attr_prefix+s,typeof a[s]=="undefined"&&(a[s]=0),a[s]++,this.addNode(t,s,a[s],l))}}}if(i.childNodes&&i.childNodes.length){var u=!0;t&&(u=!1);for(var r=0;r<i.childNodes.length&&u;r++){var c=i.childNodes[r].nodeType;c==3||c==4||(u=!1)}if(u){t||(t="");for(var r=0;r<i.childNodes.length;r++)t+=i.childNodes[r].nodeValue}else{t||(t={});for(var r=0;r<i.childNodes.length;r++){var s=i.childNodes[r].nodeName;if(typeof s=="string"){var l=this.parseElement(i.childNodes[r]);!l||(typeof a[s]=="undefined"&&(a[s]=0),a[s]++,this.addNode(t,s,a[s],l))}}}}return t}},k.ObjTree.prototype.addNode=function(i,n,t,a){this.__force_array[n]?(t==1&&(i[n]=[]),i[n][i[n].length]=a):t==1?i[n]=a:t==2?i[n]=[i[n],a]:i[n][i[n].length]=a},k.ObjTree.prototype.writeXML=function(i){var n=this.hash_to_xml(null,i);return this.xmlDecl+n},k.ObjTree.prototype.hash_to_xml=function(i,n){var t=[],a=[];for(var r in n)if(!!n.hasOwnProperty(r)){var s=n[r];r.charAt(0)!=this.attr_prefix?typeof s=="undefined"||s==null?t[t.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?t[t.length]=this.array_to_xml(r,s):typeof s=="object"?t[t.length]=this.hash_to_xml(r,s):t[t.length]=this.scalar_to_xml(r,s):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var l=a.join(""),u=t.join("");return typeof i=="undefined"||i==null||(t.length>0?u.match(/\n/)?u="<"+i+l+`>
`+u+"</"+i+`>
`:u="<"+i+l+">"+u+"</"+i+`>
`:u="<"+i+l+` />
`),u},k.ObjTree.prototype.array_to_xml=function(i,n){for(var t=[],a=0;a<n.length;a++){var r=n[a];typeof r=="undefined"||r==null?t[t.length]="<"+i+" />":typeof r=="object"&&r.constructor==Array?t[t.length]=this.array_to_xml(i,r):typeof r=="object"?t[t.length]=this.hash_to_xml(i,r):t[t.length]=this.scalar_to_xml(i,r)}return t.join("")},k.ObjTree.prototype.scalar_to_xml=function(i,n){return i=="#text"?this.xml_escape(n):"<"+i+">"+this.xml_escape(n)+"</"+i+`>
`},k.ObjTree.prototype.xml_escape=function(i){return i.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var pt=k,mt={width:40,height:40},Ue={width:40,height:40},xt={width:40,height:40},Qe={width:100,height:80},gt={width:100,height:80},qe={rect:{radius:5,stroke:"rgb(24, 125, 255)"},circle:{r:18,stroke:"rgb(24, 125, 255)"},polygon:{stroke:"rgb(24, 125, 255)"},polyline:{stroke:"rgb(24, 125, 255)",hoverStroke:"rgb(24, 125, 255)",selectedStroke:"rgb(24, 125, 255)"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}},ie;(function(i){i.START="startEvent",i.END="endEvent",i.GATEWAY="exclusiveGateway",i.USER="userTask",i.SYSTEM="serviceTask",i.FLOW="sequenceFlow"})(ie||(ie={}));var _e=["startEvent","endEvent","exclusiveGateway","userTask","serviceTask","sequenceFlow","completionCondition","multiInstanceLoopCharacteristics","conditionExpression","#text"],ze=["-name","-id","incoming","outgoing","-sourceRef","-targetRef"];function We(i){var n={};return Object.entries(i).forEach(function(t){var a=(0,I.Z)(t,2),r=a[0],s=a[1];s!=null&&(typeof s!="object"?r.indexOf("-")===0||_e.includes(r)?n[r]=s:n["-".concat(r)]=s:n[r]=We(s))}),n}function Ge(i){var n={};return Object.entries(i).forEach(function(t){var a=(0,I.Z)(t,2),r=a[0],s=a[1];typeof s=="string"?r.indexOf("-")===0?n[r.substr(1)]=s:n[r]=s:typeof s=="object"?n[r]=Ge(s):n[r]=s}),n}function Le(i,n){var t=new Map;n.nodes.forEach(function(r){var s,l={"-id":r.id};if((s=r.text)!==null&&s!==void 0&&s.value&&(l["-name"]=r.text.value),r.properties){var u=We(r.properties);Object.assign(l,u)}t.set(r.id,l),i[r.type]?Array.isArray(i[r.type])?i[r.type].push(l):i[r.type]=[i[r.type],l]:i[r.type]=l});var a=n.edges.map(function(r){var s,l={"-id":r.id,"-sourceRef":r.sourceNodeId,"-targetRef":r.targetNodeId};if((s=r.text)!==null&&s!==void 0&&s.value){var u;l["-name"]=(u=r.text)===null||u===void 0?void 0:u.value}if(r.properties){var c=We(r.properties);Object.assign(l,c)}return l});i[ie.FLOW]=a}function yt(i,n){i["bpmndi:BPMNEdge"]=n.edges.map(function(t){var a,r=t.id,s=t.pointsList.map(function(u){var c=u.x,d=u.y;return{"-x":c,"-y":d}}),l={"-id":"".concat(r,"_di"),"-bpmnElement":r,"di:waypoint":s};return(a=t.text)!==null&&a!==void 0&&a.value&&(l["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),l}),i["bpmndi:BPMNShape"]=n.nodes.map(function(t){var a,r=t.id,s=100,l=80,u=t.x,c=t.y,d=de.shapeConfigMap.get(t.type);d&&(s=d.width,l=d.height),u-=s/2,c-=l/2;var v={"-id":"".concat(r,"_di"),"-bpmnElement":r,"dc:Bounds":{"-x":u,"-y":c,"-width":s,"-height":l}};return(a=t.text)!==null&&a!==void 0&&a.value&&(v["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),v})}function et(i){var n=[],t=[],a=i.definitions;if(a){var r=a.process;Object.keys(r).forEach(function(s){if(_e.includes(s)){var l=r[s];if(s===ie.FLOW){var u=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];t=Et(l,u)}else{var c=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];n=n.concat(Rt(l,c,s))}}})}return{nodes:n,edges:t}}function Rt(i,n,t){var a=[];if(Array.isArray(i))i.forEach(function(l){var u;Array.isArray(n)?u=n.find(function(d){return d["-bpmnElement"]===l["-id"]}):u=n;var c=tt(u,t,l);a.push(c)});else{var r;Array.isArray(n)?r=n.find(function(l){return l["-bpmnElement"]===i["-id"]}):r=n;var s=tt(r,t,i);a.push(s)}return a}function tt(i,n,t){var a=Number(i["dc:Bounds"]["-x"]),r=Number(i["dc:Bounds"]["-y"]),s=t["-name"],l=de.shapeConfigMap.get(n);l&&(a+=l.width/2,r+=l.height/2);var u;Object.entries(t).forEach(function(m){var g=(0,I.Z)(m,2),Z=g[0],se=g[1];ze.indexOf(Z)===-1&&(u||(u={}),u[Z]=se)}),u&&(u=Ge(u));var c;if(s&&(c={x:a,y:r,value:s},i["bpmndi:BPMNLabel"]&&i["bpmndi:BPMNLabel"]["dc:Bounds"])){var d=i["bpmndi:BPMNLabel"]["dc:Bounds"];c.x=Number(d["-x"])+Number(d["-width"])/2,c.y=Number(d["-y"])+Number(d["-height"])/2}var v={id:i["-bpmnElement"],type:n,x:a,y:r,properties:u};return c&&(v.text=c),v}function Et(i,n){var t=[];if(Array.isArray(i))i.forEach(function(r){var s;Array.isArray(n)?s=n.find(function(l){return l["-bpmnElement"]===r["-id"]}):s=n,t.push(nt(s,r))});else{var a;Array.isArray(n)?a=n.find(function(r){return r["-bpmnElement"]===i["-id"]}):a=n,t.push(nt(a,i))}return t}function nt(i,n){var t,a=n["-name"];if(a){var r=i["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;a.split(`
`).forEach(function(c){s<c.length&&(s=c.length)}),t={value:a,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var l;Object.entries(n).forEach(function(c){var d=(0,I.Z)(c,2),v=d[0],m=d[1];ze.indexOf(v)===-1&&(l||(l={}),l[v]=m)}),l&&(l=Ge(l));var u={id:n["-id"],type:ie.FLOW,pointsList:i["di:waypoint"].map(function(c){return{x:Number(c["-x"]),y:Number(c["-y"])}}),sourceNodeId:n["-sourceRef"],targetNodeId:n["-targetRef"],properties:l};return t&&(u.text=t),u}var de={pluginName:"bpmn-adapter",install:function(n){n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut},shapeConfigMap:new Map,setCustomShape:function(n,t){this.shapeConfigMap.set(n,t)},adapterOut:function(n,t){var a={"-id":"".concat(t),"-isExecutable":"true"};Le(a,n);var r={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};yt(r,n);var s={definitions:{"-id":"Definitions_".concat(t),"-xmlns":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-xmlns:flowable":"http://flowable.org/bpmn","-xmlns:s":"http://surveyking.cn/bpmn","-targetNamespace":"http://bpmn.io/schema/bpmn","-exporter":"bpmn-js (https://demo.bpmn.io)","-exporterVersion":"7.3.0",process:a,"bpmndi:BPMNDiagram":{"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":r}}};return s},adapterIn:function(n){if(n)return et(n)}};de.shapeConfigMap.set(ie.START,{width:mt.width,height:mt.height}),de.shapeConfigMap.set(ie.END,{width:Ue.width,height:Ue.height}),de.shapeConfigMap.set(ie.GATEWAY,{width:xt.width,height:xt.height}),de.shapeConfigMap.set(ie.SYSTEM,{width:Qe.width,height:Qe.height}),de.shapeConfigMap.set(ie.USER,{width:gt.width,height:gt.height});var it={pluginName:"bpmn-xml-adapter",install:function(n){n.adapterIn=this.adapterXmlIn,n.adapterOut=this.adapterXmlOut},adapterXmlIn:function(n){var t=new pt.ObjTree().parseXML(n);return de.adapterIn(t)},adapterXmlOut:function(n){var t=de.adapterOut(n,this.options.extraConf.id);return It(t)}},Vt=null,X=o(69610),ye=o(54941),rt=o(63543),Ie=o(94663),J=o(43028),Q=o(5869),Re=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(a,r){return(0,X.Z)(this,t),a.id||(a.id="starter"),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),n.call(this,a,r)}return(0,ye.Z)(t,[{key:"setAttributes",value:function(){this.r=18}},{key:"getConnectedTargetRules",value:function(){var r=(0,rt.Z)((0,Ie.Z)(t.prototype),"getConnectedTargetRules",this).call(this),s={message:"\u8D77\u59CB\u8282\u70B9\u4E0D\u80FD\u4F5C\u4E3A\u8FB9\u7684\u7EC8\u70B9",validate:function(){return!1}};return r.push(s),r}}]),t}(B.CircleNodeModel);Re.extendKey="StartEventModel";var at=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(){return(0,X.Z)(this,t),n.apply(this,arguments)}return(0,ye.Z)(t,[{key:"getShape",value:function(){var r=this.props.model,s=r.x,l=r.y,u=this.props.model.getNodeStyle(),c=u.stroke;return(0,B.h)("svg",{x:s-64/2+10,y:l-64/2+10,width:64,height:64,viewBox:"0 0 32 32"},(0,B.h)("path",{fill:c,d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM10.622 8.415l4.879 3.252a.4.4 0 0 1 0 .666l-4.88 3.252a.4.4 0 0 1-.621-.332V8.747a.4.4 0 0 1 .622-.332z"}))}}]),t}(B.CircleNode);at.extendKey="StartEventNode";var He={type:"startEvent",view:at,model:Re},st=He,Xe=o(17244),jt=(0,Xe.kP)("_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",10);function Be(){return jt()}var ot=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(a,r){return(0,X.Z)(this,t),a.id||(a.id="Event_".concat(Be())),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),n.call(this,a,r)}return(0,ye.Z)(t,[{key:"setAttributes",value:function(){this.r=18}},{key:"getConnectedSourceRules",value:function(){var r=(0,rt.Z)((0,Ie.Z)(t.prototype),"getConnectedSourceRules",this).call(this),s={message:"\u7ED3\u675F\u8282\u70B9\u4E0D\u80FD\u4F5C\u4E3A\u8FB9\u7684\u8D77\u70B9",validate:function(){return!1}};return r.push(s),r}}]),t}(B.CircleNodeModel);ot.extendKey="EndEventModel";var ut=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(){return(0,X.Z)(this,t),n.apply(this,arguments)}return(0,ye.Z)(t,[{key:"getAnchorStyle",value:function(){return{visibility:"hidden"}}},{key:"getShape",value:function(){var r=this.props.model,s=r.getNodeStyle(),l=r.x,u=r.y,c=r.r,d=r.width,v=r.height,m=(0,rt.Z)((0,Ie.Z)(t.prototype),"getShape",this).call(this),g=this.props.model.getNodeStyle(),Z=g.fill,se=g.stroke,oe=g.strokeWidth,be=(0,B.h)("svg",{x:l-64/2+10,y:u-64/2+10,width:64,height:64,viewBox:"0 0 32 32"},(0,B.h)("path",{fill:se,d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM9 9h6v6H9V9z"}));return be}}]),t}(B.CircleNode);ut.extendKey="EndEventView";var kt={type:"endEvent",view:ut,model:ot},lt=kt,ct=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(a,r){var s;return(0,X.Z)(this,t),a.id||(a.id="Gateway_".concat(Be())),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),s=n.call(this,a,r),s.points=[[25,0],[50,25],[25,50],[0,25]],s}return t}(B.PolygonNodeModel);ct.extendKey="ExclusiveGatewayModel";var dt=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(){return(0,X.Z)(this,t),n.apply(this,arguments)}return(0,ye.Z)(t,[{key:"getShape",value:function(){var r=this.props.model,s=r.x,l=r.y,u=r.width,c=r.height,d=r.points,v=r.getNodeStyle();return(0,B.h)("g",{transform:"matrix(1 0 0 1 ".concat(s-u/2," ").concat(l-c/2,")")},(0,B.h)("polygon",(0,O.Z)((0,O.Z)({},v),{},{x:s,y:l,points:d})),(0,B.h)("path",(0,O.Z)({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},v)))}}]),t}(B.PolygonNode);dt.extendKey="ExclusiveGatewayNode";var vt={type:"exclusiveGateway",view:dt,model:ct},Ct=vt,x=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(a,r){return(0,X.Z)(this,t),a.id||(a.id="Activity_".concat(Be())),n.call(this,a,r)}return t}(B.RectNodeModel);x.extendKey="UserTaskModel";var f=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(){return(0,X.Z)(this,t),n.apply(this,arguments)}return(0,ye.Z)(t,[{key:"getLabelShape",value:function(){var r=this.props.model,s=r.x,l=r.y,u=r.width,c=r.height,d=r.getNodeStyle();return(0,B.h)("svg",{x:s-u/2+5,y:l-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},(0,B.h)("path",{fill:d.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))}},{key:"getShape",value:function(){var r=this.props.model,s=r.x,l=r.y,u=r.width,c=r.height,d=r.radius,v=r.getNodeStyle();return(0,B.h)("g",{},[(0,B.h)("rect",(0,O.Z)((0,O.Z)({},v),{},{x:s-u/2,y:l-c/2,rx:d,ry:d,width:u,height:c})),this.getLabelShape()])}}]),t}(B.RectNode);f.extendKey="UserTaskNode";var j={type:"userTask",view:f,model:x},C=j,w=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(a,r){return(0,X.Z)(this,t),a.id||(a.id="Activity_".concat(Be())),n.call(this,a,r)}return t}(B.RectNodeModel);w.extendKey="ServiceTaskModel";var A=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(){return(0,X.Z)(this,t),n.apply(this,arguments)}return(0,ye.Z)(t,[{key:"getLabelShape",value:function(){var r=this.props.model,s=r.x,l=r.y,u=r.width,c=r.height,d=r.getNodeStyle();return(0,B.h)("svg",{x:s-u/2+5,y:l-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},(0,B.h)("path",{fill:d.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))}},{key:"getShape",value:function(){var r=this.props.model,s=r.x,l=r.y,u=r.width,c=r.height,d=r.radius,v=r.getNodeStyle();return(0,B.h)("g",{},[(0,B.h)("rect",(0,O.Z)({x:s-u/2,y:l-c/2,rx:d,ry:d,width:u,height:c},v)),this.getLabelShape()])}}]),t}(B.RectNode);A.extendKey="ServiceTaskNode";var U={type:"serviceTask",view:A,model:w},S=U,R=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(a,r){return(0,X.Z)(this,t),a.id||(a.id="Flow_".concat(Be())),n.call(this,a,r)}return t}(B.PolylineEdgeModel);R.extendKey="SequenceFlowModel";var q=function(i){(0,J.Z)(t,i);var n=(0,Q.Z)(t);function t(){return(0,X.Z)(this,t),n.apply(this,arguments)}return t}(B.PolylineEdge);q.extendKey="SequenceFlowEdge";var re={type:"sequenceFlow",view:q,model:R},ve=re,ae=function i(n){var t=n.lf;(0,X.Z)(this,i),t.setTheme(qe),t.register(st),t.register(lt),t.register(Ct),t.register(C),t.register(S),t.options.customBpmnEdge||(t.register(ve),t.setDefaultEdgeType("sequenceFlow"))};ae.pluginName="BpmnElement";var De=o(57338),pe=o(25084),K=o(29656),T=o(29589),e=o(85893),b={mode:"application/xml",lineWrapping:!0,lineNumbers:!0},z=function(n){var t=n.visible,a=n.xml,r=n.onClose,s=(0,y.useState)(),l=(0,I.Z)(s,2),u=l[0],c=l[1];return(0,e.jsx)(pe.Z,{visible:t,onClose:function(){return r(u.getValue())},width:850,className:"flow-drawer",children:(0,e.jsx)(K.Rt,{autoCursor:!1,value:a,options:b,editorDidMount:function(v){return c(v)},onChange:function(){}})})},p=o(80937),_={};function P(i,n){_[i]=n}function we(i){return _[i]}var he=o(18106),M=o(51752),Ee=o(43358),W=o(34041),an=o(32059),_n=o(13254),Ut=o(14277),ei=o(88983),Ft=o(47933),Ve=o(11628),sn=o(76826),zt=o(96486),on=["FillBlank","MultipleBlank","Textarea","Signature","Radio","Checkbox","Select","Cascader","MatrixAuto","MatrixRadio","MatrixCheckbox","MatrixFillBlank","MatrixScore","Upload","Score","Nps","Remark","SplitLine","User","Dept"],un=["Pagination","Remark","SplitLine"],ln={Pagination:"\u5206\u9875",Remark:"\u5907\u6CE8",SplitLine:"\u5206\u5272\u7EBF"};function Wt(i){var n=[];return i&&((on.includes(i.type)||un.includes(i.type))&&n.push({id:i.id,title:ln[i.type]||(0,sn.WO)(i.title),type:i.type}),i.children&&i.children.map(function(t){var a=Wt(t);a&&n.push.apply(n,(0,ee.Z)(a))})),n}var cn=function(n){var t=n.value,a=n.onChange;return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:n.title}),(0,e.jsx)("td",{onClick:function(){return a(2)},children:(0,e.jsx)(Ft.ZP,{value:2,checked:t===2})}),(0,e.jsx)("td",{onClick:function(){return a(1)},children:(0,e.jsx)(Ft.ZP,{value:1,checked:t===1})}),(0,e.jsx)("td",{onClick:function(){return a(0)},children:(0,e.jsx)(Ft.ZP,{value:0,checked:t===0})})]},n.id)},Bt=function(n){var t=n.onChange,a=n.value,r=a===void 0?{}:a,s=(0,Ve.IE)(),l=s.schema,u=(0,y.useMemo)(function(){return Wt(l)},[l]);(0,y.useEffect)(function(){if((0,zt.isEmpty)(r)&&u.length>0){var d={};u.forEach(function(v){return d[v.id]=2}),t&&t(d)}},[l,r,u,t]);var c=function(v){t&&t(u.reduce(function(m,g){return m[g.id]=v,m},{}))};return l?(0,e.jsx)("div",{children:(0,e.jsxs)("table",{className:"field-permission-table",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{style:{width:"64%"},children:"\u5B57\u6BB5\u540D"}),(0,e.jsx)("th",{style:{width:"12%"},children:"\u53EF\u7F16\u8F91"}),(0,e.jsx)("th",{style:{width:"12%"},children:"\u4EC5\u53EF\u89C1"}),(0,e.jsx)("th",{style:{width:"12%"},children:"\u9690\u85CF"})]})}),(0,e.jsx)("tbody",{children:u.map(function(d){return(0,y.createElement)(cn,(0,O.Z)((0,O.Z)({},d),{},{value:r[d.id],onChange:function(m){t&&t((0,O.Z)((0,O.Z)({},r),{},(0,an.Z)({},d.id,m)))},key:d.id}))})}),(0,e.jsx)("tfoot",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{}),(0,e.jsx)("td",{children:(0,e.jsx)(G.Z,{size:"small",type:"link",onClick:function(){return c(2)},children:"\u5168\u9009"})}),(0,e.jsx)("td",{children:(0,e.jsx)(G.Z,{size:"small",type:"link",onClick:function(){return c(1)},children:"\u5168\u9009"})}),(0,e.jsx)("td",{children:(0,e.jsx)(G.Z,{size:"small",type:"link",onClick:function(){return c(0)},children:"\u5168\u9009"})})]})})]})}):(0,e.jsx)("div",{children:(0,e.jsx)(Ut.Z,{image:Ut.Z.PRESENTED_IMAGE_SIMPLE,description:"\u95EE\u5377\u4E3A\u7A7A"})})},ti=o(20136),dn=o(55241),ni=o(94233),Dt=o(51890),Ne=o(36602),Gt=o(49101),ii=o(22385),Ht=o(61580),vn=o(43061),wt=function(n){var t=n.title,a=n.onClose,r=(0,y.useState)(!1),s=(0,I.Z)(r,2),l=s[0],u=s[1];return(0,e.jsx)(Ht.Z,{title:t,children:(0,e.jsxs)("div",{style:{position:"relative"},onMouseOver:function(){return u(!0)},onMouseLeave:function(){return u(!1)},children:[n.children,(0,e.jsx)(vn.Z,{onClick:function(){a&&a()},style:{color:"#f5222d",cursor:"pointer",visibility:l?"visible":"hidden",position:"absolute",right:0,top:0,transform:"translate(25%, -25%)",transformOrigin:"100% 0%"}})]})})},ri=o(71153),At=o(60331),ai=o(13062),ke=o(71230),si=o(48736),Xt=o(27049),oi=o(89032),me=o(15746),ui=o(62999),Kt=o(54680),hn=o(60780),fn=o.n(hn),pn=W.Z.Option,mn=(0,p.Pi)(function(i){var n=i.onChange,t=i.orgTreeData,a=i.positions,r=(0,y.useState)(),s=(0,I.Z)(r,2),l=s[0],u=s[1],c=(0,y.useState)(),d=(0,I.Z)(c,2),v=d[0],m=d[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ke.Z,{gutter:10,children:[(0,e.jsx)(me.Z,{span:16,children:(0,e.jsx)(Kt.Z,{onChange:function(Z){return u(Z)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:[{title:"\u53D1\u8D77\u4EBA\u5F53\u524D\u90E8\u95E8",value:"${currentDeptId}",key:"${currentDeptId}"},{title:"\u53D1\u8D77\u4EBA\u4E0A\u7EA7\u90E8\u95E8",value:"${parentDeptId}",key:"${parentDeptId}"}].concat((0,ee.Z)(t)),placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0,value:l})}),(0,e.jsx)(me.Z,{span:8,children:(0,e.jsx)(W.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",allowClear:!0,value:v,onChange:function(Z){return m(Z)},children:a.map(function(g){return(0,e.jsx)(pn,{value:g.id,children:g.name},g.id)})})})]}),(0,e.jsx)(ke.Z,{style:{marginTop:10},children:(0,e.jsx)(me.Z,{children:(0,e.jsx)(G.Z,{icon:(0,e.jsx)(Gt.Z,{}),onClick:function(){(l||v)&&n("P:".concat(l||"",":").concat(v||""))},children:"\u6DFB\u52A0"})})})]})}),bt=M.Z.TabPane,$t=W.Z.Option,xn=(0,p.Pi)(function(i){var n=i.value,t=n===void 0?[]:n,a=i.onChange,r=(0,Ne.m2)(),s=(0,Ne.LF)(t),l=r.depts,u=r.users,c=r.roles,d=r.positions,v=(0,y.useState)(),m=(0,I.Z)(v,2),g=m[0],Z=m[1];(0,y.useEffect)(function(){g&&r.loadUsers({deptId:g,pageSize:1024})},[g,r]);var se=(0,y.useMemo)(function(){return fn()(l.map(function(E){return{value:E.id,title:E.name,key:E.id,parentId:E.parentId}}),{parentProperty:"parentId",customID:"value"})},[l]),oe=function(L){var D=(0,ee.Z)(t);L.forEach(function(F){D.includes(F)||D.push(F)}),a(D)},be=function(){for(var L=arguments.length,D=new Array(L),F=0;F<L;F++)D[F]=arguments[F];a((0,ee.Z)(t.filter(function(V){return!D.includes(V)})))};return(0,e.jsx)("div",{style:{width:400},children:(0,e.jsxs)(M.Z,{defaultActiveKey:"1",children:[(0,e.jsx)(bt,{tab:"\u6210\u5458",children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsxs)(ke.Z,{gutter:20,children:[(0,e.jsx)(me.Z,{span:16,children:(0,e.jsx)(Kt.Z,{onChange:function(L){return Z(L)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:se,placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0})}),(0,e.jsx)(me.Z,{span:8,children:(0,e.jsx)(W.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",allowClear:!0,showSearch:!0,mode:"multiple",onChange:function(L){return oe(L)},maxTagCount:0,value:t.filter(function(E){return E.startsWith("U:")}),dropdownRender:function(L){return(0,e.jsxs)("div",{children:[L,(0,e.jsx)(Xt.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8},children:(0,e.jsx)(G.Z,{size:"small",type:"link",onClick:function(){return oe(u.map(function(F){return"U:".concat(F.id)}))},children:"\u5168\u9009"})})]})},children:u.map(function(E){return(0,e.jsx)($t,{value:"U:".concat(E.id),children:E.name},E.id)})})})]}),(0,e.jsx)(fe.Z,{style:{marginTop:20},wrap:!0,children:t.filter(function(E){return E.startsWith("U:")}).map(function(E){return(0,e.jsx)(At.Z,{closable:!0,color:"blue",onClose:function(){return be(E)},children:s.user[E.split(":")[1]]},E)})})]})},"fieldPermission"),(0,e.jsx)(bt,{tab:"\u89D2\u8272",children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsx)(W.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",allowClear:!0,showSearch:!0,mode:"multiple",value:t.filter(function(E){return E.startsWith("R:")}),onChange:function(L){return oe(L)},maxTagCount:0,children:c.map(function(E){return(0,e.jsx)($t,{value:"R:".concat(E.id),children:E.name},E.id)})}),(0,e.jsx)(fe.Z,{style:{marginTop:20},wrap:!0,children:t.filter(function(E){return E.startsWith("R:")}).map(function(E){return(0,e.jsx)(At.Z,{closable:!0,color:"blue",onClose:function(){return be(E)},children:s.role[E.split(":")[1]]},E)})})]})},"basicSetting"),(0,e.jsx)(bt,{tab:"\u673A\u6784\u5C97\u4F4D",children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsx)(mn,{positions:d,orgTreeData:se,onChange:function(L){return oe([L])}}),(0,e.jsx)(fe.Z,{style:{marginTop:20},wrap:!0,children:t.filter(function(E){return E.startsWith("P:")}).map(function(E){var L=E.split(":"),D=(0,I.Z)(L,3),F=D[1],V=D[2];return(0,e.jsxs)(At.Z,{closable:!0,color:"blue",onClose:function(){return be(E)},children:[s.org[F],"-",s.position[V]]},F+":"+V)})})]})},"advanceSetting")]})})}),gn=o(55686),Ke=(0,Ne.Gr)(function(i){var n=i.value,t=n===void 0?[]:n,a=i.onChange,r=(0,Ne.LF)(t),s=(0,Ne.m2)(),l=s.users,u=function(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];a((0,ee.Z)(t.filter(function(g){return!v.includes(g)})))};return(0,e.jsx)("div",{style:{lineHeight:"36px",paddingTop:10},children:(0,e.jsxs)(fe.Z,{wrap:!0,children:[(0,e.jsx)(dn.Z,{content:(0,e.jsx)(xn,{onChange:a,value:t}),trigger:"click",placement:"leftTop",children:(0,e.jsx)(Dt.C,{className:"add-user",icon:(0,e.jsx)(Gt.Z,{}),size:24})}),t.map(function(c){var d=c.split(":"),v=(0,I.Z)(d,3),m=v[0],g=v[1],Z=v[2];if(m=="U"){var se=l.find(function(oe){return oe.id===g});return(0,e.jsx)(wt,{title:r.user[g],onClose:function(){return u(c)},children:(0,e.jsx)(gn.Z,{user:{avatar:se==null?void 0:se.avatar},style:{backgroundColor:"#87d068"},size:24})},g)}else return m==="R"?(0,e.jsx)(wt,{title:r.role[g],onClose:function(){return u(c)},children:(0,e.jsx)(Dt.C,{style:{backgroundColor:"#40a9ff"},size:24,children:"R"})},g):m==="P"?(0,e.jsx)(wt,{title:"".concat(r.org[g],"-").concat(r.position[Z]),onClose:function(){return u(c)},children:(0,e.jsx)(Dt.C,{style:{backgroundColor:"#f56a00"},size:24,children:"P"})},"".concat(g,"-").concat(Z)):(0,e.jsx)(e.Fragment,{})})]})})},{name:"identity"}),li=null,ci=o(47673),St=o(4107),di=o(77576),yn=o(12028),En=o(2603),jn=o(11075),Cn=o(13105),Fn=o(3157),Bn=o(65602),Dn=o(89792),wn=o(15360),Ze=(0,Ne.Gr)(function(i){var n=i.value,t=i.onChange,a=i.initialValue;return(0,e.jsx)(yn.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",defaultChecked:!!a,checked:n,onChange:function(s){return t(s)}})}),An=(0,Ne.Gr)(function(i){var n=i.value,t=i.onChange;return(0,e.jsx)(St.Z,{value:n,onChange:t})}),Nt=(0,p.Pi)(function(i){var n=i.settings;return(0,e.jsxs)(p.Wo,{name:"setting",children:[n.includes("passwordRequired")&&(0,e.jsxs)("div",{className:"basic-setting",children:[(0,e.jsx)(En.Z,{className:"setting-icon"}),(0,e.jsxs)("div",{className:"setting-area",children:[(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)("span",{children:"\u586B\u5199\u5BC6\u7801"}),(0,e.jsx)(Ze,{name:"passwordRequired",initialValue:!0})]}),(0,e.jsx)("div",{className:"setting-hint",children:"\u51ED\u5BC6\u7801\u624D\u80FD\u586B\u5199\u8868\u5355"}),(0,e.jsx)("div",{className:"setting-content",children:(0,e.jsx)(An,{name:"password",syncDisplay:"passwordRequired"})})]})]}),n.includes("allowWithdrawStarter")&&(0,e.jsxs)("div",{className:"basic-setting",children:[(0,e.jsx)(jn.Z,{className:"setting-icon"}),(0,e.jsxs)("div",{className:"setting-area",children:[(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)("span",{children:"\u5141\u8BB8\u64A4\u56DE"}),(0,e.jsx)(Ze,{name:"allowWithdraw",initialValue:!0})]}),(0,e.jsx)("div",{className:"setting-hint",children:"\u5141\u8BB8\u7533\u8BF7\u4EBA\u5BF9\u672A\u8FDB\u5165\u6D41\u7A0B\uFF08\u7B2C\u4E00\u4E2A\u6D41\u7A0B\u8282\u70B9\u4E3A\u5F85\u5904\u7406\u72B6\u6001\uFF09\u7684\u7533\u8BF7\u8FDB\u884C\u64A4\u56DE"})]})]}),n.includes("flowLogVisible")&&(0,e.jsxs)("div",{className:"basic-setting",children:[(0,e.jsx)(Cn.Z,{className:"setting-icon"}),(0,e.jsxs)("div",{className:"setting-area",children:[(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)("span",{children:"\u6D41\u7A0B\u65E5\u5FD7"}),(0,e.jsx)(Ze,{name:"flowLogVisible",initialValue:!0})]}),(0,e.jsx)("div",{className:"setting-hint",children:"\u5141\u8BB8\u67E5\u770B\u6D41\u7A0B\u65E5\u5FD7"})]})]}),n.includes("allowAssignee")&&(0,e.jsxs)("div",{className:"basic-setting",children:[(0,e.jsx)(Fn.Z,{className:"setting-icon"}),(0,e.jsxs)("div",{className:"setting-area",children:[(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)("span",{children:"\u4EE3\u529E\u8F6C\u4EA4"}),(0,e.jsx)(Ze,{name:"allowAssignee",initialValue:!0})]}),(0,e.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u5C06\u5F85\u529E\u4E8B\u9879\u8F6C\u4EA4\u7ED9\u5176\u4ED6\u6210\u5458\u5904\u7406"}),(0,e.jsx)("div",{className:"setting-content",children:(0,e.jsx)(Ke,{name:"assignee",syncDisplay:"allowAssignee"})})]})]}),n.includes("allowWithdrawUser")&&(0,e.jsxs)("div",{className:"basic-setting",children:[(0,e.jsx)(Bn.Z,{className:"setting-icon"}),(0,e.jsxs)("div",{className:"setting-area",children:[(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)("span",{children:"\u6D41\u7A0B\u64A4\u56DE"}),(0,e.jsx)(Ze,{name:"allowWithdraw",initialValue:!0})]}),(0,e.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u5BF9\u5DF2\u5904\u7406\u8FC7\u7684\u5F85\u529E\u6570\u636E\u8FDB\u884C\u64A4\u56DE"})]})]}),n.includes("allowGoBack")&&(0,e.jsxs)("div",{className:"basic-setting",children:[(0,e.jsx)(Dn.Z,{className:"setting-icon"}),(0,e.jsxs)("div",{className:"setting-area",children:[(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)("span",{children:"\u6D41\u7A0B\u56DE\u9000"}),(0,e.jsx)(Ze,{name:"allowGoBack",initialValue:!0})]}),(0,e.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u5C06\u6D41\u7A0B\u56DE\u9000\u5230\u4E4B\u524D\u7684\u8282\u70B9\uFF0C\u4EC5\u5BA1\u6279\u8282\u70B9\u53EF\u7528"})]})]}),n.includes("allowFinishFlow")&&(0,e.jsxs)("div",{className:"basic-setting",children:[(0,e.jsx)(wn.Z,{className:"setting-icon"}),(0,e.jsxs)("div",{className:"setting-area",children:[(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)("span",{children:"\u6D41\u7A0B\u62D2\u7EDD"}),(0,e.jsx)(Ze,{name:"allowFinishFlow",initialValue:!0})]}),(0,e.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u4EE5\u62D2\u7EDD\u8BE5\u6D41\u7A0B\uFF08\u62D2\u7EDD\u540E\u6D41\u7A0B\u76F4\u63A5\u7ED3\u675F\uFF0C\u6807\u8BB0\u4E3A\u5DF2\u62D2\u7EDD\uFF09"})]})]})]})}),bn=o(54977),Sn=function(n){var t=n.value,a=n.onChange,r=(0,y.useState)(!1),s=(0,I.Z)(r,2),l=s[0],u=s[1],c=(0,y.useRef)(null),d=function(m){a&&a(m)};return(0,y.useEffect)(function(){if(l){var v;(v=c.current)===null||v===void 0||v.focus()}},[l]),l?(0,e.jsx)(St.Z,{ref:c,value:t,onChange:function(m){return d(m.target.value)},onKeyUp:function(m){m.key==="Enter"&&u(!1)},onBlur:function(m){d(m.target.value),u(!1)}}):(0,e.jsxs)("div",{style:{cursor:"pointer"},className:"title",onClick:function(){return u(!0)},children:[(0,e.jsx)("span",{children:t||"\u70B9\u51FB\u8BBE\u7F6E\u540D\u79F0"}),(0,e.jsx)(bn.Z,{style:{marginLeft:10}})]})},Nn=o(93224),Zn=o(30381),Yt=o.n(Zn),Jt=function(n){var t=n.children,a=n.syncDisplay,r=n.isMoment,s=(0,Nn.Z)(n,["children","syncDisplay","isMoment"]),l=(0,y.useMemo)(function(){return(0,p.$j)(function(u){var c=u.value,d=u.onChange,v=c;return r&&c&&(v=Yt()(c)),y.cloneElement(t,{value:v,onChange:function(g){d(g)}})},(0,p.jM)(function(u,c){return{value:u.value,onChange:function(v){Yt().isMoment(v)?c.onInput(v.valueOf()):c.onInput(v)}}}))},[]);return(0,e.jsx)(p.gN,(0,O.Z)((0,O.Z)({},s),{},{component:[l,n],reactions:[function(u){if(a)if(typeof a=="string"){var c=u.query(u.path.parent().concat(a)).get("value");c?u.display="visible":u.display="none"}else typeof a=="object"&&Object.keys(a).forEach(function(d){var v=u.query(u.path.parent().concat(d)).get("value");a[d].includes(v)?u.display="visible":u.display="none"})}]}))},xe=Jt,Qt=W.Z.Option,Zt=M.Z.TabPane,Mn=(0,p.Pi)(function(){var i=(0,Ve.IE)(),n=(0,y.useContext)(Ae),t=n.active,a=n.flow,r=(0,p.cI)(),s=r.query("".concat(i.id,".identity")).get("value"),l=(0,y.useState)(s?"assign":"all"),u=(0,I.Z)(l,2),c=u[0],d=u[1];return(0,y.useEffect)(function(){var v=c==="all"?"none":"visible",m=r.query("".concat(i.id,".identity")).take();m&&m.setDisplay(v)},[c]),(0,y.useEffect)(function(){a==null||a.setProperties(t.id,{candidateStarterUsers:s?s.filter(function(v){return v.startsWith("U:")}).join(","):void 0,candidateStarterGroups:s?s.map(function(v){return!v.startsWith("U:")}).join(","):void 0})},[s]),(0,e.jsxs)(p.Wo,{name:i.id,children:[(0,e.jsx)(p.gN,{name:"id",value:i.id}),(0,e.jsx)(p.gN,{name:"flowType",value:"process"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u7533\u8BF7\u4EBA"}),(0,e.jsx)("div",{children:(0,e.jsxs)(W.Z,{style:{width:200},onChange:function(m){return d(m)},value:c,children:[(0,e.jsx)(Qt,{value:"all",children:"\u6240\u6709\u4EBA\u53EF\u586B"}),(0,e.jsx)(Qt,{value:"assign",children:"\u6307\u5B9A\u6210\u5458\u53EF\u586B"})]})}),c==="assign"&&(0,e.jsx)(Ke,{}),(0,e.jsxs)(M.Z,{defaultActiveKey:"1",children:[(0,e.jsx)(Zt,{tab:"\u5B57\u6BB5\u8BBE\u7F6E",children:(0,e.jsx)(xe,{name:"fieldPermission",children:(0,e.jsx)(Bt,{})})},"fieldPermission"),(0,e.jsx)(Zt,{tab:"\u57FA\u7840\u8BBE\u7F6E",children:(0,e.jsx)(Nt,{settings:["passwordRequired","flowLogVisible","allowWithdrawStarter"]})},"basicSetting"),(0,e.jsx)(Zt,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",children:"\u9AD8\u7EA7\u8BBE\u7F6E"},"advanceSetting")]})]})]})});P("Process",Mn);var Tn=(0,p.Pi)(function(){var i,n=(0,y.useContext)(Ae),t=n.flow,a=n.active,r=function(l){t==null||t.updateText(a.id,l)};return(0,e.jsxs)(p.Wo,{name:a.id,children:[(0,e.jsx)(p.gN,{name:"id",value:a.id}),(0,e.jsxs)("div",{children:[(0,e.jsx)(ke.Z,{gutter:[10,10],children:(0,e.jsxs)(me.Z,{span:12,children:[(0,e.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u670D\u52A1\u540D\u79F0"}),(0,e.jsx)("div",{children:(0,e.jsx)(St.Z,{placeholder:"\u8BBE\u7F6E\u540D\u79F0",onChange:function(l){return r(l.target.value)},defaultValue:(i=a.text)===null||i===void 0?void 0:i.value})})]})}),(0,e.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u6761\u4EF6\u516C\u5F0F"})]})]})});P("StartEvent",Tn);var Pn=o(1870),qt=W.Z.Option,Mt=M.Z.TabPane,On=(0,p.Pi)(function(){var i=(0,y.useContext)(Ae),n=i.flow,t=i.active,a=(0,p.cI)(),r=a.query("".concat(t.id,".setting.isSequential")).get("value"),s=a.query("".concat(t.id,".identity")).get("value"),l=a.query("".concat(t.id,".setting.approveType")).get("value");return(0,y.useEffect)(function(){if((s==null?void 0:s.length)===1&&s[0].startsWith("U:")){n==null||n.setProperties(t.id,{"flowable:assignee":s[0].replace("U:",""),"flowable:candidateUsers":null,"flowable:candidateGroups":null,multiInstanceLoopCharacteristics:null});return}if(s&&r===1&&l===1){s.every(function(u){return u.startsWith("U:")})?n==null||n.setProperties(t.id,{"flowable:assignee":null,"flowable:candidateUsers":s==null?void 0:s.filter(function(u){return u.startsWith("U:")}).map(function(u){return u.replace("U:","")}).join(","),"flowable:candidateGroups":null,multiInstanceLoopCharacteristics:null}):n==null||n.setProperties(t.id,{"flowable:assignee":null,"flowable:candidateUsers":"${t.getUsers('".concat(t.id,"', starterUserId)}"),"flowable:candidateGroups":null,multiInstanceLoopCharacteristics:null});return}n==null||n.setProperties(t.id,{"flowable:assignee":"${t.getAssignee(user)}","flowable:candidateGroups":"${t.getCandidateGroups(user)}",multiInstanceLoopCharacteristics:{isSequential:r===1?"false":"true","flowable:collection":"${t.getUser(execution)}","flowable:elementVariable":"user",completionCondition:"${t.isComplete(execution) }"}})},[r,s,l]),(0,e.jsxs)(p.Wo,{name:t.id,children:[(0,e.jsx)(p.gN,{name:"id",value:t.id}),(0,e.jsx)(p.gN,{name:"flowType",value:"userTask"}),(0,e.jsxs)("div",{children:[(0,e.jsxs)(ke.Z,{gutter:[10,10],children:[(0,e.jsxs)(me.Z,{span:12,children:[(0,e.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u8D1F\u8D23\u4EBA"}),(0,e.jsx)("div",{children:(0,e.jsx)(p.Wo,{name:"setting",children:(0,e.jsx)(xe,{name:"isSequential",initialValue:1,children:(0,e.jsxs)(W.Z,{style:{width:"100%"},children:[(0,e.jsx)(W.Z.Option,{value:1,children:"\u5E38\u89C4\u5BA1\u6279"}),(0,e.jsx)(W.Z.Option,{value:2,children:"\u9010\u7EA7\u5BA1\u6279"})]})})})})]}),r===1&&(0,e.jsxs)(me.Z,{span:12,children:[(0,e.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u5BA1\u6279\u7C7B\u578B",(0,e.jsx)(Ht.Z,{title:"\u8D1F\u8D23\u4EBA\u4E3A\u591A\u4EBA\u65F6\u7684\u5BA1\u6279\u65B9\u5F0F",children:(0,e.jsx)(Pn.Z,{style:{marginLeft:5,color:"rgba(43,52,65,.4)",cursor:"pointer"}})})]}),(0,e.jsx)("div",{children:(0,e.jsx)(p.Wo,{name:"setting",children:(0,e.jsx)(xe,{name:"approveType",initialValue:1,syncDisplay:{isSequential:[1]},children:(0,e.jsxs)(W.Z,{style:{width:"100%"},children:[(0,e.jsx)(qt,{value:1,children:"\u6216\u7B7E(\u4E00\u540D\u8D1F\u8D23\u4EBA\u901A\u8FC7\u6216\u8005\u62D2\u7EDD\u5373\u53EF)"}),(0,e.jsx)(qt,{value:2,children:"\u4F1A\u7B7E(\u9700\u6240\u6709\u8D1F\u8D23\u4EBA\u901A\u8FC7)"})]})})})})]}),(0,e.jsx)(me.Z,{span:24,children:(0,e.jsx)(Ke,{})})]}),(0,e.jsxs)(M.Z,{defaultActiveKey:"1",children:[(0,e.jsx)(Mt,{tab:"\u5B57\u6BB5\u8BBE\u7F6E",children:(0,e.jsx)(xe,{name:"fieldPermission",children:(0,e.jsx)(Bt,{})})},"fieldPermission"),(0,e.jsx)(Mt,{tab:"\u57FA\u7840\u8BBE\u7F6E",children:(0,e.jsx)(Nt,{settings:["allowAssignee","allowFinishFlow","allowGoBack","allowWithdrawStarter","flowLogVisible"]})},"basicSetting"),(0,e.jsx)(Mt,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",children:"\u9AD8\u7EA7\u8BBE\u7F6E"},"advanceSetting")]})]})]})});P("userTask",On);var Ln=function(){return(0,e.jsx)("div",{})};P("EndEvent",Ln);var ge=o(1997),In=(0,p.Pi)(function(){var i=(0,y.useContext)(Ae),n=i.flow,t=i.active,a=(0,p.cI)(),r=(0,Ve.IE)(),s=r.schema,l=(0,y.useState)(!1),u=(0,I.Z)(l,2),c=u[0],d=u[1],v=(0,y.useMemo)(function(){return(0,ge.sJ)(r.schema)},[r]),m=a.query("".concat(t.id,".expression")).get("value");return(0,y.useEffect)(function(){n==null||n.setProperties(t.id,{conditionExpression:{"xsi:type":"tFormalExpression","#text":"${t.condition(execution)}"}})},[m]),(0,e.jsxs)(p.Wo,{name:t.id,children:[(0,e.jsx)(p.gN,{name:"id",value:t.id}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u6761\u4EF6\u516C\u5F0F",(0,e.jsx)(G.Z,{type:"link",onClick:function(){return d(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,e.jsx)("div",{className:"formula-container",children:(0,e.jsx)(xe,{name:"expression",children:(0,e.jsx)(ge.ML,{variable:v,readOnly:!0,placeholder:"\u516C\u5F0F\u4E3A\u7A7A\uFF0C\u8BF7\u8BBE\u7F6E"})})}),r.schema&&(0,e.jsx)(ge.ZP,{visible:c,value:m,title:"\u6761\u4EF6\u516C\u5F0F\u8BBE\u7F6E",schema:s,onCancel:function(){return d(!1)},functions:[{name:"\u57FA\u7840",functions:[{name:"hah",description:"heih"}]}],onOk:function(Z){a.setValuesIn("".concat(t.id,".expression"),Z),d(!1)}})]})]})});P("sequenceFlow",In);var Tt=M.Z.TabPane,Rn=(0,p.Pi)(function(){var i=(0,y.useContext)(Ae),n=i.flow,t=i.active,a=(0,p.cI)(),r=(0,Ve.IE)(),s=(0,y.useState)(!1),l=(0,I.Z)(s,2),u=l[0],c=l[1],d=(0,y.useMemo)(function(){return(0,ge.sJ)(r.schema)},[r]),v=a.query("".concat(t.id,".expression")).get("value"),m=a.query("".concat(t.id,".flowType")).get("value");return(0,y.useEffect)(function(){n==null||n.setProperties(t.id,{"flowable:expression":"${t.serve(execution)}"})},[v,t]),(0,y.useEffect)(function(){if(m){var g;a.query("*(".concat(t.id,".copyToFlowType,").concat(t.id,".mailFlowType,").concat(t.id,".smsFlowType,").concat(t.id,".httpFlowType)")).forEach(function(Z){return Z.setDisplay("none")}),(g=a.query("".concat(t.id,".").concat(m,"FlowType")).take())===null||g===void 0||g.setDisplay("visible"),n==null||n.setProperties(t.id,{"s:type":m})}},[m,t]),(0,e.jsxs)(p.Wo,{name:t.id,children:[(0,e.jsx)(p.gN,{name:"id",value:t.id}),(0,e.jsxs)("div",{children:[(0,e.jsx)(ke.Z,{gutter:[10,10],children:(0,e.jsxs)(me.Z,{span:12,children:[(0,e.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u670D\u52A1\u7C7B\u578B"}),(0,e.jsx)("div",{children:(0,e.jsx)(xe,{name:"flowType",initialValue:"copyTo",children:(0,e.jsxs)(W.Z,{style:{width:200},children:[(0,e.jsx)(W.Z.Option,{value:"copyTo",children:"\u6284\u9001\u4EFB\u52A1"}),(0,e.jsx)(W.Z.Option,{value:"mail",children:"\u53D1\u9001\u90AE\u4EF6"}),(0,e.jsx)(W.Z.Option,{value:"sms",children:"\u53D1\u9001\u77ED\u4FE1"}),(0,e.jsx)(W.Z.Option,{value:"http",children:"\u8C03\u7528\u63A5\u53E3"})]})})})]})}),m==="copyTo"&&(0,e.jsx)(p.jG,{name:"sendFlowType",children:(0,e.jsxs)(M.Z,{defaultActiveKey:"1",children:[(0,e.jsx)(Tt,{tab:"\u5B57\u6BB5\u8BBE\u7F6E",children:(0,e.jsx)(xe,{name:"fieldPermission",children:(0,e.jsx)(Bt,{})})},"fieldPermission"),(0,e.jsx)(Tt,{tab:"\u57FA\u7840\u8BBE\u7F6E",children:(0,e.jsx)(Nt,{settings:["flowLogVisible"]})},"basicSetting"),(0,e.jsx)(Tt,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",children:"\u9AD8\u7EA7\u8BBE\u7F6E"},"advanceSetting")]})}),m==="mail"&&(0,e.jsxs)(p.jG,{name:"mailFlowType",children:[(0,e.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u6536\u4EF6\u4EBA"}),(0,e.jsxs)("div",{children:[(0,e.jsx)(Ke,{name:"identity"}),(0,e.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u6761\u4EF6\u516C\u5F0F",(0,e.jsx)(G.Z,{type:"link",onClick:function(){return c(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,e.jsx)("div",{className:"formula-container",children:(0,e.jsx)(xe,{name:"expression",children:(0,e.jsx)(ge.ML,{variable:d,readOnly:!0,placeholder:"\u6A21\u677F\u4E3A\u7A7A\uFF0C\u8BF7\u8BBE\u7F6E"})})}),r.schema&&(0,e.jsx)(ge.ZP,{visible:u,value:v,title:"\u90AE\u4EF6\u6A21\u677F\u8BBE\u7F6E",schema:r.schema,onCancel:function(){return c(!1)},functionVisible:!1,onOk:function(Z){a.setValuesIn("".concat(t.id,".expression"),Z),c(!1)}})]})]}),m==="sms"&&(0,e.jsxs)(p.jG,{name:"smsFlowType",children:[(0,e.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u6536\u4EF6\u4EBA"}),(0,e.jsxs)("div",{children:[(0,e.jsx)(Ke,{name:"identity"}),(0,e.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u6761\u4EF6\u516C\u5F0F",(0,e.jsx)(G.Z,{type:"link",onClick:function(){return c(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,e.jsx)("div",{className:"formula-container",children:(0,e.jsx)(xe,{name:"expression",children:(0,e.jsx)(ge.ML,{variable:d,readOnly:!0,placeholder:"\u6A21\u677F\u4E3A\u7A7A\uFF0C\u8BF7\u8BBE\u7F6E"})})}),r.schema&&(0,e.jsx)(ge.ZP,{visible:u,value:v,title:"\u77ED\u4FE1\u6A21\u677F\u8BBE\u7F6E",schema:r.schema,onCancel:function(){return c(!1)},functionVisible:!1,onOk:function(Z){a.setValuesIn("".concat(t.id,".expression"),Z),c(!1)}})]})]}),m==="http"&&(0,e.jsxs)(p.jG,{name:"httpFlowType",children:[(0,e.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u63A5\u53E3\u5730\u5740\u914D\u7F6E",(0,e.jsx)(G.Z,{type:"link",onClick:function(){return c(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,e.jsx)("div",{className:"formula-container",children:(0,e.jsx)(xe,{name:"expression",children:(0,e.jsx)(ge.ML,{variable:d,readOnly:!0,placeholder:"\u8BF7\u8F93\u5165\u63A5\u53E3\u5730\u5740"})})}),r.schema&&(0,e.jsx)(ge.ZP,{visible:u,value:v,title:"\u63A5\u53E3\u5730\u5740\u8BBE\u7F6E",schema:r.schema,onCancel:function(){return c(!1)},functionVisible:!1,onOk:function(Z){a.setValuesIn("".concat(t.id,".expression"),Z),c(!1)}})]})]})]})});P("serviceTask",Rn);var Vn=o(73171),kn=o(94184),Un=o.n(kn),zn={Process:"\u53D1\u8D77\u4EBA",serviceTask:"\u53D1\u9001\u8282\u70B9",userTask:"\u5BA1\u6279\u8282\u70B9",sequenceFlow:"\u6D41\u7A0B\u5206\u652F"},Wn=(0,p.Pi)(function(){var i=(0,y.useContext)(Ae),n=i.active,t=i.flow,a=(0,p.cI)(),r=a.query("".concat(n.id,".name")).get("value");return(0,y.useEffect)(function(){t==null||t.updateText(n.id,r)},[n,r,t]),(0,e.jsxs)("div",{className:Un()("header",(0,zt.snakeCase)(n.type)),children:[(0,e.jsx)("div",{children:(0,e.jsx)(Jt,{name:"name",basePath:n.id,children:(0,e.jsx)(Sn,{})})}),(0,e.jsxs)("div",{className:"action",children:[zn[n.type],(0,e.jsx)(Xt.Z,{type:"vertical"}),(0,e.jsx)("span",{className:"action-delete",children:(0,e.jsx)(Vn.Z,{})})]})]})}),Gn=Wn,Ae=y.createContext({}),Hn=(0,p.Pi)(function(){var i=(0,y.useContext)(Ae),n=i.active,t=function(){var r=we(n.type);return n&&n.type&&!r&&console.log(n.type+"\u672A\u6CE8\u518C"),n&&n.type&&r?y.createElement(we(n.type)):y.createElement(we("Process"))};return(0,e.jsx)("div",{children:(0,e.jsxs)(pe.Z,{visible:!0,mask:!1,closable:!1,width:500,className:"properties-panel",children:[(0,e.jsx)(Gn,{}),t()]})})}),Xn=Hn,Kn=o(99008),_t=o(54531);function $n(i){var n=i.lf;function t(){n.dnd.startDrag({type:"startEvent",text:"\u5F00\u59CB"})}function a(){n.dnd.startDrag({type:"userTask"})}function r(){n.dnd.startDrag({type:"serviceTask"})}function s(){n.dnd.startDrag({type:"exclusiveGateway"})}function l(){n.dnd.startDrag({type:"endEvent",text:"\u7ED3\u675F"})}function u(){n.updateEditConfig({stopMoveGraph:!0})}return n&&n.on("selection:selected",function(){n.updateEditConfig({stopMoveGraph:!1})}),(0,e.jsxs)("div",{className:"pattern",children:[(0,e.jsx)("div",{className:"pattern-selection",onMouseDown:function(){return u()}}),(0,e.jsx)("div",{children:"\u9009\u533A"}),(0,e.jsx)("div",{className:"pattern-start",onMouseDown:function(){return t()}}),(0,e.jsx)("div",{children:"\u5F00\u59CB"}),(0,e.jsx)("div",{className:"pattern-user",onMouseDown:function(){return a()}}),(0,e.jsx)("div",{children:"\u5BA1\u6279\u8282\u70B9"}),(0,e.jsx)("div",{className:"pattern-send",onMouseDown:function(){return r()}}),(0,e.jsx)("div",{children:"\u6284\u9001\u8282\u70B9"}),(0,e.jsx)("div",{className:"pattern-condition",onMouseDown:function(){return s()}}),(0,e.jsx)("div",{children:"\u6761\u4EF6\u5224\u65AD"}),(0,e.jsx)("div",{className:"pattern-end",onMouseDown:function(){return l()}}),(0,e.jsx)("div",{children:"\u7ED3\u675F"})]})}var Yn=function(n){return`
<definitions id="Definitions_`.concat(n,`" xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:flowable="http://flowable.org/bpmn" xmlns:s="http://surveyking.cn/bpmn" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="7.3.0">
  <process id="`).concat(n,`" isExecutable="true">
    <startEvent id="starter" />
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="`).concat(n,`">
        <bpmndi:BPMNShape id="starter_di" bpmnElement="starter">
          <dc:Bounds x="180" y="120" width="40" height="40" />
        </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
`)},vi={type:"startEvent",text:"\u5F00\u59CB",label:"\u5F00\u59CB",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM10.622 8.415l4.879 3.252a.4.4 0 0 1 0 .666l-4.88 3.252a.4.4 0 0 1-.621-.332V8.747a.4.4 0 0 1 .622-.332z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E"},Pt={type:"userTask",label:"\u5BA1\u6279",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M4 22a8 8 0 1 1 16 0h-2a6 6 0 1 0-12 0H4zm8-9c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm0-2c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E",properties:{}},Ot={type:"serviceTask",label:"\u53D1\u9001",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M1.923 9.37c-.51-.205-.504-.51.034-.689l19.086-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.475.553-.717.07L11 13 1.923 9.37zm4.89-.2l5.636 2.255 3.04 6.082 3.546-12.41L6.812 9.17z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E",cls:"import_icon"},en={type:"exclusiveGateway",label:"\u6761\u4EF6\u5224\u65AD",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0H24V24H0z'/%3E%3Cpath d='M9.536 13H7.329c-.412 1.166-1.523 2-2.829 2-1.657 0-3-1.343-3-3s1.343-3 3-3c1.306 0 2.418.835 2.83 2h2.206L13 5h3.17c.412-1.165 1.524-2 2.83-2 1.657 0 3 1.343 3 3s-1.343 3-3 3c-1.306 0-2.417-.834-2.829-2h-2.017l-2.886 4.999L14.155 17h2.016c.411-1.165 1.523-2 2.829-2 1.657 0 3 1.343 3 3s-1.343 3-3 3c-1.306 0-2.417-.834-2.829-2H13l-3.464-6zM19 17c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zM4.5 11c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zM19 5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E"},Jn={type:"endEvent",label:"\u7ED3\u675F",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM9 9h6v6H9V9z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E"},hi={label:"\u9009\u533A",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",callback:function(){lf.openSelectionSelect(),lf.once("selection:selected",function(){lf.closeSelectionSelect()})}};function Qn(i){var n={icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-4.586 6l1.768 1.768-1.414 1.414L12 15.414l-1.768 1.768-1.414-1.414L10.586 14l-1.768-1.768 1.414-1.414L12 12.586l1.768-1.768 1.414 1.414L13.414 14zM9 4v2h6V4H9z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E",callback:function(a){i.deleteElement(a.id),i.hideContextMenu()}};i.setContextMenuItems(n),i.setContextMenuByType("startEvent",[Pt,Ot,en]),i.setContextMenuByType("userTask",[Pt,Ot,en,Jn]),i.setContextMenuByType("exclusiveGateway",[Pt,Ot])}Y().use(ae),Y().use(it),Y().use(ce.a9),ce.a9.init({disabledPlugins:[ce.v2.name]}),Y().use(ce.Qs),Y().use(ce.jX),Y().use(ce.Ou),Y().use(ce.v2),Y().use(ce.xV),Y().use(N),Y().use(ce.aC),Y().use(ce.Ju);var tn=(0,p.Pi)(function(){var i=(0,Ve.IE)(),n=(0,Ve.Ge)(),t=i.id,a=i.name,r=n.loading,s=n.bpmnXml,l=(0,y.useRef)(null),u=(0,y.useRef)(),c=(0,y.useMemo)(function(){return{type:"Process",x:0,y:0,id:t}},[]),d=(0,y.useState)(c),v=(0,I.Z)(d,2),m=v[0],g=v[1];(0,y.useEffect)(function(){if(m.id){var D;(D=u.current)===null||D===void 0||D.selectElementById(m.id)}},[m]),(0,y.useEffect)(function(){if(s){var D;(D=u.current)===null||D===void 0||D.render(s)}},[s]),(0,y.useEffect)(function(){n.getFlow(t)},[n,t]);var Z=function(){var F,V,Me,je=(F=u.current)===null||F===void 0?void 0:F.getGraphData(),te=(V=u.current)===null||V===void 0?void 0:V.getGraphRawData(),Te=te==null?void 0:(Me=te.edges.map(function(ue){return ue.id})).concat.apply(Me,(0,ee.Z)(te.nodes.map(function(ue){return ue.id}))),Lt=Object.values(n.form.values).filter(function(ue){return(Te==null?void 0:Te.includes(ue.id))||ue.id===t});je&&n.saveFlow({bpmnXml:je,projectId:t,nodes:Lt}).then(function(ue){ue.success?$.default.success("\u4FDD\u5B58\u6210\u529F"):$.default.error(ue.message)})},se=function(){var F,V,Me,je=(F=u.current)===null||F===void 0?void 0:F.getGraphData(),te=(V=u.current)===null||V===void 0?void 0:V.getGraphRawData(),Te=te==null?void 0:(Me=te.edges.map(function(le){return le.id})).concat.apply(Me,(0,ee.Z)(te.nodes.map(function(le){return le.id}))),Lt=Object.values(n.form.values).filter(function(le){return(Te==null?void 0:Te.includes(le.id))||le.id===t}),ue=te.nodes.filter(function(le){return le.type==="startEvent"});if(ue.length===0){$.default.error("\u5F00\u59CB\u8282\u70B9\u672A\u8BBE\u7F6E");return}if(ue.length!==1){$.default.error("\u5F00\u59CB\u8282\u70B9\u53EA\u80FD\u8BBE\u7F6E\u4E00\u4E2A");return}var nn=te.nodes.filter(function(le){return le.type==="endEvent"});if(nn.length===0){$.default.error("\u7ED3\u675F\u8282\u70B9\u672A\u8BBE\u7F6E");return}if(nn.length!==1){$.default.error("\u7ED3\u675F\u8282\u70B9\u53EA\u80FD\u8BBE\u7F6E\u4E00\u4E2A");return}je&&n.saveFlow({bpmnXml:je,projectId:t,nodes:Lt}).then(function(le){le.success&&n.deploy(t).then(function(rn){rn.success?$.default.success("\u53D1\u5E03\u6210\u529F"):$.default.error(rn.message)})})};(0,y.useEffect)(function(){if(l.current){N.addItem({key:"save",iconClass:"save-icon",title:"",text:"\u4FDD\u5B58",onClick:function(){return Z()}}),N.addItem({key:"deploy",iconClass:"deploy-icon",title:"",text:"\u53D1\u5E03",onClick:function(){$e.Z.confirm({type:"confirm",title:"\u6D41\u7A0B\u53D1\u5E03",content:"\u786E\u5B9A\u53D1\u5E03\u5F53\u524D\u6D41\u7A0B\u5417\uFF1F",onOk:function(){se()}})}});var D=new(Y())({extraConf:{id:t},container:l.current,hideAnchors:!1,grid:{type:"dot",size:20},keyboard:{enabled:!0},snapline:!0});u.current=D,Qn(D),D.render(s||Yn(t)),D.on("element:click",function(F){var V=["starter","exclusiveGateway","endEvent"];V.includes(F.data.type)?g(c):g(F.data)}),D.on("blank:click",function(F){g(c)}),D.on("node:add",function(F){g(F.data)})}return function(){N.removeItem("deploy"),N.removeItem("save")}},[]);var oe=(0,y.useState)({visible:!1}),be=(0,I.Z)(oe,2),E=be[0],L=be[1];return(0,e.jsx)(p.RV,{form:n.form,children:(0,e.jsxs)("div",{style:{height:"100vh",position:"relative"},className:"flow",children:[(0,e.jsx)("div",{ref:l,style:{height:"100%",flex:1}}),(0,e.jsx)($n,{lf:u.current}),(0,e.jsx)("div",{style:{width:500},children:(0,e.jsx)(Ae.Provider,{value:{flow:u.current,active:m},children:(0,e.jsx)(Xn,{})})}),(0,e.jsxs)(fe.Z,{style:{position:"absolute",left:100,bottom:10},children:[(0,e.jsx)(G.Z,{onClick:(0,ne.Z)(Je().mark(function D(){var F,V;return Je().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:try{V=(F=u.current)===null||F===void 0?void 0:F.getGraphData(),L({visible:!0,xml:V})}catch(te){console.error(te)}case 1:case"end":return je.stop()}},D)})),icon:(0,e.jsx)(Kn.Z,{}),size:"small",children:"XML"}),(0,e.jsx)(G.Z,{onClick:function(){var F;console.log((F=u.current)===null||F===void 0?void 0:F.getGraphRawData()),console.log((0,_t.ZN)(n.form.values[m.id])),console.log((0,_t.ZN)(n.form.values))},children:"\u6570\u636E"})]}),(0,e.jsx)(z,(0,O.Z)((0,O.Z)({},E),{},{onClose:function(F){L({visible:!1})}}))]})})}),qn=tn},11628:function(ht,Ce,o){"use strict";o.d(Ce,{xI:function(){return Se},Ge:function(){return G},IE:function(){return Fe}});var O=o(67294),Se=(0,O.createContext)({}),fe=Se.Provider;function Fe(){var ne=(0,O.useContext)(Se);return ne.store}function G(){var ne=Fe();return ne.flowStore}}}]);
