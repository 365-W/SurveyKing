(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6331],{86698:function(m){m.exports={container:"container___1Rq3A"}},2836:function(m){m.exports={menu:"menu___1L63y",right:"right___3L8KG",action:"action___LP4_P",search:"search___2W0sJ",account:"account___6HXOq",avatar:"avatar___2cOWV",dark:"dark___1NwCY",name:"name___WfKAK"}},29791:function(m,y,n){"use strict";var R=n(24557),g=n(78874),Z=n(11013),P=n(97544),v=n(85893),D=void 0==="1";y.Z=function(){return D?(0,v.jsx)(P.Z,{copyright:!1,links:[{key:"Survey King",title:(0,v.jsx)(R.Z,{}),href:"https://surveyking.cn",blankTarget:!0},{key:"github",title:(0,v.jsx)(g.Z,{}),href:"https://github.com/javahuang/SurveyKing",blankTarget:!0},{key:"gitee",title:(0,v.jsx)(Z.Z,{}),href:"https://gitee.com/surveyking/surveyking",blankTarget:!0}]}):(0,v.jsx)(v.Fragment,{})}},36331:function(m,y,n){"use strict";n.r(y),n.d(y,{default:function(){return sn}});var R=n(83279),g=n(11849),Z=n(29791),P=n(49111),v=n(19650),D=n(1870),O=n(67294),un=n(94233),B=n(51890),dn=n(30887),H=n(28682),vn=n(20228),K=n(11382),W=n(3182),I=n(94043),M=n.n(I),T=n(24616),U=n(55035),x=n(42285),$=n(17673),mn=n(59250),S=n(13013),G=n(93224),z=n(94184),F=n.n(z),Y=n(86698),J=n.n(Y),a=n(85893),Q=function(e){var l=e.overlayClassName,r=(0,G.Z)(e,["overlayClassName"]);return(0,a.jsx)(S.Z,(0,g.Z)({overlayClassName:F()(J().container,l)},r))},V=Q,X=n(2836),i=n.n(X),N=n(27400),k=n(80937),b=n(5481),L=n.n(b),w=function(){var p=(0,W.Z)(M().mark(function e(){var l,r,u,h,d;return M().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:l=x.m8.location,r=l.query,u=r===void 0?{}:r,h=l.pathname,d=u.redirect,window.location.pathname!=="/user/login"&&!d&&x.m8.replace({pathname:"/user/login",search:(0,$.stringify)({redirect:h})});case 3:case"end":return f.stop()}},e)}));return function(){return p.apply(this,arguments)}}(),q=function(e){var l=e.menu,r=(0,N.a)(),u=r.user,h=(0,O.useCallback)(function(f){var j=f.key;if(j==="logout"){r.logout(),w();return}x.m8.push("/account/".concat(j))},[r]),d=(0,a.jsx)("span",{className:"".concat(i().action," ").concat(i().account),children:(0,a.jsx)(K.Z,{size:"small",style:{marginLeft:8,marginRight:8}})});if(r.loading||!u||!u.name)return d;var o=(0,a.jsx)(H.Z,{className:i().menu,selectedKeys:[],onClick:h,items:[{label:"\u4E2A\u4EBA\u8BBE\u7F6E",key:"settings",style:{display:l?"flex":"none"},icon:(0,a.jsx)(T.Z,{})},{type:"divider",style:{display:l?"flex":"none"}},{label:"\u9000\u51FA\u767B\u5F55",key:"logout",icon:(0,a.jsx)(U.Z,{})}]});return(0,a.jsx)(V,{overlay:o,children:(0,a.jsxs)("span",{className:"".concat(i().action," ").concat(i().account),children:[(0,a.jsx)(B.C,{size:"small",className:i().avatar,src:u.avatar?"/api/public/preview/".concat(u.avatar):L(),alt:"avatar"}),(0,a.jsx)("span",{className:"".concat(i().name," anticon"),children:u.name})]})})},_=(0,k.Pi)(q),nn=void 0==="1",an=function(){var e=i().right;return e="".concat(i().right,"  ").concat(i().dark),(0,a.jsxs)(v.Z,{className:e,children:[nn&&(0,a.jsx)("span",{className:i().action,onClick:function(){window.open("https://surveyking.cn/docs")},children:(0,a.jsx)(D.Z,{})}),(0,a.jsx)(_,{menu:!0})]})},tn=an,en=n(40336),rn=n(77613),A=n(73727),on=function(e){var l=e.children,r=e.location,u=r===void 0?{pathname:"/"}:r,h=(0,N.a)(),d=h.user,o=h.system,f=(0,x.YB)(),j=f.formatMessage;(0,O.useEffect)(function(){var c=document.querySelector("link[rel~='icon']");c&&o.avatar&&(c.href="/api/public/".concat(o.avatar)),document.title=o.name||"\u5377\u738B";var t=document.getElementById("loading-img");t&&(t.src="/api/public/preview/".concat(o.avatar));var s=document.getElementById("loading-name");s&&(s.textContent=document.title)},[o]);var ln=function c(t){return t.filter(function(s){var C;return d==null||(C=d.authorityList)===null||C===void 0?void 0:C.find(function(E){return E.startsWith(s.authority)})}).map(function(s){return(0,g.Z)((0,g.Z)({},s),{},{children:s.children?c(s.children):void 0})})};return(0,a.jsx)(en.ZP,(0,g.Z)((0,g.Z)({title:o==null?void 0:o.name,logo:(0,a.jsx)("img",{src:o.avatar?"/api/public/preview/".concat(o.avatar):L()}),formatMessage:j},e),{},{onMenuHeaderClick:function(){return x.m8.push("/")},menuItemRender:function(t,s){return t.isUrl||!t.path||u.pathname===t.path?s:(0,a.jsx)(A.rU,{to:t.path,children:s})},breadcrumbRender:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return[{path:"/",breadcrumbName:j({id:"menu.home"})}].concat((0,R.Z)(t))},itemRender:function(t,s,C,E){var cn=C.indexOf(t)===0;return cn?(0,a.jsx)(A.rU,{to:E.join("/"),children:t.breadcrumbName}):(0,a.jsx)("span",{children:t.breadcrumbName})},footerRender:function(){return(0,a.jsx)(Z.Z,{})},menuDataRender:ln,rightContentRender:function(){return(0,a.jsx)(tn,{})},onPageChange:function(){},children:l}))},sn=(0,rn.P)(on)},5481:function(m,y,n){m.exports=n.p+"static/logo.de1a765f.svg"}}]);
