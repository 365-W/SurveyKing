(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7562],{77678:function(He,ie,u){"use strict";u.r(ie),u.d(ie,{Home:function(){return Pe},default:function(){return du}});var ee=u(14781),k=u(58998),oe=u(59250),se=u(13013),De=u(57663),P=u(71577),Ce=u(13062),xe=u(71230),Ee=u(89032),Fe=u(15746),h=u(88983),ue=u(47933),R=u(11849),Y=u(47673),ce=u(4107),de=u(17462),b=u(76772),Se=u(30887),z=u(54689),H=u(94657),te=u(71194),ne=u(50146),Z=u(67294),Be=u(15873),ae=u(57119),ve=u(18401),pe=u(34707),C=u(49101),v=u(51615),B=u(80937),a=u(72706),s=u(70844),f=u(68489),m=u(54421),E=u(38272),d=u(58024),D=u(39144),A=u(54029),F=u(79166),i=u(83279),x=u(71153),o=u(60331),T=u(13254),M=u(14277),$=u(8212),ge=u(92570),je=u(57820),Ae=u(24616),fe=u(44545),Q=u(42285),e=u(85893),re=(0,B.Pi)(function(l){var r=l.moreMenu,c=(0,f.ok)(),p=c.loading,S=c.projects,j={},y=function(t,O,N){t.stopPropagation(),N!=="more"&&Q.m8.push("/survey/".concat(O.id,"/").concat(N,"?mode=").concat(O.mode||"survey"))};if(S.length===0)return(0,e.jsx)(M.Z,{image:M.Z.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:60},description:(0,e.jsx)("span",{children:"\u5F53\u524D\u8FD8\u6CA1\u6709\u521B\u5EFA\u95EE\u5377"})});var g=function(t){return t==="exam"?(0,e.jsx)(o.Z,{color:"red",children:"\u8003\u8BD5"}):(0,e.jsx)(o.Z,{color:"blue",children:"\u95EE\u5377"})};return(0,e.jsx)(E.ZP,{rowKey:"id",className:"survey-home-content",loading:p,grid:{gutter:16,xs:1,sm:2,md:3,lg:3,xl:4,xxl:4},dataSource:(0,i.Z)(S),renderItem:function(t){return t&&t.id?(0,e.jsx)(E.ZP.Item,{children:(0,e.jsx)(D.Z,{onClick:function(){return Q.m8.push("/survey/".concat(t.id,"?mode=").concat(t.mode||"survey"))},hoverable:!0,actions:[(0,e.jsx)(P.Z,{shape:"circle",size:"small",icon:(0,e.jsx)($.Z,{onClick:function(N){return y(N,t,"edit")}},"edit")}),(0,e.jsx)(P.Z,{shape:"circle",size:"small",icon:(0,e.jsx)(ge.Z,{onClick:function(N){return y(N,t,"data")}},"data")}),(0,e.jsx)(P.Z,{shape:"circle",size:"small",icon:(0,e.jsx)(je.Z,{onClick:function(N){return y(N,t,"report")}},"report")}),(0,e.jsx)(P.Z,{shape:"circle",size:"small",icon:(0,e.jsx)(Ae.Z,{onClick:function(N){return y(N,t,"setting")}},"setting")}),(0,e.jsx)(P.Z,{shape:"circle",size:"small",icon:(0,e.jsx)(se.Z,{overlay:r(t),trigger:["click"],children:(0,e.jsx)(fe.Z,{onClick:function(N){return y(N,t,"more")}},"ellipsis")})})],children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"title",children:[(0,e.jsx)("span",{children:t.name}),g(t.mode)]}),(0,e.jsxs)("div",{className:"content",children:[(0,e.jsx)("div",{className:"publish-status",children:t.setting.status===1?(0,e.jsx)(F.Z,{status:"processing",text:"\u6536\u96C6\u4E2D",className:"yes"}):(0,e.jsx)(F.Z,{status:"warning",text:"\u672A\u53D1\u5E03",className:"no"})}),(0,e.jsxs)("div",{className:"total",children:[(0,e.jsx)("span",{children:t.total}),"\u4EFD\u6570\u636E"]})]})]})})},t.id):(0,e.jsx)(E.ZP.Item,{children:(0,e.jsxs)(P.Z,{type:"dashed",className:"newButton",onClick:function(){return Q.m8.push("/survey/new")},children:[(0,e.jsx)(C.Z,{})," \u65B0\u589E\u95EE\u5377"]})})}})}),ye=re,w=u(66456),J=u(48995),he=u(77613),$e=(0,he.P)(function(l){var r=l.moreMenu,c=(0,f.ok)(),p=c.loading,S=c.projects,j=function(n,t){return{onClick:function(){t==="name"?Q.m8.push("/survey/".concat(n.id,"/edit?mode=").concat(n.mode||"survey")):t==="total"?Q.m8.push("/survey/".concat(n.id,"/data?mode=").concat(n.mode||"survey")):Q.m8.push("/survey/".concat(n.id,"?mode=").concat(n.mode||"survey"))}}},y=[{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"name",onCell:function(n){return j(n,"name")}},{title:"\u9879\u76EE\u72B6\u6001",dataIndex:"status",onCell:function(n){return j(n,"status")},render:function(n,t){var O=t.setting.status;return O===0?(0,e.jsx)(o.Z,{color:"warning",children:"\u672A\u5F00\u59CB"}):(0,e.jsx)(o.Z,{color:"processing",children:"\u6536\u96C6\u4E2D"})}},{title:"\u7C7B\u578B",dataIndex:"mode",render:function(n){return n==="exam"?"\u8003\u8BD5":"\u95EE\u5377"},onCell:function(n){return j(n,"status")}},{title:"\u7B54\u5377\u6570",dataIndex:"total",onCell:function(n){return j(n,"total")}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createAt",onCell:function(n){return j(n,"createAt")}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateAt",onCell:function(n){return j(n,"updateAt")}},{title:"\u64CD\u4F5C",dataIndex:"operate",render:function(n,t){return(0,e.jsx)(se.Z,{overlay:r(t),trigger:["click"],children:(0,e.jsx)(fe.Z,{},"ellipsis")})}}];return(0,e.jsx)("div",{children:(0,e.jsx)(J.Z,{dataSource:S,loading:p,columns:y,rowKey:"id",pagination:!1,rowClassName:function(){return"project-list-row"}})})}),Qe=$e,mu=u(34792),Ze=u(48086),Cu=u(43185),Je=u(11324),Le=u(43347),Ue=Je.Z.Dragger,Ke=function(r){var c=r.onCancel,p=(0,Z.useState)(""),S=(0,H.Z)(p,2),j=S[0],y=S[1],g={multiple:!1,accept:".json",beforeUpload:function(t){var O=new FileReader;return O.readAsText(t,"UTF-8"),O.onload=function(N){try{var q=JSON.parse(N.target.result);y(q)}catch(le){Ze.default.error("\u6A21\u677F\u89E3\u6790\u5931\u8D25")}},O.onerror=function(){Ze.default.error("\u6A21\u677F\u8BFB\u53D6\u5931\u8D25")},!1}};return(0,e.jsx)(ne.Z,{visible:!0,title:"\u901A\u8FC7\u6A21\u677F\u5BFC\u5165\u95EE\u5377(JSON\u6A21\u677F)",okText:"\u5BFC\u5165",onOk:function(){setTimeout(function(){localStorage.setItem("temp-template",JSON.stringify(j)),Q.m8.push("/survey/new?fromTemplate")},20)},onCancel:c,children:(0,e.jsxs)(Ue,(0,R.Z)((0,R.Z)({},g),{},{children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Le.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u8005\u62D6\u62FD\u6A21\u677F\u6587\u4EF6\u5230\u6B64\u5904"})]}))})},xu=u(57338),Ge=u(25084),Eu=u(49111),Oe=u(19650),Ne=u(29656),Fu=u(88386),We={lineWrapping:!0,lineNumbers:!1,autofocus:!0,placeholder:"\u8BF7\u5C06\u51C6\u5907\u597D\u7684\u6587\u6863\u6309\u7167\u793A\u4F8B\u683C\u5F0F\u590D\u5236\u7C98\u8D34\u5230\u8FD9\u91CC"},Ie=`\u9879\u76EE\u6807\u9898
\u611F\u8C22\u60A8\u80FD\u62BD\u51FA\u51E0\u5206\u949F\u65F6\u95F4\u6765\u53C2\u52A0\u672C\u6B21\u7B54\u9898\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u9A6C\u4E0A\u5F00\u59CB\u5427\uFF01\u3010\u6B22\u8FCE\u8BED\u3011

\u60A8\u7ECF\u5E38\u521B\u5EFA\u4EC0\u4E48\u7C7B\u578B\u7684\u9879\u76EE\uFF1F\u3010\u5355\u9009\u9898\u3011
\u95EE\u5377\u8C03\u7814
\u6295\u7968\u8BC4\u9009
\u6D4B\u8BC4\u8003\u8BD5

\u60A8\u4E86\u89E3\u8FC7\u54EA\u4E9B\u95EE\u5377\u7CFB\u7EDF\uFF1F\u3010\u591A\u9009\u9898\u3011
\u95EE\u5377\u7F51
\u95EE\u5377\u661F
\u91D1\u6570\u636E
\u5377\u738B

\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE\u3010\u586B\u7A7A\u9898\u3011

\u8BF7\u586B\u5199\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\uFF1F\u3010\u6A2A\u5411\u586B\u7A7A\u3011
\u59D3\u540D___\u5E74\u9F84___\u5C81
\u8054\u7CFB\u65B9\u5F0F____

\u5730\u533A\u3010\u7EA7\u8054\u9898\u3011
\u7701 \u5E02 \u53BF
\u5317\u4EAC\u5E02 \u6D77\u6DC0\u533A
\u5317\u4EAC\u5E02 \u897F\u57CE\u533A
\u6CB3\u5357\u7701 \u90D1\u5DDE\u5E02 \u7BA1\u57CE\u533A
\u6CB3\u5357\u7701 \u90D1\u5DDE\u5E02 \u9AD8\u65B0\u533A
\u6CB3\u5357\u7701 \u4FE1\u9633\u5E02 \u6D49\u6CB3\u533A
\u6CB3\u5357\u7701 \u4FE1\u9633\u5E02 \u7F8A\u5C71\u65B0\u533A
`,Ye=(0,Z.forwardRef)(function(l,r){var c=l.onChange,p=(0,Z.useState)(),S=(0,H.Z)(p,2),j=S[0],y=S[1];(0,Z.useImperativeHandle)(r,function(){return{clear:function(){return j==null?void 0:j.setValue("")}}});var g=(0,Z.useCallback)(function(t,O){y(t),c(Ie),setTimeout(function(){t.refresh(),t.focus()},1)},[]),n=(0,Z.useCallback)(function(){c(j.getValue())},[j]);return(0,e.jsx)(Ne.Rt,{autoCursor:!0,value:Ie,options:We,editorDidMount:g,onChange:function(){n()}})}),Te=u(63439),Xe=u(5795),U=u(71211),ke=u(6936);function be(l){for(var r={type:"Survey",title:"",id:(0,U.Ox)(),children:[]},c=l.split(/[\n\r]{2,}/g).filter(function(S){return S.trim()}),p=0;p<c.length;p++)p===0?we(c[0],r):qe(c[p],r);return r}function we(l,r){l.split(/[\n]+/).forEach(function(c,p){p===0?r.title=c:r.description=c.replace(/【.*】/,"")})}function qe(l,r){var c,p=l.split(/\n/g),S=(0,Xe.Z)(p),j=S[0],y=S.slice(1),g=uu(j),n={id:(0,U.Ox)(),type:g,title:j.replace(/【.*】/,""),children:[]};(c=r.children)===null||c===void 0||c.push(n),g==="QuestionSet"?_e(y,n):eu(y,n)}function _e(l,r){}function eu(l,r){if(r.type==="FillBlank"||r.type==="Signature"){var c;(c=r.children)===null||c===void 0||c.push({title:"",id:(0,U.Ox)()})}else if(r.type==="Cascader"){if(l.length>1){var p=(0,ke.D)(l[0]),S=(0,ke.H)(l.slice(1));p.forEach(function(n){var t;(t=r.children)===null||t===void 0||t.push({title:n.title,id:(0,U.Ox)()})}),r.dataSource=S}}else if(r.type==="HorzBlank"){if(l.length>0){var j=l.join(`
`).split(/_{3,}/).length-1;r.attribute={content:l.join("<br/>")};for(var y=0;y<j;y++){var g;(g=r.children)===null||g===void 0||g.push({title:"\u586B\u7A7A".concat(y+1),id:(0,U.Ox)()})}}}else l==null||l.filter(function(n){return n.trim()}).forEach(function(n){var t;(t=r.children)===null||t===void 0||t.push({title:n,id:(0,U.Ox)()})})}function uu(l){var r=l.substring(l.lastIndexOf("\u3010")+1,l.lastIndexOf("\u3011")).trim();switch(r){case"\u5355\u9009\u9898":return"Radio";case"\u591A\u9009\u9898":return"Checkbox";case"\u586B\u7A7A\u9898":return"FillBlank";case"\u5355\u884C\u6587\u672C\u9898":return"FillBlank";case"\u591A\u884C\u6587\u672C\u9898":return"MultipleBlank";case"\u4E0B\u62C9\u9898":return"Select";case"\u7B7E\u540D\u9898":return"Signature";case"\u6A2A\u5411\u586B\u7A7A":return"HorzBlank";case"\u6587\u672C\u63CF\u8FF0":return"Remark";case"\u7EA7\u8054\u9898":return"Cascader";default:return"Radio"}}var tu=u(72850),nu={lineWrapping:!0,lineNumbers:!1,autofocus:!1,placeholder:"\u8BF7\u5C06\u51C6\u5907\u597D\u7684\u6587\u6863\u6309\u7167\u793A\u4F8B\u683C\u5F0F\u590D\u5236\u7C98\u8D34\u5230\u8FD9\u91CC",readOnly:!0};function au(l){var r;return l.id=(0,U.Ox)(),(r=l.children)===null||r===void 0||r.forEach(function(c){c.id=(0,U.Ox)()}),{id:"demo",title:"",type:"Survey",children:[l]}}function ru(l){var r=l.title,c=l.schema,p=l.text;return(0,e.jsxs)("div",{className:"doc-item",children:[(0,e.jsxs)("h3",{className:"doc-item-title",children:[r,":"]}),(0,e.jsxs)("div",{className:"doc-item-wrapper",children:[(0,e.jsx)("div",{className:"doc-item-left",children:(0,e.jsx)(Ne.Rt,{value:p,options:nu,editorDidMount:function(j){setTimeout(function(){j.refresh()},1)}})}),(0,e.jsxs)("div",{className:"doc-item-right",children:[(0,e.jsx)("div",{className:"tips",children:"\u9884\u89C8"}),(0,e.jsx)(Te.Z,{schema:au(c),headerVisible:!1,footerVisible:!1,questionNumber:!1,progressBar:!1})]})]})]})}var lu=[{title:"\u6B22\u8FCE\u8BED",text:"\u611F\u8C22\u60A8\u80FD\u62BD\u51FA\u51E0\u5206\u949F\u65F6\u95F4\u6765\u53C2\u52A0\u672C\u6B21\u7B54\u9898\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u9A6C\u4E0A\u5F00\u59CB\u5427\uFF01\u3010\u6B22\u8FCE\u8BED\u3011",schema:{id:"1",type:"Remark",title:"\u611F\u8C22\u60A8\u80FD\u62BD\u51FA\u51E0\u5206\u949F\u65F6\u95F4\u6765\u53C2\u52A0\u672C\u6B21\u7B54\u9898\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u9A6C\u4E0A\u5F00\u59CB\u5427\uFF01\u3010\u6B22\u8FCE\u8BED\u3011"}},{title:"\u5355\u9009\u9898",text:`\u60A8\u7ECF\u5E38\u521B\u5EFA\u4EC0\u4E48\u7C7B\u578B\u7684\u9879\u76EE\uFF1F\u3010\u5355\u9009\u9898\u3011
\u95EE\u5377\u8C03\u7814
\u6295\u7968\u8BC4\u9009
\u6D4B\u8BC4\u8003\u8BD5
    `,schema:{type:"Radio",title:"\u60A8\u7ECF\u5E38\u521B\u5EFA\u4EC0\u4E48\u7C7B\u578B\u7684\u9879\u76EE\uFF1F",children:[{title:"\u95EE\u5377\u8C03\u7814"},{title:"\u6295\u7968\u8BC4\u9009"},{title:"\u6D4B\u8BC4\u8003\u8BD5"}]}},{title:"\u591A\u9009\u9898",text:`\u60A8\u4E86\u89E3\u8FC7\u54EA\u4E9B\u95EE\u5377\u7CFB\u7EDF\uFF1F\u3010\u591A\u9009\u9898\u3011
  \u95EE\u5377\u7F51
  \u95EE\u5377\u661F
  \u91D1\u6570\u636E
  \u5377\u738B
      `,schema:{type:"Checkbox",title:"\u60A8\u4E86\u89E3\u8FC7\u54EA\u4E9B\u95EE\u5377\u7CFB\u7EDF\uFF1F",children:[{title:"\u95EE\u5377\u7F51"},{title:"\u95EE\u5377\u661F"},{title:"\u91D1\u6570\u636E"},{title:"\u5377\u738B"}]}},{title:"\u586B\u7A7A\u9898",text:"\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE\u3010\u586B\u7A7A\u9898\u3011",schema:{type:"FillBlank",title:"\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE",children:[{title:""}]}},{title:"\u591A\u884C\u6587\u672C\u9898",text:`\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE\u3010\u591A\u884C\u6587\u672C\u9898\u3011
  \u8EAB\u9AD8
  \u4F53\u91CD
  BMI
  `,schema:{type:"MultipleBlank",title:"\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE",children:[{title:"\u8EAB\u9AD8"},{title:"\u4F53\u91CD"},{title:"BMI"}]}},{title:"\u4E0B\u62C9\u9898",text:`\u6027\u522B\u3010\u4E0B\u62C9\u9898\u3011
  \u7537
  \u5973`,schema:{type:"Select",title:"\u6027\u522B",children:[{title:"\u7537"},{title:"\u5973"}]}},{title:"\u7B7E\u540D",text:"\u7B7E\u4E2A\u540D\u5427\uFF01\u3010\u7B7E\u540D\u3011",schema:{type:"Signature",title:"\u7B7E\u4E2A\u540D\u5427\uFF01",children:[{title:""}]}},{title:"\u6A2A\u5411\u586B\u7A7A",text:`\u8BF7\u586B\u5199\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\uFF1F\u3010\u6A2A\u5411\u586B\u7A7A\u3011
  \u59D3\u540D___\u5E74\u9F84___\u5C81
  \u8054\u7CFB\u65B9\u5F0F____`,schema:{type:"HorzBlank",title:"\u8BF7\u586B\u5199\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\uFF1F",attribute:{content:`\u59D3\u540D___\u5E74\u9F84___\u5C81
  \u8054\u7CFB\u65B9\u5F0F____`},children:[{title:""},{title:""},{title:""}]}},{title:"\u7EA7\u8054\u9898",text:`\u7701\u5E02\u53BF\u3010\u7EA7\u8054\u9898\u3011
  \u7701 \u5E02 \u53BF
  \u5317\u4EAC\u5E02 \u6D77\u6DC0\u533A
  \u5317\u4EAC\u5E02 \u897F\u57CE\u533A
  \u6CB3\u5357\u7701 \u90D1\u5DDE\u5E02 \u7BA1\u57CE\u533A
  \u6CB3\u5357\u7701 \u90D1\u5DDE\u5E02 \u9AD8\u65B0\u533A
  \u6CB3\u5357\u7701 \u4FE1\u9633\u5E02 \u6D49\u6CB3\u533A
  \u6CB3\u5357\u7701 \u4FE1\u9633\u5E02 \u7F8A\u5C71\u65B0\u533A`,schema:{type:"Cascader",title:"\u5730\u533A",children:[{title:"\u7701",id:"6t0l"},{title:"\u5E02",id:"1bdu"},{title:"\u53BF",id:"ie4u"}],dataSource:[{label:"\u5317\u4EAC\u5E02",value:"vv5k",children:[{label:"\u6D77\u6DC0\u533A",value:"55x3"},{label:"\u897F\u57CE\u533A",value:"dxg7"}]},{label:"\u6CB3\u5357\u7701",value:"fyx1",children:[{label:"\u90D1\u5DDE\u5E02",value:"qu6c",children:[{label:"\u7BA1\u57CE\u533A",value:"x7zs"},{label:"\u9AD8\u65B0\u533A",value:"t67i"}]},{label:"\u4FE1\u9633\u5E02",value:"b79i",children:[{label:"\u6D49\u6CB3\u533A",value:"cg7z"},{label:"\u7F8A\u5C71\u65B0\u533A",value:"tfz0"}]}]}]}}],iu=function(r){var c=r.onClose;return(0,e.jsxs)(ne.Z,{visible:!0,onCancel:function(){return c()},footer:!1,title:"\u793A\u4F8B&\u5E2E\u52A9",width:750,maskClosable:!1,className:"import-text-doc-modal",children:[(0,e.jsxs)("div",{"data-v-5d201132":"",className:"doc-desc",children:[(0,e.jsx)("h3",{"data-v-5d201132":"",children:"\u683C\u5F0F\u8BF4\u660E\uFF1A"})," ",(0,e.jsx)("p",{"data-v-5d201132":"",children:"1. \u95EE\u9898\u4E4B\u95F4\u9700\u8981\u4EE5\u7A7A\u884C\u5206\u9694\uFF1B"}),(0,e.jsx)("p",{"data-v-5d201132":"",children:"2. \u5EFA\u8BAE\u5728\u9898\u76EE\u540E\u9762\u6DFB\u52A0\u9898\u578B\u6807\u8BC6(\u4F7F\u7528\u3010\u3011)\uFF0C\u672A\u6807\u8BC6\u7684\u9898\u76EE\u7CFB\u7EDF\u5C06\u81EA\u52A8\u8BC6\u522B\uFF1B"}),(0,e.jsxs)("p",{"data-v-5d201132":"",children:["3. \u76EE\u524D\u53EF\u8BC6\u522B\u7684\u9898\u578B\u6807\u8BC6\u5305\u62EC\uFF1A",(0,e.jsx)("span",{"data-v-5d201132":"",children:"\u3010\u6B22\u8FCE\u8BED\u3011\u3001"}),"\u3010\u5355\u9009\u9898\u3011\u3001\u3010\u591A\u9009\u9898\u3011\u3001\u3010\u7B7E\u540D\u9898\u3011\u3001\u3010\u4E0B\u62C9\u9898\u3011\u3001\u3010\u586B\u7A7A\u9898\u3011\u3001\u3010\u591A\u9879\u586B\u7A7A\u3011\u3001\u3010\u6A2A\u5411\u586B\u7A7A\u3011\u3001\u3010\u7EA7\u8054\u9898\u3011\u3001\u3010\u5907\u6CE8\u8BF4\u660E\u3011\uFF1B"]}),(0,e.jsx)("p",{"data-v-5d201132":"",children:"4. \u5982\u679C\u65E0\u6CD5\u6B63\u786E\u8BC6\u522B\uFF0C\u8BF7\u5C1D\u8BD5\u5728\u9898\u76EE\u4E0E\u9898\u76EE\u4E4B\u95F4\u52A0\u5165\u7A7A\u884C\uFF1B"}),(0,e.jsx)("p",{"data-v-5d201132":"",children:"5. \u8BF7\u52FF\u5728\u9009\u9879\u4E0E\u9009\u9879\u4E4B\u95F4\u7A7A\u884C\u3002"})]}),lu.map(function(p){return(0,e.jsx)(ru,(0,R.Z)({},p),p.title)})]})},ou=iu,su=function(r){var c=r.onClose,p=(0,Z.useRef)(null),S=(0,Z.useState)({}),j=(0,H.Z)(S,2),y=j[0],g=j[1],n=(0,Z.useState)(!1),t=(0,H.Z)(n,2),O=t[0],N=t[1],q=(0,Z.useRef)(),le=(0,f.zE)(function(K){g(be(K))},30);return console.log(JSON.stringify(y)),(0,e.jsxs)(Ge.Z,{visible:!0,onClose:c,width:"100%",placement:"left",className:"import-text-drawer",closeIcon:!1,title:(0,e.jsx)("span",{children:"\u5BFC\u5165\u6587\u672C"}),autoFocus:!1,extra:(0,e.jsxs)(Oe.Z,{children:[(0,e.jsx)(P.Z,{onClick:c,children:"\u5173\u95ED"}),(0,e.jsx)(P.Z,{type:"primary",onClick:function(){setTimeout(function(){localStorage.setItem("temp-template",JSON.stringify(y)),Q.m8.push("/survey/new?fromTemplate")},20)},children:"\u521B\u5EFA\u9879\u76EE"})]}),children:[(0,e.jsxs)("div",{className:"text-header",children:[(0,e.jsxs)("div",{className:"header-left",children:[(0,e.jsx)("h3",{className:"header-left-title",children:"\u6587\u672C\u7F16\u8F91"}),(0,e.jsx)("div",{children:(0,e.jsxs)(Oe.Z,{children:[(0,e.jsx)(P.Z,{type:"link",onClick:function(){N(!0)},children:"\u793A\u4F8B&\u5E2E\u52A9"}),(0,e.jsx)(P.Z,{icon:(0,e.jsx)(tu.Z,{}),onClick:function(){var G;return(G=q.current)===null||G===void 0?void 0:G.clear()},children:"\u6E05\u7A7A\u6587\u672C"})]})})]}),(0,e.jsx)("div",{className:"header-right",children:(0,e.jsx)("h3",{className:"header-right-title ",children:"\u9898\u76EE\u9884\u89C8"})})]}),(0,e.jsxs)("div",{className:"text-body",children:[(0,e.jsx)("div",{className:"editor-container",children:(0,e.jsx)(Ye,{ref:q,onChange:function(G){le(G)}})}),(0,e.jsx)("div",{className:"preview-container",children:(0,e.jsx)(Te.O,{ref:p,schema:y,headerVisible:!0,footerVisible:!0,paginationVisible:!1})})]}),O&&(0,e.jsx)(ou,{onClose:function(){return N(!1)}})]})},cu=su,me=ne.Z.confirm,Me="home-content-type",Pe=(0,B.Pi)(function(){var l=(0,f.ok)(),r=(0,Z.useRef)(""),c=(0,Z.useState)(localStorage.getItem(Me)||"card"),p=(0,H.Z)(c,2),S=p[0],j=p[1],y=(0,Z.useState)({current:1,pageSize:20}),g=(0,H.Z)(y,2),n=g[0],t=g[1],O=(0,Z.useState)(!1),N=(0,H.Z)(O,2),q=N[0],le=N[1],K=(0,Z.useState)(!1),G=(0,H.Z)(K,2),vu=G[0],Re=G[1],ze=(0,v.k6)();(0,Z.useEffect)(function(){l.loadProjects(n)},[n,l]);var Ve=function(I){return(0,e.jsxs)(z.Z,{onClick:function(_){return _.domEvent.stopPropagation()},children:[(0,e.jsx)(z.Z.Item,{onClick:function(){return window.open("/s/".concat(I.id))},children:"\u9884\u89C8"},"preview"),(0,e.jsx)(z.Z.Item,{onClick:function(){me({title:"\u95EE\u5377\u91CD\u547D\u540D",icon:void 0,content:(0,e.jsxs)("div",{children:[(0,e.jsx)(b.Z,{message:"\u95EE\u5377\u91CD\u547D\u540D\u6210\u529F\uFF0C\u7CFB\u7EDF\u5185\u5404\u5904\u5C06\u663E\u793A\u91CD\u547D\u540D\u6807\u9898\u3002\u6B64\u64CD\u4F5C\u4E0D\u5F71\u54CD\u516C\u5F00\u95EE\u5377\u540D\u79F0",type:"info",showIcon:!0}),(0,e.jsx)(ce.Z,{style:{marginTop:10},onChange:function(L){return r.current=L.target.value},defaultValue:I.name})]}),okText:"\u786E\u8BA4",okType:"primary",cancelText:"\u53D6\u6D88",onOk:function(){new a.Uf(I.id).saveOrUpdateProject({name:r.current}).then(function(L){L.code===200&&t(function(X){return(0,R.Z)({},X)})})}})},children:"\u91CD\u547D\u540D"},"rename"),I.setting.status===0&&(0,e.jsx)(z.Z.Item,{onClick:function(){me({title:"\u786E\u5B9A\u53D1\u5E03\u5F53\u524D\u95EE\u5377?",icon:(0,e.jsx)(Be.Z,{style:{color:"#1890ff"}}),content:"\u53EA\u6709\u53D1\u5E03\u7684\u95EE\u5377\u624D\u80FD\u6536\u96C6\u6570\u636E",okText:"\u53D1\u5E03",okType:"primary",cancelText:"\u53D6\u6D88",onOk:function(){f.hi.updateSetting({id:I.id,settingKey:"status",settingValue:1}).then(function(L){L.code===200&&t(function(X){return(0,R.Z)({},X)})})}})},children:"\u53D1\u5E03"},"publish"),I.setting.status===1&&(0,e.jsx)(z.Z.Item,{onClick:function(){me({title:"\u786E\u5B9A\u505C\u6B62\u5F53\u524D\u95EE\u5377?",icon:(0,e.jsx)(ae.Z,{}),content:"\u505C\u6B62\u4E4B\u540E\u95EE\u5377\u5C06\u4E0D\u80FD\u7EE7\u7EED\u6536\u96C6\u6570\u636E",okText:"\u505C\u6B62",okType:"danger",cancelText:"\u53D6\u6D88",onOk:function(){f.hi.updateSetting({id:I.id,settingKey:"status",settingValue:0}).then(function(L){L.code===200&&t(function(X){return(0,R.Z)({},X)})})}})},children:"\u505C\u6B62"},"stop"),(0,e.jsx)(z.Z.Item,{onClick:function(){me({title:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u95EE\u5377?",icon:(0,e.jsx)(ae.Z,{}),content:"\u5220\u9664\u4E4B\u540E\u53EF\u4EE5\u5728\u56DE\u6536\u7AD9\u91CC\u9762\u627E\u56DE",okText:"\u5220\u9664",okType:"danger",cancelText:"\u53D6\u6D88",onOk:function(){new a.Uf(I.id).deleteProject(I.id).then(function(L){L.code===200&&t(function(X){return(0,R.Z)({},X)})})}})},children:"\u5220\u9664"},"delete")]})},fu=function(){return S==="card"?(0,e.jsx)(ye,{moreMenu:Ve}):(0,e.jsx)(Qe,{moreMenu:Ve})},hu=(0,e.jsx)("div",{children:(0,e.jsx)(xe.Z,{className:"survey-home-search",children:(0,e.jsxs)(Fe.Z,{span:24,children:[(0,e.jsxs)(ue.ZP.Group,{value:S,onChange:function(I){j(I.target.value),localStorage.setItem(Me,I.target.value)},children:[(0,e.jsx)(ue.ZP.Button,{value:"card",children:(0,e.jsx)(ve.Z,{})}),(0,e.jsx)(ue.ZP.Button,{value:"list",children:(0,e.jsx)(pe.Z,{})})]}),(0,e.jsx)(ce.Z.Search,{className:"search",placeholder:"\u641C\u7D22\u9879\u76EE\u540D\u79F0",onSearch:function(I){t(function(V){return(0,R.Z)((0,R.Z)({},V),{},{name:I})})}})]})})});return(0,e.jsxs)(s.ZP,{title:"\u6211\u7684\u95EE\u5377",content:hu,extra:[(0,e.jsx)(se.Z,{trigger:["click"],overlay:(0,e.jsxs)(z.Z,{onClick:function(I){var V=I.key;V==="survey"?ze.push("/survey/new"):V==="importJson"?le(!0):V==="exam"?ze.push("/survey/new?mode=exam"):V==="importText"&&Re(!0)},children:[(0,e.jsx)(z.Z.Item,{children:(0,e.jsx)("a",{rel:"noopener noreferrer",href:"#",children:"\u95EE\u5377\u8C03\u67E5"})},"survey"),(0,e.jsx)(z.Z.Item,{children:(0,e.jsx)("a",{rel:"noopener noreferrer",href:"#",children:"\u5728\u7EBF\u8003\u8BD5"})},"exam"),(0,e.jsx)(z.Z.Item,{children:(0,e.jsx)("a",{rel:"noopener noreferrer",href:"#",children:"\u901A\u8FC7\u6587\u672C\u5BFC\u5165"})},"importText"),(0,e.jsx)(z.Z.Item,{children:(0,e.jsx)("a",{rel:"noopener noreferrer",href:"#",children:"\u901A\u8FC7\u6A21\u677F\u5BFC\u5165"})},"importJson")]}),placement:"bottomLeft",children:(0,e.jsx)(P.Z,{type:"primary",icon:(0,e.jsx)(C.Z,{}),size:"large",style:{width:200},children:"\u65B0\u5EFA"},"add")},"add")],children:[(0,e.jsxs)("div",{className:"survey-home",children:[fu(),(0,e.jsx)("div",{className:"pagination-container",children:(0,e.jsx)(k.Z,{size:"small",current:n.current,pageSize:n.pageSize,total:l.total,showTotal:function(I){return"\u5171 ".concat(I," \u6761")},onChange:function(I){t(function(V){return(0,R.Z)((0,R.Z)({},V),{},{current:I})})}})})]}),q&&(0,e.jsx)(Ke,{onCancel:function(){return le(!1)}}),vu&&(0,e.jsx)(cu,{onClose:function(){return Re(!1)}})]})}),du=Pe},6936:function(He,ie,u){"use strict";u.d(ie,{H:function(){return ve},D:function(){return ae}});var ee=u(94657),k=u(67294),oe=u(77613),se=u(71194),De=u(50146),P=u(83279),Ce=u(9778),xe=u(94184),Ee=u.n(xe),Fe=u(74118),h=u(85893),ue=(0,oe.P)(function(C){var v=C.className,B=C.style,a=C.level,s=C.total,f=(0,k.useRef)(null),m=(0,k.useState)(!1),E=(0,ee.Z)(m,2),d=E[0],D=E[1],A=(0,k.useContext)(Z),F=A.options,i=A.updateOption,x=F[a-1];return(0,h.jsxs)("div",{ref:f,style:B,className:Ee()(v,"title",{"has-error":d}),"data-id":"".concat(x.id),children:[(0,h.jsx)("div",{className:"col-item-wrap",children:(0,h.jsx)(Fe.Bn,{value:x.title,style:{padding:7},onChange:function(T){return i(x.id,T)},size:"small",bounds:".column".concat(a)})}),(0,h.jsx)("div",{className:"col-item-limit",children:s})]})}),R=u(11849),Y=u(75414),ce=(0,oe.P)(function(C){var v=C.data,B=C.active,a=C.className,s=C.level,f=v.label,m=v.value,E=(0,k.useContext)(Z),d=E.updateItem,D=E.deleteItem,A=(0,k.useRef)(null),F=(0,Ce.XI)(),i=(0,ee.Z)(F,3),x=i[0],o=i[1],T=i[2];return(0,k.useLayoutEffect)(function(){var M;(M=T.current)===null||M===void 0||M.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[]),(0,h.jsxs)("div",(0,R.Z)((0,R.Z)({onClick:function(){d(s,f,m),setTimeout(function(){var $;return($=A.current)===null||$===void 0?void 0:$.focus()},20)},className:Ee()(a,"cell",{"column-item-active":B})},o),{},{children:[(0,h.jsx)("div",{className:"col-item-order",children:(0,h.jsx)(Y.MT,{infer:"DragVertical",className:"drag-handle-option",style:{cursor:"move"}})}),(0,h.jsxs)("div",{className:"col-item-wrap",children:[!B&&f,B&&(0,h.jsx)("input",{value:f,className:"col-item-input",onChange:function($){return d(s,$.target.value,m)}})]}),v.children&&(0,h.jsx)("div",{className:"col-item-limit",children:v.children.length}),(x||B)&&(0,h.jsx)(Y.MT,{infer:"MinusCircle",className:"col-item-del",onClick:function($){$.stopPropagation(),D(s,m)}})]}))}),de=u(80937),b=(0,de.Pi)(function(C){var v=C.title,B=C.dataSource,a=B===void 0?[]:B,s=C.level,f=C.checked,m=C.active,E=C.hasOption,d=(0,k.useContext)(Z),D=d.addItem,A=d.updateOrder;return(0,h.jsxs)("div",{className:"column",children:[(0,h.jsx)("div",{className:"cascader-title",children:v}),(0,h.jsxs)("div",{className:"cascader-content column-".concat(s),children:[E&&(0,h.jsx)(ue,{level:s,total:a.length,style:{display:a.length>0?"block":"none"}}),(0,h.jsx)(Y.W2,{dragHandleSelector:".drag-handle-option",groupName:"cascader-level".concat(s),behaviour:"contain",lockAxis:"y",disabled:a.length===0,onDrop:function(i){var x=i.addedIndex,o=i.removedIndex;x!==null&&o!==null&&A(s,o,x)},children:a.map(function(F,i){return(0,h.jsx)(Y._l,{children:(0,h.jsx)(ce,{data:F,active:f===F.value,level:s,index:i})},"".concat(F.value))})})]}),m&&(0,h.jsx)("div",{onClick:function(){return D(s)},className:"cascader-add-item",children:"+\u6DFB\u52A0\u9009\u9879"})]})}),Se=u(87310),z=u(54531),H=u(71211),te=u(76826),ne=function(v){return{addItem:function(a){for(var s=v.checked,f=v.dataSource,m=f,E=function(A){if(A===a){var F=1;m.length>0&&(F=Math.max.apply(Math,(0,P.Z)(m.map(function(x){return parseInt(x.value,10)})))+1),m.push({label:"\u65B0\u9009\u9879".concat(m.length+1),value:"".concat(F)})}else{var i=m.find(function(x){return x.value===s[A-1]});i.children||(i.children=[]),m=i.children}},d=1;d<=a;d++)E(d)},deleteItem:function(a,s){for(var f=v.checked,m=v.dataSource,E=m,d=function(F){var i=void 0;if(F===a){var x=E.findIndex(function(T){return T.value===s});if(E.splice(x,1),E.length===0){var o;(o=i)===null||o===void 0||delete o.children}}else i=E.find(function(T){return T.value===f[F-1]}),i.children||(i.children=[]),E=i.children},D=1;D<=a;D++)d(D);f.splice(a-1)},updateItem:function(a,s,f){for(var m=v.checked,E=v.dataSource,d=E,D=function(i){if(i===a){var x=d.find(function(T){return T.value===f}),o=d.findIndex(function(T){return T.value===f});x&&(x.label=s),d.splice(o,1,x)}else d=d.find(function(T){return T.value===m[i-1]}).children},A=1;A<=a;A++)D(A);m[a-1]!==f&&(m[a-1]=f,m.splice(a))},updateOrder:function(a,s,f){for(var m=v.checked,E=v.dataSource,d=E,D=function(i){if(i===a){var x=d[s];d.splice(s,1),d.splice(f,0,x)}else d=d.find(function(o){return o.value===m[i-1]}).children},A=1;A<=a;A++)D(A)},updateOption:function(a,s){var f=v.options.find(function(m){return m.id===a});f&&(f.title=s)},addOption:function(){v.options.push({id:(0,H.Ox)(),title:"\u8BF7\u9009\u62E9"})}}},Z=k.createContext({}),Be=(0,de.Pi)(function(C){var v,B,a,s=C.onCancel,f=C.onOk,m=C.value,E=(0,k.useRef)(null),d=(0,k.useContext)(te.xI),D=d.getContainer,A=(0,Ce.$1)(ne,{dataSource:(0,z.ZN)(m)||[],checked:[],options:(0,P.Z)(new Array(4)).map(function(J,he){return C.options.length>he?C.options[he]:{id:(0,H.Ox)(),title:"\u8BF7\u9009\u62E9"}})}),F=(0,ee.Z)(A,2),i=F[0],x=i.dataSource,o=i.checked,T=i.options,M=F[1],$=M.addItem,ge=M.deleteItem,je=M.updateItem,Ae=M.updateOrder,fe=M.addOption,Q=M.updateOption,e=o.length>=1&&((v=x.find(function(J){return J.value===o[0]}))===null||v===void 0?void 0:v.children)||[],re=o.length>=2&&e&&((B=e.find(function(J){return J.value===o[1]}))===null||B===void 0?void 0:B.children)||[],ye=o.length>=3&&re&&((a=re.find(function(J){return J.value===o[2]}))===null||a===void 0?void 0:a.children)||[],w=(0,k.useMemo)(function(){return(0,Se.vC)((0,z.ZN)(x))},[x]);return(0,h.jsx)(Z.Provider,{value:{addItem:$,deleteItem:ge,updateItem:je,updateOrder:Ae,updateOption:Q,addOption:fe,options:T},children:(0,h.jsx)("div",{ref:E,children:(0,h.jsx)(De.Z,{title:"\u9009\u9879\u7F16\u8F91",getContainer:D,visible:!0,className:"cascader-modal",onOk:function(){f(x,T.slice(0,w/2))},onCancel:function(){s()},width:800,maskClosable:!1,children:(0,h.jsxs)("div",{className:"content",children:[(0,h.jsx)(b,{level:1,checked:o[0],dataSource:x,title:"\u4E00\u7EA7\u9009\u9879",active:o.length>=0,hasOption:w>=2}),(0,h.jsx)(b,{level:2,checked:o[1],dataSource:e,title:"\u4E8C\u7EA7\u9009\u9879",active:o.length>=1,hasOption:w>=4}),(0,h.jsx)(b,{level:3,checked:o[2],dataSource:re,title:"\u4E09\u7EA7\u9009\u9879",active:o.length>=2,hasOption:w>=6}),(0,h.jsx)(b,{level:4,checked:o[3],dataSource:ye,title:"\u56DB\u7EA7\u9009\u9879",active:o.length>=3,hasOption:w>=8})]})})})})});function ae(C){return C.split(/\t|\s+|\//).filter(function(v){return v.trim()!==""}).map(function(v){return{title:v}})}function ve(C){var v=C.reduce(function(B,a){return a.split(/\t|\s+|\//).reduce(function(s,f,m,E){s.value=(0,H.Ox)();var d=E.slice(0,m+1).join("."),D=(s.children=s.children||[]).find(function(A){return A.label===d});return D||s.children.push(D={label:d,value:(0,H.Ox)()}),D},B),B},{children:[]}).children;return JSON.parse(JSON.stringify(v,function(B,a){return B==="label"?a.split(".").slice(-1)[0]:a}))}function pe(){var C=(0,k.useState)(!1),v=(0,ee.Z)(C,2),B=v[0],a=v[1],s=(0,de.cI)(),f=(0,k.useContext)(te.xI),m=f.operation,E=(0,k.useContext)(te.Gb),d=E.node,D=E.getContainer,A=s.query("dataSource").get("value");return(0,h.jsxs)("div",{style:{paddingLeft:20,marginTop:10},children:[(0,h.jsxs)("a",{onClick:function(){a(!0)},children:[(0,h.jsx)(Y.MT,{infer:"Plus"}),"\u9009\u9879\u7F16\u8F91"]}),(0,h.jsx)(Y.E4,{getContainer:D,onConfirm:function(i){var x=ae(i[0]),o=ve(i.slice(1));s.query("dataSource").take(function(T){return T.value=o}),m.batchReplaceNode(x,d)}}),B&&(0,h.jsx)(Be,{onCancel:function(){return a(!1)},value:A,options:d.children.map(function(F){return{id:F.id,title:F.title}}),onOk:function(i,x){s.query("dataSource").take(function(o){return o.value=i}),m.batchReplaceNode(x,d),a(!1)}})]})}(0,te.j1)("Cascader",(0,oe.P)(pe))}}]);
