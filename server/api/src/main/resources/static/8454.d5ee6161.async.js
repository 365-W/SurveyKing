(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8454],{90586:function(He,ce,n){"use strict";n.d(ce,{P:function(){return R}});var Pe=n(11849),E=n(93224),f=n(80937),e=n(67294),X=n(30381),de=n.n(X),Ie=n(85893),R=function(Y){var he=Y.children,x=Y.syncDisplay,ke=Y.isMoment,G=(0,E.Z)(Y,["children","syncDisplay","isMoment"]),ne=(0,e.useMemo)(function(){return(0,f.$j)(function(B){var S=B.value,W=B.onChange,A=S;return ke&&S&&(A=de()(S)),e.cloneElement(he,{value:A,onChange:function(H){W(H)}})},(0,f.jM)(function(B,S){return{value:B.value,onChange:function(A){de().isMoment(A)?S.onInput(A.valueOf()):S.onInput(A)}}}))},[]);return(0,Ie.jsx)(f.gN,(0,Pe.Z)((0,Pe.Z)({},G),{},{component:[ne,Y],reactions:[function(B){if(x)if(typeof x=="string"){var S=B.query(B.path.parent().concat(x)).get("value");S?B.display="visible":B.display="none"}else typeof x=="object"&&Object.keys(x).forEach(function(W){var A=B.query(B.path.parent().concat(W)).get("value");x[W].includes(A)?B.display="visible":B.display="none"})}]}))};ce.Z=R},37222:function(He,ce,n){"use strict";n.d(ce,{Z:function(){return Ue}});var Pe=n(49111),E=n(19650),f=n(71153),e=n(60331),X=n(13062),de=n(71230),Ie=n(57663),R=n(71577),Te=n(48736),Y=n(27049),he=n(89032),x=n(15746),ke=n(62999),G=n(54680),ne=n(83279),B=n(94657),S=n(43358),W=n(34041),A=n(18106),Ze=n(51752),H=n(3980),c=n(80937),Ae=n(60780),Oe=n.n(Ae),ae=n(67294),Ne=n(49101),m=n(85893),Fe=W.Z.Option,$e=(0,c.Pi)(function(q){var xe=q.onChange,Ce=q.orgTreeData,re=q.positions,te=(0,ae.useState)(),K=(0,B.Z)(te,2),g=K[0],h=K[1],D=(0,ae.useState)(),Z=(0,B.Z)(D,2),b=Z[0],P=Z[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(de.Z,{gutter:10,children:[(0,m.jsx)(x.Z,{span:16,children:(0,m.jsx)(G.Z,{onChange:function(U){return h(U)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:[{title:"\u53D1\u8D77\u4EBA\u5F53\u524D\u90E8\u95E8",value:"${currentOrgId}",key:"${currentOrgId}"},{title:"\u53D1\u8D77\u4EBA\u4E0A\u7EA7\u90E8\u95E8",value:"${parentOrgId}",key:"${parentOrgId}"}].concat((0,ne.Z)(Ce)),placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0,value:g})}),(0,m.jsx)(x.Z,{span:8,children:(0,m.jsx)(W.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",allowClear:!0,value:b,onChange:function(U){return P(U)},children:re.map(function(M){return(0,m.jsx)(Fe,{value:M.id,children:M.name},M.id)})})})]}),(0,m.jsx)(de.Z,{style:{marginTop:10},children:(0,m.jsx)(x.Z,{children:(0,m.jsx)(R.Z,{icon:(0,m.jsx)(Ne.Z,{}),onClick:function(){(g||b)&&xe("P:".concat(g||"",":").concat(b||""))},children:"\u6DFB\u52A0"})})})]})}),ve=Ze.Z.TabPane,Le=W.Z.Option,Re=(0,c.Pi)(function(q){var xe=q.onChange,Ce=q.tabs,re=Ce===void 0?["user","role","position"]:Ce,te=(0,H.m2)(),K=(0,ae.useState)(q.value||[]),g=(0,B.Z)(K,2),h=g[0],D=g[1];(0,ae.useEffect)(function(){D(q.value||[])},[q.value]);var Z=(0,H.LF)(h),b=te.depts,P=te.users,M=te.roles,U=te.positions,se=(0,ae.useState)(),$=(0,B.Z)(se,2),ge=$[0],pe=$[1];(0,ae.useEffect)(function(){ge&&te.loadUsers({orgId:ge,pageSize:1024})},[ge,te]);var Se=(0,ae.useMemo)(function(){return Oe()(b.map(function(v){return{value:v.id,title:v.name,key:v.id,parentId:v.parentId}}),{parentProperty:"parentId",customID:"value"})},[b]),le=function(O){var V=(0,ne.Z)(h);O.forEach(function(Q){V.includes(Q)||V.push(Q)}),D(V),xe(V)},je=function(){for(var O=arguments.length,V=new Array(O),Q=0;Q<O;Q++)V[Q]=arguments[Q];var _=(0,ne.Z)(h.filter(function(fe){return!V.includes(fe)}));D(_),xe(_)};return(0,m.jsx)("div",{style:{width:400},children:(0,m.jsxs)(Ze.Z,{defaultActiveKey:"user",children:[(0,m.jsx)(ve,{tab:"\u6210\u5458",disabled:!re.includes("user"),children:(0,m.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,m.jsxs)(de.Z,{gutter:20,children:[(0,m.jsx)(x.Z,{span:16,children:(0,m.jsx)(G.Z,{onChange:function(O){return pe(O)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:Se,placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0})}),(0,m.jsx)(x.Z,{span:8,children:(0,m.jsx)(W.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",allowClear:!0,showSearch:!0,mode:"multiple",onChange:function(O){return le(O)},maxTagCount:0,value:h.filter(function(v){return v.startsWith("U:")}),dropdownRender:function(O){return(0,m.jsxs)("div",{children:[O,(0,m.jsx)(Y.Z,{style:{margin:"4px 0"}}),(0,m.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8},children:(0,m.jsx)(R.Z,{size:"small",type:"link",onClick:function(){return le(P.map(function(Q){return"U:".concat(Q.id)}))},children:"\u5168\u9009"})})]})},children:P.map(function(v){return(0,m.jsx)(Le,{value:"U:".concat(v.id),children:v.name},v.id)})})})]}),(0,m.jsx)(E.Z,{style:{marginTop:20},wrap:!0,children:h.filter(function(v){return v.startsWith("U:")}).map(function(v){return(0,m.jsx)(e.Z,{closable:!0,color:"blue",onClose:function(){return je(v)},children:Z.user[v.split(":")[1]]},v)})})]})},"user"),(0,m.jsx)(ve,{tab:"\u89D2\u8272",disabled:!re.includes("role"),children:(0,m.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,m.jsx)(W.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",allowClear:!0,showSearch:!0,mode:"multiple",value:h.filter(function(v){return v.startsWith("R:")}),onChange:function(O){return le(O)},maxTagCount:0,children:M.map(function(v){return(0,m.jsx)(Le,{value:"R:".concat(v.id),children:v.name},v.id)})}),(0,m.jsx)(E.Z,{style:{marginTop:20},wrap:!0,children:h.filter(function(v){return v.startsWith("R:")}).map(function(v){return(0,m.jsx)(e.Z,{closable:!0,color:"blue",onClose:function(){return je(v)},children:Z.role[v.split(":")[1]]},v)})})]})},"role"),(0,m.jsx)(ve,{tab:"\u673A\u6784\u5C97\u4F4D",disabled:!re.includes("position"),children:(0,m.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,m.jsx)($e,{positions:U,orgTreeData:Se,onChange:function(O){return le([O])}}),(0,m.jsx)(E.Z,{style:{marginTop:20},wrap:!0,children:h.filter(function(v){return v.startsWith("P:")}).map(function(v){var O=v.split(":"),V=(0,B.Z)(O,3),Q=V[1],_=V[2];return(0,m.jsxs)(e.Z,{closable:!0,color:"blue",onClose:function(){return je(v)},children:[Z.org[Q],"-",Z.position[_]]},Q+":"+_)})})]})},"position")]})})}),Ue=Re},10391:function(He,ce,n){"use strict";n.d(ce,{Z:function(){return te}});var Pe=n(88983),E=n(66253),f=n(94657),e=n(80937),X=n(67294),de=n(66456),Ie=n(1670),R=n(49111),Te=n(19650),Y=n(71194),he=n(50146),x=n(62350),ke=n(75443),G=n(57663),ne=n(71577),B=n(34792),S=n(48086),W=n(11628),A=n(3980),Ze=n(47673),H=n(4107),c=n(85893);function Ae(K){var g=(0,X.useState)(""),h=(0,f.Z)(g,2),D=h[0],Z=h[1];return(0,c.jsx)(he.Z,{title:"\u6DFB\u52A0\u767D\u540D\u5355",maskClosable:!1,visible:!0,onCancel:K.onCancel,onOk:function(){return K.onOk(D)},children:(0,c.jsx)(H.Z.TextArea,{placeholder:"\u6BCF\u884C\u4E00\u4E2A\u540D\u5355\uFF0C\u53EF\u4ECEExcel\u4E2D\u590D\u5236\u7C98\u8D34\u3002",value:D,rows:8,onChange:function(P){return Z(P.target.value)}})})}var Oe=n(93224),ae=n(77883),Ne=n(85482),m=n(43358),Fe=n(34041),$e=n(77576),ve=n(12028),Le=function(g){var h=g.value,D=g.onChange,Z=g.title,b=(0,X.useState)(!!h),P=(0,f.Z)(b,2),M=P[0],U=P[1];return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"setting-item",children:[(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{children:Z}),(0,c.jsx)(ve.Z,{checked:!!h,style:{margin:"0 6px"},onChange:function($){$?(U(!0),D({limitFreq:"only",limitNum:1})):(U(!1),D(void 0))}})]}),M&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Fe.Z,{style:{width:100},value:h==null?void 0:h.limitFreq,onChange:function($){return D({limitFreq:$,limitNum:(h==null?void 0:h.limitNum)||1})},options:[{label:"\u53EA\u80FD",value:"only"},{label:"\u6BCF\u5C0F\u65F6",value:"hour"},{label:"\u6BCF\u5929",value:"day"},{label:"\u6BCF\u81EA\u7136\u5468",value:"week"},{label:"\u6BCF\u81EA\u7136\u6708",value:"month"},{label:"\u6BCF\u5B63\u5EA6",value:"quarter"},{label:"\u6BCF\u81EA\u7136\u5E74",value:"year"}]}),(0,c.jsx)("span",{style:{margin:"0 10px"},children:"\u7B54\u9898"}),(0,c.jsx)(Ne.Z,{min:1,max:9999,defaultValue:1,value:h==null?void 0:h.limitNum,onChange:function($){return D({limitNum:$,limitFreq:(h==null?void 0:h.limitFreq)||"only"})}}),(0,c.jsx)("span",{style:{margin:"0 10px"},children:"\u6B21"})]})]})})},Re=function(g){var h=g.name,D=g.basePath,Z=(0,Oe.Z)(g,["name","basePath"]);return(0,c.jsx)(e.gN,{component:[Le,Z],name:h,basePath:D})},Ue=n(37222),q=function(g){var h=(0,X.useState)([]),D=(0,f.Z)(h,2),Z=D[0],b=D[1];return(0,c.jsx)(he.Z,{title:"\u8BBE\u7F6E\u7CFB\u7EDF\u7528\u6237\u767D\u540D\u5355",visible:!0,onCancel:g.onCancel,onOk:function(){return g.onOk(Z)},children:(0,c.jsx)(Ue.Z,{tabs:["user"],onChange:function(M){b(M.map(function(U){return U.split(":")[1]}))}})})},xe=q,Ce=(0,e.Pi)(function(g){var h=g.visible,D=g.onCancel,Z=g.whitelistType,b=(0,W.IE)(),P=b.id,M=(0,X.useState)([]),U=(0,f.Z)(M,2),se=U[0],$=U[1],ge=(0,X.useState)(!1),pe=(0,f.Z)(ge,2),Se=pe[0],le=pe[1],je=(0,X.useState)(!1),v=(0,f.Z)(je,2),O=v[0],V=v[1],Q=(0,X.useState)([]),_=(0,f.Z)(Q,2),fe=_[0],Qe=_[1],ye=function(){return A.hi.loadProjectPartner({projectId:P,types:[Z]}).then(function(N){$(N||[])})},Ve=function(N){A.hi.deleteProjectPartner({ids:N,projectId:P}).then(function(T){T.success?(S.default.success("\u5220\u9664\u6210\u529F"),ye()):S.default.error(T.message)})},Be=[{title:"\u5E8F\u53F7",dataIndex:"index",render:function(N,T,me){return me+1}},{title:"\u540D\u5355",dataIndex:"userName",render:function(N,T){var me;return N||((me=T.user)===null||me===void 0?void 0:me.name)}},{title:"\u72B6\u6001",dataIndex:"status",filters:[{text:"\u672A\u8BBF\u95EE",value:0},{text:"\u5DF2\u8BBF\u95EE",value:1},{text:"\u5DF2\u7B54\u9898",value:2}],onFilter:function(N,T){return T.status===N},ellipsis:!0,render:function(N){return N===0?"\u672A\u8BBF\u95EE":N===1?"\u5DF2\u8BBF\u95EE":N===2?"\u5DF2\u7B54\u9898":"-"}},{title:"\u64CD\u4F5C",dataIndex:"operation",render:function(N,T){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(ke.Z,{title:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u540D\u5355\u5417?",onConfirm:function(){Ve([T.id])},okText:"Yes",cancelText:"No",children:(0,c.jsx)(ne.Z,{type:"link",size:"small",children:"\u5220\u9664"})})})}}];return(0,X.useEffect)(function(){ye()},[]),(0,c.jsxs)(he.Z,{visible:h,onCancel:D,maskClosable:!1,width:650,closable:!1,okText:!1,title:"\u767D\u540D\u5355\u8BBE\u7F6E",footer:(0,c.jsxs)(Te.Z,{children:[(0,c.jsx)(ne.Z,{onClick:function(){Z===3?V(!0):le(!0)},children:"\u6DFB\u52A0\u767D\u540D\u5355"}),(0,c.jsx)(ne.Z,{danger:!0,type:"primary",disabled:fe.length===0,onClick:function(){he.Z.confirm({title:"\u786E\u5B9A\u5C06 ".concat(fe.length," \u4E2A\u540D\u5355\u5220\u9664\u5417?"),content:"\u540D\u5355\u5220\u9664\u4E4B\u540E\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u3002",okType:"danger",onOk:function(){Ve(fe)}})},children:"\u6279\u91CF\u5220\u9664"}),(0,c.jsx)(ne.Z,{onClick:D,children:"\u5173\u95ED"})]}),children:[(0,c.jsx)("div",{style:{lineHeight:"36px",padding:"6px 0"},children:(0,c.jsx)(Re,{basePath:"answerSetting",name:"whitelistLimit",title:"\u767D\u540D\u5355\u7B54\u9898\u9650\u5236"})}),(0,c.jsx)(Ie.Z,{dataSource:se,columns:Be,rowKey:"id",scroll:{y:350},rowSelection:{onChange:function(N){Qe(N)}},bordered:!0,size:"small",pagination:!1}),Se&&(0,c.jsx)(Ae,{onCancel:function(){return le(!1)},onOk:function(N){A.hi.addProjectPartner({projectId:P,type:Z,userNames:N.split(`
`).map(function(T){return T.trim()}).filter(function(T){return T})}).then(function(T){T.success?(S.default.success("\u6DFB\u52A0\u6210\u529F"),le(!1),ye()):S.default.error(T.message)})}}),O&&(0,c.jsx)(xe,{onCancel:function(){return V(!1)},onOk:function(N){A.hi.addProjectPartner({userIds:N,projectId:P,type:3}).then(function(){S.default.success("\u6DFB\u52A0\u6210\u529F"),V(!1),ye()})}})]})}),re=function(g){var h=g.value,D=g.onChange,Z=(0,X.useState)(!1),b=(0,f.Z)(Z,2),P=b[0],M=b[1];return(0,c.jsxs)("div",{children:[g.value&&(0,c.jsx)("a",{style:{marginRight:4},onClick:function(){return M(!0)},children:"\u8BBE\u7F6E"}),(0,c.jsxs)(E.ZP.Group,{buttonStyle:"solid",size:"small",value:g.value,onChange:function(se){g.onChange(se.target.value)},children:[(0,c.jsx)(E.ZP.Button,{value:3,onClick:function(){h===3&&D(void 0)},children:"\u7CFB\u7EDF\u7528\u6237"}),(0,c.jsx)(E.ZP.Button,{value:4,onClick:function(){h===4&&D(void 0)},children:"\u5916\u90E8\u7528\u6237"})]}),P&&g.value&&(0,c.jsx)(Ce,{visible:P,onCancel:function(){return M(!1)},whitelistType:g.value})]})};function te(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(e.gN,{basePath:"answerSetting",name:"whitelistType",component:[re]})})}},18454:function(He,ce,n){"use strict";n.d(ce,{KL:function(){return Ne},M6:function(){return Ae},yX:function(){return fe},kJ:function(){return Ke},tx:function(){return Fn},cg:function(){return Xe},rs:function(){return m},q1:function(){return N},qo:function(){return q},Jg:function(){return _}});var Pe=n(63185),E=n(80937),f=n(67294),e=n(85893),X=function(i){var t=i.children,u=_objectWithoutProperties(i,["children"]),l=function(a){return _jsx(_Checkbox,{checked:a.value,onChange:function(y){a.onChange(y.target.checked)},children:t})};return _jsx(Field,_objectSpread({component:[l]},u))},de=n(47673),Ie=function(i){var t=i.children,u=i.style,l=_objectWithoutProperties(i,["children","style"]),r=function(o){return _jsx(_Input,{value:o.value,style:u,onChange:function(F){o.onChange(F.target.value)},children:t})};return _jsx(Field,_objectSpread({component:[r]},l))},R=n(11849),Te=n(71194),Y=n(50146),he=n(57663),x=n(71577),ke=n(77576),G=n(12028),ne=n(22385),B=n(94199),S=n(94657),W=n(19357),A=n(84387),Ze=n(54531),H=n(11628),c=function(i){var t=i.value,u=i.onChange,l=(0,f.useState)(!1),r=(0,S.Z)(l,2),a=r[0],o=r[1],y=(0,H.IE)(),F=(0,f.useRef)(null);return(0,f.useEffect)(function(){t||o(!1)},[t]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u8BBE\u7F6E\u95EE\u5377\u9ED8\u8BA4\u7B54\u6848",(0,e.jsx)(B.Z,{overlay:"\u8BBE\u7F6E\u7684\u7B54\u6848\u5C06\u4F5C\u4E3A\u9ED8\u8BA4\u7B54\u6848\u5E26\u5165\u95EE\u5377",children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:!!t,onChange:function(j){j?o(!0):u(void 0)}})]}),(a||!!t)&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsx)(x.Z,{onClick:function(){return o(!0)},style:{marginLeft:10},type:"dashed",children:t?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),a&&(0,e.jsx)(Y.Z,{visible:!0,onCancel:function(){return o(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){var j;u((0,Ze.ZN)((j=F.current)===null||j===void 0?void 0:j.getValues())),o(!1)},children:y.schema?(0,e.jsx)(W.Z,{ref:F,initialValues:t,paginationVisible:!1,schema:y.schema,footerVisible:!1}):"\u95EE\u5377\u4E3A\u7A7A"})]})},Ae=function(i){return(0,e.jsx)(E.gN,(0,R.Z)({component:[c]},i))},Oe=n(74118),ae=function(i){var t=i.value,u=i.onChange,l=(0,f.useState)(!1),r=(0,S.Z)(l,2),a=r[0],o=r[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u9875\u9762",(0,e.jsx)(B.Z,{overlay:"\u4F60\u53EF\u4EE5\u5728\u8868\u5355\u63D0\u4EA4\u9875\u9762\u8BBE\u7F6E\u66F4\u4E3A\u4E30\u5BCC\u591A\u5F69\u7684\u5185\u5BB9\uFF0C\u5305\u62EC\u63D2\u5165\u56FE\u7247\u3001\u8BBE\u7F6E\u5B57\u53F7\u3001\u5B57\u4F53\u989C\u8272\u3001\u5E8F\u53F7\u3001\u8BBE\u7F6E\u8D85\u94FE\u63A5\u7B49\u7B49\u3002",children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:!!t,onChange:function(F){F?o(!0):u(void 0)}})]}),(a||!!t)&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsx)(x.Z,{onClick:function(){return o(!0)},style:{marginLeft:10},type:"dashed",children:t?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),a&&(0,e.jsx)(Oe.cM,{value:t,title:"\u63D0\u4EA4\u540E\u56FE\u6587\u5C55\u793A",width:750,onChange:function(F){u(F),o(!1)},onClose:function(){o(!1)}})]})},Ne=function(i){return(0,e.jsx)(E.gN,(0,R.Z)({component:[ae]},i))},m=function(i){var t=i.title,u=i.tooltip,l=function(a){return(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:[t,u&&(0,e.jsx)(B.Z,{overlay:u,children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:a.value,onChange:function(y){a.onChange(y)}})]})})};return(0,e.jsx)(E.gN,(0,R.Z)({component:[l]},i))},Fe=n(93224),$e=n(77883),ve=n(85482),Le=n(43358),Re=n(34041),Ue=function(i){var t=i.value,u=i.onChange,l=i.title,r=i.tooltip,a=(0,f.useState)(!!t),o=(0,S.Z)(a,2),y=o[0],F=o[1];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:[l,(0,e.jsx)(B.Z,{overlay:r,children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:!!t,onChange:function(j){j?(F(!0),u({limitFreq:"only",limitNum:1})):(F(!1),u(void 0))}})]}),y&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsxs)("div",{children:[(0,e.jsx)(Re.Z,{style:{width:100},value:t==null?void 0:t.limitFreq,onChange:function(j){return u({limitFreq:j,limitNum:(t==null?void 0:t.limitNum)||1})},options:[{label:"\u53EA\u80FD",value:"only"},{label:"\u6BCF\u5C0F\u65F6",value:"hour"},{label:"\u6BCF\u5929",value:"day"},{label:"\u6BCF\u81EA\u7136\u5468",value:"week"},{label:"\u6BCF\u81EA\u7136\u6708",value:"month"},{label:"\u6BCF\u5B63\u5EA6",value:"quarter"},{label:"\u6BCF\u81EA\u7136\u5E74",value:"year"}]}),(0,e.jsx)("span",{style:{margin:"0 10px"},children:"\u7B54\u9898"}),(0,e.jsx)(ve.Z,{min:1,max:9999,defaultValue:1,value:t==null?void 0:t.limitNum,onChange:function(j){return u({limitNum:j,limitFreq:(t==null?void 0:t.limitFreq)||"only"})}}),(0,e.jsx)("span",{style:{margin:"0 10px"},children:"\u6B21"})]})})]})})},q=function(i){var t=i.name,u=i.basePath,l=(0,Fe.Z)(i,["name","basePath"]);return(0,e.jsx)(E.gN,{component:[Ue,l],name:t,basePath:u})},xe=function(){var i=function(u){var l=u.value,r=u.onChange;return l===1?_jsx(_Button,{type:"primary",icon:_jsx(CaretRightOutlined,{}),onClick:function(){return r(0)},children:"\u6B63\u5728\u56DE\u6536"}):_jsx(_Button,{type:"primary",danger:!0,icon:_jsx(PauseOutlined,{}),onClick:function(){return r(1)},children:"\u6682\u505C\u56DE\u6536"})};return _jsx(Field,{name:"status",component:[i],basePath:""})},Ce=n(59250),re=n(13013),te=n(30887),K=n(28682),g=n(3182),h=n(4107),D=n(94043),Z=n.n(D),b=n(92592),P=n(83279),M=n(20136),U=n(55241),se=n(49111),$=n(19650),ge=n(54977),pe=n(23538),Se=n(73171),le=n(71211),je=h.Z.Search;function v(s){return"".concat(window.location.origin,"/s/").concat(s)}var O=function(i){var t=i.item,u=i.onChange,l=i.onDelete,r=(0,H.IE)(),a=t.url,o=(0,f.useState)(""),y=(0,S.Z)(o,2),F=y[0],d=y[1],j=(0,f.useRef)(null),L=(0,H.IE)(),k=(0,f.useState)(!1),w=(0,S.Z)(k,2),ie=w[0],ue=w[1];(0,f.useEffect)(function(){function C(){return I.apply(this,arguments)}function I(){return I=(0,g.Z)(Z().mark(function be(){return Z().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:b.toDataURL(a,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(ee){d(ee)}).catch(function(ee){console.error(ee)});case 1:case"end":return J.stop()}},be)})),I.apply(this,arguments)}C()},[a]);var p=(0,f.useCallback)(function(){var C=(0,g.Z)(Z().mark(function I(be){return Z().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:b.toDataURL(a,{errorCorrectionLevel:"H",margin:5,width:be}).then(function(ee){d(ee);var Me=document.createElement("a");Me.href=ee,Me.setAttribute("download","".concat(r.name,"_").concat(be,".png")),document.body.appendChild(Me),Me.click(),document.body.removeChild(Me)});case 1:case"end":return J.stop()}},I)}));return function(I){return C.apply(this,arguments)}}(),[a,r]);return(0,e.jsxs)("div",{style:{border:"1px solid #d9d9d9",margin:"5px 0",padding:"8px 4px"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(h.Z,{value:t.name,style:{width:200},placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",onChange:function(I){return u((0,R.Z)((0,R.Z)({},t),{},{name:I.target.value}))}}),(0,e.jsxs)($.Z,{children:[(0,e.jsx)(x.Z,{icon:(0,e.jsx)(ge.Z,{}),onClick:function(){return ue(!0)}}),(0,e.jsx)(U.Z,{content:(0,e.jsxs)("div",{children:[(0,e.jsx)("img",{src:F,height:150,width:150}),(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsxs)($.Z,{children:[(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return p(256)},children:"\u5C0F\u53F7"}),(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return p(512)},children:"\u4E2D\u53F7"}),(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return p(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(r.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click"],children:(0,e.jsx)(x.Z,{icon:(0,e.jsx)(pe.Z,{})})}),(0,e.jsx)(x.Z,{icon:(0,e.jsx)(Se.Z,{}),onClick:function(){return l(t.id)}})]})]}),(0,e.jsx)(je,{value:a,style:{margin:"5px 0 0 0"},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(r.id,"?id=").concat(t.id))}}),(0,e.jsx)(Y.Z,{visible:ie,onCancel:function(){return ue(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){ue(!1)},children:L.schema&&(0,e.jsx)(W.Z,{ref:j,initialValues:t.value,schema:L.schema,footerVisible:!1,onSubmit:function(I){}})})]})},V=function(i){var t=i.visible,u=i.onClose,l=(0,f.useState)([]),r=(0,S.Z)(l,2),a=r[0],o=r[1],y=(0,H.IE)();return(0,e.jsxs)(Y.Z,{visible:t,onCancel:u,title:"\u5E26\u503C\u94FE\u63A5\u8BBE\u7F6E",maskClosable:!1,bodyStyle:{maxHeight:360,overflow:"auto"},children:[a.map(function(F){return(0,e.jsx)(O,{item:F,onChange:function(j){var L=a.findIndex(function(k){return k.id===j.id});a.splice(L,1,j),o((0,P.Z)(a))},onDelete:function(j){o((0,P.Z)(a.filter(function(L){return L.id!==j})))}},F.id)}),(0,e.jsx)(x.Z,{block:!0,type:"primary",ghost:!0,onClick:function(){var d=(0,le.Ox)();a.push({id:d,url:"".concat(v(y.id),"?id=").concat(d)}),o((0,P.Z)(a))},children:"\u6DFB\u52A0"})]})},Q=h.Z.Search;function _(s){return"".concat(window.location.origin,"/s/").concat(s)}var fe=function(){var i=(0,H.IE)(),t=_(i.id),u=(0,f.useState)(""),l=(0,S.Z)(u,2),r=l[0],a=l[1],o=(0,f.useState)(!1),y=(0,S.Z)(o,2),F=y[0],d=y[1];(0,f.useEffect)(function(){function k(){return w.apply(this,arguments)}function w(){return w=(0,g.Z)(Z().mark(function ie(){return Z().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:b.toDataURL(t,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(C){a(C)}).catch(function(C){console.error(C)});case 1:case"end":return p.stop()}},ie)})),w.apply(this,arguments)}k()},[t]);var j=(0,f.useCallback)(function(){var k=(0,g.Z)(Z().mark(function w(ie){return Z().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:b.toDataURL(t,{errorCorrectionLevel:"H",margin:5,width:ie}).then(function(C){a(C);var I=document.createElement("a");I.href=C,I.setAttribute("download","".concat(i.name,"_").concat(ie,".png")),document.body.appendChild(I),I.click(),document.body.removeChild(I)});case 1:case"end":return p.stop()}},w)}));return function(w){return k.apply(this,arguments)}}(),[t,i]),L=(0,e.jsx)(K.Z,{onClick:function(w){return j(parseInt(w.key))},items:[{label:"\u5C0F\u53F7",key:256},{label:"\u4E2D\u53F7",key:512},{label:"\u5927\u53F7",key:1024}]});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsx)("span",{children:"\u95EE\u5377\u94FE\u63A5"}),(0,e.jsx)(Q,{value:t,style:{width:300},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(i.id))}})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:10},children:[(0,e.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:100,height:100},children:(0,e.jsx)("img",{src:r,height:95,width:95})}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,e.jsx)(re.Z,{overlay:L,placement:"bottomLeft",children:(0,e.jsx)(x.Z,{children:"\u4E0B\u8F7D\u4E8C\u7EF4\u7801"})}),(0,e.jsxs)(x.Z,{type:"primary",ghost:!0,style:{marginTop:10,visibility:"hidden"},onClick:function(){return d(!0)},children:["\u5E26\u503C\u94FE\u63A5",(0,e.jsx)(B.Z,{overlay:"\u94FE\u63A5\u6DFB\u52A0\u53C2\u6570\uFF0C\u5C06\u81EA\u52A8\u5E94\u7528\u4E3A\u95EE\u5377\u7684\u7B54\u6848\u3002",children:(0,e.jsx)(A.Z,{className:"setting-prompt",style:{color:"#1891ff"}})})]})]}),(0,e.jsx)(V,{visible:F,onClose:function(){return d(!1)}})]})]})},Qe=n(14965),ye=n(68318),Ve=n(30381),Be=n.n(Ve),z=function(i){var t=i.value,u=i.onChange,l=i.title,r=i.tooltip,a=i.type,o=a===void 0?"text":a,y=i.prefix,F=i.suffix,d=i.style,j=(0,f.useState)(t!==void 0),L=(0,S.Z)(j,2),k=L[0],w=L[1];(0,f.useEffect)(function(){t!==void 0&&w(!0)},[t]);var ie=function(){return o==="datepicker"?(0,e.jsx)(ye.Z,{value:t?Be()(t):void 0,showTime:!0,style:d,onChange:function(C){u(C?C==null?void 0:C.valueOf():void 0)}}):o==="number"?(0,e.jsx)(ve.Z,{value:t,onChange:function(C){return u(C)},style:(0,R.Z)({width:200},d)}):(0,e.jsx)(h.Z,{value:t,onChange:function(C){return u(C.target.value)},style:(0,R.Z)({width:200},d)})};return(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:[l,r&&(0,e.jsx)(B.Z,{overlay:r,children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:t!==void 0,onChange:function(p){p?(w(!0),u("")):(w(!1),u(void 0))}})]}),k&&(0,e.jsxs)("div",{className:"setting-item-content",children:[y,ie(),F]})]})},N=function(i){var t=i.name,u=i.basePath,l=(0,Fe.Z)(i,["name","basePath"]);return(0,e.jsx)(E.gN,{component:[z,l],name:t,basePath:u})},T=n(25782),me=n(69816),Ke=function(){var i=function(u){var l=u.value,r=u.onChange;return l===1?(0,e.jsx)(x.Z,{type:"primary",icon:(0,e.jsx)(T.Z,{}),onClick:function(){return r(0)},children:"\u6B63\u5728\u56DE\u6536"}):(0,e.jsx)(x.Z,{type:"primary",danger:!0,icon:(0,e.jsx)(me.Z,{}),onClick:function(){return r(1)},children:"\u6682\u505C\u56DE\u6536"})};return(0,e.jsx)(E.gN,{component:[i],name:"status",basePath:""})},We=n(1997),Je=function(i){var t=i.value,u=i.onChange,l=(0,f.useState)(!1),r=(0,S.Z)(l,2),a=r[0],o=r[1],y=(0,H.IE)(),F=y.schema;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u94FE\u63A5",(0,e.jsx)(B.Z,{overlay:"\u95EE\u5377\u4FDD\u5B58\u4E4B\u540E\uFF0C\u53EF\u4EE5\u8DF3\u8F6C\u5230\u6307\u5B9A\u94FE\u63A5\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u94FE\u63A5\u53C2\u6570\u3002",children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:!!t,onChange:function(j){j?o(!0):u(void 0)}})]}),(a||!!t)&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsx)(x.Z,{onClick:function(){return o(!0)},style:{marginLeft:10},type:"dashed",children:t?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),a&&(0,e.jsx)(We.tC,{value:t,schema:F,title:"\u63D0\u4EA4\u540E\u81EA\u5B9A\u4E49\u8DF3\u8F6C\u94FE\u63A5",onOk:function(j){u(j),o(!1)},onCancel:function(){o(!1)}})]})},Xe=function(i){return(0,e.jsx)(E.gN,(0,R.Z)({component:[Je]},i))},Ge=n(49101),pn=n(48736),qe=n(27049),Sn=n(34792),we=n(48086),Bn=n(9715),De=n(86835),_e=n(64031),Dn=n(88983),Ee=n(66253),en=n(90586),nn=n(32059),bn=n(13254),ze=n(14277),tn=n(76826),un=n(96486),an=["FillBlank","MultipleBlank","Textarea","Signature","Radio","Checkbox","Select","Cascader","HorzBlank","MatrixAuto","MatrixRadio","MatrixCheckbox","MatrixFillBlank","MatrixNps","MatrixScore","Upload","Score","Nps","Remark","SplitLine","User","Dept","Address","Barcode"],ln=["Pagination","Remark","SplitLine"],rn={Pagination:"\u5206\u9875",Remark:"\u5907\u6CE8",SplitLine:"\u5206\u5272\u7EBF"};function Ye(s){var i=[];return s&&((an.includes(s.type)||ln.includes(s.type))&&i.push({id:s.id,title:rn[s.type]||(0,tn.WO)(s.title),type:s.type}),s.children&&s.children.map(function(t){var u=Ye(t);u&&i.push.apply(i,(0,P.Z)(u))})),i}var sn=function(i){var t=i.value,u=i.onChange;return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:i.title}),(0,e.jsx)("td",{onClick:function(){return u(2)},children:(0,e.jsx)(Ee.ZP,{value:2,checked:t===2})}),(0,e.jsx)("td",{onClick:function(){return u(1)},children:(0,e.jsx)(Ee.ZP,{value:1,checked:t===1})}),(0,e.jsx)("td",{onClick:function(){return u(0)},children:(0,e.jsx)(Ee.ZP,{value:0,checked:t===0})})]},i.id)},on=function(i){var t=i.onChange,u=i.value,l=u===void 0?{}:u,r=(0,H.IE)(),a=r.schema,o=r.mode,y=(0,f.useMemo)(function(){var d=Ye(a);return o==="exam"&&d.push({id:"examScore",title:"\u8003\u8BD5\u5206\u6570",type:"FillBlank"}),d},[a]);(0,f.useEffect)(function(){if((0,un.isEmpty)(l)&&y.length>0){var d={};y.forEach(function(j){return d[j.id]=1}),t&&t(d)}},[a,l,y,t]);var F=function(j){t&&t(y.reduce(function(L,k){return L[k.id]=j,L},{}))};return a?(0,e.jsx)("div",{children:(0,e.jsxs)("table",{className:"field-permission-table",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{style:{width:"64%"},children:"\u5B57\u6BB5\u540D"}),(0,e.jsx)("th",{style:{width:"12%"},children:"\u53EF\u7F16\u8F91"}),(0,e.jsx)("th",{style:{width:"12%"},children:"\u4EC5\u53EF\u89C1"}),(0,e.jsx)("th",{style:{width:"12%"},children:"\u9690\u85CF"})]})}),(0,e.jsx)("tbody",{children:y.map(function(d){return(0,f.createElement)(sn,(0,R.Z)((0,R.Z)({},d),{},{value:l[d.id],onChange:function(L){t&&t((0,R.Z)((0,R.Z)({},l),{},(0,nn.Z)({},d.id,L)))},key:d.id}))})}),(0,e.jsx)("tfoot",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{}),(0,e.jsx)("td",{children:(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return F(2)},children:"\u5168\u9009"})}),(0,e.jsx)("td",{children:(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return F(1)},children:"\u5168\u9009"})}),(0,e.jsx)("td",{children:(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return F(0)},children:"\u5168\u9009"})})]})})]})}):(0,e.jsx)("div",{children:(0,e.jsx)(ze.Z,{image:ze.Z.PRESENTED_IMAGE_SIMPLE,description:"\u95EE\u5377\u4E3A\u7A7A"})})},cn=ye.Z.RangePicker,dn=function(i){var t=i.name,u=i.placeholder,l=function(a){return(0,e.jsx)(h.Z,{onChange:a.onChange,value:a.value,placeholder:u})};return(0,e.jsx)(E.gN,{name:t,component:[l]})},hn=(0,E.Pi)(function(){var s,i=(0,H.IE)(),t=i.schema,u=(0,f.useState)(!1),l=(0,S.Z)(u,2),r=l[0],a=l[1],o=(0,E.cI)(),y=(s=o.values)===null||s===void 0?void 0:s.conditionQuestion,F=(0,f.useMemo)(function(){return(0,We.sJ)(i.schema)},[i]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(en.Z,{name:"conditionQuestion",children:(0,e.jsx)(We.ML,{variable:F,readOnly:!0,placeholder:"\u67E5\u8BE2\u6761\u4EF6\u4E3A\u7A7A\uFF0C\u70B9\u51FB\u9009\u62E9"})}),(0,e.jsx)(x.Z,{type:"link",onClick:function(){return a(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),t&&(0,e.jsx)(We.ZP,{visible:r,value:y,title:"\u9009\u62E9\u67E5\u8BE2\u6761\u4EF6",schema:t,onCancel:function(){return a(!1)},functionVisible:!1,fieldTypes:["FillBlank"],functions:[{name:"\u57FA\u7840",functions:[{name:"hah",description:"heih"}]}],onOk:function(j){o.values.conditionQuestion=j,a(!1)}})]})}),vn=(0,E.Pi)(function(){return(0,e.jsx)(E.gN,{name:"fieldPermission",component:[on]})}),fn=function(){var i=function(u){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee.ZP,{checked:u.value===void 0,onClick:function(){u.onChange(void 0)},children:"\u516C\u5F00"}),(0,e.jsx)(Ee.ZP,{checked:u.value!==void 0,onClick:function(){u.onChange("")},children:"\u975E\u516C\u5F00\uFF0C\u9700\u8981\u8BBF\u95EE\u5BC6\u7801"}),u.value!==void 0&&(0,e.jsx)(h.Z,{style:{width:200},onChange:function(r){return u.onChange(r.target.value)},value:u.value})]})};return(0,e.jsx)(E.gN,{name:"password",component:[i]})},mn=function(){var i=function(u){var l;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee.ZP,{checked:u.value===void 0,onClick:function(){u.onChange(void 0)},children:"\u6C38\u4E45\u6709\u6548"}),(0,e.jsx)(Ee.ZP,{checked:u.value!==void 0,onClick:function(){u.onChange([Be()().format("YYYY-MM-DD HH:mm:ss"),Be()().add(7,"days").format("YYYY-MM-DD HH:mm:ss")])},children:"\u6307\u5B9A\u65E5\u671F\u6BB5\u5185\u6709\u6548"}),u.value!==void 0&&(0,e.jsx)(cn,{showTime:!0,value:(l=u.value)===null||l===void 0?void 0:l.map(function(r){return Be()(r)}),onChange:function(a){u.onChange(a==null?void 0:a.map(function(o){return o==null?void 0:o.format("YYYY-MM-DD HH:mm:ss")}))}})]})};return(0,e.jsx)(E.gN,{name:"linkValidityPeriod",component:[i]})},xn=n(56692),Cn=n(74855),gn=n(3980),jn=(0,E.Pi)(function(s){var i=s.values,t=s.onCancel,u=s.onOk,l=s.visible,r=(0,f.useMemo)(function(){return(0,_e.Np)({initialValues:i})},[]);return(0,e.jsx)(E.RV,{form:r,children:(0,e.jsxs)(Y.Z,{visible:l,title:"\u65B0\u589E\u67E5\u8BE2\u9875\u9762",okText:"\u4FDD\u5B58",width:750,bodyStyle:{maxHeight:650,overflow:"auto"},onCancel:t,onOk:function(){return u(r.values)},className:"query-item-modal",children:[(0,e.jsx)(De.Z.Item,{label:"\u9875\u9762\u6807\u9898",required:!0,labelCol:{span:24},children:(0,e.jsx)(dn,{name:"title",placeholder:"\u67E5\u8BE2\u6807\u9898"})}),(0,e.jsx)(De.Z.Item,{label:"\u9875\u9762\u67E5\u8BE2\u63CF\u8FF0\u4FE1\u606F",labelCol:{span:24},children:(0,e.jsx)(xn.rN,{name:"description",placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u63CF\u8FF0\u4FE1\u606F\uFF0C\u652F\u6301\u5BCC\u6587\u672C\u8F93\u5165",style:{border:"1px solid #d9d9d9"},size:"large"})}),(0,e.jsx)(De.Z.Item,{label:"\u67E5\u8BE2\u6761\u4EF6",required:!0,labelCol:{span:24},children:(0,e.jsx)(hn,{})}),(0,e.jsx)(De.Z.Item,{label:"\u67E5\u8BE2\u7ED3\u679C",required:!0,labelCol:{span:24},children:(0,e.jsx)(vn,{})}),(0,e.jsx)(De.Z.Item,{label:"\u67E5\u770B\u6743\u9650",required:!0,labelCol:{span:24},children:(0,e.jsx)(fn,{})}),(0,e.jsx)(De.Z.Item,{label:"\u94FE\u63A5\u6709\u6548\u671F",required:!0,labelCol:{span:24},children:(0,e.jsx)(mn,{})})]})})}),yn=(0,E.Pi)(function(s){var i=(0,E.U$)(),t=s.index,u=s.item,l=(0,f.useState)(!1),r=(0,S.Z)(l,2),a=r[0],o=r[1],y=(0,f.useState)(""),F=(0,S.Z)(y,2),d=F[0],j=F[1],L=(0,H.IE)(),k=_(L.id)+"/result/".concat(u.id),w=(0,E.cI)(),ie=i.value[t].enabled;(0,f.useEffect)(function(){function p(){return C.apply(this,arguments)}function C(){return C=(0,g.Z)(Z().mark(function I(){return Z().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:b.toDataURL(k,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(J){j(J)}).catch(function(J){console.error(J)});case 1:case"end":return oe.stop()}},I)})),C.apply(this,arguments)}p()},[k]);var ue=(0,f.useCallback)(function(){var p=(0,g.Z)(Z().mark(function C(I){return Z().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:b.toDataURL(k,{errorCorrectionLevel:"H",margin:5,width:I}).then(function(J){j(J);var ee=document.createElement("a");ee.href=J,ee.setAttribute("download","".concat(L.name,"_").concat(I,".png")),document.body.appendChild(ee),ee.click(),document.body.removeChild(ee)});case 1:case"end":return oe.stop()}},C)}));return function(C){return p.apply(this,arguments)}}(),[k,L]);return(0,e.jsxs)(E.Wo,{name:t,children:[(0,e.jsxs)("div",{style:{background:"white",marginBottom:10,padding:"20px 10px 10px 10px"},children:[u.linkValidityPeriod&&(0,e.jsxs)("div",{style:{lineHeight:"32px"},children:["\u94FE\u63A5\u6709\u6548\u671F\uFF1A","".concat(u.linkValidityPeriod[0],"-").concat(u.linkValidityPeriod[1])]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:u.title||"\u4FE1\u606F\u67E5\u8BE2"}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"6px 0px"},children:[(0,e.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:32,height:32},children:(0,e.jsx)(U.Z,{content:(0,e.jsxs)("div",{children:[(0,e.jsx)("img",{src:d,height:150,width:150}),(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsxs)($.Z,{children:[(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return ue(256)},children:"\u5C0F\u53F7"}),(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return ue(512)},children:"\u4E2D\u53F7"}),(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return ue(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(L.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click","hover"],children:(0,e.jsx)("img",{src:d,height:30,width:30})})}),(0,e.jsxs)($.Z,{style:{marginLeft:10},children:[(0,e.jsx)(h.Z,{value:k,readOnly:!0,style:{width:340,background:"#f7f8fa"}}),(0,e.jsx)(Cn.CopyToClipboard,{text:k,onCopy:function(){return we.default.success("\u590D\u5236\u6210\u529F")},children:(0,e.jsx)(x.Z,{type:"primary",ghost:!0,disabled:!ie,children:"\u590D\u5236"})}),(0,e.jsx)(x.Z,{type:"primary",ghost:!0,onClick:function(){return window.open(k)},disabled:!ie,children:"\u6253\u5F00"})]})]})]}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,e.jsxs)($.Z,{children:[(0,e.jsx)(x.Z,{type:"link",size:"small",onClick:function(){return o(!0)},children:"\u8BBE\u7F6E"}),(0,e.jsx)(qe.Z,{type:"vertical"}),(0,e.jsx)(x.Z,{type:"link",size:"small",onClick:function(){return i.remove(t)},children:"\u5220\u9664"})]}),(0,e.jsx)(E.gN,{name:"enabled",component:[function(p){return(0,e.jsx)(G.Z,{onChange:function(I){return p.onChange(I)},checked:p.value,checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"})}]})]})]}),(0,e.jsx)(jn,{visible:a,values:u,onCancel:function(){return o(!1)},onOk:function(C){i.value[t]=(0,R.Z)((0,R.Z)({},u),C),gn.hi.updateSetting({id:L.id,settingKey:"submittedSetting.publicQuery",settingValue:i.value}).then(function(I){I.success&&we.default.info("\u4FDD\u5B58\u4E2D")}),o(!1)}})]})}),En=n(87998),Zn=(0,E.Pi)(function(){var s,i=(0,E.U$)();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:380,overflow:"auto"},children:(s=i.value)===null||s===void 0?void 0:s.map(function(t,u){return(0,e.jsx)(yn,{item:t,index:u},t.id)})}),(0,e.jsx)(x.Z,{type:"link",onClick:function(){i.push({id:(0,En.kb)(6)})},icon:(0,e.jsx)(Ge.Z,{}),children:"\u65B0\u589E\u67E5\u8BE2\u9875\u9762"})]})}),Fn=function(i){var t=(0,f.useState)(!1),u=(0,S.Z)(t,2),l=u[0],r=u[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{title:"\u5BF9\u5916\u67E5\u8BE2\u8BBE\u7F6E",onCancel:function(){return r(!1)},maskClosable:!1,width:650,visible:l,footer:!1,bodyStyle:{background:"#f7f8fa",height:450,overflow:"hidden"},children:(0,e.jsx)(E.OF,{name:"publicQuery",component:[Zn]})}),(0,e.jsx)(x.Z,{type:"link",onClick:function(){return r(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]})},Pn=n(10391)}}]);
