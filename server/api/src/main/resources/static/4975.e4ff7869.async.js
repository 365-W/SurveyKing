(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4975],{55686:function(F,D,a){"use strict";var b=a(11849),P=a(94233),j=a(51890),w=a(93224),Z=a(89366),e=a(85893),I=function($){var S=$.user,M=(0,w.Z)($,["user"]);return!S||!S.avatar?(0,e.jsx)(j.C,(0,b.Z)({icon:(0,e.jsx)(Z.Z,{}),size:M.size||"small"},M)):(0,e.jsx)(j.C,(0,b.Z)({src:"/api/public/preview/".concat(S.avatar),size:M.size||"small"},M))};D.Z=I},78210:function(F,D,a){"use strict";var b=a(15020),P=a(85893),j=function(Z){var e=Z.html,I=e===void 0?"":e,A=Z.replaceP,$=A===void 0?!0:A;return $?(0,P.jsx)(P.Fragment,{children:typeof I=="string"&&(0,b.ZP)(I.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,P.jsx)(P.Fragment,{children:typeof I=="string"&&(0,b.ZP)(I)})};D.Z=j},39017:function(F,D,a){"use strict";a.d(D,{Rk:function(){return S},AK:function(){return j},Al:function(){return A}});var b=a(67294),P=a(24004);function j(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",L=(0,b.useContext)(P.ZX),T=L.theme;return"survey-".concat(T)+M}function w(M,L){var T=(L&&L.depends||[]).reduce(function(N,X){return N||!X},!1);return Z(T?void 0:function(N,X){return fetch(N,X).then(function(U){if(!!U.ok)return U.json()})},M,L||{})}function Z(M){for(var L=arguments.length,T=new Array(L>1?L-1:0),N=1;N<L;N++)T[N-1]=arguments[N];var X=useState(0),U=_slicedToArray(X,2),ee=U[0],re=U[1],K=useCallback(function(){re(Math.random())},[]),ne=useState({loading:!1,mutate:K}),ge=_slicedToArray(ne,2),Q=ge[0],ue=ge[1];return useEffect(function(){!M||T[1].manual&&ee===0||M.apply(null,T).then(function(ae){ae.code===200?ue({loading:!1,data:ae.data,mutate:K}):ue({error:ae.message,loading:!1,mutate:K})}).catch(function(ae){ue({error:ae,loading:!1,mutate:K})})},e(ee,T)),Q}function e(){for(var M=arguments.length,L=new Array(M),T=0;T<M;T++)L[T]=arguments[T];for(var N=[],X=0;X<arguments.length;X++){var U=arguments[X];if(U instanceof Array)for(var ee=0;ee<U.length;ee++)N=N.concat(e(U[ee]));else if(typeof URL!="undefined"&&U instanceof URL)N=N.concat(U.toJSON());else if(U instanceof Object)for(var re=Object.keys(U),K=0;K<re.length;K++){var ne=re[K];ne==="depends"?N=N.concat(U[ne]):N=N.concat([ne]).concat(e(U[ne]))}else N=N.concat(U)}return N}var I=a(87998);function A(){return(0,b.useContext)(I.ZX)}function $(){return useSurvey().attachments}function S(){var M=(0,b.useContext)(I.ZX);return M.innerStore}},64147:function(F,D,a){"use strict";a.r(D),a.d(D,{default:function(){return Jn}});var b=a(78210),P=a(87998),j=a(67294),w=a(39017),Z=a(95522),e=a(85893);function I(t){var i=t.schema,v=t.index,u=t.seqNo,r=(0,w.AK)("-body-questionSet"),d=(0,j.useContext)(P.ZX),g=d.questionNumber;return(0,e.jsxs)("div",{className:r,children:[(0,e.jsxs)("div",{className:r+"-title",children:[g?u||"".concat(v+1,"."):"",(0,e.jsx)(b.Z,{html:i.title})]}),t.children,(0,e.jsx)("div",{className:r+"-splitLine"})]})}(0,Z.eC)("QuestionSet",I,"antd");var A=a(9715),$=a(93766),S=a(94657),M=a(45290);function L(t){var i=t.schema,v=t.index,u=t.qsIndex,r=t.required,d=t.error,g=t.replaceTitle,f=t.seqNo,l=(0,j.useContext)(P.ZX),m=l.questionNumber,s=(0,w.AK)("-body-question"),n=(0,j.useState)(),c=(0,S.Z)(n,2),o=c[0],h=c[1];(0,j.useEffect)(function(){if(o){var C,E;(C=document.querySelector("[data-id='".concat(i.id,"']")))===null||C===void 0||C.classList.remove("ant-form-item-has-error"),(E=document.querySelector("[data-id='".concat(i.id,"']")))===null||E===void 0||E.querySelectorAll("[data-id]").forEach(function(G){G.classList.remove("ant-form-item-has-error")})}if(d.length>0){var R,W=d[0].split("^"),O=(0,S.Z)(W,2),B=O[0],k=O[1],H;k?(H=document.querySelector("[data-id='".concat(B,"']")),h(k)):(H=document.querySelector("[data-id='".concat(i.id,"']")),h(B)),(R=H)===null||R===void 0||R.classList.add("ant-form-item-has-error")}else o&&h(void 0)},[d]);var x="";u!==void 0&&(x+=u+1+"-"),v!==void 0&&(x+=v+1+".");var p=function(){return o?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:o})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsx)("div",{className:s,children:(0,e.jsx)($.Z.Item,{label:(0,e.jsxs)("span",{className:s+"-header",children:[m?f||x:"",(0,e.jsx)(M.hl,{html:g||i.title}),p()]}),labelCol:{span:24},wrapperCol:{span:24},required:r,children:t.children})})}(0,Z.eC)("Question",L,"antd");var T=a(84305),N=a(88182),X=a(82925),U=function(){var i=(0,w.AK)(),v=(0,j.useContext)(P.ZX),u=v.schema;return(0,e.jsxs)("div",{className:i+"-header",children:[(0,e.jsx)("div",{className:i+"-header-title",children:(0,e.jsx)(M.hl,{html:u.title})}),(0,e.jsx)("div",{className:i+"-header-description",children:(0,e.jsx)(M.hl,{html:u.description})})]})},ee=function(i){var v=(0,w.AK)();return(0,e.jsx)("div",{className:v+"-body",children:i.children})},re=a(57663),K=a(71577);function ne(){var t,i,v,u=(0,w.AK)("-footer"),r=(0,j.useContext)(P.ZX),d=r.schema,g=r.onSubmit,f=r.onPrev,l=r.pagination,m=r.onNext,s=r.loading,n=l.pageSize>1,c=l.current===1,o=l.current===l.pageSize,h=n?(t=d.children)===null||t===void 0?void 0:t.slice(-1)[0]:void 0;return(0,e.jsxs)("div",{className:u,children:[o&&(0,e.jsx)("div",{className:u+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(M.hl,{html:d==null||(i=d.attribute)===null||i===void 0?void 0:i.suffix})}),(0,e.jsxs)("div",{className:u+"-pagination",children:[n&&!c&&(0,e.jsx)("div",{children:(0,e.jsx)(K.Z,{type:"primary",block:!0,onClick:function(){return f()},children:"\u4E0A\u4E00\u9875"})}),n&&!o&&(0,e.jsx)("div",{children:(0,e.jsx)(K.Z,{type:"primary",block:!0,onClick:function(){return m()},children:"\u4E0B\u4E00\u9875"})}),o&&(0,e.jsx)("div",{children:(0,e.jsx)(K.Z,{type:"primary",block:!0,onClick:g,loading:s,children:(0,e.jsx)(M.hl,{html:((v=d.attribute)===null||v===void 0?void 0:v.submitButton)||"\u63D0\u4EA4"})})}),n&&(0,e.jsxs)("div",{className:u+"-pagination-info",children:["\u7B2C",l.current,"\u9875/\u5171",l.pageSize,"\u9875"]})]})]})}var ge=a(47673),Q=a(4107),ue=a(39002),ae=a(68351),et=a(14965),ye=a(77121),nt=a(77883),Xe=a(85482),Ye=a(29985),Qe=a(46842),Je=a(64302),_e=a(27484),ie=a.n(_e),tt=a(33852);ie().locale("zh-cn");var qe="YYYY-MM-DD",en="YYYY-MM-DD HH:mm:ss",nn="HH:mm:ss";function pe(t,i){if(!!t){if(i==="date")return ie()(t,qe);if(i==="dateTime")return ie()(t,en);if(i==="time")return ie()(t,nn)}}var de=function(i){var v=i.onChange,u=i.type,r=i.value,d=i.suffix,g=i.style,f=g===void 0?{width:"100%"}:g;return u==="number"?(0,e.jsx)(Xe.Z,{onChange:v,value:r,style:f}):u==="date"?(0,e.jsx)(ye.Z,{onChange:function(m,s){console.log(m),v(s)},value:pe(r,u),style:f}):u==="dateTime"?(0,e.jsx)(ye.Z,{showTime:!0,onChange:function(m,s){return v(s)},value:pe(r,u),style:f}):u==="time"?(0,e.jsx)(ae.Z,{value:pe(r,u),onChange:function(m,s){return v(s)},style:f}):u==="mobile"?(0,e.jsx)(Q.Z,{prefix:(0,e.jsx)(Ye.Z,{}),onChange:function(m){return v(m.target.value)},value:r}):u==="idCard"?(0,e.jsx)(Q.Z,{prefix:(0,e.jsx)(Qe.Z,{}),onChange:function(m){return v(m.target.value)},value:r,style:f}):u==="email"?(0,e.jsx)(Q.Z,{prefix:(0,e.jsx)(Je.Z,{}),onChange:function(m){return v(m.target.value)},value:r,style:f}):(0,e.jsx)(Q.Z,{onChange:function(m){return v(m.target.value)},value:r,suffix:d,style:f})},at=a(49111),je=a(19650),tn=a(17672),an=function(i){var v=i.onChange,u=(0,j.useRef)(null),r=(0,j.useRef)(),d=(0,j.useRef)(),g=(0,j.useState)(0),f=(0,S.Z)(g,2),l=f[0],m=f[1];return(0,j.useEffect)(function(){var s=u.current;if(s){var n,c=new tn.Z(u.current,{onBegin:function(){m(1)}});r.current=c;var o=Math.max(window.devicePixelRatio||1,1);s.width=s.offsetWidth*o,s.height=s.offsetHeight*o,(n=s.getContext("2d"))===null||n===void 0||n.scale(o,o)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:d.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:u,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:l!==2?"block":"none"}}),l===2&&(0,e.jsx)("img",{src:d.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(je.Z,{children:[l===1&&(0,e.jsx)(K.Z,{type:"link",onClick:function(){var n;(n=r.current)===null||n===void 0||n.clear(),m(0)},children:"\u6E05\u7A7A"}),(l===0||l===1)&&(0,e.jsx)(K.Z,{type:"primary",disabled:l!==1,ghost:!0,size:"small",onClick:function(){var n;v(r.current.toDataURL()),d.current=(n=r.current)===null||n===void 0?void 0:n.toDataURL(),m(2)},children:"\u5B8C\u6210"}),l===2&&(0,e.jsx)(K.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var n;m(0),(n=r.current)===null||n===void 0||n.clear()},children:"\u91CD\u7B7E"})]})})]})]})},rn=a(80937),ln=a(3024),sn=(0,rn.Pi)(function(){var t=(0,j.useContext)(P.ZX),i=t.progressBar,v=(0,w.AK)(),u=(0,w.Rk)(),r=u.progress;return i?(0,e.jsx)(ln.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:v+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(r*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),rt=a(71194),on=a(50146);function be(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var un=function(i){var v=i.onChange,u=i.value,r=i.mapMove,d=r===void 0?!1:r,g=i.optionId,f=(0,j.useRef)(null),l=(0,j.useRef)(),m=(0,j.useRef)(),s=(0,j.useRef)(),n=(0,j.useState)(function(){if(!!u){var H=u.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(H&&H.length>2)return[parseFloat(H[1]),parseFloat(H[2])]}}),c=(0,S.Z)(n,2),o=c[0],h=c[1],x=(0,j.useState)(function(){return be(u)}),p=(0,S.Z)(x,2),C=p[0],E=p[1],R=(0,j.useState)(!1),W=(0,S.Z)(R,2),O=W[0],B=W[1],k=(0,j.useCallback)(function(H){m.current.getLocation(H,function(G,_){if(G==="complete"&&_.geocodes.length){var q=_.geocodes[0].location;s.current.start(q)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,j.useEffect)(function(){if(!!O){window["localMap".concat(g)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(le){var me=new AMap.Map("map-".concat(g),{zoom:16,center:o,dragEnable:d,zoomEnable:d});if(l.current=me,d){var xe=new le({mode:"dragMarker",map:me});xe.on("success",function(se){E(se.address),h([se.position.lng,se.position.lat])}),o?xe.start(o):xe.start(),me.panBy(0,1),s.current=xe}var _n=new AMap.Geocoder({city:"010"});m.current=_n;var qn=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});qn.getCurrentPosition(function(se,oe){se=="complete"?(me.setCenter(oe.position),E(oe.formattedAddress),h([oe.position.lng,oe.position.lat])):console.error(oe)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var H="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(g,"&plugin=AMap.Geocoder,AMap.Geolocation"),G=document.createElement("script");G.src=H,document.head.appendChild(G);var _="https://webapi.amap.com/ui/1.1/main-async.js",q=document.createElement("script");q.src=_,document.head.appendChild(q)}},[O]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(Q.Z.TextArea,{readOnly:!0,value:be(u),onClick:function(){return B(!0)}}),(0,e.jsxs)(on.Z,{visible:O,onCancel:function(){B(!1)},onOk:function(){o&&v("".concat(C,"[").concat(o[0],", ").concat(o[1],"]")),B(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:d&&(0,e.jsx)(Q.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(G){return k(G)}})}),(0,e.jsx)("div",{ref:f,id:"map-".concat(g),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:C})]})]})},Ee=function(i){var v,u=i.optionId,r=i.questionId,d=i.checked,g=i.checkedCount,f=(0,w.Al)(),l=f.statistics,m=l==null?void 0:l.questionStatistics[r],s=((m==null?void 0:m.optionStatistics.reduce(function(o,h){return o+h.count},0))||0)+g,n=(m==null||(v=m.optionStatistics.find(function(o){return o.optionId===u}))===null||v===void 0?void 0:v.count)||0;n=d?n+1:n;var c="".concat(Math.floor(n/s*1e3)/10,"%");return g===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[(0,e.jsxs)("span",{className:"vote-info-cnt ",children:[n,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:c}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:c}})})]})},dn=a(94184),cn=a.n(dn);ie().locale("zh-cn");function vn(t){var i=t.headerVisible,v=t.footerVisible,u=t.schema,r=(0,w.AK)(),d=(0,w.Al)(),g=function(){var l,m=(l=u.attribute)===null||l===void 0?void 0:l.headerImage;if(m)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(m),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:cn()(r,{preview:d.isPreview}),children:[(0,e.jsx)(sn,{}),(0,e.jsx)("div",{className:r+"-banner",children:g()}),i&&(0,e.jsx)(U,{}),(0,e.jsx)(N.ZP,{locale:X.Z,children:(0,e.jsx)(ee,{children:t.children})}),v&&(0,e.jsx)(ne,{})]})}(0,Z.eC)("Survey",vn,"antd");var it=a(13062),Y=a(71230),lt=a(89032),V=a(15746),y=a(11849),hn=a(76826);function fn(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=(0,w.AK)("-body-question");function f(l,m){r[l]=m,m===""&&delete r[l],v((0,y.Z)({},r))}return(0,e.jsx)("div",{children:d==null?void 0:d.map(function(l){var m=l.id,s=l.attribute,n=l.title,c=(0,hn.Ck)(s==null?void 0:s.autoSize,[2,4]);return(0,e.jsxs)(Y.Z,{style:{marginBottom:10},"data-id":m,children:[n&&(0,e.jsx)(V.Z,{className:g+"-option",span:4,children:l.title&&(0,e.jsx)("span",{className:g+"-option-title",children:l.title})},l.id),(0,e.jsx)(V.Z,{span:12,children:(0,e.jsx)(Q.Z.TextArea,{autoSize:{minRows:c[1],maxRows:c[2]},value:r[m]||"",onChange:function(h){return f(m,h.target.value)}})})]},m)})})}(0,Z.RM)("Textarea",fn,"antd");var st=a(36877),mn=a(13876);function xn(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=d===void 0?[]:d;function f(l){var m={};l.forEach(function(s,n){var c=g[n].id;m[c]=s}),v(m)}return(0,e.jsx)(Y.Z,{children:(0,e.jsx)(V.Z,{span:12,children:(0,e.jsx)(mn.Z,{value:g.map(function(l){return r[l.id]}).filter(function(l){return l}),style:{width:260},options:i.dataSource,onChange:f,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,Z.RM)("Cascader",xn,"antd");function Pe(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=(0,w.AK)("-body-question");function f(l,m){r[l]=m,m===""&&delete r[l],v((0,y.Z)({},r))}return(0,e.jsx)("div",{children:d==null?void 0:d.map(function(l){var m=l.id,s=l.attribute,n=l.title,c=s==null?void 0:s.suffix,o=s==null?void 0:s.dataType;return(0,e.jsxs)(Y.Z,{style:{marginBottom:10},"data-id":m,children:[n&&(0,e.jsx)(V.Z,{className:g+"-option",span:4,children:l.title&&(0,e.jsx)("span",{className:g+"-option-title",children:(0,e.jsx)(M.hl,{html:l.title})})},l.id),(0,e.jsx)(V.Z,{span:12,children:(0,e.jsx)(de,{type:o,value:r[m],onChange:function(x){return f(m,x)},suffix:c&&(0,e.jsx)("span",{className:g+"-option-suffix",children:(0,e.jsx)(M.hl,{html:c})})})})]},m)})})}(0,Z.RM)("FillBlank",Pe,"antd"),(0,Z.RM)("MultipleBlank",Pe,"antd");var ce=a(83279),ot=a(43358),ve=a(97268),te=a(79521),J=a(68489),gn=a(54121),pn=function(i){var v=(0,J.XI)(200),u=(0,S.Z)(v,2),r=u[0],d=u[1],g=(0,J.XI)(200),f=(0,S.Z)(g,2),l=f[0],m=f[1];return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},i.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:r,children:[i.cells.map(function(s){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getCellProps()),{},{className:"td","data-id":"".concat(i.i,"-").concat(s.column.id),children:s.render("Cell")}))}),i.onDelete&&(0,e.jsx)("div",{ref:l,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(gn.Z,{onClick:function(){i.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:d||m?"visible":"hidden"}})})]}))};function Se(t){var i=t.columns,v=t.data,u=t.onAdd,r=t.onDelete,d=j.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),g=(0,te.useTable)({columns:i,data:v,defaultColumn:d},te.useBlockLayout),f=g.getTableProps,l=g.getTableBodyProps,m=g.headerGroups,s=g.rows,n=g.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},f()),{},{className:"table",children:[(0,e.jsx)("div",{children:m.map(function(c){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},c.getHeaderGroupProps()),{},{className:"tr",children:c.headers.map(function(o){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},o.getHeaderProps()),{},{className:"th",children:o.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},l()),{},{children:s.map(function(c,o){return n(c),(0,j.createElement)(pn,(0,y.Z)((0,y.Z)({},c),{},{key:o,i:o,onDelete:r?function(){return r(o)}:void 0}))})})),u&&(0,e.jsx)("div",{className:"footer",onClick:u,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Me(t){var i=t.schema,v=t.onChange,u=t.value||[{}],r=i.children,d=r===void 0?[]:r,g=(0,j.useMemo)(function(){return d.map(function(f){var l;return{Header:(0,e.jsx)(b.Z,{html:f.title}),width:(l=f.attribute)===null||l===void 0?void 0:l.width,accessor:f.id,Cell:function(s){var n,c=s.value,o=s.row,h=s.data;if(((n=f.attribute)===null||n===void 0?void 0:n.dataType)==="select"){var x;return(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",value:c,style:{minWidth:80},onChange:function(C){h[o.index][f.id]=C},options:((x=f.dataSource)===null||x===void 0?void 0:x.map(function(p){return{label:p.label,value:p.value}}))||[]})}else return(0,e.jsx)(Q.Z,{value:c,onChange:function(C){h[o.index][f.id]=C.target.value,v((0,ce.Z)(h))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Se,{columns:g,data:u,onAdd:function(){u.push({}),v((0,ce.Z)(u))},onDelete:function(l){u.splice(l,1),v((0,ce.Z)(u))}})})}var jn=function(i){var v=i.schema,u=i.value||[{},{}],r=v.children,d=r===void 0?[]:r,g=(0,j.useMemo)(function(){return d.map(function(f){var l;return{Header:(0,e.jsx)(b.Z,{html:f.title}),width:(l=f.attribute)===null||l===void 0?void 0:l.width,accessor:f.id,Cell:function(s){var n,c=s.value,o=s.row,h=s.data;if(((n=f.attribute)===null||n===void 0?void 0:n.dataType)==="select"){var x,p,C=((x=f.dataSource)===null||x===void 0||(p=x.find(function(E){return E.value===c}))===null||p===void 0?void 0:p.label)||"";return(0,e.jsx)("span",{children:C})}else return(0,e.jsx)("span",{children:c})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Se,{columns:g,data:u})})};Me.Preview=jn,(0,Z.RM)("MatrixAuto",Me,"antd");var Ce=a(93224);function we(t){var i=t.columns,v=t.data,u=j.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,te.useTable)({columns:i,data:v,defaultColumn:u},te.useBlockLayout),d=r.getTableProps,g=r.getTableBodyProps,f=r.headerGroups,l=r.rows,m=r.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},d()),{},{className:"table",children:[(0,e.jsx)("div",{children:f.map(function(s){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getHeaderGroupProps()),{},{className:"tr",children:s.headers.map(function(n){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},n.getHeaderProps()),{},{className:"th",children:n.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},g()),{},{children:l.map(function(s){return m(s),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getRowProps()),{},{className:"tr",children:s.cells.map(function(n){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},n.getCellProps()),{},{className:"td","data-id":"".concat(s.original.rowId,"-").concat(n.column.id),children:n.render("Cell")}))})}))})}))]}))}function Re(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=d===void 0?[]:d,f=i.row,l=f===void 0?[]:f,m=(0,j.useMemo)(function(){var n,c=g.map(function(o){var h;return{Header:(0,e.jsx)(b.Z,{html:o.title}),width:(h=o.attribute)===null||h===void 0?void 0:h.width,accessor:o.id,Cell:function(p){var C=p.value,E=p.row,R=p.data;return(0,e.jsx)(de,{value:C,onChange:function(O){var B={};R.forEach(function(k,H){var G=k.title,_=k.rowId,q=(0,Ce.Z)(k,["title","rowId"]);E.index===H&&(q[o.id]=O),B[_]=q}),v(B)}})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=i.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),s=l.map(function(n,c){var o=n.id,h=r[o]||{};return(0,y.Z)({title:(0,e.jsx)(b.Z,{html:n.title}),rowId:o},h)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(we,{columns:m,data:s})})}var Cn=function(i){var v=i.schema,u=i.value,r=u===void 0?{}:u,d=v.children,g=d===void 0?[]:d,f=v.row,l=f===void 0?[]:f,m=(0,j.useMemo)(function(){var n,c=g.map(function(o){var h;return{Header:function(){return(0,e.jsx)(b.Z,{html:o.title})},width:(h=o.attribute)===null||h===void 0?void 0:h.width,accessor:o.id,Cell:function(p){var C=p.value;return(0,e.jsx)("span",{children:C})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(n=v.attribute)===null||n===void 0?void 0:n.width,accessor:"title"}),c},[]),s=l.map(function(n,c){var o=n.id,h=r[o]||{};return(0,y.Z)({title:n.title,rowId:o},h)});return console.log(m),(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(we,{columns:m,data:s})})};Re.Preview=Cn,(0,Z.RM)("MatrixFillBlank",Re,"antd");var ut=a(88983),he=a(47933);function Ne(t){var i=t.columns,v=t.data,u=j.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,te.useTable)({columns:i,data:v,defaultColumn:u},te.useBlockLayout),d=r.getTableProps,g=r.getTableBodyProps,f=r.headerGroups,l=r.rows,m=r.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},d()),{},{className:"table",children:[(0,e.jsx)("div",{children:f.map(function(s){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getHeaderGroupProps()),{},{className:"tr",children:s.headers.map(function(n){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},n.getHeaderProps()),{},{className:"th",children:n.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},g()),{},{children:l.map(function(s){return m(s),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getRowProps()),{},{className:"tr",children:s.cells.map(function(n){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},n.getCellProps()),{},{className:"td",children:n.render("Cell")}))})}))})}))]}))}function Ie(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=d===void 0?[]:d,f=i.row,l=f===void 0?[]:f,m=(0,j.useMemo)(function(){var n,c=g.map(function(o){var h;return{Header:(0,e.jsx)(b.Z,{html:o.title}),width:(h=o.attribute)===null||h===void 0?void 0:h.width,accessor:o.id,Cell:function(p){var C=p.value,E=p.row,R=p.data;return(0,e.jsx)("div",{onClick:function(){var O={};R.forEach(function(B,k){var H=B.title,G=B.rowId,_=(0,Ce.Z)(B,["title","rowId"]);E.index===k?(O[G]={},O[G][o.id]=!0):O[G]=_}),v(O)},children:(0,e.jsx)(he.ZP,{checked:!!C})})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=i.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),s=l.map(function(n,c){var o=n.id,h=r[o]||{};return(0,y.Z)({title:(0,e.jsx)(b.Z,{html:n.title}),rowId:o},h)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ne,{columns:m,data:s})})}var Zn=function(i){var v=i.schema,u=i.value,r=u===void 0?{}:u,d=v.children,g=d===void 0?[]:d,f=v.row,l=f===void 0?[]:f,m=(0,j.useMemo)(function(){var n,c=g.map(function(o){var h;return{Header:(0,e.jsx)(b.Z,{html:o.title}),width:(h=o.attribute)===null||h===void 0?void 0:h.width,accessor:o.id,Cell:function(p){var C=p.value,E=p.row,R=p.data;return C?(0,e.jsx)("div",{children:(0,e.jsx)(he.ZP,{checked:!!C,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=v.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),s=l.map(function(n,c){var o=n.id,h=r[o]||{};return(0,y.Z)({title:(0,e.jsx)(b.Z,{html:n.title}),rowId:o},h)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ne,{columns:m,data:s})})};Ie.Preview=Zn,(0,Z.RM)("MatrixRadio",Ie,"antd");var dt=a(63185),fe=a(9676);function Ae(t){var i=t.columns,v=t.data,u=j.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,te.useTable)({columns:i,data:v,defaultColumn:u},te.useBlockLayout),d=r.getTableProps,g=r.getTableBodyProps,f=r.headerGroups,l=r.rows,m=r.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},d()),{},{className:"table",children:[(0,e.jsx)("div",{children:f.map(function(s){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getHeaderGroupProps()),{},{className:"tr",children:s.headers.map(function(n){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},n.getHeaderProps()),{},{className:"th",children:n.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},g()),{},{children:l.map(function(s){return m(s),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getRowProps()),{},{className:"tr",children:s.cells.map(function(n){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},n.getCellProps()),{},{className:"td",children:n.render("Cell")}))})}))})}))]}))}function Oe(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=d===void 0?[]:d,f=i.row,l=f===void 0?[]:f,m=(0,j.useMemo)(function(){var n,c=g.map(function(o){var h;return{Header:(0,e.jsx)(b.Z,{html:o.title}),width:(h=o.attribute)===null||h===void 0?void 0:h.width,accessor:o.id,Cell:function(p){var C=p.value,E=p.row,R=p.data;return(0,e.jsx)("div",{onClick:function(O){var B=!C,k={};R.forEach(function(H,G){var _=H.title,q=H.rowId,le=(0,Ce.Z)(H,["title","rowId"]);E.index===G&&(B?le[o.id]=!0:delete le[o.id]),k[q]=le}),v(k)},children:(0,e.jsx)(fe.Z,{checked:!!C})})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=i.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),s=l.map(function(n,c){var o=n.id,h=r[o]||{};return(0,y.Z)({title:(0,e.jsx)(b.Z,{html:n.title}),rowId:o},h)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ae,{columns:m,data:s})})}var yn=function(i){var v=i.schema,u=i.value,r=u===void 0?{}:u,d=v.children,g=d===void 0?[]:d,f=v.row,l=f===void 0?[]:f,m=(0,j.useMemo)(function(){var n,c=g.map(function(o){var h;return{Header:(0,e.jsx)(b.Z,{html:o.title}),width:(h=o.attribute)===null||h===void 0?void 0:h.width,accessor:o.id,Cell:function(p){var C=p.value,E=p.row,R=p.data;return C?(0,e.jsx)("div",{children:(0,e.jsx)(fe.Z,{checked:!!C,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=v.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),s=l.map(function(n,c){var o=n.id,h=r[o]||{};return(0,y.Z)({title:(0,e.jsx)(b.Z,{html:n.title}),rowId:o},h)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ae,{columns:m,data:s})})};Oe.Preview=yn,(0,Z.RM)("MatrixCheckbox",Oe,"antd");var z=a(32059);function bn(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=i.attribute,f=24/((g==null?void 0:g.columns)||1),l=(0,w.AK)("-body-question"),m=!!(g!=null&&g.statEnabled);function s(n,c,o){var h,x,p=(h=i.children)===null||h===void 0?void 0:h.find(function(E){return E.id===n}),C=p==null||(x=p.attribute)===null||x===void 0?void 0:x.dataType;c?r[n]=C?o:!0:delete r[n],v((0,y.Z)({},r))}return(0,j.useEffect)(function(){d==null||d.forEach(function(n){var c;(c=n.attribute)!==null&&c!==void 0&&c.defaultChecked&&Object.keys(r).length===0&&v((0,z.Z)({},n.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(Y.Z,{children:d==null?void 0:d.map(function(n){var c,o,h=n.title,x=n.id,p=(c=n.attribute)===null||c===void 0?void 0:c.dataType,C=(o=n.attribute)===null||o===void 0?void 0:o.suffix;return(0,e.jsxs)(V.Z,{span:f,className:l+"-option","data-id":x,children:[(0,e.jsx)(fe.Z,{value:x,checked:r.hasOwnProperty(x),onChange:function(R){return s(x,R.target.checked)},children:(0,e.jsx)(M.hl,{html:h})}),m&&(0,e.jsx)(Ee,{checked:!!r[x],optionId:x,questionId:i.id,checkedCount:Object.keys(r).length}),p&&(0,e.jsx)(de,{value:r[x],style:{maxWidth:120},type:p,onChange:function(R){return s(x,!0,R)},suffix:C&&(0,e.jsx)("span",{className:l+"-option-suffix",children:(0,e.jsx)(M.hl,{html:C})})})]},x)})})})}(0,Z.RM)("Checkbox",bn,"antd");function En(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=d===void 0?[]:d;function f(l){var m,s=(m=i.children)===null||m===void 0?void 0:m.find(function(n){return n.id===l});s&&v((0,z.Z)({},l,!0))}return(0,j.useEffect)(function(){var l;(l=i.children)===null||l===void 0||l.forEach(function(m){var s,n=m.id;(s=m.attribute)!==null&&s!==void 0&&s.defaultChecked&&Object.keys(r).length===0&&v((0,z.Z)({},n,!0))})},[]),(0,e.jsx)(Y.Z,{children:(0,e.jsx)(V.Z,{span:12,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){v(void 0)},showSearch:!0,value:Object.keys(r)[0],filterOption:function(m,s){return(s==null?void 0:s.label).toLowerCase().indexOf(m.toLowerCase())!==-1},onChange:f,style:{width:260},options:g.map(function(l){return{label:l.title,value:l.id}})})})})}(0,Z.RM)("Select",En,"antd");var Pn=he.ZP.Group;function Sn(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=i.attribute,f=24/((g==null?void 0:g.columns)||1),l=(0,w.AK)("-body-question"),m=!!(g!=null&&g.statEnabled);function s(c){var o,h=c.target.value,x=(o=i.children)===null||o===void 0?void 0:o.find(function(R){return R.id===h});if(x){var p=x.id,C=x.attribute,E=C==null?void 0:C.dataType;v((0,z.Z)({},c.target.value,E?r[p]:!0))}}function n(c,o){v((0,z.Z)({},c,o))}return(0,j.useEffect)(function(){var c;(c=i.children)===null||c===void 0||c.forEach(function(o){var h,x=o.id,p=o.attribute,C=p==null?void 0:p.dataType;(h=o.attribute)!==null&&h!==void 0&&h.defaultChecked&&Object.keys(r).length===0&&v((0,z.Z)({},x,C?r[x]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(Pn,{onChange:s,value:Object.keys(r)[0],style:{width:"100%"},children:(0,e.jsx)(Y.Z,{children:d==null?void 0:d.map(function(c){var o,h,x=c.title,p=c.id,C=(o=c.attribute)===null||o===void 0?void 0:o.dataType,E=(h=c.attribute)===null||h===void 0?void 0:h.suffix;return(0,e.jsxs)(V.Z,{span:f,className:l+"-option","data-id":p,children:[(0,e.jsx)(he.ZP,{value:p,className:"radio-item",children:(0,e.jsx)(M.hl,{html:x})}),m&&(0,e.jsx)(Ee,{checked:!!r[p],optionId:p,questionId:i.id,checkedCount:Object.keys(r).length}),C&&(0,e.jsx)(de,{value:r[p],type:C,style:{maxWidth:120},onChange:function(W){return n(p,W)},suffix:E&&(0,e.jsx)("span",{className:l+"-option-suffix",children:(0,e.jsx)(M.hl,{html:E})})})]},p)})})})})}(0,Z.RM)("Radio",Sn,"antd");var ct=a(48736),Te=a(27049);function De(t){var i=(0,w.AK)("-body-question");return(0,e.jsx)("div",{className:i,children:(0,e.jsx)(Te.Z,{plain:!0})})}De.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,Z.RM)("SplitLine",De,"antd");function Fe(t){var i=(0,w.AK)("-body-question");return(0,e.jsx)("div",{className:i,children:(0,e.jsx)(M.hl,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}Fe.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,Z.RM)("Remark",Fe,"antd");var vt=a(34792),Mn=a(48086),wn=a(3182),ht=a(43185),$e=a(11324),Rn=a(94043),Be=a.n(Rn),Nn=a(43347),In=$e.Z.Dragger;function He(t){var i=t.schema,v=t.onChange,u=t.value,r=t.readOnly,d=i.children,g=(0,w.Al)(),f=(0,j.useState)(),l=(0,S.Z)(f,2),m=l[0],s=l[1];(0,j.useEffect)(function(){var o=i.children[0].id,h=u&&u[o]||[];m==null&&h.length>0&&J.hi.loadFiles({ids:h}).then(function(x){s(x==null?void 0:x.map(function(p){return{name:p.originalName,uid:p.id,status:"done"}}))})},[u]);var n=function(){var o=(0,wn.Z)(Be().mark(function h(x){var p,C,E,R;return Be().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:p=x.onSuccess,C=x.onError,E=x.file,R=x.onProgress,g.onUpload&&g.onUpload(E,function(B){R&&R({percent:B.loaded/B.total*100})}).then(function(B){if(B.success&&p&&p(B.data),!B.success&&C){var k=new Error("Some error");C({event:k})}});case 2:case"end":return O.stop()}},h)}));return function(x){return o.apply(this,arguments)}}(),c=function(h,x){if(s(h.fileList),(h.file.status==="removed"||h.file.status==="done")&&!h.fileList.find(function(C){return C.status!=="done"})){var p=h.fileList.filter(function(C){return C.status==="done"}).map(function(C){var E;return((E=C.response)===null||E===void 0?void 0:E.id)||C.uid});p.length===0?v(void 0):v((0,z.Z)({},x,p))}};return(0,e.jsx)("div",{children:d==null?void 0:d.map(function(o){var h=o.id,x=o.attribute,p=[];if(x){var C=x.maxFileCount,E=x.maxFileSize,R=x.fileAccept;C&&p.push("\u6700\u591A\u4E0A\u4F20".concat(C,"\u4E2A")),E&&p.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(E,"M\u4EE5\u5185")),R&&p.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(R))}return(0,e.jsxs)(In,{multiple:!0,disabled:r,maxCount:(x==null?void 0:x.maxFileCount)||20,accept:x==null?void 0:x.fileAccept,beforeUpload:function(O){return x!=null&&x.maxFileSize&&O.size>x.maxFileSize*1024*1024?(Mn.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(x.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),$e.Z.LIST_IGNORE):!0},customRequest:n,onChange:function(O){return c(O,h)},fileList:m,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Nn.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:p.join(",")})]},h)})})}var An=function(i){var v=i.value,u=(0,j.useState)(),r=(0,S.Z)(u,2),d=r[0],g=r[1];return(0,j.useEffect)(function(){if(v){var f=Object.values(v).reduce(function(l,m){return l.push.apply(l,(0,ce.Z)(m)),l},[]);J.hi.loadFiles({ids:f}).then(function(l){g(l)})}},[v]),(0,e.jsx)("div",{className:"preview",children:d==null?void 0:d.map(function(f){return(0,e.jsx)("a",{onClick:function(){return J.hi.download("/api/files/".concat(f.id))},children:f.originalName},f.id)})})};He.Preview=An,(0,Z.RM)("Upload",He,"antd");var ft=a(34669),On=a(61873);function Le(t){var i=t.schema,v=t.onChange,u=i.children,r=(0,w.Al)(),d=(0,j.useState)(0),g=(0,S.Z)(d,2),f=g[0],l=g[1];function m(s,n){var c="signature-".concat(n,"-").concat((0,P.kb)(6),".png");if(!r.onUpload){v((0,z.Z)({},n,[c]));return}fetch(s).then(function(o){return o.blob()}).then(function(o){var h=new File([o],c,{type:"image/png"});r.onUpload(h,function(x){l(x.loaded/x.total*100)}).then(function(x){x.success&&x.data.id&&v((0,z.Z)({},n,[x.data.id]))})})}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(s){var n=s.id,c=s.title;return(0,e.jsxs)(Y.Z,{gutter:[10,0],"data-id":n,children:[c&&(0,e.jsx)(V.Z,{span:24},s.id),(0,e.jsxs)(V.Z,{span:24,children:[(0,e.jsx)(an,{onChange:function(h){return m(h,n)}}),f>0&&f!==100&&(0,e.jsx)(On.Z,{percent:f,size:"small",showInfo:!1})]})]},n)})})}Le.Preview=function(t){var i=t.value,v;return i&&(v=Object.values(i)[0][0]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("img",{src:"/api/files/".concat(v)})})},(0,Z.RM)("Signature",Le,"antd");var mt=a(96433),Ze=a(2864),Ue=a(41687),Tn=a(46870),We=a(18613),Dn=a(57206),Fn={1:(0,e.jsx)(Ue.Z,{}),2:(0,e.jsx)(Ue.Z,{}),3:(0,e.jsx)(Tn.Z,{}),4:(0,e.jsx)(We.Z,{}),5:(0,e.jsx)(We.Z,{})};function $n(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=d===void 0?[]:d;function f(m,s){v((0,z.Z)({},m,s))}var l=function(s){var n=s.attribute||{},c=s.id,o=n.scope,h=o===void 0?"[0,5]":o,x=n.scoreStyle,p=h.replace("[","").replace("]","").split(","),C=(0,S.Z)(p,2),E=C[0],R=C[1];return x==="heart"?(0,e.jsx)(Ze.Z,{defaultValue:parseInt(E),character:(0,e.jsx)(Dn.Z,{}),style:{color:"#ea7463"},count:parseInt(R),onChange:function(O){return f(c,O)}},c):x==="smile"?(0,e.jsx)(Ze.Z,{defaultValue:parseInt(E),character:function(O){var B=O.index;return Fn[B+1]},count:parseInt(R),onChange:function(O){return f(c,O)}},c):(0,e.jsx)(Ze.Z,{defaultValue:parseInt(E),count:parseInt(R),onChange:function(O){return f(c,O)}},c)};return(0,e.jsx)(Y.Z,{children:g.map(function(m){return l(m)})})}(0,Z.RM)("Score",$n,"antd");var xt=a(22385),Bn=a(31097),Ke=a(55686),Hn=ve.Z.Option;function ze(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=d===void 0?[]:d,f=g[0].id,l=(0,j.useState)([]),m=(0,S.Z)(l,2),s=m[0],n=m[1];function c(x){f&&v((0,z.Z)({},f,x))}var o=(0,J.zE)(function(x){J.hi.userSelect({name:x,selected:r[f]||[]}).then(function(p){p.success&&n(p.data)})},5),h=function(p){c(p?s.map(function(C){return C.userId}):void 0)};return(0,j.useEffect)(function(){var x;o(""),(x=i.children)===null||x===void 0||x.forEach(function(p){var C,E=p.id;(C=p.attribute)!==null&&C!==void 0&&C.defaultChecked&&Object.keys(r).length===0&&v((0,z.Z)({},E,!0))})},[]),(0,e.jsx)(Y.Z,{children:(0,e.jsx)(V.Z,{span:12,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,mode:"multiple",onClear:function(){v(void 0)},value:r[f]||[],onSearch:o,showSearch:!0,onChange:c,filterOption:!1,dropdownRender:function(p){return(0,e.jsxs)("div",{children:[p,(0,e.jsx)(Te.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(fe.Z,{onChange:function(E){h(E.target.checked)},children:"\u5168\u9009"})})]})},children:s.map(function(x){return(0,e.jsx)(Hn,{value:x.userId,label:x.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Ke.Z,{user:x,size:20})}),x.name," ",x.deptName&&"(".concat(x.deptName,")")]})},x.userId)})})})})}var Ln=function(i){var v=i.schema,u=i.value,r=u===void 0?{}:u,d=v.children,g=d===void 0?[]:d,f=g[0].id,l=(0,j.useState)([]),m=(0,S.Z)(l,2),s=m[0],n=m[1];return(0,j.useEffect)(function(){J.hi.userSelect({selected:r[f]||[],name:"^_^"}).then(function(c){c.success&&n(c.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(je.Z,{children:s.map(function(c){return(0,e.jsx)(Bn.Z,{title:c.name,children:(0,e.jsx)(Ke.Z,{user:c,size:24})},c.userId)})})})};ze.Preview=Ln,(0,Z.RM)("User",ze,"antd");var gt=a(71153),Un=a(60331),pt=a(62999),Wn=a(51753),Kn=a(60780),zn=a.n(Kn);function ke(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=d===void 0?[]:d,f=g[0].id,l=(0,j.useState)([]),m=(0,S.Z)(l,2),s=m[0],n=m[1];function c(h){f&&((h==null?void 0:h.length)===0?v(void 0):v((0,z.Z)({},f,h==null?void 0:h.map(function(x){return x.value}))))}var o=(0,j.useMemo)(function(){return zn()(s.map(function(h){return{title:h.name,key:h.id,value:h.id,parentId:h.parentId}}),{parentProperty:"parentId",customID:"key"})},[s]);return(0,j.useEffect)(function(){J.hi.deptSelect({}).then(function(h){h.success&&n(h.data)})},[]),(0,e.jsx)(Y.Z,{children:(0,e.jsx)(V.Z,{span:12,children:(0,e.jsx)(Wn.Z,{style:{width:"100%"},treeCheckable:!0,value:(r[f]||[]).map(function(h){return{value:h}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:o,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:c,showSearch:!1})})})}var kn=function(i){var v=i.schema,u=i.value,r=u===void 0?{}:u,d=v.children,g=d===void 0?[]:d,f=g[0].id,l=(0,j.useState)([]),m=(0,S.Z)(l,2),s=m[0],n=m[1];return(0,j.useEffect)(function(){J.hi.deptSelect({selected:r[f]||[],name:"^_^"}).then(function(c){c.success&&n(c.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(je.Z,{children:s.map(function(c){return(0,e.jsx)(Un.Z,{color:"blue",children:c.name},c.id)})})})};ke.Preview=kn,(0,Z.RM)("Dept",ke,"antd");function Gn(t){for(var i=[],v=2;v<t+2;v++)i.push(v/(t+2));return i}function Vn(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=d===void 0?[]:d,f=g[0].id,l=(0,j.useState)(function(){return r[f]||-1}),m=(0,S.Z)(l,2),s=m[0],n=m[1];function c(h){v((0,z.Z)({},f,h))}(0,j.useEffect)(function(){Object.keys(r).length>0&&n(r[f])},[r,f]);var o=function(x){var p=r[f],C=Gn(s||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){n(p)},children:[(0,e.jsx)("div",{className:"nps-container",children:[0,1,2,3,4,5,6,7,8,9,10].map(function(E){var R={background:"#2672ff",opacity:C[E]};return(0,e.jsx)("div",{className:"nps-item",style:s>=E?R:void 0,onMouseOver:function(){n(E)},onClick:function(){return c(E)},children:E},E)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,e.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]},x.id)};return(0,e.jsx)(Y.Z,{children:g.map(function(h){return o(h)})})}(0,Z.RM)("Nps",Vn,"antd");var Xn=a(91220);function Ge(t,i,v){if(!t)return"";var u=RegExp("_{3,}","g"),r=t.matchAll(u),d=[],g=(0,Xn.Z)(r),f;try{for(g.s();!(f=g.n()).done;){var l=f.value,m=l.index,s=l.index+l[0].length;d.push([m,s])}}catch(E){g.e(E)}finally{g.f()}if(d.length===0)return t;for(var n=d[0][0]===0?"":t.substring(0,d[0][0]),c=0;c<d.length;c++){var o=d[c],h=d[c+1],x=t.substring(o[0],o[1]),p=t.substring(o[1],h?h[0]:t.length),C=v?v[i[c].id]:"";n+='<input data-id="'.concat(i[c].id,`" value='`).concat(C,`' class="mod_fillblank" style="width: `).concat(12*x.length,'px;">'),n+=p}return n}function Ve(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children,g=i.attribute,f=g===void 0?{}:g,l=f.content;function m(s,n){r[s]=n,n===""&&delete r[s],v((0,y.Z)({},r))}return(0,j.useEffect)(function(){d==null||d.forEach(function(s){var n=document.querySelector("[data-id='".concat(s.id,"']"));if(n){var c=r[s.id];c&&(n.value=c),n.onchange=function(o){var h;m(s.id,(h=o.target)===null||h===void 0?void 0:h.value)}}})},[]),(0,j.useEffect)(function(){Object.keys(r).forEach(function(s){var n=r[s],c=document.querySelector("[data-id='".concat(s,"']"));n!==c.value&&(c.value=n===void 0?"":n)})},[r]),(0,e.jsx)("div",{children:(0,e.jsx)(b.Z,{html:Ge(l,d),replaceP:!1})})}Ve.Preview=function(t){var i=t.schema,v=t.value,u=i.children,r=i.attribute,d=r===void 0?{}:r,g=d.content;return(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("div",{children:(0,e.jsx)(b.Z,{html:Ge(g,u,v),replaceP:!1})})})},(0,Z.RM)("HorzBlank",Ve,"antd");function Yn(t){var i=t.schema,v=t.onChange,u=t.value,r=u===void 0?{}:u,d=i.children;function g(f,l){v((0,z.Z)({},l,f))}return(0,e.jsx)("div",{children:d==null?void 0:d.map(function(f){var l=f.id,m=f.title,s=f.attribute,n=s===void 0?{}:s,c=n.mapMove;return(0,e.jsxs)(Y.Z,{gutter:[10,0],"data-id":l,children:[m&&(0,e.jsx)(V.Z,{span:24},f.id),(0,e.jsx)(V.Z,{span:24,children:(0,e.jsx)(un,{optionId:l,onChange:function(h){return g(h,l)},value:r[l],mapMove:c})})]},l)})})}(0,Z.RM)("Address",Yn,"antd");var Qn=function(i){return(0,e.jsx)(e.Fragment,{children:i.children})},Jn=Qn},57838:function(F,D,a){"use strict";a.d(D,{Z:function(){return j}});var b=a(28481),P=a(67294);function j(){var w=P.useReducer(function(I){return I+1},0),Z=(0,b.Z)(w,2),e=Z[1];return e}},71230:function(F,D,a){"use strict";var b=a(92820);D.Z=b.Z},13062:function(F,D,a){"use strict";var b=a(38842),P=a.n(b),j=a(6999)},68351:function(F,D,a){"use strict";var b=a(22122),P=a(67294),j=a(77121),w=a(21687),Z=function(S,M){var L={};for(var T in S)Object.prototype.hasOwnProperty.call(S,T)&&M.indexOf(T)<0&&(L[T]=S[T]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var N=0,T=Object.getOwnPropertySymbols(S);N<T.length;N++)M.indexOf(T[N])<0&&Object.prototype.propertyIsEnumerable.call(S,T[N])&&(L[T[N]]=S[T[N]]);return L},e=j.Z.TimePicker,I=j.Z.RangePicker,A=P.forwardRef(function(S,M){return P.createElement(I,(0,b.Z)({},S,{dropdownClassName:S.popupClassName,picker:"time",mode:void 0,ref:M}))}),$=P.forwardRef(function(S,M){var L=S.addon,T=S.renderExtraFooter,N=S.popupClassName,X=Z(S,["addon","renderExtraFooter","popupClassName"]),U=P.useMemo(function(){if(T)return T;if(L)return(0,w.Z)(!1,"TimePicker","`addon` is deprecated. Please use `renderExtraFooter` instead."),L},[L,T]);return P.createElement(e,(0,b.Z)({},X,{dropdownClassName:N,mode:void 0,ref:M,renderExtraFooter:U}))});$.displayName="TimePicker",$.RangePicker=A,D.Z=$},39002:function(F,D,a){"use strict";var b=a(38842),P=a.n(b),j=a(75329),w=a.n(j),Z=a(14965)},96874:function(F){function D(a,b,P){switch(P.length){case 0:return a.call(b);case 1:return a.call(b,P[0]);case 2:return a.call(b,P[0],P[1]);case 3:return a.call(b,P[0],P[1],P[2])}return a.apply(b,P)}F.exports=D},5976:function(F,D,a){var b=a(6557),P=a(45357),j=a(30061);function w(Z,e){return j(P(Z,e,b),Z+"")}F.exports=w},56560:function(F,D,a){var b=a(75703),P=a(38777),j=a(6557),w=P?function(Z,e){return P(Z,"toString",{configurable:!0,enumerable:!1,value:b(e),writable:!0})}:j;F.exports=w},21463:function(F,D,a){var b=a(5976),P=a(16612);function j(w){return b(function(Z,e){var I=-1,A=e.length,$=A>1?e[A-1]:void 0,S=A>2?e[2]:void 0;for($=w.length>3&&typeof $=="function"?(A--,$):void 0,S&&P(e[0],e[1],S)&&($=A<3?void 0:$,A=1),Z=Object(Z);++I<A;){var M=e[I];M&&w(Z,M,I,$)}return Z})}F.exports=j},16612:function(F,D,a){var b=a(77813),P=a(98612),j=a(65776),w=a(13218);function Z(e,I,A){if(!w(A))return!1;var $=typeof I;return($=="number"?P(A)&&j(I,A.length):$=="string"&&I in A)?b(A[I],e):!1}F.exports=Z},45357:function(F,D,a){var b=a(96874),P=Math.max;function j(w,Z,e){return Z=P(Z===void 0?w.length-1:Z,0),function(){for(var I=arguments,A=-1,$=P(I.length-Z,0),S=Array($);++A<$;)S[A]=I[Z+A];A=-1;for(var M=Array(Z+1);++A<Z;)M[A]=I[A];return M[Z]=e(S),b(w,this,M)}}F.exports=j},30061:function(F,D,a){var b=a(56560),P=a(21275),j=P(b);F.exports=j},21275:function(F){var D=800,a=16,b=Date.now;function P(j){var w=0,Z=0;return function(){var e=b(),I=a-(e-Z);if(Z=e,I>0){if(++w>=D)return arguments[0]}else w=0;return j.apply(void 0,arguments)}}F.exports=P},75703:function(F){function D(a){return function(){return a}}F.exports=D},75329:function(){}}]);
