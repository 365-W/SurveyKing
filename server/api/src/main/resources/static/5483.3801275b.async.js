(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5483],{58136:function(){},68179:function(){},5483:function(oe,G,g){"use strict";g.r(G),g.d(G,{default:function(){return At}});var E=g(94657),R=g(40807),N=g(80937),p=g(67294),U=g(67635),w=g(54707),B=g(48187),e=g(85893),W=function(){var t=(0,w.AK)(),r=(0,p.useContext)(R.ZX),u=r.schema;return(0,e.jsxs)("div",{className:t+"-header",children:[(0,e.jsx)("div",{className:t+"-header-title",children:(0,e.jsx)(U.hl,{html:u.title})}),(0,e.jsx)("div",{className:t+"-header-description",children:(0,e.jsx)(U.hl,{html:u.description})})]})},O=function(t){var r=(0,w.AK)();return(0,e.jsx)("div",{className:r+"-body",children:t.children})},I=g(57663),A=g(71577),T=(0,N.Pi)(function(){var n,t,r=(0,w.AK)("-footer"),u=(0,p.useContext)(R.ZX),i=u.schema,f=u.loading,m=(0,w.Rk)(),o=m.pagination,l=o.current,x=m.notNoneInQuestionGroup,s=x.filter(function(v){return v.length>0}).length,a=x.slice(0,l).filter(function(v){return v.length>0}).length,c=s>1,h=a===1,d=s===a;return(0,e.jsxs)("div",{className:r,children:[d&&(0,e.jsx)("div",{className:r+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(U.hl,{html:i==null||(n=i.attribute)===null||n===void 0?void 0:n.suffix})}),(0,e.jsxs)("div",{className:r+"-pagination",children:[c&&!h&&(0,e.jsx)("div",{children:(0,e.jsx)(A.Z,{type:"primary",block:!0,onClick:function(){return m.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),c&&!d&&(0,e.jsx)("div",{children:(0,e.jsx)(A.Z,{type:"primary",block:!0,onClick:function(){return m.handleNext()},children:"\u4E0B\u4E00\u9875"})}),d&&(0,e.jsx)("div",{children:(0,e.jsx)(A.Z,{type:"primary",block:!0,onClick:function(){return m.submit()},loading:f,children:(0,e.jsx)(U.hl,{html:((t=i.attribute)===null||t===void 0?void 0:t.submitButton)||"\u63D0\u4EA4"})})}),c&&(0,e.jsxs)("div",{className:r+"-pagination-info",children:["\u7B2C",a,"\u9875/\u5171",s,"\u9875"]})]})]})}),D=g(47673),H=g(4107),y=g(11849),ie=g(77883),le=g(85482),V=g(14965),J=g(68318),xe=g(39002),de=g(68351),ve=g(43358),Q=g(34041),Ne=g(29985),ee=g(46842),Ee=g(64302),je=g(27484),he=g.n(je),Pe=g(33852);he().locale("zh-cn");function Ce(n,t){if(!!n)return he()(n,t)}var Me=function(t){var r=t.dictCode,u=t.value,i=t.onChange,f=t.style,m=t.bordered,o=t.className,l=t.parentValue,x=t.cascaderLevel,s=x===void 0?1:x,a=(0,w.Al)(),c=(0,p.useState)([]),h=(0,E.Z)(c,2),d=h[0],v=h[1],C=(0,w.zE)(function(j){s&&s>1&&!l||a.onDictSearch&&a.onDictSearch({dictCode:r,searchValue:j,parentValue:l,cascaderLevel:s}).then(function(Z){v(Z||[])})},2);return(0,p.useEffect)(function(){s&&s>1&&(l?C(void 0):v([]))},[l,s]),(0,p.useEffect)(function(){!u&&s<=1&&r&&C(void 0),u&&d.length===0&&C(u)},[u]),(0,e.jsx)(Q.Z,{options:d,showSearch:!0,onSearch:C,value:u,onChange:i,style:f,bordered:m,dropdownClassName:o,allowClear:!0})};function dn(n,t){return t||(n==="date"?"YYYY-MM-DD":n==="dateTime"?"YYYY-MM-DD HH:mm:ss":n==="time"?"HH:mm:ss":"YYYY-MM-DD")}function cn(n){return n?n==="YYYY"?"year":n==="YYYY-MM"?"month":"date":"date"}var vn=function(t){var r=t.onChange,u=t.type,i=t.value,f=t.style,m=f===void 0?{width:"100%"}:f,o=t.className,l=dn(u,t.dateTimeFormat);return l.startsWith("HH")?(0,e.jsx)(de.Z,{value:Ce(i,l),format:l,onChange:function(s,a){return r(a)},style:m,className:o}):(0,e.jsx)(J.Z,{onChange:function(s,a){r(a)},format:l,picker:cn(l),showTime:l.includes("HH")||l.includes("mm")||l.includes("ss"),showSecond:l.includes("ss"),showMinute:l.includes("mm"),showHour:l.includes("HH"),value:Ce(i,l),style:m,className:o})},ce=function(t){var r=t.onChange,u=t.type,i=t.value,f=t.suffix,m=t.style,o=m===void 0?{width:"100%"}:m,l=t.className,x=t.dictCode,s=t.onBlur,a=t.bordered,c=t.parentValue,h=t.cascaderLevel,d=t.icon,v=d===void 0?!0:d;return u==="horzBlank"?(0,e.jsx)(e.Fragment,{}):u==="select"&&x?(0,e.jsx)(Me,{value:i,onChange:r,dictCode:x,style:o,bordered:a,className:l,parentValue:c,cascaderLevel:h}):u==="number"?(0,e.jsx)(le.Z,{className:l,onChange:r,onBlur:function(j){return s(j.target.value)},value:i,style:o,addonAfter:f,bordered:a}):u==="date"||u==="dateTime"||u==="time"?(0,e.jsx)(vn,(0,y.Z)({},t)):u==="mobile"?(0,e.jsx)(H.Z,{prefix:v?(0,e.jsx)(Ne.Z,{}):void 0,onChange:function(j){return r(j.target.value)},value:i,className:l,onBlur:function(j){return s(j.target.value)},bordered:a}):u==="idCard"?(0,e.jsx)(H.Z,{prefix:v?(0,e.jsx)(ee.Z,{}):void 0,onChange:function(j){return r(j.target.value)},value:i,style:o,className:l,onBlur:function(j){return s(j.target.value)},bordered:a}):u==="email"?(0,e.jsx)(H.Z,{prefix:v?(0,e.jsx)(Ee.Z,{}):void 0,onChange:function(j){return r(j.target.value)},onBlur:function(j){return s(j.target.value)},value:i,style:o,className:l,bordered:a}):(0,e.jsx)(H.Z,{onChange:function(j){return r(j.target.value)},onBlur:function(j){return s(j.target.value)},value:i,suffix:f,style:o,className:l,bordered:a})},It=g(49111),Fe=g(19650),hn=g(17672),fn=function(t){var r=t.onChange,u=(0,p.useRef)(null),i=(0,p.useRef)(),f=(0,p.useRef)(),m=(0,p.useState)(0),o=(0,E.Z)(m,2),l=o[0],x=o[1];return(0,p.useEffect)(function(){var s=u.current;if(s){var a,c=new hn.Z(u.current);c.addEventListener("beginStroke",function(){x(1)}),i.current=c;var h=Math.max(window.devicePixelRatio||1,1);s.width=s.offsetWidth*h,s.height=s.offsetHeight*h,(a=s.getContext("2d"))===null||a===void 0||a.scale(h,h)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:f.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:u,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:l!==2?"block":"none"}}),l===2&&(0,e.jsx)("img",{src:f.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(Fe.Z,{children:[l===1&&(0,e.jsx)(A.Z,{type:"link",onClick:function(){var a;(a=i.current)===null||a===void 0||a.clear(),x(0)},children:"\u6E05\u7A7A"}),(l===0||l===1)&&(0,e.jsx)(A.Z,{type:"primary",disabled:l!==1,ghost:!0,size:"small",onClick:function(){var a;r(i.current.toDataURL()),f.current=(a=i.current)===null||a===void 0?void 0:a.toDataURL(),x(2)},children:"\u5B8C\u6210"}),l===2&&(0,e.jsx)(A.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var a;x(0),(a=i.current)===null||a===void 0||a.clear()},children:"\u91CD\u7B7E"})]})})]})]})},mn=g(3024),xn=(0,N.Pi)(function(){var n=(0,p.useContext)(R.ZX),t=n.progressBar,r=(0,w.AK)(),u=(0,w.Rk)(),i=u.progress;return t?(0,e.jsx)(mn.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:r+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(i*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),Re=function(t){var r,u=t.optionId,i=t.questionId,f=t.checked,m=t.checkedCount,o=(0,w.Al)(),l=o.statistics,x=l==null?void 0:l.questionStatistics[i],s=((x==null?void 0:x.optionStatistics.reduce(function(h,d){return h+d.count},0))||0)+m,a=(x==null||(r=x.optionStatistics.find(function(h){return h.optionId===u}))===null||r===void 0?void 0:r.count)||0;a=f?a+1:a;var c="".concat(Math.floor(a/s*1e3)/10,"%");return m===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[(0,e.jsxs)("span",{className:"vote-info-cnt ",children:[a,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:c}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:c}})})]})},Ae=function(t){var r=t.schema,u=t.type,i=r.attribute,f=i===void 0?{}:i,m=f.examCorrectAnswer,o=(0,w.Al)(),l=o.correctAnswerVisible,x=o.mode;return m&&l&&x==="exam"?u==="FillBlank"||u==="HorzBlank"||u==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:m}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},Ft=function(t){var r=t.schema,u=r.attribute,i=u===void 0?{}:u,f=i.examScore,m=useSurvey(),o=m.mode,l=m.examScoreVisible;return f&&o==="exam"&&l?_jsxs("span",{className:"question-score",children:["\uFF08",f,"\u5206\uFF09"]}):_jsx(_Fragment,{})},gn=(0,N.Pi)(function(n){var t=(0,w.Rk)(),r=t.reviewAnswer[n.qId];return r&&!r.visible?(0,e.jsx)("span",{className:"review-answer-btn",onClick:function(){r.visible=!0},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)(e.Fragment,{})}),Rt=g(63185),ye=g(9676),F=g(78210),jn=g(36862),Cn=g(46533),yn=g(94184),fe=g.n(yn),Zn=g(91220),Te=g(15020);function De(n,t,r){if(!n)return"";var u=RegExp("_{3,}","g"),i=n.matchAll(u),f=[],m=(0,Zn.Z)(i),o;try{for(m.s();!(o=m.n()).done;){var l=o.value,x=l.index,s=l.index+l[0].length;f.push([x,s])}}catch(Z){m.e(Z)}finally{m.f()}if(f.length===0)return n;for(var a=f[0][0]===0?"":n.substring(0,f[0][0]),c=0;c<f.length;c++){var h=f[c],d=f[c+1],v=n.substring(h[0],h[1]),C=n.substring(h[1],d?d[0]:n.length),j=r?r[t[c].id]:"";a+='<input data-id="'.concat(t[c].id,`" value='`).concat(j,`' class="mod_fillblank" style="width:`).concat(12*v.length,'px">'),a+=C}return a}var Ze=(0,N.Pi)(function(n){var t=n.content,r=n.children,u=n.value,i=u===void 0?{}:u,f=n.onChange,m=n.onBlur,o=n.schema,l=(0,w.Rk)(),x=l.reviewAnswer[o.id];function s(a,c){var h,d;if(i[a]!==c){i[a]=c;var v=r.find(function(b){return b.id===a}),C=v==null||(h=v.attribute)===null||h===void 0?void 0:h.cascaderLevel,j=v==null||(d=v.attribute)===null||d===void 0?void 0:d.dictCode;j&&C&&r.filter(function(b){var P;return((P=b.attribute)===null||P===void 0?void 0:P.dictCode)===j&&b.attribute.cascaderLevel&&b.attribute.cascaderLevel>C}).forEach(function(b){delete i[b.id]}),(c===""||c===void 0)&&delete i[a];var Z=(0,y.Z)({},i);if(Object.keys(Z).length!==0)return Z}}return(0,e.jsx)("div",{children:(0,Te.ZP)(De(t,r),{replace:function(c){var h=c.attribs;if(!!h){var d=h["data-id"];if(d){var v,C,j,Z,b,P=(0,Te.e_)(h),S=r.findIndex(function(re){return re.id===d}),M=r[S],L=(v=r[S-1])===null||v===void 0?void 0:v.id,K=i[L],ne=(M==null||(C=M.attribute)===null||C===void 0?void 0:C.dataType)||"text",q=M==null||(j=M.attribute)===null||j===void 0?void 0:j.dictCode,k=M==null||(Z=M.attribute)===null||Z===void 0?void 0:Z.dateTimeFormat,$=(b=M.attribute)===null||b===void 0?void 0:b.cascaderLevel,ae=x==null?void 0:x[d].isCorrect,te=fe()(P.className,{selected:x&&x.visible,"is-correct":x&&x.visible&&ae});return(0,e.jsx)(ce,(0,y.Z)((0,y.Z)({type:ne,value:i[d],parentValue:K,cascaderLevel:$,onChange:function(X){return f(s(d,X))},onBlur:function(X){return m(s(d,X))},dictCode:q,dateTimeFormat:k,bordered:!1,icon:!1},P),{},{className:te}))}}}})})}),bn=(0,N.Pi)(function(n){var t=n.qId,r=n.schema,u=n.checked,i=n.onChange,f=n.value,m=n.onBlur,o=r.id,l=r.title,x=r.attribute,s=x===void 0?{}:x,a=(0,w.Rk)(),c=a.reviewAnswer[t],h=c==null?void 0:c[o].selected,d=c==null?void 0:c[o].isCorrect,v=s.dataType;return c&&c.visible&&(h||d)?(0,e.jsxs)("label",{className:fe()("ant-checkbox-wrapper ant-checkbox-wrapper-in-form-item",{selected:h,"is-correct":d}),onClick:function(){return i(!u)},children:[(0,e.jsxs)("span",{children:[!d&&(0,e.jsx)(jn.Z,{size:17,style:{color:"#ff6d56",marginRight:10,fontSize:17}}),d&&(0,e.jsx)(Cn.Z,{size:17,style:{color:"#00bf6f",marginRight:10,fontSize:17}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(F.Z,{html:l})})]}):(0,e.jsxs)(ye.Z,{value:o,checked:u,onChange:function(j){return i(j.target.checked)},children:[v==="horzBlank"&&r.children?(0,e.jsx)(Ze,{content:l,children:r.children,value:f,schema:r,onBlur:m,onChange:function(j){return i(!0,j)}}):(0,e.jsx)(F.Z,{html:l}),(0,e.jsx)(Ae,{schema:n.schema})]})}),Tt=g(88983),be=g(66253),$e=g(43061),Oe=g(38819),pn=g(91508),wn=(0,N.Pi)(function(n){var t=n.qId,r=n.schema,u=n.onBlur,i=n.onChange,f=n.value,m=r.id,o=r.title,l=r.attribute,x=l===void 0?{}:l,s=(0,w.Rk)(),a=s.reviewAnswer[t],c=a==null?void 0:a[m].selected,h=a==null?void 0:a[m].isCorrect,d=p.useContext(pn.ZP),v=x.dataType;return a&&a.visible&&(c||h)?(0,e.jsxs)("label",{className:fe()("ant-radio-wrapper ant-radio-wrapper-in-form-item radio-item",{selected:c,"is-correct":h}),onClick:function(){var j;return d==null||(j=d.onChange)===null||j===void 0?void 0:j.call(d,{target:{value:m}})},children:[(0,e.jsxs)("span",{children:[!h&&(0,e.jsx)($e.Z,{style:{color:"#ff6d56",marginRight:10}}),h&&(0,e.jsx)(Oe.Z,{style:{color:"#00bf6f",marginRight:10}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(F.Z,{html:o})})]}):(0,e.jsxs)(be.ZP,{value:m,className:"radio-item",children:[v==="horzBlank"&&r.children?(0,e.jsx)(Ze,{schema:r,content:o,children:r.children,value:typeof f=="boolean"?{}:f,onBlur:u,onChange:i}):(0,e.jsx)(F.Z,{html:o}),(0,e.jsx)(Ae,{schema:n.schema})]})}),Sn=(0,N.Pi)(function(n){var t=n.schema,r=n.value,u=n.onChange,i=n.qId,f=n.onBlur,m=(0,w.AK)("-body-question"),o=t.id,l=t.attribute,x=l==null?void 0:l.suffix,s=l==null?void 0:l.dataType,a=l==null?void 0:l.dictCode,c=l==null?void 0:l.dateTimeFormat,h=(0,w.Rk)(),d=h.reviewAnswer[i],v=d==null?void 0:d[o].isCorrect;return d&&d.visible?(0,e.jsxs)("span",{style:{position:"relative"},children:[!v&&(0,e.jsx)($e.Z,{style:{color:"#ff6d56",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),v&&(0,e.jsx)(Oe.Z,{style:{color:"#00bf6f",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),(0,e.jsx)(ce,{type:s,value:r[o],className:fe()("selected",{"is-correct":v}),onChange:function(j){return u(j)},onBlur:f,style:{paddingLeft:20},suffix:x&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(F.Z,{html:x})})})]}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ce,{type:s,value:r[o],onChange:function(j){return u(j)},onBlur:f,dictCode:a,dateTimeFormat:c,suffix:x&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(F.Z,{html:x})})})})}),Dt=g(65011),$t=g(48736),Ot=g(402),Bn=g(97272),Nn=Q.Z.Option,pe=Bn.Z.Text,Lt=function(t){var r=t.onChange,u=t.form,i=t.record,f=useState(t.value),m=_slicedToArray(f,2),o=m[0],l=m[1],x=useState(t.value),s=_slicedToArray(x,2),a=s[0],c=s[1];useEffect(function(){c(t.value)},[t.value]);var h=useState([{id:"1",drugName:"\u6D4B\u8BD5\u7528\u836F",chemicalName:"hahah11",stCompName:"\u4E0A\u6D77\u5236\u836F\u5382"},{id:"2",drugName:"\u6D4B\u8BD5\u7528\u836F1",chemicalName:"hahah11",stCompName:"\u5E7F\u4E1C\u5236\u836F\u5382"}]),d=_slicedToArray(h,2),v=d[0],C=d[1],j=useThrottleCallback(function(Z){},4);return _jsx(_AutoComplete,{showSearch:!0,placeholder:"\u70B9\u51FB\u641C\u7D22",value:a,dropdownMatchSelectWidth:!1,onBlur:function(){c(o),o?r==null||r(o):r==null||r(void 0)},onSelect:function(b){l(b),c(b)},allowClear:!0,onClear:function(){l(void 0),c(void 0),r==null||r(void 0)},onSearch:function(b){c(b),j(b)},dropdownRender:function(b){return _jsxs(_Fragment,{children:[b,_jsx(_Divider,{style:{margin:"8px 0"}}),_jsxs(_Space,{align:"center",style:{padding:"0 8px 4px"},children:[_jsx(pe,{children:"\u836F\u7269\u540D\u79F0"}),_jsx(pe,{type:"secondary",style:{fontSize:12},children:"(\u5546\u54C1\u540D-\u5382\u5BB6)"})]})]})},children:v.map(function(Z){return _jsxs(Nn,{value:Z.drugName,children:[_jsxs(pe,{children:[" ",Z.drugName]}),_jsxs(pe,{type:"secondary",style:{fontSize:12,marginLeft:5},children:["(",Z.chemicalName,"-",Z.stCompName,")"]})]},Z.id)})})},En=(0,N.Pi)(function(n){var t,r=n.schema,u=n.title,i=n.onBlur,f=n.onChange,m=r.type,o=((t=r.children)===null||t===void 0?void 0:t.filter(function(s){var a;return(a=s.attribute)===null||a===void 0?void 0:a.fieldInTitle}))||[],l=(0,N.U$)(),x=l.value;return m!=="HorzBlank"||o.length===0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(F.Z,{html:u})}):(0,e.jsx)(Ze,{schema:r,children:o,content:u,onChange:f,onBlur:i,value:x})}),Pn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M839 73.9c-1.2-2.4-3.7-9.8-7.4-9.8s-11.1 8.6-13.5 12.3l-13.5 12.3c-7.4-6.1-35.6-23.4-43-23.4-11.1 0-104.6 113.2-118.1 129.1l-60.2 68.8-30.7 38.1-43.1-83.6-50.4-100.8c-4.9-9.8-8.6-22.1-22.1-22.1-7.3 0-9.8 3.6-13.5 9.8-3.7 4.9-3.7 4.9-11.1 8.6-8.6 0-12.3 0-19.7 6.2-6.2-4.9-11.1-11.1-19.7-11.1-3.7 0-6.2 1.2-8.6 3.6l-8.6 7.4c-4.8 6.1-15.9 17.2-15.9 25.8 0 11 9.8 31.9 13.5 41.8l90.9 250.8-14.7 17.3c-66.4 79.8-159.8 190.5-210.2 279l-29.5 50.4c-8.6 14.7-29.5 44.3-29.5 60.2 0 3.7 3.8 6.2 6.2 8.6 8.6 7.3 3.6 14.7 1.2 24.5-2.5 7.4-3.7 12.3-3.7 19.7 0 13.5 11.1 27 18.5 38.1 7.3 12.2 9.9 24.5 25.8 24.5 17.2 0 49.2-3.6 63.9-14.7l243.4-377.5 115.6 178.5c6.1 9.8 30.7 54.1 46.7 54.1 14.8 0 38.1-16.1 40.6-30.8-2.6-4.9-6.2-12.3-6.2-17.2 0-7.5 19.7-14.9 24.6-19.7v-9.9c8.6-3.7 13.5-8.6 17.2-17.2l-95.9-205.3-38.2-76.3 13.6-19.7 174.6-225.9c11-14.8 28.3-38.1 41.8-50.4 4.9-5 13.5-12.3 13.5-19.7 0-8.6-19.7-22.1-24.6-34.4z","p-id":"14396",fill:"#fe6c56"})}),Mn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M389.7 604.3L198.2 447.4c-3.7-3-9.1-3-12.8 0.1l-73.3 61.4c-4.4 3.7-4.8 10.3-0.9 14.5l324.1 344.3c5 5.3 13.8 3.6 16.6-3.1 64.4-160.1 244.3-452.8 463.2-664.7 3-2.9 3.9-7.2 2.3-11l-13.7-33c-2.4-5.8-9.5-8-14.7-4.5-243.2 157.7-419.4 353.5-499.3 452.9z",fill:"#fe6c56","p-id":"4913"})}),An=(0,N.Pi)(function(n){var t,r=n.schema,u=n.seqNo,i=(0,w.Rk)(),f=i.props.correctAnswerVisible,m=i.props.questionScore,o=(t=r.attribute)===null||t===void 0?void 0:t.examAnswerMode;return!f||!m||o==="none"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{className:"exam-score-info",children:[(0,e.jsxs)("span",{children:["\u7B2C",u,"\u9898"]}),m[r.id]?(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsxs)("span",{className:"score",children:["\u5F97\u5206:",m[r.id],"\u5206"]}),Mn]}):Pn]})}),In=(0,N.Pi)(function(n){var t,r,u=n.qId,i=n.schema,f=(0,w.Rk)(),m=f.reviewAnswer[u],o=(t=i.children)===null||t===void 0?void 0:t.map(function(a){var c;return(c=a.attribute)===null||c===void 0?void 0:c.examCorrectAnswer}).filter(function(a){return a}).join(";"),l=o&&["FillBlank","MultipleBlank","Textarea","HorzBlank"].includes(i.type),x=function(){return l?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u6B63\u786E\u7B54\u6848\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",style:{marginBottom:10},children:o})]}):(0,e.jsx)(e.Fragment,{})},s=function(){var c;if((c=i.attribute)!==null&&c!==void 0&&c.examAnalysis){var h;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u7B54\u6848\u89E3\u6790\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",children:(0,e.jsx)(F.Z,{html:(h=i.attribute)===null||h===void 0?void 0:h.examAnalysis})})]})}return(0,e.jsx)(e.Fragment,{})};return m&&m.visible&&((r=i.attribute)!==null&&r!==void 0&&r.examAnalysis||l)?(0,e.jsxs)("div",{className:"answer-analysis",children:[x(),s()]}):(0,e.jsx)(e.Fragment,{})});function Fn(n){var t=n.schema,r=n.index,u=n.qsIndex,i=n.required,f=n.error,m=n.replaceTitle,o=n.seqNo,l=n.onBlur,x=n.onChange,s=n.onFocus,a=(0,p.useContext)(R.ZX),c=a.questionNumber,h=(0,w.AK)("-body-question"),d=(0,p.useState)(),v=(0,E.Z)(d,2),C=v[0],j=v[1],Z=t.description;(0,p.useEffect)(function(){if(C){var S,M;(S=document.querySelector("[data-id='".concat(t.id,"']")))===null||S===void 0||S.classList.remove("ant-form-item-has-error"),(M=document.querySelector("[data-id='".concat(t.id,"']")))===null||M===void 0||M.querySelectorAll("[data-id]").forEach(function(ae){ae.classList.remove("ant-form-item-has-error")})}if(f.length>0){var L,K=f[0].split("^"),ne=(0,E.Z)(K,2),q=ne[0],k=ne[1],$;k?($=document.querySelector("[data-id='".concat(q,"']")),j(k)):($=document.querySelector("[data-id='".concat(t.id,"']")),j(q)),(L=$)===null||L===void 0||L.classList.add("ant-form-item-has-error")}else C&&j(void 0)},[f]);var b="";u!==void 0&&(b+=u+1+"-"),r!==void 0&&(b+=r+1+".");var P=function(){return C?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:C})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsxs)("section",{className:h,children:[(0,e.jsx)("div",{className:"".concat(h,"-head"),children:(0,e.jsxs)("span",{className:h+"-header",children:[(0,e.jsx)(An,{schema:t,seqNo:o}),(0,e.jsxs)("h2",{className:h+"-header-title",children:[c&&(0,e.jsx)("span",{className:h+"-header-title-seq",children:(0,e.jsx)("b",{children:c?o||b:""})}),i&&(0,e.jsx)("span",{className:h+"-header-title-required",children:(0,e.jsx)("i",{children:"*"})}),(0,e.jsx)("div",{className:h+"-header-title-text",children:(0,e.jsx)(En,{schema:t,title:m||t.title,onBlur:l,onChange:x,onFocus:s})}),P()]}),Z&&(0,e.jsx)("div",{className:"question-desc",children:(0,e.jsx)(U.hl,{html:Z})})]})}),(0,e.jsxs)("div",{className:"".concat(h,"-body"),children:[n.children,(0,e.jsx)(gn,{qId:t.id}),(0,e.jsx)(In,{qId:t.id,schema:t})]})]})}(0,B.eC)("Question",(0,N.Pi)(Fn),"antd");function Rn(n){var t=n.schema,r=n.index,u=n.seqNo,i=(0,w.AK)("-body-questionSet"),f=(0,p.useContext)(R.ZX),m=f.questionNumber;return(0,e.jsxs)("div",{className:i,children:[(0,e.jsxs)("div",{className:i+"-title",children:[m?u||"".concat(r+1,"."):"",(0,e.jsx)(F.Z,{html:t.title})]}),n.children,(0,e.jsx)("div",{className:i+"-splitLine"})]})}(0,B.eC)("QuestionSet",Rn,"antd");var Ht=g(84305),Tn=g(88182),Dn=g(82925),kt=g(22385),$n=g(94199),ge=g(93224),On=g(39017),Ln=g(49914),Hn=g(78338);function kn(n){n=Number(n);var t=Math.floor(n/3600),r=Math.floor(n%3600/60),u=Math.floor(n%3600%60),i="".concat(t).padStart(2,"0"),f="".concat(r).padStart(2,"0"),m="".concat(u).padStart(2,"0");return"".concat(i,":").concat(f,":").concat(m)}function zn(n){return n<=60?"#ff4d4f":n<=180?"#faad14":"#52c41a"}var Un=(0,N.Pi)(function(){var n,t,r=(0,Ln.H)(),u=(0,On.Rk)(),i=r.startTime,f=((n=r.project)===null||n===void 0||(t=n.setting.examSetting)===null||t===void 0?void 0:t.maxSubmitMinutes)||0,m=(0,p.useState)(0),o=(0,E.Z)(m,2),l=o[0],x=o[1],s=i+f*60*1e3,a=(0,p.useRef)();return(0,p.useEffect)(function(){if(f!==0)return a.current=window.setInterval(function(){x((s-new Date().getTime())/1e3)},1e3),function(){clearInterval(a.current)}},[s]),(0,p.useEffect)(function(){l<0&&(u.submit(),clearInterval(a.current))},[l]),f===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,e.jsx)(Hn.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,e.jsx)("span",{style:{marginLeft:3,color:zn(l)},children:kn(l)})]})}),Le=(0,N.Pi)(function(n){var t=(0,w.Rk)(),r=t.props.answerSheetVisible,u=n.size,i=n.marked,f=i===void 0?!0:i,m=(0,ge.Z)(n,["size","marked"]);return r?(0,e.jsx)($n.Z,{title:"\u6807\u8BB0",children:(0,e.jsx)("svg",(0,y.Z)((0,y.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:n.size||24,height:n.size||24,className:"marked"},m),{},{children:(0,e.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:f?"#EA4942":"#d8d8d8","p-id":"1287"})}))}):(0,e.jsx)(e.Fragment,{})}),Wn=(0,N.Pi)(function(n){var t=(0,w.Rk)(),r=n.finished,u=n.id,i=n.marked,f=n.seqNo;return(0,e.jsxs)("div",{className:fe()("answer-sheet-item",{marked:i,finished:r}),onClick:function(){return t.changePageIndex(u)},children:[f,i&&(0,e.jsx)(Le,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),Kn=(0,N.Pi)(function(){var n=(0,w.Rk)(),t=n.answerSheet;return(0,e.jsx)(e.Fragment,{children:t.filter(function(r){return r.display!=="none"}).map(function(r,u){return(0,p.createElement)(Wn,(0,y.Z)((0,y.Z)({},r),{},{seqNo:u+1,key:r.id}))})})}),Vn=(0,N.Pi)(function(){var n=(0,w.Rk)(),t=n.answerSheet,r=t.filter(function(f){return f.finished}).length,u=t.filter(function(f){return!f.finished}).length,i=t.filter(function(f){return f.marked}).length;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:r})]}),(0,e.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:u})]}),(0,e.jsxs)("div",{className:"marked",children:[(0,e.jsx)(Le,{size:18}),"\u6807\u8BB0",(0,e.jsx)("span",{style:{marginLeft:4},children:i})]})]})}),Yn=(0,N.Pi)(function(){return(0,e.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,e.jsx)(Un,{})]})}),Gn=(0,N.Pi)(function(){var n=(0,w.Rk)(),t=n.props.answerSheetVisible;return t?(0,e.jsxs)("div",{className:"answer-sheet",children:[(0,e.jsx)(Yn,{}),(0,e.jsx)("div",{className:"answer-sheet-content",children:(0,e.jsx)(Kn,{})}),(0,e.jsx)("div",{className:"answer-sheet-footer",children:(0,e.jsx)(Vn,{})})]}):(0,e.jsx)(e.Fragment,{})});he().locale("zh-cn");function Qn(n){var t=n.headerVisible,r=n.footerVisible,u=n.schema,i=(0,w.AK)(),f=(0,w.Al)(),m=function(){var l,x=(l=u.attribute)===null||l===void 0?void 0:l.headerImage;if(x)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(x),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:fe()(i,{preview:f.isPreview}),children:[(0,e.jsx)(xn,{}),(0,e.jsx)("div",{className:i+"-banner",children:m()}),t&&(0,e.jsx)(W,{}),(0,e.jsx)(Tn.ZP,{locale:Dn.Z,children:(0,e.jsx)(O,{children:n.children})}),r&&(0,e.jsx)(T,{}),(0,e.jsx)(Gn,{})]})}(0,B.eC)("Survey",Qn,"antd");var zt=g(13062),_=g(71230),Ut=g(89032),Y=g(15746),z=g(32059);function Xn(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children;function m(o,l){r((0,z.Z)({},l,o))}return(0,e.jsx)("div",{children:f==null?void 0:f.map(function(o){var l=o.id,x=o.title,s=o.attribute,a=s===void 0?{}:s,c=a.mapMove;return(0,e.jsxs)(_.Z,{gutter:[10,0],"data-id":l,children:[x&&(0,e.jsx)(Y.Z,{span:24},o.id),(0,e.jsx)(Y.Z,{span:24})]},l)})})}(0,B.RM)("Address",Xn,"antd");var Wt=g(43185),we=g(32620),Kt=g(34792),He=g(48086),ke=g(3182),Jn=g(94043),Se=g.n(Jn),_n=g(81473);function ze(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=n.readOnly,m=t.children,o=m===void 0?[]:m,l=(0,w.Al)(),x=function(){var s=(0,ke.Z)(Se().mark(function a(c){var h,d,v,C;return Se().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:h=c.onSuccess,d=c.onError,v=c.file,C=c.onProgress,l.onUpload&&l.onUpload({file:v,fileType:6},function(b){C&&C({percent:b.loaded/b.total*100})}).then(function(b){if(b.success&&h&&(h(b.data),b.data.content&&r((0,z.Z)({},o[0].id,b.data.content))),!b.success&&d){var P=new Error("Some error");d({event:P})}});case 2:case"end":return Z.stop()}},a)}));return function(c){return s.apply(this,arguments)}}();return(0,e.jsx)("div",{children:o==null?void 0:o.map(function(s){var a=s.id,c=s.attribute,h=c===void 0?{}:c,d=h.cameraOnly;return(0,e.jsx)(_.Z,{style:{marginBottom:10},"data-id":a,children:(0,e.jsx)(Y.Z,{span:12,children:(0,e.jsx)(H.Z,{placeholder:"\u70B9\u51FB\u8BC6\u522B\u6761\u7801",value:i[a],addonAfter:(0,e.jsx)(we.Z,{accept:"image/*",capture:d?"environment":void 0,disabled:f,maxCount:1,beforeUpload:function(C){return h!=null&&h.maxFileSize&&C.size>h.maxFileSize*1024*1024?(He.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(h.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),we.Z.LIST_IGNORE):!0},customRequest:x,showUploadList:!1,children:(0,e.jsx)(_n.Z,{})},a)})})},a)})})}ze.Preview=function(n){return(0,e.jsx)("div",{children:"hello world"})},(0,B.RM)("Barcode",ze,"antd");var Vt=g(36877),qn=g(96607);function et(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=f===void 0?[]:f;function o(l){var x={};l.forEach(function(s,a){var c=m[a].id;x[c]=s}),r(x)}return(0,e.jsx)(_.Z,{children:(0,e.jsx)(Y.Z,{span:12,children:(0,e.jsx)(qn.Z,{value:m.map(function(l){return i[l.id]}).filter(function(l){return l}),style:{width:260},options:t.dataSource,onChange:o,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,B.RM)("Cascader",et,"antd");function nt(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=n.onBlur,m=t.children,o=t.attribute,l=24/((o==null?void 0:o.columns)||1),x=(0,w.AK)("-body-question"),s=!!(o!=null&&o.statEnabled);function a(c,h,d){return h?i[c]=d||!0:delete i[c],(0,y.Z)({},i)}return(0,p.useEffect)(function(){m==null||m.forEach(function(c){var h;(h=c.attribute)!==null&&h!==void 0&&h.defaultChecked&&Object.keys(i).length===0&&r((0,z.Z)({},c.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(_.Z,{children:m==null?void 0:m.map(function(c){var h,d,v=c.id,C=(h=c.attribute)===null||h===void 0?void 0:h.dataType,j=(d=c.attribute)===null||d===void 0?void 0:d.suffix;return(0,e.jsxs)(Y.Z,{span:l,className:x+"-option","data-id":v,children:[(0,e.jsx)(bn,{qId:t.id,schema:c,checked:i.hasOwnProperty(v),onChange:function(b,P){return r(a(v,b,P))},value:typeof i[v]=="boolean"?{}:i[v],onBlur:f}),s&&(0,e.jsx)(Re,{checked:!!i[v],optionId:v,questionId:t.id,checkedCount:Object.keys(i).length}),C&&(0,e.jsx)(ce,{value:typeof i[v]=="boolean"?"":i[v],style:{maxWidth:120},type:C,onChange:function(b){return r(a(v,!0,b))},onBlur:function(b){return f(a(v,!0,b))},suffix:j&&(0,e.jsx)("span",{className:x+"-option-suffix",children:(0,e.jsx)(F.Z,{html:j})})})]},v)})})})}(0,B.RM)("Checkbox",nt,"antd");var Yt=g(71153),tt=g(60331),Gt=g(62999),at=g(54680),se=g(3980),rt=g(60780),it=g.n(rt);function Ue(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=f===void 0?[]:f,o=m[0].id,l=(0,p.useState)([]),x=(0,E.Z)(l,2),s=x[0],a=x[1];function c(d){o&&((d==null?void 0:d.length)===0?r(void 0):r((0,z.Z)({},o,d==null?void 0:d.map(function(v){return v.value}))))}var h=(0,p.useMemo)(function(){return it()(s.map(function(d){return{title:d.name,key:d.id,value:d.id,parentId:d.parentId}}),{parentProperty:"parentId",customID:"key"})},[s]);return(0,p.useEffect)(function(){se.hi.deptSelect({}).then(function(d){d.success&&a(d.data)})},[]),(0,e.jsx)(_.Z,{children:(0,e.jsx)(Y.Z,{span:12,children:(0,e.jsx)(at.Z,{style:{width:"100%"},treeCheckable:!0,value:(i[o]||[]).map(function(d){return{value:d}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:h,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:c,showSearch:!1})})})}var lt=function(t){var r=t.schema,u=t.value,i=u===void 0?{}:u,f=r.children,m=f===void 0?[]:f,o=m[0].id,l=(0,p.useState)([]),x=(0,E.Z)(l,2),s=x[0],a=x[1];return(0,p.useEffect)(function(){se.hi.deptSelect({selected:i[o]||[],name:"^_^"}).then(function(c){c.success&&a(c.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(Fe.Z,{children:s.map(function(c){return(0,e.jsx)(tt.Z,{color:"blue",children:c.name},c.id)})})})};Ue.Preview=lt,(0,B.RM)("Dept",Ue,"antd");function We(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=n.onBlur,m=t.children,o=(0,w.AK)("-body-question");function l(s,a){i[s]=a,a===""&&delete i[s],r((0,y.Z)({},i),s)}function x(s,a){i[s]=a,a===""&&delete i[s],f((0,y.Z)({},i),s)}return(0,e.jsx)("div",{children:m==null?void 0:m.map(function(s){var a=s.id,c=s.title;return(0,e.jsxs)(_.Z,{style:{marginBottom:10},"data-id":a,children:[c&&(0,e.jsx)(Y.Z,{className:o+"-option",span:4,children:s.title&&(0,e.jsx)("span",{className:o+"-option-title",children:(0,e.jsx)(F.Z,{html:s.title})})},s.id),(0,e.jsxs)(Y.Z,{span:12,className:o+"-option",children:[(0,e.jsx)(Sn,{qId:t.id,schema:s,value:i,onChange:function(d){return l(a,d)},onBlur:function(d){return x(a,d)}}),(0,e.jsx)(Ae,{schema:s,type:t.type})]})]},a)})})}(0,B.RM)("FillBlank",We,"antd"),(0,B.RM)("MultipleBlank",We,"antd");function Ke(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=n.onBlur,m=t.children,o=t.attribute,l=o===void 0?{}:o,x=l.content;return!x||!m?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(Ze,{schema:t,children:m.filter(function(s){var a;return!((a=s.attribute)!==null&&a!==void 0&&a.fieldInTitle)}),content:x,onBlur:f,onChange:r,value:i})}Ke.Preview=function(n){var t=n.schema,r=n.value,u=t.children,i=t.attribute,f=i===void 0?{}:i,m=f.content;return(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("div",{children:(0,e.jsx)(F.Z,{html:De(m,u,r),replaceP:!1})})})},(0,B.RM)("HorzBlank",Ke,"antd");var Be=g(83279),ue=g(79521),st=g(54121),ut=function(t){var r=(0,se.XI)(200),u=(0,E.Z)(r,2),i=u[0],f=u[1],m=(0,se.XI)(200),o=(0,E.Z)(m,2),l=o[0],x=o[1];return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},t.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:i,children:[t.cells.map(function(s){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getCellProps()),{},{className:"td","data-id":"".concat(t.i,"-").concat(s.column.id),children:s.render("Cell")}))}),t.onDelete&&(0,e.jsx)("div",{ref:l,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(st.Z,{onClick:function(){t.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:f||x?"visible":"hidden"}})})]}))};function Ve(n){var t=n.columns,r=n.data,u=n.onAdd,i=n.onDelete,f=p.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),m=(0,ue.useTable)({columns:t,data:r,defaultColumn:f},ue.useBlockLayout),o=m.getTableProps,l=m.getTableBodyProps,x=m.headerGroups,s=m.rows,a=m.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},o()),{},{className:"table",children:[(0,e.jsx)("div",{children:x.map(function(c){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},c.getHeaderGroupProps()),{},{className:"tr",children:c.headers.map(function(h){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},h.getHeaderProps()),{},{className:"th",children:h.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},l()),{},{children:s.map(function(c,h){return a(c),(0,p.createElement)(ut,(0,y.Z)((0,y.Z)({},c),{},{key:h,i:h,onDelete:i?function(){return i(h)}:void 0}))})})),u&&(0,e.jsx)("div",{className:"footer",onClick:u,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Ye(n){var t=n.schema,r=n.onChange,u=n.value||[{}],i=t.children,f=i===void 0?[]:i,m=(0,p.useMemo)(function(){return f.map(function(o){var l;return{Header:(0,e.jsx)(F.Z,{html:o.title}),width:(l=o.attribute)===null||l===void 0?void 0:l.width,accessor:o.id,Cell:function(s){var a,c=s.value,h=s.row,d=s.data;if(((a=o.attribute)===null||a===void 0?void 0:a.dataType)==="select"){var v;return(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u9009\u62E9",value:c,style:{minWidth:80},onChange:function(j){d[h.index][o.id]=j},options:((v=o.dataSource)===null||v===void 0?void 0:v.map(function(C){return{label:C.label,value:C.value}}))||[]})}else return(0,e.jsx)(H.Z,{value:c,onChange:function(j){d[h.index][o.id]=j.target.value,r((0,Be.Z)(d))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ve,{columns:m,data:u,onAdd:function(){u.push({}),r((0,Be.Z)(u))},onDelete:function(l){u.splice(l,1),r((0,Be.Z)(u))}})})}var ot=function(t){var r=t.schema,u=t.value||[{},{}],i=r.children,f=i===void 0?[]:i,m=(0,p.useMemo)(function(){return f.map(function(o){var l;return{Header:(0,e.jsx)(F.Z,{html:o.title}),width:(l=o.attribute)===null||l===void 0?void 0:l.width,accessor:o.id,Cell:function(s){var a,c=s.value,h=s.row,d=s.data;if(((a=o.attribute)===null||a===void 0?void 0:a.dataType)==="select"){var v,C,j=((v=o.dataSource)===null||v===void 0||(C=v.find(function(Z){return Z.value===c}))===null||C===void 0?void 0:C.label)||"";return(0,e.jsx)("span",{children:j})}else return(0,e.jsx)("span",{children:c})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ve,{columns:m,data:u})})};Ye.Preview=ot,(0,B.RM)("MatrixAuto",Ye,"antd");function Ge(n){var t=n.columns,r=n.data,u=p.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),i=(0,ue.useTable)({columns:t,data:r,defaultColumn:u},ue.useBlockLayout),f=i.getTableProps,m=i.getTableBodyProps,o=i.headerGroups,l=i.rows,x=i.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},f()),{},{className:"table",children:[(0,e.jsx)("div",{children:o.map(function(s){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getHeaderGroupProps()),{},{className:"tr",children:s.headers.map(function(a){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},a.getHeaderProps()),{},{className:"th",children:a.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},m()),{},{children:l.map(function(s){return x(s),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getRowProps()),{},{className:"tr",children:s.cells.map(function(a){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},a.getCellProps()),{},{className:"td",children:a.render("Cell")}))})}))})}))]}))}function Qe(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=f===void 0?[]:f,o=t.row,l=o===void 0?[]:o,x=(0,p.useMemo)(function(){var a,c=m.map(function(h){var d;return{Header:(0,e.jsx)(F.Z,{html:h.title}),width:(d=h.attribute)===null||d===void 0?void 0:d.width,accessor:h.id,Cell:function(C){var j=C.value,Z=C.row,b=C.data;return(0,e.jsx)("div",{onClick:function(S){var M=!j,L={};b.forEach(function(K,ne){var q=K.title,k=K.rowId,$=(0,ge.Z)(K,["title","rowId"]);Z.index===ne&&(M?$[h.id]=!0:delete $[h.id]),L[k]=$}),r(L)},children:(0,e.jsx)(ye.Z,{checked:!!j})})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=t.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),c},[]),s=l.map(function(a,c){var h=a.id,d=i[h]||{};return(0,y.Z)({title:(0,e.jsx)(F.Z,{html:a.title}),rowId:h},d)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ge,{columns:x,data:s})})}var dt=function(t){var r=t.schema,u=t.value,i=u===void 0?{}:u,f=r.children,m=f===void 0?[]:f,o=r.row,l=o===void 0?[]:o,x=(0,p.useMemo)(function(){var a,c=m.map(function(h){var d;return{Header:(0,e.jsx)(F.Z,{html:h.title}),width:(d=h.attribute)===null||d===void 0?void 0:d.width,accessor:h.id,Cell:function(C){var j=C.value,Z=C.row,b=C.data;return j?(0,e.jsx)("div",{children:(0,e.jsx)(ye.Z,{checked:!!j,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=r.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),c},[]),s=l.map(function(a,c){var h=a.id,d=i[h]||{};return(0,y.Z)({title:(0,e.jsx)(F.Z,{html:a.title}),rowId:h},d)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ge,{columns:x,data:s})})};Qe.Preview=dt,(0,B.RM)("MatrixCheckbox",Qe,"antd");function Xe(n){var t=n.columns,r=n.data,u=p.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),i=(0,ue.useTable)({columns:t,data:r,defaultColumn:u},ue.useBlockLayout),f=i.getTableProps,m=i.getTableBodyProps,o=i.headerGroups,l=i.rows,x=i.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},f()),{},{className:"table",children:[(0,e.jsx)("div",{children:o.map(function(s){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getHeaderGroupProps()),{},{className:"tr",children:s.headers.map(function(a){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},a.getHeaderProps()),{},{className:"th",children:a.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},m()),{},{children:l.map(function(s){return x(s),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getRowProps()),{},{className:"tr",children:s.cells.map(function(a){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},a.getCellProps()),{},{className:"td","data-id":"".concat(s.original.rowId,"-").concat(a.column.id),children:a.render("Cell")}))})}))})}))]}))}function Je(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=f===void 0?[]:f,o=t.row,l=o===void 0?[]:o,x=(0,p.useMemo)(function(){var a,c=m.map(function(h){var d;return{Header:(0,e.jsx)(F.Z,{html:h.title}),width:(d=h.attribute)===null||d===void 0?void 0:d.width,accessor:h.id,Cell:function(C){var j=C.value,Z=C.row,b=C.data;return(0,e.jsx)(ce,{value:j,onChange:function(S){var M={};b.forEach(function(L,K){var ne=L.title,q=L.rowId,k=(0,ge.Z)(L,["title","rowId"]);Z.index===K&&(k[h.id]=S),M[q]=k}),r(M)}})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=t.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),c},[]),s=l.map(function(a,c){var h=a.id,d=i[h]||{};return(0,y.Z)({title:(0,e.jsx)(F.Z,{html:a.title}),rowId:h},d)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Xe,{columns:x,data:s})})}var ct=function(t){var r=t.schema,u=t.value,i=u===void 0?{}:u,f=r.children,m=f===void 0?[]:f,o=r.row,l=o===void 0?[]:o,x=(0,p.useMemo)(function(){var a,c=m.map(function(h){var d;return{Header:function(){return(0,e.jsx)(F.Z,{html:h.title})},width:(d=h.attribute)===null||d===void 0?void 0:d.width,accessor:h.id,Cell:function(C){var j=C.value;return(0,e.jsx)("span",{children:j})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(a=r.attribute)===null||a===void 0?void 0:a.width,accessor:"title"}),c},[]),s=l.map(function(a,c){var h=a.id,d=i[h]||{};return(0,y.Z)({title:a.title,rowId:h},d)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Xe,{columns:x,data:s})})};Je.Preview=ct,(0,B.RM)("MatrixFillBlank",Je,"antd");function _e(n){var t=n.columns,r=n.data,u=p.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),i=(0,ue.useTable)({columns:t,data:r,defaultColumn:u},ue.useBlockLayout),f=i.getTableProps,m=i.getTableBodyProps,o=i.headerGroups,l=i.rows,x=i.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},f()),{},{className:"table",children:[(0,e.jsx)("div",{children:o.map(function(s){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getHeaderGroupProps()),{},{className:"tr",children:s.headers.map(function(a){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},a.getHeaderProps()),{},{className:"th",children:a.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},m()),{},{children:l.map(function(s){return x(s),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},s.getRowProps()),{},{className:"tr",children:s.cells.map(function(a){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},a.getCellProps()),{},{className:"td",children:a.render("Cell")}))})}))})}))]}))}function qe(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=f===void 0?[]:f,o=t.row,l=o===void 0?[]:o,x=(0,p.useMemo)(function(){var c;return((c=t.children)===null||c===void 0?void 0:c.filter(function(h){var d;return(d=h.attribute)===null||d===void 0?void 0:d.exclusiveFillBlankInMatrix}).map(function(h){return h.id}))||[]},[t]),s=(0,p.useMemo)(function(){var c,h,d=m.map(function(v){var C;return{Header:(0,e.jsx)(F.Z,{html:v.title}),width:(C=v.attribute)===null||C===void 0?void 0:C.width,accessor:v.id,Cell:function(Z){var b,P,S=Z.value,M=Z.row,L=Z.data,K=(b=v.attribute)===null||b===void 0?void 0:b.exclusiveFillBlankInMatrix,ne=(P=v.attribute)===null||P===void 0?void 0:P.dataType;return(0,e.jsxs)("div",{onClick:function(){if(!K){var k={};L.forEach(function($,ae){var te=$.title,re=$.rowId,X=(0,ge.Z)($,["title","rowId"]);M.index===ae?(k[re]={},x.forEach(function(me){k[re][me]=X[me]}),k[re][v.id]=!0):k[re]=X}),r(k)}},children:[!K&&(0,e.jsx)(be.ZP,{checked:!!S}),ne&&(0,e.jsx)(ce,{type:ne,style:{width:120},value:S,onChange:function(k){var $={};L.forEach(function(ae,te){var re=ae.title,X=ae.rowId,me=(0,ge.Z)(ae,["title","rowId"]);M.index===te?(K?$[X]=me:($[X]={},x.forEach(function(on){$[X][on]=me[on]})),$[X][v.id]=k):$[X]=me}),r($)},onBlur:function(){}})]})}}});return d.splice(0,0,{Header:(0,e.jsx)(F.Z,{html:(c=t.attribute)===null||c===void 0?void 0:c.cornerText}),width:((h=t.attribute)===null||h===void 0?void 0:h.width)||150,accessor:"title"}),d},[]),a=l.map(function(c,h){var d=c.id,v=i[d]||{};return(0,y.Z)({title:(0,e.jsx)(F.Z,{html:c.title}),rowId:d},v)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(_e,{columns:s,data:a})})}var vt=function(t){var r=t.schema,u=t.value,i=u===void 0?{}:u,f=r.children,m=f===void 0?[]:f,o=r.row,l=o===void 0?[]:o,x=(0,p.useMemo)(function(){var a,c,h=m.map(function(d){var v;return{Header:(0,e.jsx)(F.Z,{html:d.title}),width:(v=d.attribute)===null||v===void 0?void 0:v.width,accessor:d.id,Cell:function(j){var Z=j.value,b=j.row,P=j.data;return Z?(0,e.jsx)("div",{children:(0,e.jsx)(be.ZP,{checked:!!Z,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return h.splice(0,0,{Header:(0,e.jsx)(F.Z,{html:(a=r.attribute)===null||a===void 0?void 0:a.cornerText}),width:((c=r.attribute)===null||c===void 0?void 0:c.width)||150,accessor:"title"}),h},[]),s=l.map(function(a,c){var h=a.id,d=i[h]||{};return(0,y.Z)({title:(0,e.jsx)(F.Z,{html:a.title}),rowId:h},d)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(_e,{columns:x,data:s})})};qe.Preview=vt,(0,B.RM)("MatrixRadio",qe,"antd");function ht(n){for(var t=[],r=2;r<n+2;r++)t.push(r/(n+2));return t}function ft(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=[],i=n;i<=t;i++)u.push(i);return r&&u.reverse(),u}function mt(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=f===void 0?[]:f,o=m[0].id,l=(0,p.useState)(function(){return i[o]||-1}),x=(0,E.Z)(l,2),s=x[0],a=x[1];function c(d){r((0,z.Z)({},o,d))}(0,p.useEffect)(function(){Object.keys(i).length>0&&a(i[o])},[i,o]);var h=function(v){var C=i[v.id],j=v.attribute||{},Z=j.scope,b=Z===void 0?"[0,10]":Z,P=j.npsInvertSort,S=j.npsStart,M=S===void 0?"\u4E0D\u53EF\u80FD":S,L=j.npsEnd,K=L===void 0?"\u6781\u6709\u53EF\u80FD":L,ne=b.replace("[","").replace("]","").split(","),q=(0,E.Z)(ne,2),k=q[0],$=q[1],ae=ht(s||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){a(C)},children:[(0,e.jsx)("div",{className:"nps-container",children:ft(parseInt(k),parseInt($),P).map(function(te){var re={background:"#2672ff",opacity:ae[te]};return(0,e.jsx)("div",{className:"nps-item",style:s>=te?re:void 0,onMouseOver:function(){a(te)},onClick:function(){return c(te)},children:te},te)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:P?K:M}),(0,e.jsx)("div",{children:P?M:K})]})]},v.id)};return(0,e.jsx)(_.Z,{children:m.map(function(d){return h(d)})})}(0,B.RM)("Nps",mt,"antd");var xt=be.ZP.Group;function gt(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=n.onBlur,m=t.children,o=t.attribute,l=24/((o==null?void 0:o.columns)||1),x=(0,w.AK)("-body-question"),s=!!(o!=null&&o.statEnabled);function a(d){var v,C=d.target.value,j=(v=t.children)===null||v===void 0?void 0:v.find(function(b){return b.id===C});if(j){var Z=j.id;r((0,z.Z)({},d.target.value,i[Z]||!0))}}function c(d,v){r((0,z.Z)({},d,v||!0),d)}function h(d,v){f((0,z.Z)({},d,v||!0),d)}return(0,p.useEffect)(function(){var d;(d=t.children)===null||d===void 0||d.forEach(function(v){var C,j=v.id,Z=v.attribute,b=Z==null?void 0:Z.dataType;(C=v.attribute)!==null&&C!==void 0&&C.defaultChecked&&Object.keys(i).length===0&&r((0,z.Z)({},j,b?i[j]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(xt,{onChange:a,value:Object.keys(i)[0],style:{width:"100%"},children:(0,e.jsx)(_.Z,{children:m==null?void 0:m.map(function(d){var v,C,j=d.id,Z=(v=d.attribute)===null||v===void 0?void 0:v.dataType,b=(C=d.attribute)===null||C===void 0?void 0:C.suffix;return(0,e.jsxs)(Y.Z,{span:l,className:x+"-option","data-id":j,children:[(0,e.jsx)(wn,{qId:t.id,schema:d,value:i[j],onChange:function(S){return c(j,S)},onBlur:function(S){return h(j,S)}}),s&&(0,e.jsx)(Re,{checked:!!i[j],optionId:j,questionId:t.id,checkedCount:Object.keys(i).length}),Z&&(0,e.jsx)(ce,{value:i[j]===!0?"":i[j],type:Z,schema:d,style:{maxWidth:120},onChange:function(S){return c(j,S)},onBlur:function(S){return h(j,S)},suffix:b&&(0,e.jsx)("span",{className:x+"-option-suffix",children:(0,e.jsx)(F.Z,{html:b})})})]},j)})})})})}(0,B.RM)("Radio",gt,"antd");function en(n){var t=(0,w.AK)("-body-question");return(0,e.jsx)("div",{className:t,children:(0,e.jsx)(U.hl,{html:"".concat(n.replaceTitle||n.schema.title||"")})})}en.Preview=function(n){return(0,e.jsx)("div",{children:"hello world"})},(0,B.RM)("Remark",en,"antd");var Qt=g(96433),Ie=g(2864),nn=g(41687),jt=g(46870),tn=g(18613),Ct=g(57206),yt={1:(0,e.jsx)(nn.Z,{}),2:(0,e.jsx)(nn.Z,{}),3:(0,e.jsx)(jt.Z,{}),4:(0,e.jsx)(tn.Z,{}),5:(0,e.jsx)(tn.Z,{})};function Zt(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=f===void 0?[]:f;function o(x,s){r((0,z.Z)({},x,s))}var l=function(s){var a=s.attribute||{},c=s.id,h=a.scope,d=h===void 0?"[0,5]":h,v=a.scoreStyle,C=d.replace("[","").replace("]","").split(","),j=(0,E.Z)(C,2),Z=j[0],b=j[1];return v==="heart"?(0,e.jsx)(Ie.Z,{defaultValue:parseInt(Z),character:(0,e.jsx)(Ct.Z,{}),style:{color:"#ea7463"},value:i[c],count:parseInt(b),onChange:function(S){return o(c,S)}},c):v==="smile"?(0,e.jsx)(Ie.Z,{defaultValue:parseInt(Z),character:function(S){var M=S.index;return yt[M+1]},count:parseInt(b),onChange:function(S){return o(c,S)},value:i[c]},c):(0,e.jsx)(Ie.Z,{defaultValue:parseInt(Z),count:parseInt(b),value:i[c],onChange:function(S){return o(c,S)}},c)};return(0,e.jsx)(_.Z,{children:m.map(function(x){return l(x)})})}(0,B.RM)("Score",Zt,"antd");function bt(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=f===void 0?[]:f;function o(l){var x,s=(x=t.children)===null||x===void 0?void 0:x.find(function(a){return a.id===l});s&&r((0,z.Z)({},l,!0))}return(0,p.useEffect)(function(){var l;(l=t.children)===null||l===void 0||l.forEach(function(x){var s,a=x.id;(s=x.attribute)!==null&&s!==void 0&&s.defaultChecked&&Object.keys(i).length===0&&r((0,z.Z)({},a,!0))})},[]),(0,e.jsx)(_.Z,{children:(0,e.jsx)(Y.Z,{span:12,children:(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){r(void 0)},showSearch:!0,value:Object.keys(i)[0],filterOption:function(x,s){return(s==null?void 0:s.label).toLowerCase().indexOf(x.toLowerCase())!==-1},onChange:o,style:{width:260},options:m.map(function(l){return{label:l.title,value:l.id}})})})})}(0,B.RM)("Select",bt,"antd");var Xt=g(34669),pt=g(82833);function an(n){var t=n.schema,r=n.onChange,u=t.children,i=(0,w.Al)(),f=(0,p.useState)(0),m=(0,E.Z)(f,2),o=m[0],l=m[1];function x(s,a){var c="signature-".concat(a,"-").concat((0,R.kb)(6),".png");if(!i.onUpload){r((0,z.Z)({},a,[c]));return}fetch(s).then(function(h){return h.blob()}).then(function(h){var d=new File([h],c,{type:"image/png"});i.onUpload({file:d},function(v){l(v.loaded/v.total*100)}).then(function(v){v.success&&v.data.id&&r((0,z.Z)({},a,[v.data.id]))})})}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(s){var a=s.id,c=s.title;return(0,e.jsxs)(_.Z,{gutter:[10,0],"data-id":a,children:[c&&(0,e.jsx)(Y.Z,{span:24},s.id),(0,e.jsxs)(Y.Z,{span:24,children:[(0,e.jsx)(fn,{onChange:function(d){return x(d,a)}}),o>0&&o!==100&&(0,e.jsx)(pt.Z,{percent:o,size:"small",showInfo:!1})]})]},a)})})}an.Preview=function(n){var t=n.value,r;return t&&(r=Object.values(t)[0][0]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("img",{src:"/api/files/".concat(r)})})},(0,B.RM)("Signature",an,"antd");var rn=g(27049);function ln(n){var t=(0,w.AK)("-body-question");return(0,e.jsx)("div",{className:t,children:(0,e.jsx)(rn.Z,{plain:!0})})}ln.Preview=function(n){return(0,e.jsx)("div",{children:"hello world"})},(0,B.RM)("SplitLine",ln,"antd");function wt(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=(0,w.AK)("-body-question");function o(l,x){i[l]=x,x===""&&delete i[l],r((0,y.Z)({},i))}return(0,e.jsx)("div",{children:f==null?void 0:f.map(function(l){var x=l.id,s=l.attribute,a=l.title,c=(0,R.Ck)(s==null?void 0:s.autoSize,[2,4]);return(0,e.jsxs)(_.Z,{style:{marginBottom:10},"data-id":x,children:[a&&(0,e.jsx)(Y.Z,{className:m+"-option",span:4,children:l.title&&(0,e.jsx)("span",{className:m+"-option-title",children:l.title})},l.id),(0,e.jsx)(Y.Z,{span:12,children:(0,e.jsx)(H.Z.TextArea,{autoSize:{minRows:c[1],maxRows:c[2]},value:i[x]||"",onChange:function(d){return o(x,d.target.value)}})})]},x)})})}(0,B.RM)("Textarea",wt,"antd");var St=g(43347),Bt=we.Z.Dragger;function sn(n){var t=n.schema,r=n.onChange,u=n.value,i=n.readOnly,f=t.children,m=(0,w.Al)(),o=(0,p.useState)(),l=(0,E.Z)(o,2),x=l[0],s=l[1];(0,p.useEffect)(function(){var h=t.children[0].id,d=u&&u[h]||[];x==null&&d.length>0&&se.hi.loadFiles({ids:d}).then(function(v){s(v==null?void 0:v.map(function(C){return{name:C.originalName,uid:C.id,status:"done"}}))})},[u]);var a=function(){var h=(0,ke.Z)(Se().mark(function d(v){var C,j,Z,b;return Se().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:C=v.onSuccess,j=v.onError,Z=v.file,b=v.onProgress,m.onUpload&&m.onUpload({file:Z},function(M){b&&b({percent:M.loaded/M.total*100})}).then(function(M){if(M.success&&C&&C(M.data),!M.success&&j){var L=new Error("Some error");j({event:L})}});case 2:case"end":return S.stop()}},d)}));return function(v){return h.apply(this,arguments)}}(),c=function(d,v){if(s(d.fileList),(d.file.status==="removed"||d.file.status==="done")&&!d.fileList.find(function(j){return j.status!=="done"})){var C=d.fileList.filter(function(j){return j.status==="done"}).map(function(j){var Z;return((Z=j.response)===null||Z===void 0?void 0:Z.id)||j.uid});C.length===0?r(void 0):r((0,z.Z)({},v,C))}};return(0,e.jsx)("div",{children:f==null?void 0:f.map(function(h){var d=h.id,v=h.attribute,C=[];if(v){var j=v.maxFileCount,Z=v.maxFileSize,b=v.fileAccept;j&&C.push("\u6700\u591A\u4E0A\u4F20".concat(j,"\u4E2A")),Z&&C.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(Z,"M\u4EE5\u5185")),b&&C.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(b))}return(0,e.jsxs)(Bt,{multiple:!0,disabled:i,maxCount:(v==null?void 0:v.maxFileCount)||20,accept:v==null?void 0:v.fileAccept,beforeUpload:function(S){return v!=null&&v.maxFileSize&&S.size>v.maxFileSize*1024*1024?(He.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(v.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),we.Z.LIST_IGNORE):!0},customRequest:a,onChange:function(S){return c(S,d)},fileList:x,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(St.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:C.join(",")})]},d)})})}var Nt=function(t){var r=t.value,u=(0,p.useState)(),i=(0,E.Z)(u,2),f=i[0],m=i[1];return(0,p.useEffect)(function(){if(r){var o=Object.values(r).reduce(function(l,x){return l.push.apply(l,(0,Be.Z)(x)),l},[]);se.hi.loadFiles({ids:o}).then(function(l){m(l)})}},[r]),(0,e.jsx)("div",{className:"preview",children:f==null?void 0:f.map(function(o){return(0,e.jsx)("a",{onClick:function(){return se.hi.download("/api/files/".concat(o.id))},children:o.originalName},o.id)})})};sn.Preview=Nt,(0,B.RM)("Upload",sn,"antd");var Et=g(55686),Pt=Q.Z.Option;function un(n){var t=n.schema,r=n.onChange,u=n.value,i=u===void 0?{}:u,f=t.children,m=f===void 0?[]:f,o=m[0].id,l=(0,p.useState)([]),x=(0,E.Z)(l,2),s=x[0],a=x[1];function c(v){o&&r((0,z.Z)({},o,v))}var h=(0,se.zE)(function(v){se.hi.userSelect({name:v,selected:i[o]||[]}).then(function(C){C.success&&a(C.data)})},5),d=function(C){c(C?s.map(function(j){return j.userId}):void 0)};return(0,p.useEffect)(function(){var v;h(""),(v=t.children)===null||v===void 0||v.forEach(function(C){var j,Z=C.id;(j=C.attribute)!==null&&j!==void 0&&j.defaultChecked&&Object.keys(i).length===0&&r((0,z.Z)({},Z,!0))})},[]),(0,e.jsx)(_.Z,{children:(0,e.jsx)(Y.Z,{span:24,children:(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,filterOption:!1,mode:"multiple",onClear:function(){r(void 0)},value:i[o]||[],onSearch:h,showSearch:!0,onChange:c,dropdownRender:function(C){return(0,e.jsxs)("div",{children:[C,(0,e.jsx)(rn.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(ye.Z,{onChange:function(Z){d(Z.target.checked)},children:"\u5168\u9009"})})]})},children:s.map(function(v){return(0,e.jsx)(Pt,{value:v.userId,label:v.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Et.Z,{user:v,size:20})}),v.name," ",v.deptName&&"(".concat(v.deptName,")")]})},v.userId)})})})})}un.Preview=function(n){return(0,e.jsx)("div",{children:"hello world"})},(0,B.RM)("User",un,"antd");var Mt=function(t){return(0,e.jsx)(e.Fragment,{children:t.children})},At=Mt},55686:function(oe,G,g){"use strict";var E=g(11849),R=g(94233),N=g(51890),p=g(93224),U=g(89366),w=g(85893),B=function(W){var O=W.user,I=(0,p.Z)(W,["user"]);return!O||!O.avatar?(0,w.jsx)(N.C,(0,E.Z)({icon:(0,w.jsx)(U.Z,{}),size:I.size||"small"},I)):(0,w.jsx)(N.C,(0,E.Z)({src:"/api/public/preview/".concat(O.avatar),size:I.size||"small"},I))};G.Z=B},78210:function(oe,G,g){"use strict";var E=g(15020),R=g(85893),N=function(U){var w=U.html,B=w===void 0?"":w,e=U.replaceP,W=e===void 0?!0:e;return W?(0,R.jsx)(R.Fragment,{children:typeof B=="string"&&(0,E.ZP)(B.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,R.jsx)(R.Fragment,{children:typeof B=="string"&&(0,E.ZP)(B)})};G.Z=N},39017:function(oe,G,g){"use strict";g.d(G,{Rk:function(){return O}});var E=g(67294),R=g(24004);function N(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",A=useContext(SurveyContext),T=A.theme;return"survey-".concat(T)+I}function p(I,A){var T=(A&&A.depends||[]).reduce(function(D,H){return D||!H},!1);return U(T?void 0:function(D,H){return fetch(D,H).then(function(y){if(!!y.ok)return y.json()})},I,A||{})}function U(I){for(var A=arguments.length,T=new Array(A>1?A-1:0),D=1;D<A;D++)T[D-1]=arguments[D];var H=useState(0),y=_slicedToArray(H,2),ie=y[0],le=y[1],V=useCallback(function(){le(Math.random())},[]),J=useState({loading:!1,mutate:V}),xe=_slicedToArray(J,2),de=xe[0],ve=xe[1];return useEffect(function(){!I||T[1].manual&&ie===0||I.apply(null,T).then(function(Q){Q.code===200?ve({loading:!1,data:Q.data,mutate:V}):ve({error:Q.message,loading:!1,mutate:V})}).catch(function(Q){ve({error:Q,loading:!1,mutate:V})})},w(ie,T)),de}function w(){for(var I=arguments.length,A=new Array(I),T=0;T<I;T++)A[T]=arguments[T];for(var D=[],H=0;H<arguments.length;H++){var y=arguments[H];if(y instanceof Array)for(var ie=0;ie<y.length;ie++)D=D.concat(w(y[ie]));else if(typeof URL!="undefined"&&y instanceof URL)D=D.concat(y.toJSON());else if(y instanceof Object)for(var le=Object.keys(y),V=0;V<le.length;V++){var J=le[V];J==="depends"?D=D.concat(y[J]):D=D.concat([J]).concat(w(y[J]))}else D=D.concat(y)}return D}var B=g(87998);function e(){return useContext(SurveyContext)}function W(){return useSurvey().attachments}function O(){var I=(0,E.useContext)(B.ZX);return I.innerStore}},49914:function(oe,G,g){"use strict";g.d(G,{H:function(){return N}});var E=g(67294),R=g(87998);function N(){return(0,E.useContext)(R.ff)}},65011:function(oe,G,g){"use strict";var E=g(38663),R=g.n(E),N=g(58136),p=g.n(N),U=g(43358)},27049:function(oe,G,g){"use strict";var E=g(22122),R=g(96156),N=g(67294),p=g(94184),U=g.n(p),w=g(53124),B=function(W,O){var I={};for(var A in W)Object.prototype.hasOwnProperty.call(W,A)&&O.indexOf(A)<0&&(I[A]=W[A]);if(W!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,A=Object.getOwnPropertySymbols(W);T<A.length;T++)O.indexOf(A[T])<0&&Object.prototype.propertyIsEnumerable.call(W,A[T])&&(I[A[T]]=W[A[T]]);return I},e=function(O){var I,A=N.useContext(w.E_),T=A.getPrefixCls,D=A.direction,H=O.prefixCls,y=O.type,ie=y===void 0?"horizontal":y,le=O.orientation,V=le===void 0?"center":le,J=O.orientationMargin,xe=O.className,de=O.children,ve=O.dashed,Q=O.plain,Ne=B(O,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),ee=T("divider",H),Ee=V.length>0?"-".concat(V):V,je=!!de,he=V==="left"&&J!=null,Pe=V==="right"&&J!=null,Ce=U()(ee,"".concat(ee,"-").concat(ie),(I={},(0,R.Z)(I,"".concat(ee,"-with-text"),je),(0,R.Z)(I,"".concat(ee,"-with-text").concat(Ee),je),(0,R.Z)(I,"".concat(ee,"-dashed"),!!ve),(0,R.Z)(I,"".concat(ee,"-plain"),!!Q),(0,R.Z)(I,"".concat(ee,"-rtl"),D==="rtl"),(0,R.Z)(I,"".concat(ee,"-no-default-orientation-margin-left"),he),(0,R.Z)(I,"".concat(ee,"-no-default-orientation-margin-right"),Pe),I),xe),Me=(0,E.Z)((0,E.Z)({},he&&{marginLeft:J}),Pe&&{marginRight:J});return N.createElement("div",(0,E.Z)({className:Ce},Ne,{role:"separator"}),de&&N.createElement("span",{className:"".concat(ee,"-inner-text"),style:Me},de))};G.Z=e},48736:function(oe,G,g){"use strict";var E=g(38663),R=g.n(E),N=g(68179),p=g.n(N)}}]);
