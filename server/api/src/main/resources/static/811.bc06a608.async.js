(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[811],{1997:function(Je,de,i){"use strict";i.d(de,{ML:function(){return Re},tC:function(){return Ae},sJ:function(){return De},ZP:function(){return ut}});var qe=i(71194),v=i(50146),oe=i(57663),ee=i(71577),T=i(49111),I=i(19650),ae=i(77576),te=i(12028),Y=i(22385),W=i(94199),_e=i(402),ye=i(97272),L=i(67294),et=i(94184),N=i.n(et),C=i(94657),Le=i(29656),tt=i(63138),re=i(88386),r=i(85893),Me=(0,L.forwardRef)(function(f,u){var p=f.value,b=f.readOnly,g=f.placeholder,x=(0,L.useState)(),A=(0,C.Z)(x,2),B=A[0],q=A[1];(0,L.useEffect)(function(){B&&B.focus()},[B]),(0,L.useImperativeHandle)(u,function(){return{getValue:function(){return B.getValue()},focus:function(){B.focus()},getDoc:function(){return B.getDoc()}}});var w=(0,L.useMemo)(function(){return{mode:"text/x-spreadsheet",line:!0,lineWrapping:!0,readOnly:b,placeholder:g}},[b]),H=function(E,k,F,O,m){var M=E.getDoc(),D=document.createElement("span");D.innerText=O.title||O.path,D.className="formula-tag ".concat(m||"formula-tag-value"),M.markText(k,F,{replacedWith:D})},X=function R(E,k,F){var O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];(O||[]).forEach(function(m){for(var M="#{".concat(m.path,"}"),D=new RegExp(M,"g");D.exec(k)!==null;){var ce={line:F,ch:D.lastIndex-M.length},ge={line:F,ch:D.lastIndex};H(E,ce,ge,m)}for(M="#{_".concat(m.path,"}"),D=new RegExp(M,"g");D.exec(k)!==null;){var c={line:F,ch:D.lastIndex-M.length},o={line:F,ch:D.lastIndex};H(E,c,o,m,"formula-tag-text")}m.children&&m.children.length>0&&R(E,k,F,m.children)})},V=function(E,k){var F=k.split(`
`);F.forEach(function(O,m){return X(E,O,m,f.variable)})},K=function(E,k){q(E),p!=null&&p!==""&&V(E,k)},J=function(E,k,F){(F!=null||F!=="")&&V(E,F),f.onChange&&f.onChange(F)};return(0,r.jsx)("div",{className:N()("formula-editor-content",{readOnly:b}),children:(0,r.jsx)(Le.Rt,{autoCursor:!1,value:p,options:w,editorDidMount:K,onChange:J})})}),Re=Me,nt=i(47673),lt=i(4107),Ce=i(83279),it=i(18106),Ee=i(51752),Q=i(20136),Oe=i(55241),ot=i(7359),Fe=i(7964),Ue=Fe.Z.Panel,fe=ye.Z.Link;function je(f,u,p){if(f.popover){var b,g;return(0,r.jsx)(Oe.Z,{content:(0,r.jsxs)("div",{className:"fn-popover-content",children:[(0,r.jsxs)("div",{className:"fn-popover-content-header",children:["\u516C\u5F0F\u7B80\u4ECB",(0,r.jsx)(fe,{href:f.popover.docHref,target:"_blank",children:"\u6587\u6863"})]}),(b=f.popover)===null||b===void 0?void 0:b.content]}),title:(g=f.popover)===null||g===void 0?void 0:g.title,placement:"right",className:"fn-popover",children:(0,r.jsxs)("div",{className:"function-item",onClick:function(){return p&&p(f.name)},children:[(0,r.jsx)("div",{className:"function-item__name",children:f.name}),(0,r.jsx)("div",{className:"function-item__desc",children:f.description})]})},u)}return(0,r.jsxs)("div",{className:"function-item",onClick:function(){return p&&p(f.name)},children:[(0,r.jsx)("div",{className:"function-item__name",children:f.name}),(0,r.jsx)("div",{className:"function-item__desc",children:f.description})]},u)}var Ie=function(u){var p=u.dataSource,b=p===void 0?[]:p,g=u.check,x="function-store";return(0,r.jsx)(Fe.Z,{className:x,bordered:!1,defaultActiveKey:[0],expandIconPosition:"right",ghost:!0,children:b.map(function(A,B){return(0,r.jsx)(Ue,{className:"".concat(x,"-group"),header:A.name,children:A.functions.map(function(q,w){return je(q,w,g)})},B)})})},we=Ie,ue=i(11849),Pe=function(f){return(0,r.jsx)("svg",(0,ue.Z)((0,ue.Z)({width:"1em",height:"1.2em",viewBox:"0 0 24 24"},f),{},{children:(0,r.jsx)("path",{d:"M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 0 1 2 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3c.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 0 1 4.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41l-2.83 2.83l-2.83-2.83l-1.43 1.41l2.85 2.85l-2.85 2.81l1.43 1.41l2.83-2.83l2.83 2.83L22 19.31l-2.83-2.81L22 13.65z",fill:"currentColor"})}))},ke=function(f){return(0,r.jsx)("svg",(0,ue.Z)((0,ue.Z)({width:"1em",height:"1em",viewBox:"0 0 16 16"},f),{},{children:(0,r.jsx)("g",{fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5h2V4H1.5l-.5.5v8l.5.5H4v-1H2V5zm12.5-1H12v1h2v7h-2v1h2.5l.5-.5v-8l-.5-.5zm-2.74 2.57L12 7v2.51l-.3.45l-4.5 2h-.46l-2.5-1.5l-.24-.43v-2.5l.3-.46l4.5-2h.46l2.5 1.5zM5 9.71l1.5.9V9.28L5 8.38v1.33zm.58-2.15l1.45.87l3.39-1.5l-1.45-.87l-3.39 1.5zm1.95 3.17l3.5-1.56v-1.4l-3.5 1.55v1.41z"})})}))},at=i(32157),Ve=i(32138),he=i(57254),_=function(u){var p=u.id,b=u.type,g=u.title,x=u.pick,A=(0,L.useMemo)(function(){return b==="SplitLine"},[]);return(0,r.jsx)("div",{className:N()("field-variable",{disabled:A}),onClick:function(){x&&x()},children:g})},ne=_;function le(f,u){return{title:(0,r.jsx)(ne,{type:f.type,id:f.id,title:f.title,pick:function(){return u&&u(f)}}),key:f.id,children:(f.children||[]).map(function(p){return le(p,u)})}}var Qe=function(u){var p=u.dataSource,b=u.pick,g=(0,L.useMemo)(function(){return p.map(function(x){return le(x,b)})},[b]);return(0,r.jsx)(Ve.Z,{blockNode:!0,defaultExpandAll:!0,showLine:{showLeafIcon:!1},switcherIcon:(0,r.jsx)(he.Z,{}),className:"hide-file-icon",treeData:g,selectable:!1})},Se=Qe,pe=i(76570),rt=i(54421),be=i(38272),He=function(u){var p=u.check,b=u.dataSource;return(0,r.jsx)(be.ZP,{bordered:!1,dataSource:b,className:"function-store-group",renderItem:function(x){return(0,r.jsx)(be.ZP.Item,{children:je(x,x.name,p)})}})},ie=He,ve=Ee.Z.TabPane,Be=function(u){var p=u.variables,b=p===void 0?[]:p,g=u.insertFun,x=u.insertVariable,A=u.functionVisible,B=A===void 0?!0:A,q=u.helperVariables,w="formula-editor-toolbar",H=(0,L.useState)([]),X=(0,C.Z)(H,2),V=X[0],K=X[1],J=(0,L.useCallback)(function(E){return(0,r.jsxs)("span",{children:[E.icon?(0,r.jsx)("span",{role:"img",className:"anticon",children:E.icon}):null,E.name]})},[]),R=function(k){var F;if(!k){K([]);return}var O=new Set;K(((F=u.functions)===null||F===void 0?void 0:F.reduce(function(m,M){return m.push.apply(m,(0,Ce.Z)(M.functions.filter(function(D){return D.name.includes(k.toUpperCase())}))),m},[]).filter(function(m){return O.has(m.name)?!1:(O.add(m.name),!0)}))||[])};return(0,r.jsx)("div",{className:w,children:(0,r.jsxs)(Ee.Z,{defaultActiveKey:"field",centered:B,children:[(0,r.jsx)(ve,{tab:(0,r.jsx)(J,{name:"\u95EE\u9898",icon:(0,r.jsx)(ke,{})}),children:(0,r.jsx)("div",{children:(0,r.jsx)(Se,{dataSource:b,pick:x})})},"field"),q&&(0,r.jsx)(ve,{tab:(0,r.jsx)(J,{name:"\u547D\u540D\u53D8\u91CF",icon:(0,r.jsx)(ke,{})}),children:(0,r.jsx)("div",{children:(0,r.jsx)(Se,{dataSource:q,pick:x})})},"helperFiled"),B&&(0,r.jsxs)(ve,{tab:(0,r.jsx)(J,{name:"\u51FD\u6570",icon:(0,r.jsx)(Pe,{})}),children:[(0,r.jsx)(lt.Z,{placeholder:"\u641C\u7D22\u516C\u5F0F",prefix:(0,r.jsx)(pe.Z,{}),allowClear:!0,onChange:function(k){return R(k.target.value)}}),V.length>0&&(0,r.jsx)(ie,{dataSource:V,check:g}),V.length===0&&(0,r.jsx)(we,{dataSource:u.functions,check:g})]},"fx")]})})};function me(f){for(var u=arguments.length,p=new Array(u>1?u-1:0),b=1;b<u;b++)p[b-1]=arguments[b];return(0,r.jsxs)("div",{className:"fn-popover-title",children:[f,"(",p.map(function(g,x){return(0,r.jsxs)("span",{className:"fn-popover-arg",children:[g," ",x===p.length-1?"":","]},x)}),")"]})}var Ze="https://support.microsoft.com/zh-cn/office/",xe=[{name:"\u903B\u8F91",functions:[{name:"IF",description:"\u6839\u636E\u5224\u65AD\u6761\u4EF6\uFF0C\u8FD4\u56DE\u6B63\u786E\u6216\u9519\u8BEF\u7684\u503C"},{name:"AND",description:"\u8FD4\u56DE\u903B\u8F91\u503C\uFF1A\u5982\u679C\u6240\u6709\u53C2\u6570\u503C\u5747\u4E3A\u903B\u8F91\u201Ctrue\u201D\uFF0C\u5219\u8FD4\u56DE\u903B\u8F91\u201Ctrue\u201D\uFF0C\u53CD\u4E4B\u8FD4\u56DE\u903B\u8F91\u201Cfalse",popover:{title:me("AND","logical1","logical2","..."),content:(0,r.jsxs)("div",{className:"fn-popover-content",children:["\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Afalse\uFF0C\u5373\u8FD4\u56DE false\uFF1B",(0,r.jsx)("br",{})," \u53EA\u6709\u5F53\u6240\u6709\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u624D\u8FD4\u56DE true\u3002",(0,r.jsx)("br",{}),"logical:\u903B\u8F91\u503C\uFF0C\u4F8B\u5982\uFF0C2>1\u7684\u903B\u8F91\u503C\u4E3A true"]})}},{name:"OR",description:"\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u5373\u8FD4\u56DEtrue\uFF1B\u53EA\u6709\u5F53\u6240\u6709\u903B\u8F91\u53C2\u6570\u503C\u4E3Afalse\uFF0C\u624D\u8FD4\u56DEfalse"},{name:"XOR",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u6570\u7684\u5F02\u6216\u503C"},{name:"NOT",description:"\u5BF9\u53C2\u6570\u903B\u8F91\u503C\u6C42\u53CD"}]},{name:"\u6587\u5B57",functions:[{name:"SUBSTITUTE",description:"\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text",popover:{title:me("SUBSTITUTE","old_text","new_text","[instance_num]"),content:(0,r.jsxs)("div",{className:"fn-popover-content",children:["\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text\u3002",(0,r.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u6307\u5B9A\u7684\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 SUBSTITUTE\uFF1B",(0,r.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u7279\u5B9A\u4F4D\u7F6E\u5904\u7684\u4EFB\u610F\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 REPLACE\u3002"]}),docHref:"".concat(Ze,"substitute-\u51FD\u6570-6434944e-a904-4336-a9b0-1e58df3bc332")}},{name:"CONCATENATE",description:"\u5C06\u591A\u4E2A\u6587\u5B57\u5408\u5E76"},{name:"LEFT",description:"\u4ECE\u5DE6\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"RIGHT",description:"\u4ECE\u53F3\u8FB9\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"MID",description:"\u622A\u53D6\u6307\u5B9A\u4F4D\u7F6E\u7684\u6587\u5B57"},{name:"REPLACE",description:"\u66FF\u6362\u6587\u672C\u4E2D\u7684\u6307\u5B9A\u6587\u5B57",popover:{title:me("REPLACE","old_text","start_num","num_chars","new_text"),content:(0,r.jsxs)("div",{className:"fn-popover-content",children:["\u6839\u636E\u6307\u5B9A\u7684\u5B57\u7B26\u6570\uFF0CREPLACE \u5C06\u90E8\u5206\u6587\u672C\u5B57\u7B26\u4E32\u66FF\u6362\u4E3A\u4E0D\u540C\u7684\u6587\u672C\u5B57\u7B26\u4E32\u3002",(0,r.jsx)("br",{}),"REPLACEB \u4F7F\u7528\u5176\u4ED6\u6587\u672C\u5B57\u7B26\u4E32\u5E76\u6839\u636E\u6240\u6307\u5B9A\u7684\u5B57\u8282\u6570\u66FF\u6362\u67D0\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7684\u90E8\u5206\u6587\u672C\u3002"]}),docHref:"".concat(Ze,"replace-replaceb-\u51FD\u6570-8d799074-2425-4a8a-84bc-82472868878a")}},{name:"TRIM",description:"\u79FB\u9664\u6587\u5B57\u5934\u5C3E\u7684\u7A7A\u683C"},{name:"LEN",description:"\u540E\u53BB\u6587\u5B57\u7684\u957F\u5EA6"},{name:"LOWER",description:"\u8F6C\u6210\u5C0F\u5199\u6587\u5B57"},{name:"UPPER",description:"\u8F6C\u6210\u5927\u5199\u6587\u5B57"}]},{name:"\u6570\u5B57",functions:[{name:"AVERAGE",description:"\u8BA1\u7B97\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u7684\u5E73\u5747\u503C"},{name:"COUNT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u6570\u5B57\u7684\u6570\u91CF"},{name:"COUNTA",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u4E0D\u4E3A\u7A7A\u7684\u6570\u91CF"},{name:"COUNTIF",description:"COUNTIF(\u8868\u683C[\u91D1\u989D], 100)\uFF0C\u53EF\u5F97\u5230\u8868\u683C\u4E2D\u91D1\u989D\u4E3A100\u7684\u6570\u636E\u6761\u6570"},{name:"MAX",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5927\u503C"},{name:"MIN",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5C0F\u503C"},{name:"ROUND",description:"\u5C06\u6570\u5B57\u56DB\u820D\u4E94\u5165\u5230\u6307\u5B9A\u7684\u4F4D\u6570"},{name:"INT",description:"\u5C06\u6570\u5B57\u5411\u4E0B\u53D6\u6574"},{name:"MOD",description:"\u8FD4\u56DE\u4E24\u6570\u76F8\u9664\u7684\u4F59\u6570"},{name:"PRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u4E58\u79EF"},{name:"SUM",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMPRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMIF",description:"\u7EDF\u8BA1\u8868\u683C\u4E2D\u7B26\u5408\u6761\u4EF6\u7684\u6570\u503C\uFF0C\u5E76\u6C42\u548C"},{name:"ROUNDUP",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0A\u53D6"},{name:"ROUNDDOWN",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0B\u53D6"},{name:"POWER",description:"\u8BA1\u7B97\u6570\u5B57num\u7684n\u6B21\u65B9\uFF0Cn\u53EF\u4EE5\u4E3A\u5206\u6570\u6216\u8005\u6574\u6570"},{name:"LN",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u81EA\u7136\u5BF9\u6570"},{name:"SQRT",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u5E73\u65B9\u6839"}]},{name:"\u65F6\u95F4",functions:[{name:"YEAR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5E74\u4EFD"},{name:"MONTH",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u6708\u4EFD"},{name:"DAY",description:"\u8FD4\u56DE\u65E5\u671F\u5728\u4E00\u4E2A\u6708\u4E2D\u7684\u7B2C\u51E0\u5929\u7684\u6570\u503C"},{name:"HOUR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5C0F\u65F6\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"MINUTE",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5206\u949F\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"SECOND",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u79D2\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"DATE",description:"\u5C06\u6570\u5B57\u62FC\u63A5\u6210\u4E3A\u5E74\u4EFD\uFF0C\u6570\u5B57\u5B57\u6BB5\u987A\u5E8F\u4E3A\uFF1A\u5E74\uFF0F\u6708\uFF0F\u65E5\uFF0F\u65F6\uFF0F\u5206\uFF0F\u79D2"},{name:"CURDATE",description:"\u8FD4\u56DE\u5F53\u524D\u65E5\u671F"},{name:"NOW",description:"\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4\uFF0C\u7CBE\u786E\u5230\u65F6/\u5206/\u79D2"},{name:"DAYS",description:"\u8FD4\u56DE\u65E5\u671F\u5B57\u6BB51\u4E0E\u65E5\u671F\u5B57\u6BB52\u7684\u5DEE\u503C\uFF0C\u5355\u4F4D\u4E3A\u5929"},{name:"DATEDELTA",description:"\u5C06\u6307\u5B9A\u65E5\u671F\u52A0/\u51CF\u6307\u5B9A\u5929\u6570\uFF0C\u5E76\u8FD4\u56DE\u76EE\u6807\u65E5\u671F"}]}];function se(f){if(f){var u=xe.map(function(b){return b.functions}).reduce(function(b,g){return b.concat(g)},[]),p=f.map(function(b){return u.find(function(g){return g.name===b})});return[{name:"\u5E38\u7528",functions:p}].concat(xe)}return xe}var Ne=i(76826);function We(f){return!!(f==="SplitLine"||f==="Pagination"||f==="Remark"||f==="Signature"||f==="Upload"||f&&f.startsWith("Matrix"))}function Xe(f){return!!["Dept","FillBlank","User","Score","Nps","Textarea"].includes(f)}var l=function f(u){var p;(p=u.children)===null||p===void 0||p.forEach(function(b){b.parent=u,f(b)})},De=function f(u,p,b,g,x){var A;if(!u)return[];var B=!1;return((A=u.children)===null||A===void 0?void 0:A.filter(function(q){return q===p&&!b?(B=!0,!1):g&&!g.includes(q.type)?!1:!We(q.type)&&!B?!0:((q.type==="Option"||q.type===void 0)&&x===!1,!1)}).map(function(q){var w=q.id,H=q.title,X=q.type,V=q.type===void 0?"".concat(u==null?void 0:u.id,".").concat(w):w;return Xe(q.type)?{id:w,path:V,title:(0,Ne.WO)(H),type:X}:{id:w,path:V,title:(0,Ne.WO)(H),type:X,children:f(q,p,b,g,x)}}))||[]},Ye=i(1870),$e=ye.Z.Link,Ae=function(u){var p=u.title,b=u.subTitle,g=u.helpLink,x=u.onOk,A=u.value,B=u.className,q=u.onCancel,w=u.fieldAll,H=u.visible,X=H===void 0?!0:H,V=u.schema,K=u.current,J=u.functions,R=u.functionVisible,E=u.fieldTypes,k=u.helperVariables,F=u.optionVisible,O=F===void 0?!0:F,m=(0,L.useRef)(null),M="formula-editor",D=(0,L.useRef)(""),ce=(0,L.useCallback)(function(o){if(m.current!=null){var t=m.current.getDoc(),e=t.getCursor();t.replaceRange("".concat(o,"()"),e),e.ch+=o.length+1,t.setCursor(e),m.current.focus()}},[]),ge=(0,L.useCallback)(function(o){if(m.current!=null){var t=m.current.getDoc(),e=t.getCursor();t.replaceRange("#{".concat(D.current).concat(o.path,"}"),e,e),m.current.focus()}},[]),c=(0,L.useMemo)(function(){return De(V,K,w,E,O)},[V,K,w,E]);return(0,r.jsx)(v.Z,{onCancel:q,visible:X,maskClosable:!1,getContainer:u.getContainer,title:p,width:1e3,footer:!1,onOk:function(t){t.stopPropagation(),x(m.current.getValue())},keyboard:!1,children:(0,r.jsxs)("div",{className:N()(M,B),children:[(0,r.jsx)(Be,{functionVisible:R,functions:J||se(u.commonUseFunctionNames),variables:c,helperVariables:k,insertFun:ce,insertVariable:ge}),(0,r.jsxs)("div",{className:"".concat(M,"-main"),children:[(0,r.jsxs)("div",{className:"".concat(M,"-main__code"),children:[(0,r.jsxs)("h1",{children:[(0,r.jsxs)("span",{className:"equle",children:[b,"="]}),(0,r.jsxs)("span",{style:{float:"right"},children:[(0,r.jsx)(W.Z,{title:"\u903B\u8F91\u8868\u793A\u4F7F\u7528\u5177\u4F53\u503C\u53C2\u4E0E\u903B\u8F91\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u4E3A true;\u6587\u672C\u8868\u793A\u4F7F\u7528\u6807\u9898\u53C2\u4E0E\u6587\u672C\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u9009\u9879\u7684\u6587\u672C\u3002",children:(0,r.jsx)(Ye.Z,{style:{fontSize:16,marginRight:10}})}),(0,r.jsx)(te.Z,{checkedChildren:"\u903B\u8F91",defaultChecked:!0,unCheckedChildren:"\u6587\u672C",onChange:function(t){t?D.current="":D.current="_"}})]})]}),(0,r.jsx)("div",{style:{fontSize:14,color:"#b0b0b9"},children:"\u5728\u5DE6\u4FA7\u9009\u62E9\u51FD\u6570\u6216\u5B57\u6BB5\u53D8\u91CF\uFF0C\u4E14\u5728\u82F1\u6587\u8F93\u5165\u6CD5\u4E0B\u7F16\u8F91"})]}),(0,r.jsx)("div",{className:"".concat(M,"-main__panel"),children:(0,r.jsx)(Re,{ref:m,variable:c.concat(k||[]),value:A})}),(0,r.jsxs)("div",{className:"".concat(M,"-main__footer"),children:[(0,r.jsxs)(I.Z,{children:[(0,r.jsx)("span",{children:g}),R&&(0,r.jsx)($e,{href:"https://support.microsoft.com/zh-cn/office/excel-%E5%87%BD%E6%95%B0-%E6%8C%89%E7%B1%BB%E5%88%AB%E5%88%97%E5%87%BA-5f91f4e9-7b42-46d2-9bd1-63f26a86c0eb",target:"_blank",children:"\u516C\u5F0F\u6587\u6863"})]}),(0,r.jsxs)(I.Z,{children:[(0,r.jsx)(ee.Z,{onClick:function(){q&&q()},children:"\u53D6\u6D88"}),(0,r.jsx)(ee.Z,{type:"primary",onClick:function(t){t.stopPropagation(),x(m.current.getValue())},children:"\u786E\u5B9A"})]})]})]})]})})},ut=Ae},70811:function(Je,de,i){"use strict";i.d(de,{cM:function(){return B},Bn:function(){return ce},ZP:function(){return ge}});var qe=i(22385),v=i(94199),oe=i(94657),ee=i(20310),T=i(69610),I=i(54941),ae=i(63543),te=i(94663),Y=i(43028),W=i(5869),_e=i(94184),ye=i.n(_e),L=i(28579),et=i(44823),N=i(67294),C=i(71167),Le=i.n(C),tt=i(81067),re=i(11849),r=i(71194),Me=i(50146),Re=i(49111),nt=i(19650),lt=i(57663),Ce=i(71577),it=i(93224),Ee=i(76095),Q=i.n(Ee),Oe=function(){function c(o,t){(0,T.Z)(this,c),this.quill=o,this.options=t,this.container=document.querySelector(t.container),o.on("text-change",this.update.bind(this)),this.update()}return(0,I.Z)(c,[{key:"calculate",value:function(){var t=this.quill.getText();return this.options.unit==="word"?(t=t.trim(),t.length>0?t.split(/\s+/).length:0):t.length}},{key:"update",value:function(){var t=this.calculate(),e=this.options.unit;t!==1&&(e+="s")}}]),c}();C.Quill.register("modules/counter",Oe);var ot=i(66913),Fe=i.n(ot),Ue={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}},fe=function c(o){(0,T.Z)(this,c),this.onCreate=function(){},this.onDestroy=function(){},this.onUpdate=function(){},this.overlay=o.overlay,this.img=o.img,this.options=o.options,this.requestUpdate=o.onUpdate},je=function(c){(0,Y.Z)(t,c);var o=(0,W.Z)(t);function t(){var e;(0,T.Z)(this,t);for(var a=arguments.length,n=new Array(a),d=0;d<a;d++)n[d]=arguments[d];return e=o.call.apply(o,[this].concat(n)),e.onCreate=function(){e.display=document.createElement("div"),Object.assign(e.display.style,e.options.displayStyles),e.overlay.appendChild(e.display)},e.onDestroy=function(){},e.onUpdate=function(){if(!(!e.display||!e.img)){var s=e.getCurrentSize();if(e.display.innerHTML=s.join(" &times; "),s[0]>120&&s[1]>30)Object.assign(e.display.style,{right:"4px",bottom:"4px",left:"auto"});else if(e.img.style.float=="right"){var h=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"auto",bottom:"-".concat(h.height+4,"px"),left:"-".concat(h.width+4,"px")})}else{var j=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"-".concat(j.width+4,"px"),bottom:"-".concat(j.height+4,"px"),left:"auto"})}}},e.getCurrentSize=function(){return[e.img.width,Math.round(e.img.width/e.img.naturalWidth*e.img.naturalHeight)]},e}return t}(fe),Ie=i(20668),we=i.n(Ie),ue=i(15924),Pe=i.n(ue),ke=i(43203),at=i.n(ke),Ve=i(76095),he=Ve.imports.parchment,_=new he.Attributor.Style("float","float"),ne=new he.Attributor.Style("margin","margin"),le=new he.Attributor.Style("display","display"),Qe=function(c){(0,Y.Z)(t,c);var o=(0,W.Z)(t);function t(){var e;(0,T.Z)(this,t);for(var a=arguments.length,n=new Array(a),d=0;d<a;d++)n[d]=arguments[d];return e=o.call.apply(o,[this].concat(n)),e.onCreate=function(){e.toolbar=document.createElement("div"),Object.assign(e.toolbar.style,e.options.toolbarStyles),e.overlay.appendChild(e.toolbar),e._defineAlignments(),e._addToolbarButtons()},e.onDestroy=function(){},e.onUpdate=function(){},e._defineAlignments=function(){e.alignments=[{icon:we(),apply:function(){le.add(e.img,"inline"),_.add(e.img,"left"),ne.add(e.img,"0 1em 1em 0")},isApplied:function(){return _.value(e.img)=="left"}},{icon:Pe(),apply:function(){le.add(e.img,"block"),_.remove(e.img),ne.add(e.img,"auto")},isApplied:function(){return ne.value(e.img)=="auto"}},{icon:at(),apply:function(){le.add(e.img,"inline"),_.add(e.img,"right"),ne.add(e.img,"0 0 1em 1em")},isApplied:function(){return _.value(e.img)=="right"}}]},e._addToolbarButtons=function(){var s=[];e.alignments.forEach(function(h,j){var y=document.createElement("span");s.push(y),y.innerHTML=h.icon,y.addEventListener("click",function(){s.forEach(function(S){return S.style.filter=""}),h.isApplied()?(_.remove(e.img),ne.remove(e.img),le.remove(e.img)):(e._selectButton(y),h.apply()),e.requestUpdate()}),Object.assign(y.style,e.options.toolbarButtonStyles),j>0&&(y.style.borderLeftWidth="0"),Object.assign(y.children[0].style,e.options.toolbarButtonSvgStyles),h.isApplied()&&e._selectButton(y),e.toolbar.appendChild(y)})},e._selectButton=function(s){s.style.filter="invert(20%)"},e}return t}(fe),Se=function(c){(0,Y.Z)(t,c);var o=(0,W.Z)(t);function t(){var e;(0,T.Z)(this,t);for(var a=arguments.length,n=new Array(a),d=0;d<a;d++)n[d]=arguments[d];return e=o.call.apply(o,[this].concat(n)),e.onCreate=function(){e.boxes=[],e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.positionBoxes()},e.onDestroy=function(){e.setCursor("")},e.positionBoxes=function(){var s="".concat(-parseFloat(e.options.handleStyles.width)/2,"px"),h="".concat(-parseFloat(e.options.handleStyles.height)/2,"px");[{left:s,top:h},{right:s,top:h},{right:s,bottom:h},{left:s,bottom:h}].forEach(function(j,y){Object.assign(e.boxes[y].style,j)})},e.addBox=function(s){var h=document.createElement("div");Object.assign(h.style,e.options.handleStyles),h.style.cursor=s,h.style.width="".concat(e.options.handleStyles.width,"px"),h.style.height="".concat(e.options.handleStyles.height,"px"),h.addEventListener("mousedown",e.handleMousedown,!1),e.overlay.appendChild(h),e.boxes.push(h)},e.handleMousedown=function(s){e.dragBox=s.target,e.dragStartX=s.clientX,e.preDragWidth=e.img.width||e.img.naturalWidth,e.setCursor(e.dragBox.style.cursor),document.addEventListener("mousemove",e.handleDrag,!1),document.addEventListener("mouseup",e.handleMouseup,!1)},e.handleMouseup=function(){e.setCursor(""),document.removeEventListener("mousemove",e.handleDrag),document.removeEventListener("mouseup",e.handleMouseup)},e.handleDrag=function(s){if(!!e.img){var h=s.clientX-e.dragStartX;e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]?e.img.width=Math.round(e.preDragWidth-h):e.img.width=Math.round(e.preDragWidth+h),e.requestUpdate()}},e.setCursor=function(s){[document.body,e.img].forEach(function(h){h.style.cursor=s})},e}return t}(fe),pe=i(76095),rt={DisplaySize:je,Toolbar:Qe,Resize:Se},be=function c(o){var t=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,T.Z)(this,c),this.initializeModules=function(){t.removeModules(),t.modules=t.moduleClasses.map(function(n){return new(rt[n]||n)(t)}),t.modules.forEach(function(n){n.onCreate()}),t.onUpdate()},this.onUpdate=function(){t.repositionElements(),t.modules.forEach(function(n){n.onUpdate()})},this.removeModules=function(){t.modules.forEach(function(n){n.onDestroy()}),t.modules=[]},this.handleClick=function(n){if(n.target&&n.target.tagName&&n.target.tagName.toUpperCase()==="IMG"){if(t.img===n.target)return;t.img&&t.hide(),t.show(n.target)}else t.img&&t.hide()},this.show=function(n){t.img=n,t.showOverlay(),t.initializeModules()},this.showOverlay=function(){t.overlay&&t.hideOverlay(),t.quill.setSelection(null),t.setUserSelect("none"),document.addEventListener("keyup",t.checkImage,!0),t.quill.root.addEventListener("input",t.checkImage,!0),t.overlay=document.createElement("div"),Object.assign(t.overlay.style,t.options.overlayStyles),t.quill.root.parentNode.appendChild(t.overlay),t.repositionElements()},this.hideOverlay=function(){!t.overlay||(t.quill.root.parentNode.removeChild(t.overlay),t.overlay=void 0,document.removeEventListener("keyup",t.checkImage),t.quill.root.removeEventListener("input",t.checkImage),t.setUserSelect(""))},this.repositionElements=function(){if(!(!t.overlay||!t.img)){var n=t.quill.root.parentNode,d=t.img.getBoundingClientRect(),s=n.getBoundingClientRect();Object.assign(t.overlay.style,{left:"".concat(d.left-s.left-1+n.scrollLeft,"px"),top:"".concat(d.top-s.top+n.scrollTop,"px"),width:"".concat(d.width,"px"),height:"".concat(d.height,"px")})}},this.hide=function(){t.hideOverlay(),t.removeModules(),t.img=void 0},this.setUserSelect=function(n){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(function(d){t.quill.root.style[d]=n,document.documentElement.style[d]=n})},this.checkImage=function(n){t.img&&((n.keyCode==46||n.keyCode==8)&&pe.find(t.img).deleteAt(0),t.hide())},this.quill=o;var a=!1;e.modules&&(a=e.modules.slice()),this.options=Fe()({},e,Ue),a!==!1&&(this.options.modules=a),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]};pe&&pe.register("modules/imageResize",be);var He=Q().import("blots/block"),ie=function(c){(0,Y.Z)(t,c);var o=(0,W.Z)(t);function t(){return(0,T.Z)(this,t),o.apply(this,arguments)}return(0,I.Z)(t,[{key:"deleteAt",value:function(a,n){(0,ae.Z)((0,te.Z)(t.prototype),"deleteAt",this).call(this,a,n),this.cache={}}}],[{key:"create",value:function(a){var n=(0,ae.Z)((0,te.Z)(t),"create",this).call(this,a);if(a===!0)return n;var d=document.createElement("img");return d.setAttribute("src",a),n.appendChild(d),n}},{key:"value",value:function(a){var n=a.dataset,d=n.src,s=n.custom;return{src:d,custom:s}}}]),t}(He);ie.blotName="imageBlot",ie.className="image-uploading",ie.tagName="span",Q().register({"formats/imageBlot":ie});var ve=ie,Be=function(){function c(o,t){(0,T.Z)(this,c),this.quill=o,this.options=t,this.range=null,typeof this.options.upload!="function"&&console.warn("[Missing config] upload function that returns a promise is required");var e=this.quill.getModule("toolbar");e.addHandler("image",this.selectLocalImage.bind(this)),this.handleDrop=this.handleDrop.bind(this),this.handlePaste=this.handlePaste.bind(this),this.quill.root.addEventListener("drop",this.handleDrop,!1),this.quill.root.addEventListener("paste",this.handlePaste,!1)}return(0,I.Z)(c,[{key:"selectLocalImage",value:function(){var t=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=this.fileChanged.bind(this),document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){document.body.removeChild(t.fileHolder)})}},{key:"handleDrop",value:function(t){var e=this;if(t.stopPropagation(),t.preventDefault(),t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){if(document.caretRangeFromPoint){var a=document.getSelection(),n=document.caretRangeFromPoint(t.clientX,t.clientY);a&&n&&a.setBaseAndExtent(n.startContainer,n.startOffset,n.startContainer,n.startOffset)}else{var d=document.getSelection(),s=document.caretPositionFromPoint(t.clientX,t.clientY);d&&s&&d.setBaseAndExtent(s.offsetNode,s.offset,s.offsetNode,s.offset)}this.range=this.quill.getSelection();var h=t.dataTransfer.files[0];setTimeout(function(){e.range=e.quill.getSelection(),e.readAndUploadFile(h)},0)}}},{key:"handlePaste",value:function(t){var e=this,a=t.clipboardData||window.clipboardData;if(a&&(a.items||a.files))for(var n=a.items||a.files,d=/^image\/(jpe?g|gif|png|svg|webp)$/i,s=0;s<n.length;s++)d.test(n[s].type)&&function(){var h=n[s].getAsFile?n[s].getAsFile():n[s];h&&(e.range=e.quill.getSelection(),t.preventDefault(),setTimeout(function(){e.range=e.quill.getSelection(),e.readAndUploadFile(h)},0))}()}},{key:"readAndUploadFile",value:function(t){var e=this,a=!1,n=new FileReader;n.addEventListener("load",function(){if(!a){var d=n.result;e.insertBase64Image(d)}},!1),t&&n.readAsDataURL(t),this.options.upload(t).then(function(d){e.insertToEditor(d)},function(d){a=!0,e.removeBase64Image(),console.warn(d)})}},{key:"fileChanged",value:function(){var t=this.fileHolder.files[0];this.readAndUploadFile(t)}},{key:"insertBase64Image",value:function(t){var e=this.range;this.quill.insertEmbed(e.index,ve.blotName,"".concat(t),"user")}},{key:"insertToEditor",value:function(t){var e=this.range;this.quill.deleteText(e.index,3,"user"),this.quill.insertEmbed(e.index,"image","".concat(t)),e.index++,this.quill.setSelection(e,"user")}},{key:"removeBase64Image",value:function(){var t=this.range;this.quill.deleteText(t.index,3,"user")}}]),c}();window.ImageUploader=Be;var me=Be,Ze=C.Quill.import("parchment"),xe=C.Quill.import("ui/icons");xe.score='<svg t="1656149207035" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2625"><path d="M905.92 237.76a32 32 0 0 0-52.48 36.48A416 416 0 1 1 96 512a418.56 418.56 0 0 1 297.28-398.72 32 32 0 1 0-18.24-61.44A480 480 0 1 0 992 512a477.12 477.12 0 0 0-86.08-274.24z" fill="#231815" p-id="2626"></path><path d="M630.72 113.28A413.76 413.76 0 0 1 768 185.28a32 32 0 0 0 39.68-50.24 476.8 476.8 0 0 0-160-83.2 32 32 0 0 0-18.24 61.44zM489.28 86.72a36.8 36.8 0 0 0 10.56 6.72 30.08 30.08 0 0 0 24.32 0 37.12 37.12 0 0 0 10.56-6.72A32 32 0 0 0 544 64a33.6 33.6 0 0 0-9.28-22.72A32 32 0 0 0 505.6 32a20.8 20.8 0 0 0-5.76 1.92 23.68 23.68 0 0 0-5.76 2.88l-4.8 3.84a32 32 0 0 0-6.72 10.56A32 32 0 0 0 480 64a32 32 0 0 0 2.56 12.16 37.12 37.12 0 0 0 6.72 10.56zM355.84 313.6a36.8 36.8 0 0 0-13.12 18.56l-107.52 312.96a37.44 37.44 0 0 0 2.56 35.52 32 32 0 0 0 24.96 10.56 27.84 27.84 0 0 0 17.28-5.76 43.84 43.84 0 0 0 10.56-13.44 100.16 100.16 0 0 0 7.04-15.36l4.8-12.8 17.6-49.92h118.72l24.96 69.76a45.76 45.76 0 0 0 10.88 19.2 28.8 28.8 0 0 0 20.48 8.32h2.24a27.52 27.52 0 0 0 27.84-15.68 41.28 41.28 0 0 0 0-29.44l-107.84-313.6a36.8 36.8 0 0 0-13.44-19.2 44.16 44.16 0 0 0-48 0.32z m24.32 96l41.6 125.44h-83.2zM594.88 544a66.56 66.56 0 0 0 25.6 4.16h62.4v78.72a29.12 29.12 0 0 0 32 32 26.24 26.24 0 0 0 27.2-16.32 73.28 73.28 0 0 0 4.16-26.24v-66.88h73.6a27.84 27.84 0 0 0 29.44-32 26.56 26.56 0 0 0-16-27.2 64 64 0 0 0-23.04-4.16h-64v-75.84a28.16 28.16 0 0 0-32-30.08 26.56 26.56 0 0 0-27.2 15.68 64 64 0 0 0-4.16 24v66.88h-62.72a69.44 69.44 0 0 0-25.6 4.16 26.56 26.56 0 0 0-15.68 27.2 25.92 25.92 0 0 0 16 25.92z" fill="#231815" p-id="2627"></path></svg>';var se=function(c){(0,Y.Z)(t,c);var o=(0,W.Z)(t);function t(){return(0,T.Z)(this,t),o.apply(this,arguments)}return(0,I.Z)(t,null,[{key:"create",value:function(a){var n=(0,ae.Z)((0,te.Z)(t),"create",this).call(this,a);return n.innerText=a,n.contentEditable="false",n}},{key:"value",value:function(a){return a.childNodes[0].textContent}},{key:"_addRemovalButton",value:function(a){var n=document.createElement("button");n.innerText="x",n.onclick=function(){return a.remove()},n.contentEditable="false",a.appendChild(n);var d=document.createElement("span");d.innerText=" ",a.appendChild(d)}}]),t}(Ze.Embed);se.blotName="score",se.tagName="SPAN",se.className="ql-label",C.Quill.register(se);var Ne=i(83279),We=i(1997),Xe=i(11628),l=i(85893),De=C.Quill.import("delta"),Ye=function(){function c(o,t){(0,T.Z)(this,c),this.quill=o,this.options=t,o.on("text-change",this.update.bind(this)),this.update()}return(0,I.Z)(c,[{key:"update",value:function(){}}]),c}();C.Quill.register("modules/scoreLogic",Ye);var $e=function(o){var t=o.onCancel,e=o.editorRef,a=o.formula,n=(0,Xe.IE)(),d=(0,N.useMemo)(function(){var j;return(j=e.current)===null||j===void 0?void 0:j.getSelection()},[]),s=function(y){if(console.log(y,d),d){var S;(S=e.current)===null||S===void 0||S.updateContents(new De().retain(d.index-1).delete(1).insert({"score-logic":{text:"\u81EA\u5B9A\u4E49\u63D0\u793A\u4FE1\u606F(\u70B9\u51FB\u4FEE\u6539)",formula:y}}))}};if(!n.schema)return(0,l.jsx)(l.Fragment,{});var h=n.mode==="exam"?(0,re.Z)((0,re.Z)({},n.schema),{},{children:[{type:"FillBlank",id:"score",title:"\u5206\u6570",children:[{id:"score",title:"\u5206\u6570",type:"Option",attribute:{dataType:"number"}}]}].concat((0,Ne.Z)(n.schema.children))}):n.schema;return(0,l.jsx)(We.ZP,{title:"\u81EA\u5B9A\u4E49\u63D0\u793A\u4FE1\u606F\u8BBE\u7F6E",functionVisible:!0,schema:h,value:a,onCancel:t,onOk:function(y){s(y),t()}})},Ae=C.Quill.import("parchment"),ut=C.Quill.import("delta"),f=C.Quill.import("ui/icons");f["score-logic"]='<svg t="1656401750965" class="icon" viewBox="0 0 1128 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5625" ><path d="M473.184 356.632c-23.048-28.336-64.616-32.632-92.816-9.672-28.248 23.048-32.568 64.528-9.616 92.84l473.328 547.152c22.928 28.248 64.376 32.488 92.776 9.552 28.224-22.992 32.512-64.528 9.528-92.752l-473.2-547.12z" fill="#0092D2" p-id="5626"></path><path d="M151.4 65.976l-1.056-0.472 54.912 223.104L52.68 460.32l229.128 16.664 116.12 198.2 56.8-139.376 389.6 450.344c22.224 27.4 61.792 31.984 90.072 11.32L151.4 65.976z" fill="#0085BF" p-id="5627"></path><path d="M150.104 66.304L360.56 158.4 555.752 37.224l-22.52 228.6L708.8 414.016l-224.416 49.24-86.664 212.728-116.152-198.2-229.12-16.672 152.6-171.712z" fill="#F5B146" p-id="5628"></path><path d="M276.192 225.08l95.368 41.712 88.424-54.888-10.2 103.576 79.568 67.144-101.704 22.312-39.28 96.368-52.616-89.816-103.808-7.52 69.144-77.816z" fill="#E5226B" p-id="5629"></path><path d="M484.384 463.256l0.528-0.112L152.072 67.152l-1.208-0.528 54.856 222.92-152.48 171.624 228.328 16.616 0.064 0.08 0.648 0.064 115.68 197.464z" fill="#EF962F" p-id="5630"></path><path d="M434.56 403.408L289.6 230.928l-13.408-5.848 24.896 101.072-69.144 77.816 103.808 7.52 52.616 89.816 39.28-96.368z" fill="#C9005B" p-id="5631"></path></svg>';var u=function(c){(0,Y.Z)(t,c);var o=(0,W.Z)(t);function t(){return(0,T.Z)(this,t),o.apply(this,arguments)}return(0,I.Z)(t,null,[{key:"create",value:function(a){var n=(0,ae.Z)((0,te.Z)(t),"create",this).call(this,a);return n.innerText=a.text,n.dataset.formula=a.formula,n.contentEditable="false",this._addClickEvent(n),n}},{key:"value",value:function(a){return{text:a.childNodes[0].textContent,formula:a.dataset.formula}}},{key:"_addClickEvent",value:function(a){a.onclick=function(){var n=a.closest(".custom-quill-editor");if(n){var d=C.Quill.find(n.querySelector(".quill-editor")),s=d.getModule("scoreLogic");s.options.openModal(a.dataset.formula)}}}}]),t}(Ae.Embed);u.blotName="score-logic",u.tagName="SPAN",u.className="ql-score-logic",C.Quill.register(u);var p=i(87998),b=i(3980);Q().register("modules/imageResize",be),Q().register("modules/imageUploader",me);var g=Q().import("delta"),x=Q().import("attributors/style/size");x.whitelist=["9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","36px"],Q().register(x,!0);var A=function(o){var t=o.toolbar,e=(0,N.useRef)(null),a=(0,N.useRef)(),n=(0,N.useRef)(),d=(0,N.useState)(),s=(0,oe.Z)(d,2),h=s[0],j=s[1],y=(0,N.useMemo)(function(){return"quill-".concat((0,p.kb)())},[]);return(0,N.useEffect)(function(){return e.current&&(a.current=new(Q())(e.current,{theme:"snow",formats:["size","color","width","background","header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","formula","align","imageBlot","code-block","score","score-logic"],modules:{syntax:{highlight:function(U){return L.Z.highlightAuto(U).value}},counter:{container:"#counter",unit:"word"},imageResize:{parchment:Q().import("parchment"),modules:["Resize","DisplaySize"]},imageUploader:{upload:function(U){return new Promise(function(Z,z){b.hi.uploadImage(3,U).then(function($){$.success&&Z("/api/public/preview/".concat($.data.id))}).catch(function($){z("Upload failed"),console.error("Error:",$)})})}},scoreLogic:{openModal:function(U){j({visible:!0,formula:U})}},toolbar:{container:"#".concat(y),handlers:{score:function(U){var Z=a.current;if(Z){var z=Z.getSelection(!0);Z.insertEmbed(z.index,"score","\u5206\u6570"),Z.setSelection(z.index+1,1)}},"score-logic":function(U){var Z=a.current;if(Z){var z=Z.getSelection(!0);Z.insertEmbed(z.index,"score-logic",{text:"\u81EA\u5B9A\u4E49\u63D0\u793A\u4FE1\u606F(\u70B9\u51FB\u8BBE\u7F6E)",formula:"#{score}"}),Z.setSelection(z.index+1,1)}}}}}}),o.value&&a.current.setText(o.value),a.current.on("text-change",function(S,U,Z){var z,$=(z=a.current)===null||z===void 0?void 0:z.root.innerHTML;$!==n.current&&o.onChange&&(o.onChange($||""),n.current=$)})),function(){}},[]),(0,N.useEffect)(function(){var S,U=n.current,Z=(S=o.value)!==null&&S!==void 0?S:"";if(Z!==U){var z;n.current=Z,(z=a.current)===null||z===void 0||z.setContents(a.current.clipboard.convert(Z))}},[o.value]),(0,l.jsxs)("div",{className:"custom-quill-editor",children:[(0,l.jsxs)("div",{id:y,className:"ql-formats",children:[(0,l.jsx)(v.Z,{title:"\u5B57\u53F7",children:(0,l.jsxs)("select",{className:"ql-size",children:[(0,l.jsx)("option",{value:"12px",children:"12px"}),(0,l.jsx)("option",{value:"14px",children:"14px"}),(0,l.jsx)("option",{value:"16px",children:"16px"}),(0,l.jsx)("option",{value:"18px",children:"18px"}),(0,l.jsx)("option",{value:"20px",children:"20px"}),(0,l.jsx)("option",{value:"22px",children:"22px"}),(0,l.jsx)("option",{value:"24px",children:"24px"}),(0,l.jsx)("option",{value:"36px",children:"36px"})]})}),(0,l.jsx)(v.Z,{title:"\u5B57\u4F53\u989C\u8272",children:(0,l.jsx)("select",{className:"ql-color"})}),(0,l.jsx)(v.Z,{title:"\u80CC\u666F\u8272",children:(0,l.jsx)("select",{className:"ql-background"})}),(0,l.jsx)(v.Z,{title:"\u52A0\u7C97",children:(0,l.jsx)("button",{className:"ql-bold"})}),(0,l.jsx)(v.Z,{title:"\u659C\u4F53",children:(0,l.jsx)("button",{className:"ql-italic"})}),(0,l.jsx)(v.Z,{title:"\u4E0B\u5212\u7EBF",children:(0,l.jsx)("button",{className:"ql-underline"})}),(0,l.jsx)(v.Z,{title:"\u5220\u9664\u7EBF",children:(0,l.jsx)("button",{className:"ql-strike"})}),(0,l.jsx)(v.Z,{title:"\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align"})}),(0,l.jsx)(v.Z,{title:"\u5C45\u4E2D\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align",value:"center"})}),(0,l.jsx)(v.Z,{title:"\u53F3\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align",value:"right"})}),(0,l.jsx)(v.Z,{title:"\u4E24\u7AEF\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align",value:"justify"})}),(0,l.jsx)(v.Z,{title:"\u94FE\u63A5",children:(0,l.jsx)("button",{className:"ql-link"})}),(0,l.jsx)(v.Z,{title:"\u56FE\u7247",children:(0,l.jsx)("button",{className:"ql-image"})}),(0,l.jsx)(v.Z,{title:"\u89C6\u9891",children:(0,l.jsx)("button",{className:"ql-video"})}),(0,l.jsx)(v.Z,{title:"\u4EE3\u7801\u5757",children:(0,l.jsx)("button",{className:"ql-code-block"})}),(0,l.jsx)(v.Z,{title:"\u516C\u5F0F",children:(0,l.jsx)("button",{className:"ql-formula"})}),(0,l.jsx)(v.Z,{title:"\u6709\u5E8F\u5217\u8868",children:(0,l.jsx)("button",{className:"ql-list",value:"ordered"})}),(0,l.jsx)(v.Z,{title:"\u65E0\u5E8F\u5217\u8868",children:(0,l.jsx)("button",{className:"ql-list",value:"bullet"})}),(0,l.jsx)(v.Z,{title:"\u5DE6\u7F29\u8FDB",children:(0,l.jsx)("button",{className:"ql-indent",value:"-1"})}),(0,l.jsx)(v.Z,{title:"\u53F3\u7F29\u8FDB",children:(0,l.jsx)("button",{className:"ql-indent",value:"+1"})}),(0,l.jsx)(v.Z,{title:"\u6E05\u9664\u6837\u5F0F",children:(0,l.jsx)("button",{className:"ql-clean"})}),(t==null?void 0:t.includes("score"))&&(0,l.jsx)(v.Z,{title:"\u63D2\u5165\u5206\u6570",children:(0,l.jsx)("button",{className:"ql-score"})}),(0,l.jsx)(v.Z,{title:"\u6839\u636E\u7B54\u6848\u8BBE\u7F6E\u63D0\u793A\u4FE1\u606F",children:(0,l.jsx)("button",{className:"ql-score-logic"})})]}),(0,l.jsx)("div",{ref:e,className:"quill-editor"}),(h==null?void 0:h.visible)&&(0,l.jsx)($e,{formula:h.formula,onCancel:function(){return j(void 0)},editorRef:a})]})},B=function(o){var t=o.onChange,e=o.onClose,a=o.value,n=o.toolbar,d=n===void 0?[]:n,s=(0,it.Z)(o,["onChange","onClose","value","toolbar"]),h=(0,N.useState)(a),j=(0,oe.Z)(h,2),y=j[0],S=j[1];return(0,l.jsx)(Me.Z,(0,re.Z)((0,re.Z)({visible:!0,onCancel:e,footer:!1,maskClosable:!1,closable:!1,width:650},s),{},{children:(0,l.jsxs)("div",{children:[(0,l.jsx)(A,{value:y,toolbar:d,onChange:function(Z){S(Z)}}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:20},children:(0,l.jsxs)(nt.Z,{children:[(0,l.jsx)(Ce.Z,{onClick:e,children:"\u53D6\u6D88"}),(0,l.jsx)(Ce.Z,{type:"primary",onClick:function(){return t(y)},children:"\u4FDD\u5B58"})]})})]})}))},q=i(8166),w=C.Quill.import("themes/bubble"),H=function(c){(0,Y.Z)(t,c);var o=(0,W.Z)(t);function t(e,a){var n;return(0,T.Z)(this,t),n=o.call(this,e,a),e.on("selection-change",function(d){if(d){var s;e.theme.tooltip.show(),(s=e.theme.tooltip)===null||s===void 0||s.position((0,re.Z)({},e.getBounds(d)))}}),e.on("text-change",function(d){e.hasFocus()&&e.theme.tooltip.show()}),n}return t}(w);C.Quill.register("themes/bubble",H);var X=Q().import("modules/clipboard"),V=Q().import("delta"),K=function(c){(0,Y.Z)(t,c);var o=(0,W.Z)(t);function t(){return(0,T.Z)(this,t),o.apply(this,arguments)}return(0,I.Z)(t,[{key:"onPaste",value:function(a){a.preventDefault();var n=this.quill.getSelection(),d=a.clipboardData.getData("text/plain"),s=new V().retain(n.index).delete(n.length).insert(d),h=d.length+n.index,j=0;this.quill.updateContents(s,"silent"),this.quill.setSelection(h,j,"silent"),this.quill.scrollIntoView()}}]),t}(X),J=K,R,E=C.Quill.import("blots/embed");window.katex=q.Z;var k=C.Quill.import("attributors/style/size");k.whitelist=["9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","36px"],C.Quill.register(k,!0),C.Quill.register("modules/clipboard",J,!0);var F=C.Quill.import("delta"),O=function(c){(0,Y.Z)(t,c);var o=(0,W.Z)(t);function t(){return(0,T.Z)(this,t),o.apply(this,arguments)}return(0,I.Z)(t,null,[{key:"create",value:function(a){var n=(0,ae.Z)((0,te.Z)(t),"create",this).call(this);return n.setAttribute("contenteditable","true"),n.classList.add("myspan"),this._addRemovalButton(n),n}},{key:"_addRemovalButton",value:function(a){var n=document.createElement("span");n.innerText="___",n.contentEditable="true",a.appendChild(n)}},{key:"value",value:function(a){return a.childNodes[1].textContent}}]),t}(E);O.blotName="spanEmbed",O.tagName="span",O.className="myclass",C.Quill.register(O);var m=tt.ZP.div(R||(R=(0,ee.Z)([`
  box-sizing: border-box;
  margin: 0;
  font-variant: tabular-nums;
  list-style: none;
  font-feature-settings: 'tnum';
  width: 100%;
  padding: `,`;
  color: rgba(0, 0, 0, 0.65);

  border: `,`;
  transition: all 0.3s;

  &.is-focus {
    border: `,`;
    border-right-width: 1px !important;
    outline: 0;
  }
  &.not-focus:hover {
    border: dashed 1px #aaaaaa !important;
    border-right-width: 1px !important;
  }

  .ql-editor {
    padding: 0;
    font-size: `,`;
    text-align: `,`;
  }

  .ql-tooltip {
    top: -40px !important;
    left: -10px !important;
    width: 240px;
    transform: none;
  }

  .ql-formats > span,
  .ql-formats > button {
    &:hover {
      background-color: hsla(0, 0%, 84.7%, 0.3);
    }
  }

  .ql-bubble .ql-tooltip {
    z-index: 999;
    box-sizing: border-box;
    padding: 0 2px;
    /* white-space: nowrap; */
    background-color: #fff;
    /* border: 1px solid #eaeaea; */
    /* border-radius: 2px; rgb(0 0 0 / 20%); */
    border-radius: 2px;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 20%);
    cursor: pointer;
  }

  .ql-bubble .ql-tooltip.ql-flip .ql-tooltip-arrow {
    display: none;
  }

  .ql-tooltip-arrow {
    display: none;
  }

  .ql-toolbar {
    box-sizing: border-box;
    font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
    /* border: 1px solid #ccc; */
  }

  .ql-bubble .ql-picker {
    position: relative;
    display: inline-block;
    float: left;
    height: 24px;
    color: #444;
    font-weight: 500;
    font-size: 14px;
    vertical-align: middle;
  }

  .ql-bubble .ql-stroke {
    fill: none;
    stroke: #444;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-width: 2;
  }

  .ql-bubble.ql-toolbar button:hover .ql-stroke,
  .ql-bubble .ql-toolbar button:hover .ql-stroke,
  .ql-bubble.ql-toolbar button:focus .ql-stroke,
  .ql-bubble .ql-toolbar button:focus .ql-stroke,
  .ql-bubble.ql-toolbar button.ql-active .ql-stroke,
  .ql-bubble .ql-toolbar button.ql-active .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-bubble.ql-toolbar button:hover .ql-stroke-miter,
  .ql-bubble .ql-toolbar button:hover .ql-stroke-miter,
  .ql-bubble.ql-toolbar button:focus .ql-stroke-miter,
  .ql-bubble .ql-toolbar button:focus .ql-stroke-miter,
  .ql-bubble.ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-bubble .ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {
    stroke: #2196f3;
  }

  .ql-bubble.ql-toolbar button:hover,
  .ql-bubble .ql-toolbar button:hover,
  .ql-bubble.ql-toolbar button:focus,
  .ql-bubble .ql-toolbar button:focus,
  .ql-bubble.ql-toolbar button.ql-active,
  .ql-bubble .ql-toolbar button.ql-active,
  .ql-bubble.ql-toolbar .ql-picker-label:hover,
  .ql-bubble .ql-toolbar .ql-picker-label:hover,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active,
  .ql-bubble.ql-toolbar .ql-picker-item:hover,
  .ql-bubble .ql-toolbar .ql-picker-item:hover,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected {
    color: #2196f3;
  }

  .ql-toolbar.ql-bubble .ql-picker.ql-expanded .ql-picker-options {
    border-color: #ccc;
  }
  .ql-bubble .ql-picker.ql-expanded .ql-picker-options {
    top: 100%;
    z-index: 1;
    display: block;
    margin-top: -1px;
    border: 1px solid #cccccc;
  }
  .ql-toolbar.ql-bubble .ql-picker-options {
    border: 1px solid transparent;
    box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;
  }
  .ql-bubble .ql-picker-options {
    position: absolute;
    display: none;
    min-width: 100%;
    height: 200px;
    padding: 4px 2px;
    overflow-y: auto;
    white-space: nowrap;
    background-color: #fff;
  }

  .ql-bubble .ql-tooltip:not(.ql-flip) .ql-tooltip-arrow {
    top: -6px;
    border-bottom: 6px solid #fff;
  }

  .ql-formats {
    margin: 3px 6px 3px 0px;
  }

  .ql-bubble .ql-toolbar .ql-formats:first-child {
    margin-left: 1px;
  }

  .ql-bubble.ql-toolbar button:hover .ql-fill,
  .ql-bubble .ql-toolbar button:hover .ql-fill,
  .ql-bubble.ql-toolbar button:focus .ql-fill,
  .ql-bubble .ql-toolbar button:focus .ql-fill,
  .ql-bubble.ql-toolbar button.ql-active .ql-fill,
  .ql-bubble .ql-toolbar button.ql-active .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-bubble.ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {
    fill: #2196f3;
  }
  .ql-bubble .ql-picker.ql-size {
    width: 60px;
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='9px']::before {
    font-size: 9px !important;
    content: '9';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='10px']::before {
    font-size: 10px !important;
    content: '10';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='11px']::before {
    font-size: 11px !important;
    content: '11';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='12px']::before {
    font-size: 12px !important;
    content: '12';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='14px']::before {
    font-size: 14px !important;
    content: '14';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='16px']::before {
    font-size: 16px !important;
    content: '16';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='18px']::before {
    font-size: 18px !important;
    content: '18';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='20px']::before {
    font-size: 20px !important;
    content: '20';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='22px']::before {
    font-size: 22px !important;
    content: '22';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='24px']::before {
    font-size: 24px !important;
    content: '24';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='26px']::before {
    font-size: 26px !important;
    content: '26';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='36px']::before {
    font-size: 36px !important;
    content: '36';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-label::before,
  .ql-bubble .ql-picker.ql-size .ql-picker-item::before {
    font-size: 14px !important;
    content: '14px';
  }

  .myclass {
    border: 1px solid transparent;
    cursor: pointer;
    :hover {
      border: 1px solid #58a6e7;
    }
  }
`])),function(c){return c.size==="middle"?"6px 11px 4px 11px":c.size==="small"?"2px 2px 0px 5px":"14px 11px"},function(c){return c.hasError?"1px solid #ff4d4f":"1px solid transparent"},function(c){return c.hasError?"1px solid #ff4d4f !important":"1px solid #1890ff !important"},function(c){return c.innerStyle&&c.innerStyle.fontSize},function(c){return c.innerStyle&&c.innerStyle.textAlign});function M(c){return typeof c=="symbol"?"":c&&c.startsWith("<p")?c:"<p>".concat(c,"</p>")}var D=C.Quill.import("ui/icons");D.tags='<svg style="width:18px;height:18px;"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="512" height="512"><path d="M851.968 167.936l0 109.568-281.6 0 0 587.776-116.736 0 0-587.776-281.6 0 0-109.568 679.936 0z" p-id="3840"></path></svg>';var ce=function(o){var t=o.onChange,e=o.value,a=e===void 0?"":e,n=o.placeholder,d=o.style,s=o.className,h=o.bounds,j=(0,N.useState)(!1),y=(0,oe.Z)(j,2),S=y[0],U=y[1],Z=(0,N.useState)(!1),z=(0,oe.Z)(Z,2),$=z[0],Ge=z[1],ze=(0,N.useRef)(),st=(0,N.useMemo)(function(){return"quill-".concat((0,p.kb)())},[]),ct=function(P){if(P.startsWith("<p>")){var Te=P.replace(/^<p>/,"").replace(/<\/p>$/,"");t(Te==="<br>"?"":Te)}else t(P)};function ft(){Ge(!0)}return(0,N.useEffect)(function(){var G;setTimeout(function(){return U(!1)},50),(G=ze.current)===null||G===void 0||G.editor.getModule("toolbar").container.addEventListener("mousedown",function(P){P.preventDefault()})},[]),(0,l.jsxs)(m,{style:d,className:ye()(s,{"is-focus":S,"not-focus":!S}),innerStyle:o.innerStyle,size:o.size,children:[$&&(0,l.jsx)(B,{onClose:function(){return Ge(!1)},value:a,onChange:function(P){P&&ct(P),Ge(!1)}}),(0,l.jsxs)("div",{id:st,className:"ql-formats",children:[(0,l.jsx)(v.Z,{title:"\u5B57\u53F7",children:(0,l.jsxs)("select",{className:"ql-size",children:[(0,l.jsx)("option",{value:"12px",children:"12px"}),(0,l.jsx)("option",{value:"14px",children:"14px"}),(0,l.jsx)("option",{value:"16px",children:"16px"}),(0,l.jsx)("option",{value:"18px",children:"18px"}),(0,l.jsx)("option",{value:"20px",children:"20px"}),(0,l.jsx)("option",{value:"22px",children:"22px"}),(0,l.jsx)("option",{value:"24px",children:"24px"}),(0,l.jsx)("option",{value:"36px",children:"36px"})]})}),(0,l.jsx)(v.Z,{title:"\u5B57\u4F53\u989C\u8272",children:(0,l.jsx)("select",{className:"ql-color"})}),(0,l.jsx)(v.Z,{title:"\u80CC\u666F\u8272",children:(0,l.jsx)("select",{className:"ql-background"})}),(0,l.jsx)(v.Z,{title:"\u52A0\u7C97",children:(0,l.jsx)("button",{className:"ql-bold"})}),(0,l.jsx)(v.Z,{title:"\u659C\u4F53",children:(0,l.jsx)("button",{className:"ql-italic"})}),(0,l.jsx)(v.Z,{title:"\u6E05\u9664\u6837\u5F0F",children:(0,l.jsx)("button",{className:"ql-clean"})}),(0,l.jsx)(v.Z,{title:"\u9AD8\u7EA7\u7F16\u8F91",children:(0,l.jsx)("button",{className:"ql-tags"})})]}),(0,l.jsx)(Le(),{theme:"bubble",value:M(a),ref:ze,onChange:ct,onChangeSelection:function(P,Te,dt){o.onChangeSelection&&P&&P.index&&o.onChangeSelection(P.index,dt.getText())},style:{textAlign:"center"},bounds:h,onFocus:function(){ze.current.editor.theme.tooltip.show(),U(!0)},scrollingContainer:"body",className:s,onBlur:function(P,Te,dt){var Ke;U(!1),(Ke=ze.current)===null||Ke===void 0||Ke.editor.theme.tooltip.hide()},placeholder:n,formats:["size","color","width","background","header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","formula","align","imageBlot","code-block"],modules:(0,N.useMemo)(function(){return{toolbar:{container:"#".concat(st),handlers:{tags:ft}},clipboard:{matchVisual:!1},syntax:{highlight:function(P){return L.Z.highlightAuto(P).value}}}},[])})]})},ge=ce},11628:function(Je,de,i){"use strict";i.d(de,{xI:function(){return v},Ge:function(){return T},IE:function(){return ee}});var qe=i(67294),v=(0,qe.createContext)({}),oe=v.Provider;function ee(){var I=(0,qe.useContext)(v);return I.store}function T(){var I=ee();return I.flowStore}}}]);
