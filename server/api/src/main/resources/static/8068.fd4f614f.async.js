(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8068],{67635:function(Ee,ce,n){"use strict";n.d(ce,{Mt:function(){return e},hl:function(){return K},HN:function(){return oe},we:function(){return re},k9:function(){return U},jI:function(){return c}});var I=n(80937),C=n(67294),b=n(40807),ve=n(86052),_=n(48187),j=n(85893);function U(l){var s=(0,C.useContext)(ve.Z),m=s.theme,f=s.footerVisible,Z=s.headerVisible,W=l.schema,$=function(F){var V=(0,_.GZ)(m,"Survey");if(V)return C.createElement(V,{schema:W,footerVisible:f,headerVisible:Z},F)},v=function(){var F,V=-1;return(F=W.children)===null||F===void 0?void 0:F.map(function(T){var N,L=T.type,Q=T.id;return!(0,b.nj)(L)&&((N=T.attribute)===null||N===void 0?void 0:N.display)!=="hidden"&&V++,L==="QuestionSet"?(0,j.jsx)(re,{schema:T,index:V},Q):(0,j.jsx)(oe,{schema:T,index:V},Q)})};return(0,j.jsxs)(j.Fragment,{children:[$(v()),(0,j.jsx)(I.gN,{name:"_finish"})]})}var R=n(11849),D=n(94657),w=n(54531),q=n(32059),le=n(83279),pe=n(71194),Y=n(50146),fe=n(25278),M=n(54707),k=n(90019),J=n(49111),S=n(19650),z=n(402),H=n(97272),ee=H.Z.Text,ue=H.Z.Link,te={FillBlank:"\u5355\u884C\u6587\u672C\u9898",Textarea:"\u591A\u884C\u6587\u672C\u9898",User:"\u6210\u5458\u9898",Dept:"\u90E8\u95E8\u9898",MultipleBlank:"\u591A\u9879\u586B\u7A7A\u9898",HorzBlank:"\u6A2A\u5411\u586B\u7A7A\u9898",Signature:"\u7B7E\u540D\u9898",Radio:"\u5355\u9009\u9898",Checkbox:"\u591A\u9009\u9898",Select:"\u4E0B\u62C9\u9898",Cascader:"\u7EA7\u8054\u9898",MatrixAuto:"\u77E9\u9635\u81EA\u589E\u9898",MatrixRadio:"\u77E9\u9635\u5355\u9009\u9898",MatrixCheckbox:"\u77E9\u9635\u591A\u9009\u9898",MatrixFillBlank:"\u77E9\u9635\u586B\u7A7A\u9898",MatrixScore:"\u77E9\u9635\u6253\u5206\u63D0",MatrixNps:"\u77E9\u9635NPS\u9898",Upload:"\u4E0A\u4F20\u9898",Score:"\u6253\u5206\u9898",Nps:"Nps \u9898",Address:"\u5730\u7406\u4F4D\u7F6E\u9898",Survey:"\u95EE\u5377",QuestionSet:"\u9898\u7EC4",Pagination:"\u5206\u9875",Remark:"\u5907\u6CE8",SplitLine:"\u5206\u5272\u7EBF",Option:"\u9009\u9879",Barcode:"\u6761\u7801\u9898",Button:"\u6309\u94AE",Drug:"\u836F\u7269\u9898"},ne={antd:"PC\u7AEF\u4E3B\u9898",antdForm:"\u8868\u5355\u4E3B\u9898",antdMobile:"\u624B\u673A\u7AEF\u4E3B\u9898"},he=function(s){var m=s.schema,f=(0,M.Al)(),Z=f.theme;return(0,j.jsx)("div",{style:{textAlign:"center"},children:(0,j.jsxs)(S.Z,{children:["\u5F53\u524D\u4E3B\u9898",(0,j.jsxs)(ee,{mark:!0,children:["(",ne[Z],")"]}),"\u6682\u4E0D\u652F\u6301",(0,j.jsx)(ee,{strong:!0,children:te[m.type]})," \u9898\u578B"]})})},se=n(15020),K=function(s){var m=s.html,f=m===void 0?"":m;return(0,j.jsx)(j.Fragment,{children:typeof f=="string"&&(0,se.ZP)(f.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))})},de=function(s){return(0,j.jsx)("div",{className:"preview",children:Ce(s)})};function Ce(l){var s=l.schema,m=l.value;if(!m)return"";var f;if(s.type==="Radio"||s.type==="Select")Object.entries(m).some(function(v){var B=(0,D.Z)(v,2),F=B[0],V=B[1];if(V===!0){var T,N;f=(0,j.jsx)(K,{html:(T=s.children)===null||T===void 0||(N=T.find(function(X){return X.id===F}))===null||N===void 0?void 0:N.title})}else if(V){var L,Q;f=(0,j.jsx)(K,{html:(L=s.children)===null||L===void 0||(Q=L.find(function(X){return X.id===F}))===null||Q===void 0?void 0:Q.title})}return!0});else{if(s.type==="Checkbox")return Object.entries(m).map(function(v){var B=(0,D.Z)(v,2),F=B[0],V=B[1];if(V===!0){var T,N;return(0,j.jsx)(K,{html:(T=s.children)===null||T===void 0||(N=T.find(function(X){return X.id===F}))===null||N===void 0?void 0:N.title},F)}else if(V){var L,Q;return(0,j.jsx)(K,{html:(L=s.children)===null||L===void 0||(Q=L.find(function(X){return X.id===F}))===null||Q===void 0?void 0:Q.title},F)}}).reduce(function(v,B){return[v,", ",B]});if(s.type==="Cascader"){var Z=s.children.map(function(v){return v.id}),W=Z.map(function(v){return m[v]}),$=s.dataSource;return W.filter(function(v){return v!==void 0}).map(function(v,B){var F,V=(F=$)===null||F===void 0?void 0:F.find(function(T){return T.value===v});return $=V.children,(0,j.jsx)("span",{children:V.label},Z[B])})}else if(s.type==="FillBlank"||s.type==="MultipleBlank"||s.type==="Textarea"||s.type==="Score"||s.type==="Nps")return Object.entries(m).map(function(v){var B=(0,D.Z)(v,2),F=B[0],V=B[1];return(0,j.jsx)("span",{children:V},F)})}return f}var oe=(0,I.Pi)(function(s){var m,f=s.schema,Z=s.index,W=s.qsIndex,$=f.id,v=f.type,B=(0,C.useContext)(ve.Z),F=B.theme,V=B.optionTypes,T=B.id2title,N=B.schema,L=(0,I.cI)(),Q=(0,M.Rk)(),X=(0,C.useMemo)(function(){return(0,b.cB)(f,"calculate")},[f]),ie=(0,C.useRef)(),me=(0,C.useRef)([]),ye=(0,C.useMemo)(function(){var h;return((h=f.attribute)===null||h===void 0?void 0:h.display)==="hidden"?["hidden_self"]:[]},[f]),Ze=(0,C.useMemo)(function(){var h;return(0,I.$j)((0,_.I8)(F,v)||he,(0,I.jM)(function(g,O){return(0,R.Z)((0,R.Z)({},g),{},{onChange:function(x,P){function E(){O.selfErrors.length>0&&O.validate().catch(function(){})}if(!g.readOnly){if((0,fe.xb)(x)){O.onInput(void 0),E();return}if(v.startsWith("Matrix")&&(0,b.hb)(x)){E(),O.onInput(void 0);return}x&&Object.keys(x).forEach(function(A){x[A]===void 0&&(x[A]="")}),O.onInput(x),E()}},onBlur:function(x,P){if(P){var E=(0,b.Pn)(f,x,P);E&&Y.Z.confirm({title:"\u63D0\u793A\u4FE1\u606F",content:(0,j.jsx)(K,{html:E}),okText:"\u662F",cancelText:"\u5426",onOk:function(){O.onInput(x)},onCancel:function(){x[P]=void 0,O.onInput(x)}})}}})}),(0,I.vl)(((h=(0,_.I8)(F,v))===null||h===void 0?void 0:h.Preview)||de))},[f,F,v]),ae=(0,C.useCallback)(function(h){return(0,j.jsx)("div",{tabIndex:-1,onBlur:h==null?void 0:h.onBlur,"data-id":h.schema.id,children:C.createElement((0,_.GZ)(F,"Question"),h)})},[F]),ge=(0,C.useMemo)(function(){return(0,I.$j)(ae,(0,I.jM)(function(h,g){return(0,R.Z)((0,R.Z)({},h),{},{error:g.selfErrors.length?(0,le.Z)(g.selfErrors):[],warning:g.selfWarnings.length?g.selfWarnings:[],required:g.required,onChange:function(p,x){function P(){g.selfErrors.length>0&&g.validate().catch(function(){})}if(!h.readOnly){if((0,fe.xb)(p)){g.onInput(void 0),P();return}if(v.startsWith("Matrix")&&(0,b.hb)(p)){P(),g.onInput(void 0);return}p&&Object.keys(p).forEach(function(E){p[E]===void 0&&(p[E]="")}),g.onInput(p),P()}},onBlur:function(p,x){if(x){var P=(0,b.Pn)(f,p,x);P&&Y.Z.confirm({title:"\u63D0\u793A\u4FE1\u606F",content:(0,j.jsx)(K,{html:P}),okText:"\u662F",cancelText:"\u5426",onOk:function(){g.onInput(p)},onCancel:function(){p[x]=void 0,g.onInput(p)}})}}})}))},[ae]),be=(0,C.useMemo)(function(){return(0,I.$j)((0,_.I8)(F,v),(0,I.jM)(function(h,g){return(0,R.Z)({},h)}))},[F,v]);return(0,b.nj)(f.type)?(0,j.jsx)(I.jG,{name:$,data:ye,component:[be,{schema:f,controlShow:void 0}],reactions:[function(h){var g=h.data||[];g.length===0?h.display="visible":h.display="none"},function(h){var g,O=(g=f.attribute)===null||g===void 0?void 0:g.replaceTextRule;if(O){var p=(0,b.vW)(O,function(P){var E=(0,b.Op)(P),A=(0,D.Z)(E,1),y=A[0],G=h.query(y).get("value");return(0,b.d0)({optionTypes:V,qValue:G,expression:P,id2title:T})}),x="";p.success&&p.result&&(x=p.result),h.setComponentProps((0,R.Z)((0,R.Z)({},h.componentProps),{},{replaceTitle:x}))}},function(h){var g,O=(g=f.attribute)===null||g===void 0?void 0:g.visibleRule;if(O){var p=(0,b.vW)(O,function(E){var A=(0,b.Op)(E),y=(0,D.Z)(A,2),G=y[0],Fe=y[1],Ve=h.query(G).get("value");return(0,b.d0)({optionTypes:V,qValue:Ve,expression:E})});if(p.success){var x="visible_".concat(f.id),P=(0,w.rg)(function(){return h.data});p.result&&P.includes(x)?P.splice(P.findIndex(function(E){return E===x}),1):!p.result&&!P.includes(x)&&P.push(x)}}}]}):(0,j.jsx)(I.gN,{name:$,display:(m=f.attribute)===null||m===void 0?void 0:m.display,component:[Ze,{schema:f,controlShow:void 0}],data:ye,decorator:[ge,{schema:f,index:Z,qsIndex:W}],validator:(0,k.r)(f,F),reactions:[function(h){var g=h.data||[];g.find(function(O){return O.startsWith("rule_")})?h.display="none":g.find(function(O){return O.startsWith("hidden")})?h.display="hidden":h.display="visible",Q.compute()},function(h){var g,O=(g=f.attribute)===null||g===void 0?void 0:g.finishRule;if(O){var p=(0,b.vW)(O,function(P){var E=(0,b.Op)(P),A=(0,D.Z)(E,2),y=A[0],G=A[1],Fe=h.query(y).get("value");return(0,b.d0)({optionTypes:V,qValue:Fe,expression:P})});if(p.success&&p.result!==void 0){var x=(0,b.BB)(f,N);x.forEach(function(P){var E=L.query(P.id).take();if(E){var A="rule_finish_".concat(f.id),y=(0,w.rg)(function(){return E.data});p.result&&y&&!y.includes(A)?y.push(A):!p.result&&y&&y.includes(A)&&y.splice(y.findIndex(function(G){return G===A}),1)}})}}},function(h){var g,O=(g=f.attribute)===null||g===void 0?void 0:g.jumpRule;if(O){var p=(0,b.vW)(O,function(E){var A=(0,b.Op)(E),y=(0,D.Z)(A,2),G=y[0],Fe=y[1],Ve=h.query(G).get("value");return(0,b.d0)({optionTypes:V,qValue:Ve,expression:E,id2title:T,returnId:!0})}),x="rule_jump_".concat(f.id);if(me.current.forEach(function(E){var A=(0,w.rg)(function(){var y;return((y=L.query(E).take())===null||y===void 0?void 0:y.data)||[]});A.splice(A.indexOf(x),1)}),me.current=[],p.success&&p.result!==void 0&&p.result){var P=(0,b.BB)(f,N,p.result);P.forEach(function(E){me.current.push(E.id);var A=L.query(E.id).take();if(A){var y=(0,w.rg)(function(){return A.data||[]});p.result&&!y.includes(x)?y.push(x):!p.result&&y.includes(x)&&y.splice(y.findIndex(function(G){return G===x}),1)}})}}},function(h){var g,O=(g=f.attribute)===null||g===void 0?void 0:g.visibleRule;if(O){var p=(0,b.vW)(O,function(E){var A=(0,b.Op)(E),y=(0,D.Z)(A,2),G=y[0],Fe=y[1],Ve=h.query(G).get("value");return(0,b.d0)({optionTypes:V,qValue:Ve,expression:E})});if(p.success&&h.display!=="hidden"){var x="rule_visible_".concat(f.id),P=(0,w.rg)(function(){return h.data});p.result&&P.includes(x)?P.splice(P.findIndex(function(E){return E===x}),1):!p.result&&!P.includes(x)&&P.push(x)}}},function(h){Object.entries(X).forEach(function(g){var O=(0,D.Z)(g,2),p=O[0],x=O[1],P=x,E=(0,b.vW)(P,function(A){var y=(0,b.Op)(A),G=(0,D.Z)(y,2),Fe=G[0],Ve=G[1],Ie=h.query(Fe),Se=Ie.get("value"),ze=Ie.get("componentProps").schema;return(0,b.d0)({optionTypes:V,qValue:Se,expression:A,id2title:T,qSchema:ze})});E.success&&h.setState(function(A){var y;return A.value=(0,R.Z)((0,R.Z)({},A.value),{},(0,q.Z)({},p,(0,b.A7)(E.result,(y=f.children)===null||y===void 0?void 0:y.find(function(G){return G.id===p}))))})})},function(h){var g,O=(g=f.attribute)===null||g===void 0?void 0:g.requiredRule;if(O){var p=(0,b.vW)(O,function(x){var P=(0,b.Op)(x),E=(0,D.Z)(P,2),A=E[0],y=E[1],G=h.query(A).get("value");return(0,b.d0)({optionTypes:V,qValue:G,expression:x})});p.success&&(p.result?h.required=!0:h.required=!1)}},function(h){var g,O=(g=f.attribute)===null||g===void 0?void 0:g.replaceTextRule;if(O){var p=(0,b.vW)(O,function(P){var E=(0,b.Op)(P),A=(0,D.Z)(E,1),y=A[0],G=h.query(y).get("value");return(0,b.d0)({optionTypes:V,qValue:G,expression:P,id2title:T})}),x="";p.success&&p.result&&(x=p.result),h.setDecoratorProps((0,R.Z)((0,R.Z)({},h.decoratorProps),{},{replaceTitle:x}))}},function(h){var g,O=(g=f.attribute)===null||g===void 0?void 0:g.validateRule;if(O){var p=(0,b.vW)(O,function(x){var P=(0,b.Op)(x),E=(0,D.Z)(P,1),A=E[0],y=h.query(A).get("value");return(0,b.d0)({optionTypes:V,qValue:y,expression:x,id2title:T})});p.success&&(p.result?h.setSelfErrors([p.result]):h.setSelfErrors([]))}},function(h){var g,O=(g=f.children)===null||g===void 0?void 0:g.filter(function(y){var G;return(G=y.attribute)===null||G===void 0?void 0:G.rejectOtherOption});if(O&&O.length>0){var p=h.value,x=Pe(ie.current,p);if(x){var P,E,A=(P=f.children)===null||P===void 0?void 0:P.find(function(y){return y.id===x});A&&(E=A.attribute)!==null&&E!==void 0&&E.rejectOtherOption?A.attribute.rejectOtherOption==="rejectAll"?p=(0,q.Z)({},x,p[x]):A.attribute.rejectOtherOption==="rejectOther"&&O.forEach(function(y){y&&y.id!==x&&delete p[y.id]}):O.filter(function(y){var G;return((G=y.attribute)===null||G===void 0?void 0:G.rejectOtherOption)==="rejectAll"}).forEach(function(y){y&&y.id!==x&&delete p[y.id]}),h.setState(function(y){return y.value=(0,R.Z)({},p)})}ie.current=(0,w.ZN)(p)}}]})});function Pe(l,s){if(s){var m=Object.keys(s).filter(function(f){return!(l&&l.hasOwnProperty(f))});if(m.length>0)return m[0]}}function re(l){var s=l.schema,m=l.index,f=s.id,Z=(0,C.useContext)(ve.Z),W=Z.theme,$=Z.optionTypes,v=Z.id2title,B=function(){var V,T=-1;return(V=s.children)===null||V===void 0?void 0:V.filter(function(N){var L;return((L=N.attribute)===null||L===void 0?void 0:L.display)!=="hidden"}).map(function(N,L){var Q;return!(0,b.nj)(N.type)&&((Q=N.attribute)===null||Q===void 0?void 0:Q.display)!=="hidden"&&T++,N.type==="QuestionSet"?(0,j.jsx)(re,{schema:N,index:T},N.id):(0,j.jsx)(oe,{schema:N,index:T,qsIndex:T},N.id)})};return(0,j.jsx)(I.jG,{name:f,data:[],decorator:[(0,_.GZ)(W,"QuestionSet"),{schema:s,index:m}],reactions:[function(F){var V=F.data||[];V.length===0?F.display="visible":F.display="none"},function(F){var V,T=(V=s.attribute)===null||V===void 0?void 0:V.replaceTextRule;if(T){var N=(0,b.vW)(T,function(Q){var X=(0,b.Op)(Q),ie=(0,D.Z)(X,1),me=ie[0],ye=F.query(me).get("value");return(0,b.d0)({optionTypes:$,qValue:ye,expression:Q,id2title:v})}),L="";N.success&&N.result&&(L=N.result),F.setComponentProps((0,R.Z)((0,R.Z)({},F.componentProps),{},{replaceTitle:L}))}},function(F){var V,T=(V=s.attribute)===null||V===void 0?void 0:V.visibleRule;if(T){var N=(0,b.vW)(T,function(X){var ie=(0,b.Op)(X),me=(0,D.Z)(ie,2),ye=me[0],Ze=me[1],ae=F.query(ye).get("value");return(0,b.d0)({optionTypes:$,qValue:ae,expression:X})});if(console.log(N),N.success){var L="visible_".concat(s.id),Q=(0,w.rg)(function(){return F.data});console.log(Q),N.result&&Q.includes(L)?Q.splice(Q.findIndex(function(X){return X===L}),1):!N.result&&!Q.includes(L)&&Q.push(L)}}}],children:B()})}var Re=function(s){var m=s.progress,f=m===void 0?0:m;return _jsx("div",{className:"progress-bar",style:{width:"".concat(f*100,"%")}})},Oe=function(){return _jsxs("svg",{viewBox:"0 0 1024 1024",width:"150",height:"150",children:[_jsx("path",{d:"M0 0h1024v1024H0z",fill:"#FFFFFF","p-id":"44112"}),_jsx("path",{d:"M160 73.426667h83.173333V0h98.266667v155.010667h75.6v179.485333h37.813333V163.168h22.666667v-40.8h68.053333v24.474667h30.24v342.666666h60.48V40.8h45.36v236.586667h22.666667V179.485333h45.36V16.317333H893.333333V824H160V73.426667z",fill:"#DDEEFF",opacity:".4","p-id":"44113"}),_jsx("path",{d:"M362.693333 741.416l635.866667 95.584L689.893333 997.333333 24 852.36z",fill:"#DFE7F7","p-id":"44114"}),_jsx("path",{d:"M1002.64 813.370667l-307.6 160.322666-665.893333-144.970666-0.826667-2.629334v-8.213333l20.586667 2.666667v1.701333l318.933333-104.469333 614.213333 92.48v-5.101334H1002.666667v8.213334h-0.026667z",fill:"#5AA12E","p-id":"44115"}),_jsx("path",{d:"M1002.64 805.157333l-308.64 160.314667-665.653333-144.92h-0.026667l-0.213333-0.04 0.213333-0.064v-8.104l17.733333 2.296 320.746667-105.066667 615.253333 92.488v-5.098666H1002.666667v8.213333h-0.026667z",fill:"#93C110","p-id":"44116"}),_jsx("path",{d:"M366.8 701.333333L1002.666667 796.917333l-308.666667 160.333334L28.106667 812.266667z",fill:"#EEF2F5","p-id":"44117"}),_jsx("path",{d:"M629.333333 809.333333a138.666667 6.666667 0 1 0 277.333334 0 138.666667 6.666667 0 1 0-277.333334 0Z",fill:"#E3E7EA","p-id":"44118"}),_jsx("path",{d:"M162.666667 773.333333a152 13.333333 0 1 0 304 0 152 13.333333 0 1 0-304 0Z",fill:"#E3E7EA","p-id":"44119"}),_jsx("path",{d:"M922.666667 610.666667h-64v170.666666h53.333333a13.333333 13.333333 0 0 1 0 26.666667h-181.333333a13.333333 13.333333 0 0 1 0-26.666667h58.666666v-144h-26.666666a10.666667 10.666667 0 0 1-10.666667-10.666666v-16h-117.333333v82.666666a8 8 0 0 1-16 0v-82.666666h-5.333334a10.666667 10.666667 0 0 1-10.666666-10.666667v-2.666667l48-50.666666h4.48a7.658667 7.658667 0 0 1 1.573333-0.968l187.093333-83.381334a10.4 10.4 0 0 1 14.773334 6.208l72.453333 81.178667a8.066667 8.066667 0 0 1 2.08 5.461333 11.581333 11.581333 0 0 1 0.213333 2.168v42.666667a10.666667 10.666667 0 0 1-10.666666 10.666667z m-272-42.666667l-26.666667 29.333333h26.666667v-29.333333z m117.333333 53.333333h66.666667v-58.666666h-29.333334l-37.333333 37.333333v21.333333z m-16-24l37.333333-37.333333h-37.333333v37.333333z m-45.333333 0h21.333333v-37.333333h-21.333333v37.333333z m-18.666667-37.333333h-21.333333v37.333333h21.333333v-37.333333z m5.84-13.333333h96.693333a9.224 9.224 0 0 1 0.693334-1.6l32.506666-56.290667zM842.666667 487.976L808.773333 546.666667H842.666667v-58.690667zM845.333333 648h-42.666666v26.666667h42.666666v-26.666667z m0 37.333333h-42.666666v42.666667h42.666666v-42.666667z m0 53.333334h-42.666666v42.666666h42.666666v-42.666666z m13.333334-141.333334h21.333333v-37.333333h-21.333333v37.333333z m0-104.690666V546.666667h48.213333zM917.333333 560h-21.333333v37.333333h21.333333v-37.333333z",fill:"#8BC8FF","p-id":"44120"}),_jsx("path",{d:"M592 709.333333h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H514.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H592a8 8 0 0 1 0 16z",fill:"#DFF0FF","p-id":"44121"}),_jsx("path",{d:"M936 298.666667h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205334 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H858.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205334H936a8 8 0 0 1 0 16z",fill:"#C3E2FF","p-id":"44122"}),_jsx("path",{d:"M104 408H45.333333a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205334H26.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205334 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H104a8 8 0 0 1 0 16z",fill:"#DCEEFF","p-id":"44123"}),_jsx("path",{d:"M309.333333 522.666667m-245.333333 0a245.333333 245.333333 0 1 0 490.666667 0 245.333333 245.333333 0 1 0-490.666667 0Z",fill:"#FFCC6C","p-id":"44124"}),_jsx("path",{d:"M296 730.666667a245.389333 245.389333 0 0 0 237.013333-308.746667 245.333333 245.333333 0 1 1-460.693333 164.16A245.333333 245.333333 0 0 0 296 730.666667z",fill:"#F3B72C","p-id":"44125"}),_jsx("path",{d:"M338.666667 464m-50.666667 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#E49817","p-id":"44126"}),_jsx("path",{d:"M333.333333 456m-50.666666 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#FFFFFF","p-id":"44127"}),_jsx("path",{d:"M303.333333 603.2a37.085333 37.085333 0 1 1-38 37.066667 37.544 37.544 0 0 1 38-37.066667z",fill:"#E49817","p-id":"44128"}),_jsx("path",{d:"M299.333333 597.333333A37.085333 37.085333 0 1 1 261.333333 634.4a37.544 37.544 0 0 1 38-37.066667z",fill:"#FFFFFF","p-id":"44129"}),_jsx("path",{d:"M182.786667 554.125333m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#E49817","p-id":"44130"}),_jsx("path",{d:"M179.88 549.874667m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#FFFFFF","p-id":"44131"}),_jsx("path",{d:"M251.733333 320.424a19.794667 19.794667 0 1 1-20.266666 19.789333 20.026667 20.026667 0 0 1 20.266666-19.789333z",fill:"#E49817","p-id":"44132"}),_jsx("path",{d:"M249.6 317.333333a19.794667 19.794667 0 1 1-20.266667 19.786667 20.026667 20.026667 0 0 1 20.266667-19.786667z",fill:"#FFFFFF","p-id":"44133"}),_jsx("path",{d:"M426.04 365.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44134"}),_jsx("path",{d:"M419.293333 357.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44135"}),_jsx("path",{d:"M466.04 589.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44136"}),_jsx("path",{d:"M459.293333 581.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44137"}),_jsx("path",{d:"M490.666667 860a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44138"}),_jsx("path",{d:"M480 801.333333a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44139"}),_jsx("path",{d:"M526.453333 597.12a48.968 48.968 0 0 0-4.586666-4.722667c55.493333-36.413333 83.466667-80.64 68.986666-121.04-8.746667-24.416-31.866667-44.266667-64.773333-58.512-0.346667-0.984-0.666667-1.970667-1.12-2.946666a40.712 40.712 0 0 0-3.12-5.410667c39.093333 15.2 66.72 37.432 76.72 65.333333 15.306667 42.656-14.026667 89.253333-72.106667 127.298667zM573.333333 856v5.333333s-135.84 11.306667-109.333333-136c19.866667-100.330667-32.586667-80.72-41.386667-80.112 0 0 0 0.016 0.026667 0.026667a595.552 595.552 0 0 1-66.4 17.274667c-160.48 32.136-312.186667-2.04-338.8-76.336-13.413333-37.413333 7.466667-77.866667 51.973333-112.904a31.802667 31.802667 0 0 0 0.293334 7.485333c0.053333 0.24 0.133333 0.464 0.186666 0.701333-39.04 32.48-56.933333 69.181333-44.746666 103.173334 25.493333 71.109333 172.8 103.397333 329.013333 72.114666a589.661333 589.661333 0 0 0 64.533333-16.714666L418.666667 640s72.826667-26.768 50.666666 80c-17.92 86.293333 13.146667 138.845333 104 136z",fill:"#FFE1A9","p-id":"44140"}),_jsx("path",{d:"M512 884a74.666667 6.666667 0 1 0 149.333333 0 74.666667 6.666667 0 1 0-149.333333 0Z",fill:"#E3E7EA","p-id":"44141"}),_jsx("path",{d:"M608.453333 802.666667h20.426667l17.093333 75.917333h-54.613333z m-6.88 15.165333h34.186667v6.752h-34.186667v-6.752z m-5.066666 16.917333h44.32v6.749334h-44.32v-6.749334z m-5.173334 21.917334h54.666667v6.749333h-54.666667v-6.749333z m-11.946666 21.917333h78.56a3.381333 3.381333 0 0 1 3.386666 3.373333 3.384 3.384 0 0 1-3.386666 3.373334h-78.56a3.384 3.384 0 0 1-3.386667-3.373334 3.381333 3.381333 0 0 1 3.386667-3.373333z",fill:"#F9A303","p-id":"44142"}),_jsx("path",{d:"M768 838.666667a58.666667 6.666667 0 1 0 117.333333 0 58.666667 6.666667 0 1 0-117.333333 0Z",fill:"#E3E7EA","p-id":"44143"}),_jsx("path",{d:"M880 845.333333a5.181333 5.181333 0 0 0 5.333333-5v-70a5.181333 5.181333 0 0 0-5.333333-5v80z",fill:"#845C45","p-id":"44144"}),_jsx("path",{d:"M880 845.333333a5.181333 5.181333 0 0 1-5.333333-5v-70a5.181333 5.181333 0 0 1 5.333333-5v80z",fill:"#BA805A","p-id":"44145"}),_jsx("path",{d:"M880 770.666667a45.333333 45.333333 0 0 0 0-90.666667v90.666667z",fill:"#628A21","p-id":"44146"}),_jsx("path",{d:"M880 770.666667a45.333333 45.333333 0 0 1 0-90.666667v90.666667z",fill:"#6EA52E","p-id":"44147"}),_jsx("path",{d:"M568 786.778667l-1.946667 6.824a1.130667 1.130667 0 0 1-1.173333 0.773333l-4.16-0.349333a19.581333 19.581333 0 0 1-18.88 8.477333l-13.093333-1.664 0.026666-0.04a3.733333 3.733333 0 0 1-0.986666-0.397333c-2.586667-1.504-3.706667-5.986667-3.306667-11.509334l-7.146667-1.816a3.408 3.408 0 0 1-2.56-4.173333 3.656 3.656 0 0 1 4.426667-2.4l6.453333 1.642667c0.293333-1.066667 0.613333-2.154667 1.013334-3.237334 0.213333-0.621333 0.453333-1.221333 0.693333-1.810666l-7.626667-1.938667a3.410667 3.410667 0 0 1-2.56-4.176 3.653333 3.653333 0 0 1 4.426667-2.4l9.12 2.317333a11.101333 11.101333 0 0 1 7.306667-5.472V765.333333l8.906666 1.136a18.562667 18.562667 0 0 1 16.613334 17.386667l3.813333 1.685333a1.066667 1.066667 0 0 1 0.64 1.237334z m-26.693333-20.149334c-2.693333-1.52-6.24 0.429333-9.306667 4.578667l4.08 1.032a3.392 3.392 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-5.68-1.437333c-0.24 0.573333-0.48 1.16-0.693333 1.765333q-0.6 1.642667-1.04 3.274667l6.88 1.744a3.389333 3.389333 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-6.133333-1.557333c-0.32 5.184 0.853333 9.368 3.386667 10.805333 4.053333 2.298667 10.08-3.309333 13.44-12.533333s2.853333-18.52-1.2-20.818667z",fill:"#FF6767","p-id":"44148"}),_jsx("path",{d:"M578.666667 789.333333s194 0.666667 98.666666 64l-2.666666-2.666666s100.826667-53-98.666667-58.666667z",fill:"#FFE1A9","p-id":"44149"})]})},Ne=function(s){return _jsx(Icon,_objectSpread({component:Oe},s))},Ae=n(27484),je=n.n(Ae),Me=n(75977),Te=n(45418),xe=n(62713),Be=n(33852),De=n(10285),o=n.n(De),i=n(6833),a=n.n(i),r=n(96036),t=n.n(r);je().locale("zh-cn"),je().extend(a()),je().extend(o()),je().extend(t());var e=(0,Te.default)((0,R.Z)({},Me.Z)),u=e,c=C.forwardRef(function(l,s){return(0,j.jsx)(u,(0,R.Z)((0,R.Z)({},l),{},{picker:"time",mode:void 0,ref:s}))});c.displayName="TimePicker";var d=null},54707:function(Ee,ce,n){"use strict";n.d(ce,{Rk:function(){return D},AK:function(){return b},Al:function(){return R},zE:function(){return Y}});var I=n(67294),C=n(86052);function b(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",k=(0,I.useContext)(C.Z),J=k.theme;return"survey-".concat(J)+M}function ve(M,k){var J=(k&&k.depends||[]).reduce(function(S,z){return S||!z},!1);return _(J?void 0:function(S,z){return fetch(S,z).then(function(H){if(!!H.ok)return H.json()})},M,k||{})}function _(M){for(var k=arguments.length,J=new Array(k>1?k-1:0),S=1;S<k;S++)J[S-1]=arguments[S];var z=useState(0),H=_slicedToArray(z,2),ee=H[0],ue=H[1],te=useCallback(function(){ue(Math.random())},[]),ne=useState({loading:!1,mutate:te}),he=_slicedToArray(ne,2),se=he[0],K=he[1];return useEffect(function(){!M||J[1].manual&&ee===0||M.apply(null,J).then(function(de){de.code===200?K({loading:!1,data:de.data,mutate:te}):K({error:de.message,loading:!1,mutate:te})}).catch(function(de){K({error:de,loading:!1,mutate:te})})},j(ee,J)),se}function j(){for(var M=arguments.length,k=new Array(M),J=0;J<M;J++)k[J]=arguments[J];for(var S=[],z=0;z<arguments.length;z++){var H=arguments[z];if(H instanceof Array)for(var ee=0;ee<H.length;ee++)S=S.concat(j(H[ee]));else if(typeof URL!="undefined"&&H instanceof URL)S=S.concat(H.toJSON());else if(H instanceof Object)for(var ue=Object.keys(H),te=0;te<ue.length;te++){var ne=ue[te];ne==="depends"?S=S.concat(H[ne]):S=S.concat([ne]).concat(j(H[ne]))}else S=S.concat(H)}return S}var U=n(40807);function R(){return(0,I.useContext)(U.ZX)}function D(){var M=(0,I.useContext)(U.ZX);return M.innerStore}var w=function(k){var J=I.useRef(k);return I.useEffect(function(){J.current=k}),J},q=w,le=typeof performance!="undefined"?performance:Date,pe=function(){return le.now()};function Y(M){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,S=q(M),z=1e3/k,H=I.useRef(0),ee=I.useRef(),ue=function(){return ee.current&&clearTimeout(ee.current)},te=[k,J,S];return I.useEffect(function(){return function(){H.current=0,ue()}},te),I.useCallback(function(){var ne=arguments,he=pe(),se=function(){H.current=he,ue(),S.current.apply(null,ne)},K=H.current;if(J&&K===0)return se();if(he-K>z){if(K>0)return se();H.current=he}ue(),ee.current=setTimeout(function(){se(),H.current=0},z)},te)}function fe(M,k,J){var S=React.useState(M);return[S[0],Y(S[1],k,J)]}},68068:function(Ee,ce,n){"use strict";n.d(ce,{O:function(){return Be},Z:function(){return De}});var I=n(80937),C=n(67294),b=n(67635),ve=n(86052),_=n(48187),j=n(91220),U=n(11849),R=n(83279),D=n(3182),w=n(94657),q=n(69610),le=n(54941),pe=n(94043),Y=n.n(pe),fe=n(64031),M=n(54531),k=n(28579),J=n(20618);function S(o,i){}var z=n(40807),H=function(){function o(i){var a=this;(0,q.Z)(this,o),this.props=void 0,this.progress=0,this.form=void 0,this.pagination=void 0,this.questionsGroupByPagination=[],this.notNoneInQuestionGroup=[],this.answerSheet=[],this.answerSheetVisible=!1,this.reviewAnswer={},this.compute=void 0;var r=i.initialValues,t=i.readOnly,e=i.fieldPermission,u=i.theme,c=i.schema,d=i.mode,l=i.onePageOneQuestion,s=l===void 0?!1:l,m=i.paginationVisible;this.props=i,this.changeQuestionsGroupByPagination(c,m,s);var f=(0,fe.Np)({initialValues:r,readOnly:t,validateFirst:!0,effects:function(W){(0,fe.dQ)(function(){if(a.questionsGroupByPagination.map(function(B,F){return F}).slice(1).forEach(function(B){return a.setDisplay(B,"hidden")}),e){var $=[],v=[];Object.entries(e).forEach(function(B){var F=(0,w.Z)(B,2),V=F[0],T=F[1];T===0?$.push(V):T===1&&v.push(V)}),$.length>0&&f.setFieldState("*(".concat($.join(","),")"),function(B){return B.display="none"}),v.length>0&&f.setFieldState("*(".concat(v.join(","),")"),function(B){return B.pattern="readPretty"})}a.handleFormValuesChange(),a.highlightJs()}),(0,fe.pO)(function($){a.handleFormValuesChange()}),(0,fe.Zj)("*",function($,v){a.handleFieldValueChange($,v)}),S(c,W)}});this.form=f,this.pagination=(0,z.dr)(c,s),this.answerSheet=(0,z.Xn)(c).filter(function(Z){var W;return(0,z.a1)(Z.type)&&((W=Z.attribute)===null||W===void 0?void 0:W.display)!=="hidden"}).map(function(Z){return{finished:!1,id:Z.id,marked:!1,display:"visible"}})||[],u==="antd"&&d==="exam"&&(this.answerSheetVisible=!0),this.makeObservable(),this.props.correctAnswerVisible&&r&&(0,z.Xn)(c).forEach(function(Z){a.computeReviewAnswer(Z,r[Z.id]).then(function(W){W&&(a.reviewAnswer[Z.id].visible=!0)})}),this.compute=ee(function(){console.time("compute order/visible/progress"),a.reOrder(),a.computeNotNoneInQuestionGroup(),a.computeProgress(),console.timeEnd("compute order/visible/progress")},10)}return(0,le.Z)(o,[{key:"makeObservable",value:function(){(0,M.Ou)(this,{progress:M.LO.ref,pagination:M.LO.shallow,questionsGroupByPagination:M.LO.ref,form:M.LO.ref,props:M.LO.shallow,answerSheet:M.LO,answerSheetVisible:M.LO.ref,reviewAnswer:M.LO,notNoneInQuestionGroup:M.LO,schema:M.LO.computed,computeProgress:M.aD,changeQuestionsGroupByPagination:M.aD,validate:M.aD,setDisplay:M.aD,handlePrev:M.aD,handleNext:M.aD,submit:M.aD,handleFormValuesChange:M.aD,changePageIndex:M.aD,handleFieldValueChange:M.aD,computeReviewAnswer:M.aD,computeNotNoneInQuestionGroup:M.aD,reOrder:M.aD})}},{key:"schema",get:function(){return this.props.schema}},{key:"changeQuestionsGroupByPagination",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;r?this.questionsGroupByPagination=(0,z._T)(a,t):this.questionsGroupByPagination=[a.children]}},{key:"highlightJs",value:function(){document.querySelectorAll(".ql-syntax").forEach(function(a){k.Z.highlightElement(a)})}},{key:"validate",value:function(){var i=(0,D.Z)(Y().mark(function r(t){var e,u;return Y().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(u=((e=this.questionsGroupByPagination[t])===null||e===void 0?void 0:e.reduce(function(l,s){return l.push.apply(l,(0,R.Z)((0,z.Xn)(s))),l},[]))||[],u.length!==0){d.next=3;break}return d.abrupt("return",!0);case 3:return d.abrupt("return",this.form.validate("*(".concat(u.map(function(l){return l.id}).join(","),")")));case 4:case"end":return d.stop()}},r,this)}));function a(r){return i.apply(this,arguments)}return a}()},{key:"setDisplay",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"visible",t=this.questionsGroupByPagination[a].filter(function(e){var u;return((u=e.attribute)===null||u===void 0?void 0:u.display)!=="hidden"}).map(function(e){return e.id}).join(",");t&&this.form.query("*(".concat(t,")")).forEach(function(e){r==="visible"&&(e.data=e.data.filter(function(u){return u!=="hidden"})),r==="hidden"&&e.data.indexOf("hidden")===-1&&e.data.push("hidden")})}},{key:"handlePrev",value:function(){var a=this.pagination,r=a.current-1;this.setDisplay(r,"hidden"),this.setDisplay(r-1,"visible"),this.pagination=(0,U.Z)((0,U.Z)({},a),{},{current:a.current-1})}},{key:"handleNext",value:function(){var i=(0,D.Z)(Y().mark(function r(t){var e,u;return Y().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.pagination.current-1,d.prev=1,d.next=4,this.validate(e);case 4:u=this.pagination,this.setDisplay(e,"hidden"),this.setDisplay(e+1,"visible"),this.pagination=(0,U.Z)((0,U.Z)({},u),{},{current:t||u.current+1}),d.next=13;break;case 10:d.prev=10,d.t0=d.catch(1),console.log(d.t0);case 13:case"end":return d.stop()}},r,this,[[1,10]])}));function a(r){return i.apply(this,arguments)}return a}()},{key:"changePageIndex",value:function(a){var r=this.questionsGroupByPagination.findIndex(function(u){return!!(u.reduce(function(c,d){return c.push.apply(c,(0,R.Z)((0,z.Xn)(d))),c},[])||[]).find(function(c){return c.id===a})}),t=this.pagination,e=t.current-1;this.setDisplay(e,"hidden"),this.setDisplay(r,"visible"),this.pagination=(0,U.Z)((0,U.Z)({},t),{},{current:r+1}),this.answerSheetVisible=!1}},{key:"handleFormValuesChange",value:function(){var i=(0,D.Z)(Y().mark(function r(){return Y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.computeProgress(),this.props.onChange&&this.props.onChange(this.form.values,this.progress);case 2:case"end":return e.stop()}},r,this)}));function a(){return i.apply(this,arguments)}return a}()},{key:"handleFieldValueChange",value:function(){var i=(0,D.Z)(Y().mark(function r(t,e){var u,c,d;return Y().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:d=t.path.toString(),(u=(c=this.props).onFieldChange)===null||u===void 0||u.call(c,d,(0,M.ZN)(t.value)),this.props.exerciseMode&&this.computeReviewAnswer(t.componentProps.schema,t.value);case 3:case"end":return s.stop()}},r,this)}));function a(r,t){return i.apply(this,arguments)}return a}()},{key:"computeReviewAnswer",value:function(){var i=(0,D.Z)(Y().mark(function r(t,e){var u,c,d,l;return Y().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(u=!1,this.props.mode!=="exam"){m.next=10;break}if(d=this.reviewAnswer[t.id],l=t.type,["FillBlank","MultipleBlank","HorzBlank","Radio","Checkbox"].includes(t.type)){m.next=6;break}return m.abrupt("return");case 6:if((c=t.attribute)!==null&&c!==void 0&&c.examAnswerMode&&["selectAll","selectCorrect","onlyOne","select"].includes(t.attribute.examAnswerMode)){m.next=8;break}return m.abrupt("return");case 8:u=!0,this.reviewAnswer[t.id]=t.children.reduce(function(f,Z){var W,$=!!((W=Z.attribute)!==null&&W!==void 0&&W.examCorrectAnswer);if(l==="FillBlank"||l==="MultipleBlank"||l==="Textarea"||l==="HorzBlank"){var v,B,F=(v=Z.attribute)===null||v===void 0?void 0:v.examMatchRule,V=e==null?void 0:e[Z.id],T=(B=Z.attribute)===null||B===void 0?void 0:B.examCorrectAnswer;!V||!T?$=!1:F==="contain"&&V.includes(T.trim())||V===T?$=!0:$=!1}return f[Z.id]={selected:!!(e!=null&&e.hasOwnProperty(Z.id)),isCorrect:$},f},{visible:!!(d!=null&&d.visible)});case 10:return m.abrupt("return",u);case 11:case"end":return m.stop()}},r,this)}));function a(r,t){return i.apply(this,arguments)}return a}()},{key:"computeProgress",value:function(){var a=this;if(!!this.props.progressBar){var r=0,t=0;this.form.query("*").forEach(function(e){var u=a.answerSheet.find(function(c){return c.id===e.path.toString()});e.displayName==="Field"&&!e.path.toString().startsWith("_")&&(u&&(u.display=e.display),e.data.filter(function(c){return c!=="hidden"}).length===0&&r++,!(0,z.xb)(e.value)&&e.componentProps.schema.attribute.display!=="hidden"?(t++,u&&(u.finished=!0)):u&&(u.finished=!1))}),this.progress=t/r}}},{key:"computeNotNoneInQuestionGroup",value:function(){var a=this;this.notNoneInQuestionGroup=this.questionsGroupByPagination.map(function(r){return r.map(function(t){var e,u=a.form.query(t.id).take();if(u&&((e=t.attribute)===null||e===void 0?void 0:e.display)!=="hidden"&&u.display!=="none")return t.id}).filter(function(t){return t!==void 0})})}},{key:"reOrder",value:function(){var a,r=this;if(!!this.props.questionNumber){var t=1;(a=this.schema.children)===null||a===void 0||a.filter(function(e){return!(0,z.nj)(e.type)||e.type==="QuestionSet"}).forEach(function(e){var u,c=e.id,d=r.form.query(c).get("display");if(d!=="none"&&((u=e.attribute)===null||u===void 0?void 0:u.display)!=="hidden"){var l=r.form.query(c).take();l&&(l.setDecoratorProps((0,U.Z)((0,U.Z)({},l.decoratorProps),{},{seqNo:t})),t++);var s=1;if(e.type==="QuestionSet"){var m;(m=e.children)===null||m===void 0||m.filter(function(f){return!(0,z.nj)(f.type)}).forEach(function(f){var Z=f.id,W=r.form.query(Z).get("display");if(W==="visible"){var $=r.form.query(Z).take();$&&($.setDecoratorProps((0,U.Z)((0,U.Z)({},$.decoratorProps),{},{seqNo:s})),s++)}})}}})}}},{key:"submit",value:function(){var i=(0,D.Z)(Y().mark(function r(){var t,e,u,c,d,l,s,m,f,Z,W;return Y().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:t="",e=this.form.query("*").map().filter(function(B){return!(0,fe.JF)(B)}),u=(0,j.Z)(e),v.prev=3,u.s();case 5:if((c=u.n()).done){v.next=31;break}if(m=c.value,!(0,fe.JF)(m)){v.next=9;break}return v.abrupt("continue",29);case 9:if(t=m.path.toString(),f=((d=this.props.schema.children)===null||d===void 0||(l=d.find(function(B){return B.id===t}))===null||l===void 0||(s=l.attribute)===null||s===void 0?void 0:s.display)==="hidden",!f){v.next=13;break}return v.abrupt("continue",29);case 13:if(Z=m.display,Z!=="none"){v.next=16;break}return v.abrupt("continue",29);case 16:return W=m.selfDisplay,m.display="visible",v.prev=18,v.next=21,m.validate();case 21:m.display=W,v.next=29;break;case 24:return v.prev=24,v.t0=v.catch(18),this.changePageIndex(t),(0,z.lA)(t,this.props.progressBar?-25:0),v.abrupt("return");case 29:v.next=5;break;case 31:v.next=36;break;case 33:v.prev=33,v.t1=v.catch(3),u.e(v.t1);case 36:return v.prev=36,u.f(),v.finish(36);case 39:return this.props.onSubmit&&this.props.onSubmit((0,M.ZN)(this.form.values)),v.abrupt("return",{values:(0,M.ZN)(this.form.values)});case 41:case"end":return v.stop()}},r,this,[[3,33,36,39],[18,24]])}));function a(){return i.apply(this,arguments)}return a}()},{key:"markQuestion",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.answerSheet,e=t.findIndex(function(u){return u.id===a});this.answerSheet.splice(e,1,(0,U.Z)((0,U.Z)({},t[e]),{},{marked:r}))}}]),o}();function ee(o,i,a){var r=void 0,t=void 0;return function(){var e=+new Date;t||(t=e),a&&e-t>a?(o(),t=e,window.clearTimeout(r)):(window.clearTimeout(r),r=window.setTimeout(function(){o(),t=void 0},i))}}var ue=n(99439),te=n(27484),ne=n.n(te),he=n(90019),se=n(10192);function K(o,i){var a,r,t=i.id,e=[];if((a=i.parent)!==null&&a!==void 0&&(r=a.type)!==null&&r!==void 0&&r.startsWith("Matrix"))if(i.parent.type==="MatrixAuto"&&Array.isArray(o))o.forEach(function(l,s){e.push(["".concat(s,"-").concat(t),l[i.id]])});else{var u;(u=i.parent.row)===null||u===void 0||u.forEach(function(l){o[l.id]?e.push(["".concat(l.id,"-").concat(t),o[l.id][i.id]]):e.push(["".concat(l.id,"-").concat(t),void 0])})}else{var c,d=(c=i.parent)===null||c===void 0?void 0:c.type;d==="Radio"||d==="Checkbox"?Object.keys(o).includes(i.id)&&e.push([i.id,o[i.id]]):e.push([i.id,o[i.id]])}return e}function de(o){return!isNaN(parseFloat(o))&&isFinite(o)}function Ce(o){return!!(de(o)&&Number.isInteger(parseFloat(o)))}function oe(o){var i=o.errMsg,a=o.schema,r=o.regEx,t=o.value;return a?re({schema:a,value:t,errMsg:i,isValid:function(u){return u?r.test("".concat(u)):!0}}):null}function Pe(o){var i,a=o.schema,r=o.value,t=o.errMsg,e=((i=a.children)===null||i===void 0?void 0:i.filter(function(l){var s;return(s=l.attribute)===null||s===void 0?void 0:s.exclusiveFillBlankInMatrix}))||[],u=JSON.parse(JSON.stringify(r));Object.values(u).forEach(function(l){e.map(function(s){return s.id}).forEach(function(s){delete l[s]})});var c=!1;if(a.type==="MatrixAuto")r&&r.length>0&&(c=!0);else{var d;c=(d=a.row)===null||d===void 0?void 0:d.every(function(l){var s=u[l.id];return!(0,z.xb)(s)})}return c?null:t}function re(o){var i=o.value,a=o.schema,r=o.isValid,t=o.errMsg;return!a||!a.parent?null:K(i,a).map(function(e){var u=(0,w.Z)(e,2),c=u[0],d=u[1];return r(d)?null:"".concat(c,"^").concat(t)}).filter(function(e){return e})[0]}function Re(o){if(Object.keys(o).length===0)return!0}function Oe(o){var i=o.substring(6,8),a=o.substring(8,10),r=o.substring(10,12),t=new Date(parseFloat(i),parseFloat(a)-1,parseFloat(r));return!(t.getFullYear()-1900!==parseFloat(i)||t.getMonth()!==parseFloat(a)-1||t.getDate()!==parseFloat(r))}function Ne(o){var i=o;if(o.length!==15&&o.length!==18)return!1;if(o.length===15)return Oe(i);var a={11:"\u5317\u4EAC",12:"\u5929\u6D25",13:"\u6CB3\u5317",14:"\u5C71\u897F",15:"\u5185\u8499\u53E4",21:"\u8FBD\u5B81",22:"\u5409\u6797",23:"\u9ED1\u9F99\u6C5F ",31:"\u4E0A\u6D77",32:"\u6C5F\u82CF",33:"\u6D59\u6C5F",34:"\u5B89\u5FBD",35:"\u798F\u5EFA",36:"\u6C5F\u897F",37:"\u5C71\u4E1C",41:"\u6CB3\u5357",42:"\u6E56\u5317 ",43:"\u6E56\u5357",44:"\u5E7F\u4E1C",45:"\u5E7F\u897F",46:"\u6D77\u5357",50:"\u91CD\u5E86",51:"\u56DB\u5DDD",52:"\u8D35\u5DDE",53:"\u4E91\u5357",54:"\u897F\u85CF ",61:"\u9655\u897F",62:"\u7518\u8083",63:"\u9752\u6D77",64:"\u5B81\u590F",65:"\u65B0\u7586",71:"\u53F0\u6E7E",81:"\u9999\u6E2F",82:"\u6FB3\u95E8",91:"\u56FD\u5916 "},r=!0;if(!i||!/^([1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx])|([1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2})$/i.test(i))r=!1;else if(!a[i.substr(0,2)])r=!1;else if(i.length>18)r=!1;else if(i.length===18){for(var t=i.split(""),e=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],u=[1,0,"X",9,8,7,6,5,4,3,2],c=0,d=0,l=0,s=0;s<17;s+=1)d=parseInt(t[s],10),l=e[s],c+=d*l;var m=t[17].toUpperCase()==="X"?"X":Number(t[17]);u[c%11]!==m&&(r=!1)}return r}var Ae={required:function(i,a){var r,t=a.schema,e=a.theme;return a&&a.required===!1?null:(0,z.xb)(i)?e==="antdForm"?"\u8BF7\u8F93\u5165":"\u8FD9\u9053\u9898\u672A\u56DE\u7B54":t!=null&&(r=t.type)!==null&&r!==void 0&&r.startsWith("Matrix")?Pe({schema:t,errMsg:"\u95EE\u9898\u672A\u56DE\u7B54\u5B8C\u6574",value:i}):t!=null&&t.parent?re({schema:t,value:i,errMsg:"\u8FD9\u4E2A\u9009\u9879\u672A\u56DE\u7B54",isValid:function(c){return!(0,z.xb)(c)}}):null},answerLimit:function(i,a){var r,t=a.schema,e=t==null||(r=t.attribute)===null||r===void 0?void 0:r.answerLimit;if(!e)return null;var u=e.slice(1,e.length-1).split(","),c=parseInt(u[0]||"0"),d=parseInt(u[1]||"0"),l=Object.keys(i||{}).length;return i&&(l<c&&c!==0||l>d&&d!==0)?c===0?"\u6700\u591A\u9009\u62E9".concat(d,"\u9879"):d===0?"\u6700\u5C11\u9009\u62E9".concat(c,"\u9879"):"\u6700\u5C11\u9009\u62E9".concat(c,"\u9879,\u6700\u591A\u9009\u62E9").concat(d,"\u9879"):null},number:function(i,a){var r,t=a.schema,e=t==null||(r=t.attribute)===null||r===void 0?void 0:r.numericScale;if(!t)return null;var u="\u8BF7\u8F93\u5165\u6570\u5B57";return e===0?u="\u8BF7\u8F93\u5165\u6574\u6570":e&&e>0&&(u="\u8BF7\u4FDD\u7559".concat(e,"\u4F4D\u5C0F\u6570")),re({errMsg:u,schema:t,value:i,isValid:function(d){return!(d!==void 0&&(!de(d)||e===0&&!Ce(d)||e!==void 0&&e>0&&("".concat(d).split(".")[1]||"").length>e))}})},date:function(i,a){var r,t=a.schema;if(t!=null&&(r=t.attribute)!==null&&r!==void 0&&r.dateTimeFormat&&i&&i[t.id]){var e=ne()(i[t.id],t.attribute.dateTimeFormat).isValid();return e?null:"\u65E5\u671F\u683C\u5F0F\u4E0D\u6B63\u786E"}return oe({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F",schema:t,regEx:/^(?:(?:1[6-9]|[2-9][0-9])[0-9]{2}([-/.]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:(?:1[6-9]|[2-9][0-9])(?:0[48]|[2468][048]|[13579][26])|(?:16|[2468][048]|[3579][26])00)([-/.]?)0?2\2(?:29))(\s+([01][0-9]:|2[0-3]:)?[0-5][0-9]:[0-5][0-9])?$/,value:i})},dateTime:function(i,a){var r=a.schema;return oe({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F\u65F6\u95F4",schema:r,regEx:/^\d{4}[-]([0][1-9]|(1[0-2]))[-]([1-9]|([012]\d)|(3[01]))\s(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:i})},time:function(i,a){var r=a.schema;return oe({errMsg:"\u8BF7\u8F93\u5165\u65F6\u95F4",schema:r,regEx:/^(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:i})},mobile:function(i,a){var r=a.schema;return oe({errMsg:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",schema:r,regEx:/^1([358][0-9]|4[579]|66|7[01235678]|9[189])[0-9]{8}$/,value:i})},decimal:function(i,a){var r=a.schema;return oe({errMsg:"\u8BF7\u8F93\u5165\u6570\u5B57",schema:r,regEx:/^[+-]?\d+(\.\d+)?$/,value:i})},email:function(i,a){var r=a.schema;return oe({errMsg:"\u90AE\u4EF6\u683C\u5F0F\u4E0D\u6B63\u786E",schema:r,regEx:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,value:i})},idCard:function(i,a){var r=a.schema;return re({errMsg:"\u8EAB\u4EFD\u8BC1\u683C\u5F0F\u4E0D\u6B63\u786E",schema:r,value:i,isValid:function(e){return!(e&&!Ne("".concat(e)))}})},chinese:function(i,a){var r=a.schema;return oe({errMsg:"\u8BF7\u8F93\u5165\u6C49\u5B57",schema:r,regEx:/^[\u4e00-\u9fa5]+$/,value:i})},alphabet:function(i,a){var r=a.schema;return oe({errMsg:"\u8BF7\u8F93\u5165\u5B57\u6BCD",schema:r,regEx:/^[a-zA-Z]+$/,value:i})},textLimit:function(i,a){var r,t=a.schema,e=t==null||(r=t.attribute)===null||r===void 0?void 0:r.textLimit;if(!e)return null;var u=e.slice(1,e.length-1).split(","),c=parseInt(u[0]||"0"),d=parseInt(u[1]||"0");if(c===0&&d===0)return null;var l=re({errMsg:c!==d?"\u8BF7\u8F93\u5165".concat(c,"~").concat(d,"\u4E2A\u5B57"):"\u8BF7\u8F93\u5165".concat(c,"\u4E2A\u5B57"),schema:t,value:i,isValid:function(m){return!(m&&("".concat(m).length<c||"".concat(m).length>d))}});return l},scope:function(i,a){var r,t,e=a.schema,u=e==null||(r=e.attribute)===null||r===void 0?void 0:r.scope,c=e==null||(t=e.attribute)===null||t===void 0?void 0:t.dataType;if(u&&c){if(c==="number")return re({errMsg:"\u6570\u503C\u8303\u56F4\u4E0D\u6B63\u786E ".concat(u),schema:e,value:i,isValid:function(l){return!(l&&!(0,se.$l)(u,"".concat(l)))}});if(c==="date")return re({errMsg:"\u65E5\u671F\u8303\u56F4\u4E0D\u6B63\u786E ".concat(u),schema:e,value:i,isValid:function(l){return!(l&&!(0,se.sm)(u,"".concat(l)))}});if(c==="dateTime")return re({errMsg:"\u65E5\u671F\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(u),schema:e,value:i,isValid:function(l){return!(l&&!(0,se.de)(u,"".concat(l)))}});if(c==="time")return re({errMsg:"\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(u),schema:e,value:i,isValid:function(l){return!(l&&!(0,se.YM)(u,"".concat(l)))}})}return null},horzBlank:function(i,a){return(0,D.Z)(Y().mark(function r(){var t,e,u,c,d,l,s,m;return Y().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(e=a.schema,!((e==null||(t=e.attribute)===null||t===void 0?void 0:t.dataType)!=="horzBlank"||i[e.id]===void 0||!e.children||!e.parent)){Z.next=3;break}return Z.abrupt("return",null);case 3:u=null,c=0;case 5:if(!(c<((d=e.children)===null||d===void 0?void 0:d.length))){Z.next=15;break}return l=e.children[c],s=(0,he.j)(l,e),Z.next=10,(0,ue.Gu)(i[e.id],s,{validateFirst:!0});case 10:m=Z.sent,m.error&&m.error.length>0&&(u=m.error[0]);case 12:c++,Z.next=5;break;case 15:return Z.abrupt("return",u);case 16:case"end":return Z.stop()}},r)}))()}};(0,ue.au)(Ae);var je=n(8166),Me=n(8373),Te=n(3980),xe=n(85893);window.katex=je.Z;var Be=(0,C.forwardRef)(function(o,i){var a=o.theme,r=a===void 0?_.uH:a,t=o.footerVisible,e=t===void 0?!0:t,u=o.headerVisible,c=u===void 0?!0:u,d=o.loading,l=o.questionNumber,s=l===void 0?!0:l,m=o.onUpload,f=o.progressBar,Z=f===void 0?!1:f,W=o.statistics,$=o.isPreview,v=o.mode,B=v===void 0?"survey":v,F=o.correctAnswerVisible,V=F===void 0?!1:F,T=o.examScoreVisible,N=T===void 0?!1:T,L=o.onDictSearch,Q=(0,C.useMemo)(function(){return new H(o)},[]),X=Q.form,ie=(0,C.useMemo)(function(){return(0,z.Gt)(o.schema)},[o.schema]),me=(0,C.useMemo)(function(){var ae={},ge=function be(h){ae[h.id]=h.title,h.children&&h.children.forEach(be)};return ge(ie),document.title=(0,Te.WO)(ie.title),ae},[ie]),ye=(0,C.useMemo)(function(){return(0,z.R6)(o.schema)},[o.schema]);(0,C.useImperativeHandle)(i,function(){return{submit:function(){return Q.submit()},reset:function(){X.reset()},setValues:function(ge){X.setValues(ge,"overwrite")},setValue:function(ge,be){X.setFieldState(ge,function(h){return h.value=be})},toggleReadOnly:function(ge){X.setState(function(be){be.pattern=ge?"readPretty":"editable"})},getValues:function(){return X.values}}}),(0,C.useEffect)(function(){o.onInit&&o.onInit(X)},[]);var Ze=(0,C.useMemo)(function(){return{theme:r,schema:ie,footerVisible:e,questionNumber:s,headerVisible:c,optionTypes:ye,onUpload:m,loading:d,id2title:me,progressBar:Z,innerStore:Q,statistics:W,isPreview:$,mode:B,correctAnswerVisible:V,examScoreVisible:N,onDictSearch:L}},[d,ie,W]);return(0,xe.jsx)(C.Suspense,{fallback:(0,xe.jsx)(Me.gb,{}),children:(0,xe.jsx)(Me.ZP,{theme:r,children:(0,xe.jsx)(I.RV,{form:X,children:(0,xe.jsx)(ve.Z.Provider,{value:Ze,children:(0,xe.jsx)(b.k9,{schema:ie})})})})})}),De=Be},90019:function(Ee,ce,n){"use strict";n.d(ce,{r:function(){return ve},j:function(){return _}});var I=n(32059),C=n(11849),b=n(83279);function ve(j,U){var R,D=[],w=j.attribute;return w&&w.required&&D.push({required:!0,triggerType:"onInput",theme:U,schema:j}),w&&w.answerLimit&&D.push({answerLimit:!0,schema:j}),(R=j.children)===null||R===void 0||R.forEach(function(q){D.push.apply(D,(0,b.Z)(_(q,j)))}),D.forEach(function(q){q.triggerType="manual"}),D}function _(j,U){var R,D,w,q,le=[];if((R=j.attribute)!==null&&R!==void 0&&R.dataType){var pe;le.push((pe={},(0,I.Z)(pe,j.attribute.dataType,!0),(0,I.Z)(pe,"schema",(0,C.Z)((0,C.Z)({},j),{},{parent:U})),pe))}return(D=j.attribute)!==null&&D!==void 0&&D.required&&le.push({required:!0,schema:(0,C.Z)((0,C.Z)({},j),{},{parent:U})}),(w=j.attribute)!==null&&w!==void 0&&w.textLimit&&le.push({textLimit:!0,schema:(0,C.Z)((0,C.Z)({},j),{},{parent:U})}),(q=j.attribute)!==null&&q!==void 0&&q.scope&&le.push({scope:!0,schema:(0,C.Z)((0,C.Z)({},j),{},{parent:U})}),le}},8373:function(Ee,ce,n){"use strict";n.d(ce,{gb:function(){return j}});var I=n(67294),C=n(85893),b=I.lazy(function(){return Promise.all([n.e(1693),n.e(9444),n.e(3546),n.e(2333),n.e(5759),n.e(3894),n.e(9217),n.e(6945),n.e(6917),n.e(780),n.e(1044),n.e(6547),n.e(1464),n.e(2306)]).then(n.bind(n,62306))}),ve=I.lazy(function(){return Promise.all([n.e(1693),n.e(9444),n.e(3546),n.e(1642),n.e(2333),n.e(9217),n.e(6917),n.e(780),n.e(1044),n.e(6547),n.e(5625),n.e(7998),n.e(4390)]).then(n.bind(n,49671))}),_=I.lazy(function(){return Promise.all([n.e(1693),n.e(3546),n.e(1642),n.e(5759),n.e(3894),n.e(1044),n.e(3672)]).then(n.bind(n,17707))}),j=function(){return(0,C.jsx)("div",{className:"page-loading-warp",children:(0,C.jsxs)("div",{className:"spinner",children:[(0,C.jsx)("div",{className:"rect1"}),(0,C.jsx)("div",{className:"rect2"}),(0,C.jsx)("div",{className:"rect3"}),(0,C.jsx)("div",{className:"rect4"}),(0,C.jsx)("div",{className:"rect5"})]})})},U=function(D){var w=D.theme,q=D.children;return w==="antdMobile"?(0,C.jsx)(ve,{children:q}):w==="antdForm"?(0,C.jsx)(_,{children:q}):(0,C.jsx)(b,{children:q})};ce.ZP=U}}]);
