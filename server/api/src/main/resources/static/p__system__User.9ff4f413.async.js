(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7915],{43347:function(pe,w,e){"use strict";e.d(w,{Z:function(){return K}});var $=e(28991),M=e(67294),ee={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},F=ee,C=e(27029),U=function(N,te){return M.createElement(C.Z,(0,$.Z)((0,$.Z)({},N),{},{ref:te,icon:F}))};U.displayName="InboxOutlined";var K=M.forwardRef(U)},84391:function(pe,w,e){"use strict";e.d(w,{Z:function(){return K}});var $=e(28991),M=e(67294),ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},F=ee,C=e(27029),U=function(N,te){return M.createElement(C.Z,(0,$.Z)((0,$.Z)({},N),{},{ref:te,icon:F}))};U.displayName="UploadOutlined";var K=M.forwardRef(U)},64317:function(pe,w,e){"use strict";var $=e(22122),M=e(28991),ee=e(81253),F=e(22270),C=e(67294),U=e(66758),K=e(60692),de=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],N=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],te=C.forwardRef(function(h,he){var H=h.fieldProps,Ee=h.children,se=h.params,ge=h.proFieldProps,ne=h.mode,a=h.valueEnum,ce=h.request,B=h.showSearch,T=h.options,re=(0,ee.Z)(h,de),ae=(0,C.useContext)(U.Z);return C.createElement(K.Z,(0,$.Z)({mode:"edit",valueEnum:(0,F.h)(a),request:ce,params:se,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,M.Z)({options:T,mode:ne,showSearch:B,getPopupContainer:ae.getPopupContainer},H),ref:he,proFieldProps:ge},re),Ee)}),p=C.forwardRef(function(h,he){var H=h.fieldProps,Ee=h.children,se=h.params,ge=h.proFieldProps,ne=h.mode,a=h.valueEnum,ce=h.request,B=h.options,T=(0,ee.Z)(h,N),re=(0,M.Z)({options:B,mode:ne||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},H),ae=(0,C.useContext)(U.Z);return C.createElement(K.Z,(0,$.Z)({mode:"edit",valueEnum:(0,F.h)(a),request:ce,params:se,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,M.Z)({getPopupContainer:ae.getPopupContainer},re),ref:he,proFieldProps:ge},T),Ee)}),De=te,z=p,fe=De;fe.SearchSelect=z,fe.displayName="ProFormComponent",w.Z=fe},50727:function(pe,w,e){"use strict";var $=e(9715),M=e(86835),ee=e(57663),F=e(71577),C=e(22122),U=e(96156),K=e(28481),de=e(81253),N=e(55507),te=e(92137),p=e(28991),De=e(49101),z=e(97462),fe=e(26369),h=e(22270),he=e(48171),H=e(60249),Ee=e(48526),se=e(21770),ge=e(88306),ne=e(8880),a=e(67294),ce=e(44309),B=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],T=["record","position","creatorButtonText","newRecordType","parentKey","style"],re=a.createContext(void 0);function ae(t){var S=t.children,y=t.record,Pe=t.position,ve=t.newRecordType,L=t.parentKey,le=(0,a.useContext)(re);return a.cloneElement(S,(0,p.Z)((0,p.Z)({},S.props),{},{onClick:function(){var G=(0,te.Z)((0,N.Z)().mark(function Ce(Q){var X,oe,Y,ue;return(0,N.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(X=(oe=S.props).onClick)===null||X===void 0?void 0:X.call(oe,Q);case 2:if(ue=n.sent,ue!==!1){n.next=5;break}return n.abrupt("return");case 5:le==null||(Y=le.current)===null||Y===void 0||Y.addEditRecord(y,{position:Pe,newRecordType:ve,parentKey:L});case 6:case"end":return n.stop()}},Ce)}));function J(Ce){return G.apply(this,arguments)}return J}()}))}function ye(t){var S,y,Pe=t.onTableChange,ve=t.maxLength,L=t.formItemProps,le=t.recordCreatorProps,G=t.rowKey,J=t.controlled,Ce=t.defaultValue,Q=t.onChange,X=t.editableFormRef,oe=(0,de.Z)(t,B),Y=(0,fe.Z)(t.value),ue=(0,a.useRef)(),j=(0,a.useRef)();(0,a.useImperativeHandle)(oe.actionRef,function(){return ue.current});var n=(0,se.Z)(function(){return t.value||Ce||[]},{value:t.value,onChange:t.onChange}),Oe=(0,K.Z)(n,2),E=Oe[0],Te=Oe[1],k=a.useMemo(function(){return typeof G=="function"?G:function(m,r){return m[G]||r}},[G]),Re=function(r){if(typeof r=="number"&&!t.name){if(r>=E.length)return r;var l=E==null?void 0:E.at(r);return k==null?void 0:k(l,r)}if((typeof r=="string"||r>=E.length)&&t.name){var o=E.findIndex(function(i,c){var d;return(k==null||(d=k(i,c))===null||d===void 0?void 0:d.toString())===(r==null?void 0:r.toString())});return o}return r};(0,a.useImperativeHandle)(X,function(){var m=function(o){var i,c;if(o==null)throw new Error("rowIndex is required");var d=Re(o),V=[t.name,(i=d==null?void 0:d.toString())!==null&&i!==void 0?i:""].flat(1).filter(Boolean);return(c=j.current)===null||c===void 0?void 0:c.getFieldValue(V)},r=function(){var o,i=[t.name].flat(1).filter(Boolean);if(Array.isArray(i)&&i.length===0){var c,d=(c=j.current)===null||c===void 0?void 0:c.getFieldsValue();return Array.isArray(d)?d:Object.keys(d).map(function(V){return d[V]})}return(o=j.current)===null||o===void 0?void 0:o.getFieldValue(i)};return(0,p.Z)((0,p.Z)({},j.current),{},{getRowData:m,getRowsData:r,setRowData:function(o,i){var c,d,V,me;if(o==null)throw new Error("rowIndex is required");var x=Re(o),P=[t.name,(c=x==null?void 0:x.toString())!==null&&c!==void 0?c:""].flat(1).filter(Boolean),u=((d=j.current)===null||d===void 0||(V=d.getFieldsValue)===null||V===void 0?void 0:V.call(d))||{},f=(0,ne.Z)(u,P,(0,p.Z)((0,p.Z)({},m(o)),i||{}));return(me=j.current)===null||me===void 0?void 0:me.setFieldsValue(f)}})}),(0,a.useEffect)(function(){!t.controlled||E.forEach(function(m,r){var l;(l=j.current)===null||l===void 0||l.setFieldsValue((0,U.Z)({},k(m,r),m))},{})},[E,t.controlled]),(0,a.useEffect)(function(){if(t.name){var m;j.current=t==null||(m=t.editable)===null||m===void 0?void 0:m.form}},[(S=t.editable)===null||S===void 0?void 0:S.form,t.name]);var _=le||{},Fe=_.record,Ze=_.position,Be=_.creatorButtonText,Ie=_.newRecordType,Me=_.parentKey,D=_.style,b=(0,de.Z)(_,T),v=Ze==="top",g=(0,a.useMemo)(function(){return ve&&ve<=(E==null?void 0:E.length)?!1:le!==!1&&a.createElement(ae,{record:(0,h.h)(Fe,E==null?void 0:E.length,E)||{},position:Ze,parentKey:(0,h.h)(Me,E==null?void 0:E.length,E),newRecordType:Ie},a.createElement(F.Z,(0,C.Z)({type:"dashed",style:(0,p.Z)({display:"block",margin:"10px 0",width:"100%"},D),icon:a.createElement(De.Z,null)},b),Be||"\u6DFB\u52A0\u4E00\u884C\u6570\u636E"))},[le,ve,E==null?void 0:E.length]),q=(0,a.useMemo)(function(){return g?v?{components:{header:{wrapper:function(r){var l,o=r.className,i=r.children;return a.createElement("thead",{className:o},i,a.createElement("tr",{style:{position:"relative"}},a.createElement("td",{colSpan:0,style:{visibility:"hidden"}},g),a.createElement("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(l=oe.columns)===null||l===void 0?void 0:l.length},g)))}}}}:{tableViewRender:function(r,l){var o,i;return a.createElement(a.Fragment,null,(o=(i=t.tableViewRender)===null||i===void 0?void 0:i.call(t,r,l))!==null&&o!==void 0?o:l,g)}}:{}},[v,g]),A=(0,p.Z)({},t.editable),I=(0,he.J)(function(m,r){var l,o,i;if((l=t.editable)===null||l===void 0||(o=l.onValuesChange)===null||o===void 0||o.call(l,m,r),(i=t.onValuesChange)===null||i===void 0||i.call(t,r,m),t.controlled){var c;t==null||(c=t.onChange)===null||c===void 0||c.call(t,r)}});return((t==null?void 0:t.onValuesChange)||((y=t.editable)===null||y===void 0?void 0:y.onValuesChange)||t.controlled&&(t==null?void 0:t.onChange))&&(A.onValuesChange=I),a.createElement(a.Fragment,null,a.createElement(re.Provider,{value:ue},a.createElement(ce.Z,(0,C.Z)({search:!1,options:!1,pagination:!1,rowKey:G,revalidateOnFocus:!1},oe,q,{tableLayout:"fixed",actionRef:ue,onChange:Pe,editable:(0,p.Z)((0,p.Z)({},A),{},{formProps:(0,p.Z)({formRef:j},A.formProps)}),dataSource:E,onDataSourceChange:function(r){if(Te(r),t.name&&Ze==="top"){var l,o=(0,ne.Z)({},[t.name].flat(1).filter(Boolean),r);(l=j.current)===null||l===void 0||l.setFieldsValue(o)}}}))),t.name?a.createElement(z.Z,{name:[t.name]},function(m){var r,l,o=(0,ge.Z)(m,[t.name].flat(1)),i=o==null?void 0:o.find(function(c,d){return!(0,H.Z)(c,Y==null?void 0:Y[d])});return i&&(t==null||(r=t.editable)===null||r===void 0||(l=r.onValuesChange)===null||l===void 0||l.call(r,i,o)),null}):null)}function xe(t){return t.name?a.createElement(M.Z.Item,(0,C.Z)({style:{maxWidth:"100%"}},t==null?void 0:t.formItemProps,{name:t.name}),a.createElement(Ee.Field,{shouldUpdate:!0,name:t.name,isList:!0},function(S,y,Pe){return a.createElement(ye,(0,C.Z)({},t,{editable:(0,p.Z)((0,p.Z)({},t.editable),{},{form:Pe}),value:S.value||[],onChange:S.onChange}))})):a.createElement(ye,t)}xe.RecordCreator=ae,w.Z=xe},87113:function(pe,w,e){"use strict";e.r(w),e.d(w,{default:function(){return Me}});var $=e(13062),M=e(71230),ee=e(57663),F=e(71577),C=e(3182),U=e(89032),K=e(15746),de=e(59250),N=e(13013),te=e(30887),p=e(28682),De=e(34792),z=e(48086),fe=e(47673),h=e(4107),he=e(71194),H=e(50146),Ee=e(49111),se=e(19650),ge=e(71153),ne=e(60331),a=e(94657),ce=e(94043),B=e.n(ce),T=e(3980),re=e(57254),ae=e(49101),ye=e(84391),xe=e(99937),t=e(16894),S=e(77613),y=e(67294),Pe=e(43358),ve=e(34041),L=e(11849),le=e(62999),G=e(54680),J=e(952),Ce=e(71975),Q=e(5966),X=e(64317),oe=e(86468),Y=e(60780),ue=e.n(Y),j=e(50727),n=e(85893),Oe=(0,S.P)(function(D){var b,v=D.user,g=D.readonly,q=D.onClose,A=D.onOk,I=(0,T.m2)(),m=(0,y.useRef)(),r=v==null||(b=v.roles)===null||b===void 0?void 0:b.map(function(u){return u.id}),l=!!(v!=null&&v.id),o=I.depts,i=I.positions,c=(0,y.useState)(function(){var u;return(v==null||(u=v.userPositions)===null||u===void 0?void 0:u.map(function(f){return f.id}))||[]}),d=(0,a.Z)(c,2),V=d[0],me=d[1],x=(0,y.useMemo)(function(){return ue()(o.map(function(u){return{value:u.id,title:u.name,key:u.id,parentId:u.parentId}}),{parentProperty:"parentId",customID:"value"})},[o]);(0,y.useEffect)(function(){i.length===0&&I.loadPositions({pageSize:1024})},[]);var P=[{title:"\u673A\u6784\u540D\u79F0",dataIndex:"deptId",width:"30%",renderFormItem:function(f,s,O){var R=s.type,Z=s.defaultRender,W=s.fieldProps;return R==="form"?(0,n.jsx)(G.Z,(0,L.Z)((0,L.Z)({allowClear:!0,treeData:x},W),{},{placeholder:"\u8BF7\u9009\u62E9\u673A\u6784"})):Z(f)}},{title:"\u5C97\u4F4D\u540D\u79F0",dataIndex:"positionId",width:"50%",renderFormItem:function(f,s,O){var R=s.type,Z=s.defaultRender;return R==="form"?(0,n.jsx)(ve.Z,{options:i.map(function(W){return{label:W.name,value:W.id}}),placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D"}):Z(f)}},{title:"\u64CD\u4F5C",valueType:"option",width:200}];return(0,n.jsxs)(Ce.a,{title:g?"\u7CFB\u7EDF\u7528\u6237\u8BE6\u60C5":l?"\u4FEE\u6539\u7528\u6237":"\u65B0\u5EFA\u7528\u6237",formRef:m,visible:!0,initialValues:(0,L.Z)((0,L.Z)({},v),{},{roles:r}),submitter:{submitButtonProps:{style:{display:g?"none":"block"}}},drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){q()}},onFinish:function(){var u=(0,C.Z)(B().mark(function f(s){var O;return B().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,I.saveOrUpdateUser((0,L.Z)((0,L.Z)({},v),s));case 2:O=Z.sent,O.success&&A();case 4:case"end":return Z.stop()}},f)}));return function(f){return u.apply(this,arguments)}}(),children:[(0,n.jsxs)(J.ZP.Group,{children:[(0,n.jsx)(Q.Z,{name:"name",width:"md",label:"\u7528\u6237\u540D",tooltip:"\u6700\u957F\u4E3A 24 \u4F4D",id:"form-name",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",readonly:g,required:!0,rules:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,n.jsx)(Q.Z,{width:"md",readonly:g,name:"username",label:"\u767B\u5F55\u540D",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u6237\u540D\u79F0",rules:[{required:!0,message:"\u767B\u5F55\u540D\u4E0D\u80FD\u4E3A\u7A7A"},{validator:function(){var u=(0,C.Z)(B().mark(function s(O,R){var Z;return B().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(R!==(v==null?void 0:v.username)){ie.next=2;break}return ie.abrupt("return");case 2:return ie.next=4,T.hi.checkUsernameExist(R);case 4:if(Z=ie.sent,!Z){ie.next=7;break}throw new Error("\u767B\u5F55\u540D\u5DF2\u5B58\u5728!");case 7:case"end":return ie.stop()}},s)}));function f(s,O){return u.apply(this,arguments)}return f}()}],required:!0})]}),!l&&(0,n.jsxs)(J.ZP.Group,{children:[(0,n.jsx)(Q.Z.Password,{width:"md",readonly:g,name:"password",label:"\u8F93\u5165\u5BC6\u7801",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!l,message:"\u8BF7\u8F93\u5165\u5BC6\u7801!"}],required:!l}),(0,n.jsx)(Q.Z.Password,{width:"md",readonly:g,name:"rePassword",label:"\u786E\u8BA4\u5BC6\u7801",placeholder:"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",rules:[{required:!l,message:"\u786E\u8BA4\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A!"},function(u){var f=u.getFieldValue;return{validator:function(O,R){return!R||f("password")===R?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4!"))}}}],required:!l})]}),(0,n.jsxs)(J.ZP.Group,{children:[(0,n.jsx)(X.Z,{readonly:g,options:[{value:"M",label:"\u7537"},{value:"F",label:"\u5973"}],width:"md",name:"gender",label:"\u6027\u522B"}),(0,n.jsx)(X.Z,{readonly:g,required:!0,options:[{value:1,label:"\u6FC0\u6D3B"},{value:0,label:"\u5931\u6D3B"}],width:"md",name:"status",label:"\u72B6\u6001"})]}),(0,n.jsxs)(J.ZP.Group,{children:[(0,n.jsx)(Q.Z,{name:"phone",readonly:g,width:"md",label:"\u624B\u673A",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}),(0,n.jsx)(Q.Z,{width:"md",name:"email",readonly:g,label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:[{type:"email",message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"}]}),(0,n.jsx)(oe.FQ,{name:"deptId",width:"md",treeData:x,label:"\u7EC4\u7EC7\u673A\u6784",placeholder:"\u8BF7\u9009\u62E9\u7EC4\u7EC7\u673A\u6784",readonly:g,value:v==null?void 0:v.deptId}),(0,n.jsx)(X.Z,{mode:"tags",readonly:g,request:(0,C.Z)(B().mark(function u(){return B().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",T.hi.loadRoles({current:1,pageSize:1024}).then(function(O){return O.list.map(function(R){return{label:R.name,value:R.id}})}));case 1:case"end":return s.stop()}},u)})),width:"md",name:"roles",label:"\u89D2\u8272\u5217\u8868"})]}),(0,n.jsx)(J.ZP.Group,{children:(0,n.jsx)(J.ZP.Item,{label:"\u9009\u62E9\u5C97\u4F4D",name:"userPositions",trigger:"onValuesChange",children:(0,n.jsx)(j.Z,{rowKey:"id",toolBarRender:!1,columns:P,recordCreatorProps:{newRecordType:"dataSource",position:"top",record:function(){return{id:"".concat(Date.now())}}},editable:{type:"multiple",editableKeys:V,onChange:me,actionRender:function(f,s,O){return[O.delete]}}})})})]})}),E=e(40017),Te=e(43185),k=e(32620),Re=e(90631),_=e(43347),Fe=k.Z.Dragger;function Ze(D){var b=D.onCancel,v=D.onOk,g=(0,y.useState)(!1),q=(0,a.Z)(g,2),A=q[0],I=q[1],m=(0,y.useState)([]),r=(0,a.Z)(m,2),l=r[0],o=r[1],i={multiple:!1,accept:".xlsx",beforeUpload:function(d){return o([d]),!1},onRemove:function(){o([])},maxCount:1};return(0,n.jsx)(H.Z,{title:"\u6279\u91CF\u5BFC\u5165\u7528\u6237",onCancel:b,visible:!0,maskClosable:!1,footer:[(0,n.jsx)(F.Z,{onClick:b,children:"\u53D6\u6D88"},"cancel"),(0,n.jsx)(F.Z,{icon:(0,n.jsx)(Re.Z,{}),onClick:function(){T.hi.download("/api/files/downloadTemplate?name=\u5377\u738B\u7528\u6237\u5BFC\u5165\u6A21\u677F")},children:"\u4E0B\u8F7D\u6A21\u677F"},"downloadTemplate"),(0,n.jsx)(F.Z,{icon:(0,n.jsx)(ye.Z,{}),type:"primary",loading:A,onClick:function(){if(l.length===0){z.default.error("\u8BF7\u9009\u62E9\u6587\u4EF6");return}I(!0),console.log(l),T.hi.upload("/api/users/import",{file:l[0]},function(d){}).then(function(d){I(!1),d.success?(z.default.success("\u5BFC\u5165\u6210\u529F"),v()):z.default.error(d.message)})},children:"\u5BFC\u5165"},"importTemplate")],children:(0,n.jsxs)(Fe,(0,L.Z)((0,L.Z)({},i),{},{children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(_.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u8005\u62D6\u62FDExcel\u6587\u4EF6\u5230\u6B64\u5904"})]}))})}var Be=["magenta","volcano","cyan","blue","geekblue","purple"],Ie=(0,S.P)(function(){var D=(0,T.m2)(),b=(0,y.useRef)(),v=(0,y.useRef)(),g=(0,y.useState)(),q=(0,a.Z)(g,2),A=q[0],I=q[1],m=(0,y.useState)(!1),r=(0,a.Z)(m,2),l=r[0],o=r[1],i=(0,y.useState)(),c=(0,a.Z)(i,2),d=c[0],V=c[1];(0,y.useEffect)(function(){D.loadUsers({deptId:d})},[d,D]),(0,y.useEffect)(function(){D.loadPermissions()},[D]);var me=[{title:"\u7EC4\u7EC7\u673A\u6784",dataIndex:"deptName",hideInSearch:!0,width:150},{title:"\u59D3\u540D",dataIndex:"name",ellipsis:!0,width:120},{title:"\u89D2\u8272",dataIndex:"role",hideInSearch:!0,width:150,renderFormItem:function(P,u){var f=u.defaultRender;return f(P)},render:function(P,u){var f;return(0,n.jsx)(se.Z,{children:(f=u.roles)===null||f===void 0?void 0:f.map(function(s,O){return(0,n.jsx)(ne.Z,{color:Be[O],children:s.name},s.id)})})}},{title:"\u624B\u673A",dataIndex:"phone",width:150,search:!1},{title:"\u72B6\u6001",dataIndex:"status",search:!1,width:100,valueEnum:{0:{text:"\u5931\u6D3B",status:"Default"},1:{text:"\u6FC0\u6D3B",status:"Processing"}}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"showTime",dataIndex:"createAt",width:150,valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(P,u){return[(0,n.jsx)("a",{onClick:function(){I({visible:!0,current:u})},children:"\u7F16\u8F91"},"editable"),(0,n.jsx)(N.Z,{overlay:(0,n.jsx)(p.Z,{onClick:function(s){var O=s.key;O==="resetPwd"?H.Z.confirm({title:"\u91CD\u7F6E\u5BC6\u7801",content:(0,n.jsx)(h.Z.Password,{placeholder:"\u8F93\u5165\u5BC6\u7801",onChange:function(Z){return v.current=Z.target.value}}),okType:"primary",okText:"\u4FEE\u6539",onOk:function(Z){return v.current?(T.hi.updateUser({id:u.id,password:v.current}).then(function(W){W.success&&(z.default.success("\u4FEE\u6539\u6210\u529F"),v.current=void 0,Z())}),!1):(z.default.error("\u8BF7\u8F93\u5165\u5BC6\u7801"),!1)}}):O==="delete"&&H.Z.confirm({title:"\u5220\u9664\u7528\u6237",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u7528\u6237\u5417\uFF1F",okType:"danger",okText:"\u5220\u9664",onOk:function(){D.deleteUser(u.id).then(function(Z){if(Z.success){var W;z.default.success("\u5220\u9664\u6210\u529F"),(W=b.current)===null||W===void 0||W.reload()}})}})},items:[{label:"\u91CD\u7F6E\u5BC6\u7801",key:"resetPwd"},{label:"\u5220\u9664\u7528\u6237",key:"delete"}]}),children:(0,n.jsxs)("a",{className:"ant-dropdown-link",onClick:function(s){return s.preventDefault()},children:["\u66F4\u591A",(0,n.jsx)(re.Z,{})]})},"action")]}}];return(0,n.jsxs)(xe.ZP,{title:!1,children:[(0,n.jsxs)(M.Z,{gutter:20,children:[(0,n.jsx)(K.Z,{xs:0,md:8,children:(0,n.jsx)(E.A,{onSelect:function(P){return V(P)}})}),(0,n.jsxs)(K.Z,{xs:24,md:16,children:[(0,n.jsx)(t.ZP,{columns:me,actionRef:b,dataSource:D.users,request:function(){var x=(0,C.Z)(B().mark(function P(u){return B().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",D.loadUsers(u));case 1:case"end":return s.stop()}},P)}));return function(P){return x.apply(this,arguments)}}(),columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:50},scroll:{x:900},dateFormatter:"string",headerTitle:"\u7CFB\u7EDF\u7528\u6237\u5217\u8868",toolBarRender:function(){return[(0,n.jsx)(F.Z,{icon:(0,n.jsx)(ae.Z,{}),type:"primary",onClick:function(){I({visible:!0})},children:"\u65B0\u5EFA"},"button"),(0,n.jsx)(F.Z,{icon:(0,n.jsx)(ye.Z,{}),type:"primary",onClick:function(){o(!0)},children:"\u6279\u91CF\u5BFC\u5165"},"import")]}}),(A==null?void 0:A.visible)&&(0,n.jsx)(Oe,{onClose:function(){I(void 0)},readonly:A.readonly,onOk:function(){var P;I(void 0),(P=b.current)===null||P===void 0||P.reload()},user:A.current})]})]}),l&&(0,n.jsx)(Ze,{onCancel:function(){return o(!1)},onOk:function(){var P;o(!1),(P=b.current)===null||P===void 0||P.reload()}})]})}),Me=Ie}}]);
