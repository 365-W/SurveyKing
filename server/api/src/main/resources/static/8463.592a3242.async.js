(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[8463],{16165:function(ee,W,l){"use strict";var N=l(28991),F=l(96156),A=l(81253),I=l(67294),D=l(28086),Z=l.n(D),s=l(63017),h=l(41755),f=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],M=I.forwardRef(function(E,t){var T=E.className,b=E.component,$=E.viewBox,R=E.spin,V=E.rotate,q=E.tabIndex,P=E.onClick,O=E.children,G=(0,A.Z)(E,f);(0,h.Kp)(Boolean(b||O),"Should have `component` prop or `children`."),(0,h.C3)();var oe=I.useContext(s.Z),ie=oe.prefixCls,ae=ie===void 0?"anticon":ie,ge=Z()(ae,T),U=Z()((0,F.Z)({},"".concat(ae,"-spin"),!!R)),J=V?{msTransform:"rotate(".concat(V,"deg)"),transform:"rotate(".concat(V,"deg)")}:void 0,X=(0,N.Z)((0,N.Z)({},h.vD),{},{className:U,style:J,viewBox:$});$||delete X.viewBox;var le=function(){return b?I.createElement(b,(0,N.Z)({},X),O):O?((0,h.Kp)(Boolean($)||I.Children.count(O)===1&&I.isValidElement(O)&&I.Children.only(O).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),I.createElement("svg",(0,N.Z)((0,N.Z)({},X),{},{viewBox:$}),O)):null},te=q;return te===void 0&&P&&(te=-1),I.createElement("span",(0,N.Z)((0,N.Z)({role:"img"},G),{},{ref:t,tabIndex:te,onClick:P,className:ge}),le())});M.displayName="AntdIcon",W.Z=M},46533:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM695.5 365.7l-210.6 292a31.8 31.8 0 01-51.7 0L308.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H689c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-square",theme:"filled"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="CheckSquareFilled";var s=F.forwardRef(Z)},78338:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="ClockCircleOutlined";var s=F.forwardRef(Z)},36862:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM676.1 657.9c4.4 5.2.7 13.1-6.1 13.1h-58.9c-4.7 0-9.2-2.1-12.3-5.7L512 561.8l-86.8 103.5c-3 3.6-7.5 5.7-12.3 5.7H354c-6.8 0-10.5-7.9-6.1-13.1L470.2 512 347.9 366.1A7.95 7.95 0 01354 353h58.9c4.7 0 9.2 2.1 12.3 5.7L512 462.2l86.8-103.5c3-3.6 7.5-5.7 12.3-5.7H670c6.8 0 10.5 7.9 6.1 13.1L553.8 512l122.3 145.9z"}}]},name:"close-square",theme:"filled"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="CloseSquareFilled";var s=F.forwardRef(Z)},41687:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z"}}]},name:"frown",theme:"outlined"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="FrownOutlined";var s=F.forwardRef(Z)},57206:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="HeartOutlined";var s=F.forwardRef(Z)},46870:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 565H360c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"meh",theme:"outlined"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="MehOutlined";var s=F.forwardRef(Z)},54121:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]},name:"minus-circle",theme:"filled"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="MinusCircleFilled";var s=F.forwardRef(Z)},81473:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 384h56c4.4 0 8-3.6 8-8V200h176c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-37.6 0-68 30.4-68 68v180c0 4.4 3.6 8 8 8zm512-184h176v176c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V196c0-37.6-30.4-68-68-68H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM376 824H200V648c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v180c0 37.6 30.4 68 68 68h180c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm512-184h-56c-4.4 0-8 3.6-8 8v176H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h180c37.6 0 68-30.4 68-68V648c0-4.4-3.6-8-8-8zm16-164H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"scan",theme:"outlined"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="ScanOutlined";var s=F.forwardRef(Z)},18613:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="SmileOutlined";var s=F.forwardRef(Z)},89366:function(ee,W,l){"use strict";l.d(W,{Z:function(){return s}});var N=l(28991),F=l(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},I=A,D=l(27029),Z=function(f,M){return F.createElement(D.Z,(0,N.Z)((0,N.Z)({},f),{},{ref:M,icon:I}))};Z.displayName="UserOutlined";var s=F.forwardRef(Z)},34442:function(){},76898:function(ee,W,l){"use strict";l.d(W,{Ff:function(){return ge},rF:function(){return O},M2:function(){return P}});var N=l(22385),F=l(94199),A=l(11849),I=l(93224),D=l(54707),Z=l(49914),s=l(9761),h=l(94184),f=l.n(h),M=l(94657),E=l(39017),t=l(78338),T=l(67294),b=l(85893);function $(U){U=Number(U);var J=Math.floor(U/3600),X=Math.floor(U%3600/60),le=Math.floor(U%3600%60),te="".concat(J).padStart(2,"0"),ne="".concat(X).padStart(2,"0"),ve="".concat(le).padStart(2,"0");return"".concat(te,":").concat(ne,":").concat(ve)}function R(U){return U<=60?"#ff4d4f":U<=180?"#faad14":"#52c41a"}var V=(0,s.Pi)(function(){var U,J,X=(0,Z.H)(),le=(0,E.Rk)(),te=X.startTime,ne=((U=X.project)===null||U===void 0||(J=U.setting.examSetting)===null||J===void 0?void 0:J.maxSubmitMinutes)||0,ve=(0,T.useState)(0),be=(0,M.Z)(ve,2),xe=be[0],ye=be[1],Se=te+ne*60*1e3,Ce=(0,T.useRef)();return(0,T.useEffect)(function(){if(ne!==0)return Ce.current=window.setInterval(function(){ye((Se-new Date().getTime())/1e3)},1e3),function(){clearInterval(Ce.current)}},[Se]),(0,T.useEffect)(function(){xe<0&&(le.submit(),clearInterval(Ce.current))},[xe]),ne===0?(0,b.jsx)(b.Fragment,{}):(0,b.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,b.jsx)(t.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,b.jsx)("span",{style:{marginLeft:3,color:R(xe)},children:$(xe)})]})}),q=["size","marked"],P=(0,s.Pi)(function(U){var J=(0,D.Rk)(),X=J.props.answerSheetVisible,le=U.size,te=U.marked,ne=te===void 0?!0:te,ve=(0,I.Z)(U,q);return X?(0,b.jsx)(F.Z,{title:"\u6807\u8BB0",children:(0,b.jsx)("svg",(0,A.Z)((0,A.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:U.size||24,height:U.size||24,className:"marked"},ve),{},{children:(0,b.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:ne?"#EA4942":"#d8d8d8","p-id":"1287"})}))}):(0,b.jsx)(b.Fragment,{})}),O=(0,s.Pi)(function(U){var J,X,le,te=U.id,ne=U.name,ve=(0,D.Rk)(),be=ve.answerSheet,xe=be.find(function(Ee){return Ee.id===te}),ye=(0,Z.H)(),Se=ye==null||(J=ye.project)===null||J===void 0?void 0:J.isAuthenticated,Ce=(X=ye.project)===null||X===void 0||(le=X.setting.examSetting)===null||le===void 0?void 0:le.randomSurveyWrong,Re=ve.exerciseMode;return(!Re||!Se||te.length<=10)&&!Ce?(0,b.jsx)(b.Fragment,{}):xe!=null&&xe.favorite?(0,b.jsx)(F.Z,{title:Ce?"\u79FB\u51FA\u9519\u9898":"\u79FB\u51FA\u6536\u85CF",children:(0,b.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"24",height:"24",style:{float:"right"},onClick:function(){ve.favoriteQuestion({templateId:te,name:ne},!1)},children:(0,b.jsx)("path",{d:"M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z","p-id":"2829",fill:"#d81e06"})})}):(0,b.jsx)(F.Z,{title:Ce?"\u6DFB\u52A0\u5230\u9519\u9898":"\u6536\u85CF",children:(0,b.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:24,height:24,style:{float:"right"},onClick:function(){ve.favoriteQuestion({templateId:te,name:ne})},children:(0,b.jsx)("path",{d:"M484.267 272.021l6.634 6.72c5.974 5.974 13.014 12.843 21.099 20.63l9.195-8.918c7.253-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.526 76.629 202.795 2.133 281.195L512 853.333 204.672 553.237c-74.475-78.421-73.77-203.69 2.133-281.216a193.28 193.28 0 0 1 277.44 0z m293.162 232.15c46.272-53.76 44.182-136.15-5.973-187.371a129.28 129.28 0 0 0-185.984 0l-15.125 15.104a1687.253 1687.253 0 0 1-4.395 4.31L512 388.18l-49.28-47.445-13.227-12.928-10.965-11.008a129.28 129.28 0 0 0-186.005 0c-51.456 52.565-52.31 137.963-2.198 191.573L512 763.883l261.675-255.531 3.754-4.181z","p-id":"2674",fill:"#d8d8d8"})})})}),G=(0,s.Pi)(function(U){var J=(0,D.Rk)(),X=U.finished,le=U.id,te=U.marked,ne=U.seqNo;return(0,b.jsxs)("div",{className:f()("answer-sheet-item",{marked:te,finished:X}),onClick:function(){return J.changePageIndex(le)},children:[ne,te&&(0,b.jsx)(P,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),oe=(0,s.Pi)(function(){var U=(0,D.Rk)(),J=U.answerSheet;return(0,b.jsx)(b.Fragment,{children:J.filter(function(X){return X.display!=="none"}).map(function(X,le){return(0,T.createElement)(G,(0,A.Z)((0,A.Z)({},X),{},{seqNo:le+1,key:X.id}))})})}),ie=(0,s.Pi)(function(){var U=(0,D.Rk)(),J=U.answerSheet,X=J.filter(function(ne){return ne.finished}).length,le=J.filter(function(ne){return!ne.finished}).length,te=J.filter(function(ne){return ne.marked}).length;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,b.jsx)("span",{style:{marginLeft:4},children:X})]}),(0,b.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,b.jsx)("span",{style:{marginLeft:4},children:le})]}),(0,b.jsxs)("div",{className:"marked",children:[(0,b.jsx)(P,{size:18}),"\u6807\u8BB0",(0,b.jsx)("span",{style:{marginLeft:4},children:te})]})]})}),ae=(0,s.Pi)(function(){return(0,b.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,b.jsx)(V,{})]})}),ge=(0,s.Pi)(function(){var U=(0,D.Rk)(),J=U.props.answerSheetVisible;return J?(0,b.jsxs)("div",{className:"answer-sheet",children:[(0,b.jsx)(ae,{}),(0,b.jsx)("div",{className:"answer-sheet-content",children:(0,b.jsx)(oe,{})}),(0,b.jsx)("div",{className:"answer-sheet-footer",children:(0,b.jsx)(ie,{})})]}):(0,b.jsx)(b.Fragment,{})})},68209:function(ee,W,l){"use strict";l.r(W),l.d(W,{default:function(){return wn}});var N=l(9715),F=l(71257),A=l(94657),I=l(40807),D=l(78210),Z=l(9761),s=l(67294),h=l(54707),f=l(48187),M=l(76898),E=l(67635),t=l(85893),T=function(){var n=(0,h.AK)(),e=(0,s.useContext)(I.ZX),i=e.schema;return(0,t.jsxs)("div",{className:n+"-header",children:[(0,t.jsx)("div",{className:n+"-header-title",children:(0,t.jsx)(E.hl,{html:i.title})}),(0,t.jsx)("div",{className:n+"-header-description",children:(0,t.jsx)(E.hl,{html:i.description})})]})},b=function(n){var e=(0,h.AK)();return(0,t.jsx)("div",{className:e+"-body",children:n.children})},$=l(57663),R=l(71577),V=(0,Z.Pi)(function(){var r,n,e,i=(0,h.AK)("-footer"),a=(0,s.useContext)(I.ZX),o=a.schema,u=a.loading,d=(0,h.Rk)(),c=d.pagination,v=c.pageSize>1,m=c.current===1,C=c.current===c.pageSize;return(0,t.jsxs)("div",{className:i,children:[C&&(0,t.jsx)("div",{className:i+"-desc",style:{userSelect:"none",WebkitTouchCallout:"none"},children:(0,t.jsx)(E.hl,{html:o==null||(r=o.attribute)===null||r===void 0?void 0:r.suffix})}),(0,t.jsxs)("div",{className:i+"-pagination",children:[v&&!m&&(0,t.jsx)("div",{children:(0,t.jsx)(R.Z,{type:"primary",block:!0,onClick:function(){return d.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),v&&!C&&(0,t.jsx)("div",{children:(0,t.jsx)(R.Z,{type:"primary",block:!0,onClick:function(){return d.handleNext()},children:"\u4E0B\u4E00\u9875"})}),C&&!v&&(0,t.jsx)("div",{style:{width:"100%",padding:"0 20px"},children:(0,t.jsx)(R.Z,{type:"primary",block:!0,onClick:function(){return d.submit()},loading:u,children:(0,t.jsx)(E.hl,{html:((n=o.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),C&&v&&(0,t.jsx)("div",{children:(0,t.jsx)(R.Z,{type:"primary",onClick:function(){return d.submit()},loading:u,children:(0,t.jsx)(E.hl,{html:((e=o.attribute)===null||e===void 0?void 0:e.submitButton)||"\u63D0\u4EA4"})})}),v&&(0,t.jsxs)("div",{className:i+"-pagination-info",children:["\u7B2C",c.current,"\u9875/\u5171",c.pageSize,"\u9875"]})]})]})}),q=l(47673),P=l(4107),O=l(11849),G=l(43358),oe=l(66074),ie=l(29985),ae=l(46842),ge=l(64302),U=function(n){var e=n.dictCode,i=n.value,a=n.onChange,o=n.style,u=n.bordered,d=n.className,c=n.parentValue,v=n.cascaderLevel,m=v===void 0?1:v,C=(0,h.Al)(),p=(0,s.useState)([]),g=(0,A.Z)(p,2),x=g[0],y=g[1],j=(0,h.zE)(function(w){m&&m>1&&!c||C.onDictSearch&&C.onDictSearch({dictCode:e,searchValue:w,parentValue:c==null?void 0:c.split("|")[0],cascaderLevel:m}).then(function(S){y(S||[])})},2);return(0,s.useEffect)(function(){m&&m>1&&(c?j(void 0):y([]))},[c,m]),(0,s.useEffect)(function(){!i&&m<=1&&e&&j(void 0),i&&x.length===0&&j(i)},[i]),(0,t.jsx)(oe.Z,{options:x,showSearch:!0,onSearch:j,value:i==null?void 0:i.split("|")[0],onChange:function(S){var k;return a("".concat(S,"|").concat((k=x.find(function(B){return B.value===S}))===null||k===void 0?void 0:k.label))},style:o,bordered:u,className:d,allowClear:!0})},J=function(n){var e=n.onChange,i=n.type,a=n.value,o=n.suffix,u=n.prefix,d=n.style,c=d===void 0?{width:"100%"}:d,v=n.bordered,m=v===void 0?!0:v,C=n.placeholder,p=n.className,g=n.dictCode,x=n.parentValue,y=n.cascaderLevel,j=n.icon,w=j===void 0?!0:j,S=n.readOnly,k=n.schema,B=n.dateTimeFormat;if(i==="horzBlank")return(0,t.jsx)(t.Fragment,{});if(i==="selectDict"&&g)return(0,t.jsx)(U,{value:a,onChange:e,dictCode:g,style:c,bordered:m,className:p,parentValue:x,cascaderLevel:y});if(i==="select"&&k!==null&&k!==void 0&&k.dataSource)return(0,t.jsx)(oe.Z,{options:k.dataSource,style:{width:200,opacity:"unset"},bordered:m,onChange:e,className:p});if(i==="number")return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(P.Z,{onChange:function(H){H.target.value===""?e(""):e(parseFloat(H.target.value))},prefix:u,type:"number",value:a,style:(0,O.Z)((0,O.Z)({},c),{},{paddingLeft:20}),suffix:o,inputMode:"decimal",bordered:m,placeholder:C,className:p,readOnly:S})});if(i==="date"){var L;return(0,t.jsx)(st,{onChange:function(H){return e(H)},value:a,style:c,bordered:m,placeholder:C,readOnly:S,className:p,dateTimeFormat:B||(k==null||(L=k.attribute)===null||L===void 0?void 0:L.dateTimeFormat)})}return i==="mobile"?(0,t.jsx)(P.Z,{prefix:w?u||(0,t.jsx)(ie.Z,{}):void 0,onChange:function(H){return e(H.target.value)},value:a,bordered:m,placeholder:C,className:p,readOnly:S}):i==="idCard"?(0,t.jsx)(P.Z,{prefix:w?u||(0,t.jsx)(ae.Z,{}):void 0,onChange:function(H){return e(H.target.value)},value:a,style:c,bordered:m,placeholder:C,className:p,readOnly:S}):i==="email"?(0,t.jsx)(P.Z,{prefix:w?u||(0,t.jsx)(ge.Z,{}):void 0,onChange:function(H){return e(H.target.value)},value:a,style:c,bordered:m,placeholder:C,className:p,readOnly:S}):(0,t.jsx)(P.Z,{onChange:function(H){return e(H.target.value)},value:a,suffix:o,prefix:u,style:c,bordered:m,placeholder:C,className:p,readOnly:S})},X=l(57254),le=function(n){var e=n.options,i=n.onChange,a=n.value;return(0,t.jsxs)("div",{className:"native-select",children:[(0,t.jsxs)("select",{onChange:function(u){return i(u.target.value)},value:a,className:"native-select__select",children:[(0,t.jsx)("option",{children:"\u8BF7\u9009\u62E9"}),e==null?void 0:e.map(function(o){return(0,t.jsx)("option",{value:o.value,children:o.label},o.value)})]}),(0,t.jsx)("span",{className:"native-select__arrow",children:(0,t.jsx)(X.Z,{})})]})};/*!
 * mobileSelect.js
 * (c) 2017-present onlyhom
 * Released under the MIT License.
 */function te(r,n){return r.getElementsByClassName(n)}function ne(r){this.mobileSelect,this.wheelsData=r.wheels,this.jsonType=!1,this.cascadeJsonData=[],this.displayJson=[],this.curValue=null,this.curIndexArr=[],this.cascade=!1,this.startY,this.moveEndY,this.moveY,this.oldMoveY,this.offset=0,this.offsetSum=0,this.oversizeBorder,this.curDistance=[],this.clickStatus=!1,this.isPC=!0,this.init(r)}ne.prototype={constructor:ne,init:function(n){var e=this;if(e.keyMap=n.keyMap?n.keyMap:{id:"id",value:"value",childs:"childs"},e.checkDataType(),e.renderWheels(e.wheelsData,n.cancelBtnText,n.ensureBtnText,n.container),e.wheel=te(e.mobileSelect,"wheel"),e.slider=te(e.mobileSelect,"selectContainer"),e.wheels=e.mobileSelect.querySelector(".wheels"),e.liHeight=e.mobileSelect.querySelector("li").offsetHeight,e.ensureBtn=e.mobileSelect.querySelector(".ensure"),e.cancelBtn=e.mobileSelect.querySelector(".cancel"),e.grayLayer=e.mobileSelect.querySelector(".grayLayer"),e.popUp=e.mobileSelect.querySelector(".content"),e.callback=n.callback||function(){},e.transitionEnd=n.transitionEnd||function(){},e.onShow=n.onShow||function(){},e.onHide=n.onHide||function(){},e.initPosition=n.position||[],e.titleText=n.title||"",e.connector=n.connector||" ",e.triggerDisplayData=typeof n.triggerDisplayData!="undefined"?n.triggerDisplayData:!0,e.setStyle(n),e.setTitle(e.titleText),e.checkIsPC(),e.checkCascade(),e.addListenerAll(),e.cascade&&e.initCascade(),e.initPosition.length<e.slider.length)for(var i=e.slider.length-e.initPosition.length,a=0;a<i;a++)e.initPosition.push(0);e.setCurDistance(e.initPosition),e.cancelBtn.addEventListener("click",function(o){e.hide()}),e.ensureBtn.addEventListener("click",function(o){e.hide(),e.liHeight||(e.liHeight=e.mobileSelect.querySelector("li").offsetHeight);for(var u="",d=0;d<e.wheel.length;d++)d==e.wheel.length-1?u+=e.getInnerHtml(d):u+=e.getInnerHtml(d)+e.connector;e.curIndexArr=e.getIndexArr(),e.curValue=e.getCurValue(),e.callback(e.curIndexArr,e.curValue)}),e.grayLayer.addEventListener("click",function(o){e.hide()}),e.popUp.addEventListener("click",function(o){o.stopPropagation()}),e.fixRowStyle()},setTitle:function(n){var e=this;e.titleText=n,e.mobileSelect.querySelector(".title").innerHTML=e.titleText},setStyle:function(n){var e=this;n.ensureBtnColor&&(e.ensureBtn.style.color=n.ensureBtnColor),n.cancelBtnColor&&(e.cancelBtn.style.color=n.cancelBtnColor),n.titleColor&&(e.title=e.mobileSelect.querySelector(".title"),e.title.style.color=n.titleColor),n.textColor&&(e.panel=e.mobileSelect.querySelector(".panel"),e.panel.style.color=n.textColor),n.titleBgColor&&(e.btnBar=e.mobileSelect.querySelector(".btnBar"),e.btnBar.style.backgroundColor=n.titleBgColor),n.bgColor&&(e.panel=e.mobileSelect.querySelector(".panel"),e.shadowMask=e.mobileSelect.querySelector(".shadowMask"),e.panel.style.backgroundColor=n.bgColor,e.shadowMask.style.background="linear-gradient(to bottom, "+n.bgColor+", rgba(255, 255, 255, 0), "+n.bgColor+")"),isNaN(n.maskOpacity)||(e.grayMask=e.mobileSelect.querySelector(".grayLayer"),e.grayMask.style.background="rgba(0, 0, 0, "+n.maskOpacity+")")},checkIsPC:function(){var n=this,e=navigator.userAgent.toLowerCase(),i=e.match(/ipad/i)=="ipad",a=e.match(/iphone os/i)=="iphone os",o=e.match(/midp/i)=="midp",u=e.match(/rv:1.2.3.4/i)=="rv:1.2.3.4",d=e.match(/ucweb/i)=="ucweb",c=e.match(/android/i)=="android",v=e.match(/windows ce/i)=="windows ce",m=e.match(/windows mobile/i)=="windows mobile";(i||a||o||u||d||c||v||m)&&(n.isPC=!1)},show:function(){this.mobileSelect.classList.add("mobileSelect-show"),typeof this.onShow=="function"&&this.onShow(this)},hide:function(){this.mobileSelect.classList.remove("mobileSelect-show"),typeof this.onHide=="function"&&this.onHide(this)},renderWheels:function(n,e,i,a){var o=this,u=e||"\u53D6\u6D88",d=i||"\u786E\u8BA4";o.mobileSelect=document.createElement("div"),o.mobileSelect.className="mobileSelect",o.mobileSelect.innerHTML='<div class="grayLayer"></div><div class="content"><div class="btnBar"><div class="fixWidth"><div class="cancel">'+u+'</div><div class="title"></div><div class="ensure">'+d+'</div></div></div><div class="panel"><div class="fixWidth"><div class="wheels"></div><div class="selectLine"></div><div class="shadowMask"></div></div></div></div>',a?a.appendChild(o.mobileSelect):document.body.appendChild(o.mobileSelect);for(var c="",v=0;v<n.length;v++){if(c+='<div class="wheel"><ul class="selectContainer">',o.jsonType)for(var m=0;m<n[v].data.length;m++)c+='<li data-id="'+n[v].data[m][o.keyMap.id]+'">'+n[v].data[m][o.keyMap.value]+"</li>";else for(var m=0;m<n[v].data.length;m++)c+="<li>"+n[v].data[m]+"</li>";c+="</ul></div>"}o.mobileSelect.querySelector(".wheels").innerHTML=c},addListenerAll:function(){for(var n=this,e=0;e<n.slider.length;e++)(function(i){n.addListenerWheel(n.wheel[i],i)})(e)},addListenerWheel:function(n,e){var i=this;n.addEventListener("touchstart",function(a){i.touch(a,this.firstChild,e)},!1),n.addEventListener("touchend",function(a){i.touch(a,this.firstChild,e)},!1),n.addEventListener("touchmove",function(a){i.touch(a,this.firstChild,e)},!1),i.isPC&&(n.addEventListener("mousedown",function(a){i.dragClick(a,this.firstChild,e)},!1),n.addEventListener("mousemove",function(a){i.dragClick(a,this.firstChild,e)},!1),n.addEventListener("mouseup",function(a){i.dragClick(a,this.firstChild,e)},!0))},checkDataType:function(){var n=this;typeof n.wheelsData[0].data[0]=="object"&&(n.jsonType=!0)},checkCascade:function(){var n=this;if(n.jsonType){for(var e=n.wheelsData[0].data,i=0;i<e.length;i++)if(n.keyMap.childs in e[i]&&e[i][n.keyMap.childs].length>0){n.cascade=!0,n.cascadeJsonData=n.wheelsData[0].data;break}}else n.cascade=!1},generateArrData:function(n){for(var e=[],i=this.keyMap.id,a=this.keyMap.value,o=0;o<n.length;o++){var u={};u[i]=n[o][this.keyMap.id],u[a]=n[o][this.keyMap.value],e.push(u)}return e},initCascade:function(){var n=this;n.displayJson.push(n.generateArrData(n.cascadeJsonData)),n.initPosition.length>0?(n.initDeepCount=0,n.initCheckArrDeep(n.cascadeJsonData[n.initPosition[0]])):n.checkArrDeep(n.cascadeJsonData[0]),n.reRenderWheels()},initCheckArrDeep:function(n){var e=this;if(n&&e.keyMap.childs in n&&n[e.keyMap.childs].length>0){e.displayJson.push(e.generateArrData(n[e.keyMap.childs])),e.initDeepCount++;var i=n[e.keyMap.childs][e.initPosition[e.initDeepCount]];i?e.initCheckArrDeep(i):e.checkArrDeep(n[e.keyMap.childs][0])}},checkArrDeep:function(n){var e=this;n&&e.keyMap.childs in n&&n[e.keyMap.childs].length>0&&(e.displayJson.push(e.generateArrData(n[e.keyMap.childs])),e.checkArrDeep(n[e.keyMap.childs][0]))},checkRange:function(n,e){for(var i=this,a=i.displayJson.length-1-n,o=0;o<a;o++)i.displayJson.pop();for(var u,o=0;o<=n;o++)o==0?u=i.cascadeJsonData[e[0]]:u=u[i.keyMap.childs][e[o]];i.checkArrDeep(u),i.reRenderWheels(),i.fixRowStyle(),i.setCurDistance(i.resetPosition(n,e))},resetPosition:function(n,e){var i=this,a=e,o;if(i.slider.length>e.length){o=i.slider.length-e.length;for(var u=0;u<o;u++)a.push(0)}else if(i.slider.length<e.length){o=e.length-i.slider.length;for(var u=0;u<o;u++)a.pop()}for(var u=n+1;u<a.length;u++)a[u]=0;return a},reRenderWheels:function(){var n=this;if(n.wheel.length>n.displayJson.length)for(var e=n.wheel.length-n.displayJson.length,i=0;i<e;i++)n.wheels.removeChild(n.wheel[n.wheel.length-1]);for(var i=0;i<n.displayJson.length;i++)(function(o){var u="";if(n.wheel[o]){for(var d=0;d<n.displayJson[o].length;d++)u+='<li data-id="'+n.displayJson[o][d][n.keyMap.id]+'">'+n.displayJson[o][d][n.keyMap.value]+"</li>";n.slider[o].innerHTML=u}else{var c=document.createElement("div");c.className="wheel",u='<ul class="selectContainer">';for(var d=0;d<n.displayJson[o].length;d++)u+='<li data-id="'+n.displayJson[o][d][n.keyMap.id]+'">'+n.displayJson[o][d][n.keyMap.value]+"</li>";u+="</ul>",c.innerHTML=u,n.addListenerWheel(c,o),n.wheels.appendChild(c)}})(i)},updateWheels:function(n){var e=this;if(e.cascade){if(e.cascadeJsonData=n,e.displayJson=[],e.initCascade(),e.initPosition.length<e.slider.length)for(var i=e.slider.length-e.initPosition.length,a=0;a<i;a++)e.initPosition.push(0);e.setCurDistance(e.initPosition),e.fixRowStyle()}},updateWheel:function(n,e){var i=this,a="";if(i.cascade)return console.error("\u7EA7\u8054\u683C\u5F0F\u4E0D\u652F\u6301updateWheel(),\u8BF7\u4F7F\u7528updateWheels()\u66F4\u65B0\u6574\u4E2A\u6570\u636E\u6E90"),!1;if(i.jsonType){for(var o=0;o<e.length;o++)a+='<li data-id="'+e[o][i.keyMap.id]+'">'+e[o][i.keyMap.value]+"</li>";i.wheelsData[n]={data:e}}else{for(var o=0;o<e.length;o++)a+="<li>"+e[o]+"</li>";i.wheelsData[n]=e}i.slider[n].innerHTML=a},fixRowStyle:function(){for(var n=this,e=(100/n.wheel.length).toFixed(2)-2,i=0;i<n.wheel.length;i++);},getIndex:function(n){return Math.round((2*this.liHeight-n)/this.liHeight)},getIndexArr:function(){for(var n=this,e=[],i=0;i<n.curDistance.length;i++)e.push(n.getIndex(n.curDistance[i]));return e},getCurValue:function(){var n=this,e=[],i=n.getIndexArr();if(n.cascade)for(var a=0;a<n.wheel.length;a++)e.push(n.displayJson[a][i[a]]);else if(n.jsonType)for(var a=0;a<n.curDistance.length;a++)e.push(n.wheelsData[a].data[n.getIndex(n.curDistance[a])]);else for(var a=0;a<n.curDistance.length;a++)e.push(n.getInnerHtml(a));return e},getValue:function(){return this.curValue},calcDistance:function(n){return 2*this.liHeight-n*this.liHeight},setCurDistance:function(n){for(var e=this,i=[],a=0;a<e.slider.length;a++)i.push(e.calcDistance(n[a])),e.movePosition(e.slider[a],i[a]);e.curDistance=i},fixPosition:function(n){return-(this.getIndex(n)-2)*this.liHeight},movePosition:function(n,e){n.style.webkitTransform="translate3d(0,"+e+"px, 0)",n.style.transform="translate3d(0,"+e+"px, 0)"},locatePosition:function(n,e){var i=this;this.curDistance[n]=this.calcDistance(e),this.movePosition(this.slider[n],this.curDistance[n]),i.cascade&&i.checkRange(n,i.getIndexArr())},updateCurDistance:function(n,e){n.style.transform?this.curDistance[e]=parseInt(n.style.transform.split(",")[1]):this.curDistance[e]=parseInt(n.style.webkitTransform.split(",")[1])},getDistance:function(n){return n.style.transform?parseInt(n.style.transform.split(",")[1]):parseInt(n.style.webkitTransform.split(",")[1])},getInnerHtml:function(n){var e=this,i=e.slider[n].getElementsByTagName("li").length,a=e.getIndex(e.curDistance[n]);return a>=i?a=i-1:a<0&&(a=0),e.slider[n].getElementsByTagName("li")[a].innerHTML},touch:function(n,e,i){var a=this;switch(n=n||window.event,n.type){case"touchstart":a.startY=n.touches[0].clientY,a.startY=parseInt(a.startY),a.oldMoveY=a.startY;break;case"touchend":if(a.moveEndY=parseInt(n.changedTouches[0].clientY),a.offsetSum=a.moveEndY-a.startY,a.oversizeBorder=-(e.getElementsByTagName("li").length-3)*a.liHeight,a.offsetSum==0){var o=parseInt((document.documentElement.clientHeight-a.moveEndY)/40);if(o!=2){var u=o-2,d=a.curDistance[i]+u*a.liHeight;d<=2*a.liHeight&&d>=a.oversizeBorder&&(a.curDistance[i]=d,a.movePosition(e,a.curDistance[i]),a.transitionEnd(a.getIndexArr(),a.getCurValue(),i))}}else a.updateCurDistance(e,i),a.curDistance[i]=a.fixPosition(a.curDistance[i]),a.movePosition(e,a.curDistance[i]),a.curDistance[i]+a.offsetSum>2*a.liHeight?(a.curDistance[i]=2*a.liHeight,setTimeout(function(){a.movePosition(e,a.curDistance[i])},100)):a.curDistance[i]+a.offsetSum<a.oversizeBorder&&(a.curDistance[i]=a.oversizeBorder,setTimeout(function(){a.movePosition(e,a.curDistance[i])},100)),a.transitionEnd(a.getIndexArr(),a.getCurValue(),i);a.cascade&&a.checkRange(i,a.getIndexArr());break;case"touchmove":n.preventDefault(),a.moveY=n.touches[0].clientY,a.offset=a.moveY-a.oldMoveY,a.updateCurDistance(e,i),a.curDistance[i]=a.curDistance[i]+a.offset,a.movePosition(e,a.curDistance[i]),a.oldMoveY=a.moveY;break}},dragClick:function(n,e,i){var a=this;switch(n=n||window.event,n.type){case"mousedown":a.startY=n.clientY,a.oldMoveY=a.startY,a.clickStatus=!0;break;case"mouseup":if(a.moveEndY=n.clientY,a.offsetSum=a.moveEndY-a.startY,a.oversizeBorder=-(e.getElementsByTagName("li").length-3)*a.liHeight,a.offsetSum==0){var o=parseInt((document.documentElement.clientHeight-a.moveEndY)/40);if(o!=2){var u=o-2,d=a.curDistance[i]+u*a.liHeight;d<=2*a.liHeight&&d>=a.oversizeBorder&&(a.curDistance[i]=d,a.movePosition(e,a.curDistance[i]),a.transitionEnd(a.getIndexArr(),a.getCurValue(),i))}}else a.updateCurDistance(e,i),a.curDistance[i]=a.fixPosition(a.curDistance[i]),a.movePosition(e,a.curDistance[i]),a.curDistance[i]+a.offsetSum>2*a.liHeight?(a.curDistance[i]=2*a.liHeight,setTimeout(function(){a.movePosition(e,a.curDistance[i])},100)):a.curDistance[i]+a.offsetSum<a.oversizeBorder&&(a.curDistance[i]=a.oversizeBorder,setTimeout(function(){a.movePosition(e,a.curDistance[i])},100)),a.transitionEnd(a.getIndexArr(),a.getCurValue(),i);a.clickStatus=!1,a.cascade&&a.checkRange(i,a.getIndexArr());break;case"mousemove":n.preventDefault(),a.clickStatus&&(a.moveY=n.clientY,a.offset=a.moveY-a.oldMoveY,a.updateCurDistance(e,i),a.curDistance[i]=a.curDistance[i]+a.offset,a.movePosition(e,a.curDistance[i]),a.oldMoveY=a.moveY);break}}};var ve=l(16165),be=function(){return _jsx("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:_jsx("path",{d:"M237.136842 668.294737c-5.389474-5.389474-10.778947-10.778947-10.778947-16.168421V355.705263v-21.557895-26.947368-32.336842c0-10.778947 0-21.557895 5.389473-26.947369l-5.389473-5.389473-80.842106 32.336842c-26.947368 5.389474-59.284211 16.168421-91.621052 26.947368l5.389474 21.557895 107.789473-16.168421v334.147368c0 10.778947-5.389474 16.168421-10.778947 21.557895-5.389474 5.389474-16.168421 10.778947-32.336842 10.778948-10.778947 0-32.336842 5.389474-53.894737 5.389473v16.168421H323.368421v-21.557894c-21.557895 0-37.726316 0-48.505263-5.389474-21.557895 10.778947-32.336842 5.389474-37.726316 0z m414.989474-43.11579c0-10.778947 5.389474-16.168421 5.389473-26.947368l-16.168421-5.389474c-5.389474 16.168421-10.778947 26.947368-16.168421 32.336842-5.389474 5.389474-10.778947 16.168421-16.168421 16.168421-5.389474 5.389474-10.778947 5.389474-16.168421 5.389474h-16.168421l-172.463158 5.389474 107.789474-102.4c16.168421-16.168421 32.336842-26.947368 48.505263-43.11579 16.168421-16.168421 26.947368-26.947368 37.726316-43.115789 10.778947-16.168421 21.557895-32.336842 26.947368-48.505263 5.389474-16.168421 10.778947-37.726316 10.778948-53.894737 0-21.557895-5.389474-37.726316-10.778948-53.894737-10.778947-16.168421-21.557895-26.947368-32.336842-37.726316-16.168421-10.778947-32.336842-16.168421-48.505263-21.557895-21.557895-5.389474-37.726316-10.778947-59.28421-10.778947-21.557895 0-48.505263 5.389474-70.063158 10.778947-16.168421 10.778947-37.726316 21.557895-59.284211 32.336843 0 16.168421 0 32.336842 5.389474 48.505263v53.894737h21.557895c0-16.168421 5.389474-26.947368 10.778947-37.726316l16.168421-32.336842c5.389474-10.778947 16.168421-16.168421 26.947368-21.557895 10.778947-5.389474 21.557895-5.389474 37.726316-5.389474 10.778947 0 26.947368 0 37.726316 5.389474 10.778947 5.389474 21.557895 10.778947 32.336842 21.557895 10.778947 10.778947 16.168421 16.168421 21.557895 32.336842 5.389474 10.778947 5.389474 26.947368 5.389474 37.726316 0 16.168421-5.389474 32.336842-10.778948 48.505263-5.389474 16.168421-16.168421 32.336842-26.947368 48.505263-5.389474 10.778947-21.557895 26.947368-32.336842 43.115789l-48.505264 48.505264-123.957894 123.957894 5.389473 5.389474h301.810527v-21.557895c0-10.778947 5.389474-16.168421 5.389473-26.947368 5.389474-10.778947 10.778947-21.557895 10.778948-26.947369z m307.2-80.842105c-5.389474-10.778947-16.168421-26.947368-21.557895-32.336842-10.778947-10.778947-21.557895-21.557895-37.726316-26.947368-10.778947-5.389474-26.947368-10.778947-43.115789-16.168421 16.168421-10.778947 32.336842-26.947368 43.115789-37.726316 10.778947-10.778947 21.557895-21.557895 26.947369-32.336842 5.389474-10.778947 10.778947-21.557895 10.778947-26.947369v-16.168421c0-16.168421-5.389474-32.336842-10.778947-48.505263-10.778947-10.778947-21.557895-26.947368-32.336842-32.336842-10.778947-10.778947-26.947368-16.168421-43.11579-21.557895-16.168421-5.389474-32.336842-5.389474-48.505263-5.389474-26.947368 0-48.505263 5.389474-70.063158 10.778948s-43.115789 16.168421-64.673684 32.336842v91.621053h21.557895c0-16.168421 5.389474-26.947368 10.778947-37.726316 5.389474-10.778947 10.778947-21.557895 21.557895-26.947369 10.778947-5.389474 16.168421-16.168421 26.947368-16.168421 10.778947-5.389474 21.557895-5.389474 37.726316-5.389473 10.778947 0 21.557895 0 32.336842 5.389473 10.778947 5.389474 21.557895 10.778947 26.947368 16.168421 5.389474 5.389474 16.168421 16.168421 21.557895 26.947369 5.389474 10.778947 5.389474 21.557895 5.389474 32.336842 0 21.557895-5.389474 37.726316-16.168421 53.894737-10.778947 16.168421-21.557895 26.947368-37.726316 37.726316-16.168421 10.778947-32.336842 16.168421-48.505263 21.557894-16.168421 5.389474-37.726316 10.778947-53.894737 16.168421l5.389474 26.947369c5.389474-5.389474 16.168421-5.389474 26.947368-5.389474h26.947369c16.168421 0 32.336842 0 48.505263 5.389474 16.168421 5.389474 26.947368 10.778947 37.726315 21.557894 10.778947 10.778947 16.168421 21.557895 26.947369 32.336843 5.389474 16.168421 10.778947 32.336842 10.778947 48.505263 0 16.168421 0 32.336842-5.389473 48.505263-5.389474 16.168421-10.778947 26.947368-21.557895 37.726316-10.778947 10.778947-21.557895 21.557895-37.726316 26.947368-16.168421 5.389474-32.336842 10.778947-48.505263 10.778947-21.557895 0-37.726316-5.389474-59.284211-10.778947-21.557895-10.778947-37.726316-21.557895-48.505263-32.336842-10.778947 0-16.168421 5.389474-26.947368 16.168421-5.389474-16.168421-5.389474-5.389474-5.389474 5.389474s5.389474 16.168421 10.778947 21.557894c5.389474 5.389474 10.778947 10.778947 21.557895 16.168422 10.778947 5.389474 16.168421 5.389474 26.947369 5.389473h32.336842c26.947368 0 53.894737-5.389474 86.231579-10.778947 26.947368-10.778947 53.894737-21.557895 75.452631-37.726316 21.557895-16.168421 43.115789-37.726316 53.894737-64.673684 16.168421-26.947368 21.557895-53.894737 21.557895-86.231579-5.389474-10.778947-10.778947-26.947368-16.168421-37.726316z",fill:"#bfbfbf"})})},xe=function(n){return _jsx(Icon,_objectSpread({component:be},n))},ye=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,t.jsx)("path",{d:"M682.666667 213.333333a21.333333 21.333333 0 0 1 20.992 17.493334l0.341333 3.84v42.666666H810.666667a42.666667 42.666667 0 0 1 42.666666 42.666667v469.333333a42.666667 42.666667 0 0 1-42.666666 42.666667H256a42.666667 42.666667 0 0 1-42.666667-42.666667v-469.333333a42.666667 42.666667 0 0 1 42.666667-42.666667h106.666667v-42.666666a21.333333 21.333333 0 0 1 42.325333-3.84l0.341333 3.84v42.666666h256v-42.666666A21.333333 21.333333 0 0 1 682.666667 213.333333z m128 234.666667H256v341.333333h554.666667v-341.333333z m-448-128H256v85.333333h554.666667v-85.333333h-106.666667V341.333333a21.333333 21.333333 0 0 1-42.325333 3.84L661.333333 341.333333v-21.333333h-256V341.333333a21.333333 21.333333 0 0 1-42.325333 3.84L362.666667 341.333333v-21.333333z",fill:"#bfbfbf","p-id":"4605"})})},Se=function(n){return(0,t.jsx)(ve.Z,(0,O.Z)({component:ye},n))},Ce=function(){return _jsx("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:_jsx("path",{d:"M510.61572266 166.37561035A368.95935059 368.95935059 0 0 0 141.70581055 535.33496094a368.95935059 368.95935059 0 0 0 368.95935059 368.95935059 368.95935059 368.95935059 0 0 0 368.95935058-368.95935059A368.95935059 368.95935059 0 0 0 510.61572266 166.42504883z m0 688.77685547a319.86694336 319.86694336 0 0 1 0-639.63500977 319.86694336 319.86694336 0 0 1 0 639.63500977z m159.93347168-295.24658204h-159.93347168V400.02185058a12.35961914 12.35961914 0 0 0-12.26074219-12.31018066h-24.62036133a12.35961914 12.35961914 0 0 0-12.26074219 12.31018067v196.76513671a12.35961914 12.35961914 0 0 0 12.26074219 12.31018067h196.76513672a12.35961914 12.35961914 0 0 0 12.35961914-12.31018066v-24.57092286a12.26074219 12.26074219 0 0 0-12.35961914-12.31018066z","p-id":"9722",fill:"#bfbfbf"})})},Re=function(n){return _jsx(Icon,_objectSpread({component:Ce},n))},Ee=function(){return _jsx("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:_jsx("path",{d:"M566.272 217.088c-11.264-7.168-24.576-11.264-41.984-11.264-4.096 0-8.192 0-12.288 1.024-45.056 7.168-74.752 48.128-93.184 87.04-8.192 18.432-15.36 37.888-22.528 56.32-3.072 9.216-7.168 17.408-10.24 26.624 0 1.024-5.12 18.432-6.144 18.432h-46.08c-6.144 0-11.264 5.12-11.264 11.264 0 6.144 5.12 11.264 11.264 11.264h39.936l-22.528 96.256c-22.528 107.52-53.248 230.4-60.416 251.904-7.168 22.528-17.408 33.792-31.744 33.792-3.072 0-5.12-1.024-7.168-2.048-2.048-1.024-3.072-3.072-3.072-5.12s1.024-5.12 4.096-9.216c3.072-4.096 4.096-9.216 4.096-13.312 0-8.192-3.072-15.36-8.192-20.48-6.144-5.12-12.288-7.168-19.456-7.168s-14.336 3.072-20.48 8.192c-1.024 7.168-4.096 14.336-4.096 23.552 0 12.288 5.12 22.528 15.36 31.744 10.24 9.216 23.552 13.312 40.96 13.312 27.648 0 52.224-12.288 70.656-33.792 11.264-13.312 19.456-28.672 26.624-45.056 22.528-50.176 34.816-105.472 48.128-158.72 13.312-54.272 25.6-108.544 36.864-162.816h44.032c6.144 0 11.264-5.12 11.264-11.264 0-6.144-5.12-11.264-11.264-11.264h-40.96c22.528-84.992 48.128-143.36 53.248-151.552 8.192-14.336 17.408-21.504 27.648-21.504 4.096 0 6.144 1.024 7.168 3.072 1.024 2.048 2.048 4.096 2.048 5.12 0 1.024-1.024 4.096-4.096 9.216-3.072 5.12-4.096 10.24-4.096 15.36 0 7.168 3.072 13.312 8.192 18.432s12.288 8.192 19.456 8.192 14.336-3.072 19.456-8.192 8.192-12.288 8.192-21.504c-1.024-17.408-6.144-28.672-17.408-35.84z m204.8 258.048c16.384 0 48.128-13.312 48.128-56.32s-30.72-45.056-40.96-45.056c-18.432 0-37.888 13.312-54.272 41.984-16.384 28.672-34.816 61.44-34.816 61.44h-1.024c-4.096-20.48-7.168-36.864-9.216-45.056-3.072-17.408-23.552-56.32-66.56-56.32s-81.92 24.576-81.92 24.576c-7.168 4.096-12.288 12.288-12.288 21.504 0 14.336 11.264 25.6 25.6 25.6 4.096 0 8.192-1.024 11.264-3.072 0 0 32.768-18.432 38.912 0 2.048 5.12 4.096 11.264 6.144 17.408 8.192 27.648 15.36 60.416 22.528 90.112L596.992 593.92s-31.744-11.264-48.128-11.264-48.128 13.312-48.128 56.32 30.72 45.056 40.96 45.056c18.432 0 37.888-13.312 54.272-41.984 16.384-28.672 34.816-61.44 34.816-61.44 5.12 26.624 10.24 48.128 13.312 56.32 10.24 30.72 34.816 48.128 67.584 48.128 0 0 33.792 0 72.704-22.528 9.216-4.096 16.384-13.312 16.384-23.552 0-14.336-11.264-25.6-25.6-25.6-4.096 0-8.192 1.024-11.264 3.072 0 0-27.648 15.36-37.888 3.072-7.168-13.312-12.288-30.72-17.408-52.224-4.096-19.456-9.216-41.984-13.312-63.488l28.672-40.96c-1.024 1.024 30.72 12.288 47.104 12.288z","p-id":"1938",fill:"#bfbfbf"})})},Dn=function(n){return _jsx(Icon,_objectSpread({component:Ee},n))},rt=l(27484),Fe=l.n(rt);function pe(r,n){for(var e=[],i=r;i<=n;i++)e.push("".concat(i).padStart(2,"0"));return e}function Le(r,n){var e=31;return[1,3,5,7,8,10,12].indexOf(parseInt(n))!=-1?e=31:(e=30,n==2&&r%4==0?e=29:n==2&&r%4!=0&&(e=28)),e}var st=function(n){var e=n.onChange,i=n.value,a=i===void 0?"":i,o=n.suffix,u=n.readOnly,d=n.dateTimeFormat,c=d===void 0?"YYYY-MM-DD":d,v=n.style,m=n.bordered,C=n.className,p=(0,s.useRef)(),g=(0,s.useRef)(0);return(0,s.useEffect)(function(){var x=Fe()(Fe()(a||void 0).format(c),c),y=pe(1900,2100),j=pe(1,12),w=pe(1,Le(x.year(),x.month())),S=pe(0,23),k=pe(0,59),B=pe(0,59),L=[],z=[],H=0;c.includes("YYYY")&&(L.push({data:y}),z.push(y.indexOf("".concat(x.year()))),H++),c.includes("MM")&&(L.push({data:j}),z.push(j.indexOf(String(x.month()+1).padStart(2,"0"))),H++),c.includes("DD")&&(L.push({data:w}),z.push(w.indexOf(String(x.date()).padStart(2,"0"))),H++),g.current=H,c.includes("HH")&&(L.push({data:S}),z.push(S.indexOf(String(x.hour()).padStart(2,"0"))),H++),c.includes("mm")&&(L.push({data:k}),z.push(k.indexOf(String(x.minute()).padStart(2,"0"))),H++),c.includes("ss")&&(L.push({data:B}),z.push(B.indexOf(String(x.second()).padStart(2,"0"))),H++),p.current=new ne({title:"\u65E5\u671F\u9009\u62E9",position:z,wheels:L,onShow:function(){document.getElementsByTagName("body")[0].style.overflow="hidden"},onHide:function(){document.getElementsByTagName("body")[0].style.overflow=null},transitionEnd:function(Y,K,Q){Q===1&&p.current.updateWheel(2,pe(1,Le(K[0],K[1])))},callback:function(Y,K){var Q=[];g.current>0&&Q.push(K.slice(0,g.current).join("-")),K.length>g.current&&Q.push(K.slice(g.current).join(":")),e(Q.join(" "))}})},[]),(0,t.jsx)(P.Z,{prefix:(0,t.jsx)(Se,{}),readOnly:!0,value:a,style:v,suffix:o,bordered:m,className:C,onClick:function(){u||p.current.show()}})};function ot(){var r=new Date;return["".concat(r.getHours()).padStart(2,"0"),"".concat(r.getMinutes()).padStart(2,"0"),"".concat(r.getSeconds()).padStart(2,"0")]}var Zn=function(n){var e=n.onChange,i=n.value,a=i===void 0?"":i,o=n.readOnly,u=useRef(),d=useRef();return useEffect(function(){var c=ot(),v=_slicedToArray(c,3),m=v[0],C=v[1],p=v[2],g=a.split(":"),x=_slicedToArray(g,3),y=x[0],j=x[1],w=x[2],S=generateSerialNums(0,23),k=generateSerialNums(0,59),B=generateSerialNums(0,59);u.current=new MobileSelect({title:"\u65F6\u95F4\u9009\u62E9",position:[S.indexOf(y||m),k.indexOf(j||C),B.indexOf(w||p)],wheels:[{data:S},{data:k},{data:B}],onShow:function(){document.getElementsByTagName("body")[0].style.overflow="hidden"},onHide:function(){document.getElementsByTagName("body")[0].style.overflow=null},callback:function(z,H){e(H.join(":"))}})},[]),_jsx("div",{ref:d,children:_jsx(_Input,{prefix:_jsx(TimeIcon,{}),readOnly:!0,value:a,onClick:function(){o||u.current.show()}})})},De=l(62612),lt=l(17672),ct=l(94184),je=l.n(ct),dt=l(73935),ze=function(n){var e=n.visible,i=n.title,a=n.children,o=n.okContent,u=n.cancelContent,d=n.height,c=n.onCancel;return dt.createPortal((0,t.jsxs)("div",{className:je()("mobileDrawer",{"mobileDrawer-show":e}),children:[(0,t.jsx)("div",{className:"grayLayer",onClick:c}),(0,t.jsxs)("div",{className:"content",children:[(0,t.jsx)("div",{className:"btnBar",children:(0,t.jsxs)("div",{className:"fixWidth",children:[(0,t.jsx)("div",{className:"cancel",children:u}),i&&(0,t.jsx)("div",{className:"title",children:i}),(0,t.jsx)("div",{className:"ensure",style:{width:80,display:"flex",justifyContent:"space-between"},children:o})]})}),(0,t.jsx)("div",{className:"panel",children:(0,t.jsx)("div",{className:"fixWidth",children:(0,t.jsx)("div",{className:"wheels",style:{height:d},children:a})})})]})]}),document.body)},ut=function(n){var e=n.onChange,i=(0,s.useRef)(null),a=(0,s.useRef)(),o=(0,s.useRef)(),u=(0,s.useState)(!1),d=(0,A.Z)(u,2),c=d[0],v=d[1];return(0,s.useEffect)(function(){var m=i.current;if(m){var C,p=new lt.Z(i.current,{});a.current=p;var g=Math.max(window.devicePixelRatio||1,1);m.width=m.offsetWidth*g,m.height=m.offsetHeight*g,(C=m.getContext("2d"))===null||C===void 0||C.scale(g,g)}},[]),(0,t.jsxs)("div",{style:{position:"relative"},children:[(0,t.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:o.current?"hidden":"visible"},onClick:function(){return v(!0)},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,t.jsx)("img",{src:o.current||void 0,style:{display:"block",width:"100%",height:100,border:o.current?"1px solid #E3E3E3":0},onClick:function(){return v(!0)}}),(0,t.jsx)(ze,{visible:c,title:"\u7535\u5B50\u7B7E\u540D",okContent:(0,t.jsx)("div",{style:{userSelect:"none"},onClick:function(){var C,p;if((C=a.current)!==null&&C!==void 0&&C.isEmpty()){De.FN.show({content:"\u7B7E\u540D\u4E0D\u80FD\u4E3A\u7A7A",position:"top",maskStyle:{zIndex:1e4}});return}o.current=(p=a.current)===null||p===void 0?void 0:p.toDataURL(),v(!1),e(a.current.toDataURL())},children:"\u786E\u8BA4\u7B7E\u540D"}),cancelContent:(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:80},children:[(0,t.jsx)("div",{onClick:function(){return v(!1)},children:"\u53D6\u6D88"}),(0,t.jsx)("div",{style:{color:"#1e83d3"},onClick:function(){var C;return(C=a.current)===null||C===void 0?void 0:C.clear()},children:"\u91CD\u7F6E"})]}),children:(0,t.jsx)("canvas",{ref:i,style:{width:"100%",height:400,touchAction:"none",userSelect:"none"}})})]})};function He(r){return r?r.substring(0,r.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var ht=function(n){var e=n.onChange,i=n.value,a=n.mapMove,o=a===void 0?!1:a,u=n.optionId,d=(0,s.useRef)(null),c=(0,s.useRef)(),v=(0,s.useRef)(),m=(0,s.useRef)(),C=(0,s.useRef)(),p=(0,s.useState)(function(){if(!!i){var Y=i.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(Y&&Y.length>2)return[parseFloat(Y[1]),parseFloat(Y[2])]}}),g=(0,A.Z)(p,2),x=g[0],y=g[1],j=(0,s.useState)(function(){return He(i)}),w=(0,A.Z)(j,2),S=w[0],k=w[1],B=(0,s.useState)(!1),L=(0,A.Z)(B,2),z=L[0],H=L[1],_=(0,s.useCallback)(function(Y){v.current.getLocation(Y,function(K,Q){if(K==="complete"&&Q.geocodes.length){var se=Q.geocodes[0].location;m.current.start(se)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,s.useEffect)(function(){window["localMap".concat(u)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(ue){var ce=new AMap.Map("map-".concat(u),{zoom:16,center:x,dragEnable:o,zoomEnable:o});if(c.current=ce,o){var de=new ue({mode:"dragMarker",map:ce});de.on("success",function(we){k(we.address),y([we.position.lng,we.position.lat])}),x?de.start(x):de.start(),ce.panBy(0,1),m.current=de}var me=new AMap.Geocoder({city:"010"});v.current=me;var it=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});C.current=it,it.getCurrentPosition(function(we,Me){we=="complete"?o?positionPicker.start(Me.position):(ce.setCenter(Me.position),k(Me.formattedAddress),y([Me.position.lng,Me.position.lat])):console.error(Me)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var Y="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(u,"&plugin=AMap.Geocoder,AMap.Geolocation"),K=document.createElement("script");K.src=Y,document.head.appendChild(K);var Q="https://webapi.amap.com/ui/1.1/main-async.js",se=document.createElement("script");se.src=Q,document.head.appendChild(se)},[]),(0,t.jsxs)("div",{style:{position:"relative"},children:[(0,t.jsx)(P.Z.TextArea,{readOnly:!0,value:He(i),onClick:function(){return H(!0)}}),(0,t.jsxs)(ze,{visible:z,height:450,onCancel:function(){H(!1)},okContent:(0,t.jsx)("div",{style:{userSelect:"none"},onClick:function(){x&&e("".concat(S,"[").concat(x[0],", ").concat(x[1],"]")),H(!1)},children:"\u786E\u8BA4\u9009\u62E9"}),cancelContent:(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:[!o&&(0,t.jsx)(R.Z,{type:"link",children:"\u83B7\u53D6\u4F4D\u7F6E"}),o&&(0,t.jsx)(P.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(K){return _(K)}})]}),children:[(0,t.jsx)("div",{ref:d,id:"map-".concat(u),style:{height:390}}),(0,t.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:S})]})]})},$e=function(n){var e,i=n.optionId,a=n.questionId,o=n.checked,u=n.checkedCount,d=n.quota,c=n.statEnabled,v=(0,h.Al)(),m=v.statistics,C=m==null?void 0:m.questionStatistics[a],p=((C==null?void 0:C.optionStatistics.reduce(function(j,w){return j+w.count},0))||0)+u,g=(C==null||(e=C.optionStatistics.find(function(j){return j.optionId===i}))===null||e===void 0?void 0:e.count)||0,x=o?g+1:g,y="".concat(Math.floor(x/p*1e3)/10,"%");return!c&&d===void 0?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)("span",{className:"vote-info",children:[d&&(0,t.jsxs)("span",{className:"vote-info-quota",style:{color:d-g>0?"#1890ff":"#949aae"},children:["(\u4F59",d-g,")"]}),c&&u>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"vote-info-cnt",children:[x,"\u7968"]}),(0,t.jsx)("span",{className:"vote-info-percent ",children:y}),(0,t.jsx)("div",{className:"vote-info-bar",children:(0,t.jsx)("div",{className:"vote-info-bar-fill",style:{width:y}})})]})]})},kn=l(22385),We=l(94199),vt=l(93224),Ue=l(49914),ft=l(39017),mt=l(78338);function gt(r){r=Number(r);var n=Math.floor(r/3600),e=Math.floor(r%3600/60),i=Math.floor(r%3600%60),a="".concat(n).padStart(2,"0"),o="".concat(e).padStart(2,"0"),u="".concat(i).padStart(2,"0");return"".concat(a,":").concat(o,":").concat(u)}function xt(r){return r<=60?"#ff4d4f":r<=180?"#faad14":"#52c41a"}var Ct=(0,Z.Pi)(function(){var r,n,e=(0,Ue.H)(),i=(0,ft.Rk)(),a=e.startTime,o=((r=e.project)===null||r===void 0||(n=r.setting.examSetting)===null||n===void 0?void 0:n.maxSubmitMinutes)||0,u=(0,s.useState)(0),d=(0,A.Z)(u,2),c=d[0],v=d[1],m=a+o*60*1e3,C=(0,s.useRef)();return(0,s.useEffect)(function(){if(o!==0)return C.current=window.setInterval(function(){v((m-new Date().getTime())/1e3)},1e3),function(){clearInterval(C.current)}},[m]),(0,s.useEffect)(function(){c<0&&(i.submit(),clearInterval(C.current))},[c]),o===0?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)("div",{style:{position:"absolute",right:10,fontSize:13},children:[(0,t.jsx)(mt.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,t.jsx)("span",{style:{marginLeft:3,color:xt(c)},children:gt(c)})]})}),yt=["size","marked"],Ne=(0,Z.Pi)(function(r){var n=r.size,e=r.marked,i=e===void 0?!0:e,a=(0,vt.Z)(r,yt),o=(0,h.Rk)(),u=o.props.answerSheetVisible;return u?(0,t.jsx)("svg",(0,O.Z)((0,O.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:r.size||24,height:r.size||24,className:"marked"},a),{},{children:(0,t.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:i?"#EA4942":"#d8d8d8","p-id":"1287"})})):(0,t.jsx)(t.Fragment,{})}),An=(0,Z.Pi)(function(r){var n,e,i,a=r.id,o=r.name,u=(0,h.Rk)(),d=u.answerSheet,c=d.find(function(g){return g.id===a}),v=(0,Ue.H)(),m=v==null||(n=v.project)===null||n===void 0?void 0:n.isAuthenticated,C=(e=v.project)===null||e===void 0||(i=e.setting.examSetting)===null||i===void 0?void 0:i.randomSurveyWrong,p=u.exerciseMode;return(!p||!m||a.length<=10)&&!C?(0,t.jsx)(t.Fragment,{}):c!=null&&c.favorite?(0,t.jsx)(We.Z,{title:C?"\u79FB\u51FA\u9519\u9898":"\u79FB\u51FA\u6536\u85CF",children:(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"24",height:"24",style:{float:"right"},onClick:function(){u.favoriteQuestion({templateId:a,name:o},!1)},children:(0,t.jsx)("path",{d:"M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z","p-id":"2829",fill:"#d81e06"})})}):(0,t.jsx)(We.Z,{title:C?"\u6DFB\u52A0\u5230\u9519\u9898":"\u6536\u85CF",children:(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:24,height:24,style:{float:"right"},onClick:function(){u.favoriteQuestion({templateId:a,name:o})},children:(0,t.jsx)("path",{d:"M484.267 272.021l6.634 6.72c5.974 5.974 13.014 12.843 21.099 20.63l9.195-8.918c7.253-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.526 76.629 202.795 2.133 281.195L512 853.333 204.672 553.237c-74.475-78.421-73.77-203.69 2.133-281.216a193.28 193.28 0 0 1 277.44 0z m293.162 232.15c46.272-53.76 44.182-136.15-5.973-187.371a129.28 129.28 0 0 0-185.984 0l-15.125 15.104a1687.253 1687.253 0 0 1-4.395 4.31L512 388.18l-49.28-47.445-13.227-12.928-10.965-11.008a129.28 129.28 0 0 0-186.005 0c-51.456 52.565-52.31 137.963-2.198 191.573L512 763.883l261.675-255.531 3.754-4.181z","p-id":"2674",fill:"#d8d8d8"})})})}),pt=(0,Z.Pi)(function(r){var n=(0,h.Rk)(),e=r.finished,i=r.marked,a=r.seqNo,o=r.id;return(0,t.jsxs)("div",{className:je()("answer-sheet-item",{marked:i,finished:e}),onClick:function(){return n.changePageIndex(o)},children:[a,i&&(0,t.jsx)(Ne,{style:{position:"absolute",left:32,bottom:32},size:24})]})}),jt=(0,Z.Pi)(function(){var r=(0,h.Rk)(),n=r.answerSheet;return(0,t.jsx)(t.Fragment,{children:n.filter(function(e){return e.display!=="none"}).map(function(e,i){return(0,s.createElement)(pt,(0,O.Z)((0,O.Z)({},e),{},{seqNo:i+1,key:e.id}))})})}),bt=(0,Z.Pi)(function(){var r=(0,h.Rk)(),n=r.answerSheet,e=n.filter(function(o){return o.finished}).length,i=n.filter(function(o){return!o.finished}).length,a=n.filter(function(o){return o.marked}).length;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,t.jsx)("span",{style:{marginLeft:4},children:e})]}),(0,t.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,t.jsx)("span",{style:{marginLeft:4},children:i})]}),(0,t.jsxs)("div",{className:"marked",children:[(0,t.jsx)(Ne,{size:18}),"\u6807\u8BB0",(0,t.jsx)("span",{style:{marginLeft:4},children:a})]})]})}),St=(0,Z.Pi)(function(){var r=(0,h.Rk)(),n=r.props.answerSheetVisible,e=r.answerSheetVisible;return n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginRight:12},onClick:function(){r.answerSheetVisible=!0},children:[(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,t.jsx)("path",{d:"M800 96c70.4 0 128 57.6 128 128v576c0 70.4-57.6 128-128 128H224c-70.4 0-128-57.6-128-128V224c0-70.4 57.6-128 128-128h576z m0 64H224c-35.2 0-60.8 25.6-64 60.8V800c0 35.2 25.6 60.8 60.8 64H800c35.2 0 60.8-25.6 64-60.8V224c0-35.2-25.6-60.8-60.8-64H800zM416 640c35.2 0 64 28.8 64 64s-28.8 64-64 64H288c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z m320 0c35.2 0 64 28.8 64 64s-28.8 64-64 64h-128c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z m-320-192c35.2 0 64 28.8 64 64s-28.8 64-64 64H288c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z m320 0c35.2 0 64 28.8 64 64s-28.8 64-64 64h-128c-35.2 0-64-28.8-64-64s28.8-64 64-64h128zM416 256c35.2 0 64 28.8 64 64s-28.8 64-64 64H288c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z m320 0c35.2 0 64 28.8 64 64s-28.8 64-64 64h-128c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z",fill:"#8c8c8c"})}),"\u7B54\u9898\u5361"]}),(0,t.jsx)(De.GI,{visible:e,onMaskClick:function(){r.answerSheetVisible=!1},className:"adm-answer-sheet",bodyStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px",overflowY:"auto"},children:(0,t.jsxs)("div",{className:"answer-sheet",children:[(0,t.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,t.jsx)(Ct,{})]}),(0,t.jsx)("div",{className:"answer-sheet-content",children:(0,t.jsx)(jt,{})}),(0,t.jsx)("div",{className:"answer-sheet-footer",children:(0,t.jsx)(bt,{})})]})})]}):(0,t.jsx)(t.Fragment,{})}),Mt=(0,Z.Pi)(function(r){var n=(0,h.Rk)(),e=n.reviewAnswer[r.qId];return e&&!e.visible?(0,t.jsx)(R.Z,{block:!0,ghost:!0,className:"review-answer-btn",style:{marginTop:10},onClick:function(){e.visible=!0},children:"\u67E5\u770B\u7B54\u6848"}):(0,t.jsx)(t.Fragment,{})}),Pn=l(88983),Ve=l(66253),Ke=l(43061),Ye=l(38819),Et=l(91220),Je=l(15020);function _e(r,n,e){if(!r)return"";var i=RegExp("_{3,}","g"),a=r.matchAll(i),o=[],u=(0,Et.Z)(a),d;try{for(u.s();!(d=u.n()).done;){var c=d.value,v=c.index,m=c.index+c[0].length;o.push([v,m])}}catch(y){u.e(y)}finally{u.f()}if(o.length===0)return r;for(var C=o[0][0]===0?"":r.substring(0,o[0][0]),p=function(j){var w,S,k=o[j],B=o[j+1];if(!k)return"break";var L=r.substring(k[0],k[1]),z=r.substring(k[1],B?B[0]:r.length),H=e?e[n[j].id]:"",_=n[j];if(((w=_.attribute)===null||w===void 0?void 0:w.dataType)==="select"){var Y,K;H=(Y=_.dataSource)===null||Y===void 0||(K=Y.find(function(ue){return ue.value===H}))===null||K===void 0?void 0:K.label}else if(((S=_.attribute)===null||S===void 0?void 0:S.dataType)==="selectDict"){var Q,se;H=(Q=H)===null||Q===void 0||(se=Q.split("|"))===null||se===void 0?void 0:se[1]}C+='<input data-id="'.concat(n[j].id,`" value='`).concat(H,`' class="horz-blank" style="width:`).concat(12*L.length,'px">'),C+=z},g=0;g<o.length;g++){var x=p(g);if(x==="break")break}return C}var Ze=(0,Z.Pi)(function(r){var n=r.content,e=r.children,i=r.value,a=i===void 0?{}:i,o=r.onChange,u=r.onBlur,d=r.schema,c=(0,h.Rk)(),v=c.reviewAnswer[d.id];function m(C,p){var g,x;if(a[C]!==p){a[C]=p;var y=e.find(function(k){return k.id===C}),j=y==null||(g=y.attribute)===null||g===void 0?void 0:g.cascaderLevel,w=y==null||(x=y.attribute)===null||x===void 0?void 0:x.dictCode;w&&j&&e.filter(function(k){var B;return((B=k.attribute)===null||B===void 0?void 0:B.dictCode)===w&&k.attribute.cascaderLevel&&k.attribute.cascaderLevel>j}).forEach(function(k){delete a[k.id]}),(p===""||p===void 0)&&delete a[C];var S=(0,O.Z)({},a);if(Object.keys(S).length!==0)return S}}return(0,t.jsx)("div",{className:"pe-view",onClick:function(p){p.preventDefault(),p.stopPropagation()},children:(0,Je.ZP)(_e(n,e),{replace:function(p){var g=p.attribs;if(!!g){var x=g["data-id"];if(x){var y,j,w,S,k,B=(0,Je.e_)(g),L=e.findIndex(function(de){return de.id===x}),z=e[L],H=(y=e[L-1])===null||y===void 0?void 0:y.id,_=a[H],Y=(z==null||(j=z.attribute)===null||j===void 0?void 0:j.dataType)||"text",K=z==null||(w=z.attribute)===null||w===void 0?void 0:w.dictCode,Q=z==null||(S=z.attribute)===null||S===void 0?void 0:S.dateTimeFormat,se=(k=z.attribute)===null||k===void 0?void 0:k.cascaderLevel,ue=v==null?void 0:v[x].isCorrect,ce=je()(B.className,{selected:v&&v.visible,"is-correct":v&&v.visible&&ue});return(0,t.jsx)(J,(0,O.Z)((0,O.Z)({type:Y,value:a[x],parentValue:_,cascaderLevel:se,onChange:function(me){return o(m(x,me))},onBlur:function(me){return u(m(x,me))},dictCode:K,dateTimeFormat:Q,schema:z,bordered:!1,icon:!1},B),{},{className:ce}))}}}})})}),wt=(0,Z.Pi)(function(r){var n=r.qId,e=r.schema,i=r.value,a=r.onChange,o=r.onBlur,u=r.disabled,d=e.id,c=e.title,v=e.attribute,m=v===void 0?{}:v,C=(0,h.Rk)(),p=C.reviewAnswer[n],g=p==null?void 0:p[d].selected,x=p==null?void 0:p[d].isCorrect,y=m.dataType;return p&&p.visible&&(g||x)?(0,t.jsxs)("label",{className:je()("ant-radio-wrapper ant-radio-wrapper-in-form-item option-item",{selected:g,"is-correct":x}),onClick:function(){u||r.onChange()},children:[(0,t.jsxs)("span",{children:[!x&&(0,t.jsx)(Ke.Z,{style:{color:"#ff6d56",marginRight:10}}),x&&(0,t.jsx)(Ye.Z,{style:{color:"#00bf6f",marginRight:10}})]}),(0,t.jsx)("div",{className:"option-label-wrap",children:(0,t.jsx)(D.Z,{html:c})})]}):(0,t.jsx)(Ve.ZP,{value:d,className:"option-item",onClick:function(){u||r.onChange(i)},disabled:u,children:y==="horzBlank"&&e.children?(0,t.jsx)(Ze,{schema:e,content:c,children:e.children,value:typeof i=="boolean"?{}:i,onBlur:o,onChange:a}):(0,t.jsx)(D.Z,{html:c})})}),Nn=l(63185),Ge=l(9676),Dt=l(36862),Zt=l(46533),kt=(0,Z.Pi)(function(r){var n=r.qId,e=r.schema,i=r.checked,a=r.onChange,o=r.value,u=r.onBlur,d=r.disabled,c=e.id,v=e.title,m=e.attribute,C=m===void 0?{}:m,p=(0,h.Rk)(),g=p.reviewAnswer[n],x=g==null?void 0:g[c].selected,y=g==null?void 0:g[c].isCorrect,j=C.dataType;return g&&g.visible&&(x||y)?(0,t.jsxs)("label",{className:je()("ant-checkbox-wrapper ant-checkbox-wrapper-in-form-item option-item",{selected:x,"is-correct":y}),onClick:function(){return a(!i)},children:[(0,t.jsxs)("span",{children:[!y&&(0,t.jsx)(Dt.Z,{size:17,style:{color:"#ff6d56",marginRight:10,fontSize:17}}),y&&(0,t.jsx)(Zt.Z,{size:17,style:{color:"#00bf6f",marginRight:10,fontSize:17}})]}),(0,t.jsx)("div",{className:"option-label-wrap",children:(0,t.jsx)(D.Z,{html:v})})]}):(0,t.jsx)(Ge.Z,{value:c,checked:i,onChange:function(S){return a(S.target.checked)},className:"option-item",disabled:d,children:j==="horzBlank"&&e.children?(0,t.jsx)(Ze,{schema:e,content:v,children:e.children,value:o,onBlur:u,onChange:function(S){return a(!0,S)}}):(0,t.jsx)(D.Z,{html:v})})}),Ie=(0,Z.Pi)(function(r){var n=r.schema,e=r.value,i=r.onChange,a=r.qId,o=(0,h.AK)("-body-question"),u=n.id,d=n.attribute,c=n.title,v=d==null?void 0:d.suffix,m=d==null?void 0:d.dataType,C=d==null?void 0:d.readOnly,p=(0,h.Rk)(),g=p.reviewAnswer[a],x=g==null?void 0:g[u].isCorrect;return g&&g.visible?(0,t.jsxs)("span",{style:{position:"relative",width:"100%"},children:[!x&&(0,t.jsx)(Ke.Z,{style:{color:"#ff6d56",marginRight:10,position:"absolute",left:4,top:3,zIndex:1}}),x&&(0,t.jsx)(Ye.Z,{style:{color:"#00bf6f",marginRight:10,position:"absolute",left:4,top:3,zIndex:1}}),(0,t.jsx)(J,{type:m,value:e[u],className:je()("selected",{"is-correct":x}),onChange:function(j){return i(j)},style:{paddingLeft:20},schema:n,suffix:v&&(0,t.jsx)("span",{className:o+"-option-suffix",children:(0,t.jsx)(D.Z,{html:v})})})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(J,{type:m,value:e[u],onChange:function(j){return i(j)},readOnly:C,schema:n,suffix:v&&(0,t.jsx)("span",{className:o+"-option-suffix",children:(0,t.jsx)(D.Z,{html:v})})})})}),At=(0,Z.Pi)(function(r){var n,e,i=r.qId,a=r.schema,o=(0,h.Rk)(),u=o.reviewAnswer[i],d=(n=a.children)===null||n===void 0?void 0:n.map(function(C){var p;return(p=C.attribute)===null||p===void 0?void 0:p.examCorrectAnswer}).filter(function(C){return C}).join(";"),c=d&&["FillBlank","MultipleBlank","Textarea"].includes(a.type),v=function(){return c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"answer-analysis-title",children:"\u6B63\u786E\u7B54\u6848\uFF1A"}),(0,t.jsx)("div",{className:"answer-analysis-content",style:{marginBottom:10},children:d})]}):(0,t.jsx)(t.Fragment,{})},m=function(){var p;if((p=a.attribute)!==null&&p!==void 0&&p.examAnalysis){var g;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"answer-analysis-title",children:"\u7B54\u6848\u89E3\u6790\uFF1A"}),(0,t.jsx)("div",{className:"answer-analysis-content",children:(0,t.jsx)(D.Z,{html:(g=a.attribute)===null||g===void 0?void 0:g.examAnalysis})})]})}return(0,t.jsx)(t.Fragment,{})};return u&&u.visible&&((e=a.attribute)!==null&&e!==void 0&&e.examAnalysis||c)?(0,t.jsxs)("div",{className:"answer-analysis",children:[v(),m()]}):(0,t.jsx)(t.Fragment,{})}),Pt=(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,t.jsx)("path",{d:"M839 73.9c-1.2-2.4-3.7-9.8-7.4-9.8s-11.1 8.6-13.5 12.3l-13.5 12.3c-7.4-6.1-35.6-23.4-43-23.4-11.1 0-104.6 113.2-118.1 129.1l-60.2 68.8-30.7 38.1-43.1-83.6-50.4-100.8c-4.9-9.8-8.6-22.1-22.1-22.1-7.3 0-9.8 3.6-13.5 9.8-3.7 4.9-3.7 4.9-11.1 8.6-8.6 0-12.3 0-19.7 6.2-6.2-4.9-11.1-11.1-19.7-11.1-3.7 0-6.2 1.2-8.6 3.6l-8.6 7.4c-4.8 6.1-15.9 17.2-15.9 25.8 0 11 9.8 31.9 13.5 41.8l90.9 250.8-14.7 17.3c-66.4 79.8-159.8 190.5-210.2 279l-29.5 50.4c-8.6 14.7-29.5 44.3-29.5 60.2 0 3.7 3.8 6.2 6.2 8.6 8.6 7.3 3.6 14.7 1.2 24.5-2.5 7.4-3.7 12.3-3.7 19.7 0 13.5 11.1 27 18.5 38.1 7.3 12.2 9.9 24.5 25.8 24.5 17.2 0 49.2-3.6 63.9-14.7l243.4-377.5 115.6 178.5c6.1 9.8 30.7 54.1 46.7 54.1 14.8 0 38.1-16.1 40.6-30.8-2.6-4.9-6.2-12.3-6.2-17.2 0-7.5 19.7-14.9 24.6-19.7v-9.9c8.6-3.7 13.5-8.6 17.2-17.2l-95.9-205.3-38.2-76.3 13.6-19.7 174.6-225.9c11-14.8 28.3-38.1 41.8-50.4 4.9-5 13.5-12.3 13.5-19.7 0-8.6-19.7-22.1-24.6-34.4z","p-id":"14396",fill:"#fe6c56"})}),Nt=(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,t.jsx)("path",{d:"M389.7 604.3L198.2 447.4c-3.7-3-9.1-3-12.8 0.1l-73.3 61.4c-4.4 3.7-4.8 10.3-0.9 14.5l324.1 344.3c5 5.3 13.8 3.6 16.6-3.1 64.4-160.1 244.3-452.8 463.2-664.7 3-2.9 3.9-7.2 2.3-11l-13.7-33c-2.4-5.8-9.5-8-14.7-4.5-243.2 157.7-419.4 353.5-499.3 452.9z",fill:"#fe6c56","p-id":"4913"})}),It=(0,Z.Pi)(function(r){var n=r.schema,e=r.seqNo,i=(0,h.Rk)(),a=i.props.correctAnswerVisible,o=i.props.questionScore;return!a||!o?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)("div",{className:"exam-score-info",children:[(0,t.jsxs)("span",{children:["\u7B2C",e,"\u9898"]}),o[n.id]?(0,t.jsxs)("div",{style:{display:"flex"},children:[(0,t.jsxs)("span",{className:"score",children:["\u5F97\u5206:",o[n.id],"\u5206"]}),Nt]}):Pt]})}),Bt=(0,Z.Pi)(function(r){var n,e=r.schema,i=r.title,a=r.onBlur,o=r.onChange,u=e.type,d=((n=e.children)===null||n===void 0?void 0:n.filter(function(m){var C;return(C=m.attribute)===null||C===void 0?void 0:C.fieldInTitle}))||[],c=(0,Z.U$)(),v=c.value;return u!=="HorzBlank"||d.length===0?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(D.Z,{html:i})}):(0,t.jsx)(Ze,{schema:e,children:d,content:i,onChange:o,onBlur:a,value:v})});function Ot(r){var n,e=r.schema,i=r.index,a=r.qsIndex,o=r.required,u=r.error,d=r.replaceTitle,c=r.seqNo,v=r.onBlur,m=r.onChange,C=r.onFocus,p=(0,s.useContext)(I.ZX),g=p.questionNumber,x=p.requiredVisible,y=(0,h.AK)("-body-question"),j=(0,s.useState)(),w=(0,A.Z)(j,2),S=w[0],k=w[1],B=(0,h.Rk)(),L=(n=B.answerSheet.find(function(_){return _.id===e.id}))===null||n===void 0?void 0:n.marked,z=e.description;(0,s.useEffect)(function(){if(S){var _,Y;(_=document.querySelector("[data-id='".concat(e.id,"']")))===null||_===void 0||_.classList.remove("ant-form-item-has-error"),(Y=document.querySelector("[data-id='".concat(e.id,"']")))===null||Y===void 0||Y.querySelectorAll("[data-id]").forEach(function(me){me.classList.remove("ant-form-item-has-error")})}if(u.length>0){var K,Q=u[0].split("^"),se=(0,A.Z)(Q,2),ue=se[0],ce=se[1],de;ce?(de=document.querySelector("[data-id='".concat(ue,"']")),k(ce)):(de=document.querySelector("[data-id='".concat(e.id,"']")),k(ue)),(K=de)===null||K===void 0||K.classList.add("ant-form-item-has-error")}else S&&k(void 0)},[u]);var H=function(){return S?(0,t.jsx)("span",{className:"question-tag error animated",children:(0,t.jsx)("span",{children:S})}):(0,t.jsx)(t.Fragment,{})};return(0,t.jsxs)("div",{className:y,children:[(0,t.jsx)(It,{schema:e,seqNo:c}),(0,t.jsxs)(F.Z.Item,{label:(0,t.jsxs)("h2",{className:y+"-header",children:[o&&(0,t.jsx)("span",{className:"question-required",children:"*"}),g?(0,t.jsx)("span",{className:"question-seq",children:c}):"",(0,t.jsx)(Bt,{schema:e,title:d||e.title,onBlur:v,onChange:m,onFocus:C}),H(),(0,t.jsx)(Ne,{marked:L,onClick:function(){B.markQuestion(e.id,!L)}}),(0,t.jsx)(M.rF,{id:e.id,name:e.title}),z&&(0,t.jsx)("div",{className:"question-desc",children:(0,t.jsx)(D.Z,{html:z})})]}),labelCol:{span:24},wrapperCol:{span:24},children:[r.children,(0,t.jsx)(Mt,{qId:e.id}),(0,t.jsx)(At,{qId:e.id,schema:e})]})]})}(0,f.eC)("Question",(0,Z.Pi)(Ot),"antdMobile");function Tt(r){var n=r.schema,e=r.index,i=r.seqNo,a=(0,h.AK)("-body-questionSet"),o=(0,s.useContext)(I.ZX),u=o.questionNumber;return(0,t.jsxs)("div",{className:a,children:[(0,t.jsxs)("div",{className:a+"-title",children:[u&&(0,t.jsx)("span",{className:a+"-title-seq",children:(0,t.jsx)("b",{children:u?i:""})}),(0,t.jsx)(D.Z,{html:n.title})]}),r.children,(0,t.jsx)("div",{className:a+"-splitLine"})]})}(0,f.eC)("QuestionSet",Tt,"antdMobile");var In=l(84305),Rt=l(88182),Ft=l(82925),Lt=l(3024),zt=(0,Z.Pi)(function(){var r=(0,s.useContext)(I.ZX),n=r.progressBar,e=(0,h.AK)(),i=(0,h.Rk)(),a=i.progress;return n?(0,t.jsx)(Lt.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,t.jsx)("div",{className:e+"-progress",children:(0,t.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,t.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(a*100,"%")}})})})}):(0,t.jsx)(t.Fragment,{})});function Ht(r){var n=r.headerVisible,e=r.footerVisible,i=r.schema,a=(0,h.AK)(),o=(0,h.Al)(),u=function(){var c,v=(c=i.attribute)===null||c===void 0?void 0:c.headerImage;if(v)return(0,t.jsx)("img",{src:"/api/public/preview/".concat(v),style:{maxWidth:"100%"}})};return(0,t.jsxs)("div",{className:je()(a,{preview:o.isPreview}),children:[(0,t.jsx)(zt,{}),(0,t.jsx)("div",{className:a+"-banner",children:u()}),n&&(0,t.jsx)(T,{}),(0,t.jsx)(Rt.ZP,{locale:Ft.Z,children:(0,t.jsx)(b,{children:r.children})}),e&&(0,t.jsx)(V,{}),(0,t.jsx)(St,{})]})}(0,f.eC)("Survey",Ht,"antdMobile");var Bn=l(13062),fe=l(71230),On=l(89032),he=l(15746),re=l(32059);function $t(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children;function u(d,c){e((0,re.Z)({},c,d))}return(0,t.jsx)("div",{children:o==null?void 0:o.map(function(d){var c=d.id,v=d.title,m=d.attribute,C=m===void 0?{}:m,p=C.mapMove;return(0,t.jsxs)(fe.Z,{gutter:[10,0],"data-id":c,children:[v&&(0,t.jsx)(he.Z,{span:24},d.id),(0,t.jsx)(he.Z,{span:24,children:(0,t.jsx)(ht,{optionId:c,onChange:function(x){return u(x,c)},value:a[c],mapMove:p})})]},c)})})}(0,f.RM)("Address",$t,"antdMobile");var Tn=l(43185),ke=l(32620),Rn=l(34792),Qe=l(48086),Ae=l(39428),Xe=l(3182),Wt=l(81473);function Ut(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=r.readOnly,u=n.children,d=u===void 0?[]:u,c=(0,h.Al)(),v=function(){var m=(0,Xe.Z)((0,Ae.Z)().mark(function C(p){var g,x,y,j;return(0,Ae.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:g=p.onSuccess,x=p.onError,y=p.file,j=p.onProgress,c.onUpload&&c.onUpload({file:y,fileType:6},function(k){j&&j({percent:k.loaded/k.total*100})}).then(function(k){if(k.success&&g&&(g(k.data),k.data.content&&e((0,re.Z)({},d[0].id,k.data.content))),!k.success&&x){var B=new Error("Some error");x({event:B})}});case 2:case"end":return S.stop()}},C)}));return function(p){return m.apply(this,arguments)}}();return(0,t.jsx)("div",{children:d==null?void 0:d.map(function(m){var C=m.id,p=m.attribute,g=p===void 0?{}:p,x=g.cameraOnly;return(0,t.jsx)(P.Z,{placeholder:"\u70B9\u51FB\u8BC6\u522B\u6761\u7801",value:a[C],addonAfter:(0,t.jsx)(ke.Z,{capture:x?"environment":void 0,disabled:o,maxCount:1,accept:"image/*",beforeUpload:function(j){return g!=null&&g.maxFileSize&&j.size>g.maxFileSize*1024*1024?(Qe.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(g.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),ke.Z.LIST_IGNORE):!0},customRequest:v,showUploadList:!1,children:(0,t.jsx)(Wt.Z,{})},C)})})})}(0,f.RM)("Barcode",Ut,"antdMobile");function Be(r,n){var e;return((e=r.children)===null||e===void 0?void 0:e.reduce(function(i,a,o){if(o===0)i.push(r.dataSource||[]);else{var u=r.children[o-1].id,d=n[u];if(d){var c;i.push(((c=i.slice(-1)[0].find(function(v){return v.value===d}))===null||c===void 0?void 0:c.children)||[])}}return i},[]))||[]}function Vt(r){var n,e=r.schema,i=r.onChange,a=r.value,o=a===void 0?{}:a,u=(0,s.useState)(r.value||{}),d=(0,A.Z)(u,2),c=d[0],v=d[1],m=(0,s.useState)(Be(e,o)),C=(0,A.Z)(m,2),p=C[0],g=C[1];(0,s.useEffect)(function(){if(Object.keys(c).length>0){var y=Be(e,c);g(y)}},[c,e]);var x=function(j,w,S){var k,B={};(k=e.children)===null||k===void 0||k.forEach(function(L,z){S>z?B[L.id]=c[L.id]:S===z&&(B[j]=w)}),v(B),Be(e,B).filter(function(L){return L.length>0}).length===Object.values(B).filter(function(L){return L&&L!=="\u8BF7\u9009\u62E9"}).length?i(B):i(void 0)};return(0,t.jsx)(fe.Z,{gutter:[10,10],children:(n=e.children)===null||n===void 0?void 0:n.map(function(y,j){return(0,t.jsx)(he.Z,{span:24,children:(0,t.jsx)(le,{options:p[j]||[],value:c[y.id]||"",onChange:function(S){return x(y.id,S,j)}},y.id)},y.id)})})}(0,f.RM)("Cascader",Vt,"antdMobile");function Kt(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=r.onBlur,u=n.children,d=n.attribute,c=24/((d==null?void 0:d.columns)||1),v=(0,h.AK)("-body-question"),m=!!(d!=null&&d.statEnabled),C=(0,h.Rk)(),p=(0,h.Al)(),g=C.hiddenOption[n.id]||[];(0,s.useEffect)(function(){var y=Object.keys(a),j=!1;y.forEach(function(w){g.includes(w)&&(j=!0,delete a[w])}),j&&e((0,O.Z)({},a))},[g]);function x(y,j,w){j?a[y]=w||!0:delete a[y],e((0,O.Z)({},a))}return(0,s.useEffect)(function(){u==null||u.forEach(function(y){var j;(j=y.attribute)!==null&&j!==void 0&&j.defaultChecked&&Object.keys(a).length===0&&e((0,re.Z)({},y.id,!0))})},[]),(0,t.jsx)("div",{children:(0,t.jsx)(fe.Z,{children:u==null?void 0:u.filter(function(y){return!g.includes(y.id)}).map(function(y){var j,w,S,k,B=y.id,L=(j=y.attribute)===null||j===void 0?void 0:j.dataType,z=(w=y.attribute)===null||w===void 0?void 0:w.suffix,H=(S=y.attribute)===null||S===void 0?void 0:S.readOnly,_=(k=y.attribute)===null||k===void 0?void 0:k.quota,Y=!1;if(_!==void 0){var K,Q=p.statistics,se=Q==null?void 0:Q.questionStatistics[n.id],ue=(se==null||(K=se.optionStatistics.find(function(de){return de.optionId===B}))===null||K===void 0?void 0:K.count)||0,ce=_-ue;ce<=0&&(Y=!0)}return(0,t.jsxs)(he.Z,{span:c,className:v+"-option","data-id":B,children:[(0,t.jsx)(kt,{qId:n.id,disabled:Y,schema:y,checked:a.hasOwnProperty(B),onChange:function(me){Y||x(B,me)},value:typeof a[B]=="boolean"?{}:a[B],onBlur:o}),(0,t.jsx)($e,{statEnabled:m,quota:_,checked:!!a[B],optionId:B,questionId:n.id,checkedCount:Object.keys(a).length}),L&&(0,t.jsx)(J,{value:typeof a[B]=="boolean"?"":a[B],style:{maxWidth:200},type:L,readOnly:H,onChange:function(me){return x(B,!0,me)},suffix:z&&(0,t.jsx)("span",{className:v+"-option-suffix",children:(0,t.jsx)(E.hl,{html:z})})})]},B)})})})}(0,f.RM)("Checkbox",(0,Z.Pi)(Kt),"antdMobile");var Fn=l(62999),Yt=l(95222),Pe=l(3980),Jt=l(60780),_t=l.n(Jt);function Gt(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children,u=o===void 0?[]:o,d=u[0].id,c=(0,s.useState)([]),v=(0,A.Z)(c,2),m=v[0],C=v[1];function p(x){d&&((x==null?void 0:x.length)===0?e(void 0):e((0,re.Z)({},d,x==null?void 0:x.map(function(y){return y.value}))))}var g=(0,s.useMemo)(function(){return _t()(m.map(function(x){return{title:x.name,key:x.id,value:x.id,parentId:x.parentId}}),{parentProperty:"parentId",customID:"key"})},[m]);return(0,s.useEffect)(function(){Pe.hi.selectDept({}).then(function(x){x.success&&C(x.data)})},[]),(0,t.jsx)(fe.Z,{children:(0,t.jsx)(he.Z,{span:24,children:(0,t.jsx)(Yt.Z,{style:{width:"100%"},treeCheckable:!0,value:(a[d]||[]).map(function(x){return{value:x}}),treeCheckStrictly:!0,showSearch:!1,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:g,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:p})})})}(0,f.RM)("Dept",Gt,"antdMobile");function qe(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children,u=(0,h.AK)("-body-question");function d(c,v){a[c]=v,v===""&&delete a[c],e((0,O.Z)({},a))}return(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",rowGap:10},children:o==null?void 0:o.map(function(c){var v=c.id,m=c.attribute,C=c.title;return(0,t.jsxs)(fe.Z,{gutter:[10,10],"data-id":v,children:[C&&(0,t.jsx)(he.Z,{span:24,children:c.title&&(0,t.jsx)("span",{className:u+"-option-title",children:(0,t.jsx)(D.Z,{html:c.title})})},c.id),(0,t.jsx)(he.Z,{span:24,children:(0,t.jsx)(Ie,{qId:n.id,schema:c,value:a,onChange:function(g){return d(v,g)}})})]},v)})})}(0,f.RM)("FillBlank",qe,"antdMobile"),(0,f.RM)("MultipleBlank",qe,"antdMobile");function et(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=r.onBlur,u=n.children,d=n.attribute,c=d===void 0?{}:d,v=c.content;return!v||!u?(0,t.jsx)(t.Fragment,{}):(0,t.jsx)(Ze,{schema:n,children:u.filter(function(m){var C;return!((C=m.attribute)!==null&&C!==void 0&&C.fieldInTitle)}),content:v,onBlur:o,onChange:e,value:a})}et.Preview=function(r){var n=r.schema,e=r.value,i=n.children,a=n.attribute,o=a===void 0?{}:a,u=o.content;return(0,t.jsx)("div",{className:"preview",children:(0,t.jsx)("div",{children:(0,t.jsx)(D.Z,{html:_e(u,i,e),replaceP:!1})})})},(0,f.RM)("HorzBlank",et,"antdMobile");var Oe=l(83279),Qt=l(54121),Xt=l(49101);function qt(r){var n=r.schema,e=r.onChange,i=r.value||[{}],a=n.children,o=a===void 0?[]:a,u=n.row,d=u===void 0?[]:u;return(0,t.jsxs)("div",{className:"",children:[i.map(function(c,v){return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:v+1}),(0,t.jsxs)("div",{className:"question-item",style:{background:"#f7f8fa",borderRadius:4,padding:8,position:"relative"},children:[o.map(function(m){return(0,t.jsxs)("div",{className:"option-box",style:{marginBottom:10},children:[(0,t.jsx)("div",{style:{color:"#aaa",fontSize:12,marginBottom:5},children:(0,t.jsx)(D.Z,{html:m.title})}),(0,t.jsx)(Ie,{qId:n.id,schema:m,value:c,onChange:function(p){c[m.id]=p,e((0,Oe.Z)(i))}})]},m.id)}),i.length>1&&(0,t.jsx)(Qt.Z,{onClick:function(){i.splice(v,1),e((0,Oe.Z)(i))},style:{position:"absolute",top:-5,right:-5,color:"#ff4d4f"}})]})]},v)}),(0,t.jsx)("div",{children:(0,t.jsx)(R.Z,{block:!0,icon:(0,t.jsx)(Xt.Z,{}),type:"dashed",onClick:function(){i.push({}),e((0,Oe.Z)(i))},children:"\u7EE7\u7EED\u586B\u5199"})})]})}(0,f.RM)("MatrixAuto",qt,"antdMobile");function en(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children,u=o===void 0?[]:o,d=n.row,c=d===void 0?[]:d;return(0,t.jsx)("div",{className:"",children:c==null?void 0:c.map(function(v){var m=Object.keys(a[v.id]||{});return(0,t.jsxs)("div",{className:"question-item",children:[(0,t.jsx)("h3",{className:"question-sub-title",children:(0,t.jsx)(D.Z,{html:v.title})}),(0,t.jsx)("div",{className:"checkbtn-group",children:(0,t.jsx)(De.Qf,{multiple:!0,value:m,options:u.map(function(C){return{label:C.title,value:C.id}}),onChange:function(p,g){e((0,O.Z)((0,O.Z)({},a),{},(0,re.Z)({},v.id,p.reduce(function(x,y){return x[y]=!0,x},{}))))}})})]},v.id)})})}(0,f.RM)("MatrixCheckbox",en,"antdMobile");function tn(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children,u=o===void 0?[]:o,d=n.row,c=d===void 0?[]:d;return(0,t.jsx)("div",{className:"",children:c==null?void 0:c.map(function(v){return(0,t.jsxs)("div",{className:"question-item",children:[(0,t.jsx)("h3",{className:"question-sub-title",children:(0,t.jsx)(D.Z,{html:v.title})}),(0,t.jsx)("div",{className:"fillBlank-group",children:u.map(function(m){var C=a[v.id]||{};return(0,t.jsxs)("div",{className:"option-box",style:{marginBottom:10},children:[(0,t.jsx)("div",{style:{color:"#aaa",fontSize:12,marginBottom:5},children:(0,t.jsx)(D.Z,{html:m.title})}),(0,t.jsx)(Ie,{qId:n.id,schema:m,value:C,onChange:function(g){var x=a[v.id]||{};e((0,O.Z)((0,O.Z)({},a),{},(0,re.Z)({},v.id,(0,O.Z)((0,O.Z)({},x),{},(0,re.Z)({},m.id,g)))))}})]},m.id)})})]},v.id)})})}(0,f.RM)("MatrixFillBlank",tn,"antdMobile");function nn(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children,u=o===void 0?[]:o,d=n.row,c=d===void 0?[]:d;return(0,t.jsx)("div",{className:"",children:c==null?void 0:c.map(function(v){var m=Object.keys(a[v.id]||{})[0];return(0,t.jsxs)("div",{className:"question-item",children:[(0,t.jsx)("h3",{className:"question-sub-title",children:(0,t.jsx)(D.Z,{html:v.title})}),(0,t.jsx)("div",{className:"checkbtn-group",children:(0,t.jsx)(De.Qf,{value:m?[m]:void 0,options:u.map(function(C){return{label:C.title,value:C.id}}),onChange:function(p,g){e((0,O.Z)((0,O.Z)({},a),{},(0,re.Z)({},v.id,(0,re.Z)({},p[0],!0))))}})})]},v.id)})})}(0,f.RM)("MatrixRadio",nn,"antdMobile");function an(r){for(var n=[],e=2;e<r+2;e++)n.push(e/(r+2));return n}function rn(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=[],a=r;a<=n;a++)i.push(a);return e&&i.reverse(),i}function sn(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children,u=o===void 0?[]:o;function d(v,m){e((0,re.Z)({},v,m))}var c=function(m){var C=m.id,p=a[C],g=an(p||0),x=m.attribute||{},y=x.scope,j=y===void 0?"[0,10]":y,w=x.npsInvertSort,S=x.npsStart,k=S===void 0?"\u4E0D\u53EF\u80FD":S,B=x.npsEnd,L=B===void 0?"\u6781\u6709\u53EF\u80FD":B,z=j.replace("[","").replace("]","").split(","),H=(0,A.Z)(z,2),_=H[0],Y=H[1];return(0,t.jsxs)("div",{className:"nps",children:[(0,t.jsx)("div",{className:"nps-container",children:rn(parseInt(_),parseInt(Y),w).map(function(K){var Q={background:"#2672ff",opacity:g[K]};return(0,t.jsx)("div",{className:"nps-item",style:p>=K?Q:void 0,onClick:function(){return d(C,K)},children:K},K)})}),(0,t.jsxs)("div",{className:"nps-tip",children:[(0,t.jsx)("div",{children:w?L:k}),(0,t.jsx)("div",{children:w?k:L})]})]},C)};return(0,t.jsx)(fe.Z,{children:u.map(function(v){return c(v)})})}(0,f.RM)("Nps",sn,"antdMobile");var on=Ve.ZP.Group;function ln(r){var n,e=r.schema,i=r.onChange,a=r.value,o=a===void 0?{}:a,u=e.children,d=(0,h.AK)("-body-question"),c=!!((n=e.attribute)!==null&&n!==void 0&&n.statEnabled),v=(0,h.Rk)(),m=v.hiddenOption[e.id]||[],C=(0,h.Al)();function p(g,x){i((0,re.Z)({},g,x||!0))}return(0,s.useEffect)(function(){var g=Object.keys(o)[0];m.includes(g)&&i(void 0)},[m]),(0,s.useEffect)(function(){var g;(g=e.children)===null||g===void 0||g.forEach(function(x){var y,j=x.id,w=x.title,S=x.attribute,k=S==null?void 0:S.dataType;(y=x.attribute)!==null&&y!==void 0&&y.defaultChecked&&Object.keys(o).length===0&&i((0,re.Z)({},j,k?o[j]:w))})},[]),(0,t.jsx)("div",{children:(0,t.jsx)(on,{onChange:function(x){},value:Object.keys(o)[0],style:{width:"100%"},children:(0,t.jsx)(fe.Z,{children:u==null?void 0:u.filter(function(g){return!m.includes(g.id)}).map(function(g){var x,y,j,w,S=g.id,k=(x=g.attribute)===null||x===void 0?void 0:x.dataType,B=(y=g.attribute)===null||y===void 0?void 0:y.suffix,L=(j=g.attribute)===null||j===void 0?void 0:j.readOnly,z=!1,H=(w=g.attribute)===null||w===void 0?void 0:w.quota;if(H!==void 0){var _,Y=C.statistics,K=Y==null?void 0:Y.questionStatistics[e.id],Q=(K==null||(_=K.optionStatistics.find(function(ue){return ue.optionId===S}))===null||_===void 0?void 0:_.count)||0,se=H-Q;se<=0&&(z=!0)}return(0,t.jsxs)(he.Z,{span:24,className:d+"-option","data-id":S,children:[(0,t.jsx)(wt,{qId:e.id,schema:g,value:o[S],disabled:z,onChange:function(ce){return p(S,ce)},onBlur:function(ce){}}),(0,t.jsx)($e,{statEnabled:c,quota:H,checked:!!o[S],optionId:S,questionId:e.id,checkedCount:Object.keys(o).length}),k&&(0,t.jsx)(J,{value:o[S]===!0?"":o[S],type:k,style:{maxWidth:200},onChange:function(ce){return p(S,ce)},readOnly:L,suffix:B&&(0,t.jsx)("span",{className:d+"-option-suffix",children:(0,t.jsx)(D.Z,{html:B})})})]},S)})})})})}(0,f.RM)("Radio",(0,Z.Pi)(ln),"antdMobile");function cn(r){var n=(0,h.AK)("-body-question");return(0,t.jsx)("div",{className:n,children:(0,t.jsx)(D.Z,{html:"".concat(r.replaceTitle||r.schema.title||"")})})}(0,f.RM)("Remark",cn,"antdMobile");var Ln=l(80116),zn=l(96433),Te=l(2864),tt=l(41687),dn=l(46870),nt=l(18613),un=l(57206),hn={1:(0,t.jsx)(tt.Z,{}),2:(0,t.jsx)(tt.Z,{}),3:(0,t.jsx)(dn.Z,{}),4:(0,t.jsx)(nt.Z,{}),5:(0,t.jsx)(nt.Z,{})};function vn(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children,u=o===void 0?[]:o;function d(v,m){e((0,re.Z)({},v,m))}var c=function(m){var C=m.attribute||{},p=m.id,g=C.scope,x=g===void 0?"[0,5]":g,y=C.scoreStyle,j=x.replace("[","").replace("]","").split(","),w=(0,A.Z)(j,2),S=w[0],k=w[1];return y==="heart"?(0,t.jsx)(Te.Z,{defaultValue:parseInt(S),character:(0,t.jsx)(un.Z,{}),style:{color:"#ea7463"},count:parseInt(k),onChange:function(L){return d(p,L)}},p):y==="smile"?(0,t.jsx)(Te.Z,{defaultValue:parseInt(S),character:function(L){var z=L.index;return hn[z+1]},count:parseInt(k),onChange:function(L){return d(p,L)}},p):(0,t.jsx)(Te.Z,{defaultValue:parseInt(S),count:parseInt(k),onChange:function(L){return d(p,L)}},p)};return(0,t.jsx)(fe.Z,{children:u.map(function(v){return c(v)})})}(0,f.RM)("Score",vn,"antdMobile");function fn(r){var n,e=r.schema,i=r.onChange,a=r.value,o=a===void 0?{}:a;function u(d){var c,v=(c=e.children)===null||c===void 0?void 0:c.find(function(m){return m.id===d});v&&i((0,re.Z)({},d,!0))}return(0,s.useEffect)(function(){var d;(d=e.children)===null||d===void 0||d.forEach(function(c){var v,m=c.id;(v=c.attribute)!==null&&v!==void 0&&v.defaultChecked&&Object.keys(o).length===0&&i((0,re.Z)({},m,!0))})},[]),(0,t.jsx)(fe.Z,{children:(0,t.jsx)(he.Z,{span:24,children:(0,t.jsx)(le,{value:Object.keys(o)[0],onChange:u,options:((n=e.children)===null||n===void 0?void 0:n.map(function(d){return{label:d.title,value:d.id}}))||[]})})})}(0,f.RM)("Select",fn,"antdMobile");var Hn=l(34669),mn=l(82833);function gn(r){var n=r.schema,e=r.onChange,i=n.children,a=(0,h.Al)(),o=(0,s.useState)(0),u=(0,A.Z)(o,2),d=u[0],c=u[1];function v(m,C){var p="signature-".concat(C,"-").concat((0,I.kb)(6),".png");if(!a.onUpload){e((0,re.Z)({},C,[p]));return}fetch(m).then(function(g){return g.blob()}).then(function(g){var x=new File([g],p,{type:"image/png"});a.onUpload({file:x},function(y){c(y.loaded/y.total*100)}).then(function(y){y.success&&y.data.id&&e((0,re.Z)({},C,[y.data.id]))})})}return(0,t.jsx)("div",{children:i==null?void 0:i.map(function(m){var C=m.id,p=m.title;return(0,t.jsxs)(fe.Z,{gutter:[10,0],"data-id":C,children:[p&&(0,t.jsx)(he.Z,{span:24},m.id),(0,t.jsxs)(he.Z,{span:24,children:[(0,t.jsx)(ut,{onChange:function(x){return v(x,C)}}),d>0&&d!==100&&(0,t.jsx)(mn.Z,{percent:d,size:"small",showInfo:!1})]})]},C)})})}(0,f.RM)("Signature",gn,"antdMobile");var $n=l(48736),at=l(27049);function xn(r){var n=(0,h.AK)("-body-question");return(0,t.jsx)("div",{className:n,children:(0,t.jsx)(at.Z,{plain:!0})})}(0,f.RM)("SplitLine",xn,"antdMobile");function Cn(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children,u=(0,h.AK)("-body-question");function d(c,v){a[c]=v,v===""&&delete a[c],e((0,O.Z)({},a))}return(0,t.jsx)("div",{children:o==null?void 0:o.map(function(c){var v=c.id,m=c.attribute,C=c.title,p=(0,I.Ck)(m==null?void 0:m.autoSize,[2,4]);return(0,t.jsxs)(fe.Z,{style:{marginBottom:10},"data-id":v,children:[C&&(0,t.jsx)(he.Z,{className:u+"-option",span:4,children:c.title&&(0,t.jsx)("span",{className:u+"-option-title",children:c.title})},c.id),(0,t.jsx)(he.Z,{span:24,children:(0,t.jsx)(P.Z.TextArea,{autoSize:{minRows:p[1],maxRows:p[2]},value:a[v]||"",onChange:function(x){return d(v,x.target.value)}})})]},v)})})}(0,f.RM)("Textarea",Cn,"antdMobile");var yn=l(43347),pn=ke.Z.Dragger;function jn(r){var n=r.schema,e=r.onChange,i=r.value,a=r.readOnly,o=n.children,u=(0,h.Al)(),d=(0,s.useState)(),c=(0,A.Z)(d,2),v=c[0],m=c[1];(0,s.useEffect)(function(){var g=n.children[0].id,x=i&&i[g]||[];v==null&&x.length>0&&Pe.hi.loadFiles({ids:x}).then(function(y){m(y==null?void 0:y.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[i]);var C=function(){var g=(0,Xe.Z)((0,Ae.Z)().mark(function x(y){var j,w,S,k;return(0,Ae.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:j=y.onSuccess,w=y.onError,S=y.file,k=y.onProgress,u.onUpload&&u.onUpload({file:S},function(z){k&&k({percent:z.loaded/z.total*100})}).then(function(z){if(z.success&&j&&j(z.data),!z.success&&w){var H=new Error("Some error");w({event:H})}});case 2:case"end":return L.stop()}},x)}));return function(y){return g.apply(this,arguments)}}(),p=function(x,y){if(m(x.fileList),(x.file.status==="removed"||x.file.status==="done")&&!x.fileList.find(function(w){return w.status!=="done"})){var j=x.fileList.filter(function(w){return w.status==="done"}).map(function(w){var S;return((S=w.response)===null||S===void 0?void 0:S.id)||w.uid});j.length===0?e(void 0):e((0,re.Z)({},y,j))}};return(0,t.jsx)("div",{children:o==null?void 0:o.map(function(g){var x=g.id,y=g.attribute,j=y===void 0?{}:y,w=[],S=j.maxFileCount,k=j.maxFileSize,B=j.fileAccept,L=j.cameraOnly;return S&&w.push("\u6700\u591A\u4E0A\u4F20".concat(S,"\u4E2A")),k&&w.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(k,"M\u4EE5\u5185")),B&&w.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(B)),(0,t.jsxs)(pn,{multiple:!0,capture:L?"environment":void 0,disabled:a,maxCount:(j==null?void 0:j.maxFileCount)||20,accept:L?"image/*":void 0,beforeUpload:function(H){return j!=null&&j.maxFileSize&&H.size>j.maxFileSize*1024*1024?(Qe.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(j.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),ke.Z.LIST_IGNORE):!0},customRequest:C,onChange:function(H){return p(H,x)},fileList:v,children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(yn.Z,{})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,t.jsx)("p",{className:"ant-upload-hint",children:w.join(",")})]},x)})})}(0,f.RM)("Upload",jn,"antdMobile");var bn=l(55686),Sn=oe.Z.Option;function Mn(r){var n=r.schema,e=r.onChange,i=r.value,a=i===void 0?{}:i,o=n.children,u=o===void 0?[]:o,d=u[0].id,c=(0,s.useState)([]),v=(0,A.Z)(c,2),m=v[0],C=v[1];function p(y){d&&e((0,re.Z)({},d,y))}var g=(0,Pe.zE)(function(y){Pe.hi.userSelect({name:y,selected:a[d]||[]}).then(function(j){j.success&&C(j.data)})},5),x=function(j){p(j?m.map(function(w){return w.userId}):void 0)};return(0,s.useEffect)(function(){var y;g(""),(y=n.children)===null||y===void 0||y.forEach(function(j){var w,S=j.id;(w=j.attribute)!==null&&w!==void 0&&w.defaultChecked&&Object.keys(a).length===0&&e((0,re.Z)({},S,!0))})},[]),(0,t.jsx)(fe.Z,{children:(0,t.jsx)(he.Z,{span:24,children:(0,t.jsx)(oe.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,filterOption:!1,mode:"multiple",onClear:function(){e(void 0)},value:a[d]||[],onSearch:g,showSearch:!0,onChange:p,dropdownRender:function(j){return(0,t.jsxs)("div",{children:[j,(0,t.jsx)(at.Z,{style:{margin:"4px 0"}}),(0,t.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,t.jsx)(Ge.Z,{onChange:function(S){x(S.target.checked)},children:"\u5168\u9009"})})]})},children:m.map(function(y){return(0,t.jsx)(Sn,{value:y.userId,label:y.name,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{role:"img",style:{marginRight:10},children:(0,t.jsx)(bn.Z,{user:y,size:20})}),y.name," ",y.deptName&&"(".concat(y.deptName,")")]})},y.userId)})})})})}(0,f.RM)("User",Mn,"antdMobile");var En=function(n){return(0,t.jsx)(t.Fragment,{children:n.children})},wn=En;(0,I.RM)("RichText",(0,s.lazy)(function(){return Promise.resolve().then(l.bind(l,80116))}),"antdMobile"),(0,I.cf)("Upload",(0,s.lazy)(function(){return Promise.all([l.e(6661),l.e(4502),l.e(6545)]).then(l.bind(l,90858))}),"antdMobile")},80116:function(ee,W,l){"use strict";l.r(W);var N=l(32059),F=l(94657),A=l(70811),I=l(3980),D=l(67294),Z=l(54707),s=l(85893);function h(f){var M=f.schema,E=f.onChange,t=f.value,T=t===void 0?{}:t,b=f.onBlur,$=M.children,R=(0,Z.AK)("-body-question"),V=(0,D.useState)(T[M.children[0].id]),q=(0,F.Z)(V,2),P=q[0],O=q[1],G=(0,Z.Rk)(),oe=(0,D.useCallback)(function(ie,ae){E((0,N.Z)({},ie,ae))},[]);return(0,s.jsx)("div",{children:$==null?void 0:$.map(function(ie){var ae=ie.id;return(0,s.jsx)(A.Mf,{value:P,onChange:function(U){return oe(ae,U)},onUpload:function(U){return I.hi.upload("/api/public/upload",{fileType:4,basePath:G.schema.id,file:U})}},ie.id)})})}W.default=h},55686:function(ee,W,l){"use strict";var N=l(11849),F=l(94233),A=l(51890),I=l(93224),D=l(89366),Z=l(85893),s=["user"],h=function(M){var E=M.user,t=(0,I.Z)(M,s);return!E||!E.avatar?(0,Z.jsx)(A.C,(0,N.Z)({icon:(0,Z.jsx)(D.Z,{}),size:t.size||"small"},t)):(0,Z.jsx)(A.C,(0,N.Z)({src:"/api/public/preview/".concat(E.avatar),size:t.size||"small"},t))};W.Z=h},78210:function(ee,W,l){"use strict";var N=l(27856),F=l.n(N),A=l(15020),I=l(85893),D=function(s){var h=s.html,f=h===void 0?"":h,M=s.replaceP,E=M===void 0?!0:M;return E?(0,I.jsx)("div",{className:"pe-view",children:typeof f=="string"&&(0,A.ZP)(F().sanitize(f,{ADD_TAGS:["iframe"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling"]}).replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,I.jsx)(I.Fragment,{children:typeof f=="string"&&(0,A.ZP)(F().sanitize(f))})};W.Z=D},39017:function(ee,W,l){"use strict";l.d(W,{Rk:function(){return M}});var N=l(67294),F=l(24004);function A(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=useContext(SurveyContext),T=t.theme;return"survey-".concat(T)+E}function I(E,t){var T=(t&&t.depends||[]).reduce(function(b,$){return b||!$},!1);return D(T?void 0:function(b,$){return fetch(b,$).then(function(R){if(!!R.ok)return R.json()})},E,t||{})}function D(E){for(var t=arguments.length,T=new Array(t>1?t-1:0),b=1;b<t;b++)T[b-1]=arguments[b];var $=useState(0),R=_slicedToArray($,2),V=R[0],q=R[1],P=useCallback(function(){q(Math.random())},[]),O=useState({loading:!1,mutate:P}),G=_slicedToArray(O,2),oe=G[0],ie=G[1];return useEffect(function(){!E||T[1].manual&&V===0||E.apply(null,T).then(function(ae){ae.code===200?ie({loading:!1,data:ae.data,mutate:P}):ie({error:ae.message,loading:!1,mutate:P})}).catch(function(ae){ie({error:ae,loading:!1,mutate:P})})},Z(V,T)),oe}function Z(){for(var E=arguments.length,t=new Array(E),T=0;T<E;T++)t[T]=arguments[T];for(var b=[],$=0;$<arguments.length;$++){var R=arguments[$];if(R instanceof Array)for(var V=0;V<R.length;V++)b=b.concat(Z(R[V]));else if(typeof URL!="undefined"&&R instanceof URL)b=b.concat(R.toJSON());else if(R instanceof Object)for(var q=Object.keys(R),P=0;P<q.length;P++){var O=q[P];O==="depends"?b=b.concat(R[O]):b=b.concat([O]).concat(Z(R[O]))}else b=b.concat(R)}return b}var s=l(87998);function h(){return useContext(SurveyContext)}function f(){return useSurvey().attachments}function M(){var E=(0,N.useContext)(s.ZX);return E.innerStore}},49914:function(ee,W,l){"use strict";l.d(W,{H:function(){return A}});var N=l(67294),F=l(87998);function A(){return(0,N.useContext)(F.ff)}},9715:function(ee,W,l){"use strict";var N=l(38663),F=l.n(N),A=l(34442),I=l.n(A),D=l(6999),Z=l(22385)},18601:function(ee,W,l){var N=l(14841),F=1/0,A=17976931348623157e292;function I(D){if(!D)return D===0?D:0;if(D=N(D),D===F||D===-F){var Z=D<0?-1:1;return Z*A}return D===D?D:0}ee.exports=I},40554:function(ee,W,l){var N=l(18601);function F(A){var I=N(A),D=I%1;return I===I?D?I-D:I:0}ee.exports=F},17672:function(ee,W,l){"use strict";l.d(W,{Z:function(){return D}});/*!
 * Signature Pad v4.0.4 | https://github.com/szimek/signature_pad
 * (c) 2022 Szymon Nowak | Released under the MIT license
 */class N{constructor(s,h,f,M){if(isNaN(s)||isNaN(h))throw new Error(`Point is invalid: (${s}, ${h})`);this.x=+s,this.y=+h,this.pressure=f||0,this.time=M||Date.now()}distanceTo(s){return Math.sqrt(Math.pow(this.x-s.x,2)+Math.pow(this.y-s.y,2))}equals(s){return this.x===s.x&&this.y===s.y&&this.pressure===s.pressure&&this.time===s.time}velocityFrom(s){return this.time!==s.time?this.distanceTo(s)/(this.time-s.time):0}}class F{constructor(s,h,f,M,E,t){this.startPoint=s,this.control2=h,this.control1=f,this.endPoint=M,this.startWidth=E,this.endWidth=t}static fromPoints(s,h){const f=this.calculateControlPoints(s[0],s[1],s[2]).c2,M=this.calculateControlPoints(s[1],s[2],s[3]).c1;return new F(s[1],f,M,s[2],h.start,h.end)}static calculateControlPoints(s,h,f){const M=s.x-h.x,E=s.y-h.y,t=h.x-f.x,T=h.y-f.y,b={x:(s.x+h.x)/2,y:(s.y+h.y)/2},$={x:(h.x+f.x)/2,y:(h.y+f.y)/2},R=Math.sqrt(M*M+E*E),V=Math.sqrt(t*t+T*T),q=b.x-$.x,P=b.y-$.y,O=V/(R+V),G={x:$.x+q*O,y:$.y+P*O},oe=h.x-G.x,ie=h.y-G.y;return{c1:new N(b.x+oe,b.y+ie),c2:new N($.x+oe,$.y+ie)}}length(){const s=10;let h=0,f,M;for(let E=0;E<=s;E+=1){const t=E/s,T=this.point(t,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),b=this.point(t,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(E>0){const $=T-f,R=b-M;h+=Math.sqrt($*$+R*R)}f=T,M=b}return h}point(s,h,f,M,E){return h*(1-s)*(1-s)*(1-s)+3*f*(1-s)*(1-s)*s+3*M*(1-s)*s*s+E*s*s*s}}class A{constructor(){try{this._et=new EventTarget}catch(s){this._et=document}}addEventListener(s,h,f){this._et.addEventListener(s,h,f)}dispatchEvent(s){return this._et.dispatchEvent(s)}removeEventListener(s,h,f){this._et.removeEventListener(s,h,f)}}function I(Z,s=250){let h=0,f=null,M,E,t;const T=()=>{h=Date.now(),f=null,M=Z.apply(E,t),f||(E=null,t=[])};return function(...$){const R=Date.now(),V=s-(R-h);return E=this,t=$,V<=0||V>s?(f&&(clearTimeout(f),f=null),h=R,M=Z.apply(E,t),f||(E=null,t=[])):f||(f=window.setTimeout(T,V)),M}}class D extends A{constructor(s,h={}){super();this.canvas=s,this._handleMouseDown=f=>{f.buttons===1&&(this._drawningStroke=!0,this._strokeBegin(f))},this._handleMouseMove=f=>{this._drawningStroke&&this._strokeMoveUpdate(f)},this._handleMouseUp=f=>{f.buttons===1&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(f))},this._handleTouchStart=f=>{if(f.preventDefault(),f.targetTouches.length===1){const M=f.changedTouches[0];this._strokeBegin(M)}},this._handleTouchMove=f=>{f.preventDefault();const M=f.targetTouches[0];this._strokeMoveUpdate(M)},this._handleTouchEnd=f=>{if(f.target===this.canvas){f.preventDefault();const E=f.changedTouches[0];this._strokeEnd(E)}},this._handlePointerStart=f=>{this._drawningStroke=!0,f.preventDefault(),this._strokeBegin(f)},this._handlePointerMove=f=>{this._drawningStroke&&(f.preventDefault(),this._strokeMoveUpdate(f))},this._handlePointerEnd=f=>{this._drawningStroke&&(f.preventDefault(),this._drawningStroke=!1,this._strokeEnd(f))},this.velocityFilterWeight=h.velocityFilterWeight||.7,this.minWidth=h.minWidth||.5,this.maxWidth=h.maxWidth||2.5,this.throttle="throttle"in h?h.throttle:16,this.minDistance="minDistance"in h?h.minDistance:5,this.dotSize=h.dotSize||0,this.penColor=h.penColor||"black",this.backgroundColor=h.backgroundColor||"rgba(0,0,0,0)",this._strokeMoveUpdate=this.throttle?I(D.prototype._strokeUpdate,this.throttle):D.prototype._strokeUpdate,this._ctx=s.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:s,canvas:h}=this;s.fillStyle=this.backgroundColor,s.clearRect(0,0,h.width,h.height),s.fillRect(0,0,h.width,h.height),this._data=[],this._reset(),this._isEmpty=!0}fromDataURL(s,h={}){return new Promise((f,M)=>{const E=new Image,t=h.ratio||window.devicePixelRatio||1,T=h.width||this.canvas.width/t,b=h.height||this.canvas.height/t,$=h.xOffset||0,R=h.yOffset||0;this._reset(),E.onload=()=>{this._ctx.drawImage(E,$,R,T,b),f()},E.onerror=V=>{M(V)},E.crossOrigin="anonymous",E.src=s,this._isEmpty=!1})}toDataURL(s="image/png",h){switch(s){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(s,h)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const s=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!s?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(s,{clear:h=!0}={}){h&&this.clear(),this._fromData(s,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(s)}toData(){return this._data}_strokeBegin(s){this.dispatchEvent(new CustomEvent("beginStroke",{detail:s}));const h={dotSize:this.dotSize,minWidth:this.minWidth,maxWidth:this.maxWidth,penColor:this.penColor,points:[]};this._data.push(h),this._reset(),this._strokeUpdate(s)}_strokeUpdate(s){if(this._data.length===0){this._strokeBegin(s);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:s}));const h=s.clientX,f=s.clientY,M=s.pressure!==void 0?s.pressure:s.force!==void 0?s.force:0,E=this._createPoint(h,f,M),t=this._data[this._data.length-1],T=t.points,b=T.length>0&&T[T.length-1],$=b?E.distanceTo(b)<=this.minDistance:!1,{penColor:R,dotSize:V,minWidth:q,maxWidth:P}=t;if(!b||!(b&&$)){const O=this._addPoint(E);b?O&&this._drawCurve(O,{penColor:R,dotSize:V,minWidth:q,maxWidth:P}):this._drawDot(E,{penColor:R,dotSize:V,minWidth:q,maxWidth:P}),T.push({time:E.time,x:E.x,y:E.y,pressure:E.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:s}))}_strokeEnd(s){this._strokeUpdate(s),this.dispatchEvent(new CustomEvent("endStroke",{detail:s}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),document.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}_createPoint(s,h,f){const M=this.canvas.getBoundingClientRect();return new N(s-M.left,h-M.top,f,new Date().getTime())}_addPoint(s){const{_lastPoints:h}=this;if(h.push(s),h.length>2){h.length===3&&h.unshift(h[0]);const f=this._calculateCurveWidths(h[1],h[2]),M=F.fromPoints(h,f);return h.shift(),M}return null}_calculateCurveWidths(s,h){const f=this.velocityFilterWeight*h.velocityFrom(s)+(1-this.velocityFilterWeight)*this._lastVelocity,M=this._strokeWidth(f),E={end:M,start:this._lastWidth};return this._lastVelocity=f,this._lastWidth=M,E}_strokeWidth(s){return Math.max(this.maxWidth/(s+1),this.minWidth)}_drawCurveSegment(s,h,f){const M=this._ctx;M.moveTo(s,h),M.arc(s,h,f,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(s,h){const f=this._ctx,M=s.endWidth-s.startWidth,E=Math.ceil(s.length())*2;f.beginPath(),f.fillStyle=h.penColor;for(let t=0;t<E;t+=1){const T=t/E,b=T*T,$=b*T,R=1-T,V=R*R,q=V*R;let P=q*s.startPoint.x;P+=3*V*T*s.control1.x,P+=3*R*b*s.control2.x,P+=$*s.endPoint.x;let O=q*s.startPoint.y;O+=3*V*T*s.control1.y,O+=3*R*b*s.control2.y,O+=$*s.endPoint.y;const G=Math.min(s.startWidth+$*M,h.maxWidth);this._drawCurveSegment(P,O,G)}f.closePath(),f.fill()}_drawDot(s,h){const f=this._ctx,M=h.dotSize>0?h.dotSize:(h.minWidth+h.maxWidth)/2;f.beginPath(),this._drawCurveSegment(s.x,s.y,M),f.closePath(),f.fillStyle=h.penColor,f.fill()}_fromData(s,h,f){for(const M of s){const{penColor:E,dotSize:t,minWidth:T,maxWidth:b,points:$}=M;if($.length>1)for(let R=0;R<$.length;R+=1){const V=$[R],q=new N(V.x,V.y,V.pressure,V.time);this.penColor=E,R===0&&this._reset();const P=this._addPoint(q);P&&h(P,{penColor:E,dotSize:t,minWidth:T,maxWidth:b})}else this._reset(),f($[0],{penColor:E,dotSize:t,minWidth:T,maxWidth:b})}}_toSVG(){const s=this._data,h=Math.max(window.devicePixelRatio||1,1),f=0,M=0,E=this.canvas.width/h,t=this.canvas.height/h,T=document.createElementNS("http://www.w3.org/2000/svg","svg");T.setAttribute("width",this.canvas.width.toString()),T.setAttribute("height",this.canvas.height.toString()),this._fromData(s,(P,{penColor:O})=>{const G=document.createElement("path");if(!isNaN(P.control1.x)&&!isNaN(P.control1.y)&&!isNaN(P.control2.x)&&!isNaN(P.control2.y)){const oe=`M ${P.startPoint.x.toFixed(3)},${P.startPoint.y.toFixed(3)} C ${P.control1.x.toFixed(3)},${P.control1.y.toFixed(3)} ${P.control2.x.toFixed(3)},${P.control2.y.toFixed(3)} ${P.endPoint.x.toFixed(3)},${P.endPoint.y.toFixed(3)}`;G.setAttribute("d",oe),G.setAttribute("stroke-width",(P.endWidth*2.25).toFixed(3)),G.setAttribute("stroke",O),G.setAttribute("fill","none"),G.setAttribute("stroke-linecap","round"),T.appendChild(G)}},(P,{penColor:O,dotSize:G,minWidth:oe,maxWidth:ie})=>{const ae=document.createElement("circle"),ge=G>0?G:(oe+ie)/2;ae.setAttribute("r",ge.toString()),ae.setAttribute("cx",P.x.toString()),ae.setAttribute("cy",P.y.toString()),ae.setAttribute("fill",O),T.appendChild(ae)});const b="data:image/svg+xml;base64,",$=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="${f} ${M} ${this.canvas.width} ${this.canvas.height}" width="${E}" height="${t}">`;let R=T.innerHTML;if(R===void 0){const P=document.createElement("dummy"),O=T.childNodes;P.innerHTML="";for(let G=0;G<O.length;G+=1)P.appendChild(O[G].cloneNode(!0));R=P.innerHTML}const V="</svg>",q=$+R+V;return b+btoa(q)}}}}]);
