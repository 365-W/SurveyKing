(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1402],{55686:function(pe,X,g){"use strict";var P=g(11849),L=g(94233),C=g(51890),S=g(93224),w=g(89366),e=g(85893),K=function(q){var A=q.user,N=(0,S.Z)(q,["user"]);return!A||!A.avatar?(0,e.jsx)(C.C,(0,P.Z)({icon:(0,e.jsx)(w.Z,{}),size:N.size||"small"},N)):(0,e.jsx)(C.C,(0,P.Z)({src:"/api/public/preview/".concat(A.avatar),size:N.size||"small"},N))};X.Z=K},78210:function(pe,X,g){"use strict";var P=g(15020),L=g(85893),C=function(w){var e=w.html,K=e===void 0?"":e,te=w.replaceP,q=te===void 0?!0:te;return q?(0,L.jsx)(L.Fragment,{children:typeof K=="string"&&(0,P.ZP)(K.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,L.jsx)(L.Fragment,{children:typeof K=="string"&&(0,P.ZP)(K)})};X.Z=C},39017:function(pe,X,g){"use strict";g.d(X,{Rk:function(){return A},AK:function(){return C},Al:function(){return te}});var P=g(67294),L=g(24004);function C(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",R=(0,P.useContext)(L.ZX),H=R.theme;return"survey-".concat(H)+N}function S(N,R){var H=(R&&R.depends||[]).reduce(function($,G){return $||!G},!1);return w(H?void 0:function($,G){return fetch($,G).then(function(I){if(!!I.ok)return I.json()})},N,R||{})}function w(N){for(var R=arguments.length,H=new Array(R>1?R-1:0),$=1;$<R;$++)H[$-1]=arguments[$];var G=useState(0),I=_slicedToArray(G,2),Y=I[0],re=I[1],T=useCallback(function(){re(Math.random())},[]),_=useState({loading:!1,mutate:T}),oe=_slicedToArray(_,2),we=oe[0],ae=oe[1];return useEffect(function(){!N||H[1].manual&&Y===0||N.apply(null,H).then(function(ne){ne.code===200?ae({loading:!1,data:ne.data,mutate:T}):ae({error:ne.message,loading:!1,mutate:T})}).catch(function(ne){ae({error:ne,loading:!1,mutate:T})})},e(Y,H)),we}function e(){for(var N=arguments.length,R=new Array(N),H=0;H<N;H++)R[H]=arguments[H];for(var $=[],G=0;G<arguments.length;G++){var I=arguments[G];if(I instanceof Array)for(var Y=0;Y<I.length;Y++)$=$.concat(e(I[Y]));else if(typeof URL!="undefined"&&I instanceof URL)$=$.concat(I.toJSON());else if(I instanceof Object)for(var re=Object.keys(I),T=0;T<re.length;T++){var _=re[T];_==="depends"?$=$.concat(I[_]):$=$.concat([_]).concat(e(I[_]))}else $=$.concat(I)}return $}var K=g(87998);function te(){return(0,P.useContext)(K.ZX)}function q(){return useSurvey().attachments}function A(){var N=(0,P.useContext)(K.ZX);return N.innerStore}},87312:function(pe,X,g){"use strict";g.r(X),g.d(X,{default:function(){return va}});var P=g(78210),L=g(87998),C=g(67294),S=g(39017),w=g(95522),e=g(85893);function K(t){var n=t.schema,s=t.index,o=t.seqNo,r=(0,S.AK)("-body-questionSet"),u=(0,C.useContext)(L.ZX),h=u.questionNumber;return(0,e.jsxs)("div",{className:r,children:[(0,e.jsxs)("div",{className:r+"-title",children:[h?o||"".concat(s+1,"."):"",(0,e.jsx)(P.Z,{html:n.title})]}),t.children,(0,e.jsx)("div",{className:r+"-splitLine"})]})}(0,w.eC)("QuestionSet",K,"antd");var te=g(9715),q=g(86835),A=g(94657),N=g(80937),R=g(48644),H=function(){var n=(0,S.AK)(),s=(0,C.useContext)(L.ZX),o=s.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(R.hl,{html:o.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(R.hl,{html:o.description})})]})},$=function(n){var s=(0,S.AK)();return(0,e.jsx)("div",{className:s+"-body",children:n.children})},G=g(57663),I=g(71577),Y=(0,N.Pi)(function(){var t,n,s=(0,S.AK)("-footer"),o=(0,C.useContext)(L.ZX),r=o.schema,u=o.loading,h=(0,S.Rk)(),d=h.pagination,i=d.pageSize>1,m=d.current===1,l=d.current===d.pageSize;return(0,e.jsxs)("div",{className:s,children:[l&&(0,e.jsx)("div",{className:s+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(R.hl,{html:r==null||(t=r.attribute)===null||t===void 0?void 0:t.suffix})}),(0,e.jsxs)("div",{className:s+"-pagination",children:[i&&!m&&(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{type:"primary",block:!0,onClick:function(){return h.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),i&&!l&&(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{type:"primary",block:!0,onClick:function(){return h.handleNext()},children:"\u4E0B\u4E00\u9875"})}),l&&(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{type:"primary",block:!0,onClick:function(){return h.submit()},loading:u,children:(0,e.jsx)(R.hl,{html:((n=r.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),i&&(0,e.jsxs)("div",{className:s+"-pagination-info",children:["\u7B2C",d.current,"\u9875/\u5171",d.pageSize,"\u9875"]})]})]})}),re=g(47673),T=g(4107),_=g(39002),oe=g(68351),we=g(14965),ae=g(68318),ne=g(77883),et=g(85482),tt=g(29985),at=g(46842),nt=g(64302),rt=g(27484),ie=g.n(rt),ma=g(33852);ie().locale("zh-cn");var it="YYYY-MM-DD",st="YYYY-MM-DD HH:mm:ss",lt="HH:mm:ss";function Ce(t,n){if(!!t){if(n==="date")return ie()(t,it);if(n==="dateTime")return ie()(t,st);if(n==="time")return ie()(t,lt)}}var ue=function(n){var s=n.onChange,o=n.type,r=n.value,u=n.suffix,h=n.style,d=h===void 0?{width:"100%"}:h;return o==="number"?(0,e.jsx)(et.Z,{onChange:s,value:r,style:d,addonAfter:u}):o==="date"?(0,e.jsx)(ae.Z,{onChange:function(m,l){console.log(m),s(l)},value:Ce(r,o),style:d}):o==="dateTime"?(0,e.jsx)(ae.Z,{showTime:!0,onChange:function(m,l){return s(l)},value:Ce(r,o),style:d}):o==="time"?(0,e.jsx)(oe.Z,{value:Ce(r,o),onChange:function(m,l){return s(l)},style:d}):o==="mobile"?(0,e.jsx)(T.Z,{prefix:(0,e.jsx)(tt.Z,{}),onChange:function(m){return s(m.target.value)},value:r}):o==="idCard"?(0,e.jsx)(T.Z,{prefix:(0,e.jsx)(at.Z,{}),onChange:function(m){return s(m.target.value)},value:r,style:d}):o==="email"?(0,e.jsx)(T.Z,{prefix:(0,e.jsx)(nt.Z,{}),onChange:function(m){return s(m.target.value)},value:r,style:d}):(0,e.jsx)(T.Z,{onChange:function(m){return s(m.target.value)},value:r,suffix:u,style:d})},xa=g(49111),Ze=g(19650),ot=g(17672),ut=function(n){var s=n.onChange,o=(0,C.useRef)(null),r=(0,C.useRef)(),u=(0,C.useRef)(),h=(0,C.useState)(0),d=(0,A.Z)(h,2),i=d[0],m=d[1];return(0,C.useEffect)(function(){var l=o.current;if(l){var a,v=new ot.Z(o.current);v.addEventListener("beginStroke",function(){m(1)}),r.current=v;var c=Math.max(window.devicePixelRatio||1,1);l.width=l.offsetWidth*c,l.height=l.offsetHeight*c,(a=l.getContext("2d"))===null||a===void 0||a.scale(c,c)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:u.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:o,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:i!==2?"block":"none"}}),i===2&&(0,e.jsx)("img",{src:u.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(Ze.Z,{children:[i===1&&(0,e.jsx)(I.Z,{type:"link",onClick:function(){var a;(a=r.current)===null||a===void 0||a.clear(),m(0)},children:"\u6E05\u7A7A"}),(i===0||i===1)&&(0,e.jsx)(I.Z,{type:"primary",disabled:i!==1,ghost:!0,size:"small",onClick:function(){var a;s(r.current.toDataURL()),u.current=(a=r.current)===null||a===void 0?void 0:a.toDataURL(),m(2)},children:"\u5B8C\u6210"}),i===2&&(0,e.jsx)(I.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var a;m(0),(a=r.current)===null||a===void 0||a.clear()},children:"\u91CD\u7B7E"})]})})]})]})},dt=g(3024),ct=(0,N.Pi)(function(){var t=(0,C.useContext)(L.ZX),n=t.progressBar,s=(0,S.AK)(),o=(0,S.Rk)(),r=o.progress;return n?(0,e.jsx)(dt.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:s+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(r*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),ga=g(71194),vt=g(50146);function Ee(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var ht=function(n){var s=n.onChange,o=n.value,r=n.mapMove,u=r===void 0?!1:r,h=n.optionId,d=(0,C.useRef)(null),i=(0,C.useRef)(),m=(0,C.useRef)(),l=(0,C.useRef)(),a=(0,C.useState)(function(){if(!!o){var B=o.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(B&&B.length>2)return[parseFloat(B[1]),parseFloat(B[2])]}}),v=(0,A.Z)(a,2),c=v[0],f=v[1],x=(0,C.useState)(function(){return Ee(o)}),j=(0,A.Z)(x,2),p=j[0],y=j[1],b=(0,C.useState)(!1),F=(0,A.Z)(b,2),E=F[0],M=F[1],z=(0,C.useCallback)(function(B){m.current.getLocation(B,function(O,W){if(O==="complete"&&W.geocodes.length){var V=W.geocodes[0].location;l.current.start(V)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,C.useEffect)(function(){if(!!E){window["localMap".concat(h)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(ee){var ge=new AMap.Map("map-".concat(h),{zoom:16,center:c,dragEnable:u,zoomEnable:u});if(i.current=ge,u){var je=new ee({mode:"dragMarker",map:ge});je.on("success",function(se){y(se.address),f([se.position.lng,se.position.lat])}),c?je.start(c):je.start(),ge.panBy(0,1),l.current=je}var ha=new AMap.Geocoder({city:"010"});m.current=ha;var fa=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});fa.getCurrentPosition(function(se,le){se=="complete"?(ge.setCenter(le.position),y(le.formattedAddress),f([le.position.lng,le.position.lat])):console.error(le)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var B="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(h,"&plugin=AMap.Geocoder,AMap.Geolocation"),O=document.createElement("script");O.src=B,document.head.appendChild(O);var W="https://webapi.amap.com/ui/1.1/main-async.js",V=document.createElement("script");V.src=W,document.head.appendChild(V)}},[E]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(T.Z.TextArea,{readOnly:!0,value:Ee(o),onClick:function(){return M(!0)}}),(0,e.jsxs)(vt.Z,{visible:E,onCancel:function(){M(!1)},onOk:function(){c&&s("".concat(p,"[").concat(c[0],", ").concat(c[1],"]")),M(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:u&&(0,e.jsx)(T.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(O){return z(O)}})}),(0,e.jsx)("div",{ref:d,id:"map-".concat(h),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:p})]})]})},Ne=function(n){var s,o=n.optionId,r=n.questionId,u=n.checked,h=n.checkedCount,d=(0,S.Al)(),i=d.statistics,m=i==null?void 0:i.questionStatistics[r],l=((m==null?void 0:m.optionStatistics.reduce(function(c,f){return c+f.count},0))||0)+h,a=(m==null||(s=m.optionStatistics.find(function(c){return c.optionId===o}))===null||s===void 0?void 0:s.count)||0;a=u?a+1:a;var v="".concat(Math.floor(a/l*1e3)/10,"%");return h===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[(0,e.jsxs)("span",{className:"vote-info-cnt ",children:[a,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:v}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:v}})})]})},ye=function(n){var s=n.schema,o=n.type,r=s.attribute,u=r===void 0?{}:r,h=u.examCorrectAnswer,d=(0,S.Al)(),i=d.correctAnswerVisible,m=d.mode;return h&&i&&m==="exam"?o==="FillBlank"||o==="HorzBlank"||o==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:h}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},ft=function(n){var s=n.schema,o=s.attribute,r=o===void 0?{}:o,u=r.examScore,h=(0,S.Al)(),d=h.mode,i=h.examScoreVisible;return u&&d==="exam"&&i?(0,e.jsxs)("span",{className:"question-score",children:["\uFF08",u,"\u5206\uFF09"]}):(0,e.jsx)(e.Fragment,{})},ja=g(22385),Pe=g(61580),Z=g(11849),de=g(93224),mt=g(94184),Fe=g.n(mt),xt=g(49914),gt=g(78338);function jt(t){t=Number(t);var n=Math.floor(t/3600),s=Math.floor(t%3600/60),o=Math.floor(t%3600%60),r="".concat(n).padStart(2,"0"),u="".concat(s).padStart(2,"0"),h="".concat(o).padStart(2,"0");return"".concat(r,":").concat(u,":").concat(h)}function pt(t){return t<=60?"#ff4d4f":t<=180?"#faad14":"#52c41a"}var Ct=(0,N.Pi)(function(){var t,n,s=(0,xt.H)(),o=(0,S.Rk)(),r=s.startTime,u=((t=s.project)===null||t===void 0||(n=t.setting.examSetting)===null||n===void 0?void 0:n.maxSubmitMinutes)||0,h=(0,C.useState)(0),d=(0,A.Z)(h,2),i=d[0],m=d[1],l=r+u*60*1e3,a=(0,C.useRef)();return(0,C.useEffect)(function(){if(u!==0)return a.current=window.setInterval(function(){m((l-new Date().getTime())/1e3)},1e3),function(){clearInterval(a.current)}},[l]),(0,C.useEffect)(function(){i<0&&(o.submit(),clearInterval(a.current))},[i]),u===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,e.jsx)(gt.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,e.jsx)("span",{style:{marginLeft:3,color:pt(i)},children:jt(i)})]})}),be=(0,N.Pi)(function(t){var n=(0,S.Rk)(),s=n.props.answerSheetVisible,o=t.size,r=t.marked,u=r===void 0?!0:r,h=(0,de.Z)(t,["size","marked"]);return s?(0,e.jsx)(Pe.Z,{title:"\u6807\u8BB0",children:(0,e.jsx)("svg",(0,Z.Z)((0,Z.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:t.size||24,height:t.size||24,className:"marked"},h),{},{children:(0,e.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:u?"#EA4942":"#d8d8d8","p-id":"1287"})}))}):(0,e.jsx)(e.Fragment,{})}),Zt=(0,N.Pi)(function(t){var n=(0,S.Rk)(),s=t.finished,o=t.id,r=t.marked,u=t.seqNo;return(0,e.jsxs)("div",{className:Fe()("answer-sheet-item",{marked:r,finished:s}),onClick:function(){return n.changePageIndex(o)},children:[u,r&&(0,e.jsx)(be,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),yt=(0,N.Pi)(function(){var t=(0,S.Rk)(),n=t.answerSheet;return(0,e.jsx)(e.Fragment,{children:n.filter(function(s){return s.display!=="none"}).map(function(s,o){return(0,C.createElement)(Zt,(0,Z.Z)((0,Z.Z)({},s),{},{seqNo:o+1,key:s.id}))})})}),bt=(0,N.Pi)(function(){var t=(0,S.Rk)(),n=t.answerSheet,s=n.filter(function(u){return u.finished}).length,o=n.filter(function(u){return!u.finished}).length,r=n.filter(function(u){return u.marked}).length;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:s})]}),(0,e.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:o})]}),(0,e.jsxs)("div",{className:"marked",children:[(0,e.jsx)(be,{size:18}),"\u6807\u8BB0",(0,e.jsx)("span",{style:{marginLeft:4},children:r})]})]})}),St=(0,N.Pi)(function(){return(0,e.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,e.jsx)(Ct,{})]})}),wt=(0,N.Pi)(function(){var t=(0,S.Rk)(),n=t.props.answerSheetVisible;return n?(0,e.jsxs)("div",{className:"answer-sheet",children:[(0,e.jsx)(St,{}),(0,e.jsx)("div",{className:"answer-sheet-content",children:(0,e.jsx)(yt,{})}),(0,e.jsx)("div",{className:"answer-sheet-footer",children:(0,e.jsx)(bt,{})})]}):(0,e.jsx)(e.Fragment,{})});function Et(t){var n,s=t.schema,o=t.index,r=t.qsIndex,u=t.required,h=t.error,d=t.replaceTitle,i=t.seqNo,m=(0,C.useContext)(L.ZX),l=m.questionNumber,a=(0,S.AK)("-body-question"),v=(0,C.useState)(),c=(0,A.Z)(v,2),f=c[0],x=c[1],j=(0,S.Rk)(),p=(n=j.answerSheet.find(function(F){return F.id===s.id}))===null||n===void 0?void 0:n.marked;(0,C.useEffect)(function(){if(f){var F,E;(F=document.querySelector("[data-id='".concat(s.id,"']")))===null||F===void 0||F.classList.remove("ant-form-item-has-error"),(E=document.querySelector("[data-id='".concat(s.id,"']")))===null||E===void 0||E.querySelectorAll("[data-id]").forEach(function(ee){ee.classList.remove("ant-form-item-has-error")})}if(h.length>0){var M,z=h[0].split("^"),B=(0,A.Z)(z,2),O=B[0],W=B[1],V;W?(V=document.querySelector("[data-id='".concat(O,"']")),x(W)):(V=document.querySelector("[data-id='".concat(s.id,"']")),x(O)),(M=V)===null||M===void 0||M.classList.add("ant-form-item-has-error")}else f&&x(void 0)},[h]);var y="";r!==void 0&&(y+=r+1+"-"),o!==void 0&&(y+=o+1+".");var b=function(){return f?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:f})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsx)("div",{className:a,children:(0,e.jsx)(q.Z.Item,{label:(0,e.jsxs)("span",{className:a+"-header",children:[l?i||y:"",(0,e.jsx)(R.hl,{html:d||s.title}),(0,e.jsx)(ft,{schema:s}),b(),(0,e.jsx)(be,{marked:p,onClick:function(){j.markQuestion(s.id,!p)}})]}),labelCol:{span:24},wrapperCol:{span:24},required:u,children:t.children})})}(0,w.eC)("Question",(0,N.Pi)(Et),"antd");var pa=g(84305),Nt=g(88182),Pt=g(82925);ie().locale("zh-cn");function Ft(t){var n=t.headerVisible,s=t.footerVisible,o=t.schema,r=(0,S.AK)(),u=(0,S.Al)(),h=function(){var i,m=(i=o.attribute)===null||i===void 0?void 0:i.headerImage;if(m)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(m),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Fe()(r,{preview:u.isPreview}),children:[(0,e.jsx)(ct,{}),(0,e.jsx)("div",{className:r+"-banner",children:h()}),n&&(0,e.jsx)(H,{}),(0,e.jsx)(Nt.ZP,{locale:Pt.Z,children:(0,e.jsx)($,{children:t.children})}),s&&(0,e.jsx)(Y,{}),(0,e.jsx)(wt,{})]})}(0,w.eC)("Survey",Ft,"antd");var Ca=g(13062),U=g(71230),Za=g(89032),k=g(15746),Mt=g(76826);function At(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=(0,S.AK)("-body-question");function d(i,m){r[i]=m,m===""&&delete r[i],s((0,Z.Z)({},r))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(i){var m=i.id,l=i.attribute,a=i.title,v=(0,Mt.Ck)(l==null?void 0:l.autoSize,[2,4]);return(0,e.jsxs)(U.Z,{style:{marginBottom:10},"data-id":m,children:[a&&(0,e.jsx)(k.Z,{className:h+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:h+"-option-title",children:i.title})},i.id),(0,e.jsx)(k.Z,{span:12,children:(0,e.jsx)(T.Z.TextArea,{autoSize:{minRows:v[1],maxRows:v[2]},value:r[m]||"",onChange:function(f){return d(m,f.target.value)}})})]},m)})})}(0,w.RM)("Textarea",At,"antd");var ya=g(36877),Rt=g(96607);function It(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=u===void 0?[]:u;function d(i){var m={};i.forEach(function(l,a){var v=h[a].id;m[v]=l}),s(m)}return(0,e.jsx)(U.Z,{children:(0,e.jsx)(k.Z,{span:12,children:(0,e.jsx)(Rt.Z,{value:h.map(function(i){return r[i.id]}).filter(function(i){return i}),style:{width:260},options:n.dataSource,onChange:d,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,w.RM)("Cascader",It,"antd");function Me(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=(0,S.AK)("-body-question");function d(i,m){r[i]=m,m===""&&delete r[i],s((0,Z.Z)({},r))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(i){var m=i.id,l=i.attribute,a=i.title,v=l==null?void 0:l.suffix,c=l==null?void 0:l.dataType;return(0,e.jsxs)(U.Z,{style:{marginBottom:10},"data-id":m,children:[a&&(0,e.jsx)(k.Z,{className:h+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:h+"-option-title",children:(0,e.jsx)(R.hl,{html:i.title})})},i.id),(0,e.jsxs)(k.Z,{span:12,children:[(0,e.jsx)(ue,{type:c,value:r[m],onChange:function(x){return d(m,x)},suffix:v&&(0,e.jsx)("span",{className:h+"-option-suffix",children:(0,e.jsx)(R.hl,{html:v})})}),(0,e.jsx)(ye,{schema:i,type:n.type})]})]},m)})})}(0,w.RM)("FillBlank",Me,"antd"),(0,w.RM)("MultipleBlank",Me,"antd");var ce=g(83279),ba=g(43358),ve=g(34041),J=g(79521),Q=g(36602),$t=g(54121),Bt=function(n){var s=(0,Q.XI)(200),o=(0,A.Z)(s,2),r=o[0],u=o[1],h=(0,Q.XI)(200),d=(0,A.Z)(h,2),i=d[0],m=d[1];return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},n.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:r,children:[n.cells.map(function(l){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},l.getCellProps()),{},{className:"td","data-id":"".concat(n.i,"-").concat(l.column.id),children:l.render("Cell")}))}),n.onDelete&&(0,e.jsx)("div",{ref:i,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)($t.Z,{onClick:function(){n.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:u||m?"visible":"hidden"}})})]}))};function Ae(t){var n=t.columns,s=t.data,o=t.onAdd,r=t.onDelete,u=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),h=(0,J.useTable)({columns:n,data:s,defaultColumn:u},J.useBlockLayout),d=h.getTableProps,i=h.getTableBodyProps,m=h.headerGroups,l=h.rows,a=h.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},d()),{},{className:"table",children:[(0,e.jsx)("div",{children:m.map(function(v){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},v.getHeaderGroupProps()),{},{className:"tr",children:v.headers.map(function(c){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},c.getHeaderProps()),{},{className:"th",children:c.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i()),{},{children:l.map(function(v,c){return a(v),(0,C.createElement)(Bt,(0,Z.Z)((0,Z.Z)({},v),{},{key:c,i:c,onDelete:r?function(){return r(c)}:void 0}))})})),o&&(0,e.jsx)("div",{className:"footer",onClick:o,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Re(t){var n=t.schema,s=t.onChange,o=t.value||[{}],r=n.children,u=r===void 0?[]:r,h=(0,C.useMemo)(function(){return u.map(function(d){var i;return{Header:(0,e.jsx)(P.Z,{html:d.title}),width:(i=d.attribute)===null||i===void 0?void 0:i.width,accessor:d.id,Cell:function(l){var a,v=l.value,c=l.row,f=l.data;if(((a=d.attribute)===null||a===void 0?void 0:a.dataType)==="select"){var x;return(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",value:v,style:{minWidth:80},onChange:function(p){f[c.index][d.id]=p},options:((x=d.dataSource)===null||x===void 0?void 0:x.map(function(j){return{label:j.label,value:j.value}}))||[]})}else return(0,e.jsx)(T.Z,{value:v,onChange:function(p){f[c.index][d.id]=p.target.value,s((0,ce.Z)(f))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ae,{columns:h,data:o,onAdd:function(){o.push({}),s((0,ce.Z)(o))},onDelete:function(i){o.splice(i,1),s((0,ce.Z)(o))}})})}var Tt=function(n){var s=n.schema,o=n.value||[{},{}],r=s.children,u=r===void 0?[]:r,h=(0,C.useMemo)(function(){return u.map(function(d){var i;return{Header:(0,e.jsx)(P.Z,{html:d.title}),width:(i=d.attribute)===null||i===void 0?void 0:i.width,accessor:d.id,Cell:function(l){var a,v=l.value,c=l.row,f=l.data;if(((a=d.attribute)===null||a===void 0?void 0:a.dataType)==="select"){var x,j,p=((x=d.dataSource)===null||x===void 0||(j=x.find(function(y){return y.value===v}))===null||j===void 0?void 0:j.label)||"";return(0,e.jsx)("span",{children:p})}else return(0,e.jsx)("span",{children:v})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ae,{columns:h,data:o})})};Re.Preview=Tt,(0,w.RM)("MatrixAuto",Re,"antd");function Ie(t){var n=t.columns,s=t.data,o=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,J.useTable)({columns:n,data:s,defaultColumn:o},J.useBlockLayout),u=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,i=r.rows,m=r.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(l){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getHeaderProps()),{},{className:"th",children:a.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},h()),{},{children:i.map(function(l){return m(l),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getCellProps()),{},{className:"td","data-id":"".concat(l.original.rowId,"-").concat(a.column.id),children:a.render("Cell")}))})}))})}))]}))}function $e(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=u===void 0?[]:u,d=n.row,i=d===void 0?[]:d,m=(0,C.useMemo)(function(){var a,v=h.map(function(c){var f;return{Header:(0,e.jsx)(P.Z,{html:c.title}),width:(f=c.attribute)===null||f===void 0?void 0:f.width,accessor:c.id,Cell:function(j){var p=j.value,y=j.row,b=j.data;return(0,e.jsx)(ue,{value:p,onChange:function(E){var M={};b.forEach(function(z,B){var O=z.title,W=z.rowId,V=(0,de.Z)(z,["title","rowId"]);y.index===B&&(V[c.id]=E),M[W]=V}),s(M)}})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=n.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),v},[]),l=i.map(function(a,v){var c=a.id,f=r[c]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:c},f)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ie,{columns:m,data:l})})}var Dt=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,h=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,m=(0,C.useMemo)(function(){var a,v=h.map(function(c){var f;return{Header:function(){return(0,e.jsx)(P.Z,{html:c.title})},width:(f=c.attribute)===null||f===void 0?void 0:f.width,accessor:c.id,Cell:function(j){var p=j.value;return(0,e.jsx)("span",{children:p})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(a=s.attribute)===null||a===void 0?void 0:a.width,accessor:"title"}),v},[]),l=i.map(function(a,v){var c=a.id,f=r[c]||{};return(0,Z.Z)({title:a.title,rowId:c},f)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ie,{columns:m,data:l})})};$e.Preview=Dt,(0,w.RM)("MatrixFillBlank",$e,"antd");var Sa=g(88983),he=g(47933);function Be(t){var n=t.columns,s=t.data,o=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,J.useTable)({columns:n,data:s,defaultColumn:o},J.useBlockLayout),u=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,i=r.rows,m=r.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(l){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getHeaderProps()),{},{className:"th",children:a.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},h()),{},{children:i.map(function(l){return m(l),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getCellProps()),{},{className:"td",children:a.render("Cell")}))})}))})}))]}))}function Te(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=u===void 0?[]:u,d=n.row,i=d===void 0?[]:d,m=(0,C.useMemo)(function(){var a,v=h.map(function(c){var f;return{Header:(0,e.jsx)(P.Z,{html:c.title}),width:(f=c.attribute)===null||f===void 0?void 0:f.width,accessor:c.id,Cell:function(j){var p=j.value,y=j.row,b=j.data;return(0,e.jsx)("div",{onClick:function(){var E={};b.forEach(function(M,z){var B=M.title,O=M.rowId,W=(0,de.Z)(M,["title","rowId"]);y.index===z?(E[O]={},E[O][c.id]=!0):E[O]=W}),s(E)},children:(0,e.jsx)(he.ZP,{checked:!!p})})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=n.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),v},[]),l=i.map(function(a,v){var c=a.id,f=r[c]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:c},f)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Be,{columns:m,data:l})})}var Ot=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,h=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,m=(0,C.useMemo)(function(){var a,v=h.map(function(c){var f;return{Header:(0,e.jsx)(P.Z,{html:c.title}),width:(f=c.attribute)===null||f===void 0?void 0:f.width,accessor:c.id,Cell:function(j){var p=j.value,y=j.row,b=j.data;return p?(0,e.jsx)("div",{children:(0,e.jsx)(he.ZP,{checked:!!p,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=s.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),v},[]),l=i.map(function(a,v){var c=a.id,f=r[c]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:c},f)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Be,{columns:m,data:l})})};Te.Preview=Ot,(0,w.RM)("MatrixRadio",Te,"antd");var wa=g(63185),fe=g(9676);function De(t){var n=t.columns,s=t.data,o=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,J.useTable)({columns:n,data:s,defaultColumn:o},J.useBlockLayout),u=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,i=r.rows,m=r.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(l){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getHeaderProps()),{},{className:"th",children:a.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},h()),{},{children:i.map(function(l){return m(l),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getCellProps()),{},{className:"td",children:a.render("Cell")}))})}))})}))]}))}function Oe(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=u===void 0?[]:u,d=n.row,i=d===void 0?[]:d,m=(0,C.useMemo)(function(){var a,v=h.map(function(c){var f;return{Header:(0,e.jsx)(P.Z,{html:c.title}),width:(f=c.attribute)===null||f===void 0?void 0:f.width,accessor:c.id,Cell:function(j){var p=j.value,y=j.row,b=j.data;return(0,e.jsx)("div",{onClick:function(E){var M=!p,z={};b.forEach(function(B,O){var W=B.title,V=B.rowId,ee=(0,de.Z)(B,["title","rowId"]);y.index===O&&(M?ee[c.id]=!0:delete ee[c.id]),z[V]=ee}),s(z)},children:(0,e.jsx)(fe.Z,{checked:!!p})})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=n.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),v},[]),l=i.map(function(a,v){var c=a.id,f=r[c]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:c},f)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(De,{columns:m,data:l})})}var Ht=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,h=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,m=(0,C.useMemo)(function(){var a,v=h.map(function(c){var f;return{Header:(0,e.jsx)(P.Z,{html:c.title}),width:(f=c.attribute)===null||f===void 0?void 0:f.width,accessor:c.id,Cell:function(j){var p=j.value,y=j.row,b=j.data;return p?(0,e.jsx)("div",{children:(0,e.jsx)(fe.Z,{checked:!!p,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=s.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),v},[]),l=i.map(function(a,v){var c=a.id,f=r[c]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:c},f)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(De,{columns:m,data:l})})};Oe.Preview=Ht,(0,w.RM)("MatrixCheckbox",Oe,"antd");var D=g(32059);function kt(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=n.attribute,d=24/((h==null?void 0:h.columns)||1),i=(0,S.AK)("-body-question"),m=!!(h!=null&&h.statEnabled);function l(a,v,c){var f,x,j=(f=n.children)===null||f===void 0?void 0:f.find(function(y){return y.id===a}),p=j==null||(x=j.attribute)===null||x===void 0?void 0:x.dataType;v?r[a]=p?c:!0:delete r[a],s((0,Z.Z)({},r))}return(0,C.useEffect)(function(){u==null||u.forEach(function(a){var v;(v=a.attribute)!==null&&v!==void 0&&v.defaultChecked&&Object.keys(r).length===0&&s((0,D.Z)({},a.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(U.Z,{children:u==null?void 0:u.map(function(a){var v,c,f=a.title,x=a.id,j=(v=a.attribute)===null||v===void 0?void 0:v.dataType,p=(c=a.attribute)===null||c===void 0?void 0:c.suffix;return(0,e.jsxs)(k.Z,{span:d,className:i+"-option","data-id":x,children:[(0,e.jsxs)(fe.Z,{value:x,checked:r.hasOwnProperty(x),onChange:function(b){return l(x,b.target.checked)},children:[(0,e.jsx)(R.hl,{html:f}),(0,e.jsx)(ye,{schema:a})]}),m&&(0,e.jsx)(Ne,{checked:!!r[x],optionId:x,questionId:n.id,checkedCount:Object.keys(r).length}),j&&(0,e.jsx)(ue,{value:r[x],style:{maxWidth:120},type:j,onChange:function(b){return l(x,!0,b)},suffix:p&&(0,e.jsx)("span",{className:i+"-option-suffix",children:(0,e.jsx)(R.hl,{html:p})})})]},x)})})})}(0,w.RM)("Checkbox",kt,"antd");function Lt(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=u===void 0?[]:u;function d(i){var m,l=(m=n.children)===null||m===void 0?void 0:m.find(function(a){return a.id===i});l&&s((0,D.Z)({},i,!0))}return(0,C.useEffect)(function(){var i;(i=n.children)===null||i===void 0||i.forEach(function(m){var l,a=m.id;(l=m.attribute)!==null&&l!==void 0&&l.defaultChecked&&Object.keys(r).length===0&&s((0,D.Z)({},a,!0))})},[]),(0,e.jsx)(U.Z,{children:(0,e.jsx)(k.Z,{span:12,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){s(void 0)},showSearch:!0,value:Object.keys(r)[0],filterOption:function(m,l){return(l==null?void 0:l.label).toLowerCase().indexOf(m.toLowerCase())!==-1},onChange:d,style:{width:260},options:h.map(function(i){return{label:i.title,value:i.id}})})})})}(0,w.RM)("Select",Lt,"antd");var zt=he.ZP.Group;function Ut(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=n.attribute,d=24/((h==null?void 0:h.columns)||1),i=(0,S.AK)("-body-question"),m=!!(h!=null&&h.statEnabled);function l(v){var c,f=v.target.value,x=(c=n.children)===null||c===void 0?void 0:c.find(function(b){return b.id===f});if(x){var j=x.id,p=x.attribute,y=p==null?void 0:p.dataType;s((0,D.Z)({},v.target.value,y?r[j]:!0))}}function a(v,c){s((0,D.Z)({},v,c))}return(0,C.useEffect)(function(){var v;(v=n.children)===null||v===void 0||v.forEach(function(c){var f,x=c.id,j=c.attribute,p=j==null?void 0:j.dataType;(f=c.attribute)!==null&&f!==void 0&&f.defaultChecked&&Object.keys(r).length===0&&s((0,D.Z)({},x,p?r[x]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(zt,{onChange:l,value:Object.keys(r)[0],style:{width:"100%"},children:(0,e.jsx)(U.Z,{children:u==null?void 0:u.map(function(v){var c,f,x=v.title,j=v.id,p=(c=v.attribute)===null||c===void 0?void 0:c.dataType,y=(f=v.attribute)===null||f===void 0?void 0:f.suffix;return(0,e.jsxs)(k.Z,{span:d,className:i+"-option","data-id":j,children:[(0,e.jsxs)(he.ZP,{value:j,className:"radio-item",children:[(0,e.jsx)(R.hl,{html:x}),(0,e.jsx)(ye,{schema:v})]}),m&&(0,e.jsx)(Ne,{checked:!!r[j],optionId:j,questionId:n.id,checkedCount:Object.keys(r).length}),p&&(0,e.jsx)(ue,{value:r[j],type:p,style:{maxWidth:120},onChange:function(F){return a(j,F)},suffix:y&&(0,e.jsx)("span",{className:i+"-option-suffix",children:(0,e.jsx)(R.hl,{html:y})})})]},j)})})})})}(0,w.RM)("Radio",Ut,"antd");var Ea=g(48736),He=g(27049);function ke(t){var n=(0,S.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(He.Z,{plain:!0})})}ke.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,w.RM)("SplitLine",ke,"antd");function Le(t){var n=(0,S.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(R.hl,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}Le.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,w.RM)("Remark",Le,"antd");var Na=g(34792),ze=g(48086),Ue=g(3182),Pa=g(43185),me=g(11324),Vt=g(94043),xe=g.n(Vt),Wt=g(43347),Kt=me.Z.Dragger;function Ve(t){var n=t.schema,s=t.onChange,o=t.value,r=t.readOnly,u=n.children,h=(0,S.Al)(),d=(0,C.useState)(),i=(0,A.Z)(d,2),m=i[0],l=i[1];(0,C.useEffect)(function(){var c=n.children[0].id,f=o&&o[c]||[];m==null&&f.length>0&&Q.hi.loadFiles({ids:f}).then(function(x){l(x==null?void 0:x.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[o]);var a=function(){var c=(0,Ue.Z)(xe().mark(function f(x){var j,p,y,b;return xe().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:j=x.onSuccess,p=x.onError,y=x.file,b=x.onProgress,h.onUpload&&h.onUpload({file:y},function(M){b&&b({percent:M.loaded/M.total*100})}).then(function(M){if(M.success&&j&&j(M.data),!M.success&&p){var z=new Error("Some error");p({event:z})}});case 2:case"end":return E.stop()}},f)}));return function(x){return c.apply(this,arguments)}}(),v=function(f,x){if(l(f.fileList),(f.file.status==="removed"||f.file.status==="done")&&!f.fileList.find(function(p){return p.status!=="done"})){var j=f.fileList.filter(function(p){return p.status==="done"}).map(function(p){var y;return((y=p.response)===null||y===void 0?void 0:y.id)||p.uid});j.length===0?s(void 0):s((0,D.Z)({},x,j))}};return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(c){var f=c.id,x=c.attribute,j=[];if(x){var p=x.maxFileCount,y=x.maxFileSize,b=x.fileAccept;p&&j.push("\u6700\u591A\u4E0A\u4F20".concat(p,"\u4E2A")),y&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(y,"M\u4EE5\u5185")),b&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(b))}return(0,e.jsxs)(Kt,{multiple:!0,disabled:r,maxCount:(x==null?void 0:x.maxFileCount)||20,accept:x==null?void 0:x.fileAccept,beforeUpload:function(E){return x!=null&&x.maxFileSize&&E.size>x.maxFileSize*1024*1024?(ze.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(x.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),me.Z.LIST_IGNORE):!0},customRequest:a,onChange:function(E){return v(E,f)},fileList:m,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Wt.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},f)})})}var Gt=function(n){var s=n.value,o=(0,C.useState)(),r=(0,A.Z)(o,2),u=r[0],h=r[1];return(0,C.useEffect)(function(){if(s){var d=Object.values(s).reduce(function(i,m){return i.push.apply(i,(0,ce.Z)(m)),i},[]);Q.hi.loadFiles({ids:d}).then(function(i){h(i)})}},[s]),(0,e.jsx)("div",{className:"preview",children:u==null?void 0:u.map(function(d){return(0,e.jsx)("a",{onClick:function(){return Q.hi.download("/api/files/".concat(d.id))},children:d.originalName},d.id)})})};Ve.Preview=Gt,(0,w.RM)("Upload",Ve,"antd");var Fa=g(34669),Qt=g(54458);function We(t){var n=t.schema,s=t.onChange,o=n.children,r=(0,S.Al)(),u=(0,C.useState)(0),h=(0,A.Z)(u,2),d=h[0],i=h[1];function m(l,a){var v="signature-".concat(a,"-").concat((0,L.kb)(6),".png");if(!r.onUpload){s((0,D.Z)({},a,[v]));return}fetch(l).then(function(c){return c.blob()}).then(function(c){var f=new File([c],v,{type:"image/png"});r.onUpload({file:f},function(x){i(x.loaded/x.total*100)}).then(function(x){x.success&&x.data.id&&s((0,D.Z)({},a,[x.data.id]))})})}return(0,e.jsx)("div",{children:o==null?void 0:o.map(function(l){var a=l.id,v=l.title;return(0,e.jsxs)(U.Z,{gutter:[10,0],"data-id":a,children:[v&&(0,e.jsx)(k.Z,{span:24},l.id),(0,e.jsxs)(k.Z,{span:24,children:[(0,e.jsx)(ut,{onChange:function(f){return m(f,a)}}),d>0&&d!==100&&(0,e.jsx)(Qt.Z,{percent:d,size:"small",showInfo:!1})]})]},a)})})}We.Preview=function(t){var n=t.value,s;return n&&(s=Object.values(n)[0][0]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("img",{src:"/api/files/".concat(s)})})},(0,w.RM)("Signature",We,"antd");var Ma=g(96433),Se=g(2864),Ke=g(41687),Xt=g(46870),Ge=g(18613),Yt=g(57206),Jt={1:(0,e.jsx)(Ke.Z,{}),2:(0,e.jsx)(Ke.Z,{}),3:(0,e.jsx)(Xt.Z,{}),4:(0,e.jsx)(Ge.Z,{}),5:(0,e.jsx)(Ge.Z,{})};function qt(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=u===void 0?[]:u;function d(m,l){s((0,D.Z)({},m,l))}var i=function(l){var a=l.attribute||{},v=l.id,c=a.scope,f=c===void 0?"[0,5]":c,x=a.scoreStyle,j=f.replace("[","").replace("]","").split(","),p=(0,A.Z)(j,2),y=p[0],b=p[1];return x==="heart"?(0,e.jsx)(Se.Z,{defaultValue:parseInt(y),character:(0,e.jsx)(Yt.Z,{}),style:{color:"#ea7463"},count:parseInt(b),onChange:function(E){return d(v,E)}},v):x==="smile"?(0,e.jsx)(Se.Z,{defaultValue:parseInt(y),character:function(E){var M=E.index;return Jt[M+1]},count:parseInt(b),onChange:function(E){return d(v,E)}},v):(0,e.jsx)(Se.Z,{defaultValue:parseInt(y),count:parseInt(b),onChange:function(E){return d(v,E)}},v)};return(0,e.jsx)(U.Z,{children:h.map(function(m){return i(m)})})}(0,w.RM)("Score",qt,"antd");var Qe=g(55686),_t=ve.Z.Option;function Xe(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),m=(0,A.Z)(i,2),l=m[0],a=m[1];function v(x){d&&s((0,D.Z)({},d,x))}var c=(0,Q.zE)(function(x){Q.hi.userSelect({name:x,selected:r[d]||[]}).then(function(j){j.success&&a(j.data)})},5),f=function(j){v(j?l.map(function(p){return p.userId}):void 0)};return(0,C.useEffect)(function(){var x;c(""),(x=n.children)===null||x===void 0||x.forEach(function(j){var p,y=j.id;(p=j.attribute)!==null&&p!==void 0&&p.defaultChecked&&Object.keys(r).length===0&&s((0,D.Z)({},y,!0))})},[]),(0,e.jsx)(U.Z,{children:(0,e.jsx)(k.Z,{span:12,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,mode:"multiple",onClear:function(){s(void 0)},value:r[d]||[],onSearch:c,showSearch:!0,onChange:v,filterOption:!1,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(He.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(fe.Z,{onChange:function(y){f(y.target.checked)},children:"\u5168\u9009"})})]})},children:l.map(function(x){return(0,e.jsx)(_t,{value:x.userId,label:x.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Qe.Z,{user:x,size:20})}),x.name," ",x.deptName&&"(".concat(x.deptName,")")]})},x.userId)})})})})}var ea=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),m=(0,A.Z)(i,2),l=m[0],a=m[1];return(0,C.useEffect)(function(){Q.hi.userSelect({selected:r[d]||[],name:"^_^"}).then(function(v){v.success&&a(v.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(Ze.Z,{children:l.map(function(v){return(0,e.jsx)(Pe.Z,{title:v.name,children:(0,e.jsx)(Qe.Z,{user:v,size:24})},v.userId)})})})};Xe.Preview=ea,(0,w.RM)("User",Xe,"antd");var Aa=g(71153),ta=g(60331),Ra=g(62999),aa=g(54680),na=g(60780),ra=g.n(na);function Ye(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),m=(0,A.Z)(i,2),l=m[0],a=m[1];function v(f){d&&((f==null?void 0:f.length)===0?s(void 0):s((0,D.Z)({},d,f==null?void 0:f.map(function(x){return x.value}))))}var c=(0,C.useMemo)(function(){return ra()(l.map(function(f){return{title:f.name,key:f.id,value:f.id,parentId:f.parentId}}),{parentProperty:"parentId",customID:"key"})},[l]);return(0,C.useEffect)(function(){Q.hi.deptSelect({}).then(function(f){f.success&&a(f.data)})},[]),(0,e.jsx)(U.Z,{children:(0,e.jsx)(k.Z,{span:12,children:(0,e.jsx)(aa.Z,{style:{width:"100%"},treeCheckable:!0,value:(r[d]||[]).map(function(f){return{value:f}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:c,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:v,showSearch:!1})})})}var ia=function(n){var s=n.schema,o=n.value,r=o===void 0?{}:o,u=s.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),m=(0,A.Z)(i,2),l=m[0],a=m[1];return(0,C.useEffect)(function(){Q.hi.deptSelect({selected:r[d]||[],name:"^_^"}).then(function(v){v.success&&a(v.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(Ze.Z,{children:l.map(function(v){return(0,e.jsx)(ta.Z,{color:"blue",children:v.name},v.id)})})})};Ye.Preview=ia,(0,w.RM)("Dept",Ye,"antd");function sa(t){for(var n=[],s=2;s<t+2;s++)n.push(s/(t+2));return n}function la(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)(function(){return r[d]||-1}),m=(0,A.Z)(i,2),l=m[0],a=m[1];function v(f){s((0,D.Z)({},d,f))}(0,C.useEffect)(function(){Object.keys(r).length>0&&a(r[d])},[r,d]);var c=function(x){var j=r[d],p=sa(l||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){a(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:[0,1,2,3,4,5,6,7,8,9,10].map(function(y){var b={background:"#2672ff",opacity:p[y]};return(0,e.jsx)("div",{className:"nps-item",style:l>=y?b:void 0,onMouseOver:function(){a(y)},onClick:function(){return v(y)},children:y},y)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,e.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]},x.id)};return(0,e.jsx)(U.Z,{children:h.map(function(f){return c(f)})})}(0,w.RM)("Nps",la,"antd");var oa=g(91220);function Je(t,n,s){if(!t)return"";var o=RegExp("_{3,}","g"),r=t.matchAll(o),u=[],h=(0,oa.Z)(r),d;try{for(h.s();!(d=h.n()).done;){var i=d.value,m=i.index,l=i.index+i[0].length;u.push([m,l])}}catch(y){h.e(y)}finally{h.f()}if(u.length===0)return t;for(var a=u[0][0]===0?"":t.substring(0,u[0][0]),v=0;v<u.length;v++){var c=u[v],f=u[v+1],x=t.substring(c[0],c[1]),j=t.substring(c[1],f?f[0]:t.length),p=s?s[n[v].id]:"";a+='<input data-id="'.concat(n[v].id,`" value='`).concat(p,`' class="mod_fillblank" style="width: `).concat(12*x.length,'px;">'),a+=j}return a}function qe(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children,h=n.attribute,d=h===void 0?{}:h,i=d.content;function m(l,a){r[l]=a,a===""&&delete r[l],s((0,Z.Z)({},r))}return(0,C.useEffect)(function(){u==null||u.forEach(function(l){var a=document.querySelector("[data-id='".concat(l.id,"']"));if(a){var v=r[l.id];v&&(a.value=v),a.onchange=function(c){var f;m(l.id,(f=c.target)===null||f===void 0?void 0:f.value)}}})},[]),(0,C.useEffect)(function(){Object.keys(r).forEach(function(l){var a=r[l],v=document.querySelector("[data-id='".concat(l,"']"));a!==v.value&&(v.value=a===void 0?"":a)})},[r]),(0,e.jsx)("div",{children:(0,e.jsx)(P.Z,{html:Je(i,u),replaceP:!1})})}qe.Preview=function(t){var n=t.schema,s=t.value,o=n.children,r=n.attribute,u=r===void 0?{}:r,h=u.content;return(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("div",{children:(0,e.jsx)(P.Z,{html:Je(h,o,s),replaceP:!1})})})},(0,w.RM)("HorzBlank",qe,"antd");function ua(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=n.children;function h(d,i){s((0,D.Z)({},i,d))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(d){var i=d.id,m=d.title,l=d.attribute,a=l===void 0?{}:l,v=a.mapMove;return(0,e.jsxs)(U.Z,{gutter:[10,0],"data-id":i,children:[m&&(0,e.jsx)(k.Z,{span:24},d.id),(0,e.jsx)(k.Z,{span:24,children:(0,e.jsx)(ht,{optionId:i,onChange:function(f){return h(f,i)},value:r[i],mapMove:v})})]},i)})})}(0,w.RM)("Address",ua,"antd");var da=g(23538);function _e(t){var n=t.schema,s=t.onChange,o=t.value,r=o===void 0?{}:o,u=t.readOnly,h=n.children,d=h===void 0?[]:h,i=(0,S.Al)(),m=function(){var l=(0,Ue.Z)(xe().mark(function a(v){var c,f,x,j;return xe().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:c=v.onSuccess,f=v.onError,x=v.file,j=v.onProgress,i.onUpload&&i.onUpload({file:x,fileType:6},function(b){j&&j({percent:b.loaded/b.total*100})}).then(function(b){if(b.success&&c&&(c(b.data),b.data.content&&s((0,D.Z)({},d[0].id,b.data.content))),!b.success&&f){var F=new Error("Some error");f({event:F})}});case 2:case"end":return y.stop()}},a)}));return function(v){return l.apply(this,arguments)}}();return(0,e.jsx)("div",{children:d==null?void 0:d.map(function(l){var a=l.id,v=l.attribute,c=v===void 0?{}:v,f=c.cameraOnly;return(0,e.jsx)(U.Z,{style:{marginBottom:10},"data-id":a,children:(0,e.jsx)(k.Z,{span:12,children:(0,e.jsx)(T.Z,{placeholder:"\u70B9\u51FB\u4E8C\u7EF4\u7801\u8BC6\u522B",value:r[a],addonAfter:(0,e.jsx)(me.Z,{capture:f?"environment":void 0,disabled:u,maxCount:1,beforeUpload:function(j){return c!=null&&c.maxFileSize&&j.size>c.maxFileSize*1024*1024?(ze.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(c.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),me.Z.LIST_IGNORE):!0},customRequest:m,showUploadList:!1,children:(0,e.jsx)(da.Z,{})},a)})})},a)})})}_e.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,w.RM)("Qrcode",_e,"antd");var ca=function(n){return(0,e.jsx)(e.Fragment,{children:n.children})},va=ca}}]);
