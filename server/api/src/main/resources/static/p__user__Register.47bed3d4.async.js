(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[3717],{95101:function(c){c.exports={container:"container___3u4qc",lang:"lang___3VyRW",content:"content___1k5Ro",top:"top___1x2PK",header:"header___3Kw-q",logo:"logo___2aK9c",title:"title___1Izp8",desc:"desc___vFX8U",main:"main___19HXK",icon:"icon___14_b2",other:"other____-JZS",register:"register___3QsXc",prefixIcon:"prefixIcon___2x9jr"}},3178:function(){},29791:function(c,v,e){"use strict";var _=e(27400),O=e(87859),o=e(85893),E=void 0==="1";v.Z=function(){var d,P,B=(0,_.a)(),g=B.system,m=(d=g.setting)===null||d===void 0?void 0:d.copyright;return E?(0,o.jsx)(O.qc,{copyright:m||!1,links:[{key:"recordNumber",title:(P=g.setting)===null||P===void 0?void 0:P.recordNum,href:"https://beian.miit.gov.cn/",blankTarget:!0}]}):(0,o.jsx)(o.Fragment,{})}},29552:function(c,v,e){"use strict";e.r(v);var _=e(39428),O=e(34792),o=e(48086),E=e(3182),d=e(94657),P=e(17462),B=e(76772),g=e(67294),m=e(82837),h=e(42285),R=e(73727),W=e(29791),b=e(95101),i=e.n(b),F=e(27400),Z=e(80582),S=e(5481),N=e.n(S),z=e(3980),s=e(85893),w=function(C){var p=C.content;return(0,s.jsx)(B.Z,{style:{marginBottom:24},message:p,type:"error",showIcon:!0})},V=function(){var C=(0,g.useState)(!1),p=(0,d.Z)(C,2),x=p[0],y=p[1],H=(0,g.useState)(),A=(0,d.Z)(H,2),I=A[0],X=A[1],U=(0,F.a)(),t=U.system,k=(0,g.useState)(""),T=(0,d.Z)(k,2),K=T[0],G=T[1],J=(0,g.useState)([]),L=(0,d.Z)(J,2),D=L[0],Q=L[1],j=(0,h.YB)(),Y=function(){var a=(0,E.Z)((0,_.Z)().mark(function n(u){var f;return(0,_.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,D.length===1&&(u.role=D[0].id),r.next=4,U.register(u);case 4:if(f=r.sent,!f.success){r.next=9;break}return o.default.success("\u6CE8\u518C\u6210\u529F"),h.m8.push("/user/login"),r.abrupt("return");case 9:X(f.message),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),o.default.error("\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 15:y(!1);case 16:case"end":return r.stop()}},n,null,[[0,12]])}));return function(u){return a.apply(this,arguments)}}();return(0,g.useEffect)(function(){z.hi.getRegisterRoles().then(function(a){a&&Q(a)})},[]),(0,s.jsxs)("div",{className:i().container,children:[(0,s.jsx)("div",{className:i().lang,"data-lang":!0,children:h.pD&&(0,s.jsx)(h.pD,{})}),(0,s.jsxs)("div",{className:i().content,children:[(0,s.jsxs)("div",{className:i().top,children:[(0,s.jsx)("div",{className:i().header,children:(0,s.jsxs)(R.rU,{to:"/",children:[(0,s.jsx)("img",{alt:"logo",className:i().logo,src:t.avatar?"/api/public/preview/".concat(t==null?void 0:t.avatar):N()}),(0,s.jsx)("span",{className:i().title,children:t==null?void 0:t.name})]})}),(0,s.jsx)("div",{className:i().desc,children:t==null?void 0:t.description})]}),(0,s.jsx)("div",{className:i().main,children:(0,s.jsxs)(m.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:j.formatMessage({id:"pages.login.registerAccount",defaultMessage:"\u6CE8\u518C"})},render:function(n,u){return u.pop()},submitButtonProps:{loading:x,size:"large",style:{width:"100%"},htmlType:"submit"}},onFinish:function(){var a=(0,E.Z)((0,_.Z)().mark(function n(u){return(0,_.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!x){l.next=2;break}return l.abrupt("return");case 2:return y(!0),l.next=5,Y(u);case 5:case"end":return l.stop()}},n)}));return function(n){return a.apply(this,arguments)}}(),children:[I&&(0,s.jsx)(w,{content:I}),(0,s.jsx)(m.V,{label:"\u59D3\u540D",name:"name",fieldProps:{size:"large"},placeholder:j.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u59D3\u540D"}),rules:[{required:!0,message:(0,s.jsx)(h._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u59D3\u540D!"})}]}),(0,s.jsx)(m.V,{label:"\u767B\u5F55\u8D26\u53F7",name:"username",fieldProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7",rules:[{required:!0,message:"\u767B\u5F55\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,s.jsx)(m.V.Password,{label:"\u5BC6\u7801",name:"password",fieldProps:{size:"large",onChange:function(n){G(n.target.value)}},placeholder:j.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,s.jsx)(h._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})},{pattern:t.registerInfo.strongPasswordEnabled?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9]{8,16}$/:/.{6,}/,message:t.registerInfo.strongPasswordEnabled?"8-16\u4F4D\u5927\u5C0F\u5199\u5B57\u6BCD\u548C\u6570\u5B57,\u4E0D\u80FD\u4F7F\u7528\u7279\u6B8A\u5B57\u7B26":"\u5BC6\u7801\u81F3\u5C116\u4F4D"}]}),(0,s.jsx)(m.V.Password,{name:"rePassword",label:"\u5BC6\u7801\u786E\u8BA4",fieldProps:{size:"large"},placeholder:"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},{validator:function(){var a=(0,E.Z)((0,_.Z)().mark(function u(f,l){return(0,_.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!(l&&K&&l!==K)){M.next=2;break}throw new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4!");case 2:case"end":return M.stop()}},u)}));function n(u,f){return a.apply(this,arguments)}return n}()}]}),D.length>1&&(0,s.jsx)(m._I,{name:"role",label:"\u9009\u62E9\u89D2\u8272",fieldProps:{size:"large"},options:D.map(function(a){return{label:a.name,value:a.id}}),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272"}]}),(0,s.jsx)("div",{style:{marginBottom:24,display:"flex",justifyContent:"flex-end"},children:(0,s.jsx)(R.rU,{to:"/user/login",children:"\u8FD4\u56DE\u767B\u5F55"})})]})})]}),(0,s.jsx)(W.Z,{})]})};v.default=(0,Z.Pi)(V)},5481:function(c,v,e){c.exports=e.p+"static/logo.eaa834e3.svg"},17462:function(c,v,e){"use strict";var _=e(38663),O=e.n(_),o=e(3178),E=e.n(o)}}]);
