(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1034],{29791:function(f,R,n){"use strict";var N=n(24557),y=n(78874),S=n(11013),C=n(97544),u=n(85893),D=void 0==="1";R.Z=function(){return D?(0,u.jsx)(C.Z,{copyright:!1,links:[{key:"Survey King",title:(0,u.jsx)(N.Z,{}),href:"https://surveyking.cn",blankTarget:!0},{key:"github",title:(0,u.jsx)(y.Z,{}),href:"https://github.com/javahuang/SurveyKing",blankTarget:!0},{key:"gitee",title:(0,u.jsx)(S.Z,{}),href:"https://gitee.com/surveyking/surveyking",blankTarget:!0}]}):(0,u.jsx)(u.Fragment,{})}},32957:function(f,R,n){"use strict";n.r(R),n.d(R,{default:function(){return jn}});var N=n(86582),y=n(11849),S=n(57527),C=n(67294),u=n(42285),D=n(73727),Rn=n(49111),W=n(19650),U=n(1870),Dn=n(94233),$=n(51890),En=n(30887),E=n(54689),Nn=n(20228),F=n(11382),z=n(3182),G=n(94043),H=n.n(G),Y=n(24616),J=n(55035),Q=n(17673),Sn=n(59250),X=n(13013),K=n(93224),b=n(94184),M=n.n(b),k=n(2589),w=n.n(k),a=n(85893),q=function(t){var c=t.overlayClassName,r=(0,K.Z)(t,["overlayClassName"]);return(0,a.jsx)(X.Z,(0,y.Z)({overlayClassName:M()(w().container,c)},r))},_=q,nn=n(26222),s=n.n(nn),L=n(27400),an=n(2299),tn=function(){var j=(0,z.Z)(H().mark(function t(){var c,r,d,v,m;return H().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:c=u.m8.location,r=c.query,d=r===void 0?{}:r,v=c.pathname,m=d.redirect,window.location.pathname!=="/user/login"&&!m&&u.m8.replace({pathname:"/user/login",search:(0,Q.stringify)({redirect:v})});case 3:case"end":return h.stop()}},t)}));return function(){return j.apply(this,arguments)}}(),en=function(t){var c=t.menu,r=(0,L.a)(),d=r.user,v=(0,C.useCallback)(function(h){var g=h.key;if(g==="logout"){r.logout(),tn();return}u.m8.push("/account/".concat(g))},[r]),m=(0,a.jsx)("span",{className:"".concat(s().action," ").concat(s().account),children:(0,a.jsx)(F.Z,{size:"small",style:{marginLeft:8,marginRight:8}})});if(r.loading||!d||!d.name)return m;var o=(0,a.jsxs)(E.Z,{className:s().menu,selectedKeys:[],onClick:v,children:[c&&(0,a.jsxs)(E.Z.Item,{children:[(0,a.jsx)(Y.Z,{}),"\u4E2A\u4EBA\u8BBE\u7F6E"]},"settings"),c&&(0,a.jsx)(E.Z.Divider,{}),(0,a.jsxs)(E.Z.Item,{children:[(0,a.jsx)(J.Z,{}),"\u9000\u51FA\u767B\u5F55"]},"logout")]});return(0,a.jsx)(_,{overlay:o,children:(0,a.jsxs)("span",{className:"".concat(s().action," ").concat(s().account),children:[(0,a.jsx)($.C,{size:"small",className:s().avatar,src:"/api/public/preview/".concat(d.avatar)||0,alt:"avatar"}),(0,a.jsx)("span",{className:"".concat(s().name," anticon"),children:d.name})]})})},rn=(0,an.Pi)(en),Mn=n(65011),on=n(49288),On=n(47673),sn=n(4107),ln=n(32059),V=n(2824),un=n(76570),I=n(21770),cn=n(10292),O=n.n(cn),dn=function(t){var c=t.className,r=t.defaultValue,d=t.onVisibleChange,v=t.placeholder,m=t.visible,o=t.defaultVisible,h=(0,K.Z)(t,["className","defaultValue","onVisibleChange","placeholder","visible","defaultVisible"]),g=(0,C.useRef)(null),A=(0,I.Z)(r,{value:t.value,onChange:t.onChange}),i=(0,V.Z)(A,2),e=i[0],l=i[1],x=(0,I.Z)(o!=null?o:!1,{value:t.visible,onChange:d}),Z=(0,V.Z)(x,2),p=Z[0],T=Z[1],Zn=M()(O().input,(0,ln.Z)({},O().show,p));return(0,a.jsxs)("div",{className:M()(c,O().headerSearch),onClick:function(){T(!0),p&&g.current&&g.current.focus()},onTransitionEnd:function(B){var pn=B.propertyName;pn==="width"&&!p&&d&&d(p)},children:[(0,a.jsx)(un.Z,{style:{cursor:"pointer"}},"Icon"),(0,a.jsx)(on.Z,{className:Zn,value:e,options:h.options,onChange:l,children:(0,a.jsx)(sn.Z,{size:"small",ref:g,defaultValue:r,"aria-label":v,placeholder:v,onKeyDown:function(B){B.key==="Enter"&&h.onSearch&&h.onSearch(e)},onBlur:function(){T(!1)}})},"AutoComplete")]})},vn=dn,hn=function(){var t=s().right;return t="".concat(s().right,"  ").concat(s().dark),(0,a.jsxs)(W.Z,{className:t,children:[(0,a.jsx)(vn,{className:"".concat(s().action," ").concat(s().search),placeholder:"\u7AD9\u5185\u641C\u7D22",options:[{label:(0,a.jsx)("a",{href:"https://surveyking.cn",children:"Survey King"}),value:"Survey King"}]}),(0,a.jsx)("span",{className:s().action,onClick:function(){window.open("https://surveyking.cn")},children:(0,a.jsx)(U.Z,{})}),(0,a.jsx)(rn,{menu:!0}),(0,a.jsx)(u.pD,{className:s().action})]})},mn=hn,fn=n(29791),gn=n(5481),yn=n.n(gn),xn=n(77613),Cn=function(t){var c=t.children,r=t.location,d=r===void 0?{pathname:"/"}:r,v=(0,L.a)(),m=v.user,o=v.system,h=(0,u.YB)(),g=h.formatMessage;(0,C.useEffect)(function(){v.currentUser()},[v]),(0,C.useEffect)(function(){var i=document.querySelector("link[rel~='icon']");i&&(i.href="/api/public/".concat(o.avatar)),document.title=o.name||"\u5377\u738B";var e=document.getElementById("loading-img");e&&(e.src="/api/public/preview/".concat(o.avatar));var l=document.getElementById("loading-name");l&&(l.textContent=document.title)},[o]);var A=function i(e){return e.filter(function(l){var x;return m==null||(x=m.authorityList)===null||x===void 0?void 0:x.find(function(Z){return Z.startsWith(l.authority)})}).map(function(l){return(0,y.Z)((0,y.Z)({},l),{},{children:l.children?i(l.children):void 0})})};return(0,a.jsx)(S.ZP,(0,y.Z)((0,y.Z)({title:o==null?void 0:o.name,logo:(0,a.jsx)("img",{src:o.avatar?"/api/public/preview/".concat(o.avatar):yn()}),formatMessage:g},t),{},{onMenuHeaderClick:function(){return u.m8.push("/")},menuItemRender:function(e,l){return e.isUrl||!e.path||d.pathname===e.path?l:(0,a.jsx)(D.rU,{to:e.path,children:l})},breadcrumbRender:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return[{path:"/",breadcrumbName:g({id:"menu.home"})}].concat((0,N.Z)(e))},itemRender:function(e,l,x,Z){var p=x.indexOf(e)===0;return p?(0,a.jsx)(D.rU,{to:Z.join("/"),children:e.breadcrumbName}):(0,a.jsx)("span",{children:e.breadcrumbName})},footerRender:function(){return(0,a.jsx)(fn.Z,{})},menuDataRender:A,rightContentRender:function(){return(0,a.jsx)(mn,{})},onPageChange:function(){},children:c}))},jn=(0,xn.P)(Cn)},5481:function(f,R,n){f.exports=n.p+"static/logo.de1a765f.svg"},2589:function(f){f.exports={container:"container___1Rq3A"}},10292:function(f){f.exports={headerSearch:"headerSearch___RN1il",input:"input___3Vzpl",show:"show___VZRKu"}},26222:function(f){f.exports={menu:"menu___1L63y",right:"right___3L8KG",action:"action___LP4_P",search:"search___2W0sJ",account:"account___6HXOq",avatar:"avatar___2cOWV",dark:"dark___1NwCY",name:"name___WfKAK"}}}]);
