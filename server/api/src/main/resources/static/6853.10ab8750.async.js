(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[6853],{80341:function(){},56853:function(fe,G,o){"use strict";o.r(G),o.d(G,{default:function(){return re}});var y=o(94657),j=o(62612),i=o(67294),M=o(11849),b=o(39428),z=o(83279),l=o(3182),Q=o(54029),B=o(79166),te=o(3980),A=o(27484),ne=o.n(A),x=o(85893),L=function(T){var w=T.status;return w===0?(0,x.jsx)(B.Z,{status:"default",text:"\u672A\u5F00\u59CB"}):w===1?(0,x.jsx)(B.Z,{status:"processing",text:"\u8FDB\u884C\u4E2D"}):(0,x.jsx)(B.Z,{status:"success",text:"\u5DF2\u5B8C\u6210"})},J=function(T){var w=T.itemKey,U=(0,i.useState)([]),D=(0,y.Z)(U,2),I=D[0],r=D[1],e=(0,i.useRef)({current:1,pageSize:10});function s(d){return t.apply(this,arguments)}function t(){return t=(0,l.Z)((0,b.Z)().mark(function d(n){var p,u,c,C,Z,P;return(0,b.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return f&&!n&&I.length>0&&(e.current.current=e.current.current+1),m.next=3,te.hi.getWithPagination("/api/listUserTask",(0,M.Z)((0,M.Z)({},e.current),{},{type:w,current:n||e.current.current}));case 3:return p=m.sent,u=e.current,c=u.pageSize,C=c===void 0?10:c,Z=u.total,P=Z===void 0?0:Z,n||(e.current=(0,M.Z)((0,M.Z)({},e.current),{},{total:p.total}),N(P/C>e.current.current)),m.abrupt("return",p.list);case 7:case"end":return m.stop()}},d)})),t.apply(this,arguments)}var a=(0,i.useState)(!0),h=(0,y.Z)(a,2),f=h[0],N=h[1],S=function(){var d=(0,l.Z)((0,b.Z)().mark(function n(){var p;return(0,b.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,s();case 2:p=c.sent,r([].concat((0,z.Z)(I),(0,z.Z)(p)));case 4:case"end":return c.stop()}},n)}));return function(){return d.apply(this,arguments)}}(),v=function(n){var p=new Date().getTime(),u=[];return w==="survey"?n.answerId?u.push({key:"start",text:"\u67E5\u770B\u7B54\u6848",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId,"/").concat(n.answerId,"?pattern=readPretty"))}}):n.endTime&&p>n.endTime?u.push({key:"start",text:"\u95EE\u5377\u5DF2\u7ED3\u675F",danger:!0}):u.push({key:"start",text:"\u5F00\u59CB\u7B54\u5377",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId))}}):n.examStartTime&&n.examStartTime>p?u.push({key:"start",text:"\u8003\u8BD5\u672A\u5F00\u59CB",danger:!0,primary:!0}):n.examEndTime&&p>n.examEndTime?n.status===2?u.push({key:"result",text:"\u67E5\u770B\u7ED3\u679C",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId,"/exam-result/").concat(n.answerId))}}):u.push({key:"result",text:"\u8003\u8BD5\u5DF2\u7ED3\u675F",primary:!0}):n.status===2?u.push({key:"result",text:"\u67E5\u770B\u7ED3\u679C",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId,"/exam-result/").concat(n.answerId))}}):(n.status===1||n.status===0)&&u.push({key:"start",text:"\u5F00\u59CB\u8003\u8BD5",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId))}}),u.push({key:"cancel",text:"\u53D6\u6D88"}),u};return(0,x.jsx)("div",{style:{height:"100vh",overflowY:"scroll"},children:(0,x.jsxs)(j.t8,{onRefresh:(0,l.Z)((0,b.Z)().mark(function d(){var n;return(0,b.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,s(1);case 2:n=u.sent,r([].concat((0,z.Z)(n),(0,z.Z)(I.filter(function(c){return!n.map(function(C){return C.projectId}).includes(c.projectId)}))));case 4:case"end":return u.stop()}},d)})),children:[(0,x.jsx)(j.aV,{children:I.map(function(d,n){return(0,x.jsx)(j.aV.Item,{onClick:function(){j.u_.show({content:d.name,closeOnAction:!0,actions:v(d)})},extra:L(d),description:d.examStartTime?ne()(d.examStartTime).format("YYYY-MM-DD HH:mm"):void 0,children:d.name},n)})}),(0,x.jsx)(j.v_,{loadMore:S,hasMore:f})]},w)})},X=J;function re(){var K=(0,i.useRef)(null),T=[{key:"exam",title:"\u6211\u7684\u8003\u8BD5"},{key:"survey",title:"\u6211\u7684\u95EE\u5377"}],w=(0,i.useState)(0),U=(0,y.Z)(w,2),D=U[0],I=U[1];return(0,x.jsxs)("div",{className:"mobile-home",children:[(0,x.jsx)(j.mQ,{activeKey:T[D].key,onChange:function(e){var s,t=T.findIndex(function(a){return a.key===e});I(t),(s=K.current)===null||s===void 0||s.swipeTo(t)},children:T.map(function(r){return(0,x.jsx)(j.mQ.Tab,{title:r.title},r.key)})}),(0,x.jsxs)(j.tq,{direction:"horizontal",loop:!0,indicator:function(){return null},ref:K,defaultIndex:D,onIndexChange:function(e){I(e)},children:[(0,x.jsx)(j.tq.Item,{children:(0,x.jsx)("div",{className:"exam",children:(0,x.jsx)(X,{itemKey:"exam"})})}),(0,x.jsx)(j.tq.Item,{children:(0,x.jsx)("div",{className:"survey",children:(0,x.jsx)(X,{itemKey:"survey"})})})]})]})}},79166:function(fe,G,o){"use strict";o.d(G,{Z:function(){return I}});var y=o(96156),j=o(90484),i=o(22122),M=o(94184),b=o.n(M),z=o(63441),l=o(67294),Q=o(53124),B=o(96159),te=o(98787);function A(r){return te.Y.indexOf(r)!==-1}var ne=function(e){var s,t=e.className,a=e.prefixCls,h=e.style,f=e.color,N=e.children,S=e.text,v=e.placement,d=v===void 0?"end":v,n=l.useContext(Q.E_),p=n.getPrefixCls,u=n.direction,c=p("ribbon",a),C=A(f),Z=b()(c,"".concat(c,"-placement-").concat(d),(s={},(0,y.Z)(s,"".concat(c,"-rtl"),u==="rtl"),(0,y.Z)(s,"".concat(c,"-color-").concat(f),C),s),t),P={},E={};return f&&!C&&(P.background=f,E.color=f),l.createElement("div",{className:"".concat(c,"-wrapper")},N,l.createElement("div",{className:Z,style:(0,i.Z)((0,i.Z)({},P),h)},l.createElement("span",{className:"".concat(c,"-text")},S),l.createElement("div",{className:"".concat(c,"-corner"),style:E})))},x=ne,L=o(28481);function J(r){var e=r.prefixCls,s=r.value,t=r.current,a=r.offset,h=a===void 0?0:a,f;return h&&(f={position:"absolute",top:"".concat(h,"00%"),left:0}),l.createElement("span",{style:f,className:b()("".concat(e,"-only-unit"),{current:t})},s)}function X(r,e,s){for(var t=r,a=0;(t+10)%10!==e;)t+=s,a+=s;return a}function re(r){var e=r.prefixCls,s=r.count,t=r.value,a=Number(t),h=Math.abs(s),f=l.useState(a),N=(0,L.Z)(f,2),S=N[0],v=N[1],d=l.useState(h),n=(0,L.Z)(d,2),p=n[0],u=n[1],c=function(){v(a),u(h)};l.useEffect(function(){var R=setTimeout(function(){c()},1e3);return function(){clearTimeout(R)}},[a]);var C,Z;if(S===a||Number.isNaN(a)||Number.isNaN(S))C=[l.createElement(J,(0,i.Z)({},r,{key:a,current:!0}))],Z={transition:"none"};else{C=[];for(var P=a+10,E=[],m=a;m<=P;m+=1)E.push(m);var $=E.findIndex(function(R){return R%10===S});C=E.map(function(R,H){var q=R%10;return l.createElement(J,(0,i.Z)({},r,{key:R,value:q,offset:H-$,current:H===$}))});var ae=p<h?1:-1;Z={transform:"translateY(".concat(-X(S,a,ae),"00%)")}}return l.createElement("span",{className:"".concat(e,"-only"),style:Z,onTransitionEnd:c},C)}var K=function(r,e){var s={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.indexOf(t)<0&&(s[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(r);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(r,t[a])&&(s[t[a]]=r[t[a]]);return s},T=function(e){var s=e.prefixCls,t=e.count,a=e.className,h=e.motionClassName,f=e.style,N=e.title,S=e.show,v=e.component,d=v===void 0?"sup":v,n=e.children,p=K(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),u=l.useContext(Q.E_),c=u.getPrefixCls,C=c("scroll-number",s),Z=(0,i.Z)((0,i.Z)({},p),{"data-show":S,style:f,className:b()(C,a,h),title:N}),P=t;if(t&&Number(t)%1==0){var E=String(t).split("");P=E.map(function(m,$){return l.createElement(re,{prefixCls:C,count:Number(t),value:m,key:E.length-$})})}return f&&f.borderColor&&(Z.style=(0,i.Z)((0,i.Z)({},f),{boxShadow:"0 0 0 1px ".concat(f.borderColor," inset")})),n?(0,B.Tm)(n,function(m){return{className:b()("".concat(C,"-custom-component"),m==null?void 0:m.className,h)}}):l.createElement(d,Z,P)},w=T,U=function(r,e){var s={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.indexOf(t)<0&&(s[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(r);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(r,t[a])&&(s[t[a]]=r[t[a]]);return s},D=function(e){var s,t,a=e.prefixCls,h=e.scrollNumberPrefixCls,f=e.children,N=e.status,S=e.text,v=e.color,d=e.count,n=d===void 0?null:d,p=e.overflowCount,u=p===void 0?99:p,c=e.dot,C=c===void 0?!1:c,Z=e.size,P=Z===void 0?"default":Z,E=e.title,m=e.offset,$=e.style,ae=e.className,R=e.showZero,H=R===void 0?!1:R,q=U(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),de=l.useContext(Q.E_),ve=de.getPrefixCls,se=de.direction,g=ve("badge",a),oe=n>u?"".concat(u,"+"):n,le=N!=null||v!=null,ce=oe==="0"||oe===0,F=C&&!ce,Y=F?"":oe,V=(0,l.useMemo)(function(){var O=Y==null||Y==="";return(O||ce&&!H)&&!F},[Y,ce,H,F]),me=(0,l.useRef)(n);V||(me.current=n);var W=me.current,pe=(0,l.useRef)(Y);V||(pe.current=Y);var ue=pe.current,ye=(0,l.useRef)(F);V||(ye.current=F);var _=(0,l.useMemo)(function(){if(!m)return(0,i.Z)({},$);var O={marginTop:m[1]};return se==="rtl"?O.left=parseInt(m[0],10):O.right=-parseInt(m[0],10),(0,i.Z)((0,i.Z)({},O),$)},[se,m,$]),he=E!=null?E:typeof W=="string"||typeof W=="number"?W:void 0,ge=V||!S?null:l.createElement("span",{className:"".concat(g,"-status-text")},S),Ne=!W||(0,j.Z)(W)!=="object"?void 0:(0,B.Tm)(W,function(O){return{style:(0,i.Z)((0,i.Z)({},_),O.style)}}),Ze=b()((s={},(0,y.Z)(s,"".concat(g,"-status-dot"),le),(0,y.Z)(s,"".concat(g,"-status-").concat(N),!!N),(0,y.Z)(s,"".concat(g,"-status-").concat(v),A(v)),s)),xe={};v&&!A(v)&&(xe.background=v);var Ce=b()(g,(t={},(0,y.Z)(t,"".concat(g,"-status"),le),(0,y.Z)(t,"".concat(g,"-not-a-wrapper"),!f),(0,y.Z)(t,"".concat(g,"-rtl"),se==="rtl"),t),ae);if(!f&&le){var be=_.color;return l.createElement("span",(0,i.Z)({},q,{className:Ce,style:_}),l.createElement("span",{className:Ze,style:xe}),l.createElement("span",{style:{color:be},className:"".concat(g,"-status-text")},S))}return l.createElement("span",(0,i.Z)({},q,{className:Ce}),f,l.createElement(z.default,{visible:!V,motionName:"".concat(g,"-zoom"),motionAppear:!1,motionDeadline:1e3},function(O){var k,Se=O.className,Ee=ve("scroll-number",h),ie=ye.current,je=b()((k={},(0,y.Z)(k,"".concat(g,"-dot"),ie),(0,y.Z)(k,"".concat(g,"-count"),!ie),(0,y.Z)(k,"".concat(g,"-count-sm"),P==="small"),(0,y.Z)(k,"".concat(g,"-multiple-words"),!ie&&ue&&ue.toString().length>1),(0,y.Z)(k,"".concat(g,"-status-").concat(N),!!N),(0,y.Z)(k,"".concat(g,"-status-").concat(v),A(v)),k)),ee=(0,i.Z)({},_);return v&&!A(v)&&(ee=ee||{},ee.background=v),l.createElement(w,{prefixCls:Ee,show:!V,motionClassName:Se,className:je,count:ue,title:he,style:ee,key:"scrollNumber"},Ne)}),ge)};D.Ribbon=x;var I=D},54029:function(fe,G,o){"use strict";var y=o(38663),j=o.n(y),i=o(80341),M=o.n(i)}}]);
