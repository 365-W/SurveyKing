(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1843],{87520:function(ee,z,n){"use strict";n.r(z),n.d(z,{ExamResult:function(){return q},default:function(){return ve}});var T={};n.r(T),n.d(T,{Number0:function(){return I},Number1:function(){return j},Number2:function(){return ne},Number3:function(){return re},Number4:function(){return te},Number5:function(){return ae},Number6:function(){return ie},Number7:function(){return oe},Number8:function(){return se},Number9:function(){return le},ScoreUnderline:function(){return k}});var S=n(80937),x=n(67294),P=n(51615),L=n(3182),F=n(69610),V=n(54941),$=n(94043),w=n.n($),b=n(3980),N=n(54531),B=function(){function v(l){(0,F.Z)(this,v),this.id=void 0,this.answerId=void 0,this.examResult=void 0,this.id=l.id,this.answerId=l.answerId,this.makeObservable(),this.loadExamResult()}return(0,V.Z)(v,[{key:"makeObservable",value:function(){(0,N.Ou)(this,{id:N.LO.ref,answerId:N.LO.ref,examResult:N.LO.ref,loadExamResult:N.aD})}},{key:"loadExamResult",value:function(){var l=(0,L.Z)(w().mark(function c(){var y;return w().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,b.hi.loadExamResult({id:this.id,answerId:this.answerId});case 2:y=f.sent,y.success&&(this.examResult=y.data);case 4:case"end":return f.stop()}},c,this)}));function d(){return l.apply(this,arguments)}return d}()}]),v}(),K=n(20136),Q=n(55241),H=n(49111),W=n(19650),J=n(57663),U=n(71577),X=n(34792),Y=n(48086),a=n(94657),o=n(71555),r=n(23538),t=n(92592),i=n(74855),s=x.createContext({});function u(){return(0,x.useContext)(s)}var e=n(85893),C=(0,S.Pi)(function(){var v=u(),l=v.examResult,d=(0,x.useState)(""),c=(0,a.Z)(d,2),y=c[0],M=c[1];(0,x.useEffect)(function(){function m(){return h.apply(this,arguments)}function h(){return h=(0,L.Z)(w().mark(function O(){return w().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:t.toDataURL(window.location.href,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:1}).then(function(E){M(E)}).catch(function(E){console.error(E)});case 1:case"end":return R.stop()}},O)})),h.apply(this,arguments)}m()},[]);var f=function(){var m=(0,L.Z)(w().mark(function h(O){return w().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:t.toDataURL(window.location.href,{errorCorrectionLevel:"H",margin:1,width:O}).then(function(E){M(E);var Z=document.createElement("a");Z.href=E,Z.setAttribute("download","".concat(l==null?void 0:l.name,"_").concat(O,".png")),document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)});case 1:case"end":return R.stop()}},h)}));return function(O){return m.apply(this,arguments)}}(),_=function(){if(l!=null&&l.schema){var h;return(0,e.jsxs)("span",{className:"total-score",children:["\u603B\u5206",(h=l.schema.attribute)===null||h===void 0?void 0:h.examScore,"\u5206"]})}return(0,e.jsx)(e.Fragment,{})};return(0,e.jsxs)("div",{className:"exam-result-header",children:[(0,e.jsxs)("div",{className:"header-content",children:[(0,e.jsx)(i.CopyToClipboard,{text:"".concat(window.location.href),onCopy:function(){return Y.default.success("\u590D\u5236\u6210\u529F")},children:(0,e.jsx)(U.Z,{icon:(0,e.jsx)(o.Z,{}),children:"\u5206\u4EAB\u7ED9\u597D\u53CB"})}),(0,e.jsx)(Q.Z,{overlayInnerStyle:{border:"1px solid rgb(225, 231, 242)",borderRadius:3,boxShadow:"rgb(224 229 236 / 40%) 0px 3px 8px 0px"},content:(0,e.jsxs)("div",{children:[(0,e.jsx)("img",{src:y,height:100,width:100}),(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsxs)(W.Z,{children:[(0,e.jsx)("a",{onClick:function(){return f(256)},children:"\u5C0F\u53F7"}),(0,e.jsx)("a",{onClick:function(){return f(512)},children:"\u4E2D\u53F7"}),(0,e.jsx)("a",{onClick:function(){return f(1024)},children:"\u5927\u53F7"})]})})]}),children:(0,e.jsx)(U.Z,{icon:(0,e.jsx)(r.Z,{}),type:"text"})})]}),(0,e.jsxs)("div",{className:"title",children:[l==null?void 0:l.name,_()]})]})}),A=n(66456),G=n(1670),p=n(18111),g=n(27484),D=n.n(g),I=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024","p-id":"1361","data-spm-anchor-id":"a313x.7781069.0.i5",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M383.07989 126.788545l396.245994 67.928045 1.415284 701.919397-533.517367-66.51276 135.856089-703.334682z m512.288105 834.944918l-1.415284-815.13094-48.114067-56.605771L347.703381 5.085297 282.605904 51.78408 122.689985 868.335898l48.119661 67.928045 659.460873 82.075292 65.097476-56.605772z","p-id":"1362","data-spm-anchor-id":"a313x.7781069.0.i6"})}),j=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M721.875514 50.613231L635.921319 3.610078 300.167797 252.066458l65.809987 87.297142 237.712802-178.623125L541.909442 1012.213591l107.44135 8.057683L721.875514 50.613231z","p-id":"1206"})}),ne=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M897.62003 940.716242l-11.754723-104.450063-552.277836 61.364204 485.693625-547.052281-5.225554-75.726157-319.873811-267.6571L431.508365 3.278453 120.770953 216.094971 179.527927 302.266689l278.097114-189.312619 248.064046 207.590964L163.856812 928.967066l43.085859 87.475333 690.677359-75.726157z","p-id":"1518"})}),re=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M737.423214 989.936662l187.89454-346.261526-33.553787-79.180716-340.891365-84.55643 381.153688-295.258882-26.839698-96.629574L290.505882 2.154728l-14.761001 107.369896 488.523583 68.445948-367.736616 285.862489 20.131162 95.291198 379.815312 93.947271-134.209592 249.626398-550.260996-118.104663-24.157393 104.687592 590.523317 127.495503 59.049556-26.839698z","p-id":"1676"})}),te=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M966.522808 751.55574l-4.036306-108.963429-219.262936 5.383613 44.388142-521.92977-108.957815-9.414305-44.393755 534.033075-447.940178 9.419919L429.79512 41.300564 328.909918 2.290421 54.491615 695.058679l52.460754 73.983979 517.893463-10.761612-21.523224 254.236772 107.616122 8.072612 22.864917-263.656691 232.719161-5.377999z","p-id":"1832"})}),ae=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M784.968235 982.615128l170.861419-435.28703-43.393376-74.585138-538.346299-56.953806 56.953806-301.041546h474.615051V6.269714H384.938323l-54.24172 44.746646-74.579592 402.741998 47.458732 65.090064 524.785868 55.600536-128.821312 325.444774-614.284706-135.6043L60.846819 871.419602l661.743438 145.093828 62.377978-33.898302z","p-id":"1988"})}),ie=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M672.288828 1004.206903l275.275297-318.669393-20.336395-86.788192-424.444619-180.357063-42.033443 101.704559 353.922156 150.524329-199.338452 233.236208-413.593272-151.87369L576.009942 53.618752 479.731056 2.088969 74.273472 757.403689l31.187742 75.94249 508.517151 185.777092 58.310463-14.916368z","p-id":"2146"})}),oe=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M885.422422 150.609477l-47.387874-83.290486L141.556268 8.440271 130.065421 123.326396l616.05911 54.566161-363.316338 789.818369 104.830936 47.39346 397.783293-864.494909z","p-id":"2302"})}),se=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M590.001388 117.347799l121.780542 133.82422-175.307999 157.905999-219.468152-171.287864 272.995609-120.442355z m-49.512898 432.245371l263.628304 204.748101-220.806338 151.215067-343.91949-85.643932 301.097524-270.319236z m84.305746 459.0091l301.097524-204.748101 2.676373-89.658491-305.112084-236.864576 200.733542-180.660744 2.676372-77.614814L643.528846 16.983816l-62.894763-13.381864-390.761591 171.287864-12.043678 91.002253 275.677557 216.791779L90.846695 807.868728l24.087356 92.334865 465.700032 115.089609 44.160153-6.690932z","p-id":"2458"})}),le=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M908.989292 186.728233l-39.335692-75.962037L392.18431 6.317002l-55.614067 23.06289L108.684132 344.076574l20.34797 81.386304 377.089689 180.405657 47.480454-99.019353-317.411602-150.563826L404.393092 121.61473l375.735016 81.391879-345.893185 769.103081 100.374026 44.765533L908.989292 186.728233z","p-id":"2614"})}),k=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"512",height:"512",children:(0,e.jsx)("path",{d:"M281.6 435.2c38.4-8.533333 247.466667-59.733333 520.533333-76.8 46.933333-4.266667 55.466667-29.866667 29.866667-38.4-21.333333-8.533333-192-29.866667-563.2 55.466667-42.666667 8.533333-64 21.333333-81.066667 42.666666-8.533333 8.533333-8.533333 25.6 0 34.133334 12.8 17.066667 64-12.8 93.866667-17.066667z m550.4 38.4c-64 4.266667-392.533333 17.066667-721.066667 136.533333-59.733333 21.333333-93.866667 42.666667-93.866666 76.8 0 12.8 4.266667 4.266667 17.066666 21.333334 42.666667 42.666667 170.666667-145.066667 887.466667-196.266667 0 0 76.8 0 76.8-21.333333 4.266667-25.6-93.866667-21.333333-166.4-17.066667z","p-id":"1873"})}),ue=(0,S.Pi)(function(){var v,l=u(),d=l.examResult;if(!d||!d.examScore)return(0,e.jsx)(e.Fragment,{});var c=(v=d.metaInfo)===null||v===void 0?void 0:v.answerInfo,y=function(){return d.examScore===void 0?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)("div",{className:"score",children:"".concat(d.examScore).split("").map(function(m){return x.cloneElement(T["Number"+m],{key:m,height:32,width:24,fill:"currentColor",focusable:"false","aria-hidden":"true"})}).concat([x.cloneElement(k,{key:"underline",height:24,width:48,className:"score-underline",fill:"currentColor",focusable:"false","aria-hidden":"true"})])})},M=[{title:"\u5F53\u524D\u6392\u540D",dataIndex:"rank",align:"center"},{title:"\u7B54\u9898\u65F6\u957F",dataIndex:"duration",align:"center"},{title:"\u63D0\u4EA4\u65F6\u95F4",dataIndex:"submitTime",align:"center"}],f=[{key:"1",rank:d.rank,duration:(0,p.gh)(((c==null?void 0:c.endTime)||0)-((c==null?void 0:c.startTime)||0)),submitTime:D()(c==null?void 0:c.endTime).format("YYYY.MM.DD HH:mm")}];return d.rank===void 0&&M.splice(0,1),(0,e.jsxs)("div",{className:"exam-result-mine",children:[y(),(0,e.jsx)(G.Z,{className:"result-info",bordered:!0,size:"small",rowKey:"key",pagination:!1,columns:M,dataSource:f})]})}),de=n(68068),ce=(0,S.Pi)(function(){var v,l=u(),d=l.examResult,c=(0,b.dD)();return!d||!d.schema?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)("div",{children:(0,e.jsx)(de.Z,{schema:d.schema,initialValues:d.answer,readOnly:!0,theme:c?"antdMobile":"antd",headerVisible:!1,footerVisible:!1,paginationVisible:!1,questionNumber:!1,correctAnswerVisible:!0,examScoreVisible:!0,mode:"exam",questionScore:(v=d.examInfo)===null||v===void 0?void 0:v.questionScore})})}),q=(0,S.Pi)(function(v){var l=(0,P.UO)(),d=l.id,c=l.answerId,y=(0,x.useMemo)(function(){return new B({id:d,answerId:c})},[]);return(0,e.jsx)(s.Provider,{value:y,children:(0,e.jsxs)("div",{className:"exam-result",children:[(0,e.jsx)(C,{}),(0,e.jsx)(ue,{}),(0,e.jsx)(ce,{})]})})}),ve=q},18111:function(ee,z,n){"use strict";n.d(z,{xi:function(){return S},fQ:function(){return x},IR:function(){return Q},gh:function(){return Y},ZZ:function(){return B}});var T=n(67294),S=(0,T.createContext)({}),x=S.Provider,P=n(83279),L=n(40807),F=n(27484),V=n.n(F),$=n(42238),w=n.n($),b=n(76826);function N(a){return a==="Upload"||a==="Signature"?"image":a=="User"?"user":a==="Dept"?"dept":"string"}function B(a){var o,r=[];return a==null||(o=a.children)===null||o===void 0||o.filter(function(t){return!(0,L.nj)(t.type)}).map(function(t){t.type==="QuestionSet"?r.push.apply(r,(0,P.Z)(B(t))):r.push({name:t.id,title:(0,b.WO)(t.title),schema:t,type:N(t.type)})}),r}function K(a){var o={};return a&&(a.id&&(o[a.id]=trimHtmlTag(a.title)),a.children&&a.children.forEach(function(r){return Object.assign(o,K(r))})),o}function Q(a,o){return a.map(function(r){var t,i={},s=w()((t=r.metaInfo)===null||t===void 0?void 0:t.clientInfo.agent);return o.forEach(function(u){var e,C,A,G=u.name;switch(G){case"startTime":i.startTime=V()((e=r.metaInfo)===null||e===void 0?void 0:e.answerInfo.startTime).format("YYYY-MM-DD HH:mm:ss");return;case"endTime":i.endTime=V()((C=r.metaInfo)===null||C===void 0?void 0:C.answerInfo.endTime).format("YYYY-MM-DD HH:mm:ss");return;case"totalTime":i.totalTime=Y(r.metaInfo?r.metaInfo.answerInfo.endTime-r.metaInfo.answerInfo.startTime:0);return;case"remoteIp":i.remoteIp=(A=r.metaInfo)===null||A===void 0?void 0:A.clientInfo.remoteIp;return;case"browserType":i.browserType="".concat(s.browser.name," ").concat(s.browser.version);return;case"deviceType":i.deviceType="".concat(s.device.vendor||""," ").concat(s.device.type||"");return;case"platform":i.platform="".concat(s.os.name," ").concat(s.os.version);return;case"openid":i.openid=r.answer.openid;return;default:break}if(!u.schema){i[u.name]=r[u.name];return}var p=u.schema||{},g=p.type,D=p.id,I=r.answer[D];if(!!I){var j=[];g==="Cascader"?j=J(I,p):g==="MatrixAuto"?j=X(I,p):g.startsWith("Matrix")?j=U(I,p):g==="Upload"||g==="Signature"?j=W(I,p,r.attachment):j=H(I,p),g==="Upload"||g==="Signature"?i[D]=j:i[D]=j.join(",")}}),i.id=r.id,i._raw=r,i})}function H(a,o){var r,t=[];return(r=o.children)===null||r===void 0||r.forEach(function(i){var s=a[i.id];if(i.dataSource){var u;t.push(((u=i.dataSource.find(function(e){return e.value===s}))===null||u===void 0?void 0:u.label)||s)}else s===!0?t.push((0,b.WO)(i.title)):s&&t.push(s)}),t}function W(a,o,r){var t,i=[];return(t=o.children)===null||t===void 0||t.forEach(function(s){var u=a[s.id];i=r.filter(function(e){return u.includes(e.id)})}),i}function J(a,o){var r,t=[],i=o==null?void 0:o.dataSource;return i&&((r=o.children)===null||r===void 0||r.forEach(function(s){if(a.hasOwnProperty(s.id)){var u,e=(u=i)===null||u===void 0?void 0:u.find(function(C){return C.value===a[s.id]});e?(i=e.children,t.push(e.label)):t.push("")}})),t}function U(a,o){var r,t=[];return(r=o.row)===null||r===void 0||r.forEach(function(i){var s=i.id,u=(0,b.WO)(i.title);a[s]!==void 0&&t.push("".concat(u,":(").concat(H(a[s],o),")"))}),t}function X(a,o){var r=[];return a.forEach(function(t){r.push("(".concat(H(t,o),")"))}),r}function Y(a){var o=Math.floor(a/(36e5*24)),r=Math.floor(a/36e5%24),t=Math.floor(a/6e4%60),i=Math.floor(a/1e3%60),s="";return o>0&&(s+=o+"\u5929"),r>0&&(s+=r+"\u5C0F\u65F6"),t>0&&(s+=t+"\u5206\u949F"),i>0&&(s+=i+"\u79D2"),s}}}]);
