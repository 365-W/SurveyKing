(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5382],{64317:function(J,A,e){"use strict";var W=e(95395),F=e(99653),f=e(97445),p=e(67294),I=e(78729),K=e(22270),M=e(66758),N=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],b=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],v=p.forwardRef(function(r,y){var C=r.fieldProps,s=r.children,E=r.params,Z=r.proFieldProps,D=r.mode,x=r.valueEnum,g=r.request,O=r.showSearch,T=r.options,j=(0,f.Z)(r,N),B=(0,p.useContext)(M.Z);return p.createElement(I.Z,(0,W.Z)({mode:"edit",valueEnum:(0,K.h)(x),request:g,params:E,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({options:T,mode:D,showSearch:O,getPopupContainer:B.getPopupContainer},C),ref:y,proFieldProps:Z},j),s)}),U=p.forwardRef(function(r,y){var C=r.fieldProps,s=r.children,E=r.params,Z=r.proFieldProps,D=r.mode,x=r.valueEnum,g=r.request,O=r.options,T=(0,f.Z)(r,b),j=(0,F.Z)({options:O,mode:D||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},C),B=(0,p.useContext)(M.Z);return p.createElement(I.Z,(0,W.Z)({mode:"edit",valueEnum:(0,K.h)(x),request:g,params:E,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({getPopupContainer:B.getPopupContainer},j),ref:y,proFieldProps:Z},T),s)}),V=v,G=U,S=V;S.SearchSelect=G,S.displayName="ProFormComponent",A.Z=S},64080:function(J,A,e){"use strict";e.r(A),e.d(A,{default:function(){return w}});var W=e(57663),F=e(71577),f=e(3182),p=e(34792),I=e(48086),K=e(71194),M=e(50146),N=e(2824),b=e(94043),v=e.n(b),U=e(68489),V=e(57119),G=e(49101),S=e(70844),r=e(16894),y=e(93279),C=e(77613),s=e(67294),E=e(11849),Z=e(64317),D=e(95395),x=e(99653),g=e(97445),O=e(78729),T=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],j=s.forwardRef(function(n,h){var L=n.fieldProps,a=n.unCheckedChildren,l=n.checkedChildren,u=n.proFieldProps,R=(0,g.Z)(n,T);return s.createElement(O.Z,(0,D.Z)({valueType:"switch",mode:"edit",fieldProps:(0,x.Z)({unCheckedChildren:a,checkedChildren:l},L),ref:h,valuePropName:"checked",proFieldProps:u,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},R))}),B=j,z=e(15196),Q=e(71975),H=e(5966),t=e(85893),X=(0,C.P)(function(n){var h=n.onOk,L=n.onClose,a=n.position,l=n.readonly,u=(0,s.useRef)(),R=!!(a!=null&&a.id),m=(0,U.m2)();return(0,t.jsxs)(Q.Z,{title:R?a!=null&&a.id?"\u4FEE\u6539\u5C97\u4F4D":"\u65B0\u589E\u5C97\u4F4D":"\u67E5\u770B\u5C97\u4F4D",formRef:u,visible:!0,initialValues:a,submitter:{submitButtonProps:{style:{display:l?"none":"block"}}},drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){L()}},onFinish:function(){var o=(0,f.Z)(v().mark(function d(c){var i;return v().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,m.saveOrUpdatePosition((0,E.Z)((0,E.Z)({},a),c));case 2:i=P.sent,i.success&&h();case 4:case"end":return P.stop()}},d)}));return function(d){return o.apply(this,arguments)}}(),children:[(0,t.jsxs)(z.ZP.Group,{children:[(0,t.jsx)(H.Z,{name:"name",width:"md",label:"\u5C97\u4F4D\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u540D\u79F0",readonly:l,required:!0,rules:[{required:!0,message:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,t.jsx)(H.Z,{width:"md",readonly:l,name:"code",label:"\u5C97\u4F4D\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0,message:"\u5C97\u4F4D\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],required:!0})]}),(0,t.jsxs)(z.ZP.Group,{children:[(0,t.jsx)(Z.Z,{width:"md",readonly:l,request:(0,f.Z)(v().mark(function o(){return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",[{label:"\u672C\u4EBA",value:"SELF"},{label:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",value:"SELF_AND_SUB"},{label:"\u672C\u90E8\u95E8",value:"DEPT"},{label:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",value:"DEPT_AND_SUB"},{label:"\u5168\u90E8",value:"ALL"}]);case 1:case"end":return c.stop()}},o)})),name:"dataPermissionType",label:"\u6570\u636E\u6743\u9650"}),(0,t.jsx)(B,{name:"isVirtual",label:"\u662F\u5426\u865A\u62DF\u5C97",readonly:l})]})]})}),Y=(0,C.P)(function(){var n=(0,U.m2)(),h=(0,s.useRef)(),L=(0,s.useState)(),a=(0,N.Z)(L,2),l=a[0],u=a[1];(0,s.useEffect)(function(){n.loadPermissions()},[n]);var R=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"name",ellipsis:!0},{title:"\u7F16\u7801",dataIndex:"code",hideInSearch:!0},{title:"\u662F\u5426\u865A\u62DF\u5C97",dataIndex:"isVirtual",search:!1,render:function(o){return o?"\u662F":"\u5426"}},{title:"\u6570\u636E\u6743\u9650",dataIndex:"dataPermissionType",valueEnum:{SELF:"\u672C\u4EBA",SELF_AND_SUB:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",DEPT:"\u672C\u90E8\u95E8",DEPT_AND_SUB:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",ALL:"\u5168\u90E8"},hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(o,d){return[(0,t.jsx)("a",{onClick:function(){u({visible:!0,current:d,readonly:!0})},children:"\u8BE6\u60C5"},"readonly"),(0,t.jsx)(y.Z,{onSelect:function(i){i==="edit"&&u({current:d,visible:!0}),i==="delete"&&M.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u5C97\u4F4D?",icon:(0,t.jsx)(V.Z,{}),onOk:function(){n.deletePosition(d.id).then(function(P){if(P.success){var $;I.default.success("\u5220\u9664\u6210\u529F"),($=h.current)===null||$===void 0||$.reload()}})}})},menus:[{key:"edit",name:"\u7F16\u8F91"},{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];return(0,t.jsxs)(S.ZP,{title:!1,children:[(0,t.jsx)(r.ZP,{columns:R,actionRef:h,dataSource:n.positions,request:function(){var m=(0,f.Z)(v().mark(function o(d){return v().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",n.loadPositions(d));case 1:case"end":return i.stop()}},o)}));return function(o){return m.apply(this,arguments)}}(),columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:5},dateFormatter:"string",headerTitle:"\u5C97\u4F4D\u5217\u8868",toolBarRender:function(){return[(0,t.jsx)(F.Z,{icon:(0,t.jsx)(G.Z,{}),type:"primary",onClick:function(){u({visible:!0})},children:"\u65B0\u5EFA"},"button")]}}),(l==null?void 0:l.visible)&&(0,t.jsx)(X,{onClose:function(){u(void 0)},readonly:l.readonly,onOk:function(){var o;u(void 0),(o=h.current)===null||o===void 0||o.reload()},position:l.current})]})}),w=Y}}]);
