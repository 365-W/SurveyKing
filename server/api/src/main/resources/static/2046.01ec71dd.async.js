(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2046],{91220:function(p,T,e){"use strict";e.d(T,{Z:function(){return n}});var f=e(64254);function n(i,l){var u;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(u=(0,f.Z)(i))||l&&i&&typeof i.length=="number"){u&&(i=u);var j=0,E=function(){};return{s:E,n:function(){return j>=i.length?{done:!0}:{done:!1,value:i[j++]}},e:function(c){throw c},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,m=!1,t;return{s:function(){u=i[Symbol.iterator]()},n:function(){var c=u.next();return g=c.done,c},e:function(c){m=!0,t=c},f:function(){try{!g&&u.return!=null&&u.return()}finally{if(m)throw t}}}}},56853:function(p,T,e){"use strict";e.r(T),e.d(T,{default:function(){return L}});var f=e(94657),n=e(75625),i=e(67294),l=e(11849),u=e(83279),j=e(3182),E=e(54029),g=e(79166),m=e(94043),t=e.n(m),a=e(3980),c=e(27484),$=e.n(c),s=e(85893),x=function(b){var S=b.status;return S===0?(0,s.jsx)(g.Z,{status:"default",text:"\u672A\u5F00\u59CB"}):S===1?(0,s.jsx)(g.Z,{status:"processing",text:"\u8FDB\u884C\u4E2D"}):(0,s.jsx)(g.Z,{status:"success",text:"\u5DF2\u5B8C\u6210"})},R=function(b){var S=b.itemKey,W=(0,i.useState)([]),M=(0,f.Z)(W,2),A=M[0],I=M[1],v=(0,i.useRef)({current:1,pageSize:10});function D(y){return O.apply(this,arguments)}function O(){return O=(0,j.Z)(t().mark(function y(r){var C,d,h,K,G,H;return t().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return k&&!r&&A.length>0&&(v.current.current=v.current.current+1),B.next=3,a.hi.getWithPagination("/api/user/tasks",(0,l.Z)((0,l.Z)({},v.current),{},{type:S,current:r||v.current.current}));case 3:return C=B.sent,d=v.current,h=d.pageSize,K=h===void 0?10:h,G=d.total,H=G===void 0?0:G,r||(v.current=(0,l.Z)((0,l.Z)({},v.current),{},{total:C.total}),N(H/K>v.current.current)),B.abrupt("return",C.list);case 7:case"end":return B.stop()}},y)})),O.apply(this,arguments)}var P=(0,i.useState)(!0),o=(0,f.Z)(P,2),k=o[0],N=o[1],F=function(){var y=(0,j.Z)(t().mark(function r(){var C;return t().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,D();case 2:C=h.sent,I([].concat((0,u.Z)(A),(0,u.Z)(C)));case 4:case"end":return h.stop()}},r)}));return function(){return y.apply(this,arguments)}}(),Y=function(r){var C=new Date().getTime(),d=[];return S==="survey"?r.endTime&&C>r.endTime?d.push({key:"start",text:"\u95EE\u5377\u5DF2\u7ED3\u675F",danger:!0}):d.push({key:"start",text:"\u5F00\u59CB\u7B54\u5377",primary:!0,onClick:function(){window.open("/s/".concat(r.projectId))}}):r.examStartTime&&r.examStartTime>C?d.push({key:"start",text:"\u8003\u8BD5\u672A\u5F00\u59CB",danger:!0,primary:!0}):r.examEndTime&&C>r.examEndTime?r.status===2?d.push({key:"result",text:"\u67E5\u770B\u7ED3\u679C",primary:!0,onClick:function(){window.open("/s/".concat(r.projectId,"/exam-result/").concat(r.answerId))}}):d.push({key:"result",text:"\u8003\u8BD5\u5DF2\u7ED3\u675F",primary:!0}):r.status===2?d.push({key:"result",text:"\u67E5\u770B\u7ED3\u679C",primary:!0,onClick:function(){window.open("/s/".concat(r.projectId,"/exam-result/").concat(r.answerId))}}):(r.status===1||r.status===0)&&d.push({key:"start",text:"\u5F00\u59CB\u8003\u8BD5",primary:!0,onClick:function(){window.open("/s/".concat(r.projectId))}}),d.push({key:"cancel",text:"\u53D6\u6D88"}),d};return(0,s.jsx)("div",{style:{height:"100vh",overflowY:"scroll"},children:(0,s.jsxs)(n.t8,{onRefresh:(0,j.Z)(t().mark(function y(){var r;return t().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,D(1);case 2:r=d.sent,I([].concat((0,u.Z)(r),(0,u.Z)(A.filter(function(h){return!r.map(function(K){return K.projectId}).includes(h.projectId)}))));case 4:case"end":return d.stop()}},y)})),children:[(0,s.jsx)(n.aV,{children:A.map(function(y,r){return(0,s.jsx)(n.aV.Item,{onClick:function(){n.u_.show({content:y.name,closeOnAction:!0,actions:Y(y)})},extra:x(y),description:y.examStartTime?$()(y.examStartTime).format("YYYY-MM-DD HH:mm"):void 0,children:y.name},r)})}),(0,s.jsx)(n.v_,{loadMore:F,hasMore:k})]},S)})},w=R;function L(){var Z=(0,i.useRef)(null),b=[{key:"exam",title:"\u6211\u7684\u8003\u8BD5"},{key:"survey",title:"\u6211\u7684\u95EE\u5377"}],S=(0,i.useState)(0),W=(0,f.Z)(S,2),M=W[0],A=W[1];return(0,s.jsxs)("div",{className:"mobile-home",children:[(0,s.jsx)(n.mQ,{activeKey:b[M].key,onChange:function(v){var D,O=b.findIndex(function(P){return P.key===v});A(O),(D=Z.current)===null||D===void 0||D.swipeTo(O)},children:b.map(function(I){return(0,s.jsx)(n.mQ.Tab,{title:I.title},I.key)})}),(0,s.jsxs)(n.tq,{direction:"horizontal",loop:!0,indicator:function(){return null},ref:Z,defaultIndex:M,onIndexChange:function(v){A(v)},children:[(0,s.jsx)(n.tq.Item,{children:(0,s.jsx)("div",{className:"exam",children:(0,s.jsx)(w,{itemKey:"exam"})})}),(0,s.jsx)(n.tq.Item,{children:(0,s.jsx)("div",{className:"survey",children:(0,s.jsx)(w,{itemKey:"survey"})})})]})]})}},27561:function(p,T,e){var f=e(67990),n=/^\s+/;function i(l){return l&&l.slice(0,f(l)+1).replace(n,"")}p.exports=i},67990:function(p){var T=/\s/;function e(f){for(var n=f.length;n--&&T.test(f.charAt(n)););return n}p.exports=e},28583:function(p,T,e){var f=e(34865),n=e(98363),i=e(21463),l=e(98612),u=e(25726),j=e(3674),E=Object.prototype,g=E.hasOwnProperty,m=i(function(t,a){if(u(a)||l(a)){n(a,j(a),t);return}for(var c in a)g.call(a,c)&&f(t,c,a[c])});p.exports=m},23279:function(p,T,e){var f=e(13218),n=e(7771),i=e(14841),l="Expected a function",u=Math.max,j=Math.min;function E(g,m,t){var a,c,$,s,x,R,w=0,L=!1,Z=!1,b=!0;if(typeof g!="function")throw new TypeError(l);m=i(m)||0,f(t)&&(L=!!t.leading,Z="maxWait"in t,$=Z?u(i(t.maxWait)||0,m):$,b="trailing"in t?!!t.trailing:b);function S(o){var k=a,N=c;return a=c=void 0,w=o,s=g.apply(N,k),s}function W(o){return w=o,x=setTimeout(I,m),L?S(o):s}function M(o){var k=o-R,N=o-w,F=m-k;return Z?j(F,$-N):F}function A(o){var k=o-R,N=o-w;return R===void 0||k>=m||k<0||Z&&N>=$}function I(){var o=n();if(A(o))return v(o);x=setTimeout(I,M(o))}function v(o){return x=void 0,b&&a?S(o):(a=c=void 0,s)}function D(){x!==void 0&&clearTimeout(x),w=0,a=R=c=x=void 0}function O(){return x===void 0?s:v(n())}function P(){var o=n(),k=A(o);if(a=arguments,c=this,R=o,k){if(x===void 0)return W(R);if(Z)return clearTimeout(x),x=setTimeout(I,m),S(R)}return x===void 0&&(x=setTimeout(I,m)),s}return P.cancel=D,P.flush=O,P}p.exports=E},33448:function(p,T,e){var f=e(44239),n=e(37005),i="[object Symbol]";function l(u){return typeof u=="symbol"||n(u)&&f(u)==i}p.exports=l},7771:function(p,T,e){var f=e(55639),n=function(){return f.Date.now()};p.exports=n},14841:function(p,T,e){var f=e(27561),n=e(13218),i=e(33448),l=0/0,u=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,E=/^0o[0-7]+$/i,g=parseInt;function m(t){if(typeof t=="number")return t;if(i(t))return l;if(n(t)){var a=typeof t.valueOf=="function"?t.valueOf():t;t=n(a)?a+"":a}if(typeof t!="string")return t===0?t:+t;t=f(t);var c=j.test(t);return c||E.test(t)?g(t.slice(2),c?2:8):u.test(t)?l:+t}p.exports=m}}]);
