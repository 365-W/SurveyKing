(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2861],{13277:function(){},55686:function(pe,ee,m){"use strict";var P=m(11849),L=m(94233),C=m(51890),b=m(93224),w=m(89366),e=m(85893),Y=function(ne){var R=ne.user,M=(0,b.Z)(ne,["user"]);return!R||!R.avatar?(0,e.jsx)(C.C,(0,P.Z)({icon:(0,e.jsx)(w.Z,{}),size:M.size||"small"},M)):(0,e.jsx)(C.C,(0,P.Z)({src:"/api/public/preview/".concat(R.avatar),size:M.size||"small"},M))};ee.Z=Y},78210:function(pe,ee,m){"use strict";var P=m(15020),L=m(85893),C=function(w){var e=w.html,Y=e===void 0?"":e,ue=w.replaceP,ne=ue===void 0?!0:ue;return ne?(0,L.jsx)(L.Fragment,{children:typeof Y=="string"&&(0,P.ZP)(Y.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,L.jsx)(L.Fragment,{children:typeof Y=="string"&&(0,P.ZP)(Y)})};ee.Z=C},39017:function(pe,ee,m){"use strict";m.d(ee,{Rk:function(){return R},AK:function(){return C},Al:function(){return ue}});var P=m(67294),L=m(24004);function C(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",A=(0,P.useContext)(L.ZX),U=A.theme;return"survey-".concat(U)+M}function b(M,A){var U=(A&&A.depends||[]).reduce(function(T,J){return T||!J},!1);return w(U?void 0:function(T,J){return fetch(T,J).then(function(F){if(!!F.ok)return F.json()})},M,A||{})}function w(M){for(var A=arguments.length,U=new Array(A>1?A-1:0),T=1;T<A;T++)U[T-1]=arguments[T];var J=useState(0),F=_slicedToArray(J,2),ae=F[0],ve=F[1],k=useCallback(function(){ve(Math.random())},[]),se=useState({loading:!1,mutate:k}),B=_slicedToArray(se,2),I=B[0],H=B[1];return useEffect(function(){!M||U[1].manual&&ae===0||M.apply(null,U).then(function(S){S.code===200?H({loading:!1,data:S.data,mutate:k}):H({error:S.message,loading:!1,mutate:k})}).catch(function(S){H({error:S,loading:!1,mutate:k})})},e(ae,U)),I}function e(){for(var M=arguments.length,A=new Array(M),U=0;U<M;U++)A[U]=arguments[U];for(var T=[],J=0;J<arguments.length;J++){var F=arguments[J];if(F instanceof Array)for(var ae=0;ae<F.length;ae++)T=T.concat(e(F[ae]));else if(typeof URL!="undefined"&&F instanceof URL)T=T.concat(F.toJSON());else if(F instanceof Object)for(var ve=Object.keys(F),k=0;k<ve.length;k++){var se=ve[k];se==="depends"?T=T.concat(F[se]):T=T.concat([se]).concat(e(F[se]))}else T=T.concat(F)}return T}var Y=m(87998);function ue(){return(0,P.useContext)(Y.ZX)}function ne(){return useSurvey().attachments}function R(){var M=(0,P.useContext)(Y.ZX);return M.innerStore}},90063:function(pe,ee,m){"use strict";m.r(ee),m.d(ee,{default:function(){return mn}});var P=m(78210),L=m(87998),C=m(67294),b=m(39017),w=m(95522),e=m(85893);function Y(t){var n=t.schema,s=t.index,l=t.seqNo,r=(0,b.AK)("-body-questionSet"),u=(0,C.useContext)(L.ZX),h=u.questionNumber;return(0,e.jsxs)("div",{className:r,children:[(0,e.jsxs)("div",{className:r+"-title",children:[h?l||"".concat(s+1,"."):"",(0,e.jsx)(P.Z,{html:n.title})]}),t.children,(0,e.jsx)("div",{className:r+"-splitLine"})]})}(0,w.eC)("QuestionSet",Y,"antd");var ue=m(9715),ne=m(86835),R=m(94657),M=m(80937),A=m(48644),U=function(){var n=(0,b.AK)(),s=(0,C.useContext)(L.ZX),l=s.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(A.hl,{html:l.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(A.hl,{html:l.description})})]})},T=function(n){var s=(0,b.AK)();return(0,e.jsx)("div",{className:s+"-body",children:n.children})},J=m(57663),F=m(71577),ae=(0,M.Pi)(function(){var t,n,s=(0,b.AK)("-footer"),l=(0,C.useContext)(L.ZX),r=l.schema,u=l.loading,h=(0,b.Rk)(),d=h.pagination,i=d.pageSize>1,f=d.current===1,o=d.current===d.pageSize;return(0,e.jsxs)("div",{className:s,children:[o&&(0,e.jsx)("div",{className:s+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(A.hl,{html:r==null||(t=r.attribute)===null||t===void 0?void 0:t.suffix})}),(0,e.jsxs)("div",{className:s+"-pagination",children:[i&&!f&&(0,e.jsx)("div",{children:(0,e.jsx)(F.Z,{type:"primary",block:!0,onClick:function(){return h.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),i&&!o&&(0,e.jsx)("div",{children:(0,e.jsx)(F.Z,{type:"primary",block:!0,onClick:function(){return h.handleNext()},children:"\u4E0B\u4E00\u9875"})}),o&&(0,e.jsx)("div",{children:(0,e.jsx)(F.Z,{type:"primary",block:!0,onClick:function(){return h.submit()},loading:u,children:(0,e.jsx)(A.hl,{html:((n=r.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),i&&(0,e.jsxs)("div",{className:s+"-pagination-info",children:["\u7B2C",d.current,"\u9875/\u5171",d.pageSize,"\u9875"]})]})]})}),ve=m(47673),k=m(4107),se=m(39002),B=m(68351),I=m(14965),H=m(68318),S=m(77883),z=m(85482),me=m(29985),he=m(46842),re=m(64302),Ze=m(27484),K=m.n(Ze),xe=m(33852);K().locale("zh-cn");var ge="YYYY-MM-DD",de="YYYY-MM-DD HH:mm:ss",ye="HH:mm:ss";function te(t,n){if(!!t){if(n==="date")return K()(t,ge);if(n==="dateTime")return K()(t,de);if(n==="time")return K()(t,ye)}}var le=function(n){var s=n.onChange,l=n.type,r=n.value,u=n.suffix,h=n.style,d=h===void 0?{width:"100%"}:h;return l==="number"?(0,e.jsx)(z.Z,{onChange:s,value:r,style:d,addonAfter:u}):l==="date"?(0,e.jsx)(H.Z,{onChange:function(f,o){console.log(f),s(o)},value:te(r,l),style:d}):l==="dateTime"?(0,e.jsx)(H.Z,{showTime:!0,onChange:function(f,o){return s(o)},value:te(r,l),style:d}):l==="time"?(0,e.jsx)(B.Z,{value:te(r,l),onChange:function(f,o){return s(o)},style:d}):l==="mobile"?(0,e.jsx)(k.Z,{prefix:(0,e.jsx)(me.Z,{}),onChange:function(f){return s(f.target.value)},value:r}):l==="idCard"?(0,e.jsx)(k.Z,{prefix:(0,e.jsx)(he.Z,{}),onChange:function(f){return s(f.target.value)},value:r,style:d}):l==="email"?(0,e.jsx)(k.Z,{prefix:(0,e.jsx)(re.Z,{}),onChange:function(f){return s(f.target.value)},value:r,style:d}):(0,e.jsx)(k.Z,{onChange:function(f){return s(f.target.value)},value:r,suffix:u,style:d})},Ge=m(49111),be=m(19650),He=m(17672),Me=function(n){var s=n.onChange,l=(0,C.useRef)(null),r=(0,C.useRef)(),u=(0,C.useRef)(),h=(0,C.useState)(0),d=(0,R.Z)(h,2),i=d[0],f=d[1];return(0,C.useEffect)(function(){var o=l.current;if(o){var a,c=new He.Z(l.current);c.addEventListener("beginStroke",function(){f(1)}),r.current=c;var v=Math.max(window.devicePixelRatio||1,1);o.width=o.offsetWidth*v,o.height=o.offsetHeight*v,(a=o.getContext("2d"))===null||a===void 0||a.scale(v,v)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:u.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:l,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:i!==2?"block":"none"}}),i===2&&(0,e.jsx)("img",{src:u.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(be.Z,{children:[i===1&&(0,e.jsx)(F.Z,{type:"link",onClick:function(){var a;(a=r.current)===null||a===void 0||a.clear(),f(0)},children:"\u6E05\u7A7A"}),(i===0||i===1)&&(0,e.jsx)(F.Z,{type:"primary",disabled:i!==1,ghost:!0,size:"small",onClick:function(){var a;s(r.current.toDataURL()),u.current=(a=r.current)===null||a===void 0?void 0:a.toDataURL(),f(2)},children:"\u5B8C\u6210"}),i===2&&(0,e.jsx)(F.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var a;f(0),(a=r.current)===null||a===void 0||a.clear()},children:"\u91CD\u7B7E"})]})})]})]})},Le=m(3024),Re=(0,M.Pi)(function(){var t=(0,C.useContext)(L.ZX),n=t.progressBar,s=(0,b.AK)(),l=(0,b.Rk)(),r=l.progress;return n?(0,e.jsx)(Le.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:s+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(r*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),ze=m(71194),Ue=m(50146);function Se(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var oe=function(n){var s=n.onChange,l=n.value,r=n.mapMove,u=r===void 0?!1:r,h=n.optionId,d=(0,C.useRef)(null),i=(0,C.useRef)(),f=(0,C.useRef)(),o=(0,C.useRef)(),a=(0,C.useState)(function(){if(!!l){var D=l.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(D&&D.length>2)return[parseFloat(D[1]),parseFloat(D[2])]}}),c=(0,R.Z)(a,2),v=c[0],x=c[1],g=(0,C.useState)(function(){return Se(l)}),j=(0,R.Z)(g,2),p=j[0],y=j[1],E=(0,C.useState)(!1),O=(0,R.Z)(E,2),N=O[0],$=O[1],X=(0,C.useCallback)(function(D){f.current.getLocation(D,function(W,_){if(W==="complete"&&_.geocodes.length){var Q=_.geocodes[0].location;o.current.start(Q)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,C.useEffect)(function(){if(!!N){window["localMap".concat(h)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(fe){var De=new AMap.Map("map-".concat(h),{zoom:16,center:v,dragEnable:u,zoomEnable:u});if(i.current=De,u){var ke=new fe({mode:"dragMarker",map:De});ke.on("success",function(Ee){y(Ee.address),x([Ee.position.lng,Ee.position.lat])}),v?ke.start(v):ke.start(),De.panBy(0,1),o.current=ke}var xn=new AMap.Geocoder({city:"010"});f.current=xn;var gn=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});gn.getCurrentPosition(function(Ee,Ne){Ee=="complete"?(De.setCenter(Ne.position),y(Ne.formattedAddress),x([Ne.position.lng,Ne.position.lat])):console.error(Ne)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var D="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(h,"&plugin=AMap.Geocoder,AMap.Geolocation"),W=document.createElement("script");W.src=D,document.head.appendChild(W);var _="https://webapi.amap.com/ui/1.1/main-async.js",Q=document.createElement("script");Q.src=_,document.head.appendChild(Q)}},[N]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(k.Z.TextArea,{readOnly:!0,value:Se(l),onClick:function(){return $(!0)}}),(0,e.jsxs)(Ue.Z,{visible:N,onCancel:function(){$(!1)},onOk:function(){v&&s("".concat(p,"[").concat(v[0],", ").concat(v[1],"]")),$(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:u&&(0,e.jsx)(k.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(W){return X(W)}})}),(0,e.jsx)("div",{ref:d,id:"map-".concat(h),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:p})]})]})},Ae=function(n){var s,l=n.optionId,r=n.questionId,u=n.checked,h=n.checkedCount,d=(0,b.Al)(),i=d.statistics,f=i==null?void 0:i.questionStatistics[r],o=((f==null?void 0:f.optionStatistics.reduce(function(v,x){return v+x.count},0))||0)+h,a=(f==null||(s=f.optionStatistics.find(function(v){return v.optionId===l}))===null||s===void 0?void 0:s.count)||0;a=u?a+1:a;var c="".concat(Math.floor(a/o*1e3)/10,"%");return h===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[(0,e.jsxs)("span",{className:"vote-info-cnt ",children:[a,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:c}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:c}})})]})},je=function(n){var s=n.schema,l=n.type,r=s.attribute,u=r===void 0?{}:r,h=u.examCorrectAnswer,d=(0,b.Al)(),i=d.correctAnswerVisible,f=d.mode;return h&&i&&f==="exam"?l==="FillBlank"||l==="HorzBlank"||l==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:h}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},We=function(n){var s=n.schema,l=s.attribute,r=l===void 0?{}:l,u=r.examScore,h=(0,b.Al)(),d=h.mode,i=h.examScoreVisible;return u&&d==="exam"&&i?(0,e.jsxs)("span",{className:"question-score",children:["\uFF08",u,"\u5206\uFF09"]}):(0,e.jsx)(e.Fragment,{})},Xe=m(22385),Ie=m(61580),Z=m(11849),Ce=m(93224),Fe=m(94184),Pe=m.n(Fe),we=m(49914),jt=m(78338);function Ct(t){t=Number(t);var n=Math.floor(t/3600),s=Math.floor(t%3600/60),l=Math.floor(t%3600%60),r="".concat(n).padStart(2,"0"),u="".concat(s).padStart(2,"0"),h="".concat(l).padStart(2,"0");return"".concat(r,":").concat(u,":").concat(h)}function pt(t){return t<=60?"#ff4d4f":t<=180?"#faad14":"#52c41a"}var Zt=(0,M.Pi)(function(){var t,n,s=(0,we.H)(),l=(0,b.Rk)(),r=s.startTime,u=((t=s.project)===null||t===void 0||(n=t.setting.examSetting)===null||n===void 0?void 0:n.maxSubmitMinutes)||0,h=(0,C.useState)(0),d=(0,R.Z)(h,2),i=d[0],f=d[1],o=r+u*60*1e3,a=(0,C.useRef)();return(0,C.useEffect)(function(){if(u!==0)return a.current=window.setInterval(function(){f((o-new Date().getTime())/1e3)},1e3),function(){clearInterval(a.current)}},[o]),(0,C.useEffect)(function(){i<0&&(l.submit(),clearInterval(a.current))},[i]),u===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,e.jsx)(jt.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,e.jsx)("span",{style:{marginLeft:3,color:pt(i)},children:Ct(i)})]})}),Ke=(0,M.Pi)(function(t){var n=(0,b.Rk)(),s=n.props.answerSheetVisible,l=t.size,r=t.marked,u=r===void 0?!0:r,h=(0,Ce.Z)(t,["size","marked"]);return s?(0,e.jsx)(Ie.Z,{title:"\u6807\u8BB0",children:(0,e.jsx)("svg",(0,Z.Z)((0,Z.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:t.size||24,height:t.size||24,className:"marked"},h),{},{children:(0,e.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:u?"#EA4942":"#d8d8d8","p-id":"1287"})}))}):(0,e.jsx)(e.Fragment,{})}),yt=(0,M.Pi)(function(t){var n=(0,b.Rk)(),s=t.finished,l=t.id,r=t.marked,u=t.seqNo;return(0,e.jsxs)("div",{className:Pe()("answer-sheet-item",{marked:r,finished:s}),onClick:function(){return n.changePageIndex(l)},children:[u,r&&(0,e.jsx)(Ke,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),bt=(0,M.Pi)(function(){var t=(0,b.Rk)(),n=t.answerSheet;return(0,e.jsx)(e.Fragment,{children:n.filter(function(s){return s.display!=="none"}).map(function(s,l){return(0,C.createElement)(yt,(0,Z.Z)((0,Z.Z)({},s),{},{seqNo:l+1,key:s.id}))})})}),St=(0,M.Pi)(function(){var t=(0,b.Rk)(),n=t.answerSheet,s=n.filter(function(u){return u.finished}).length,l=n.filter(function(u){return!u.finished}).length,r=n.filter(function(u){return u.marked}).length;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:s})]}),(0,e.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:l})]}),(0,e.jsxs)("div",{className:"marked",children:[(0,e.jsx)(Ke,{size:18}),"\u6807\u8BB0",(0,e.jsx)("span",{style:{marginLeft:4},children:r})]})]})}),Pt=(0,M.Pi)(function(){return(0,e.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,e.jsx)(Zt,{})]})}),wt=(0,M.Pi)(function(){var t=(0,b.Rk)(),n=t.props.answerSheetVisible;return n?(0,e.jsxs)("div",{className:"answer-sheet",children:[(0,e.jsx)(Pt,{}),(0,e.jsx)("div",{className:"answer-sheet-content",children:(0,e.jsx)(bt,{})}),(0,e.jsx)("div",{className:"answer-sheet-footer",children:(0,e.jsx)(St,{})})]}):(0,e.jsx)(e.Fragment,{})});function Et(t){var n,s=t.schema,l=t.index,r=t.qsIndex,u=t.required,h=t.error,d=t.replaceTitle,i=t.seqNo,f=(0,C.useContext)(L.ZX),o=f.questionNumber,a=(0,b.AK)("-body-question"),c=(0,C.useState)(),v=(0,R.Z)(c,2),x=v[0],g=v[1],j=(0,b.Rk)(),p=(n=j.answerSheet.find(function(O){return O.id===s.id}))===null||n===void 0?void 0:n.marked;(0,C.useEffect)(function(){if(x){var O,N;(O=document.querySelector("[data-id='".concat(s.id,"']")))===null||O===void 0||O.classList.remove("ant-form-item-has-error"),(N=document.querySelector("[data-id='".concat(s.id,"']")))===null||N===void 0||N.querySelectorAll("[data-id]").forEach(function(fe){fe.classList.remove("ant-form-item-has-error")})}if(h.length>0){var $,X=h[0].split("^"),D=(0,R.Z)(X,2),W=D[0],_=D[1],Q;_?(Q=document.querySelector("[data-id='".concat(W,"']")),g(_)):(Q=document.querySelector("[data-id='".concat(s.id,"']")),g(W)),($=Q)===null||$===void 0||$.classList.add("ant-form-item-has-error")}else x&&g(void 0)},[h]);var y="";r!==void 0&&(y+=r+1+"-"),l!==void 0&&(y+=l+1+".");var E=function(){return x?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:x})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsx)("div",{className:a,children:(0,e.jsx)(ne.Z.Item,{label:(0,e.jsxs)("span",{className:a+"-header",children:[o?i||y:"",(0,e.jsx)(A.hl,{html:d||s.title}),(0,e.jsx)(We,{schema:s}),E(),(0,e.jsx)(Ke,{marked:p,onClick:function(){j.markQuestion(s.id,!p)}})]}),labelCol:{span:24},wrapperCol:{span:24},required:u,children:t.children})})}(0,w.eC)("Question",(0,M.Pi)(Et),"antd");var jn=m(84305),Nt=m(88182),Mt=m(82925);K().locale("zh-cn");function Rt(t){var n=t.headerVisible,s=t.footerVisible,l=t.schema,r=(0,b.AK)(),u=(0,b.Al)(),h=function(){var i,f=(i=l.attribute)===null||i===void 0?void 0:i.headerImage;if(f)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(f),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Pe()(r,{preview:u.isPreview}),children:[(0,e.jsx)(Re,{}),(0,e.jsx)("div",{className:r+"-banner",children:h()}),n&&(0,e.jsx)(U,{}),(0,e.jsx)(Nt.ZP,{locale:Mt.Z,children:(0,e.jsx)(T,{children:t.children})}),s&&(0,e.jsx)(ae,{}),(0,e.jsx)(wt,{})]})}(0,w.eC)("Survey",Rt,"antd");var Cn=m(13062),q=m(71230),pn=m(89032),G=m(15746),At=m(76826);function It(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=(0,b.AK)("-body-question");function d(i,f){r[i]=f,f===""&&delete r[i],s((0,Z.Z)({},r))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(i){var f=i.id,o=i.attribute,a=i.title,c=(0,At.Ck)(o==null?void 0:o.autoSize,[2,4]);return(0,e.jsxs)(q.Z,{style:{marginBottom:10},"data-id":f,children:[a&&(0,e.jsx)(G.Z,{className:h+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:h+"-option-title",children:i.title})},i.id),(0,e.jsx)(G.Z,{span:12,children:(0,e.jsx)(k.Z.TextArea,{autoSize:{minRows:c[1],maxRows:c[2]},value:r[f]||"",onChange:function(x){return d(f,x.target.value)}})})]},f)})})}(0,w.RM)("Textarea",It,"antd");var Zn=m(36877),Ft=m(96607);function $t(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=u===void 0?[]:u;function d(i){var f={};i.forEach(function(o,a){var c=h[a].id;f[c]=o}),s(f)}return(0,e.jsx)(q.Z,{children:(0,e.jsx)(G.Z,{span:12,children:(0,e.jsx)(Ft.Z,{value:h.map(function(i){return r[i.id]}).filter(function(i){return i}),style:{width:260},options:n.dataSource,onChange:d,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,w.RM)("Cascader",$t,"antd");function Ye(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=(0,b.AK)("-body-question");function d(i,f){r[i]=f,f===""&&delete r[i],s((0,Z.Z)({},r))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(i){var f=i.id,o=i.attribute,a=i.title,c=o==null?void 0:o.suffix,v=o==null?void 0:o.dataType;return(0,e.jsxs)(q.Z,{style:{marginBottom:10},"data-id":f,children:[a&&(0,e.jsx)(G.Z,{className:h+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:h+"-option-title",children:(0,e.jsx)(A.hl,{html:i.title})})},i.id),(0,e.jsxs)(G.Z,{span:12,children:[(0,e.jsx)(le,{type:v,value:r[f],onChange:function(g){return d(f,g)},suffix:c&&(0,e.jsx)("span",{className:h+"-option-suffix",children:(0,e.jsx)(A.hl,{html:c})})}),(0,e.jsx)(je,{schema:i,type:n.type})]})]},f)})})}(0,w.RM)("FillBlank",Ye,"antd"),(0,w.RM)("MultipleBlank",Ye,"antd");var $e=m(83279),yn=m(43358),Te=m(34041),ce=m(79521),ie=m(36602),Tt=m(54121),Ot=function(n){var s=(0,ie.XI)(200),l=(0,R.Z)(s,2),r=l[0],u=l[1],h=(0,ie.XI)(200),d=(0,R.Z)(h,2),i=d[0],f=d[1];return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},n.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:r,children:[n.cells.map(function(o){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getCellProps()),{},{className:"td","data-id":"".concat(n.i,"-").concat(o.column.id),children:o.render("Cell")}))}),n.onDelete&&(0,e.jsx)("div",{ref:i,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(Tt.Z,{onClick:function(){n.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:u||f?"visible":"hidden"}})})]}))};function Qe(t){var n=t.columns,s=t.data,l=t.onAdd,r=t.onDelete,u=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),h=(0,ce.useTable)({columns:n,data:s,defaultColumn:u},ce.useBlockLayout),d=h.getTableProps,i=h.getTableBodyProps,f=h.headerGroups,o=h.rows,a=h.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},d()),{},{className:"table",children:[(0,e.jsx)("div",{children:f.map(function(c){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},c.getHeaderGroupProps()),{},{className:"tr",children:c.headers.map(function(v){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},v.getHeaderProps()),{},{className:"th",children:v.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i()),{},{children:o.map(function(c,v){return a(c),(0,C.createElement)(Ot,(0,Z.Z)((0,Z.Z)({},c),{},{key:v,i:v,onDelete:r?function(){return r(v)}:void 0}))})})),l&&(0,e.jsx)("div",{className:"footer",onClick:l,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Je(t){var n=t.schema,s=t.onChange,l=t.value||[{}],r=n.children,u=r===void 0?[]:r,h=(0,C.useMemo)(function(){return u.map(function(d){var i;return{Header:(0,e.jsx)(P.Z,{html:d.title}),width:(i=d.attribute)===null||i===void 0?void 0:i.width,accessor:d.id,Cell:function(o){var a,c=o.value,v=o.row,x=o.data;if(((a=d.attribute)===null||a===void 0?void 0:a.dataType)==="select"){var g;return(0,e.jsx)(Te.Z,{placeholder:"\u8BF7\u9009\u62E9",value:c,style:{minWidth:80},onChange:function(p){x[v.index][d.id]=p},options:((g=d.dataSource)===null||g===void 0?void 0:g.map(function(j){return{label:j.label,value:j.value}}))||[]})}else return(0,e.jsx)(k.Z,{value:c,onChange:function(p){x[v.index][d.id]=p.target.value,s((0,$e.Z)(x))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Qe,{columns:h,data:l,onAdd:function(){l.push({}),s((0,$e.Z)(l))},onDelete:function(i){l.splice(i,1),s((0,$e.Z)(l))}})})}var Bt=function(n){var s=n.schema,l=n.value||[{},{}],r=s.children,u=r===void 0?[]:r,h=(0,C.useMemo)(function(){return u.map(function(d){var i;return{Header:(0,e.jsx)(P.Z,{html:d.title}),width:(i=d.attribute)===null||i===void 0?void 0:i.width,accessor:d.id,Cell:function(o){var a,c=o.value,v=o.row,x=o.data;if(((a=d.attribute)===null||a===void 0?void 0:a.dataType)==="select"){var g,j,p=((g=d.dataSource)===null||g===void 0||(j=g.find(function(y){return y.value===c}))===null||j===void 0?void 0:j.label)||"";return(0,e.jsx)("span",{children:p})}else return(0,e.jsx)("span",{children:c})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Qe,{columns:h,data:l})})};Je.Preview=Bt,(0,w.RM)("MatrixAuto",Je,"antd");function qe(t){var n=t.columns,s=t.data,l=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,ce.useTable)({columns:n,data:s,defaultColumn:l},ce.useBlockLayout),u=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,i=r.rows,f=r.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getHeaderProps()),{},{className:"th",children:a.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},h()),{},{children:i.map(function(o){return f(o),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getCellProps()),{},{className:"td","data-id":"".concat(o.original.rowId,"-").concat(a.column.id),children:a.render("Cell")}))})}))})}))]}))}function _e(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=u===void 0?[]:u,d=n.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var a,c=h.map(function(v){var x;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(x=v.attribute)===null||x===void 0?void 0:x.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,E=j.data;return(0,e.jsx)(le,{value:p,onChange:function(N){var $={};E.forEach(function(X,D){var W=X.title,_=X.rowId,Q=(0,Ce.Z)(X,["title","rowId"]);y.index===D&&(Q[v.id]=N),$[_]=Q}),s($)}})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=n.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),c},[]),o=i.map(function(a,c){var v=a.id,x=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:v},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(qe,{columns:f,data:o})})}var Dt=function(n){var s=n.schema,l=n.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var a,c=h.map(function(v){var x;return{Header:function(){return(0,e.jsx)(P.Z,{html:v.title})},width:(x=v.attribute)===null||x===void 0?void 0:x.width,accessor:v.id,Cell:function(j){var p=j.value;return(0,e.jsx)("span",{children:p})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(a=s.attribute)===null||a===void 0?void 0:a.width,accessor:"title"}),c},[]),o=i.map(function(a,c){var v=a.id,x=r[v]||{};return(0,Z.Z)({title:a.title,rowId:v},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(qe,{columns:f,data:o})})};_e.Preview=Dt,(0,w.RM)("MatrixFillBlank",_e,"antd");var bn=m(88983),Oe=m(47933);function et(t){var n=t.columns,s=t.data,l=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,ce.useTable)({columns:n,data:s,defaultColumn:l},ce.useBlockLayout),u=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,i=r.rows,f=r.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getHeaderProps()),{},{className:"th",children:a.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},h()),{},{children:i.map(function(o){return f(o),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getCellProps()),{},{className:"td",children:a.render("Cell")}))})}))})}))]}))}function tt(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=u===void 0?[]:u,d=n.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var a,c=h.map(function(v){var x;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(x=v.attribute)===null||x===void 0?void 0:x.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,E=j.data;return(0,e.jsx)("div",{onClick:function(){var N={};E.forEach(function($,X){var D=$.title,W=$.rowId,_=(0,Ce.Z)($,["title","rowId"]);y.index===X?(N[W]={},N[W][v.id]=!0):N[W]=_}),s(N)},children:(0,e.jsx)(Oe.ZP,{checked:!!p})})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=n.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),c},[]),o=i.map(function(a,c){var v=a.id,x=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:v},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(et,{columns:f,data:o})})}var kt=function(n){var s=n.schema,l=n.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var a,c=h.map(function(v){var x;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(x=v.attribute)===null||x===void 0?void 0:x.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,E=j.data;return p?(0,e.jsx)("div",{children:(0,e.jsx)(Oe.ZP,{checked:!!p,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=s.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),c},[]),o=i.map(function(a,c){var v=a.id,x=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:v},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(et,{columns:f,data:o})})};tt.Preview=kt,(0,w.RM)("MatrixRadio",tt,"antd");var Sn=m(63185),Be=m(9676);function nt(t){var n=t.columns,s=t.data,l=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,ce.useTable)({columns:n,data:s,defaultColumn:l},ce.useBlockLayout),u=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,i=r.rows,f=r.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getHeaderProps()),{},{className:"th",children:a.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},h()),{},{children:i.map(function(o){return f(o),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(a){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},a.getCellProps()),{},{className:"td",children:a.render("Cell")}))})}))})}))]}))}function at(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=u===void 0?[]:u,d=n.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var a,c=h.map(function(v){var x;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(x=v.attribute)===null||x===void 0?void 0:x.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,E=j.data;return(0,e.jsx)("div",{onClick:function(N){var $=!p,X={};E.forEach(function(D,W){var _=D.title,Q=D.rowId,fe=(0,Ce.Z)(D,["title","rowId"]);y.index===W&&($?fe[v.id]=!0:delete fe[v.id]),X[Q]=fe}),s(X)},children:(0,e.jsx)(Be.Z,{checked:!!p})})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=n.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),c},[]),o=i.map(function(a,c){var v=a.id,x=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:v},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(nt,{columns:f,data:o})})}var Ht=function(n){var s=n.schema,l=n.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var a,c=h.map(function(v){var x;return{Header:(0,e.jsx)(P.Z,{html:v.title}),width:(x=v.attribute)===null||x===void 0?void 0:x.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,E=j.data;return p?(0,e.jsx)("div",{children:(0,e.jsx)(Be.Z,{checked:!!p,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((a=s.attribute)===null||a===void 0?void 0:a.width)||150,accessor:"title"}),c},[]),o=i.map(function(a,c){var v=a.id,x=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(P.Z,{html:a.title}),rowId:v},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(nt,{columns:f,data:o})})};at.Preview=Ht,(0,w.RM)("MatrixCheckbox",at,"antd");var V=m(32059);function Lt(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=n.attribute,d=24/((h==null?void 0:h.columns)||1),i=(0,b.AK)("-body-question"),f=!!(h!=null&&h.statEnabled);function o(a,c,v){var x,g,j=(x=n.children)===null||x===void 0?void 0:x.find(function(y){return y.id===a}),p=j==null||(g=j.attribute)===null||g===void 0?void 0:g.dataType;c?r[a]=p?v:!0:delete r[a],s((0,Z.Z)({},r))}return(0,C.useEffect)(function(){u==null||u.forEach(function(a){var c;(c=a.attribute)!==null&&c!==void 0&&c.defaultChecked&&Object.keys(r).length===0&&s((0,V.Z)({},a.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(q.Z,{children:u==null?void 0:u.map(function(a){var c,v,x=a.title,g=a.id,j=(c=a.attribute)===null||c===void 0?void 0:c.dataType,p=(v=a.attribute)===null||v===void 0?void 0:v.suffix;return(0,e.jsxs)(G.Z,{span:d,className:i+"-option","data-id":g,children:[(0,e.jsxs)(Be.Z,{value:g,checked:r.hasOwnProperty(g),onChange:function(E){return o(g,E.target.checked)},children:[(0,e.jsx)(A.hl,{html:x}),(0,e.jsx)(je,{schema:a})]}),f&&(0,e.jsx)(Ae,{checked:!!r[g],optionId:g,questionId:n.id,checkedCount:Object.keys(r).length}),j&&(0,e.jsx)(le,{value:r[g],style:{maxWidth:120},type:j,onChange:function(E){return o(g,!0,E)},suffix:p&&(0,e.jsx)("span",{className:i+"-option-suffix",children:(0,e.jsx)(A.hl,{html:p})})})]},g)})})})}(0,w.RM)("Checkbox",Lt,"antd");function zt(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=u===void 0?[]:u;function d(i){var f,o=(f=n.children)===null||f===void 0?void 0:f.find(function(a){return a.id===i});o&&s((0,V.Z)({},i,!0))}return(0,C.useEffect)(function(){var i;(i=n.children)===null||i===void 0||i.forEach(function(f){var o,a=f.id;(o=f.attribute)!==null&&o!==void 0&&o.defaultChecked&&Object.keys(r).length===0&&s((0,V.Z)({},a,!0))})},[]),(0,e.jsx)(q.Z,{children:(0,e.jsx)(G.Z,{span:12,children:(0,e.jsx)(Te.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){s(void 0)},showSearch:!0,value:Object.keys(r)[0],filterOption:function(f,o){return(o==null?void 0:o.label).toLowerCase().indexOf(f.toLowerCase())!==-1},onChange:d,style:{width:260},options:h.map(function(i){return{label:i.title,value:i.id}})})})})}(0,w.RM)("Select",zt,"antd");var Ut=Oe.ZP.Group;function Wt(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=n.attribute,d=24/((h==null?void 0:h.columns)||1),i=(0,b.AK)("-body-question"),f=!!(h!=null&&h.statEnabled);function o(c){var v,x=c.target.value,g=(v=n.children)===null||v===void 0?void 0:v.find(function(E){return E.id===x});if(g){var j=g.id,p=g.attribute,y=p==null?void 0:p.dataType;s((0,V.Z)({},c.target.value,y?r[j]:!0))}}function a(c,v){s((0,V.Z)({},c,v))}return(0,C.useEffect)(function(){var c;(c=n.children)===null||c===void 0||c.forEach(function(v){var x,g=v.id,j=v.attribute,p=j==null?void 0:j.dataType;(x=v.attribute)!==null&&x!==void 0&&x.defaultChecked&&Object.keys(r).length===0&&s((0,V.Z)({},g,p?r[g]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(Ut,{onChange:o,value:Object.keys(r)[0],style:{width:"100%"},children:(0,e.jsx)(q.Z,{children:u==null?void 0:u.map(function(c){var v,x,g=c.title,j=c.id,p=(v=c.attribute)===null||v===void 0?void 0:v.dataType,y=(x=c.attribute)===null||x===void 0?void 0:x.suffix;return(0,e.jsxs)(G.Z,{span:d,className:i+"-option","data-id":j,children:[(0,e.jsxs)(Oe.ZP,{value:j,className:"radio-item",children:[(0,e.jsx)(A.hl,{html:g}),(0,e.jsx)(je,{schema:c})]}),f&&(0,e.jsx)(Ae,{checked:!!r[j],optionId:j,questionId:n.id,checkedCount:Object.keys(r).length}),p&&(0,e.jsx)(le,{value:r[j],type:p,style:{maxWidth:120},onChange:function(O){return a(j,O)},suffix:y&&(0,e.jsx)("span",{className:i+"-option-suffix",children:(0,e.jsx)(A.hl,{html:y})})})]},j)})})})})}(0,w.RM)("Radio",Wt,"antd");var Pn=m(48736),rt=m(27049);function it(t){var n=(0,b.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(rt.Z,{plain:!0})})}it.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,w.RM)("SplitLine",it,"antd");function st(t){var n=(0,b.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(A.hl,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}st.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,w.RM)("Remark",st,"antd");var wn=m(34792),Kt=m(48086),Vt=m(3182),En=m(43185),lt=m(11324),Gt=m(94043),ot=m.n(Gt),Xt=m(43347),Yt=lt.Z.Dragger;function ut(t){var n=t.schema,s=t.onChange,l=t.value,r=t.readOnly,u=n.children,h=(0,b.Al)(),d=(0,C.useState)(),i=(0,R.Z)(d,2),f=i[0],o=i[1];(0,C.useEffect)(function(){var v=n.children[0].id,x=l&&l[v]||[];f==null&&x.length>0&&ie.hi.loadFiles({ids:x}).then(function(g){o(g==null?void 0:g.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[l]);var a=function(){var v=(0,Vt.Z)(ot().mark(function x(g){var j,p,y,E;return ot().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:j=g.onSuccess,p=g.onError,y=g.file,E=g.onProgress,h.onUpload&&h.onUpload(y,function($){E&&E({percent:$.loaded/$.total*100})}).then(function($){if($.success&&j&&j($.data),!$.success&&p){var X=new Error("Some error");p({event:X})}});case 2:case"end":return N.stop()}},x)}));return function(g){return v.apply(this,arguments)}}(),c=function(x,g){if(o(x.fileList),(x.file.status==="removed"||x.file.status==="done")&&!x.fileList.find(function(p){return p.status!=="done"})){var j=x.fileList.filter(function(p){return p.status==="done"}).map(function(p){var y;return((y=p.response)===null||y===void 0?void 0:y.id)||p.uid});j.length===0?s(void 0):s((0,V.Z)({},g,j))}};return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(v){var x=v.id,g=v.attribute,j=[];if(g){var p=g.maxFileCount,y=g.maxFileSize,E=g.fileAccept;p&&j.push("\u6700\u591A\u4E0A\u4F20".concat(p,"\u4E2A")),y&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(y,"M\u4EE5\u5185")),E&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(E))}return(0,e.jsxs)(Yt,{multiple:!0,disabled:r,maxCount:(g==null?void 0:g.maxFileCount)||20,accept:g==null?void 0:g.fileAccept,beforeUpload:function(N){return g!=null&&g.maxFileSize&&N.size>g.maxFileSize*1024*1024?(Kt.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(g.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),lt.Z.LIST_IGNORE):!0},customRequest:a,onChange:function(N){return c(N,x)},fileList:f,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Xt.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},x)})})}var Qt=function(n){var s=n.value,l=(0,C.useState)(),r=(0,R.Z)(l,2),u=r[0],h=r[1];return(0,C.useEffect)(function(){if(s){var d=Object.values(s).reduce(function(i,f){return i.push.apply(i,(0,$e.Z)(f)),i},[]);ie.hi.loadFiles({ids:d}).then(function(i){h(i)})}},[s]),(0,e.jsx)("div",{className:"preview",children:u==null?void 0:u.map(function(d){return(0,e.jsx)("a",{onClick:function(){return ie.hi.download("/api/files/".concat(d.id))},children:d.originalName},d.id)})})};ut.Preview=Qt,(0,w.RM)("Upload",ut,"antd");var Nn=m(34669),Jt=m(54458);function dt(t){var n=t.schema,s=t.onChange,l=n.children,r=(0,b.Al)(),u=(0,C.useState)(0),h=(0,R.Z)(u,2),d=h[0],i=h[1];function f(o,a){var c="signature-".concat(a,"-").concat((0,L.kb)(6),".png");if(!r.onUpload){s((0,V.Z)({},a,[c]));return}fetch(o).then(function(v){return v.blob()}).then(function(v){var x=new File([v],c,{type:"image/png"});r.onUpload(x,function(g){i(g.loaded/g.total*100)}).then(function(g){g.success&&g.data.id&&s((0,V.Z)({},a,[g.data.id]))})})}return(0,e.jsx)("div",{children:l==null?void 0:l.map(function(o){var a=o.id,c=o.title;return(0,e.jsxs)(q.Z,{gutter:[10,0],"data-id":a,children:[c&&(0,e.jsx)(G.Z,{span:24},o.id),(0,e.jsxs)(G.Z,{span:24,children:[(0,e.jsx)(Me,{onChange:function(x){return f(x,a)}}),d>0&&d!==100&&(0,e.jsx)(Jt.Z,{percent:d,size:"small",showInfo:!1})]})]},a)})})}dt.Preview=function(t){var n=t.value,s;return n&&(s=Object.values(n)[0][0]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("img",{src:"/api/files/".concat(s)})})},(0,w.RM)("Signature",dt,"antd");var Mn=m(96433),Ve=m(2864),ct=m(41687),qt=m(46870),vt=m(18613),_t=m(57206),en={1:(0,e.jsx)(ct.Z,{}),2:(0,e.jsx)(ct.Z,{}),3:(0,e.jsx)(qt.Z,{}),4:(0,e.jsx)(vt.Z,{}),5:(0,e.jsx)(vt.Z,{})};function tn(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=u===void 0?[]:u;function d(f,o){s((0,V.Z)({},f,o))}var i=function(o){var a=o.attribute||{},c=o.id,v=a.scope,x=v===void 0?"[0,5]":v,g=a.scoreStyle,j=x.replace("[","").replace("]","").split(","),p=(0,R.Z)(j,2),y=p[0],E=p[1];return g==="heart"?(0,e.jsx)(Ve.Z,{defaultValue:parseInt(y),character:(0,e.jsx)(_t.Z,{}),style:{color:"#ea7463"},count:parseInt(E),onChange:function(N){return d(c,N)}},c):g==="smile"?(0,e.jsx)(Ve.Z,{defaultValue:parseInt(y),character:function(N){var $=N.index;return en[$+1]},count:parseInt(E),onChange:function(N){return d(c,N)}},c):(0,e.jsx)(Ve.Z,{defaultValue:parseInt(y),count:parseInt(E),onChange:function(N){return d(c,N)}},c)};return(0,e.jsx)(q.Z,{children:h.map(function(f){return i(f)})})}(0,w.RM)("Score",tn,"antd");var ht=m(55686),nn=Te.Z.Option;function ft(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),f=(0,R.Z)(i,2),o=f[0],a=f[1];function c(g){d&&s((0,V.Z)({},d,g))}var v=(0,ie.zE)(function(g){ie.hi.userSelect({name:g,selected:r[d]||[]}).then(function(j){j.success&&a(j.data)})},5),x=function(j){c(j?o.map(function(p){return p.userId}):void 0)};return(0,C.useEffect)(function(){var g;v(""),(g=n.children)===null||g===void 0||g.forEach(function(j){var p,y=j.id;(p=j.attribute)!==null&&p!==void 0&&p.defaultChecked&&Object.keys(r).length===0&&s((0,V.Z)({},y,!0))})},[]),(0,e.jsx)(q.Z,{children:(0,e.jsx)(G.Z,{span:12,children:(0,e.jsx)(Te.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,mode:"multiple",onClear:function(){s(void 0)},value:r[d]||[],onSearch:v,showSearch:!0,onChange:c,filterOption:!1,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(rt.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(Be.Z,{onChange:function(y){x(y.target.checked)},children:"\u5168\u9009"})})]})},children:o.map(function(g){return(0,e.jsx)(nn,{value:g.userId,label:g.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(ht.Z,{user:g,size:20})}),g.name," ",g.deptName&&"(".concat(g.deptName,")")]})},g.userId)})})})})}var an=function(n){var s=n.schema,l=n.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),f=(0,R.Z)(i,2),o=f[0],a=f[1];return(0,C.useEffect)(function(){ie.hi.userSelect({selected:r[d]||[],name:"^_^"}).then(function(c){c.success&&a(c.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(be.Z,{children:o.map(function(c){return(0,e.jsx)(Ie.Z,{title:c.name,children:(0,e.jsx)(ht.Z,{user:c,size:24})},c.userId)})})})};ft.Preview=an,(0,w.RM)("User",ft,"antd");var Rn=m(71153),rn=m(60331),An=m(62999),sn=m(54680),ln=m(60780),on=m.n(ln);function mt(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),f=(0,R.Z)(i,2),o=f[0],a=f[1];function c(x){d&&((x==null?void 0:x.length)===0?s(void 0):s((0,V.Z)({},d,x==null?void 0:x.map(function(g){return g.value}))))}var v=(0,C.useMemo)(function(){return on()(o.map(function(x){return{title:x.name,key:x.id,value:x.id,parentId:x.parentId}}),{parentProperty:"parentId",customID:"key"})},[o]);return(0,C.useEffect)(function(){ie.hi.deptSelect({}).then(function(x){x.success&&a(x.data)})},[]),(0,e.jsx)(q.Z,{children:(0,e.jsx)(G.Z,{span:12,children:(0,e.jsx)(sn.Z,{style:{width:"100%"},treeCheckable:!0,value:(r[d]||[]).map(function(x){return{value:x}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:v,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:c,showSearch:!1})})})}var un=function(n){var s=n.schema,l=n.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),f=(0,R.Z)(i,2),o=f[0],a=f[1];return(0,C.useEffect)(function(){ie.hi.deptSelect({selected:r[d]||[],name:"^_^"}).then(function(c){c.success&&a(c.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(be.Z,{children:o.map(function(c){return(0,e.jsx)(rn.Z,{color:"blue",children:c.name},c.id)})})})};mt.Preview=un,(0,w.RM)("Dept",mt,"antd");function dn(t){for(var n=[],s=2;s<t+2;s++)n.push(s/(t+2));return n}function cn(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)(function(){return r[d]||-1}),f=(0,R.Z)(i,2),o=f[0],a=f[1];function c(x){s((0,V.Z)({},d,x))}(0,C.useEffect)(function(){Object.keys(r).length>0&&a(r[d])},[r,d]);var v=function(g){var j=r[d],p=dn(o||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){a(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:[0,1,2,3,4,5,6,7,8,9,10].map(function(y){var E={background:"#2672ff",opacity:p[y]};return(0,e.jsx)("div",{className:"nps-item",style:o>=y?E:void 0,onMouseOver:function(){a(y)},onClick:function(){return c(y)},children:y},y)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,e.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]},g.id)};return(0,e.jsx)(q.Z,{children:h.map(function(x){return v(x)})})}(0,w.RM)("Nps",cn,"antd");var vn=m(91220);function xt(t,n,s){if(!t)return"";var l=RegExp("_{3,}","g"),r=t.matchAll(l),u=[],h=(0,vn.Z)(r),d;try{for(h.s();!(d=h.n()).done;){var i=d.value,f=i.index,o=i.index+i[0].length;u.push([f,o])}}catch(y){h.e(y)}finally{h.f()}if(u.length===0)return t;for(var a=u[0][0]===0?"":t.substring(0,u[0][0]),c=0;c<u.length;c++){var v=u[c],x=u[c+1],g=t.substring(v[0],v[1]),j=t.substring(v[1],x?x[0]:t.length),p=s?s[n[c].id]:"";a+='<input data-id="'.concat(n[c].id,`" value='`).concat(p,`' class="mod_fillblank" style="width: `).concat(12*g.length,'px;">'),a+=j}return a}function gt(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children,h=n.attribute,d=h===void 0?{}:h,i=d.content;function f(o,a){r[o]=a,a===""&&delete r[o],s((0,Z.Z)({},r))}return(0,C.useEffect)(function(){u==null||u.forEach(function(o){var a=document.querySelector("[data-id='".concat(o.id,"']"));if(a){var c=r[o.id];c&&(a.value=c),a.onchange=function(v){var x;f(o.id,(x=v.target)===null||x===void 0?void 0:x.value)}}})},[]),(0,C.useEffect)(function(){Object.keys(r).forEach(function(o){var a=r[o],c=document.querySelector("[data-id='".concat(o,"']"));a!==c.value&&(c.value=a===void 0?"":a)})},[r]),(0,e.jsx)("div",{children:(0,e.jsx)(P.Z,{html:xt(i,u),replaceP:!1})})}gt.Preview=function(t){var n=t.schema,s=t.value,l=n.children,r=n.attribute,u=r===void 0?{}:r,h=u.content;return(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("div",{children:(0,e.jsx)(P.Z,{html:xt(h,l,s),replaceP:!1})})})},(0,w.RM)("HorzBlank",gt,"antd");function hn(t){var n=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=n.children;function h(d,i){s((0,V.Z)({},i,d))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(d){var i=d.id,f=d.title,o=d.attribute,a=o===void 0?{}:o,c=a.mapMove;return(0,e.jsxs)(q.Z,{gutter:[10,0],"data-id":i,children:[f&&(0,e.jsx)(G.Z,{span:24},d.id),(0,e.jsx)(G.Z,{span:24,children:(0,e.jsx)(oe,{optionId:i,onChange:function(x){return h(x,i)},value:r[i],mapMove:c})})]},i)})})}(0,w.RM)("Address",hn,"antd");var fn=function(n){return(0,e.jsx)(e.Fragment,{children:n.children})},mn=fn},60331:function(pe,ee,m){"use strict";m.d(ee,{Z:function(){return se}});var P=m(96156),L=m(22122),C=m(28481),b=m(67294),w=m(94184),e=m.n(w),Y=m(98423),ue=m(54549),ne=m(65632),R=function(B,I){var H={};for(var S in B)Object.prototype.hasOwnProperty.call(B,S)&&I.indexOf(S)<0&&(H[S]=B[S]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var z=0,S=Object.getOwnPropertySymbols(B);z<S.length;z++)I.indexOf(S[z])<0&&Object.prototype.propertyIsEnumerable.call(B,S[z])&&(H[S[z]]=B[S[z]]);return H},M=function(I){var H,S=I.prefixCls,z=I.className,me=I.checked,he=I.onChange,re=I.onClick,Ze=R(I,["prefixCls","className","checked","onChange","onClick"]),K=b.useContext(ne.E_),xe=K.getPrefixCls,ge=function(le){he==null||he(!me),re==null||re(le)},de=xe("tag",S),ye=e()(de,(H={},(0,P.Z)(H,"".concat(de,"-checkable"),!0),(0,P.Z)(H,"".concat(de,"-checkable-checked"),me),H),z);return b.createElement("span",(0,L.Z)({},Ze,{className:ye,onClick:ge}))},A=M,U=m(98787),T=m(21790),J=function(B,I){var H={};for(var S in B)Object.prototype.hasOwnProperty.call(B,S)&&I.indexOf(S)<0&&(H[S]=B[S]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var z=0,S=Object.getOwnPropertySymbols(B);z<S.length;z++)I.indexOf(S[z])<0&&Object.prototype.propertyIsEnumerable.call(B,S[z])&&(H[S[z]]=B[S[z]]);return H},F=new RegExp("^(".concat(U.Y.join("|"),")(-inverse)?$")),ae=new RegExp("^(".concat(U.E.join("|"),")$")),ve=function(I,H){var S,z=I.prefixCls,me=I.className,he=I.style,re=I.children,Ze=I.icon,K=I.color,xe=I.onClose,ge=I.closeIcon,de=I.closable,ye=de===void 0?!1:de,te=J(I,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),le=b.useContext(ne.E_),Ge=le.getPrefixCls,be=le.direction,He=b.useState(!0),Me=(0,C.Z)(He,2),Le=Me[0],Re=Me[1];b.useEffect(function(){"visible"in te&&Re(te.visible)},[te.visible]);var ze=function(){return K?F.test(K)||ae.test(K):!1},Ue=(0,L.Z)({backgroundColor:K&&!ze()?K:void 0},he),Se=ze(),oe=Ge("tag",z),Ae=e()(oe,(S={},(0,P.Z)(S,"".concat(oe,"-").concat(K),Se),(0,P.Z)(S,"".concat(oe,"-has-color"),K&&!Se),(0,P.Z)(S,"".concat(oe,"-hidden"),!Le),(0,P.Z)(S,"".concat(oe,"-rtl"),be==="rtl"),S),me),je=function(we){we.stopPropagation(),xe==null||xe(we),!we.defaultPrevented&&("visible"in te||Re(!1))},We=function(){return ye?ge?b.createElement("span",{className:"".concat(oe,"-close-icon"),onClick:je},ge):b.createElement(ue.Z,{className:"".concat(oe,"-close-icon"),onClick:je}):null},Xe="onClick"in te||re&&re.type==="a",Ie=(0,Y.Z)(te,["visible"]),Z=Ze||null,Ce=Z?b.createElement(b.Fragment,null,Z,b.createElement("span",null,re)):re,Fe=b.createElement("span",(0,L.Z)({},Ie,{ref:H,className:Ae,style:Ue}),Ce,We());return Xe?b.createElement(T.Z,null,Fe):Fe},k=b.forwardRef(ve);k.displayName="Tag",k.CheckableTag=A;var se=k},71153:function(pe,ee,m){"use strict";var P=m(38663),L=m.n(P),C=m(13277),b=m.n(C)}}]);
