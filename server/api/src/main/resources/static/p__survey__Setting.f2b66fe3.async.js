(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1117],{89689:function(Se,K,t){"use strict";t.r(K),t.d(K,{Setting:function(){return Fe},default:function(){return Zt}});var ee=t(13062),b=t(71230),pe=t(89032),A=t(15746),re=t(34792),V=t(48086),Z=t(2824),S=t(80937),f=t(67294),te=(0,f.createContext)({});function le(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=(0,f.useContext)(te),n=u.prefixCls;return n+r}var St=t(58024),Y=t(39144),pt=t(22385),I=t(31097),Be=t(99008),O=t(84387),Bt=t(63185),e=t(85893),At=function(u){var n=u.children,s=_objectWithoutProperties(u,["children"]),a=function(i){return _jsx(_Checkbox,{checked:i.value,onChange:function(v){i.onChange(v.target.checked)},children:n})};return _jsx(Field,_objectSpread({component:[a]},s))},Pt=t(47673),Dt=function(u){var n=u.children,s=u.style,a=_objectWithoutProperties(u,["children","style"]),l=function(o){return _jsx(_Input,{value:o.value,style:s,onChange:function(h){o.onChange(h.target.value)},children:n})};return _jsx(Field,_objectSpread({component:[l]},a))},U=t(11849),Nt=t(71194),M=t(50146),It=t(57663),P=t(71577),Ot=t(77576),W=t(12028),oe=t(40520),G=t(54531),w=t(11628),Ae=function(u){var n=u.value,s=u.onChange,a=(0,f.useState)(!1),l=(0,Z.Z)(a,2),i=l[0],o=l[1],v=(0,w.IE)(),h=(0,f.useRef)(null);return console.log(n),(0,f.useEffect)(function(){console.log(n),n||o(!1)},[n]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u8BBE\u7F6E\u95EE\u5377\u9ED8\u8BA4\u7B54\u6848",(0,e.jsx)(I.Z,{overlay:"\u8BBE\u7F6E\u7684\u7B54\u6848\u5C06\u4F5C\u4E3A\u9ED8\u8BA4\u7B54\u6848\u5E26\u5165\u95EE\u5377",children:(0,e.jsx)(O.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(W.Z,{checked:!!n,onChange:function(m){m?o(!0):s(void 0)}})]}),(i||!!n)&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsx)(P.Z,{onClick:function(){return o(!0)},style:{marginLeft:10},type:"dashed",children:n?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),i&&(0,e.jsx)(M.Z,{visible:!0,onCancel:function(){return o(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){var m;s((0,G.ZN)((m=h.current)===null||m===void 0?void 0:m.getValues())),o(!1)},children:v.schema?(0,e.jsx)(oe.Z,{ref:h,initialValues:n,schema:v.schema,footerVisible:!1,onSubmit:function(m){console.log(m)}}):"\u95EE\u5377\u4E3A\u7A7A"})]})},Pe=function(u){return(0,e.jsx)(S.gN,(0,U.Z)({component:[Ae]},u))},De=t(74118),Ne=function(u){var n=u.value,s=u.onChange,a=(0,f.useState)(!1),l=(0,Z.Z)(a,2),i=l[0],o=l[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u9875\u9762",(0,e.jsx)(I.Z,{overlay:"\u4F60\u53EF\u4EE5\u5728\u8868\u5355\u63D0\u4EA4\u9875\u9762\u8BBE\u7F6E\u66F4\u4E3A\u4E30\u5BCC\u591A\u5F69\u7684\u5185\u5BB9\uFF0C\u5305\u62EC\u63D2\u5165\u56FE\u7247\u3001\u8BBE\u7F6E\u5B57\u53F7\u3001\u5B57\u4F53\u989C\u8272\u3001\u5E8F\u53F7\u3001\u8BBE\u7F6E\u8D85\u94FE\u63A5\u7B49\u7B49\u3002",children:(0,e.jsx)(O.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(W.Z,{checked:!!n,onChange:function(h){h?o(!0):s(void 0)}})]}),(i||!!n)&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsx)(P.Z,{onClick:function(){return o(!0)},style:{marginLeft:10},type:"dashed",children:n?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),i&&(0,e.jsx)(De.cM,{value:n,title:"\u63D0\u4EA4\u540E\u56FE\u6587\u5C55\u793A",width:750,onChange:function(h){s(h),o(!1)},onClose:function(){o(!1)}})]})},Ie=function(u){return(0,e.jsx)(S.gN,(0,U.Z)({component:[Ne]},u))},k=function(u){var n=function(a){return(0,e.jsx)(W.Z,{checked:a.value,onChange:function(i){a.onChange(i)}})};return(0,e.jsx)(S.gN,(0,U.Z)({component:[n]},u))},ce=t(93224),bt=t(77883),de=t(85482),wt=t(43358),T=t(97268),Oe=function(u){var n=u.value,s=u.onChange,a=u.title,l=u.tooltip,i=(0,f.useState)(!!n),o=(0,Z.Z)(i,2),v=o[0],h=o[1];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:[a,(0,e.jsx)(I.Z,{overlay:l,children:(0,e.jsx)(O.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(W.Z,{checked:!!n,onChange:function(m){m?(h(!0),s({limitFreq:"only",limitNum:1})):(h(!1),s(void 0))}})]}),v&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsxs)("div",{children:[(0,e.jsx)(T.Z,{style:{width:100},value:n==null?void 0:n.limitFreq,onChange:function(m){return s({limitFreq:m,limitNum:(n==null?void 0:n.limitNum)||1})},options:[{label:"\u53EA\u80FD",value:"only"},{label:"\u6BCF\u5C0F\u65F6",value:"hour"},{label:"\u6BCF\u5929",value:"day"},{label:"\u6BCF\u81EA\u7136\u5468",value:"week"},{label:"\u6BCF\u81EA\u7136\u6708",value:"month"},{label:"\u6BCF\u5B63\u5EA6",value:"quarter"},{label:"\u6BCF\u81EA\u7136\u5E74",value:"year"}]}),(0,e.jsx)("span",{style:{margin:"0 10px"},children:"\u7B54\u9898"}),(0,e.jsx)(de.Z,{min:1,max:9999,defaultValue:1,value:n==null?void 0:n.limitNum,onChange:function(m){return s({limitNum:m,limitFreq:(n==null?void 0:n.limitFreq)||"only"})}}),(0,e.jsx)("span",{style:{margin:"0 10px"},children:"\u6B21"})]})})]})})},ne=function(u){var n=u.name,s=u.basePath,a=(0,ce.Z)(u,["name","basePath"]);return(0,e.jsx)(S.gN,{component:[Oe,a],name:n,basePath:s})},Lt=function(){var u=function(s){var a=s.value,l=s.onChange;return a===1?_jsx(_Button,{type:"primary",icon:_jsx(CaretRightOutlined,{}),onClick:function(){return l(0)},children:"\u6B63\u5728\u56DE\u6536"}):_jsx(_Button,{type:"primary",danger:!0,icon:_jsx(PauseOutlined,{}),onClick:function(){return l(1)},children:"\u6682\u505C\u56DE\u6536"})};return _jsx(Field,{name:"status",component:[u],basePath:""})},Rt=t(59250),be=t(13013),Vt=t(30887),X=t(54689),J=t(3182),q=t(4107),we=t(94043),L=t.n(we),_=t(92592),$=t(86582),Ut=t(20136),Le=t(55241),kt=t(49111),z=t(19650),Re=t(54977),Ve=t(23538),Ue=t(73171),ke=t(71211),Te=q.Z.Search;function $e(r){return"".concat(window.location.origin,"/s/").concat(r)}var He=function(u){var n=u.item,s=u.onChange,a=u.onDelete,l=(0,w.IE)(),i=n.url,o=(0,f.useState)(""),v=(0,Z.Z)(o,2),h=v[0],d=v[1],m=(0,f.useRef)(null),C=(0,w.IE)(),g=(0,f.useState)(!1),F=(0,Z.Z)(g,2),D=F[0],N=F[1];(0,f.useEffect)(function(){function x(){return E.apply(this,arguments)}function E(){return E=(0,J.Z)(L().mark(function R(){return L().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:_.toDataURL(i,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(p){d(p)}).catch(function(p){console.error(p)});case 1:case"end":return j.stop()}},R)})),E.apply(this,arguments)}x()},[i]);var y=(0,f.useCallback)(function(){var x=(0,J.Z)(L().mark(function E(R){return L().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:_.toDataURL(i,{errorCorrectionLevel:"H",margin:5,width:R}).then(function(p){d(p);var B=document.createElement("a");B.href=p,B.setAttribute("download","".concat(l.name,"_").concat(R,".png")),document.body.appendChild(B),B.click(),document.body.removeChild(B)});case 1:case"end":return j.stop()}},E)}));return function(E){return x.apply(this,arguments)}}(),[i,l]);return(0,e.jsxs)("div",{style:{border:"1px solid #d9d9d9",margin:"5px 0",padding:"8px 4px"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(q.Z,{value:n.name,style:{width:200},placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",onChange:function(E){return s((0,U.Z)((0,U.Z)({},n),{},{name:E.target.value}))}}),(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(P.Z,{icon:(0,e.jsx)(Re.Z,{}),onClick:function(){return N(!0)}}),(0,e.jsx)(Le.Z,{content:(0,e.jsxs)("div",{children:[(0,e.jsx)("img",{src:h,height:150,width:150}),(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(P.Z,{size:"small",type:"link",onClick:function(){return y(256)},children:"\u5C0F\u53F7"}),(0,e.jsx)(P.Z,{size:"small",type:"link",onClick:function(){return y(512)},children:"\u4E2D\u53F7"}),(0,e.jsx)(P.Z,{size:"small",type:"link",onClick:function(){return y(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(l.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click"],children:(0,e.jsx)(P.Z,{icon:(0,e.jsx)(Ve.Z,{})})}),(0,e.jsx)(P.Z,{icon:(0,e.jsx)(Ue.Z,{}),onClick:function(){return a(n.id)}})]})]}),(0,e.jsx)(Te,{value:i,style:{margin:"5px 0 0 0"},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(l.id,"?id=").concat(n.id))}}),(0,e.jsx)(M.Z,{visible:D,onCancel:function(){return N(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){N(!1)},children:C.schema&&(0,e.jsx)(oe.Z,{ref:m,initialValues:n.value,schema:C.schema,footerVisible:!1,onSubmit:function(E){console.log(E)}})})]})},Me=function(u){var n=u.visible,s=u.onClose,a=(0,f.useState)([]),l=(0,Z.Z)(a,2),i=l[0],o=l[1],v=(0,w.IE)();return(0,e.jsxs)(M.Z,{visible:n,onCancel:s,title:"\u5E26\u503C\u94FE\u63A5\u8BBE\u7F6E",maskClosable:!1,bodyStyle:{maxHeight:360,overflow:"auto"},children:[i.map(function(h){return(0,e.jsx)(He,{item:h,onChange:function(m){var C=i.findIndex(function(g){return g.id===m.id});i.splice(C,1,m),o((0,$.Z)(i))},onDelete:function(m){o((0,$.Z)(i.filter(function(C){return C.id!==m})))}},h.id)}),(0,e.jsx)(P.Z,{block:!0,type:"primary",ghost:!0,onClick:function(){var d=(0,ke.Ox)();i.push({id:d,url:"".concat($e(v.id),"?id=").concat(d)}),o((0,$.Z)(i))},children:"\u6DFB\u52A0"})]})},We=q.Z.Search;function ze(r){return"".concat(window.location.origin,"/s/").concat(r)}var Qe=function(){var u=(0,w.IE)(),n=ze(u.id),s=(0,f.useState)(""),a=(0,Z.Z)(s,2),l=a[0],i=a[1],o=(0,f.useState)(!1),v=(0,Z.Z)(o,2),h=v[0],d=v[1];(0,f.useEffect)(function(){function g(){return F.apply(this,arguments)}function F(){return F=(0,J.Z)(L().mark(function D(){return L().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:_.toDataURL(n,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(x){i(x)}).catch(function(x){console.error(x)});case 1:case"end":return y.stop()}},D)})),F.apply(this,arguments)}g()},[n]);var m=(0,f.useCallback)(function(){var g=(0,J.Z)(L().mark(function F(D){return L().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:_.toDataURL(n,{errorCorrectionLevel:"H",margin:5,width:D}).then(function(x){i(x);var E=document.createElement("a");E.href=x,E.setAttribute("download","".concat(u.name,"_").concat(D,".png")),document.body.appendChild(E),E.click(),document.body.removeChild(E)});case 1:case"end":return y.stop()}},F)}));return function(F){return g.apply(this,arguments)}}(),[n,u]),C=(0,e.jsxs)(X.Z,{onClick:function(F){return m(parseInt(F.key))},children:[(0,e.jsx)(X.Z.Item,{children:"\u5C0F\u53F7"},256),(0,e.jsx)(X.Z.Item,{children:"\u4E2D\u53F7"},512),(0,e.jsx)(X.Z.Item,{children:"\u5927\u53F7"},1024)]});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsx)("span",{children:"\u95EE\u5377\u94FE\u63A5"}),(0,e.jsx)(We,{value:n,style:{width:300},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(u.id))}})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:10},children:[(0,e.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:100,height:100},children:(0,e.jsx)("img",{src:l,height:95,width:95})}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,e.jsx)(be.Z,{overlay:C,placement:"bottomLeft",children:(0,e.jsx)(P.Z,{children:"\u4E0B\u8F7D\u4E8C\u7EF4\u7801"})}),(0,e.jsxs)(P.Z,{type:"primary",ghost:!0,style:{marginTop:10,visibility:"hidden"},onClick:function(){return d(!0)},children:["\u5E26\u503C\u94FE\u63A5",(0,e.jsx)(I.Z,{overlay:"\u94FE\u63A5\u6DFB\u52A0\u53C2\u6570\uFF0C\u5C06\u81EA\u52A8\u5E94\u7528\u4E3A\u95EE\u5377\u7684\u7B54\u6848\u3002",children:(0,e.jsx)(O.Z,{className:"setting-prompt",style:{color:"#1891ff"}})})]})]}),(0,e.jsx)(Me,{visible:h,onClose:function(){return d(!1)}})]})]})},Tt=t(14965),Ke=t(77121),Ye=t(30381),Ge=t.n(Ye),Xe=function(u){var n=u.value,s=u.onChange,a=u.title,l=u.tooltip,i=u.type,o=i===void 0?"text":i,v=u.prefix,h=u.suffix,d=u.style,m=(0,f.useState)(n!==void 0),C=(0,Z.Z)(m,2),g=C[0],F=C[1];(0,f.useEffect)(function(){n!==void 0&&F(!0)},[n]);var D=function(){return o==="datepicker"?(0,e.jsx)(Ke.Z,{value:n?Ge()(n):void 0,showTime:!0,style:d,onChange:function(x){s(x?x==null?void 0:x.valueOf():void 0)}}):o==="number"?(0,e.jsx)(de.Z,{value:n,onChange:function(x){return s(x)},style:(0,U.Z)({width:200},d)}):(0,e.jsx)(q.Z,{value:n,onChange:function(x){return s(x.target.value)},style:(0,U.Z)({width:200},d)})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:[a,(0,e.jsx)(I.Z,{overlay:l,children:(0,e.jsx)(O.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(W.Z,{checked:n!==void 0,onChange:function(y){y?(F(!0),s("")):(F(!1),s(void 0))}})]}),g&&(0,e.jsxs)("div",{className:"setting-item-content",children:[v,D(),h]})]})})},ue=function(u){var n=u.name,s=u.basePath,a=(0,ce.Z)(u,["name","basePath"]);return(0,e.jsx)(S.gN,{component:[Xe,a],name:n,basePath:s})},ve=t(25782),Je=t(69816),qe=function(){var u=function(s){var a=s.value,l=s.onChange;return a===1?(0,e.jsx)(P.Z,{type:"primary",icon:(0,e.jsx)(ve.Z,{}),onClick:function(){return l(0)},children:"\u6B63\u5728\u56DE\u6536"}):(0,e.jsx)(P.Z,{type:"primary",danger:!0,icon:(0,e.jsx)(Je.Z,{}),onClick:function(){return l(1)},children:"\u6682\u505C\u56DE\u6536"})};return(0,e.jsx)(S.gN,{component:[u],name:"status",basePath:""})};V.default.config({duration:1,maxCount:1});var _e=(0,S.Pi)(function(){var r=(0,S.cI)();return(0,e.jsx)(S.RV,{form:r,children:(0,e.jsx)(S.Wo,{name:"answerSetting",children:(0,e.jsx)("div",{children:(0,e.jsxs)(Y.Z,{title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(Be.Z,{style:{marginRight:10}}),"\u95EE\u5377\u663E\u793A"]}),className:"answer-setting",extra:(0,e.jsx)(qe,{}),children:[(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u5F00\u542F\u81EA\u52A8\u6682\u5B58",(0,e.jsx)(I.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u53EF\u4EE5\u81EA\u52A8\u4FDD\u5B58\u672C\u6B21\u672A\u63D0\u4EA4\u7684\u586B\u5199\u5185\u5BB9\uFF0C\u518D\u6B21\u6253\u5F00\u95EE\u5377\u53EF\u663E\u793A\u4E0A\u6B21\u672A\u63D0\u4EA4\u7684\u586B\u5199\u5185\u5BB9\u3002",children:(0,e.jsx)(O.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(k,{name:"autoSave"})]})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u663E\u793A\u9898\u76EE\u5E8F\u53F7",(0,e.jsx)(I.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u95EE\u5377\u4E2D\u7684\u9898\u76EE\u4F1A\u6309\u6392\u5217\u987A\u5E8F\u4ECE1\u5F00\u59CB\u663E\u793A\u9898\u76EE\u5E8F\u53F7\u3002",children:(0,e.jsx)(O.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(k,{name:"questionNumber"})]})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u663E\u793A\u8FDB\u5EA6\u6761",(0,e.jsx)(I.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u586B\u5199\u8005\u6ED1\u52A8\u9875\u9762\u53EF\u4EE5\u770B\u5230\u5F53\u524D\u95EE\u5377\u586B\u5199\u8FDB\u5EA6\u3002",children:(0,e.jsx)(O.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(k,{name:"progressBar"})]})}),(0,e.jsx)(Pe,{name:"initialValues"})]})})})})}),$t=t(54421),se=t(38272),Ht=t(94233),he=t(51890),Mt=t(71153),ie=t(60331),Wt=t(48736),et=t(27049),zt=t(62999),me=t(51753),Qt=t(18106),fe=t(67164),H=t(68489),tt=t(60780),nt=t.n(tt),ut=t(49101),st=T.Z.Option,it=(0,S.Pi)(function(r){var u=r.onChange,n=r.orgTreeData,s=r.positions,a=(0,f.useState)(),l=(0,Z.Z)(a,2),i=l[0],o=l[1],v=(0,f.useState)(),h=(0,Z.Z)(v,2),d=h[0],m=h[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(b.Z,{gutter:10,children:[(0,e.jsx)(A.Z,{span:16,children:(0,e.jsx)(me.Z,{onChange:function(g){return o(g)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:[{title:"\u53D1\u8D77\u4EBA\u5F53\u524D\u90E8\u95E8",value:"${currentOrgId}",key:"${currentOrgId}"},{title:"\u53D1\u8D77\u4EBA\u4E0A\u7EA7\u90E8\u95E8",value:"${parentOrgId}",key:"${parentOrgId}"}].concat((0,$.Z)(n)),placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0,value:i})}),(0,e.jsx)(A.Z,{span:8,children:(0,e.jsx)(T.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",allowClear:!0,value:d,onChange:function(g){return m(g)},children:s.map(function(C){return(0,e.jsx)(st,{value:C.id,children:C.name},C.id)})})})]}),(0,e.jsx)(b.Z,{style:{marginTop:10},children:(0,e.jsx)(A.Z,{children:(0,e.jsx)(P.Z,{icon:(0,e.jsx)(ut.Z,{}),onClick:function(){(i||d)&&u("P:".concat(i||"",":").concat(d||""))},children:"\u6DFB\u52A0"})})})]})}),ae=fe.Z.TabPane,xe=T.Z.Option,at=(0,S.Pi)(function(r){var u=r.onChange,n=r.tabs,s=n===void 0?["user","role","position"]:n,a=(0,H.m2)(),l=(0,f.useState)(r.value||[]),i=(0,Z.Z)(l,2),o=i[0],v=i[1];(0,f.useEffect)(function(){v(r.value||[])},[r.value]);var h=(0,H.LF)(o),d=a.depts,m=a.users,C=a.roles,g=a.positions,F=(0,f.useState)(),D=(0,Z.Z)(F,2),N=D[0],y=D[1];(0,f.useEffect)(function(){N&&a.loadUsers({orgId:N,pageSize:1024})},[N,a]);var x=(0,f.useMemo)(function(){return nt()(d.map(function(c){return{value:c.id,title:c.name,key:c.id,parentId:c.parentId}}),{parentProperty:"parentId",customID:"value"})},[d]),E=function(j){var p=(0,$.Z)(o);j.forEach(function(B){p.includes(B)||p.push(B)}),v(p),u(p)},R=function(){for(var j=arguments.length,p=new Array(j),B=0;B<j;B++)p[B]=arguments[B];var Q=(0,$.Z)(o.filter(function(Ze){return!p.includes(Ze)}));v(Q),u(Q)};return(0,e.jsx)("div",{style:{width:400},children:(0,e.jsxs)(fe.Z,{defaultActiveKey:"user",children:[(0,e.jsx)(ae,{tab:"\u6210\u5458",disabled:!s.includes("user"),children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsxs)(b.Z,{gutter:20,children:[(0,e.jsx)(A.Z,{span:16,children:(0,e.jsx)(me.Z,{onChange:function(j){return y(j)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:x,placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0})}),(0,e.jsx)(A.Z,{span:8,children:(0,e.jsx)(T.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",allowClear:!0,showSearch:!0,mode:"multiple",onChange:function(j){return E(j)},maxTagCount:0,value:o.filter(function(c){return c.startsWith("U:")}),dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(et.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8},children:(0,e.jsx)(P.Z,{size:"small",type:"link",onClick:function(){return E(m.map(function(B){return"U:".concat(B.id)}))},children:"\u5168\u9009"})})]})},children:m.map(function(c){return(0,e.jsx)(xe,{value:"U:".concat(c.id),children:c.name},c.id)})})})]}),(0,e.jsx)(z.Z,{style:{marginTop:20},wrap:!0,children:o.filter(function(c){return c.startsWith("U:")}).map(function(c){return(0,e.jsx)(ie.Z,{closable:!0,color:"blue",onClose:function(){return R(c)},children:h.user[c.split(":")[1]]},c)})})]})},"user"),(0,e.jsx)(ae,{tab:"\u89D2\u8272",disabled:!s.includes("role"),children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsx)(T.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",allowClear:!0,showSearch:!0,mode:"multiple",value:o.filter(function(c){return c.startsWith("R:")}),onChange:function(j){return E(j)},maxTagCount:0,children:C.map(function(c){return(0,e.jsx)(xe,{value:"R:".concat(c.id),children:c.name},c.id)})}),(0,e.jsx)(z.Z,{style:{marginTop:20},wrap:!0,children:o.filter(function(c){return c.startsWith("R:")}).map(function(c){return(0,e.jsx)(ie.Z,{closable:!0,color:"blue",onClose:function(){return R(c)},children:h.role[c.split(":")[1]]},c)})})]})},"role"),(0,e.jsx)(ae,{tab:"\u673A\u6784\u5C97\u4F4D",disabled:!s.includes("position"),children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsx)(it,{positions:g,orgTreeData:x,onChange:function(j){return E([j])}}),(0,e.jsx)(z.Z,{style:{marginTop:20},wrap:!0,children:o.filter(function(c){return c.startsWith("P:")}).map(function(c){var j=c.split(":"),p=(0,Z.Z)(j,3),B=p[1],Q=p[2];return(0,e.jsxs)(ie.Z,{closable:!0,color:"blue",onClose:function(){return R(c)},children:[h.org[B],"-",h.position[Q]]},B+":"+Q)})})]})},"position")]})})}),rt=at,lt=t(37809),ot=function(u){var n=(0,f.useState)([]),s=(0,Z.Z)(n,2),a=s[0],l=s[1];return(0,e.jsx)(M.Z,{title:"\u8BBE\u7F6E\u534F\u4F5C\u7BA1\u7406\u5458",visible:!0,onCancel:u.onCancel,onOk:function(){return u.onOk(a)},children:(0,e.jsx)(rt,{tabs:["user"],onChange:function(o){l(o.map(function(v){return v.split(":")[1]}))}})})},ct=function(){var u=(0,w.IE)(),n=u.id,s=(0,f.useState)([]),a=(0,Z.Z)(s,2),l=a[0],i=a[1],o=(0,f.useState)(!1),v=(0,Z.Z)(o,2),h=v[0],d=v[1],m=function(){return H.hi.getProjectPartner(n).then(function(g){g&&i(g)})};return(0,f.useEffect)(function(){m()},[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(Y.Z,{className:"answer-setting",title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(lt.Z,{}),(0,e.jsxs)("div",{children:["\u534F\u4F5C\u7BA1\u7406\u5458\u5217\u8868",(0,e.jsx)(I.Z,{overlay:"\u534F\u4F5C\u8005\u53EF\u4EE5\u534F\u52A9\u521B\u5EFA\u8005\u8FDB\u884C\u7F16\u8F91\u95EE\u5377\u3001\u7BA1\u7406\u6570\u636E\u7B49\u64CD\u4F5C\u3002",children:(0,e.jsx)(O.Z,{className:"setting-prompt",style:{marginLeft:5}})})]})]}),extra:(0,e.jsx)("a",{href:"#",onClick:function(){return d(!0)},children:"\u8BBE\u7F6E\u534F\u4F5C\u7BA1\u7406\u5458"}),children:(0,e.jsx)(se.ZP,{itemLayout:"horizontal",dataSource:l,renderItem:function(g){var F,D;return(0,e.jsxs)(se.ZP.Item,{actions:g.type!==1?[(0,e.jsx)("a",{onClick:function(){var y;M.Z.confirm({title:"\u5220\u9664\u534F\u4F5C\u8005",content:(0,e.jsxs)("div",{children:["\u786E\u5B9A\u5220\u9664\u534F\u4F5C\u8005 ",(0,e.jsx)("b",{children:(y=g.user)===null||y===void 0?void 0:y.name}),"\u5417\uFF1F"]}),onOk:function(){H.hi.deleteProjectPartner(g.id,n).then(function(E){E.success&&m()})}})},children:"\u5220\u9664"},"list-loadmore-edit")]:[],children:[(0,e.jsx)(se.ZP.Item.Meta,{avatar:(0,e.jsx)(he.C,{src:(F=g.user)!==null&&F!==void 0&&F.avatar?"/api/public/preview/".concat(g.user.avatar):""}),title:(D=g.user)===null||D===void 0?void 0:D.name}),(0,e.jsx)("div",{children:g.type===1?"\u521B\u5EFA\u8005":"\u534F\u4F5C\u8005"})]})}})}),h&&(0,e.jsx)(ot,{onCancel:function(){return d(!1)},onOk:function(g){H.hi.addProjectPartner({userIds:g,projectId:n}).then(function(){m(),d(!1)})}})]})},dt=t(56931),vt=(0,S.Pi)(function(){return(0,e.jsx)(S.Wo,{name:"submittedSetting",children:(0,e.jsx)("div",{children:(0,e.jsxs)(Y.Z,{title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(dt.Z,{}),"\u6295\u653E\u4E0E\u5206\u4EAB"]}),className:"submitted-setting",children:[(0,e.jsx)(Ie,{name:"contentHtml"}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsx)(Qe,{})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u5141\u8BB8\u4FEE\u6539\u7B54\u6848",(0,e.jsx)(I.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u518D\u6B21\u6253\u5F00\u95EE\u5377\u4F1A\u56DE\u663E\u4E4B\u524D\u586B\u5199\u7684\u7B54\u6848\uFF0C\u5E76\u4E14\u53EF\u4EE5\u4FEE\u6539\u3002",children:(0,e.jsx)(O.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(k,{name:"enableUpdate"})]})})]})})})}),ge=t(1603);V.default.config({duration:1,maxCount:1});var ht=(0,S.Pi)(function(){return(0,e.jsx)("div",{children:(0,e.jsxs)(Y.Z,{title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(ge.Z,{style:{marginRight:10}}),"\u56DE\u6536\u8BBE\u7F6E"]}),className:"answer-setting",children:[(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u9700\u8981\u767B\u5F55",(0,e.jsx)(I.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u53EA\u6709\u767B\u5F55\u7528\u6237\u624D\u53EF\u4EE5\u586B\u5199\u95EE\u5377\u3002",children:(0,e.jsx)(O.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(k,{name:"loginRequired",basePath:"answerSetting"})]})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsx)("span",{children:"\u53EA\u80FD\u5FAE\u4FE1\u586B\u5199"}),(0,e.jsx)(k,{name:"wechatOnly",basePath:"answerSetting"})]})}),(0,e.jsx)(ue,{name:"password",basePath:"answerSetting",title:"\u51ED\u5BC6\u7801\u586B\u5199",tooltip:"\u53EA\u6709\u8F93\u5165\u5BC6\u7801\u624D\u80FD\u586B\u5199\u95EE\u5377"}),(0,e.jsx)(ne,{name:"cookieLimit",basePath:"answerSetting",title:"\u6BCF\u53F0\u7535\u8111\u6216\u624B\u673A\u7B54\u9898\u6B21\u6570\u9650\u5236",tooltip:"\u6839\u636E cookie \u8FDB\u884C\u9650\u5236"}),(0,e.jsx)(ne,{name:"ipLimit",basePath:"answerSetting",title:"\u6BCF\u4E2AIP\u7B54\u9898\u6B21\u6570\u9650\u5236",tooltip:"\u6839\u636E IP \u8FDB\u884C\u9650\u5236"}),(0,e.jsx)(ne,{name:"loginLimit",basePath:"answerSetting",title:"\u6BCF\u4E2A\u767B\u5F55\u8D26\u53F7\u7B54\u9898\u6B21\u6570\u9650\u5236",tooltip:"\u6839\u636E\u767B\u5F55\u8D26\u53F7\u8FDB\u884C\u9650\u5236"}),(0,e.jsx)(ue,{name:"endTime",basePath:"answerSetting",title:"\u8BBE\u7F6E\u95EE\u5377\u7ED3\u675F\u65F6\u95F4",type:"datepicker"}),(0,e.jsx)(ue,{name:"maxAnswers",basePath:"answerSetting",title:"\u8BBE\u7F6E\u95EE\u5377\u56DE\u6536\u4E0A\u9650",type:"number",prefix:"\u56DE\u6536",suffix:"\u4EFD\u95EE\u5377\u540E\uFF0C\u505C\u6B62\u6536\u96C6",style:{width:80,margin:"0 5px"}})]})})}),je=t(64031),mt=(0,S.Pi)(function(){var r=le("-content"),u=(0,w.IE)(),n=u.setting,s=(0,f.useMemo)(function(){return(0,je.Np)({initialValues:u.setting,effects:function(){(0,je.ge)("*",function(l){var i=l.address.toString();console.log(i);var o=i.split("."),v=(0,Z.Z)(o,2),h=v[0],d=v[1];u.setting&&u.setting[h]&&(d?u.setting[h][d]=l.value:u.setting[h]=l.value),H.hi.updateSetting({id:u.id,settingKey:i,settingValue:l.value}).then(function(m){m.success&&V.default.info("\u4FDD\u5B58\u4E2D")})})}})},[]);return(0,f.useEffect)(function(){n&&s.setInitialValues(n)},[n,s]),(0,e.jsx)(S.RV,{form:s,children:(0,e.jsx)("div",{className:r,children:(0,e.jsxs)(b.Z,{gutter:[2,2],children:[(0,e.jsx)(A.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(_e,{})}),(0,e.jsx)(A.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(ht,{})}),(0,e.jsx)(A.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(vt,{})}),(0,e.jsx)(A.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(ct,{})})]})})})}),Kt=t(7359),Ce=t(27279),Ee=t(8212),ft=t(50206),xt=t(94184),gt=t.n(xt),ye=Ce.Z.Panel,jt=[{key:"answerSetting",title:"\u6570\u636E\u6536\u96C6\u8BBE\u7F6E",icon:(0,e.jsx)(Ee.Z,{}),description:"\u57FA\u672C\u7684\u95EE\u5377\u586B\u5199\u8BBE\u7F6E"},{key:"answerLimitSetting",title:"\u7B54\u9898\u9650\u5236",icon:(0,e.jsx)(Ee.Z,{}),description:"\u95EE\u5377\u7B54\u9898\u9650\u5236"},{key:"memberSetting",title:"\u534F\u540C\u7F16\u8F91",icon:(0,e.jsx)(ft.Z,{}),description:"\u8BBE\u7F6E\u534F\u4F5C\u7BA1\u7406\u5458"},{key:"submittedSetting",title:"\u63D0\u4EA4\u95EE\u5377\u6570\u636E\u540E",icon:(0,e.jsx)(ge.Z,{}),description:"\u95EE\u5377\u63D0\u4EA4\u5B8C\u6210\u9875\u9762\u8BBE\u7F6E"}],Yt=(0,S.Pi)(function(){var r=le("-nav"),u=(0,f.useContext)(te),n=u.settingStore,s=n.activePanel;return(0,e.jsx)("div",{className:r,children:(0,e.jsxs)(Ce.Z,{accordion:!0,expandIcon:function(l){var i=l.isActive;return(0,e.jsx)(ve.Z,{rotate:i?90:0})},defaultActiveKey:"1",children:[(0,e.jsx)(ye,{header:"\u57FA\u7840\u8BBE\u7F6E",style:{padding:0},children:jt.map(function(a){return(0,e.jsxs)(b.Z,{className:gt()("nav-panel-item",{active:s===a.key}),onClick:function(){return n.activePanel=a.key},children:[(0,e.jsx)(A.Z,{span:4,children:(0,e.jsx)(he.C,{icon:a.icon,shape:"square"})}),(0,e.jsx)(A.Z,{span:20,children:(0,e.jsxs)(b.Z,{children:[(0,e.jsx)(A.Z,{span:24,children:a.title}),(0,e.jsx)(A.Z,{span:24,style:{fontSize:12,color:"#8c8c8c"},children:a.description})]})})]},a.key)})},"1"),(0,e.jsx)(ye,{header:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)("p",{children:"todo"})},"2")]})})}),Ct=t(69610),Et=t(54941),yt=function(){function r(u){(0,Ct.Z)(this,r),this.rootStore=void 0,this.activePanel=void 0,this.rootStore=u,this.activePanel="answerSetting",this.makeObservable()}return(0,Et.Z)(r,[{key:"makeObservable",value:function(){(0,G.Ou)(this,{rootStore:G.LO.ref,activePanel:G.LO.ref})}}]),r}(),Ft=t(77613),Fe=(0,Ft.P)(function(){var r=(0,w.IE)(),u=(0,f.useMemo)(function(){return new yt(r)},[r]);return(0,e.jsx)(te.Provider,{value:{prefixCls:"survey-setting",settingStore:u},children:(0,e.jsx)("div",{className:"survey-setting",children:(0,e.jsx)(mt,{})})})}),Zt=Fe},11628:function(Se,K,t){"use strict";t.d(K,{xI:function(){return b},Ge:function(){return re},IE:function(){return A}});var ee=t(67294),b=(0,ee.createContext)({}),pe=b.Provider;function A(){var V=(0,ee.useContext)(b);return V.store}function re(){var V=A();return V.flowStore}}}]);
