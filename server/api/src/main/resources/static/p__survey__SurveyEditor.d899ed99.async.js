(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3487,1997],{55686:function($t,At,c){"use strict";var He=c(11849),ae=c(94233),m=c(51890),A=c(93224),Ce=c(89366),r=c(85893),Et=function(S){var Be=S.user,D=(0,A.Z)(S,["user"]);return!Be||!Be.avatar?(0,r.jsx)(m.C,(0,He.Z)({icon:(0,r.jsx)(Ce.Z,{}),size:D.size||"small"},D)):(0,r.jsx)(m.C,(0,He.Z)({src:"/api/public/preview/".concat(Be.avatar),size:D.size||"small"},D))};At.Z=Et},1997:function($t,At,c){"use strict";c.d(At,{ML:function(){return st},tC:function(){return qt},sJ:function(){return et},ZP:function(){return hn}});var He=c(71194),ae=c(50146),m=c(57663),A=c(71577),Ce=c(49111),r=c(19650),Et=c(77576),Mt=c(12028),S=c(22385),Be=c(31097),D=c(402),Y=c(97272),be=c(67294),Pe=c(94184),e=c.n(Pe),$e=c(94657),yt=c(29656),H=c(63138),qe=c(88386),$=c(85893),kt=(0,be.forwardRef)(function(X,Q){var me=X.value,le=X.readOnly,ge=X.placeholder,ee=(0,be.useState)(),tt=(0,$e.Z)(ee,2),Re=tt[0],ht=tt[1];(0,be.useEffect)(function(){Re&&Re.focus()},[Re]),(0,be.useImperativeHandle)(Q,function(){return{getValue:function(){return Re.getValue()},focus:function(){Re.focus()},getDoc:function(){return Re.getDoc()}}});var Ft=(0,be.useMemo)(function(){return{mode:"text/x-spreadsheet",line:!0,lineWrapping:!0,readOnly:le,placeholder:ge}},[le]),ut=function(Le,rt,je,ct,Ye){var we=Le.getDoc(),mt=document.createElement("span");mt.innerText=ct.title||ct.path,mt.className="formula-tag ".concat(Ye||"formula-tag-value"),we.markText(rt,je,{replacedWith:mt})},Bt=function it(Le,rt,je){var ct=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];(ct||[]).forEach(function(Ye){for(var we="#{".concat(Ye.path,"}"),mt=new RegExp(we,"g");mt.exec(rt)!==null;){var an={line:je,ch:mt.lastIndex-we.length},Dt={line:je,ch:mt.lastIndex};ut(Le,an,Dt,Ye)}for(we="#{_".concat(Ye.path,"}"),mt=new RegExp(we,"g");mt.exec(rt)!==null;){var pt={line:je,ch:mt.lastIndex-we.length},We={line:je,ch:mt.lastIndex};ut(Le,pt,We,Ye,"formula-tag-text")}Ye.children&&Ye.children.length>0&&it(Le,rt,je,Ye.children)})},lt=function(Le,rt){var je=rt.split(`
`);je.forEach(function(ct,Ye){return Bt(Le,ct,Ye,X.variable)})},Pt=function(Le,rt){ht(Le),me!=null&&me!==""&&lt(Le,rt)},wt=function(Le,rt,je){(je!=null||je!=="")&&lt(Le,je),X.onChange&&X.onChange(je)};return(0,$.jsx)("div",{className:e()("formula-editor-content",{readOnly:le}),children:(0,$.jsx)(yt.Rt,{autoCursor:!1,value:me,options:Ft,editorDidMount:Pt,onChange:wt})})}),st=kt,U=c(47673),Rt=c(4107),Qt=c(83279),L=c(18106),ot=c(67164),Se=c(20136),se=c(55241),De=c(7359),ie=c(27279),fe=ie.Z.Panel,Fe=Y.Z.Link;function he(X,Q,me){if(X.popover){var le,ge;return(0,$.jsx)(se.Z,{content:(0,$.jsxs)("div",{className:"fn-popover-content",children:[(0,$.jsxs)("div",{className:"fn-popover-content-header",children:["\u516C\u5F0F\u7B80\u4ECB",(0,$.jsx)(Fe,{href:X.popover.docHref,target:"_blank",children:"\u6587\u6863"})]}),(le=X.popover)===null||le===void 0?void 0:le.content]}),title:(ge=X.popover)===null||ge===void 0?void 0:ge.title,placement:"right",className:"fn-popover",children:(0,$.jsxs)("div",{className:"function-item",onClick:function(){return me&&me(X.name)},children:[(0,$.jsx)("div",{className:"function-item__name",children:X.name}),(0,$.jsx)("div",{className:"function-item__desc",children:X.description})]})},Q)}return(0,$.jsxs)("div",{className:"function-item",onClick:function(){return me&&me(X.name)},children:[(0,$.jsx)("div",{className:"function-item__name",children:X.name}),(0,$.jsx)("div",{className:"function-item__desc",children:X.description})]},Q)}var Ne=function(Q){var me=Q.dataSource,le=me===void 0?[]:me,ge=Q.check,ee="function-store";return(0,$.jsx)(ie.Z,{className:ee,bordered:!1,defaultActiveKey:[0],expandIconPosition:"right",ghost:!0,children:le.map(function(tt,Re){return(0,$.jsx)(fe,{className:"".concat(ee,"-group"),header:tt.name,children:tt.functions.map(function(ht,Ft){return he(ht,Ft,ge)})},Re)})})},de=Ne,ye=c(11849),Ie=function(X){return(0,$.jsx)("svg",(0,ye.Z)((0,ye.Z)({width:"1em",height:"1.2em",viewBox:"0 0 24 24"},X),{},{children:(0,$.jsx)("path",{d:"M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 0 1 2 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3c.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 0 1 4.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41l-2.83 2.83l-2.83-2.83l-1.43 1.41l2.85 2.85l-2.85 2.81l1.43 1.41l2.83-2.83l2.83 2.83L22 19.31l-2.83-2.81L22 13.65z",fill:"currentColor"})}))},re=function(X){return(0,$.jsx)("svg",(0,ye.Z)((0,ye.Z)({width:"1em",height:"1em",viewBox:"0 0 16 16"},X),{},{children:(0,$.jsx)("g",{fill:"currentColor",children:(0,$.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5h2V4H1.5l-.5.5v8l.5.5H4v-1H2V5zm12.5-1H12v1h2v7h-2v1h2.5l.5-.5v-8l-.5-.5zm-2.74 2.57L12 7v2.51l-.3.45l-4.5 2h-.46l-2.5-1.5l-.24-.43v-2.5l.3-.46l4.5-2h.46l2.5 1.5zM5 9.71l1.5.9V9.28L5 8.38v1.33zm.58-2.15l1.45.87l3.39-1.5l-1.45-.87l-3.39 1.5zm1.95 3.17l3.5-1.56v-1.4l-3.5 1.55v1.41z"})})}))},ne=c(32157),oe=c(32138),_=c(57254),ze=function(Q){var me=Q.id,le=Q.type,ge=Q.title,ee=Q.pick,tt=(0,be.useMemo)(function(){return le==="SplitLine"},[]);return(0,$.jsx)("div",{className:e()("field-variable",{disabled:tt}),onClick:function(){ee&&ee()},children:ge})},ft=ze;function Me(X,Q){return{title:(0,$.jsx)(ft,{type:X.type,id:X.id,title:X.title,pick:function(){return Q&&Q(X)}}),key:X.id,children:(X.children||[]).map(function(me){return Me(me,Q)})}}var Kt=function(Q){var me=Q.dataSource,le=Q.pick,ge=(0,be.useMemo)(function(){return me.map(function(ee){return Me(ee,le)})},[le]);return(0,$.jsx)(oe.Z,{blockNode:!0,defaultExpandAll:!0,showLine:{showLeafIcon:!1},switcherIcon:(0,$.jsx)(_.Z,{}),className:"hide-file-icon",treeData:ge,selectable:!1})},zt=Kt,nn=c(76570),bt=c(54421),Xt=c(38272),St=function(Q){var me=Q.check,le=Q.dataSource;return(0,$.jsx)(Xt.ZP,{bordered:!1,dataSource:le,className:"function-store-group",renderItem:function(ee){return(0,$.jsx)(Xt.ZP.Item,{children:he(ee,ee.name,me)})}})},Ee=St,Ve=ot.Z.TabPane,Tt=function(Q){var me=Q.variables,le=me===void 0?[]:me,ge=Q.insertFun,ee=Q.insertVariable,tt=Q.functionVisible,Re=tt===void 0?!0:tt,ht=Q.helperVariables,Ft="formula-editor-toolbar",ut=(0,be.useState)([]),Bt=(0,$e.Z)(ut,2),lt=Bt[0],Pt=Bt[1],wt=(0,be.useCallback)(function(Le){return(0,$.jsxs)("span",{children:[Le.icon?(0,$.jsx)("span",{role:"img",className:"anticon",children:Le.icon}):null,Le.name]})},[]),it=function(rt){var je;if(!rt){Pt([]);return}var ct=new Set;Pt(((je=Q.functions)===null||je===void 0?void 0:je.reduce(function(Ye,we){return Ye.push.apply(Ye,(0,Qt.Z)(we.functions.filter(function(mt){return mt.name.includes(rt.toUpperCase())}))),Ye},[]).filter(function(Ye){return ct.has(Ye.name)?!1:(ct.add(Ye.name),!0)}))||[])};return(0,$.jsx)("div",{className:Ft,children:(0,$.jsxs)(ot.Z,{defaultActiveKey:"field",centered:Re,children:[(0,$.jsx)(Ve,{tab:(0,$.jsx)(wt,{name:"\u95EE\u9898",icon:(0,$.jsx)(re,{})}),children:(0,$.jsx)("div",{children:(0,$.jsx)(zt,{dataSource:le,pick:ee})})},"field"),ht&&(0,$.jsx)(Ve,{tab:(0,$.jsx)(wt,{name:"\u547D\u540D\u53D8\u91CF",icon:(0,$.jsx)(re,{})}),children:(0,$.jsx)("div",{children:(0,$.jsx)(zt,{dataSource:ht,pick:ee})})},"helperFiled"),Re&&(0,$.jsxs)(Ve,{tab:(0,$.jsx)(wt,{name:"\u51FD\u6570",icon:(0,$.jsx)(Ie,{})}),children:[(0,$.jsx)(Rt.Z,{placeholder:"\u641C\u7D22\u516C\u5F0F",prefix:(0,$.jsx)(nn.Z,{}),allowClear:!0,onChange:function(rt){return it(rt.target.value)}}),lt.length>0&&(0,$.jsx)(Ee,{dataSource:lt,check:ge}),lt.length===0&&(0,$.jsx)(de,{dataSource:Q.functions,check:ge})]},"fx")]})})};function at(X){for(var Q=arguments.length,me=new Array(Q>1?Q-1:0),le=1;le<Q;le++)me[le-1]=arguments[le];return(0,$.jsxs)("div",{className:"fn-popover-title",children:[X,"(",me.map(function(ge,ee){return(0,$.jsxs)("span",{className:"fn-popover-arg",children:[ge," ",ee===me.length-1?"":","]},ee)}),")"]})}var ke="https://support.microsoft.com/zh-cn/office/",Ue=[{name:"\u903B\u8F91",functions:[{name:"IF",description:"\u6839\u636E\u5224\u65AD\u6761\u4EF6\uFF0C\u8FD4\u56DE\u6B63\u786E\u6216\u9519\u8BEF\u7684\u503C"},{name:"AND",description:"\u8FD4\u56DE\u903B\u8F91\u503C\uFF1A\u5982\u679C\u6240\u6709\u53C2\u6570\u503C\u5747\u4E3A\u903B\u8F91\u201Ctrue\u201D\uFF0C\u5219\u8FD4\u56DE\u903B\u8F91\u201Ctrue\u201D\uFF0C\u53CD\u4E4B\u8FD4\u56DE\u903B\u8F91\u201Cfalse",popover:{title:at("AND","logical1","logical2","..."),content:(0,$.jsxs)("div",{className:"fn-popover-content",children:["\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Afalse\uFF0C\u5373\u8FD4\u56DE false\uFF1B",(0,$.jsx)("br",{})," \u53EA\u6709\u5F53\u6240\u6709\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u624D\u8FD4\u56DE true\u3002",(0,$.jsx)("br",{}),"logical:\u903B\u8F91\u503C\uFF0C\u4F8B\u5982\uFF0C2>1\u7684\u903B\u8F91\u503C\u4E3A true"]})}},{name:"OR",description:"\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u5373\u8FD4\u56DEtrue\uFF1B\u53EA\u6709\u5F53\u6240\u6709\u903B\u8F91\u53C2\u6570\u503C\u4E3Afalse\uFF0C\u624D\u8FD4\u56DEfalse"},{name:"XOR",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u6570\u7684\u5F02\u6216\u503C"},{name:"NOT",description:"\u5BF9\u53C2\u6570\u903B\u8F91\u503C\u6C42\u53CD"}]},{name:"\u6587\u5B57",functions:[{name:"SUBSTITUTE",description:"\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text",popover:{title:at("SUBSTITUTE","old_text","new_text","[instance_num]"),content:(0,$.jsxs)("div",{className:"fn-popover-content",children:["\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text\u3002",(0,$.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u6307\u5B9A\u7684\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 SUBSTITUTE\uFF1B",(0,$.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u7279\u5B9A\u4F4D\u7F6E\u5904\u7684\u4EFB\u610F\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 REPLACE\u3002"]}),docHref:"".concat(ke,"substitute-\u51FD\u6570-6434944e-a904-4336-a9b0-1e58df3bc332")}},{name:"CONCATENATE",description:"\u5C06\u591A\u4E2A\u6587\u5B57\u5408\u5E76"},{name:"LEFT",description:"\u4ECE\u5DE6\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"RIGHT",description:"\u4ECE\u53F3\u8FB9\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"MID",description:"\u622A\u53D6\u6307\u5B9A\u4F4D\u7F6E\u7684\u6587\u5B57"},{name:"REPLACE",description:"\u66FF\u6362\u6587\u672C\u4E2D\u7684\u6307\u5B9A\u6587\u5B57",popover:{title:at("REPLACE","old_text","start_num","num_chars","new_text"),content:(0,$.jsxs)("div",{className:"fn-popover-content",children:["\u6839\u636E\u6307\u5B9A\u7684\u5B57\u7B26\u6570\uFF0CREPLACE \u5C06\u90E8\u5206\u6587\u672C\u5B57\u7B26\u4E32\u66FF\u6362\u4E3A\u4E0D\u540C\u7684\u6587\u672C\u5B57\u7B26\u4E32\u3002",(0,$.jsx)("br",{}),"REPLACEB \u4F7F\u7528\u5176\u4ED6\u6587\u672C\u5B57\u7B26\u4E32\u5E76\u6839\u636E\u6240\u6307\u5B9A\u7684\u5B57\u8282\u6570\u66FF\u6362\u67D0\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7684\u90E8\u5206\u6587\u672C\u3002"]}),docHref:"".concat(ke,"replace-replaceb-\u51FD\u6570-8d799074-2425-4a8a-84bc-82472868878a")}},{name:"TRIM",description:"\u79FB\u9664\u6587\u5B57\u5934\u5C3E\u7684\u7A7A\u683C"},{name:"LEN",description:"\u540E\u53BB\u6587\u5B57\u7684\u957F\u5EA6"},{name:"LOWER",description:"\u8F6C\u6210\u5C0F\u5199\u6587\u5B57"},{name:"UPPER",description:"\u8F6C\u6210\u5927\u5199\u6587\u5B57"}]},{name:"\u6570\u5B57",functions:[{name:"AVERAGE",description:"\u8BA1\u7B97\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u7684\u5E73\u5747\u503C"},{name:"COUNT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u6570\u5B57\u7684\u6570\u91CF"},{name:"COUNTA",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u4E0D\u4E3A\u7A7A\u7684\u6570\u91CF"},{name:"COUNTIF",description:"COUNTIF(\u8868\u683C[\u91D1\u989D], 100)\uFF0C\u53EF\u5F97\u5230\u8868\u683C\u4E2D\u91D1\u989D\u4E3A100\u7684\u6570\u636E\u6761\u6570"},{name:"MAX",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5927\u503C"},{name:"MIN",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5C0F\u503C"},{name:"ROUND",description:"\u5C06\u6570\u5B57\u56DB\u820D\u4E94\u5165\u5230\u6307\u5B9A\u7684\u4F4D\u6570"},{name:"INT",description:"\u5C06\u6570\u5B57\u5411\u4E0B\u53D6\u6574"},{name:"MOD",description:"\u8FD4\u56DE\u4E24\u6570\u76F8\u9664\u7684\u4F59\u6570"},{name:"PRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u4E58\u79EF"},{name:"SUM",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMPRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMIF",description:"\u7EDF\u8BA1\u8868\u683C\u4E2D\u7B26\u5408\u6761\u4EF6\u7684\u6570\u503C\uFF0C\u5E76\u6C42\u548C"},{name:"ROUNDUP",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0A\u53D6"},{name:"ROUNDDOWN",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0B\u53D6"},{name:"POWER",description:"\u8BA1\u7B97\u6570\u5B57num\u7684n\u6B21\u65B9\uFF0Cn\u53EF\u4EE5\u4E3A\u5206\u6570\u6216\u8005\u6574\u6570"},{name:"LN",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u81EA\u7136\u5BF9\u6570"},{name:"SQRT",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u5E73\u65B9\u6839"}]},{name:"\u65F6\u95F4",functions:[{name:"YEAR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5E74\u4EFD"},{name:"MONTH",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u6708\u4EFD"},{name:"DAY",description:"\u8FD4\u56DE\u65E5\u671F\u5728\u4E00\u4E2A\u6708\u4E2D\u7684\u7B2C\u51E0\u5929\u7684\u6570\u503C"},{name:"HOUR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5C0F\u65F6\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"MINUTE",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5206\u949F\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"SECOND",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u79D2\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"DATE",description:"\u5C06\u6570\u5B57\u62FC\u63A5\u6210\u4E3A\u5E74\u4EFD\uFF0C\u6570\u5B57\u5B57\u6BB5\u987A\u5E8F\u4E3A\uFF1A\u5E74\uFF0F\u6708\uFF0F\u65E5\uFF0F\u65F6\uFF0F\u5206\uFF0F\u79D2"},{name:"CURDATE",description:"\u8FD4\u56DE\u5F53\u524D\u65E5\u671F"},{name:"NOW",description:"\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4\uFF0C\u7CBE\u786E\u5230\u65F6/\u5206/\u79D2"},{name:"DAYS",description:"\u8FD4\u56DE\u65E5\u671F\u5B57\u6BB51\u4E0E\u65E5\u671F\u5B57\u6BB52\u7684\u5DEE\u503C\uFF0C\u5355\u4F4D\u4E3A\u5929"},{name:"DATEDELTA",description:"\u5C06\u6307\u5B9A\u65E5\u671F\u52A0/\u51CF\u6307\u5B9A\u5929\u6570\uFF0C\u5E76\u8FD4\u56DE\u76EE\u6807\u65E5\u671F"}]}];function Cn(X){if(X){var Q=Ue.map(function(le){return le.functions}).reduce(function(le,ge){return le.concat(ge)},[]),me=X.map(function(le){return Q.find(function(ge){return ge.name===le})});return[{name:"\u5E38\u7528",functions:me}].concat(Ue)}return Ue}var Lt=c(76826);function yn(X){return!!(X==="SplitLine"||X==="Pagination"||X==="Remark"||X==="Signature"||X==="Upload"||X&&X.startsWith("Matrix"))}function Ge(X){return!!["Dept","FillBlank","User","Score","Nps","Textarea"].includes(X)}var _e=function X(Q){var me;(me=Q.children)===null||me===void 0||me.forEach(function(le){le.parent=Q,X(le)})},et=function X(Q,me,le,ge){var ee;if(!Q)return[];var tt=!1;return((ee=Q.children)===null||ee===void 0?void 0:ee.filter(function(Re){return Re===me&&!le?(tt=!0,!1):ge&&!ge.includes(Re.type)?!1:!yn(Re.type)&&!tt}).map(function(Re){var ht=Re.id,Ft=Re.title,ut=Re.type,Bt=Re.type===void 0?"".concat(Q==null?void 0:Q.id,".").concat(ht):ht;return Ge(Re.type)?{id:ht,path:Bt,title:(0,Lt.WO)(Ft),type:ut}:{id:ht,path:Bt,title:(0,Lt.WO)(Ft),type:ut,children:X(Re,me,le,ge)}}))||[]},Vt=c(1870),rn=Y.Z.Link,qt=function(Q){var me=Q.title,le=Q.subTitle,ge=Q.helpLink,ee=Q.onOk,tt=Q.value,Re=Q.className,ht=Q.onCancel,Ft=Q.fieldAll,ut=Q.visible,Bt=ut===void 0?!0:ut,lt=Q.schema,Pt=Q.current,wt=Q.functions,it=Q.functionVisible,Le=Q.fieldTypes,rt=Q.helperVariables,je=(0,be.useRef)(null),ct="formula-editor",Ye=(0,be.useRef)(""),we=(0,be.useCallback)(function(Dt){if(je.current!=null){var pt=je.current.getDoc(),We=pt.getCursor();pt.replaceRange("".concat(Dt,"()"),We),We.ch+=Dt.length+1,pt.setCursor(We),je.current.focus()}},[]),mt=(0,be.useCallback)(function(Dt){if(je.current!=null){var pt=je.current.getDoc(),We=pt.getCursor();pt.replaceRange("#{".concat(Ye.current).concat(Dt.path,"}"),We,We),je.current.focus()}},[]),an=(0,be.useMemo)(function(){return et(lt,Pt,Ft,Le)},[lt,Pt,Ft,Le]);return(0,$.jsx)(ae.Z,{onCancel:ht,visible:Bt,maskClosable:!1,getContainer:Q.getContainer,title:me,width:1e3,footer:!1,onOk:function(pt){pt.stopPropagation(),ee(je.current.getValue())},keyboard:!1,children:(0,$.jsxs)("div",{className:e()(ct,Re),children:[(0,$.jsx)(Tt,{functionVisible:it,functions:wt||Cn(Q.commonUseFunctionNames),variables:an,helperVariables:rt,insertFun:we,insertVariable:mt}),(0,$.jsxs)("div",{className:"".concat(ct,"-main"),children:[(0,$.jsxs)("div",{className:"".concat(ct,"-main__code"),children:[(0,$.jsxs)("h1",{children:[(0,$.jsxs)("span",{className:"equle",children:[le,"="]}),(0,$.jsxs)("span",{style:{float:"right"},children:[(0,$.jsx)(Be.Z,{title:"\u903B\u8F91\u8868\u793A\u4F7F\u7528\u5177\u4F53\u503C\u53C2\u4E0E\u903B\u8F91\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u4E3A true;\u6587\u672C\u8868\u793A\u4F7F\u7528\u6807\u9898\u53C2\u4E0E\u6587\u672C\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u9009\u9879\u7684\u6587\u672C\u3002",children:(0,$.jsx)(Vt.Z,{style:{fontSize:16,marginRight:10}})}),(0,$.jsx)(Mt.Z,{checkedChildren:"\u903B\u8F91",defaultChecked:!0,unCheckedChildren:"\u6587\u672C",onChange:function(pt){pt?Ye.current="":Ye.current="_"}})]})]}),(0,$.jsx)("div",{style:{fontSize:14,color:"#b0b0b9"},children:"\u5728\u5DE6\u4FA7\u9009\u62E9\u51FD\u6570\u6216\u5B57\u6BB5\u53D8\u91CF\uFF0C\u4E14\u5728\u82F1\u6587\u8F93\u5165\u6CD5\u4E0B\u7F16\u8F91"})]}),(0,$.jsx)("div",{className:"".concat(ct,"-main__panel"),children:(0,$.jsx)(st,{ref:je,variable:an.concat(rt||[]),value:tt})}),(0,$.jsxs)("div",{className:"".concat(ct,"-main__footer"),children:[(0,$.jsxs)(r.Z,{children:[(0,$.jsx)("span",{children:ge}),it&&(0,$.jsx)(rn,{href:"https://support.microsoft.com/zh-cn/office/excel-%E5%87%BD%E6%95%B0-%E6%8C%89%E7%B1%BB%E5%88%AB%E5%88%97%E5%87%BA-5f91f4e9-7b42-46d2-9bd1-63f26a86c0eb",target:"_blank",children:"\u516C\u5F0F\u6587\u6863"})]}),(0,$.jsxs)(r.Z,{children:[(0,$.jsx)(A.Z,{onClick:function(){ht&&ht()},children:"\u53D6\u6D88"}),(0,$.jsx)(A.Z,{type:"primary",onClick:function(pt){pt.stopPropagation(),ee(je.current.getValue())},children:"\u786E\u5B9A"})]})]})]})]})})},hn=qt},78210:function($t,At,c){"use strict";var He=c(15020),ae=c(85893),m=function(Ce){var r=Ce.html,Et=r===void 0?"":r,Mt=Ce.replaceP,S=Mt===void 0?!0:Mt;return S?(0,ae.jsx)(ae.Fragment,{children:typeof Et=="string"&&(0,He.ZP)(Et.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,ae.jsx)(ae.Fragment,{children:typeof Et=="string"&&(0,He.ZP)(Et)})};At.Z=m},39017:function($t,At,c){"use strict";c.d(At,{Rk:function(){return Be},AK:function(){return m},Al:function(){return Mt}});var He=c(67294),ae=c(24004);function m(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Y=(0,He.useContext)(ae.ZX),be=Y.theme;return"survey-".concat(be)+D}function A(D,Y){var be=(Y&&Y.depends||[]).reduce(function(Pe,e){return Pe||!e},!1);return Ce(be?void 0:function(Pe,e){return fetch(Pe,e).then(function($e){if(!!$e.ok)return $e.json()})},D,Y||{})}function Ce(D){for(var Y=arguments.length,be=new Array(Y>1?Y-1:0),Pe=1;Pe<Y;Pe++)be[Pe-1]=arguments[Pe];var e=useState(0),$e=_slicedToArray(e,2),yt=$e[0],H=$e[1],qe=useCallback(function(){H(Math.random())},[]),$=useState({loading:!1,mutate:qe}),kt=_slicedToArray($,2),st=kt[0],U=kt[1];return useEffect(function(){!D||be[1].manual&&yt===0||D.apply(null,be).then(function(Rt){Rt.code===200?U({loading:!1,data:Rt.data,mutate:qe}):U({error:Rt.message,loading:!1,mutate:qe})}).catch(function(Rt){U({error:Rt,loading:!1,mutate:qe})})},r(yt,be)),st}function r(){for(var D=arguments.length,Y=new Array(D),be=0;be<D;be++)Y[be]=arguments[be];for(var Pe=[],e=0;e<arguments.length;e++){var $e=arguments[e];if($e instanceof Array)for(var yt=0;yt<$e.length;yt++)Pe=Pe.concat(r($e[yt]));else if(typeof URL!="undefined"&&$e instanceof URL)Pe=Pe.concat($e.toJSON());else if($e instanceof Object)for(var H=Object.keys($e),qe=0;qe<H.length;qe++){var $=H[qe];$==="depends"?Pe=Pe.concat($e[$]):Pe=Pe.concat([$]).concat(r($e[$]))}else Pe=Pe.concat($e)}return Pe}var Et=c(87998);function Mt(){return(0,He.useContext)(Et.ZX)}function S(){return useSurvey().attachments}function Be(){var D=(0,He.useContext)(Et.ZX);return D.innerStore}},61384:function($t,At,c){"use strict";c.r(At),c.d(At,{default:function(){return Pn}});var He=c(78210),ae=c(87998),m=c(67294),A=c(39017),Ce=c(95522),r=c(85893);function Et(p){var a=p.schema,i=p.index,d=p.seqNo,u=(0,A.AK)("-body-questionSet"),g=(0,m.useContext)(ae.ZX),Z=g.questionNumber;return(0,r.jsxs)("div",{className:u,children:[(0,r.jsxs)("div",{className:u+"-title",children:[Z?d||"".concat(i+1,"."):"",(0,r.jsx)(He.Z,{html:a.title})]}),p.children,(0,r.jsx)("div",{className:u+"-splitLine"})]})}(0,Ce.eC)("QuestionSet",Et,"antdmobile");var Mt=c(9715),S=c(93766),Be=c(94657),D=c(45290);function Y(p){var a=p.schema,i=p.index,d=p.qsIndex,u=p.required,g=p.error,Z=p.replaceTitle,y=p.seqNo,N=(0,m.useContext)(ae.ZX),I=N.questionNumber,F=(0,A.AK)("-body-question"),j=(0,m.useState)(),k=(0,Be.Z)(j,2),T=k[0],R=k[1];(0,m.useEffect)(function(){if(T){var G,te;(G=document.querySelector("[data-id='".concat(a.id,"']")))===null||G===void 0||G.classList.remove("ant-form-item-has-error"),(te=document.querySelector("[data-id='".concat(a.id,"']")))===null||te===void 0||te.querySelectorAll("[data-id]").forEach(function(Qe){Qe.classList.remove("ant-form-item-has-error")})}if(g.length>0){var ve,Ze=g[0].split("^"),xe=(0,Be.Z)(Ze,2),Ae=xe[0],Je=xe[1],jt;Je?(jt=document.querySelector("[data-id='".concat(Ae,"']")),R(Je)):(jt=document.querySelector("[data-id='".concat(a.id,"']")),R(Ae)),(ve=jt)===null||ve===void 0||ve.classList.add("ant-form-item-has-error")}else T&&R(void 0)},[g]);var w="";d!==void 0&&(w+=d+1+"-"),i!==void 0&&(w+=i+1+".");var z=function(){return T?(0,r.jsx)("span",{className:"question-tag error animated",children:(0,r.jsx)("span",{children:T})}):(0,r.jsx)(r.Fragment,{})};return(0,r.jsx)("div",{className:F,children:(0,r.jsx)(S.Z.Item,{label:(0,r.jsxs)("span",{className:F+"-header",children:[I?y||w:"",(0,r.jsx)(D.hl,{html:Z||a.title}),z()]}),labelCol:{span:24},wrapperCol:{span:24},required:u,children:p.children})})}(0,Ce.eC)("Question",Y,"antdmobile");var be=c(84305),Pe=c(88182),e=c(82925),$e=function(){var a=(0,A.AK)(),i=(0,m.useContext)(ae.ZX),d=i.schema;return(0,r.jsxs)("div",{className:a+"-header",children:[(0,r.jsx)("div",{className:a+"-header-title",children:(0,r.jsx)(D.hl,{html:d.title})}),(0,r.jsx)("div",{className:a+"-header-description",children:(0,r.jsx)(D.hl,{html:d.description})})]})},yt=function(a){var i=(0,A.AK)();return(0,r.jsx)("div",{className:i+"-body",children:a.children})},H=c(57663),qe=c(71577);function $(){var p,a,i,d=(0,A.AK)("-footer"),u=(0,m.useContext)(ae.ZX),g=u.schema,Z=u.onSubmit,y=u.onPrev,N=u.pagination,I=u.onNext,F=u.loading,j=N.pageSize>1,k=N.current===1,T=N.current===N.pageSize,R=j?(p=g.children)===null||p===void 0?void 0:p.slice(-1)[0]:void 0;return(0,r.jsxs)("div",{className:d,children:[T&&(0,r.jsx)("div",{className:d+"-desc",style:{userSelect:"none",WebkitTouchCallout:"none"},children:(0,r.jsx)(D.hl,{html:g==null||(a=g.attribute)===null||a===void 0?void 0:a.suffix})}),(0,r.jsxs)("div",{className:d+"-pagination",children:[j&&!k&&(0,r.jsx)("div",{children:(0,r.jsx)(qe.Z,{type:"primary",block:!0,onClick:function(){return y()},children:"\u4E0A\u4E00\u9875"})}),j&&!T&&(0,r.jsx)("div",{children:(0,r.jsx)(qe.Z,{type:"primary",block:!0,onClick:function(){return I()},children:"\u4E0B\u4E00\u9875"})}),T&&(0,r.jsx)("div",{style:{width:"100%",padding:"0 20px"},children:(0,r.jsx)(qe.Z,{type:"primary",block:!0,onClick:Z,loading:F,children:(0,r.jsx)(D.hl,{html:((i=g.attribute)===null||i===void 0?void 0:i.submitButton)||"\u63D0\u4EA4"})})}),j&&(0,r.jsxs)("div",{className:d+"-pagination-info",children:["\u7B2C",N.current,"\u9875/\u5171",N.pageSize,"\u9875"]})]})]})}var kt=c(47673),st=c(4107),U=c(11849),Rt=c(29985),Qt=c(46842),L=c(64302),ot=c(16165),Se=function(){return(0,r.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,r.jsx)("path",{d:"M237.136842 668.294737c-5.389474-5.389474-10.778947-10.778947-10.778947-16.168421V355.705263v-21.557895-26.947368-32.336842c0-10.778947 0-21.557895 5.389473-26.947369l-5.389473-5.389473-80.842106 32.336842c-26.947368 5.389474-59.284211 16.168421-91.621052 26.947368l5.389474 21.557895 107.789473-16.168421v334.147368c0 10.778947-5.389474 16.168421-10.778947 21.557895-5.389474 5.389474-16.168421 10.778947-32.336842 10.778948-10.778947 0-32.336842 5.389474-53.894737 5.389473v16.168421H323.368421v-21.557894c-21.557895 0-37.726316 0-48.505263-5.389474-21.557895 10.778947-32.336842 5.389474-37.726316 0z m414.989474-43.11579c0-10.778947 5.389474-16.168421 5.389473-26.947368l-16.168421-5.389474c-5.389474 16.168421-10.778947 26.947368-16.168421 32.336842-5.389474 5.389474-10.778947 16.168421-16.168421 16.168421-5.389474 5.389474-10.778947 5.389474-16.168421 5.389474h-16.168421l-172.463158 5.389474 107.789474-102.4c16.168421-16.168421 32.336842-26.947368 48.505263-43.11579 16.168421-16.168421 26.947368-26.947368 37.726316-43.115789 10.778947-16.168421 21.557895-32.336842 26.947368-48.505263 5.389474-16.168421 10.778947-37.726316 10.778948-53.894737 0-21.557895-5.389474-37.726316-10.778948-53.894737-10.778947-16.168421-21.557895-26.947368-32.336842-37.726316-16.168421-10.778947-32.336842-16.168421-48.505263-21.557895-21.557895-5.389474-37.726316-10.778947-59.28421-10.778947-21.557895 0-48.505263 5.389474-70.063158 10.778947-16.168421 10.778947-37.726316 21.557895-59.284211 32.336843 0 16.168421 0 32.336842 5.389474 48.505263v53.894737h21.557895c0-16.168421 5.389474-26.947368 10.778947-37.726316l16.168421-32.336842c5.389474-10.778947 16.168421-16.168421 26.947368-21.557895 10.778947-5.389474 21.557895-5.389474 37.726316-5.389474 10.778947 0 26.947368 0 37.726316 5.389474 10.778947 5.389474 21.557895 10.778947 32.336842 21.557895 10.778947 10.778947 16.168421 16.168421 21.557895 32.336842 5.389474 10.778947 5.389474 26.947368 5.389474 37.726316 0 16.168421-5.389474 32.336842-10.778948 48.505263-5.389474 16.168421-16.168421 32.336842-26.947368 48.505263-5.389474 10.778947-21.557895 26.947368-32.336842 43.115789l-48.505264 48.505264-123.957894 123.957894 5.389473 5.389474h301.810527v-21.557895c0-10.778947 5.389474-16.168421 5.389473-26.947368 5.389474-10.778947 10.778947-21.557895 10.778948-26.947369z m307.2-80.842105c-5.389474-10.778947-16.168421-26.947368-21.557895-32.336842-10.778947-10.778947-21.557895-21.557895-37.726316-26.947368-10.778947-5.389474-26.947368-10.778947-43.115789-16.168421 16.168421-10.778947 32.336842-26.947368 43.115789-37.726316 10.778947-10.778947 21.557895-21.557895 26.947369-32.336842 5.389474-10.778947 10.778947-21.557895 10.778947-26.947369v-16.168421c0-16.168421-5.389474-32.336842-10.778947-48.505263-10.778947-10.778947-21.557895-26.947368-32.336842-32.336842-10.778947-10.778947-26.947368-16.168421-43.11579-21.557895-16.168421-5.389474-32.336842-5.389474-48.505263-5.389474-26.947368 0-48.505263 5.389474-70.063158 10.778948s-43.115789 16.168421-64.673684 32.336842v91.621053h21.557895c0-16.168421 5.389474-26.947368 10.778947-37.726316 5.389474-10.778947 10.778947-21.557895 21.557895-26.947369 10.778947-5.389474 16.168421-16.168421 26.947368-16.168421 10.778947-5.389474 21.557895-5.389474 37.726316-5.389473 10.778947 0 21.557895 0 32.336842 5.389473 10.778947 5.389474 21.557895 10.778947 26.947368 16.168421 5.389474 5.389474 16.168421 16.168421 21.557895 26.947369 5.389474 10.778947 5.389474 21.557895 5.389474 32.336842 0 21.557895-5.389474 37.726316-16.168421 53.894737-10.778947 16.168421-21.557895 26.947368-37.726316 37.726316-16.168421 10.778947-32.336842 16.168421-48.505263 21.557894-16.168421 5.389474-37.726316 10.778947-53.894737 16.168421l5.389474 26.947369c5.389474-5.389474 16.168421-5.389474 26.947368-5.389474h26.947369c16.168421 0 32.336842 0 48.505263 5.389474 16.168421 5.389474 26.947368 10.778947 37.726315 21.557894 10.778947 10.778947 16.168421 21.557895 26.947369 32.336843 5.389474 16.168421 10.778947 32.336842 10.778947 48.505263 0 16.168421 0 32.336842-5.389473 48.505263-5.389474 16.168421-10.778947 26.947368-21.557895 37.726316-10.778947 10.778947-21.557895 21.557895-37.726316 26.947368-16.168421 5.389474-32.336842 10.778947-48.505263 10.778947-21.557895 0-37.726316-5.389474-59.284211-10.778947-21.557895-10.778947-37.726316-21.557895-48.505263-32.336842-10.778947 0-16.168421 5.389474-26.947368 16.168421-5.389474-16.168421-5.389474-5.389474-5.389474 5.389474s5.389474 16.168421 10.778947 21.557894c5.389474 5.389474 10.778947 10.778947 21.557895 16.168422 10.778947 5.389474 16.168421 5.389474 26.947369 5.389473h32.336842c26.947368 0 53.894737-5.389474 86.231579-10.778947 26.947368-10.778947 53.894737-21.557895 75.452631-37.726316 21.557895-16.168421 43.115789-37.726316 53.894737-64.673684 16.168421-26.947368 21.557895-53.894737 21.557895-86.231579-5.389474-10.778947-10.778947-26.947368-16.168421-37.726316z",fill:"#bfbfbf"})})},se=function(a){return(0,r.jsx)(ot.Z,(0,U.Z)({component:Se},a))},De=function(){return(0,r.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,r.jsx)("path",{d:"M682.666667 213.333333a21.333333 21.333333 0 0 1 20.992 17.493334l0.341333 3.84v42.666666H810.666667a42.666667 42.666667 0 0 1 42.666666 42.666667v469.333333a42.666667 42.666667 0 0 1-42.666666 42.666667H256a42.666667 42.666667 0 0 1-42.666667-42.666667v-469.333333a42.666667 42.666667 0 0 1 42.666667-42.666667h106.666667v-42.666666a21.333333 21.333333 0 0 1 42.325333-3.84l0.341333 3.84v42.666666h256v-42.666666A21.333333 21.333333 0 0 1 682.666667 213.333333z m128 234.666667H256v341.333333h554.666667v-341.333333z m-448-128H256v85.333333h554.666667v-85.333333h-106.666667V341.333333a21.333333 21.333333 0 0 1-42.325333 3.84L661.333333 341.333333v-21.333333h-256V341.333333a21.333333 21.333333 0 0 1-42.325333 3.84L362.666667 341.333333v-21.333333z",fill:"#bfbfbf","p-id":"4605"})})},ie=function(a){return(0,r.jsx)(ot.Z,(0,U.Z)({component:De},a))},fe=function(){return(0,r.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,r.jsx)("path",{d:"M510.61572266 166.37561035A368.95935059 368.95935059 0 0 0 141.70581055 535.33496094a368.95935059 368.95935059 0 0 0 368.95935059 368.95935059 368.95935059 368.95935059 0 0 0 368.95935058-368.95935059A368.95935059 368.95935059 0 0 0 510.61572266 166.42504883z m0 688.77685547a319.86694336 319.86694336 0 0 1 0-639.63500977 319.86694336 319.86694336 0 0 1 0 639.63500977z m159.93347168-295.24658204h-159.93347168V400.02185058a12.35961914 12.35961914 0 0 0-12.26074219-12.31018066h-24.62036133a12.35961914 12.35961914 0 0 0-12.26074219 12.31018067v196.76513671a12.35961914 12.35961914 0 0 0 12.26074219 12.31018067h196.76513672a12.35961914 12.35961914 0 0 0 12.35961914-12.31018066v-24.57092286a12.26074219 12.26074219 0 0 0-12.35961914-12.31018066z","p-id":"9722",fill:"#bfbfbf"})})},Fe=function(a){return(0,r.jsx)(ot.Z,(0,U.Z)({component:fe},a))},he=function(){return(0,r.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,r.jsx)("path",{d:"M566.272 217.088c-11.264-7.168-24.576-11.264-41.984-11.264-4.096 0-8.192 0-12.288 1.024-45.056 7.168-74.752 48.128-93.184 87.04-8.192 18.432-15.36 37.888-22.528 56.32-3.072 9.216-7.168 17.408-10.24 26.624 0 1.024-5.12 18.432-6.144 18.432h-46.08c-6.144 0-11.264 5.12-11.264 11.264 0 6.144 5.12 11.264 11.264 11.264h39.936l-22.528 96.256c-22.528 107.52-53.248 230.4-60.416 251.904-7.168 22.528-17.408 33.792-31.744 33.792-3.072 0-5.12-1.024-7.168-2.048-2.048-1.024-3.072-3.072-3.072-5.12s1.024-5.12 4.096-9.216c3.072-4.096 4.096-9.216 4.096-13.312 0-8.192-3.072-15.36-8.192-20.48-6.144-5.12-12.288-7.168-19.456-7.168s-14.336 3.072-20.48 8.192c-1.024 7.168-4.096 14.336-4.096 23.552 0 12.288 5.12 22.528 15.36 31.744 10.24 9.216 23.552 13.312 40.96 13.312 27.648 0 52.224-12.288 70.656-33.792 11.264-13.312 19.456-28.672 26.624-45.056 22.528-50.176 34.816-105.472 48.128-158.72 13.312-54.272 25.6-108.544 36.864-162.816h44.032c6.144 0 11.264-5.12 11.264-11.264 0-6.144-5.12-11.264-11.264-11.264h-40.96c22.528-84.992 48.128-143.36 53.248-151.552 8.192-14.336 17.408-21.504 27.648-21.504 4.096 0 6.144 1.024 7.168 3.072 1.024 2.048 2.048 4.096 2.048 5.12 0 1.024-1.024 4.096-4.096 9.216-3.072 5.12-4.096 10.24-4.096 15.36 0 7.168 3.072 13.312 8.192 18.432s12.288 8.192 19.456 8.192 14.336-3.072 19.456-8.192 8.192-12.288 8.192-21.504c-1.024-17.408-6.144-28.672-17.408-35.84z m204.8 258.048c16.384 0 48.128-13.312 48.128-56.32s-30.72-45.056-40.96-45.056c-18.432 0-37.888 13.312-54.272 41.984-16.384 28.672-34.816 61.44-34.816 61.44h-1.024c-4.096-20.48-7.168-36.864-9.216-45.056-3.072-17.408-23.552-56.32-66.56-56.32s-81.92 24.576-81.92 24.576c-7.168 4.096-12.288 12.288-12.288 21.504 0 14.336 11.264 25.6 25.6 25.6 4.096 0 8.192-1.024 11.264-3.072 0 0 32.768-18.432 38.912 0 2.048 5.12 4.096 11.264 6.144 17.408 8.192 27.648 15.36 60.416 22.528 90.112L596.992 593.92s-31.744-11.264-48.128-11.264-48.128 13.312-48.128 56.32 30.72 45.056 40.96 45.056c18.432 0 37.888-13.312 54.272-41.984 16.384-28.672 34.816-61.44 34.816-61.44 5.12 26.624 10.24 48.128 13.312 56.32 10.24 30.72 34.816 48.128 67.584 48.128 0 0 33.792 0 72.704-22.528 9.216-4.096 16.384-13.312 16.384-23.552 0-14.336-11.264-25.6-25.6-25.6-4.096 0-8.192 1.024-11.264 3.072 0 0-27.648 15.36-37.888 3.072-7.168-13.312-12.288-30.72-17.408-52.224-4.096-19.456-9.216-41.984-13.312-63.488l28.672-40.96c-1.024 1.024 30.72 12.288 47.104 12.288z","p-id":"1938",fill:"#bfbfbf"})})},Ne=function(a){return(0,r.jsx)(ot.Z,(0,U.Z)({component:he},a))},de=function(a){var i=a.onChange,d=a.type,u=a.value,g=a.suffix,Z=a.prefix,y=a.style,N=y===void 0?{width:"100%"}:y,I=a.bordered,F=I===void 0?!0:I,j=a.placeholder;return d==="number"?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(st.Z,{onChange:function(T){T.target.value===""?i(""):i(parseFloat(T.target.value))},prefix:Z||(0,r.jsx)(se,{}),type:"number",value:u,style:(0,U.Z)((0,U.Z)({},N),{},{paddingLeft:20}),suffix:g,inputMode:"decimal",bordered:F,placeholder:j})}):d==="date"?(0,r.jsx)(ft,{onChange:function(T){return i(T)},value:u,style:N,bordered:F,placeholder:j}):d==="dateTime"?(0,r.jsx)(ft,{showTime:!0,onChange:function(T){return i(T)},value:u,placeholder:j}):d==="time"?(0,r.jsx)(Kt,{value:u,onChange:function(T){return i(T)},style:N,bordered:F,placeholder:j}):d==="mobile"?(0,r.jsx)(st.Z,{prefix:Z||(0,r.jsx)(Rt.Z,{}),onChange:function(T){return i(T.target.value)},value:u,bordered:F,placeholder:j}):d==="idCard"?(0,r.jsx)(st.Z,{prefix:Z||(0,r.jsx)(Qt.Z,{}),onChange:function(T){return i(T.target.value)},value:u,style:N,bordered:F,placeholder:j}):d==="email"?(0,r.jsx)(st.Z,{prefix:Z||(0,r.jsx)(L.Z,{}),onChange:function(T){return i(T.target.value)},value:u,style:N,bordered:F,placeholder:j}):(0,r.jsx)(st.Z,{onChange:function(T){return i(T.target.value)},value:u,suffix:g,prefix:Z,style:N,bordered:F,placeholder:j})},ye=c(57254),Ie=function(a){var i=a.options,d=a.onChange,u=a.value;return(0,r.jsxs)("div",{className:"native-select",children:[(0,r.jsxs)("select",{onChange:function(Z){return d(Z.target.value)},value:u,className:"native-select__select",children:[(0,r.jsx)("option",{children:"\u8BF7\u9009\u62E9"}),i==null?void 0:i.map(function(g){return(0,r.jsx)("option",{value:g.value,children:g.label},g.value)})]}),(0,r.jsx)("span",{className:"native-select__arrow",children:(0,r.jsx)(ye.Z,{})})]})};/*!
 * mobileSelect.js
 * (c) 2017-present onlyhom
 * Released under the MIT License.
 */function re(p,a){return p.getElementsByClassName(a)}function ne(p){this.mobileSelect,this.wheelsData=p.wheels,this.jsonType=!1,this.cascadeJsonData=[],this.displayJson=[],this.curValue=null,this.curIndexArr=[],this.cascade=!1,this.startY,this.moveEndY,this.moveY,this.oldMoveY,this.offset=0,this.offsetSum=0,this.oversizeBorder,this.curDistance=[],this.clickStatus=!1,this.isPC=!0,this.init(p)}ne.prototype={constructor:ne,init:function(a){var i=this;if(i.keyMap=a.keyMap?a.keyMap:{id:"id",value:"value",childs:"childs"},i.checkDataType(),i.renderWheels(i.wheelsData,a.cancelBtnText,a.ensureBtnText,a.container),i.wheel=re(i.mobileSelect,"wheel"),i.slider=re(i.mobileSelect,"selectContainer"),i.wheels=i.mobileSelect.querySelector(".wheels"),i.liHeight=i.mobileSelect.querySelector("li").offsetHeight,i.ensureBtn=i.mobileSelect.querySelector(".ensure"),i.cancelBtn=i.mobileSelect.querySelector(".cancel"),i.grayLayer=i.mobileSelect.querySelector(".grayLayer"),i.popUp=i.mobileSelect.querySelector(".content"),i.callback=a.callback||function(){},i.transitionEnd=a.transitionEnd||function(){},i.onShow=a.onShow||function(){},i.onHide=a.onHide||function(){},i.initPosition=a.position||[],i.titleText=a.title||"",i.connector=a.connector||" ",i.triggerDisplayData=typeof a.triggerDisplayData!="undefined"?a.triggerDisplayData:!0,i.setStyle(a),i.setTitle(i.titleText),i.checkIsPC(),i.checkCascade(),i.addListenerAll(),i.cascade&&i.initCascade(),i.initPosition.length<i.slider.length)for(var d=i.slider.length-i.initPosition.length,u=0;u<d;u++)i.initPosition.push(0);i.setCurDistance(i.initPosition),i.cancelBtn.addEventListener("click",function(g){i.hide()}),i.ensureBtn.addEventListener("click",function(g){i.hide(),i.liHeight||(i.liHeight=i.mobileSelect.querySelector("li").offsetHeight);for(var Z="",y=0;y<i.wheel.length;y++)y==i.wheel.length-1?Z+=i.getInnerHtml(y):Z+=i.getInnerHtml(y)+i.connector;i.curIndexArr=i.getIndexArr(),i.curValue=i.getCurValue(),i.callback(i.curIndexArr,i.curValue)}),i.grayLayer.addEventListener("click",function(g){i.hide()}),i.popUp.addEventListener("click",function(g){g.stopPropagation()}),i.fixRowStyle()},setTitle:function(a){var i=this;i.titleText=a,i.mobileSelect.querySelector(".title").innerHTML=i.titleText},setStyle:function(a){var i=this;a.ensureBtnColor&&(i.ensureBtn.style.color=a.ensureBtnColor),a.cancelBtnColor&&(i.cancelBtn.style.color=a.cancelBtnColor),a.titleColor&&(i.title=i.mobileSelect.querySelector(".title"),i.title.style.color=a.titleColor),a.textColor&&(i.panel=i.mobileSelect.querySelector(".panel"),i.panel.style.color=a.textColor),a.titleBgColor&&(i.btnBar=i.mobileSelect.querySelector(".btnBar"),i.btnBar.style.backgroundColor=a.titleBgColor),a.bgColor&&(i.panel=i.mobileSelect.querySelector(".panel"),i.shadowMask=i.mobileSelect.querySelector(".shadowMask"),i.panel.style.backgroundColor=a.bgColor,i.shadowMask.style.background="linear-gradient(to bottom, "+a.bgColor+", rgba(255, 255, 255, 0), "+a.bgColor+")"),isNaN(a.maskOpacity)||(i.grayMask=i.mobileSelect.querySelector(".grayLayer"),i.grayMask.style.background="rgba(0, 0, 0, "+a.maskOpacity+")")},checkIsPC:function(){var a=this,i=navigator.userAgent.toLowerCase(),d=i.match(/ipad/i)=="ipad",u=i.match(/iphone os/i)=="iphone os",g=i.match(/midp/i)=="midp",Z=i.match(/rv:1.2.3.4/i)=="rv:1.2.3.4",y=i.match(/ucweb/i)=="ucweb",N=i.match(/android/i)=="android",I=i.match(/windows ce/i)=="windows ce",F=i.match(/windows mobile/i)=="windows mobile";(d||u||g||Z||y||N||I||F)&&(a.isPC=!1)},show:function(){this.mobileSelect.classList.add("mobileSelect-show"),typeof this.onShow=="function"&&this.onShow(this)},hide:function(){this.mobileSelect.classList.remove("mobileSelect-show"),typeof this.onHide=="function"&&this.onHide(this)},renderWheels:function(a,i,d,u){var g=this,Z=i||"\u53D6\u6D88",y=d||"\u786E\u8BA4";g.mobileSelect=document.createElement("div"),g.mobileSelect.className="mobileSelect",g.mobileSelect.innerHTML='<div class="grayLayer"></div><div class="content"><div class="btnBar"><div class="fixWidth"><div class="cancel">'+Z+'</div><div class="title"></div><div class="ensure">'+y+'</div></div></div><div class="panel"><div class="fixWidth"><div class="wheels"></div><div class="selectLine"></div><div class="shadowMask"></div></div></div></div>',u?u.appendChild(g.mobileSelect):document.body.appendChild(g.mobileSelect);for(var N="",I=0;I<a.length;I++){if(N+='<div class="wheel"><ul class="selectContainer">',g.jsonType)for(var F=0;F<a[I].data.length;F++)N+='<li data-id="'+a[I].data[F][g.keyMap.id]+'">'+a[I].data[F][g.keyMap.value]+"</li>";else for(var F=0;F<a[I].data.length;F++)N+="<li>"+a[I].data[F]+"</li>";N+="</ul></div>"}g.mobileSelect.querySelector(".wheels").innerHTML=N},addListenerAll:function(){for(var a=this,i=0;i<a.slider.length;i++)(function(d){a.addListenerWheel(a.wheel[d],d)})(i)},addListenerWheel:function(a,i){var d=this;a.addEventListener("touchstart",function(u){d.touch(u,this.firstChild,i)},!1),a.addEventListener("touchend",function(u){d.touch(u,this.firstChild,i)},!1),a.addEventListener("touchmove",function(u){d.touch(u,this.firstChild,i)},!1),d.isPC&&(a.addEventListener("mousedown",function(u){d.dragClick(u,this.firstChild,i)},!1),a.addEventListener("mousemove",function(u){d.dragClick(u,this.firstChild,i)},!1),a.addEventListener("mouseup",function(u){d.dragClick(u,this.firstChild,i)},!0))},checkDataType:function(){var a=this;typeof a.wheelsData[0].data[0]=="object"&&(a.jsonType=!0)},checkCascade:function(){var a=this;if(a.jsonType){for(var i=a.wheelsData[0].data,d=0;d<i.length;d++)if(a.keyMap.childs in i[d]&&i[d][a.keyMap.childs].length>0){a.cascade=!0,a.cascadeJsonData=a.wheelsData[0].data;break}}else a.cascade=!1},generateArrData:function(a){for(var i=[],d=this.keyMap.id,u=this.keyMap.value,g=0;g<a.length;g++){var Z={};Z[d]=a[g][this.keyMap.id],Z[u]=a[g][this.keyMap.value],i.push(Z)}return i},initCascade:function(){var a=this;a.displayJson.push(a.generateArrData(a.cascadeJsonData)),a.initPosition.length>0?(a.initDeepCount=0,a.initCheckArrDeep(a.cascadeJsonData[a.initPosition[0]])):a.checkArrDeep(a.cascadeJsonData[0]),a.reRenderWheels()},initCheckArrDeep:function(a){var i=this;if(a&&i.keyMap.childs in a&&a[i.keyMap.childs].length>0){i.displayJson.push(i.generateArrData(a[i.keyMap.childs])),i.initDeepCount++;var d=a[i.keyMap.childs][i.initPosition[i.initDeepCount]];d?i.initCheckArrDeep(d):i.checkArrDeep(a[i.keyMap.childs][0])}},checkArrDeep:function(a){var i=this;a&&i.keyMap.childs in a&&a[i.keyMap.childs].length>0&&(i.displayJson.push(i.generateArrData(a[i.keyMap.childs])),i.checkArrDeep(a[i.keyMap.childs][0]))},checkRange:function(a,i){for(var d=this,u=d.displayJson.length-1-a,g=0;g<u;g++)d.displayJson.pop();for(var Z,g=0;g<=a;g++)g==0?Z=d.cascadeJsonData[i[0]]:Z=Z[d.keyMap.childs][i[g]];d.checkArrDeep(Z),d.reRenderWheels(),d.fixRowStyle(),d.setCurDistance(d.resetPosition(a,i))},resetPosition:function(a,i){var d=this,u=i,g;if(d.slider.length>i.length){g=d.slider.length-i.length;for(var Z=0;Z<g;Z++)u.push(0)}else if(d.slider.length<i.length){g=i.length-d.slider.length;for(var Z=0;Z<g;Z++)u.pop()}for(var Z=a+1;Z<u.length;Z++)u[Z]=0;return u},reRenderWheels:function(){var a=this;if(a.wheel.length>a.displayJson.length)for(var i=a.wheel.length-a.displayJson.length,d=0;d<i;d++)a.wheels.removeChild(a.wheel[a.wheel.length-1]);for(var d=0;d<a.displayJson.length;d++)(function(g){var Z="";if(a.wheel[g]){for(var y=0;y<a.displayJson[g].length;y++)Z+='<li data-id="'+a.displayJson[g][y][a.keyMap.id]+'">'+a.displayJson[g][y][a.keyMap.value]+"</li>";a.slider[g].innerHTML=Z}else{var N=document.createElement("div");N.className="wheel",Z='<ul class="selectContainer">';for(var y=0;y<a.displayJson[g].length;y++)Z+='<li data-id="'+a.displayJson[g][y][a.keyMap.id]+'">'+a.displayJson[g][y][a.keyMap.value]+"</li>";Z+="</ul>",N.innerHTML=Z,a.addListenerWheel(N,g),a.wheels.appendChild(N)}})(d)},updateWheels:function(a){var i=this;if(i.cascade){if(i.cascadeJsonData=a,i.displayJson=[],i.initCascade(),i.initPosition.length<i.slider.length)for(var d=i.slider.length-i.initPosition.length,u=0;u<d;u++)i.initPosition.push(0);i.setCurDistance(i.initPosition),i.fixRowStyle()}},updateWheel:function(a,i){var d=this,u="";if(d.cascade)return console.error("\u7EA7\u8054\u683C\u5F0F\u4E0D\u652F\u6301updateWheel(),\u8BF7\u4F7F\u7528updateWheels()\u66F4\u65B0\u6574\u4E2A\u6570\u636E\u6E90"),!1;if(d.jsonType){for(var g=0;g<i.length;g++)u+='<li data-id="'+i[g][d.keyMap.id]+'">'+i[g][d.keyMap.value]+"</li>";d.wheelsData[a]={data:i}}else{for(var g=0;g<i.length;g++)u+="<li>"+i[g]+"</li>";d.wheelsData[a]=i}d.slider[a].innerHTML=u},fixRowStyle:function(){for(var a=this,i=(100/a.wheel.length).toFixed(2),d=0;d<a.wheel.length;d++)a.wheel[d].style.width=i+"%"},getIndex:function(a){return Math.round((2*this.liHeight-a)/this.liHeight)},getIndexArr:function(){for(var a=this,i=[],d=0;d<a.curDistance.length;d++)i.push(a.getIndex(a.curDistance[d]));return i},getCurValue:function(){var a=this,i=[],d=a.getIndexArr();if(a.cascade)for(var u=0;u<a.wheel.length;u++)i.push(a.displayJson[u][d[u]]);else if(a.jsonType)for(var u=0;u<a.curDistance.length;u++)i.push(a.wheelsData[u].data[a.getIndex(a.curDistance[u])]);else for(var u=0;u<a.curDistance.length;u++)i.push(a.getInnerHtml(u));return i},getValue:function(){return this.curValue},calcDistance:function(a){return 2*this.liHeight-a*this.liHeight},setCurDistance:function(a){for(var i=this,d=[],u=0;u<i.slider.length;u++)d.push(i.calcDistance(a[u])),i.movePosition(i.slider[u],d[u]);i.curDistance=d},fixPosition:function(a){return-(this.getIndex(a)-2)*this.liHeight},movePosition:function(a,i){a.style.webkitTransform="translate3d(0,"+i+"px, 0)",a.style.transform="translate3d(0,"+i+"px, 0)"},locatePosition:function(a,i){var d=this;this.curDistance[a]=this.calcDistance(i),this.movePosition(this.slider[a],this.curDistance[a]),d.cascade&&d.checkRange(a,d.getIndexArr())},updateCurDistance:function(a,i){a.style.transform?this.curDistance[i]=parseInt(a.style.transform.split(",")[1]):this.curDistance[i]=parseInt(a.style.webkitTransform.split(",")[1])},getDistance:function(a){return a.style.transform?parseInt(a.style.transform.split(",")[1]):parseInt(a.style.webkitTransform.split(",")[1])},getInnerHtml:function(a){var i=this,d=i.slider[a].getElementsByTagName("li").length,u=i.getIndex(i.curDistance[a]);return u>=d?u=d-1:u<0&&(u=0),i.slider[a].getElementsByTagName("li")[u].innerHTML},touch:function(a,i,d){var u=this;switch(a=a||window.event,a.type){case"touchstart":u.startY=a.touches[0].clientY,u.startY=parseInt(u.startY),u.oldMoveY=u.startY;break;case"touchend":if(u.moveEndY=parseInt(a.changedTouches[0].clientY),u.offsetSum=u.moveEndY-u.startY,u.oversizeBorder=-(i.getElementsByTagName("li").length-3)*u.liHeight,u.offsetSum==0){var g=parseInt((document.documentElement.clientHeight-u.moveEndY)/40);if(g!=2){var Z=g-2,y=u.curDistance[d]+Z*u.liHeight;y<=2*u.liHeight&&y>=u.oversizeBorder&&(u.curDistance[d]=y,u.movePosition(i,u.curDistance[d]),u.transitionEnd(u.getIndexArr(),u.getCurValue(),d))}}else u.updateCurDistance(i,d),u.curDistance[d]=u.fixPosition(u.curDistance[d]),u.movePosition(i,u.curDistance[d]),u.curDistance[d]+u.offsetSum>2*u.liHeight?(u.curDistance[d]=2*u.liHeight,setTimeout(function(){u.movePosition(i,u.curDistance[d])},100)):u.curDistance[d]+u.offsetSum<u.oversizeBorder&&(u.curDistance[d]=u.oversizeBorder,setTimeout(function(){u.movePosition(i,u.curDistance[d])},100)),u.transitionEnd(u.getIndexArr(),u.getCurValue(),d);u.cascade&&u.checkRange(d,u.getIndexArr());break;case"touchmove":a.preventDefault(),u.moveY=a.touches[0].clientY,u.offset=u.moveY-u.oldMoveY,u.updateCurDistance(i,d),u.curDistance[d]=u.curDistance[d]+u.offset,u.movePosition(i,u.curDistance[d]),u.oldMoveY=u.moveY;break}},dragClick:function(a,i,d){var u=this;switch(a=a||window.event,a.type){case"mousedown":u.startY=a.clientY,u.oldMoveY=u.startY,u.clickStatus=!0;break;case"mouseup":if(u.moveEndY=a.clientY,u.offsetSum=u.moveEndY-u.startY,u.oversizeBorder=-(i.getElementsByTagName("li").length-3)*u.liHeight,u.offsetSum==0){var g=parseInt((document.documentElement.clientHeight-u.moveEndY)/40);if(g!=2){var Z=g-2,y=u.curDistance[d]+Z*u.liHeight;y<=2*u.liHeight&&y>=u.oversizeBorder&&(u.curDistance[d]=y,u.movePosition(i,u.curDistance[d]),u.transitionEnd(u.getIndexArr(),u.getCurValue(),d))}}else u.updateCurDistance(i,d),u.curDistance[d]=u.fixPosition(u.curDistance[d]),u.movePosition(i,u.curDistance[d]),u.curDistance[d]+u.offsetSum>2*u.liHeight?(u.curDistance[d]=2*u.liHeight,setTimeout(function(){u.movePosition(i,u.curDistance[d])},100)):u.curDistance[d]+u.offsetSum<u.oversizeBorder&&(u.curDistance[d]=u.oversizeBorder,setTimeout(function(){u.movePosition(i,u.curDistance[d])},100)),u.transitionEnd(u.getIndexArr(),u.getCurValue(),d);u.clickStatus=!1,u.cascade&&u.checkRange(d,u.getIndexArr());break;case"mousemove":a.preventDefault(),u.clickStatus&&(u.moveY=a.clientY,u.offset=u.moveY-u.oldMoveY,u.updateCurDistance(i,d),u.curDistance[d]=u.curDistance[d]+u.offset,u.movePosition(i,u.curDistance[d]),u.oldMoveY=u.moveY);break}}};function oe(p,a){for(var i=[],d=p;d<=a;d++)i.push("".concat(d).padStart(2,"0"));return i}function _(p,a){var i=31;return[1,3,5,7,8,10,12].indexOf(parseInt(a))!=-1?i=31:(i=30,a==2&&p%4==0?i=29:a==2&&p%4!=0&&(i=28)),i}function ze(){var p=new Date;return["".concat(p.getFullYear()),"".concat(p.getMonth()+1).padStart(2,"0"),"".concat(p.getDate()).padStart(2,"0")]}var ft=function(a){var i=a.onChange,d=a.value,u=d===void 0?"":d,g=a.suffix,Z=a.showTime,y=(0,m.useRef)(),N=(0,m.useRef)();return(0,m.useEffect)(function(){var I=ze(),F=(0,Be.Z)(I,3),j=F[0],k=F[1],T=F[2],R=u.split("-"),w=(0,Be.Z)(R,3),z=w[0],G=w[1],te=w[2],ve=oe(1900,2100),Ze=oe(1,12),xe=oe(1,_(z||j,G||k)),Ae=oe(0,23),Je=oe(0,59);y.current=new ne({title:"\u65E5\u671F\u9009\u62E9",position:[ve.indexOf(z||j),Ze.indexOf(G||k),xe.indexOf(te||T)],wheels:Z?[{data:ve},{data:Ze},{data:xe},{data:Ae},{data:Je}]:[{data:ve},{data:Ze},{data:xe}],onShow:function(){document.getElementsByTagName("body")[0].style.overflow="hidden"},onHide:function(){document.getElementsByTagName("body")[0].style.overflow=null},transitionEnd:function(Qe,dt,Ot){Ot===1&&y.current.updateWheel(2,oe(1,_(dt[0],dt[1])))},callback:function(Qe,dt){i(Z?"".concat(dt.slice(0,3).join("-")," ").concat(dt.slice(3).join(":"),":00"):dt.join("-"))}})},[]),(0,r.jsx)("div",{ref:N,children:(0,r.jsx)(st.Z,{prefix:(0,r.jsx)(ie,{}),readOnly:!0,value:u,suffix:g,onClick:function(){y.current.show()}})})};function Me(){var p=new Date;return["".concat(p.getHours()).padStart(2,"0"),"".concat(p.getMinutes()).padStart(2,"0"),"".concat(p.getSeconds()).padStart(2,"0")]}var Kt=function(a){var i=a.onChange,d=a.value,u=d===void 0?"":d,g=(0,m.useRef)(),Z=(0,m.useRef)();return(0,m.useEffect)(function(){var y=Me(),N=(0,Be.Z)(y,3),I=N[0],F=N[1],j=N[2],k=u.split(":"),T=(0,Be.Z)(k,3),R=T[0],w=T[1],z=T[2],G=oe(0,23),te=oe(0,59),ve=oe(0,59);g.current=new ne({title:"\u65F6\u95F4\u9009\u62E9",position:[G.indexOf(R||I),te.indexOf(w||F),ve.indexOf(z||j)],wheels:[{data:G},{data:te},{data:ve}],onShow:function(){document.getElementsByTagName("body")[0].style.overflow="hidden"},onHide:function(){document.getElementsByTagName("body")[0].style.overflow=null},callback:function(xe,Ae){i(Ae.join(":"))}})},[]),(0,r.jsx)("div",{ref:Z,children:(0,r.jsx)(st.Z,{prefix:(0,r.jsx)(Fe,{}),readOnly:!0,value:u,onClick:function(){g.current.show()}})})},zt=c(17672),nn=c(94184),bt=c.n(nn),Xt=c(73935),St=function(a){var i=a.visible,d=a.title,u=a.children,g=a.okContent,Z=a.cancelContent,y=a.height,N=a.onCancel;return Xt.createPortal((0,r.jsxs)("div",{className:bt()("mobileDrawer",{"mobileDrawer-show":i}),children:[(0,r.jsx)("div",{className:"grayLayer",onClick:N}),(0,r.jsxs)("div",{className:"content",children:[(0,r.jsx)("div",{className:"btnBar",children:(0,r.jsxs)("div",{className:"fixWidth",children:[(0,r.jsx)("div",{className:"cancel",children:Z}),d&&(0,r.jsx)("div",{className:"title",children:d}),(0,r.jsx)("div",{className:"ensure",style:{width:80,display:"flex",justifyContent:"space-between"},children:g})]})}),(0,r.jsx)("div",{className:"panel",children:(0,r.jsx)("div",{className:"fixWidth",children:(0,r.jsx)("div",{className:"wheels",style:{height:y},children:u})})})]})]}),document.body)},Ee=function(a){var i=a.onChange,d=(0,m.useRef)(null),u=(0,m.useRef)(),g=(0,m.useRef)(),Z=(0,m.useState)(!1),y=(0,Be.Z)(Z,2),N=y[0],I=y[1];return(0,m.useEffect)(function(){var F=d.current;if(F){var j,k=new zt.Z(d.current,{onBegin:function(){}});u.current=k;var T=Math.max(window.devicePixelRatio||1,1);F.width=F.offsetWidth*T,F.height=F.offsetHeight*T,(j=F.getContext("2d"))===null||j===void 0||j.scale(T,T)}},[]),(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:g.current?"hidden":"visible"},onClick:function(){return I(!0)},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,r.jsx)("img",{src:g.current||void 0,style:{display:"block",width:"100%",height:100,border:g.current?"1px solid #E3E3E3":0},onClick:function(){return I(!0)}}),(0,r.jsx)(St,{visible:N,title:"\u7535\u5B50\u7B7E\u540D",okContent:(0,r.jsx)("div",{style:{userSelect:"none"},onClick:function(){var j;g.current=(j=u.current)===null||j===void 0?void 0:j.toDataURL(),I(!1),i(u.current.toDataURL())},children:"\u786E\u8BA4\u7B7E\u540D"}),cancelContent:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:80},children:[(0,r.jsx)("div",{onClick:function(){return I(!1)},children:"\u53D6\u6D88"}),(0,r.jsx)("div",{style:{color:"#1e83d3"},onClick:function(){var j;return(j=u.current)===null||j===void 0?void 0:j.clear()},children:"\u91CD\u7F6E"})]}),children:(0,r.jsx)("canvas",{ref:d,style:{width:"100%",height:200,touchAction:"none",userSelect:"none"}})})]})};function Ve(p){return p?p.substring(0,p.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var Tt=function(a){var i=a.onChange,d=a.value,u=a.mapMove,g=u===void 0?!1:u,Z=a.optionId,y=(0,m.useRef)(null),N=(0,m.useRef)(),I=(0,m.useRef)(),F=(0,m.useRef)(),j=(0,m.useRef)(),k=(0,m.useState)(function(){if(!!d){var Qe=d.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(Qe&&Qe.length>2)return[parseFloat(Qe[1]),parseFloat(Qe[2])]}}),T=(0,Be.Z)(k,2),R=T[0],w=T[1],z=(0,m.useState)(function(){return Ve(d)}),G=(0,Be.Z)(z,2),te=G[0],ve=G[1],Ze=(0,m.useState)(!1),xe=(0,Be.Z)(Ze,2),Ae=xe[0],Je=xe[1],jt=(0,m.useCallback)(function(Qe){I.current.getLocation(Qe,function(dt,Ot){if(dt==="complete"&&Ot.geocodes.length){var Yt=Ot.geocodes[0].location;F.current.start(Yt)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,m.useEffect)(function(){window["localMap".concat(Z)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(Un){var jn=new AMap.Map("map-".concat(Z),{zoom:16,center:R,dragEnable:g,zoomEnable:g});if(N.current=jn,g){var sn=new Un({mode:"dragMarker",map:jn});sn.on("success",function(Jt){ve(Jt.address),w([Jt.position.lng,Jt.position.lat])}),R?sn.start(R):sn.start(),jn.panBy(0,1),F.current=sn}var _t=new AMap.Geocoder({city:"010"});I.current=_t;var on=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});j.current=on,on.getCurrentPosition(function(Jt,en){Jt=="complete"?g?positionPicker.start(en.position):(jn.setCenter(en.position),ve(en.formattedAddress),w([en.position.lng,en.position.lat])):console.error(en)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var Qe="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(Z,"&plugin=AMap.Geocoder,AMap.Geolocation"),dt=document.createElement("script");dt.src=Qe,document.head.appendChild(dt);var Ot="https://webapi.amap.com/ui/1.1/main-async.js",Yt=document.createElement("script");Yt.src=Ot,document.head.appendChild(Yt)},[]),(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)(st.Z.TextArea,{readOnly:!0,value:Ve(d),onClick:function(){return Je(!0)}}),(0,r.jsxs)(St,{visible:Ae,height:450,onCancel:function(){Je(!1)},okContent:(0,r.jsx)("div",{style:{userSelect:"none"},onClick:function(){R&&i("".concat(te,"[").concat(R[0],", ").concat(R[1],"]")),Je(!1)},children:"\u786E\u8BA4\u9009\u62E9"}),cancelContent:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:[!g&&(0,r.jsx)(qe.Z,{type:"link",children:"\u83B7\u53D6\u4F4D\u7F6E"}),g&&(0,r.jsx)(st.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(dt){return jt(dt)}})]}),children:[(0,r.jsx)("div",{ref:y,id:"map-".concat(Z),style:{height:390}}),(0,r.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:te})]})]})},at=function(a){var i,d=a.optionId,u=a.questionId,g=a.checked,Z=a.checkedCount,y=(0,A.Al)(),N=y.statistics,I=N==null?void 0:N.questionStatistics[u],F=((I==null?void 0:I.optionStatistics.reduce(function(T,R){return T+R.count},0))||0)+Z,j=(I==null||(i=I.optionStatistics.find(function(T){return T.optionId===d}))===null||i===void 0?void 0:i.count)||0;j=g?j+1:j;var k="".concat(Math.floor(j/F*1e3)/10,"%");return Z===0?(0,r.jsx)(r.Fragment,{}):(0,r.jsxs)("span",{className:"vote-info",children:[(0,r.jsxs)("span",{className:"vote-info-cnt ",children:[j,"\u7968"]}),(0,r.jsx)("span",{className:"vote-info-percent ",children:k}),(0,r.jsx)("div",{className:"vote-info-bar",children:(0,r.jsx)("div",{className:"vote-info-bar-fill",style:{width:k}})})]})},ke=c(80937),Ue=c(3024),Cn=(0,ke.Pi)(function(){var p=(0,m.useContext)(ae.ZX),a=p.progressBar,i=(0,A.AK)(),d=(0,A.Rk)(),u=d.progress;return a?(0,r.jsx)(Ue.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,r.jsx)("div",{className:i+"-progress",children:(0,r.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,r.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(u*100,"%")}})})})}):(0,r.jsx)(r.Fragment,{})});function Lt(p){var a=p.headerVisible,i=p.footerVisible,d=p.schema,u=(0,A.AK)(),g=(0,A.Al)(),Z=function(){var N,I=(N=d.attribute)===null||N===void 0?void 0:N.headerImage;if(I)return(0,r.jsx)("img",{src:"/api/public/preview/".concat(I),style:{maxWidth:"100%"}})};return(0,r.jsxs)("div",{className:bt()(u,{preview:g.isPreview}),children:[(0,r.jsx)(Cn,{}),(0,r.jsx)("div",{className:u+"-banner",children:Z()}),a&&(0,r.jsx)($e,{}),(0,r.jsx)(Pe.ZP,{locale:e.Z,children:(0,r.jsx)(yt,{children:p.children})}),i&&(0,r.jsx)($,{})]})}(0,Ce.eC)("Survey",Lt,"antdmobile");var yn=c(13062),Ge=c(71230),_e=c(89032),et=c(15746),Vt=c(76826);function rn(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=(0,A.AK)("-body-question");function y(N,I){u[N]=I,I===""&&delete u[N],i((0,U.Z)({},u))}return(0,r.jsx)("div",{children:g==null?void 0:g.map(function(N){var I=N.id,F=N.attribute,j=N.title,k=(0,Vt.Ck)(F==null?void 0:F.autoSize,[2,4]);return(0,r.jsxs)(Ge.Z,{style:{marginBottom:10},"data-id":I,children:[j&&(0,r.jsx)(et.Z,{className:Z+"-option",span:4,children:N.title&&(0,r.jsx)("span",{className:Z+"-option-title",children:N.title})},N.id),(0,r.jsx)(et.Z,{span:24,children:(0,r.jsx)(st.Z.TextArea,{autoSize:{minRows:k[1],maxRows:k[2]},value:u[I]||"",onChange:function(R){return y(I,R.target.value)}})})]},I)})})}rn.Preview=function(p){return(0,r.jsx)("div",{children:"hello world"})},(0,Ce.RM)("Textarea",rn,"antdmobile");function qt(p,a){var i;return((i=p.children)===null||i===void 0?void 0:i.reduce(function(d,u,g){if(g===0)d.push(p.dataSource||[]);else{var Z=p.children[g-1].id,y=a[Z];if(y){var N;d.push(((N=d.slice(-1)[0].find(function(I){return I.value===y}))===null||N===void 0?void 0:N.children)||[])}}return d},[]))||[]}function hn(p){var a,i=p.schema,d=p.onChange,u=p.value,g=u===void 0?{}:u,Z=(0,m.useState)(p.value||{}),y=(0,Be.Z)(Z,2),N=y[0],I=y[1],F=(0,m.useState)(qt(i,g)),j=(0,Be.Z)(F,2),k=j[0],T=j[1];(0,m.useEffect)(function(){if(Object.keys(N).length>0){var w=qt(i,N);T(w)}},[N,i]);var R=function(z,G,te){var ve,Ze={};(ve=i.children)===null||ve===void 0||ve.forEach(function(xe,Ae){te>Ae?Ze[xe.id]=N[xe.id]:te===Ae&&(Ze[z]=G)}),I(Ze),qt(i,Ze).filter(function(xe){return xe.length>0}).length===Object.values(Ze).length&&d(Ze)};return(0,r.jsx)(Ge.Z,{gutter:[10,10],children:(a=i.children)===null||a===void 0?void 0:a.map(function(w,z){return(0,r.jsx)(et.Z,{span:24,children:(0,r.jsx)(Ie,{options:k[z]||[],value:N[w.id]||"",onChange:function(te){return R(w.id,te,z)}},w.id)},w.id)})})}(0,Ce.RM)("Cascader",hn,"antdmobile");function X(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children;function Z(y,N){u[y]=N,N===""&&delete u[y],i((0,U.Z)({},u))}return(0,r.jsx)("div",{children:g==null?void 0:g.map(function(y){var N=y.id,I=y.attribute,F=y.title,j=I==null?void 0:I.suffix,k=I==null?void 0:I.dataType,T=I!=null&&I.calculate?(0,r.jsx)(Ne,{}):void 0;return(0,r.jsxs)(Ge.Z,{gutter:[10,0],"data-id":N,children:[F&&(0,r.jsx)(et.Z,{span:24,children:y.title&&(0,r.jsx)("span",{className:T+"-option-title",children:(0,r.jsx)(He.Z,{html:y.title})})},y.id),(0,r.jsx)(et.Z,{span:24,children:(0,r.jsx)(de,{type:k,value:u[N],onChange:function(w){return Z(N,w)},prefix:T,suffix:j&&(0,r.jsx)("span",{className:T+"-option-suffix",children:j})})})]},N)})})}(0,Ce.RM)("FillBlank",X,"antdmobile"),(0,Ce.RM)("MultipleBlank",X,"antdmobile");var Q=c(83279),me=c(43358),le=c(97268),ge=c(79521),ee=c(68489),tt=c(54121),Re=function(a){var i=(0,ee.XI)(200),d=(0,Be.Z)(i,2),u=d[0],g=d[1],Z=(0,ee.XI)(200),y=(0,Be.Z)(Z,2),N=y[0],I=y[1];return(0,r.jsxs)("div",(0,U.Z)((0,U.Z)({},a.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:u,children:[a.cells.map(function(F){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},F.getCellProps()),{},{className:"td","data-id":"".concat(a.i,"-").concat(F.column.id),children:F.render("Cell")}))}),(0,r.jsx)("div",{ref:N,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(tt.Z,{onClick:function(){a.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:g||I?"visible":"hidden"}})})]}))};function ht(p){var a=p.columns,i=p.data,d=p.onAdd,u=p.onDelete,g=m.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),Z=(0,ge.useTable)({columns:a,data:i,defaultColumn:g},ge.useBlockLayout),y=Z.getTableProps,N=Z.getTableBodyProps,I=Z.headerGroups,F=Z.rows,j=Z.prepareRow;return(0,r.jsxs)("div",(0,U.Z)((0,U.Z)({},y()),{},{className:"table",children:[(0,r.jsx)("div",{children:I.map(function(k){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},k.getHeaderGroupProps()),{},{className:"tr",children:k.headers.map(function(T){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},T.getHeaderProps()),{},{className:"th",children:T.render("Header")}))})}))})}),(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},N()),{},{children:F.map(function(k,T){return j(k),(0,m.createElement)(Re,(0,U.Z)((0,U.Z)({},k),{},{key:T,i:T,onDelete:function(){return u(T)}}))})})),(0,r.jsx)("div",{className:"footer",onClick:d,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Ft(p){var a=p.schema,i=p.onChange,d=p.value||[{}],u=a.children,g=u===void 0?[]:u,Z=(0,m.useMemo)(function(){return g.map(function(y){var N;return{Header:(0,r.jsx)(He.Z,{html:y.title}),width:(N=y.attribute)===null||N===void 0?void 0:N.width,accessor:y.id,Cell:function(F){var j,k=F.value,T=F.row,R=F.data;if(((j=y.attribute)===null||j===void 0?void 0:j.dataType)==="select"){var w;return(0,r.jsx)(le.Z,{placeholder:"\u8BF7\u9009\u62E9",value:k,style:{minWidth:80},onChange:function(G){R[T.index][y.id]=G},options:((w=y.dataSource)===null||w===void 0?void 0:w.map(function(z){return{label:z.label,value:z.value}}))||[]})}else return(0,r.jsx)(st.Z,{value:k,onChange:function(G){R[T.index][y.id]=G.target.value,i((0,Q.Z)(R))}})}}})},[]);return(0,r.jsx)("div",{className:"table-container",children:(0,r.jsx)(ht,{columns:Z,data:d,onAdd:function(){d.push({}),i((0,Q.Z)(d))},onDelete:function(N){d.splice(N,1),i((0,Q.Z)(d))}})})}(0,Ce.RM)("MatrixAuto",Ft,"antdmobile");var ut=c(93224);function Bt(p){var a=p.columns,i=p.data,d=m.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),u=(0,ge.useTable)({columns:a,data:i,defaultColumn:d},ge.useBlockLayout),g=u.getTableProps,Z=u.getTableBodyProps,y=u.headerGroups,N=u.rows,I=u.prepareRow;return(0,r.jsxs)("div",(0,U.Z)((0,U.Z)({},g()),{},{className:"table",children:[(0,r.jsx)("div",{children:y.map(function(F){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},F.getHeaderGroupProps()),{},{className:"tr",children:F.headers.map(function(j){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},j.getHeaderProps()),{},{className:"th",children:j.render("Header")}))})}))})}),(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},Z()),{},{children:N.map(function(F){return I(F),(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},F.getRowProps()),{},{className:"tr",children:F.cells.map(function(j){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},j.getCellProps()),{},{className:"td","data-id":"".concat(F.original.rowId,"-").concat(j.column.id),children:j.render("Cell")}))})}))})}))]}))}function lt(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=g===void 0?[]:g,y=a.row,N=y===void 0?[]:y,I=(0,m.useMemo)(function(){var j,k=Z.map(function(T){var R;return{Header:(0,r.jsx)(He.Z,{html:T.title}),width:(R=T.attribute)===null||R===void 0?void 0:R.width,accessor:T.id,Cell:function(z){var G=z.value,te=z.row,ve=z.data;return(0,r.jsx)(de,{value:G,onChange:function(xe){var Ae={};ve.forEach(function(Je,jt){var Qe=Je.title,dt=Je.rowId,Ot=(0,ut.Z)(Je,["title","rowId"]);te.index===jt&&(Ot[T.id]=xe),Ae[dt]=Ot}),i(Ae)}})}}});return k.splice(0,0,{Header:(0,r.jsx)(r.Fragment,{}),width:((j=a.attribute)===null||j===void 0?void 0:j.width)||150,accessor:"title"}),k},[]),F=N.map(function(j,k){var T=j.id,R=u[T]||{};return(0,U.Z)({title:(0,r.jsx)(He.Z,{html:j.title}),rowId:T},R)});return(0,r.jsx)("div",{className:"table-container",children:(0,r.jsx)(Bt,{columns:I,data:F})})}(0,Ce.RM)("MatrixFillBlank",lt,"antdmobile");var Pt=c(88983),wt=c(47933);function it(p){var a=p.columns,i=p.data,d=m.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),u=(0,ge.useTable)({columns:a,data:i,defaultColumn:d},ge.useBlockLayout),g=u.getTableProps,Z=u.getTableBodyProps,y=u.headerGroups,N=u.rows,I=u.prepareRow;return(0,r.jsxs)("div",(0,U.Z)((0,U.Z)({},g()),{},{className:"table",children:[(0,r.jsx)("div",{children:y.map(function(F){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},F.getHeaderGroupProps()),{},{className:"tr",children:F.headers.map(function(j){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},j.getHeaderProps()),{},{className:"th",children:j.render("Header")}))})}))})}),(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},Z()),{},{children:N.map(function(F){return I(F),(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},F.getRowProps()),{},{className:"tr",children:F.cells.map(function(j){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},j.getCellProps()),{},{className:"td",children:j.render("Cell")}))})}))})}))]}))}function Le(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=g===void 0?[]:g,y=a.row,N=y===void 0?[]:y,I=(0,m.useMemo)(function(){var j,k=Z.map(function(T){var R;return{Header:(0,r.jsx)(He.Z,{html:T.title}),width:(R=T.attribute)===null||R===void 0?void 0:R.width,accessor:T.id,Cell:function(z){var G=z.value,te=z.row,ve=z.data;return(0,r.jsx)("div",{onClick:function(){var xe={};ve.forEach(function(Ae,Je){var jt=Ae.title,Qe=Ae.rowId,dt=(0,ut.Z)(Ae,["title","rowId"]);te.index===Je?(xe[Qe]={},xe[Qe][T.id]=!0):xe[Qe]=dt}),i(xe)},children:(0,r.jsx)(wt.ZP,{checked:!!G})})}}});return k.splice(0,0,{Header:(0,r.jsx)(r.Fragment,{}),width:((j=a.attribute)===null||j===void 0?void 0:j.width)||150,accessor:"title"}),k},[]),F=N.map(function(j,k){var T=j.id,R=u[T]||{};return(0,U.Z)({title:(0,r.jsx)(He.Z,{html:j.title}),rowId:T},R)});return(0,r.jsx)("div",{className:"table-container",children:(0,r.jsx)(it,{columns:I,data:F})})}(0,Ce.RM)("MatrixRadio",Le,"antdmobile");var rt=c(63185),je=c(9676);function ct(p){var a=p.columns,i=p.data,d=m.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),u=(0,ge.useTable)({columns:a,data:i,defaultColumn:d},ge.useBlockLayout),g=u.getTableProps,Z=u.getTableBodyProps,y=u.headerGroups,N=u.rows,I=u.prepareRow;return(0,r.jsxs)("div",(0,U.Z)((0,U.Z)({},g()),{},{className:"table",children:[(0,r.jsx)("div",{children:y.map(function(F){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},F.getHeaderGroupProps()),{},{className:"tr",children:F.headers.map(function(j){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},j.getHeaderProps()),{},{className:"th",children:j.render("Header")}))})}))})}),(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},Z()),{},{children:N.map(function(F){return I(F),(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},F.getRowProps()),{},{className:"tr",children:F.cells.map(function(j){return(0,r.jsx)("div",(0,U.Z)((0,U.Z)({},j.getCellProps()),{},{className:"td",children:j.render("Cell")}))})}))})}))]}))}function Ye(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=g===void 0?[]:g,y=a.row,N=y===void 0?[]:y,I=(0,m.useMemo)(function(){var j,k=Z.map(function(T){var R;return{Header:(0,r.jsx)(He.Z,{html:T.title}),width:(R=T.attribute)===null||R===void 0?void 0:R.width,accessor:T.id,Cell:function(z){var G=z.value,te=z.row,ve=z.data;return(0,r.jsx)("div",{onClick:function(xe){var Ae=!G,Je={};ve.forEach(function(jt,Qe){var dt=jt.title,Ot=jt.rowId,Yt=(0,ut.Z)(jt,["title","rowId"]);te.index===Qe&&(Ae?Yt[T.id]=!0:delete Yt[T.id]),Je[Ot]=Yt}),i(Je)},children:(0,r.jsx)(je.Z,{checked:!!G})})}}});return k.splice(0,0,{Header:(0,r.jsx)(r.Fragment,{}),width:((j=a.attribute)===null||j===void 0?void 0:j.width)||150,accessor:"title"}),k},[]),F=N.map(function(j,k){var T=j.id,R=u[T]||{};return(0,U.Z)({title:(0,r.jsx)(He.Z,{html:j.title}),rowId:T},R)});return(0,r.jsx)("div",{className:"table-container",children:(0,r.jsx)(ct,{columns:I,data:F})})}(0,Ce.RM)("MatrixCheckbox",Ye,"antdmobile");var we=c(32059);function mt(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=a.attribute,y=24/((Z==null?void 0:Z.columns)||1),N=(0,A.AK)("-body-question"),I=!!(Z!=null&&Z.statEnabled);function F(j,k,T){var R,w,z=(R=a.children)===null||R===void 0?void 0:R.find(function(te){return te.id===j}),G=z==null||(w=z.attribute)===null||w===void 0?void 0:w.dataType;k?u[j]=G?T:!0:delete u[j],i((0,U.Z)({},u))}return(0,m.useEffect)(function(){g==null||g.forEach(function(j){var k;(k=j.attribute)!==null&&k!==void 0&&k.defaultChecked&&Object.keys(u).length===0&&i((0,we.Z)({},j.id,!0))})},[]),(0,r.jsx)("div",{children:(0,r.jsx)(Ge.Z,{children:g==null?void 0:g.map(function(j){var k,T,R=j.title,w=j.id,z=(k=j.attribute)===null||k===void 0?void 0:k.dataType,G=(T=j.attribute)===null||T===void 0?void 0:T.suffix;return(0,r.jsxs)(et.Z,{span:y,className:N+"-option","data-id":w,children:[(0,r.jsx)(je.Z,{className:"option-item",value:w,checked:u.hasOwnProperty(w),onChange:function(ve){return F(w,ve.target.checked)},children:(0,r.jsx)(D.hl,{html:R})}),I&&(0,r.jsx)(at,{checked:!!u[w],optionId:w,questionId:a.id,checkedCount:Object.keys(u).length}),z&&(0,r.jsx)(de,{value:u[w],style:{maxWidth:120},type:z,onChange:function(ve){return F(w,!0,ve)},suffix:G&&(0,r.jsx)("span",{className:N+"-option-suffix",children:(0,r.jsx)(D.hl,{html:G})})})]},w)})})})}(0,Ce.RM)("Checkbox",mt,"antdmobile");function an(p){var a,i=p.schema,d=p.onChange,u=p.value,g=u===void 0?{}:u;function Z(y){var N,I=(N=i.children)===null||N===void 0?void 0:N.find(function(j){return j.id===y});if(I){var F=I.title;d((0,we.Z)({},y,F))}}return(0,m.useEffect)(function(){var y;(y=i.children)===null||y===void 0||y.forEach(function(N){var I,F=N.id,j=N.title;(I=N.attribute)!==null&&I!==void 0&&I.defaultChecked&&Object.keys(g).length===0&&d((0,we.Z)({},F,j))})},[]),(0,r.jsx)(Ge.Z,{children:(0,r.jsx)(et.Z,{span:24,children:(0,r.jsx)(Ie,{value:Object.keys(g)[0],onChange:Z,options:((a=i.children)===null||a===void 0?void 0:a.map(function(y){return{label:y.title,value:y.id}}))||[]})})})}(0,Ce.RM)("Select",an,"antdmobile");var Dt=wt.ZP.Group;function pt(p){var a,i=p.schema,d=p.onChange,u=p.value,g=u===void 0?{}:u,Z=i.children,y=(0,A.AK)("-body-question"),N=!!((a=i.attribute)!==null&&a!==void 0&&a.statEnabled);function I(j){var k,T=(k=i.children)===null||k===void 0?void 0:k.find(function(G){return G.id===j});if(g.hasOwnProperty(j))d(void 0);else if(T){var R=T.id,w=T.attribute,z=w==null?void 0:w.dataType;d((0,we.Z)({},j,z?g[R]:!0))}}function F(j,k){d((0,we.Z)({},j,k))}return(0,m.useEffect)(function(){var j;(j=i.children)===null||j===void 0||j.forEach(function(k){var T,R=k.id,w=k.title,z=k.attribute,G=z==null?void 0:z.dataType;(T=k.attribute)!==null&&T!==void 0&&T.defaultChecked&&Object.keys(g).length===0&&d((0,we.Z)({},R,G?g[R]:w))})},[]),(0,r.jsx)("div",{children:(0,r.jsx)(Dt,{onChange:function(k){},value:Object.keys(g)[0],style:{width:"100%"},children:(0,r.jsx)(Ge.Z,{children:Z==null?void 0:Z.map(function(j){var k,T,R=j.title,w=j.id,z=j.attribute,G=(k=j.attribute)===null||k===void 0?void 0:k.dataType,te=(T=j.attribute)===null||T===void 0?void 0:T.suffix;return(0,r.jsxs)(et.Z,{span:24,className:y+"-option","data-id":w,children:[(0,r.jsx)(wt.ZP,{value:w,className:"option-item",onClick:function(Ze){I(w)},children:(0,r.jsx)(D.hl,{html:R})}),N&&(0,r.jsx)(at,{checked:!!g[w],optionId:w,questionId:i.id,checkedCount:Object.keys(g).length}),G&&(0,r.jsx)(de,{value:g[w],type:G,style:{maxWidth:120},onChange:function(Ze){return F(w,Ze)},suffix:te&&(0,r.jsx)("span",{className:y+"-option-suffix",children:(0,r.jsx)(D.hl,{html:te})})})]},w)})})})})}(0,Ce.RM)("Radio",pt,"antdmobile");var We=c(48736),bn=c(27049);function Sn(p){var a=(0,A.AK)("-body-question");return(0,r.jsx)("div",{className:a,children:(0,r.jsx)(bn.Z,{plain:!0})})}(0,Ce.RM)("SplitLine",Sn,"antdmobile");function Mn(p){var a=(0,A.AK)("-body-question");return(0,r.jsx)("div",{className:a,children:(0,r.jsx)(D.hl,{html:"".concat(p.replaceTitle||p.schema.title||"")})})}(0,Ce.RM)("Remark",Mn,"antdmobile");var _n=c(34792),In=c(48086),kn=c(3182),Rn=c(43185),Ut=c(11324),ea=c(94043),mn=c.n(ea),ta=c(43347),un=Ut.Z.Dragger;function gt(p){var a=p.schema,i=p.onChange,d=p.value,u=p.readOnly,g=a.children,Z=(0,A.Al)(),y=(0,m.useState)(),N=(0,Be.Z)(y,2),I=N[0],F=N[1];(0,m.useEffect)(function(){var T=a.children[0].id,R=d&&d[T]||[];I==null&&R.length>0&&ee.hi.loadFiles({ids:R}).then(function(w){F(w==null?void 0:w.map(function(z){return{name:z.originalName,uid:z.id,status:"done"}}))})},[d]);var j=function(){var T=(0,kn.Z)(mn().mark(function R(w){var z,G,te,ve;return mn().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:z=w.onSuccess,G=w.onError,te=w.file,ve=w.onProgress,Z.onUpload&&Z.onUpload(te,function(Ae){ve&&ve({percent:Ae.loaded/Ae.total*100})}).then(function(Ae){if(Ae.success&&z&&z(Ae.data),!Ae.success&&G){var Je=new Error("Some error");G({event:Je})}});case 2:case"end":return xe.stop()}},R)}));return function(w){return T.apply(this,arguments)}}(),k=function(R,w){if(F(R.fileList),(R.file.status==="removed"||R.file.status==="done")&&!R.fileList.find(function(G){return G.status!=="done"})){var z=R.fileList.filter(function(G){return G.status==="done"}).map(function(G){var te;return((te=G.response)===null||te===void 0?void 0:te.id)||G.uid});z.length===0?i(void 0):i((0,we.Z)({},w,z))}};return(0,r.jsx)("div",{children:g==null?void 0:g.map(function(T){var R=T.id,w=T.attribute,z=w===void 0?{}:w,G=[],te=z.maxFileCount,ve=z.maxFileSize,Ze=z.fileAccept,xe=z.cameraOnly;return te&&G.push("\u6700\u591A\u4E0A\u4F20".concat(te,"\u4E2A")),ve&&G.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(ve,"M\u4EE5\u5185")),Ze&&G.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(Ze)),(0,r.jsxs)(un,{multiple:!0,capture:xe?"environment":void 0,disabled:u,maxCount:(z==null?void 0:z.maxFileCount)||20,accept:xe?"image/*":void 0,beforeUpload:function(Je){return z!=null&&z.maxFileSize&&Je.size>z.maxFileSize*1024*1024?(In.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(z.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Ut.Z.LIST_IGNORE):!0},customRequest:j,onChange:function(Je){return k(Je,R)},fileList:I,children:[(0,r.jsx)("p",{className:"ant-upload-drag-icon",children:(0,r.jsx)(ta.Z,{})}),(0,r.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,r.jsx)("p",{className:"ant-upload-hint",children:G.join(",")})]},R)})})}gt.Preview=function(p){return(0,r.jsx)("div",{children:"hello world"})},(0,Ce.RM)("Upload",gt,"antdmobile");var Fn=c(34669),xn=c(61873);function wn(p){var a=p.schema,i=p.onChange,d=a.children,u=(0,A.Al)(),g=(0,m.useState)(0),Z=(0,Be.Z)(g,2),y=Z[0],N=Z[1];function I(F,j){var k="signature-".concat(j,"-").concat((0,ae.kb)(6),".png");if(!u.onUpload){i((0,we.Z)({},j,[k]));return}fetch(F).then(function(T){return T.blob()}).then(function(T){var R=new File([T],k,{type:"image/png"});u.onUpload(R,function(w){N(w.loaded/w.total*100)}).then(function(w){w.success&&w.data.id&&i((0,we.Z)({},j,[w.data.id]))})})}return(0,r.jsx)("div",{children:d==null?void 0:d.map(function(F){var j=F.id,k=F.title;return(0,r.jsxs)(Ge.Z,{gutter:[10,0],"data-id":j,children:[k&&(0,r.jsx)(et.Z,{span:24},F.id),(0,r.jsxs)(et.Z,{span:24,children:[(0,r.jsx)(Ee,{onChange:function(R){return I(R,j)}}),y>0&&y!==100&&(0,r.jsx)(xn.Z,{percent:y,size:"small",showInfo:!1})]})]},j)})})}(0,Ce.RM)("Signature",wn,"antdmobile");var na=c(96433),pn=c(2864),On=c(41687),Ln=c(46870),Gt=c(18613),aa=c(57206),ia={1:(0,r.jsx)(On.Z,{}),2:(0,r.jsx)(On.Z,{}),3:(0,r.jsx)(Ln.Z,{}),4:(0,r.jsx)(Gt.Z,{}),5:(0,r.jsx)(Gt.Z,{})};function Hn(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=g===void 0?[]:g;function y(I,F){i((0,we.Z)({},I,F))}var N=function(F){var j=F.attribute||{},k=F.id,T=j.scope,R=T===void 0?"[0,5]":T,w=j.scoreStyle,z=R.replace("[","").replace("]","").split(","),G=(0,Be.Z)(z,2),te=G[0],ve=G[1];return w==="heart"?(0,r.jsx)(pn.Z,{defaultValue:parseInt(te),character:(0,r.jsx)(aa.Z,{}),style:{color:"#ea7463"},count:parseInt(ve),onChange:function(xe){return y(k,xe)}},k):w==="smile"?(0,r.jsx)(pn.Z,{defaultValue:parseInt(te),character:function(xe){var Ae=xe.index;return ia[Ae+1]},count:parseInt(ve),onChange:function(xe){return y(k,xe)}},k):(0,r.jsx)(pn.Z,{defaultValue:parseInt(te),count:parseInt(ve),onChange:function(xe){return y(k,xe)}},k)};return(0,r.jsx)(Ge.Z,{children:Z.map(function(I){return N(I)})})}(0,Ce.RM)("Score",Hn,"antdmobile");var Ht=c(55686),En=le.Z.Option;function Nn(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=g===void 0?[]:g,y=Z[0].id,N=(0,m.useState)([]),I=(0,Be.Z)(N,2),F=I[0],j=I[1];function k(w){y&&i((0,we.Z)({},y,w))}var T=(0,ee.zE)(function(w){ee.hi.userSelect({name:w,selected:u[y]||[]}).then(function(z){z.success&&j(z.data)})},5),R=function(z){k(z?F.map(function(G){return G.userId}):void 0)};return(0,m.useEffect)(function(){var w;T(""),(w=a.children)===null||w===void 0||w.forEach(function(z){var G,te=z.id;(G=z.attribute)!==null&&G!==void 0&&G.defaultChecked&&Object.keys(u).length===0&&i((0,we.Z)({},te,!0))})},[]),(0,r.jsx)(Ge.Z,{children:(0,r.jsx)(et.Z,{span:24,children:(0,r.jsx)(le.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,filterOption:!1,mode:"multiple",onClear:function(){i(void 0)},value:u[y]||[],onSearch:T,showSearch:!0,onChange:k,dropdownRender:function(z){return(0,r.jsxs)("div",{children:[z,(0,r.jsx)(bn.Z,{style:{margin:"4px 0"}}),(0,r.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,r.jsx)(je.Z,{onChange:function(te){R(te.target.checked)},children:"\u5168\u9009"})})]})},children:F.map(function(w){return(0,r.jsx)(En,{value:w.userId,label:w.name,children:(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{role:"img",style:{marginRight:10},children:(0,r.jsx)(Ht.Z,{user:w,size:20})}),w.name," ",w.deptName&&"(".concat(w.deptName,")")]})},w.userId)})})})})}Nn.Preview=function(p){return(0,r.jsx)("div",{children:"hello world"})},(0,Ce.RM)("User",Nn,"antdmobile");var Ta=c(62999),ra=c(51753),gn=c(60780),$n=c.n(gn);function Zn(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=g===void 0?[]:g,y=Z[0].id,N=(0,m.useState)([]),I=(0,Be.Z)(N,2),F=I[0],j=I[1];function k(R){y&&((R==null?void 0:R.length)===0?i(void 0):i((0,we.Z)({},y,R==null?void 0:R.map(function(w){return w.value}))))}var T=(0,m.useMemo)(function(){return $n()(F.map(function(R){return{title:R.name,key:R.id,value:R.id,parentId:R.parentId}}),{parentProperty:"parentId",customID:"key"})},[F]);return(0,m.useEffect)(function(){ee.hi.deptSelect({}).then(function(R){R.success&&j(R.data)})},[]),(0,r.jsx)(Ge.Z,{children:(0,r.jsx)(et.Z,{span:24,children:(0,r.jsx)(ra.Z,{style:{width:"100%"},treeCheckable:!0,value:(u[y]||[]).map(function(R){return{value:R}}),treeCheckStrictly:!0,showSearch:!1,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:T,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:k})})})}Zn.Preview=function(p){return(0,r.jsx)("div",{children:"hello world"})},(0,Ce.RM)("Dept",Zn,"antdmobile");function zn(p){for(var a=[],i=2;i<p+2;i++)a.push(i/(p+2));return a}function Vn(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=g===void 0?[]:g;function y(I,F){i((0,we.Z)({},I,F))}var N=function(F){var j=F.id,k=u[j],T=zn(k||0);return(0,r.jsxs)("div",{className:"nps",children:[(0,r.jsx)("div",{className:"nps-container",children:[0,1,2,3,4,5,6,7,8,9,10].map(function(R,w){var z={background:"#2672ff",opacity:T[R]};return(0,r.jsx)("div",{className:"nps-item",style:k>=R?z:void 0,onClick:function(){return y(j,w)},children:R},R)})}),(0,r.jsxs)("div",{className:"nps-tip",children:[(0,r.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,r.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]},j)};return(0,r.jsx)(Ge.Z,{children:Z.map(function(I){return N(I)})})}(0,Ce.RM)("Nps",Vn,"antdmobile");var An=c(91220);function Tn(p,a,i){if(!p)return"";var d=RegExp("_{3,}","g"),u=p.matchAll(d),g=[],Z=(0,An.Z)(u),y;try{for(Z.s();!(y=Z.n()).done;){var N=y.value,I=N.index,F=N.index+N[0].length;g.push([I,F])}}catch(te){Z.e(te)}finally{Z.f()}if(g.length===0)return p;for(var j=g[0][0]===0?"":p.substring(0,g[0][0]),k=0;k<g.length;k++){var T=g[k],R=g[k+1],w=p.substring(T[0],T[1]),z=p.substring(T[1],R?R[0]:p.length),G=i?i[a[k].id]:"";j+='<input data-id="'.concat(a[k].id,`" value='`).concat(G,`' class="mod_fillblank" style="width: `).concat(12*w.length,'px;">'),j+=z}return j}function Yn(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children,Z=a.attribute,y=Z===void 0?{}:Z,N=y.content;function I(F,j){u[F]=j,j===""&&delete u[F],i((0,U.Z)({},u))}return(0,m.useEffect)(function(){g==null||g.forEach(function(F){var j=document.querySelector("[data-id='".concat(F.id,"']"));if(j){var k=u[F.id];k&&(j.value=k),j.onchange=function(T){var R;I(F.id,(R=T.target)===null||R===void 0?void 0:R.value)}}})},[]),(0,m.useEffect)(function(){Object.keys(u).forEach(function(F){var j=u[F],k=document.querySelector("[data-id='".concat(F,"']"));j!==k.value&&(k.value=j===void 0?"":j)})},[u]),(0,r.jsx)("div",{children:(0,r.jsx)(He.Z,{html:Tn(N,g),replaceP:!1})})}(0,Ce.RM)("HorzBlank",Yn,"antdmobile");function Wn(p){var a=p.schema,i=p.onChange,d=p.value,u=d===void 0?{}:d,g=a.children;function Z(y,N){i((0,we.Z)({},N,y))}return(0,r.jsx)("div",{children:g==null?void 0:g.map(function(y){var N=y.id,I=y.title,F=y.attribute,j=F===void 0?{}:F,k=j.mapMove;return(0,r.jsxs)(Ge.Z,{gutter:[10,0],"data-id":N,children:[I&&(0,r.jsx)(et.Z,{span:24},y.id),(0,r.jsx)(et.Z,{span:24,children:(0,r.jsx)(Tt,{optionId:N,onChange:function(R){return Z(R,N)},value:u[N],mapMove:k})})]},N)})})}(0,Ce.RM)("Address",Wn,"antdmobile");var Bn=function(a){return(0,r.jsx)(r.Fragment,{children:a.children})},Pn=Bn},57007:function($t,At,c){"use strict";c.r(At),c.d(At,{SurveyEditor:function(){return ya},default:function(){return Cr}});var He=c(34792),ae=c(48086),m=c(67294),A=c(80937),Ce=c(94184),r=c.n(Ce),Et=c(72625),Mt=c(68489),S=c(76826),Be=c(71211),D=c(9778),Y=c(94657),be=c(29656),Pe=c(96876),e=c(85893),$e={mode:"application/json",lineWrapping:!0,lineNumbers:!0},yt=(0,A.Pi)(function(){var s=(0,D.cF)(),n=(0,m.useState)(),t=(0,Y.Z)(n,2),o=t[0],f=t[1],h=(0,D.AK)("main-panel-content"),v=(0,m.useRef)(),l=function(B,b){f(B)},x=(0,m.useCallback)(function(){clearTimeout(v.current),v.current=window.setTimeout(function(){return s.from(JSON.parse(o.getValue()))},1e3)},[o]);return(0,e.jsx)("div",{className:h+"-json-preview",children:(0,e.jsx)(be.Rt,{autoCursor:!1,value:JSON.stringify(s.serialize(),null," "),options:$e,editorDidMount:l,onChange:function(){x()}})})}),H=c(11849),qe=c(58802),$=c(84784);function kt(){var s,n,t=(0,A.cI)(),o=(0,m.useContext)(S.Gb),f=o.node,h=(0,D.jE)(),v=h.mode,l=(s=t.values.attribute)===null||s===void 0?void 0:s.required,x=(n=t.values.attribute)===null||n===void 0?void 0:n.examScore;return(0,e.jsxs)("div",{className:"q-title-wrap",children:[(0,e.jsx)("div",{className:"q-seq",children:f.index+1}),l&&(0,e.jsx)("span",{className:"required",children:"*"}),(0,e.jsx)($.r,{name:"title",style:{width:350},innerStyle:{fontSize:"17px"}}),v==="exam"&&(0,e.jsxs)("span",{className:"q-score",children:["(\u6700\u9AD8\u5206\u503C: ",x," \u5206)"]})]})}var st=(0,A.Pi)(kt);function U(){return(0,e.jsx)("div",{className:"q-desc-wrap"})}var Rt=c(49111),Qt=c(19650),L=c(75414),ot=c(11628),Se=(0,A.Pi)(function(s){var n,t=s.visible,o=(0,m.useContext)(S.xI),f=o.operation,h=(0,m.useContext)(S.Gb),v=h.node,l=h.isFocus,x=(0,Mt.dD)(),C=(0,ot.IE)(),B=v.children.find(function(M){var E;return!!((E=M.form.values.attribute)!==null&&E!==void 0&&E.calculate)}),b=(n=v.form.values.attribute)===null||n===void 0?void 0:n.visibleRule;return(0,e.jsx)("div",{className:r()("actions",{focus:l||t},x?"mobile":"pc"),children:(0,e.jsxs)(Qt.Z,{children:[(0,e.jsx)(L.MT,{infer:"Drag",className:r()("actionIcon","drag-handle",{visible:t}),tooltip:"\u957F\u6309\u62D6\u52A8"}),(0,e.jsx)(L.MT,{infer:"Logic",className:r()("actionIcon",{visible:t,active:!!b}),tooltip:"\u903B\u8F91\u8BBE\u7F6E",onClick:function(E){E.stopPropagation(),f.switchFocusNode(v),setTimeout(function(){return v.form.values.attribute._visibleRule=!0},20)}}),B&&(0,e.jsx)(L.MT,{infer:"Function",className:r()("actionIcon",{active:!0}),tooltip:"\u8BA1\u7B97\u516C\u5F0F",onClick:function(E){E.stopPropagation(),B&&(f.switchFocusNode(B),setTimeout(function(){return B.form.values.attribute._calculate=!0},20))}}),(0,e.jsx)(L.MT,{infer:"Copy",className:r()("actionIcon",{visible:t}),tooltip:"\u590D\u5236",onClick:function(E){E.stopPropagation(),f.copyNode(v)}}),(0,e.jsx)(L.MT,{infer:"Delete",className:r()("actionIcon",{visible:t}),tooltip:"\u5220\u9664",onClick:function(E){E.stopPropagation(),f.removeNodes(v)}}),(0,e.jsx)(L.MT,{infer:"QuestionTemplate",className:r()("actionIcon",{visible:t}),tooltip:"\u6DFB\u5230\u5230\u9898\u5E93",onClick:function(E){E.stopPropagation(),C.currentSchema=v.serialize()}})]})})}),se=(0,S.JH)();function De(s){var n=s.node,t=n.type,o=(0,D.jE)(),f=o.mode,h=(0,D.Mq)(n),v=(0,Y.Z)(h,3),l=v[0],x=v[1],C=v[2],B=n.focus||n.type!=="QuestionSet"&&n.children.filter(function(M){return M.focus===!0}).length>0,b=(0,m.useRef)(null);return(0,e.jsx)(qe.Gb.Provider,{value:(0,m.useMemo)(function(){return{node:n,getContainer:function(){return C.current},isFocus:B}},[B,n]),children:(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({className:r()("question",{focus:B,hover:n.type!=="QuestionSet"&&l})},x),{},{ref:function(E){C.current=E},"data-id":n.id,children:[(0,e.jsxs)("div",{className:"q-content-wrap",ref:b,children:[!n.isVoid&&(0,e.jsxs)(e.Fragment,{children:[se.questionTitles[t]?m.createElement(se.questionTitles[t],{node:n}):(0,e.jsx)(st,{}),(0,e.jsx)(U,{})]}),(0,e.jsx)("div",{className:"q-content",children:t&&se.questionTypes[t]&&m.createElement(se.questionTypes[t],{node:n})}),B&&(0,e.jsx)("div",{className:"q-operation",children:t&&se.questionOperations[t]&&m.createElement(se.questionOperations[t])})]}),f==="exam"&&(0,e.jsx)(A.gN,{name:"examScore",basePath:"attribute"}),(0,e.jsx)(L.Ws,{}),n.actionVisible&&(0,e.jsx)("div",{className:"action-wrapper",children:(0,e.jsx)(Se,{visible:B||l})})]}))})}var ie=(0,A.Pi)(De),fe=(0,S.JH)(),Fe=(0,A.Pi)(function(){var s,n,t=(0,m.useContext)(S.xI),o=t.operation,f=(0,D.AR)(),h=f.children,v=((s=h[0])===null||s===void 0?void 0:s.type)==="Pagination",l=(n=f.form.values.attribute)===null||n===void 0?void 0:n.backgroundImage;return(0,e.jsx)(A.RV,{form:f.form,children:(0,e.jsx)("div",{className:"editor-wrapper",style:{backgroundColor:"rgb(255, 255, 255)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center top",backgroundImage:l?"url(/api/public/preview/".concat(l,")"):"none"},children:(0,e.jsxs)("div",{className:"editor",children:[(0,e.jsx)(Bi,{}),(0,e.jsx)("div",{children:(0,e.jsxs)(L.W2,{groupName:"1",dragHandleSelector:".drag-handle",dropPlaceholder:{className:"drop-placeholder",errorClassName:"error-drop-placeholder"},getGhostParent:function(){return document.body},getChildPayload:function(C){return{node:h[C]}},onDropOver:function(C){var B=C.addedIndex,b=C.removedIndex;return!(B===0&&v)},onDrop:function(C){var B=C.addedIndex,b=C.payload;B!=null&&(b&&b.type?o.dropAddNode(f,{addedIndex:B,type:b.type,name:b.name}):b&&b.node?o.dropSortNode(b.node,f,B):b&&b.template&&o.dropAddNode(f,{addedIndex:B,template:b.template}))},children:[(0,e.jsx)(L.Sq,{}),(0,e.jsx)(L.XG,{}),h.map(function(x){return!x.type||!fe.questionTypes[x.type],(0,e.jsx)(L._l,{children:(0,e.jsx)(A.RV,{form:x.form,children:(0,e.jsx)(ie,{node:x})},x.id)},x.id)})]})}),(0,e.jsx)(Pi,{})]})})})});(0,S.RY)("Survey",Fe);var he=c(20310),Ne=c(33434),de=c(20136),ye=c(55241),Ie=c(77576),re=c(12028),ne=function(n){return(0,e.jsx)(bt,(0,H.Z)((0,H.Z)({},n),{},{innerComponent:function(o){return(0,e.jsx)(re.Z,{size:o.size,onChange:o.onChange,checked:o.value})}}))},oe=c(77883),_=c(85482),ze=function(n){return(0,e.jsx)(bt,(0,H.Z)((0,H.Z)({},n),{},{innerComponent:function(o){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{size:"small",min:n.min,max:n.max,step:n.step,value:o.value,style:n.innerStyle,onChange:o.onChange}),o.subTitle]})}}))},ft=c(43358),Me=c(97268),Kt=c(93224),zt=function(n){var t=n.dataSource,o=(0,Kt.Z)(n,["dataSource"]),f=(0,m.useContext)(S.xI),h=f.getContainer;return(0,e.jsx)(bt,(0,H.Z)((0,H.Z)({},o),{},{innerComponent:function(l){return(0,e.jsx)(Me.Z,{getPopupContainer:h,size:"small",options:t,value:l.value,style:n.innerStyle,onChange:l.onChange})}}))},nn=function(n){var t=n.dataSource,o=(0,Kt.Z)(n,["dataSource"]),f=(0,m.useContext)(S.xI),h=f.getContainer;return(0,e.jsx)(bt,(0,H.Z)((0,H.Z)({},o),{},{innerComponent:function(l){return(0,e.jsx)(Me.Z,{mode:"tags",getPopupContainer:h,size:"small",options:t,value:l.value&&l.value.split(","),style:n.innerStyle,onChange:function(C){C&&C.length>0?l.onChange(Array.from(new Set(C.map(function(B){return B.startsWith(".")?B.trim():".".concat(B.trim())}))).join(",")):l.onChange(void 0)}})}}))},bt=(0,S.Gr)(function(s){var n=s.className,t=n===void 0?"setting-item":n,o=s.value,f=s.size,h=f===void 0?"small":f,v=s.icon,l=s.iconStyle,x=l===void 0?{marginLeft:6,color:"#d9d9d9",cursor:"pointer"}:l,C=s.title,B=s.popoverContent,b=s.subTitle,M=s.style,E=(0,m.useContext)(S.Y7),P=E.getContainer;return(0,e.jsxs)("div",{className:t,style:M,children:[(0,e.jsxs)("span",{children:[C,B&&(0,e.jsx)(ye.Z,{getPopupContainer:P,content:(0,e.jsx)("div",{children:B}),children:(0,e.jsx)(L.MT,{infer:v||"QuestionCircle",style:x||{marginLeft:6,color:"#d9d9d9",cursor:"pointer"}})})]}),s.innerComponent?m.createElement(s.innerComponent,{onChange:s.onChange,value:o,size:h,subTitle:b}):""]})}),Xt=[{value:"text",text:"\u4E0D\u9650"},{value:"number",text:"\u6570\u5B57"},{value:"date",text:"\u65E5\u671F"},{value:"dateTime",text:"\u65E5\u671F\u65F6\u95F4"},{value:"time",text:"\u65F6\u95F4"},{value:"email",text:"\u90AE\u7BB1"},{value:"mobile",text:"\u624B\u673A\u53F7"},{value:"idCard",text:"\u8EAB\u4EFD\u8BC1\u53F7"},{value:"select",text:"\u4E0B\u62C9\u5355\u9009"},{value:"chinese",text:"\u4E2D\u6587"},{value:"alphabet",text:"\u5B57\u6BCD"}],St=function(n){return(0,e.jsx)(zt,{dataSource:(n.dataSource||Xt).map(function(t){return{label:t.text,value:t.value}}),name:"dataType",title:"\u5185\u5BB9\u9650\u5236",innerStyle:{width:130}})},Ee=function(){return(0,e.jsx)(ne,{title:"\u5FC5\u586B",name:"required"})},Ve=function(){return(0,e.jsx)(e.Fragment,{})},Tt=function(){return(0,e.jsx)(ze,{name:"columns",title:"\u9009\u9879\u5E03\u5C40",min:1,max:6,popoverContent:"\u5F53\u524D\u95EE\u9898\u7684\u9009\u9879\u6392\u6210\u51E0\u5217",icon:"QuestionCircle",iconStyle:{marginLeft:6,color:"#d9d9d9",cursor:"pointer"}})},at=function(){return(0,e.jsx)(e.Fragment,{})},ke=c(77613),Ue=c(56692),Cn=c(71194),Lt=c(50146),yn=c(27484),Ge=c.n(yn),_e=c(87310),et=c(45290),Vt=Me.Z.Option;function rn(s){var n=s.onChange,t=s.value,o=t===void 0?"":t,f=s.type,h=(0,m.useContext)(qe.xI),v=h.getContainer,l=o.match(/\(|\)|\[|\]|[T\d.+-]+/g)||[],x=(0,m.useState)(!1),C=(0,Y.Z)(x,2),B=C[0],b=C[1],M=(0,m.useState)(l[0]||"("),E=(0,Y.Z)(M,2),P=E[0],O=E[1],J=(0,m.useState)(l[3]||")"),q=(0,Y.Z)(J,2),Te=q[0],K=q[1],ce=(0,m.useState)(l[1]),W=(0,Y.Z)(ce,2),V=W[0],ue=W[1],Oe=(0,m.useState)(l[2]),Ke=(0,Y.Z)(Oe,2),pe=Ke[0],vt=Ke[1],Xe=1,nt=0;if(l[1]==="T")Xe=2;else if(l[1]&&/T-\d+/.test(l[1])){Xe=3;var xt=l[1].match(/\d+/g),Zt=(0,Y.Z)(xt,1);nt=Zt[0]}else l[1]&&/\d+-\d+-\d+/.test(l[1])&&(Xe=1);var It=(0,m.useState)(Xe),dn=(0,Y.Z)(It,2),vn=dn[0],yr=dn[1],Dn=1,ba=0;if(l[2]==="T")Dn=2;else if(l[2]&&/T\+\d/.test(l[2])){Dn=3;var br=l[2].match(/\d+/g),Sr=(0,Y.Z)(br,1);ba=Sr[0]}else l[2]&&/\d+-\d+-\d+/.test(l[2])&&(Dn=1);var Fr=(0,m.useState)(Dn),Sa=(0,Y.Z)(Fr,2),fn=Sa[0],Er=Sa[1],Nr=(0,m.useState)(nt),Fa=(0,Y.Z)(Nr,2),Ea=Fa[0],Zr=Fa[1],Ar=(0,m.useState)(ba),Na=(0,Y.Z)(Ar,2),Za=Na[0],Tr=Na[1],Aa="YYYY-MM-DD";(0,m.useEffect)(function(){f==="date"&&!!V&&!!pe&&!isNaN(V)&&!isNaN(pe)&&(vt(void 0),ue(void 0),n(void 0))},[f]);var Br=function(){var Ct,tn;vn===1&&(Ct=V),vn===2&&(Ct="T"),vn===3&&(Ct="T-".concat(Ea)),fn===1&&(tn=pe),fn===2&&(tn="T"),fn===3&&(tn="T+".concat(Za)),n("".concat(P).concat(Ct,",").concat(tn).concat(Te)),b(!1)};return(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{onClick:function(){return b(!0)},children:o?"\u5DF2\u8BBE\u7F6E":"\u672A\u8BBE\u7F6E"}),(0,e.jsxs)(Lt.Z,{title:"\u8303\u56F4\u8BBE\u7F6E",visible:B,onOk:Br,width:800,getContainer:v,onCancel:function(){return b(!1)},children:[(0,e.jsxs)("div",{children:["\u6700\u5C0F\u503C\uFF1A",(0,e.jsxs)(Me.Z,{getPopupContainer:v,value:vn,style:{width:200,marginRight:15},onChange:function(Ct){return yr(Ct)},children:[(0,e.jsx)(Vt,{value:1,children:"\u5177\u4F53\u65E5\u671F"}),(0,e.jsx)(Vt,{value:2,children:"\u7B54\u5377\u5F53\u5929\u65E5\u671F"}),(0,e.jsx)(Vt,{value:3,children:"\u7B54\u5377\u65E5\u671F\u524Dx\u5929"})]}),vn===1&&(0,e.jsx)(et.Mt,{getPopupContainer:v,format:"YYYY-MM-DD",value:!(0,_e.JY)(V)||!/\d+-\d+-\d+/.test(V)?void 0:Ge()(V,Aa),onChange:function(Ct,tn){ue(tn)}}),vn===3&&(0,e.jsx)(_.Z,{precision:0,onChange:function(Ct){return Zr(Ct)},style:{width:200},value:Ea}),(0,e.jsx)("span",{style:{marginLeft:10},children:"\u5141\u8BB8\u8FB9\u754C\u503C\uFF1A"}),(0,e.jsx)(re.Z,{onChange:function(Ct){return O(Ct?"[":"(")},defaultChecked:P==="["})]}),(0,e.jsxs)("div",{style:{marginTop:10},children:["\u6700\u5927\u503C\uFF1A",(0,e.jsxs)(Me.Z,{defaultValue:fn,style:{width:200,marginRight:15},onChange:function(Ct){return Er(Ct)},getPopupContainer:v,children:[(0,e.jsx)(Vt,{value:1,children:"\u5177\u4F53\u65E5\u671F"}),(0,e.jsx)(Vt,{value:2,children:"\u7B54\u5377\u5F53\u5929\u65E5\u671F"}),(0,e.jsx)(Vt,{value:3,children:"\u7B54\u5377\u65E5\u671F\u540Ex\u5929"})]}),fn===1&&(0,e.jsx)(et.Mt,{format:"YYYY-MM-DD",getPopupContainer:v,value:!(0,_e.JY)(pe)||!/\d+-\d+-\d+/.test(pe)?void 0:Ge()(pe,Aa),onChange:function(Ct,tn){vt(tn)}}),fn===3&&(0,e.jsx)(_.Z,{precision:0,onChange:function(Ct){return Tr(Ct)},style:{width:200},value:Za}),(0,e.jsx)("span",{style:{marginLeft:10},children:"\u5141\u8BB8\u8FB9\u754C\u503C\uFF1A"}),(0,e.jsx)(re.Z,{onChange:function(Ct){return K(Ct?"]":")")},defaultChecked:Te==="]"})]}),(0,e.jsx)("div",{style:{color:"#1890ff",fontSize:12,marginTop:20},children:"\u652F\u6301\u591A\u79CD\u6A21\u5F0F\u7EC4\u5408\uFF0C\u5982\u67D0\u4E24\u4E2A\u5177\u4F53\u65E5\u671F\uFF082019-01-01\u5230 2019-02-02\uFF09\uFF0C\u67D0\u4E2A\u65F6\u95F4\u6BB5\uFF08\u67D0\u4E2A\u65E5\u671F\u7684\u524D\u540E\u591A\u5C11\u5929\uFF09\u7B49"}),(0,e.jsx)("div",{style:{color:"red",fontSize:12,marginTop:10},children:"\u6CE8\u610F\u6700\u5C0F\u503C\u548C\u6700\u5927\u503C\u7684\u8BBE\u7F6E\uFF0C\u5426\u5219\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6821\u9A8C\u65E0\u6548"})]})]})}function qt(s){var n=s.onChange,t=s.value,o=t===void 0?"":t,f=s.type,h=(0,m.useContext)(qe.xI),v=h.getContainer,l=o.match(/([[(])(.*?)\s*,\s*(.*?)([\])]+)/)||[],x=(0,m.useState)(!1),C=(0,Y.Z)(x,2),B=C[0],b=C[1],M=(0,m.useState)(l[1]||"("),E=(0,Y.Z)(M,2),P=E[0],O=E[1],J=(0,m.useState)(l[4]||")"),q=(0,Y.Z)(J,2),Te=q[0],K=q[1],ce=(0,m.useState)(l[2]),W=(0,Y.Z)(ce,2),V=W[0],ue=W[1],Oe=(0,m.useState)(l[3]),Ke=(0,Y.Z)(Oe,2),pe=Ke[0],vt=Ke[1];(0,m.useEffect)(function(){f==="datetime"&&!!V&&!!pe&&!isNaN(V)&&!isNaN(pe)&&(vt(void 0),ue(void 0),n(void 0))},[f]);var Xe=function(){n("".concat(P).concat(V,",").concat(pe).concat(Te)),b(!1)},nt=function(It){return!It||!pe?!1:Ge()(It).format("YYYY-MM-DD HH:mm:ss").valueOf()>pe.valueOf()},xt=function(It){return!It||!V?!1:Ge()(It).format("YYYY-MM-DD HH:mm:ss").valueOf()<=V.valueOf()};return(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{onClick:function(){return b(!0)},children:o?"\u5DF2\u8BBE\u7F6E":"\u672A\u8BBE\u7F6E"}),(0,e.jsxs)(Lt.Z,{title:"\u8303\u56F4\u8BBE\u7F6E",visible:B,onOk:Xe,width:800,getContainer:v,onCancel:function(){return b(!1)},children:[(0,e.jsxs)("div",{children:["\u5F00\u59CB\u65F6\u95F4\uFF1A",(0,e.jsx)(et.Mt,{disabledDate:nt,showTime:!0,getPopupContainer:v,format:"YYYY-MM-DD HH:mm:ss",value:!(0,_e.JY)(V)||!/\d+-\d+-\d+/.test(V)?void 0:Ge()(V),onChange:function(It,dn){ue(dn)}}),(0,e.jsx)("span",{style:{marginLeft:10},children:"\u5141\u8BB8\u8FB9\u754C\u503C\uFF1A"}),(0,e.jsx)(re.Z,{onChange:function(It){return O(It?"[":"(")},defaultChecked:P==="["})]}),(0,e.jsxs)("div",{style:{marginTop:10},children:["\u622A\u6B62\u65F6\u95F4\uFF1A",(0,e.jsx)(et.Mt,{disabledDate:xt,showTime:!0,format:"YYYY-MM-DD HH:mm:ss",getPopupContainer:v,value:!(0,_e.JY)(pe)||!/\d+-\d+-\d+/.test(pe)?void 0:Ge()(pe),onChange:function(It,dn){vt(dn)}}),(0,e.jsx)("span",{style:{marginLeft:10},children:"\u5141\u8BB8\u8FB9\u754C\u503C\uFF1A"}),(0,e.jsx)(re.Z,{onChange:function(It){return K(It?"]":")")},defaultChecked:Te==="]"})]}),(0,e.jsx)("div",{style:{color:"#1890ff",fontSize:12,marginTop:20},children:"\u5982\u67D0\u4E24\u4E2A\u5177\u4F53\u65E5\u671F\uFF082019-01-01 12:00:00\u52302019-02-02 12:00:00\uFF09"}),(0,e.jsx)("div",{style:{color:"red",fontSize:12,marginTop:10},children:"\u6CE8\u610F\u6700\u5C0F\u503C\u548C\u6700\u5927\u503C\u7684\u8BBE\u7F6E\uFF0C\u5426\u5219\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6821\u9A8C\u65E0\u6548"})]})]})}function hn(s){var n=s.onChange,t=s.value,o=t===void 0?"":t,f=s.type,h=o.match(/\(|\)|\[|\]|[\d.-]+/g)||[],v=(0,m.useContext)(qe.xI),l=v.getContainer,x=(0,m.useState)(!1),C=(0,Y.Z)(x,2),B=C[0],b=C[1],M=(0,m.useState)(h[0]||"("),E=(0,Y.Z)(M,2),P=E[0],O=E[1],J=(0,m.useState)(h[3]||")"),q=(0,Y.Z)(J,2),Te=q[0],K=q[1],ce=(0,m.useState)(h[1]),W=(0,Y.Z)(ce,2),V=W[0],ue=W[1],Oe=(0,m.useState)(h[2]),Ke=(0,Y.Z)(Oe,2),pe=Ke[0],vt=Ke[1],Xe=function(){if(!V&&V!==0){ae.default.error("\u6700\u5C0F\u503C\u4E0D\u80FD\u4E3A\u7A7A");return}if(!pe&&pe!==0){ae.default.error("\u6700\u5927\u503C\u4E0D\u80FD\u4E3A\u7A7A");return}if(pe<V){ae.default.error("\u6700\u5C0F\u503C\u4E0D\u80FD\u5927\u4E8E\u6700\u5927\u503C");return}n("".concat(P).concat(V,",").concat(pe).concat(Te)),b(!1)};return(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{onClick:function(){return b(!0)},children:o?"\u5DF2\u8BBE\u7F6E":"\u672A\u8BBE\u7F6E"}),(0,e.jsxs)(Lt.Z,{title:"\u8303\u56F4\u8BBE\u7F6E",visible:B,onOk:Xe,onCancel:function(){return b(!1)},getContainer:l,children:[(0,e.jsxs)("div",{children:["\u6700\u5C0F\u503C\uFF1A",(0,e.jsx)(_.Z,{precision:f==="integer"?0:void 0,value:V,onChange:function(xt){return ue(xt)},style:{width:200}}),(0,e.jsx)("span",{style:{marginLeft:10},children:"\u5141\u8BB8\u8FB9\u754C\u503C\uFF1A"}),(0,e.jsx)(re.Z,{onChange:function(xt){return O(xt?"[":"(")},defaultChecked:P==="["})]}),(0,e.jsxs)("div",{style:{marginTop:10},children:["\u6700\u5927\u503C\uFF1A",(0,e.jsx)(_.Z,{precision:f==="integer"?0:void 0,onChange:function(xt){return vt(xt)},style:{width:200},value:pe}),(0,e.jsx)("span",{style:{marginLeft:10},children:"\u5141\u8BB8\u8FB9\u754C\u503C\uFF1A"}),(0,e.jsx)(re.Z,{onChange:function(xt){return K(xt?"]":")")},defaultChecked:Te==="]"})]})]})]})}function X(s){var n=s.onChange,t=s.value,o=t===void 0?"":t,f=s.type,h=(0,m.useContext)(qe.xI),v=h.getContainer,l=o.match(/([\[\(])(.*?)\s*,\s*(.*?)([\]\)]+)/)||[],x=(0,m.useState)(!1),C=(0,Y.Z)(x,2),B=C[0],b=C[1],M=(0,m.useState)(l[1]||"("),E=(0,Y.Z)(M,2),P=E[0],O=E[1],J=(0,m.useState)(l[4]||")"),q=(0,Y.Z)(J,2),Te=q[0],K=q[1],ce=(0,m.useState)(l[2]),W=(0,Y.Z)(ce,2),V=W[0],ue=W[1],Oe=(0,m.useState)(l[3]),Ke=(0,Y.Z)(Oe,2),pe=Ke[0],vt=Ke[1];(0,m.useEffect)(function(){f==="time"&&!!V&&!!pe&&!isNaN(V)&&!isNaN(pe)&&(vt(void 0),ue(void 0),n(void 0))},[f]);var Xe=function(){var xt=Ge()(V,"HH:mm:ss"),Zt=Ge()(pe,"HH:mm:ss");if(!Zt.isAfter(xt)){ae.default.error("\u622A\u6B62\u65F6\u95F4\u5E94\u5927\u4E8E\u5F00\u59CB\u65F6\u95F4");return}n("".concat(P).concat(V,",").concat(pe).concat(Te)),b(!1)};return(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{onClick:function(){return b(!0)},children:o?"\u5DF2\u8BBE\u7F6E":"\u672A\u8BBE\u7F6E"}),(0,e.jsxs)(Lt.Z,{title:"\u8303\u56F4\u8BBE\u7F6E",visible:B,onOk:Xe,width:800,getContainer:v,onCancel:function(){return b(!1)},children:[(0,e.jsxs)("div",{children:["\u5F00\u59CB\u65F6\u95F4\uFF1A",(0,e.jsx)(et.jI,{getPopupContainer:v,format:"HH:mm:ss",value:!(0,_e.JY)(V)||!/\d+:\d+:\d+/.test(V)?void 0:Ge()(V,"HH:mm:ss"),onChange:function(xt,Zt){ue(Zt)}}),(0,e.jsx)("span",{style:{marginLeft:10},children:"\u5141\u8BB8\u8FB9\u754C\u503C\uFF1A"}),(0,e.jsx)(re.Z,{onChange:function(xt){return O(xt?"[":"(")},defaultChecked:P==="["})]}),(0,e.jsxs)("div",{style:{marginTop:10},children:["\u622A\u6B62\u65F6\u95F4\uFF1A",(0,e.jsx)(et.jI,{format:"HH:mm:ss",getPopupContainer:v,value:!(0,_e.JY)(pe)||!/\d+:\d+:\d+/.test(pe)?void 0:Ge()(pe,"HH:mm:ss"),onChange:function(xt,Zt){vt(Zt)}}),(0,e.jsx)("span",{style:{marginLeft:10},children:"\u5141\u8BB8\u8FB9\u754C\u503C\uFF1A"}),(0,e.jsx)(re.Z,{onChange:function(xt){return K(xt?"]":")")},defaultChecked:Te==="]"})]}),(0,e.jsx)("div",{style:{color:"#1890ff",fontSize:12,marginTop:20},children:"\u5982\u67D0\u4E24\u4E2A\u5177\u4F53\u65E5\u671F\uFF0812:00:00\u523012:30:30\uFF09"}),(0,e.jsx)("div",{style:{color:"red",fontSize:12,marginTop:10},children:"\u6CE8\u610F\u6700\u5C0F\u503C\u548C\u6700\u5927\u503C\u7684\u8BBE\u7F6E\uFF0C\u5426\u5219\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6821\u9A8C\u65E0\u6548"})]})]})}function Q(s){var n=(0,A.U$)(),t=n.query(n.path.parent()).get("value"),o=t==null?void 0:t.dataType;return o==="date"?(0,e.jsx)(rn,(0,H.Z)((0,H.Z)({},s),{},{type:o})):o==="dateTime"?(0,e.jsx)(qt,(0,H.Z)((0,H.Z)({},s),{},{type:o})):o==="time"?(0,e.jsx)(X,(0,H.Z)((0,H.Z)({},s),{},{type:o})):o==="number"?(0,e.jsx)(hn,(0,H.Z)((0,H.Z)({},s),{},{type:o})):(0,e.jsx)("div",{})}var me=(0,Ue.Gr)((0,A.Pi)(Q)),le=(0,S.Gr)(function(s){var n=s.onChange,t=s.value,o,f;if(t){var h=t.match(/[([](\d*),\s*(\d*)[\)\]]/);h&&(o=parseInt(h[1]),f=parseInt(h[2]))}function v(l,x){n(x==="min"?"[".concat((0,_e.JY)(l)?l:"",",").concat((0,_e.JY)(f)?f:"","]"):"[".concat((0,_e.JY)(o)?o:"",",").concat((0,_e.JY)(l)?l:"","]"))}return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:["\u6700\u4F4E\u5206",(0,e.jsx)(_.Z,{value:o,min:0,max:f||10,style:{width:60,marginLeft:5},size:"small",onChange:function(x){return v(x,"min")}})]}),(0,e.jsxs)("div",{className:"setting-item",children:["\u6700\u9AD8\u5206",(0,e.jsx)(_.Z,{value:f,min:o||0,max:10,style:{width:60,marginLeft:5},size:"small",onChange:function(x){return v(x,"max")}})]})]})},{name:"scope"}),ge=["date","number","dateTime","time"],ee=(0,ke.P)(function(s){var n=s.soft,t=n===void 0?!1:n,o=t?"softScope":"scope",f=(0,m.useContext)(S.Y7),h=f.getContainer,v=(0,A.cI)(),l=(0,A.U$)(),x=v.query("attribute.dataType").get("value"),C=v.values.attribute,B=ge.includes(x),b=C[o],M=(0,m.useState)(b),E=(0,Y.Z)(M,2),P=E[0],O=E[1];return(0,e.jsx)(e.Fragment,{children:B&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Pn,{children:[(0,e.jsxs)("span",{children:[t?"\u8303\u56F4\u8F6F\u6821\u9A8C":"\u8303\u56F4\u5F3A\u6821\u9A8C",(0,e.jsx)(ye.Z,{getPopupContainer:h,style:{width:150},content:(0,e.jsx)("div",{children:t?"\u8D85\u51FA\u5F3A\u5236\u8303\u56F4\u4F1A\u6709\u63D0\u793A\u4F46\u4E0D\u5F71\u54CD\u95EE\u5377\u63D0\u4EA4":"\u8D85\u51FA\u5F3A\u5236\u8303\u56F4\u4E0D\u53EF\u63D0\u4EA4\u95EE\u5377"}),children:(0,e.jsx)(L.MT,{infer:"QuestionCircle",style:{marginLeft:6,color:"#d9d9d9",cursor:"pointer"}})})]}),(0,e.jsx)(re.Z,{size:"small",checked:b,onChange:function(q){O(q),q?(0,S.$Z)(l,o,"".concat(o,"Desc")):(0,S.Cp)(l,o,"".concat(o,"Desc"))}})]}),P&&(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"subContent",children:[(0,e.jsxs)("div",{className:"subItem",children:["\u6821\u9A8C\u89C4\u5219",(0,e.jsx)(me,{name:o})]}),(0,e.jsxs)("div",{className:"subItem",children:["\u6821\u9A8C\u63CF\u8FF0",(0,e.jsx)(Ue.rN,{name:"".concat(o,"Desc"),size:"small",divMode:!0,style:{width:130}})]})]})})]})})}),tt=function(){return(0,e.jsx)(ne,{title:"\u53EA\u8BFB",name:"readonly"})},Re=[{value:"MatrixRadio",label:"\u77E9\u9635\u5355\u9009"},{value:"MatrixCheckbox",label:"\u77E9\u9635\u591A\u9009"},{value:"MatrixFillBlank",label:"\u77E9\u9635\u586B\u7A7A"}],ht=function(){return(0,e.jsx)(zt,{dataSource:Re,name:"type",title:"\u77E9\u9635\u7C7B\u578B",innerStyle:{width:120},basePath:""})},Ft=c(1997),ut=c(64031),Bt=(0,A.Pi)(function(){var s,n=(0,A.cI)(),t=(0,m.useState)(!1),o=(0,Y.Z)(t,2),f=o[0],h=o[1],v=(0,D.AR)(),l=(0,D.Uh)(),x=(l==null?void 0:l.type)==="Option"||!(l!=null&&l.type)?l==null?void 0:l.parent:l,C=(s=n.values.attribute)===null||s===void 0?void 0:s.calculate;return(0,A.U7)(function(B){(0,ut.Zj)("attribute._calculate",function(b){b.value?h(!0):h(!1)})}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(bt,{name:"_calculate",title:"\u8BA1\u7B97\u516C\u5F0F",initialValue:!1,subTitle:"\u70B9\u51FB\u8BBE\u7F6E",icon:"QuestionCircle",iconStyle:{marginLeft:6,color:"#d9d9d9",cursor:"pointer"},popoverContent:"\u6839\u636E\u5176\u4ED6\u95EE\u9898\u6765\u81EA\u52A8\u8BA1\u7B97\u672C\u95EE\u9898\u7684\u7B54\u6848",innerComponent:function(b){return(0,e.jsx)("a",{onClick:function(E){E.stopPropagation(),b.onChange(!0)},children:b.subTitle})}}),(0,e.jsx)(A.gN,{name:"calculate"}),f&&(0,e.jsx)(Ft.ZP,{schema:v.serialize(),current:x,title:"\u8BA1\u7B97\u9898-\u516C\u5F0F\u8BBE\u7F6E",value:C,fieldAll:!0,commonUseFunctionNames:["SUM","MAX","MIN","AVERAGE","ROUND","CONCATENATE"],onCancel:function(){n.values.attribute._calculate=!1},onOk:function(b){n.setFieldState("attribute.calculate",function(M){return M.value=b}),n.values.attribute._calculate=!1}})]})}),lt=function(){return(0,e.jsx)(ze,{title:"\u5C0F\u6570\u4F4D\u6570\u9650\u5236",name:"numericScale",min:0,max:6,popoverContent:"\u4FDD\u7559\u5C0F\u6570\u70B9\u4F4D\u6570\uFF0C0 \u8868\u793A\u6574\u6570\uFF0C\u4E0D\u586B\u5219\u4E0D\u9650\u5236",syncDisplay:{dataType:["number"]}})},Pt=(0,A.Pi)(function(){var s,n=(0,A.cI)(),t=(0,m.useState)(!1),o=(0,Y.Z)(t,2),f=o[0],h=o[1],v=(s=n.values.attribute)===null||s===void 0?void 0:s.requiredRule;return(0,A.U7)(function(l){(0,ut.Zj)("attribute._requiredRule",function(x){x.value?h(!0):h(!1)})}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(bt,{name:"_requiredRule",title:"\u5FC5\u586B\u516C\u5F0F",initialValue:!1,subTitle:"\u70B9\u51FB\u8BBE\u7F6E",popoverContent:"\u6839\u636E\u516C\u5F0F\u8BA1\u7B97\u7ED3\u679C\u6765\u5224\u65AD\u5F53\u524D\u95EE\u9898\u662F\u5426\u5FC5\u586B",innerComponent:function(x){return(0,e.jsx)("a",{onClick:function(B){B.stopPropagation(),x.onChange(!0)},children:x.subTitle})}}),(0,e.jsx)(A.gN,{name:"requiredRule"}),f&&(0,e.jsx)(L.tC,{title:"\u5FC5\u586B\u6821\u9A8C-\u516C\u5F0F\u8BBE\u7F6E",value:v,commonUseFunctionNames:["SUM","MAX","MIN","AVERAGE","ROUND","CONCATENATE"],onCancel:function(){n.values.attribute._requiredRule=!1},onOk:function(x){n.setFieldState("attribute.requiredRule",function(C){return C.value=x}),n.values.attribute._requiredRule=!1}})]})}),wt=c(96433),it=c(2864),Le=c(41687),rt=c(46870),je=c(18613),ct=c(57206),Ye={1:(0,e.jsx)(Le.Z,{}),2:(0,e.jsx)(Le.Z,{}),3:(0,e.jsx)(rt.Z,{}),4:(0,e.jsx)(je.Z,{}),5:(0,e.jsx)(je.Z,{})},we=[{value:"star",text:(0,e.jsx)(it.Z,{value:3,style:{fontSize:16},count:3})},{value:"heart",text:(0,e.jsx)(it.Z,{value:3,character:(0,e.jsx)(ct.Z,{}),style:{fontSize:16,color:"#ea7463"},count:3})},{value:"smile",text:(0,e.jsx)(it.Z,{value:3,style:{fontSize:16},character:function(n){var t=n.index;return Ye[t+1]},count:3})}],mt=function(n){return(0,e.jsx)(zt,{dataSource:(n.dataSource||we).map(function(t){return{label:t.text,value:t.value}}),initialValue:"star",name:"scoreStyle",title:"\u663E\u793A\u6837\u5F0F",innerStyle:{width:130}})},an=c(402),Dt=c(97272),pt=Dt.Z.Link,We=(0,A.Pi)(function(){var s,n=(0,A.cI)(),t=(0,m.useState)(!1),o=(0,Y.Z)(t,2),f=o[0],h=o[1],v=(0,D.AR)(),l=(s=n.values.attribute)===null||s===void 0?void 0:s.replaceTextRule;return(0,A.U7)(function(x){(0,ut.Zj)("attribute._replaceTextRule",function(C){C.value?h(!0):h(!1)})}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(bt,{name:"_replaceTextRule",title:"\u6587\u672C\u66FF\u6362",initialValue:!1,subTitle:"\u70B9\u51FB\u8BBE\u7F6E",popoverContent:"\u5C06\u9898\u76EE\u6807\u9898\u4E2D\u7684\u67D0\u6BB5\u6587\u5B57\u66FF\u6362\u6210\u67D0\u9053\u9898\u76EE\u7684\u7B54\u6848\uFF08\u6216\u9009\u4E2D\u7684\u9009\u9879\uFF09",innerComponent:function(C){return(0,e.jsx)("a",{onClick:function(b){b.stopPropagation(),C.onChange(!0)},children:C.subTitle})}}),(0,e.jsx)(A.gN,{name:"replaceTextRule"}),f&&(0,e.jsx)(Ft.ZP,{title:"\u6807\u9898\u66FF\u6362-\u516C\u5F0F\u8BBE\u7F6E",schema:v.serialize(),fieldAll:!0,value:l,commonUseFunctionNames:["SUBSTITUTE","REPLACE","CONCATENATE","LOWER","UPPER","TRIM"],helpLink:(0,e.jsx)(pt,{href:"https://surveyking.gitee.io/doc/editor/logic",target:"_blank",children:"\u5982\u4F55\u8FDB\u884C\u6807\u9898\u66FF\u6362\u903B\u8F91\u8BBE\u7F6E"}),onCancel:function(){n.values.attribute._replaceTextRule=!1},onOk:function(C){n.setFieldState("attribute.replaceTextRule",function(B){return B.value=C}),n.values.attribute._replaceTextRule=!1}})]})}),bn=c(11989),Sn=c.n(bn),Mn=(0,S.Gr)(function(s){var n=s.onChange,t=s.value,o,f;if(t){var h=t.match(/[([](\d*),\s*(\d*)[\)\]]/);h&&(o=parseInt(h[1]),f=parseInt(h[2]))}function v(l,x){n(x==="min"?"[".concat((0,_e.JY)(l)?l:"",",").concat((0,_e.JY)(f)?f:"","]"):"[".concat((0,_e.JY)(o)?o:"",",").concat((0,_e.JY)(l)?l:"","]"))}return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:Sn().settingItem,children:["\u6700\u5C0F\u884C\u6570",(0,e.jsx)(_.Z,{value:o,min:0,style:{width:60,marginLeft:5},size:"small",onChange:function(x){return v(x,"min")}}),(0,e.jsx)("span",{className:"ant-form-text",children:"\u884C"})]}),(0,e.jsxs)("div",{className:Sn().settingItem,children:["\u6700\u5927\u884C\u6570",(0,e.jsx)(_.Z,{value:f,min:0,style:{width:60,marginLeft:5},size:"small",onChange:function(x){return v(x,"max")}}),(0,e.jsx)("span",{className:"ant-form-text",children:"\u884C"})]})]})},{name:"autoSize"}),_n=(0,S.Gr)(function(s){var n=(0,D.Uh)(),t=(0,m.useRef)(null),o=s.onChange,f=s.value,h,v;if(f){var l=f.match(/[([](\d*),\s*(\d*)[\)\]]/);l&&(h=parseInt(l[1]||"0"),v=parseInt(l[2]||"0"))}function x(B,b){o(b==="min"?"[".concat((0,_e.JY)(B)?B:"",",").concat((0,_e.JY)(v)?v:"","]"):"[".concat((0,_e.JY)(h)?h:"",",").concat((0,_e.JY)(B)?B:"","]"))}var C=function(b){var M=[{label:"\u4E0D\u9650",value:0}];return n==null||n.children.forEach(function(E,P){M.push({label:"".concat(P+1,"\u9879"),value:P+1,disabled:b==="min"?v&&P+1>(v||0):h&&P+1<(h||0)})}),M};return(0,e.jsxs)("div",{className:"setting-item",style:{flexDirection:"column"},ref:t,children:["\u9009\u9879\u6570\u91CF\u8BBE\u7F6E",(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,marginTop:6},children:[(0,e.jsxs)("div",{children:["\u6700\u5C11",(0,e.jsx)(Me.Z,{value:h,size:"small",style:{width:75,marginLeft:2},getPopupContainer:function(){return t.current},options:C("min"),onChange:function(b){return x(b,"min")},allowClear:!0})]}),(0,e.jsxs)("div",{children:["\u6700\u591A",(0,e.jsx)(Me.Z,{size:"small",value:v,style:{width:75,marginLeft:2},getPopupContainer:function(){return t.current},options:C("max"),onChange:function(b){return x(b,"max")},allowClear:!0})]})]})]})},{name:"answerLimit"}),In=function(){return(0,e.jsx)(ne,{title:"\u53EA\u5141\u8BB8\u62CD\u7167\u4E0A\u4F20",name:"cameraOnly"})},kn=function(){return(0,e.jsx)(ne,{title:"\u5141\u8BB8\u79FB\u52A8\u5730\u56FE\u4FEE\u6539\u4F4D\u7F6E",name:"mapMove"})},Rn=function(){return(0,e.jsx)(ne,{title:"\u663E\u793A\u6295\u7968\u7ED3\u679C",name:"statEnabled"})},Ut=(0,A.Pi)(function(){var s,n=(0,A.cI)(),t=(0,m.useState)(!1),o=(0,Y.Z)(t,2),f=o[0],h=o[1],v=(0,D.AR)(),l=(0,D.Uh)(),x=(l==null?void 0:l.type)==="Option"||!(l!=null&&l.type)?l==null?void 0:l.parent:l,C=(s=n.values.attribute)===null||s===void 0?void 0:s.validateRule;return(0,A.U7)(function(){(0,ut.Zj)("attribute._validateRule",function(B){B.value?h(!0):h(!1)})}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(bt,{name:"_validateRule",title:"\u6821\u9A8C\u89C4\u5219",initialValue:!1,subTitle:"\u70B9\u51FB\u8BBE\u7F6E",icon:"QuestionCircle",iconStyle:{marginLeft:6,color:"#d9d9d9",cursor:"pointer"},popoverContent:"\u52A8\u6001\u8BBE\u7F6E\u5F53\u524D\u95EE\u9898\u7684\u6821\u9A8C\u89C4\u5219\u3002",innerComponent:function(b){return(0,e.jsx)("a",{onClick:function(E){E.stopPropagation(),b.onChange(!0)},children:b.subTitle})}}),(0,e.jsx)(A.gN,{name:"validateRule"}),f&&(0,e.jsx)(Ft.ZP,{schema:v.serialize(),current:x==null?void 0:x.serialize(),title:"\u6821\u9A8C\u89C4\u5219-\u516C\u5F0F\u8BBE\u7F6E",value:C,fieldAll:!0,commonUseFunctionNames:["SUM","MAX","MIN","AVERAGE","ROUND","CONCATENATE"],onCancel:function(){n.values.attribute._validateRule=!1},onOk:function(b){n.setFieldState("attribute.validateRule",function(M){return M.value=b}),n.values.attribute._validateRule=!1}})]})}),ea=c(63185),mn=c(9676),ta=c(47673),un=c(4107),gt=c(32059),Fn=c(83279);function xn(s,n,t){if(!!s){var o=Object.values(s).filter(function(v){return v.examScore});if(o.length===1&&o[0].examCorrectAnswer===t.id)return o[0].examScore;var f=(0,H.Z)({},s);delete f[t.id];var h=0;return n==="onlyOne"?h=Math.max.apply(Math,(0,Fn.Z)(Object.values(f).map(function(v){return v.examScore||0}))):n==="select"?t.type==="Radio"||t.type==="Select"?h=Math.max.apply(Math,(0,Fn.Z)(Object.values(f).map(function(v){return v.examScore||0}))):(t.type==="Checkbox"||t.type==="FillBlank"||t.type==="HorzBlank"||t.type==="MultipleBlank"||t.type==="Textarea")&&(h=Object.values(f).reduce(function(v,l){return v+(l.examScore===void 0?0:l.examScore)},0)):(n==="selectAll"||n==="selectCorrect")&&(h=Object.values(f).reduce(function(v,l){return v+(l.examScore===void 0?0:l.examScore)},0)),h==Number.POSITIVE_INFINITY||h==Number.NEGATIVE_INFINITY||isNaN(h)?0:h}}function wn(s){switch(s.type){case"Radio":return"onlyOne";case"Checkbox":return"selectAll";case"Select":return"onlyOne";case"FillBlank":return"selectAll";case"MultipleBlank":return"selectAll";case"HorzBlank":return"selectAll";case"Textarea":return"selectAll";default:break}}function na(s){switch(s.type){case"FillBlank":return"completeSame";case"MultipleBlank":return"completeSame";case"HorzBlank":return"completeSame";case"Textarea":return"completeSame";default:break}}function pn(s){var n=["FillBlank","MultipleBlank","HorzBlank","Textarea"];return n.includes(s)}function On(s){var n=["Radio","Checkbox","Select"];return n.includes(s)}var Ln=[{value:"onlyOne",label:"\u6B64\u9898\u6709\u552F\u4E00\u7B54\u6848\u548C\u5206\u503C",match:["Radio","Select"]},{value:"selectAll",label:"\u5168\u90E8\u7B54\u5BF9\u624D\u5F97\u5206",match:["Checkbox","MultipleBlank","HorzBlank","FillBlank","Textarea"]},{value:"selectCorrect",label:"\u7B54\u5BF9\u51E0\u9879\u5F97\u51E0\u5206\uFF0C\u6253\u9519\u4E0D\u5F97\u5206",match:["Checkbox"]},{value:"select",label:"\u7B54\u5BF9\u51E0\u9879\u5F97\u51E0\u5206",match:["MultipleBlank","HorzBlank"]},{value:"select",label:"\u6BCF\u4E2A\u9009\u9879\u90FD\u6709\u5BF9\u5E94\u7684\u5206\u503C",match:["Radio","Checkbox","Select"]},{value:"manual",label:"\u4EBA\u5DE5\u8BC4\u5206",match:["Radio","Checkbox","Select","FillBlank","Textarea","HorzBlank","MultipleBlank"]}],Gt=(0,A.Pi)(function(){var s,n,t=(0,D.Uh)(),o=(0,D.jE)(),f=o.getContainer,h=o.mode,v=(0,m.useState)((t==null?void 0:t.form.values.attribute.examAnswerMode)||wn(t)),l=(0,Y.Z)(v,2),x=l[0],C=l[1],B=(0,m.useState)((t==null?void 0:t.form.values.attribute.examMatchRule)||na(t)),b=(0,Y.Z)(B,2),M=b[0],E=b[1],P=t.type,O=Ln.filter(function(W){return W.match.includes(P)}).map(function(W){return{label:W.label,value:W.value}}),J=t==null?void 0:t.children,q=(0,m.useState)(function(){if(x==="manual")return(0,gt.Z)({},t.id,{examCorrectAnswer:t.id,examScore:t==null?void 0:t.form.values.attribute.examScore});var W={};t.children.forEach(function(ue){var Oe=ue==null?void 0:ue.getAttribute("examCorrectAnswer"),Ke=ue==null?void 0:ue.getAttribute("examScore");Oe!==void 0&&(W[ue.id]={examCorrectAnswer:Oe,examScore:Ke})});var V=t.getAttribute("examScore");return(x==="onlyOne"||x==="selectAll"||x==="selectCorrect")&&V==null&&Object.keys(W).length===0&&t!=null&&t.children&&t.children.length>0&&(P==="Radio"||P==="Checkbox"||P==="Select"?(W[t==null?void 0:t.children[0].id]={examCorrectAnswer:t==null?void 0:t.children[0].id,examScore:5},V=5):(P==="FillBlank"||P==="MultipleBlank"||P==="HorzBlank"||P==="Textarea")&&(W[t==null?void 0:t.children[0].id]={examCorrectAnswer:"",examScore:5},V=5)),W[t.id]={examCorrectAnswer:t.id,examScore:V},W}),Te=(0,Y.Z)(q,2),K=Te[0],ce=Te[1];return(0,m.useEffect)(function(){var W;t==null||t.children.forEach(function(V){if(K[V.id]!==void 0){var ue;V.setAttribute("examScore",(ue=K[V.id])===null||ue===void 0?void 0:ue.examScore),V.setAttribute("examCorrectAnswer",K[V.id].examCorrectAnswer)}else V.setAttribute("examScore",void 0),V.setAttribute("examCorrectAnswer",void 0)}),t==null||t.setAttribute("examAnswerMode",x),t==null||t.setAttribute("examMatchRule",M),t==null||t.setAttribute("examScore",(W=K[t.id])===null||W===void 0?void 0:W.examScore)},[x,K,t,M]),(0,m.useEffect)(function(){},[J]),h!=="exam"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",style:{flexDirection:"column",borderBottom:"0",paddingBottom:3},children:[(0,e.jsx)("span",{children:"\u8BA1\u5206\u65B9\u5F0F"}),(0,e.jsx)(Me.Z,{size:"small",onChange:function(V){if(C(V),V==="manual"&&ce((0,gt.Z)({},t.id,{examCorrectAnswer:t.id,examScore:5})),V==="onlyOne"){var ue;ce((ue={},(0,gt.Z)(ue,t.id,{examCorrectAnswer:t.id,examScore:5}),(0,gt.Z)(ue,t==null?void 0:t.children[0].id,{examCorrectAnswer:t==null?void 0:t.children[0].id,examScore:5}),ue))}V==="select"&&ce(t.children.reduce(function(Oe,Ke){var pe=Ke.id;if(pn(t.type)){var vt,Xe;pe=((vt=Ke.form.values)===null||vt===void 0||(Xe=vt.attribute)===null||Xe===void 0?void 0:Xe.examCorrectAnswer)||""}return Oe[Ke.id]={examCorrectAnswer:pe,examScore:5},Oe},(0,gt.Z)({},t.id,{examCorrectAnswer:t.id,examScore:5*t.children.length})))},value:x,getPopupContainer:f,style:{width:"100%"},options:O}),x!=="manual"&&M!==void 0&&(0,e.jsx)(Me.Z,{size:"small",getPopupContainer:f,style:{width:"100%",marginTop:10},value:M,onChange:function(V){E(V)},options:[{label:"\u56DE\u7B54\u4E0E\u7B54\u6848\u5B8C\u5168\u76F8\u540C\u5F97\u5206",value:"completeSame"},{label:"\u56DE\u7B54\u4E2D\u5305\u542B\u7B54\u6848\u5373\u53EF\u5F97\u5206",value:"contain"}]})]}),x==="onlyOne"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",style:{flexDirection:"column",borderBottom:"0",paddingBottom:3},children:[(0,e.jsx)("span",{children:"\u7B54\u6848"}),(0,e.jsx)(Me.Z,{size:"small",onChange:function(V){var ue=xn(K,x,t);if(ue!==void 0){var Oe;ce((Oe={},(0,gt.Z)(Oe,V,{examCorrectAnswer:V,examScore:ue}),(0,gt.Z)(Oe,t.id,{examCorrectAnswer:t.id,examScore:ue}),Oe))}},value:Object.keys(K).filter(function(W){return K[W]!==void 0}).filter(function(W){return W!==(t==null?void 0:t.id)})[0],getPopupContainer:f,style:{width:"100%"},options:J==null?void 0:J.map(function(W,V){return{label:(0,S.WO)(W.title)||"\u9009\u9879".concat(V+1),value:W.id}})})]}),(0,e.jsxs)("div",{className:"setting-item",style:{borderBottom:"0",paddingBottom:3},children:[(0,e.jsx)("span",{children:"\u6B64\u9879\u5206\u503C"}),(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{min:0,size:"small",style:{width:80,marginRight:5},value:K[t.id].examScore,step:.5,onChange:function(V){ce(Object.keys(K).reduce(function(ue,Oe){return ue[Oe]={examCorrectAnswer:Oe,examScore:V},ue},(0,gt.Z)({},t.id,{examCorrectAnswer:t.id,examScore:V})))}}),(0,e.jsx)("span",{children:"\u5206"})]})]})]}),x==="select"&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"setting-item",style:{flexDirection:"column",borderBottom:"0",paddingBottom:3},children:[(0,e.jsx)("span",{children:"\u5404\u9009\u9879\u5206\u503C"}),J==null?void 0:J.map(function(W,V){var ue,Oe;if(P==="Radio"||P==="Checkbox"||P==="Select"){var Ke;return(0,e.jsxs)("div",{className:"option-score",children:[(0,e.jsx)("span",{className:"option-score-title",children:(0,S.WO)(W.title)||"\u9009\u9879".concat(V+1)}),(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{size:"small",min:0,style:{width:80,marginRight:5},defaultValue:5,step:.5,value:(Ke=K[W.id])===null||Ke===void 0?void 0:Ke.examScore,onChange:function(vt){var Xe;K[W.id]={examCorrectAnswer:((Xe=K[W.id])===null||Xe===void 0?void 0:Xe.examCorrectAnswer)||"",examScore:vt};var nt=xn(K,x,t);nt!==void 0&&ce((0,H.Z)((0,H.Z)({},K),{},(0,gt.Z)({},t.id,{examCorrectAnswer:t.id,examScore:nt})))}}),(0,e.jsx)("span",{children:"\u5206"})]})]},W.id)}return(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"option-score-title",children:(0,S.WO)(W.title)||"\u9009\u9879".concat(V+1)}),(0,e.jsx)("div",{children:(0,e.jsx)(un.Z.TextArea,{value:(ue=K[W.id])===null||ue===void 0?void 0:ue.examCorrectAnswer,onChange:function(vt){var Xe,nt=vt.target.value;K[W.id]={examCorrectAnswer:nt,examScore:(Xe=K[W.id])===null||Xe===void 0?void 0:Xe.examScore},ce((0,H.Z)({},K))}})}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,e.jsx)("span",{children:"\u6B64\u9879\u5206\u503C"}),(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{size:"small",min:0,style:{width:80,marginTop:5},defaultValue:5,step:.5,value:(Oe=K[W.id])===null||Oe===void 0?void 0:Oe.examScore,onChange:function(vt){K[W.id]={examCorrectAnswer:W.id,examScore:vt};var Xe=xn(K,x,t);Xe!==void 0&&ce((0,H.Z)((0,H.Z)({},K),{},(0,gt.Z)({},t.id,{examCorrectAnswer:t.id,examScore:Xe})))}}),(0,e.jsx)("span",{children:"\u5206"})]})]})]},W.id)})]})}),(x==="selectAll"||x==="selectCorrect")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",style:{flexDirection:"column",borderBottom:"0",paddingBottom:3},children:[(0,e.jsx)("span",{children:"\u7B54\u6848"}),J==null?void 0:J.map(function(W,V){var ue;return P==="Radio"||P==="Checkbox"||P==="Select"?(0,e.jsx)("div",{className:"option-score",children:(0,e.jsx)("div",{children:(0,e.jsx)(mn.Z,{onChange:function(Ke){var pe=Ke.target.checked;pe?ce((0,H.Z)((0,H.Z)({},K),{},(0,gt.Z)({},W.id,{examCorrectAnswer:t.id}))):(delete K[W.id],ce((0,H.Z)({},K)))},checked:!!K[W.id],children:(0,S.WO)(W.title)||"\u9009\u9879".concat(V+1)})})},W.id):(0,e.jsxs)("div",{style:{flexDirection:"column",marginTop:6},children:[(0,e.jsx)("span",{children:(0,S.WO)(W.title)||"\u9009\u9879".concat(V+1)}),(0,e.jsx)(un.Z.TextArea,{value:(ue=K[W.id])===null||ue===void 0?void 0:ue.examCorrectAnswer,onChange:function(Ke){var pe=Ke.target.value;ce((0,H.Z)((0,H.Z)({},K),{},(0,gt.Z)({},W.id,{examCorrectAnswer:pe})))}})]},W.id)})]}),(0,e.jsxs)("div",{className:"setting-item",style:{borderBottom:"0",paddingBottom:3},children:[(0,e.jsx)("span",{children:"\u6B64\u9898\u5206\u503C"}),(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{min:0,size:"small",style:{width:80,marginRight:5},value:(s=K[t.id])===null||s===void 0?void 0:s.examScore,step:.5,onChange:function(V){K[t.id]={examCorrectAnswer:t.id,examScore:V},ce((0,H.Z)({},K))}}),(0,e.jsx)("span",{children:"\u5206"})]})]})]}),x==="manual"&&(0,e.jsxs)("div",{className:"setting-item",style:{borderBottom:"0",paddingBottom:3},children:[(0,e.jsx)("span",{children:"\u6B64\u9898\u5206\u503C"}),(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{size:"small",min:0,style:{width:80,marginRight:5},defaultValue:5,step:.5,value:(n=K[t.id])===null||n===void 0?void 0:n.examScore,onChange:function(V){ce((0,gt.Z)({},t.id,{examCorrectAnswer:t.id,examScore:V}))}}),(0,e.jsx)("span",{children:"\u5206"})]})]})]})}),aa=function(){return _jsx(SwitchField,{title:"\u7B54\u6848\u7CBE\u786E\u5339\u914D",popoverContent:_jsx(_Fragment,{children:"\u9009\u62E9\u7CBE\u786E\u5339\u914D\uFF0C\u56DE\u7B54\u4E0E\u7B54\u6848\u5B8C\u5168\u76F8\u540C\u624D\u5F97\u5206\u3002\u5426\u5219\uFF0C\u56DE\u7B54\u4E2D\u5305\u542B\u7B54\u6848\u5373\u53EF\u5F97\u5206\u3002"}),name:"readonly"})},ia=function(){return _jsx(InputNumberField,{title:"\u6B64\u9879\u5206\u503C",name:"examScore",step:.5,subTitle:"\u5206"})};function Hn(s){var n=s.onChange,t=s.value,o,f;if(t){var h=t.match(/[([](\d*),\s*(\d*)[\)\]]/);h&&(o=parseInt(h[1]),f=parseInt(h[2]))}function v(l,x){n(x==="min"?"[".concat((0,_e.JY)(l)?l:"",",").concat((0,_e.JY)(f)?f:"","]"):"[".concat((0,_e.JY)(o)?o:"",",").concat((0,_e.JY)(l)?l:"","]"))}return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:["\u6700\u5C11\u586B\u5199",(0,e.jsx)(_.Z,{value:o,min:0,style:{width:60,marginLeft:5},size:"small",onChange:function(x){return v(x,"min")}}),(0,e.jsx)("span",{className:"ant-form-text",children:"\u5B57"})]}),(0,e.jsxs)("div",{className:"setting-item",children:["\u6700\u591A\u586B\u5199",(0,e.jsx)(_.Z,{value:f,min:0,style:{width:60,marginLeft:5},size:"small",onChange:function(x){return v(x,"max")}}),(0,e.jsx)("span",{className:"ant-form-text",children:"\u5B57"})]})]})}var Ht=(0,S.Gr)(Hn,{name:"textLimit"}),En;function Nn(s){var n=s.className;return(0,e.jsxs)("div",{className:n,children:["\u9009\u9879\u540E\u6587\u5B57",(0,e.jsx)(re.Z,{size:"small",defaultChecked:!!s.initialValue,onChange:s.onChange})]})}var Ta=(0,Ne.ZP)(Nn)(En||(En=(0,he.Z)([`
  padding: 12px 18px 12px 0;
  display: flex;
  justify-content: space-between;
  margin-left: 18px;
  border-bottom: solid 1px #dde5ed;
`]))),ra=null,gn=c(1870),$n=[{value:"rejectAll",text:"\u9009\u9879\u6392\u4ED6"},{value:"rejectOther",text:"\u6392\u4ED6\u9009\u9879\u4E92\u65A5"}];function Zn(s){var n=(0,m.useContext)(qe.Y7),t=n.getContainer;return(0,e.jsxs)(Pn,{children:[(0,e.jsxs)("span",{children:["\u9009\u9879\u6392\u4ED6",(0,e.jsx)(ye.Z,{getPopupContainer:t,style:{width:150},content:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:"\u9009\u9879\u6392\u4ED6: \u4E0D\u80FD\u548C\u5176\u4ED6\u9009\u9879\u540C\u65F6\u9009\u4E2D"}),(0,e.jsx)("div",{children:"\u6392\u4ED6\u9009\u9879\u4E92\u65A5: \u4E0D\u80FD\u548C\u6392\u4ED6\u9009\u9879\u540C\u65F6\u9009\u4E2D"})]}),children:(0,e.jsx)(gn.Z,{style:{marginLeft:6,color:"#d9d9d9",cursor:"pointer"}})})]}),(0,e.jsx)(Ue.Ph,(0,H.Z)((0,H.Z)({dataSource:$n},s),{},{style:{width:130}}))]})}var zn=(0,Ue.Gr)(Zn,{name:"rejectOtherOption"}),Vn=c(16761),An=c.n(Vn),Tn=Me.Z.Option;function Yn(s){var n=s.onChange,t=s.value,o=(0,m.useRef)(null);return(0,e.jsxs)("div",{className:An().settingItem,ref:o,children:[(0,e.jsxs)("span",{children:["\u95EE\u5377\u6A21\u5F0F",(0,e.jsx)(ye.Z,{overlayClassName:An().popover,content:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:"\u5355\u9875\uFF1A\u6240\u6709\u95EE\u9898\u5355\u9875\u663E\u793A"}),(0,e.jsx)("div",{children:"\u9898\u7EC4\uFF1A\u6BCF\u9875\u4E00\u4E2A\u9898\u7EC4"}),(0,e.jsx)("div",{children:"\u5355\u9898\uFF1A\u6BCF\u9875\u4E00\u4E2A\u95EE\u9898"})]}),children:(0,e.jsx)(gn.Z,{style:{marginLeft:6,color:"#d9d9d9",cursor:"pointer"}})})]}),(0,e.jsxs)(Me.Z,{style:{width:120},size:"small",value:t,getPopupContainer:function(){return o.current},onChange:function(h){return n(h)},children:[(0,e.jsx)(Tn,{value:"one_page",children:"\u5355\u9875\u6A21\u5F0F"}),(0,e.jsx)(Tn,{value:"one_page_one_question",children:"\u5355\u9898\u6A21\u5F0F"})]})]})}var Wn=(0,Ue.Gr)(Yn,{name:"mode"}),Bn,Pn=Ne.ZP.div(Bn||(Bn=(0,he.Z)([`
  padding: 12px 18px 12px 0;
  display: flex;
  justify-content: space-between;
  margin-left: 18px;
  border-bottom: solid 1px #dde5ed;

  .ant-popover-inner-content {
    max-width: 170px;
    padding: 8px 11px;
    font-size: 12px;
    line-height: 16px;
    word-break: break-all;
    background: #fafcff;
    border: 1px solid #97bbff;
    border-radius: 2px;
  }

  .subContent {
    background: #fafafa;
    border-bottom: 1px solid #dde5ed;
  }

  .subItem {
    display: flex;
    justify-content: space-between;
    margin-left: 18px;
    padding: 12px 18px 12px 10px;
    font-size: 13px;
    vertical-align: middle;
  }
`]))),p={width:120};function a(s){var n=s.settingType,t=(0,A.U$)();return(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Rn,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(Tt,{}),(0,e.jsx)(We,{}),(0,e.jsx)(Ut,{}),(0,e.jsx)(Gt,{})]}),n==="option"&&(0,e.jsxs)("div",{children:[(0,e.jsx)(at,{}),(0,e.jsx)(L.Sc,{title:"\u5728\u9009\u9879\u540E\u589E\u52A0\u586B\u7A7A\u6846",initialDependOn:"dataType",name:"_void",children:(0,e.jsxs)("div",{className:"collapse-fill-blank",children:[(0,e.jsx)(St,{}),(0,e.jsx)(lt,{}),(0,e.jsx)(Ee,{}),(0,e.jsx)(tt,{}),(0,e.jsx)(Ht,{syncDisplay:{dataType:["text"]}}),(0,e.jsx)(ne,{title:"\u9009\u9879\u540E\u6587\u5B57",name:"_suffix",syncDisplay:{dataType:["text"]},initialValue:!!t.value.suffix}),(0,e.jsx)(ee,{}),(0,e.jsx)(ee,{soft:!0})]})})]})]})}(0,S.QT)("Radio",(0,A.Pi)(a));function i(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=t.getContainer;return(0,e.jsxs)("div",{style:{paddingLeft:40},children:[(0,e.jsxs)("a",{onClick:function(){n.addNodeWithTemplate({title:"\u9009\u9879".concat(o.children.length+1)},o)},children:[(0,e.jsx)(L.MT,{infer:"Plus"}),"\u6DFB\u52A0\u5355\u4E2A\u9009\u9879"]}),(0,e.jsx)(L.E4,{getContainer:f,onConfirm:function(v){n.batchAddNode(v.filter(function(l){return l.trim()!==""}).map(function(l){return{title:l}}),o)}})]})}(0,S.j1)("Radio",(0,ke.P)(i));var d=c(89032),u=c(15746);function g(s){var n,t,o,f,h,v=s.node,l=v.parent,x=(0,A.cI)(),C=(l==null||(n=l.form.values.attribute)===null||n===void 0?void 0:n.columns)||1,B=(0,m.useContext)(S.Gb),b=B.isFocus,M=(0,D.jE)(),E=M.mode,P=(0,D.Mq)(v),O=(0,Y.Z)(P,2),J=O[0],q=O[1],Te=(t=x.values.attribute)===null||t===void 0?void 0:t.dataType,K=(o=x.values.attribute)===null||o===void 0?void 0:o.examScore,ce=l==null||(f=l.form.values.attribute)===null||f===void 0?void 0:f.examAnswerMode;return(0,e.jsx)(u.Z,{span:b?24:24/C,children:(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({style:{position:"relative",display:"flex",alignItems:"center",marginBottom:4},className:"option"},q),{},{children:[(0,e.jsx)("span",{style:{position:"absolute",display:J||b?"":"none"},children:(0,e.jsx)(L.MT,{infer:"DragVertical",style:{fontSize:19,color:"#9e9e9e",cursor:"move"},className:"drag-handle-option"})}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:20,flex:"0 0 70%"},children:[(0,e.jsx)(L.MT,{infer:"Radio",style:{fontSize:19,color:"#9e9e9e"}}),(0,e.jsx)(Ue.rN,{name:"title",style:{minWidth:160,width:"auto"}}),E==="exam"&&K!==void 0&&ce==="onlyOne"&&(0,e.jsx)("span",{style:{color:"#00bf6f",marginLeft:12},children:"(\u6B63\u786E\u7B54\u6848)"}),E==="exam"&&K!==void 0&&ce==="select"&&(0,e.jsxs)("span",{style:{color:"#9e9e9e",marginLeft:12},children:["(\u5206\u503C",K,")"]}),Te&&(0,e.jsx)(L.uO,{}),(0,e.jsx)("div",{children:(0,e.jsx)(Ue.rN,{name:"suffix",display:(h=x.values.attribute)!==null&&h!==void 0&&h.suffix?"visible":"none",basePath:"attribute",style:{minWidth:120,maxWidth:160,width:"auto",marginLeft:5},mirrorFieldAddress:"attribute._void._suffix",placeholder:"\u9009\u9879\u540E\u6587\u5B57"})})]}),(0,e.jsxs)("div",{style:{flex:"0 0 20%",display:J?"":"none"},children:[(0,e.jsx)(L.MT,{infer:"MinusCircle",title:"\u5220\u9664",className:"operate-icon",onClick:function(V){V.stopPropagation(),l==null||l.deleteNode(v)}}),(0,e.jsx)(L.MT,{infer:"Setting",title:"\u8BBE\u7F6E",className:"operate-icon"})]})]}))})}var Z=(0,ke.P)(g),y=(0,A.Pi)(function(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=t.isFocus,h=o.children;return(0,e.jsx)("div",{className:r()("single"),children:(0,e.jsx)(L.W2,{disabled:!f,dragHandleSelector:".drag-handle-option",groupName:"".concat(o.id),getChildPayload:function(l){return{node:h[l]}},behaviour:"contain",lockAxis:"y",onDrop:function(l){var x=l.addedIndex,C=l.payload;x!=null&&C&&C.node&&n.dropSortNode(C.node,o,x)},children:h.map(function(v,l){return(0,e.jsx)(L._l,{disabled:!f,children:(0,e.jsx)(L.RV,{form:v.form,children:(0,e.jsx)(Z,{index:l,node:v})},v.id)},v.id)})})})});(0,S.RY)("Radio",y);function N(s){var n=s.settingType,t=(0,A.U$)();return(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Rn,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(Tt,{}),(0,e.jsx)(_n,{}),(0,e.jsx)(We,{}),(0,e.jsx)(Ut,{}),(0,e.jsx)(Gt,{})]}),n==="option"&&(0,e.jsxs)("div",{children:[(0,e.jsx)(at,{}),(0,e.jsx)(zn,{}),(0,e.jsx)(L.Sc,{title:"\u5728\u9009\u9879\u540E\u589E\u52A0\u586B\u7A7A\u6846",initialDependOn:"dataType",name:"_void",children:(0,e.jsxs)("div",{className:"collapse-fill-blank",children:[(0,e.jsx)(St,{}),(0,e.jsx)(lt,{}),(0,e.jsx)(Ee,{}),(0,e.jsx)(tt,{}),(0,e.jsx)(Ht,{syncDisplay:{dataType:["text"]}}),(0,e.jsx)(ne,{title:"\u9009\u9879\u540E\u6587\u5B57",name:"_suffix",syncDisplay:{dataType:["text"]},initialValue:!!t.value.suffix}),(0,e.jsx)(ee,{}),(0,e.jsx)(ee,{soft:!0})]})})]})]})}(0,S.QT)("Checkbox",(0,A.Pi)(N));function I(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=t.getContainer;return(0,e.jsxs)("div",{style:{paddingLeft:40},children:[(0,e.jsxs)("a",{onClick:function(){n.addNodeWithTemplate({title:"\u9009\u9879".concat(o.children.length+1)},o)},children:[(0,e.jsx)(L.MT,{infer:"Plus"}),"\u6DFB\u52A0\u5355\u4E2A\u9009\u9879"]}),(0,e.jsx)(L.E4,{getContainer:f,onConfirm:function(v){n.batchAddNode(v.filter(function(l){return l.trim()!==""}).map(function(l){return{title:l}}),o)}})]})}(0,S.j1)("Checkbox",(0,ke.P)(I));function F(s){var n,t,o,f,h,v,l=s.node,x=l.parent,C=(0,A.cI)(),B=(x==null||(n=x.form.values.attribute)===null||n===void 0?void 0:n.columns)||1,b=(0,m.useContext)(S.Gb),M=b.isFocus,E=(0,D.jE)(),P=E.mode,O=(0,D.Mq)(l),J=(0,Y.Z)(O,2),q=J[0],Te=J[1],K=(t=C.values.attribute)===null||t===void 0?void 0:t.dataType,ce=(o=C.values.attribute)===null||o===void 0?void 0:o.examScore,W=(f=C.values.attribute)===null||f===void 0?void 0:f.examCorrectAnswer,V=x==null||(h=x.form.values.attribute)===null||h===void 0?void 0:h.examAnswerMode;return(0,e.jsx)(u.Z,{span:M?24:24/B,children:(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({style:{position:"relative",display:"flex",alignItems:"center",marginBottom:4},className:"option"},Te),{},{children:[(0,e.jsx)("span",{style:{position:"absolute",display:q||M?"":"none"},children:(0,e.jsx)(L.MT,{infer:"DragVertical",style:{fontSize:19,color:"#9e9e9e"},className:"drag-handle-option"})}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:20,flex:"0 0 70%"},children:[(0,e.jsx)(L.MT,{infer:"Checkbox",style:{fontSize:19,color:"#9e9e9e"}}),(0,e.jsx)(Ue.rN,{name:"title",style:{minWidth:160,width:"auto"}}),P==="exam"&&W!==void 0&&(V==="selectAll"||V==="selectCorrect")&&(0,e.jsx)("span",{style:{color:"#00bf6f",marginLeft:12},children:"(\u6B63\u786E\u7B54\u6848)"}),P==="exam"&&ce!==void 0&&V==="select"&&(0,e.jsxs)("span",{style:{color:"#9e9e9e",marginLeft:12},children:["(\u5206\u503C",ce,")"]}),K&&(0,e.jsx)(L.uO,{}),(0,e.jsx)("div",{children:(0,e.jsx)(Ue.rN,{name:"suffix",display:(v=C.values.attribute)!==null&&v!==void 0&&v.suffix?"visible":"none",basePath:"attribute",style:{minWidth:120,maxWidth:160,width:"auto",marginLeft:5},mirrorFieldAddress:"attribute._void._suffix",placeholder:"\u9009\u9879\u540E\u6587\u5B57"})})]}),(0,e.jsxs)("div",{style:{flex:"0 0 20%",display:q?"":"none"},children:[(0,e.jsx)(L.MT,{infer:"MinusCircle",title:"\u5220\u9664",className:"operate-icon",onClick:function(Oe){Oe.stopPropagation(),x==null||x.deleteNode(l)}}),(0,e.jsx)(L.MT,{infer:"Setting",title:"\u8BBE\u7F6E",className:"operate-icon"})]})]}))})}var j=(0,ke.P)(F),k=(0,A.Pi)(function(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=t.isFocus,h=o.children;return(0,e.jsx)("div",{className:r()("multi"),children:(0,e.jsx)(L.W2,{disabled:!f,dragHandleSelector:".drag-handle-option",groupName:"".concat(o.id),getChildPayload:function(l){return{node:h[l]}},behaviour:"contain",lockAxis:"y",onDrop:function(l){var x=l.addedIndex,C=l.payload;x!=null&&C&&C.node&&n.dropSortNode(C.node,o,x)},children:h.map(function(v,l){return(0,e.jsx)(L._l,{disabled:!f,children:(0,e.jsx)(L.RV,{form:v.form,children:(0,e.jsx)(j,{index:l,node:v})},v.id)},v.id)})})})});(0,S.RY)("Checkbox",k);function T(s){var n,t=s.settingType,o=(0,A.U$)();return(0,e.jsxs)("div",{children:[t==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(Tt,{}),(0,e.jsx)(Pt,{}),(0,e.jsx)(We,{}),(0,e.jsx)(Ut,{}),(0,e.jsx)(Gt,{})]}),t==="option"&&(0,e.jsxs)("div",{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(at,{}),(0,e.jsx)(Bt,{}),(0,e.jsx)(tt,{}),(0,e.jsx)(St,{}),(0,e.jsx)(lt,{}),(0,e.jsx)(Ht,{syncDisplay:{dataType:["text","chinese","alphabet","number"]}}),(0,e.jsx)(ne,{title:"\u9009\u9879\u540E\u6587\u5B57",name:"_suffix",initialValue:!!((n=o.value)!==null&&n!==void 0&&n.suffix)}),(0,e.jsx)(ee,{}),(0,e.jsx)(ee,{soft:!0})]})]})}(0,S.QT)("MultipleBlank",(0,A.Pi)(T)),(0,S.QT)("FillBlank",(0,A.Pi)(T));function R(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node;return(0,e.jsx)("div",{style:{paddingLeft:40},children:(0,e.jsxs)("a",{onClick:function(){n.addNodeWithTemplate({title:"\u586B\u7A7A".concat(o.children.length+1)},o)},children:[(0,e.jsx)(L.MT,{infer:"Plus"}),"\u6DFB\u52A0\u5355\u4E2A\u9009\u9879"]})})}(0,S.j1)("MultipleBlank",(0,ke.P)(R));function w(s){var n,t,o=s.node,f=o.parent,h=(0,A.cI)(),v=(f==null||(n=f.form.values.attribute)===null||n===void 0?void 0:n.columns)||1,l=f.type,x=(0,m.useContext)(S.Gb),C=x.isFocus,B=(0,D.Mq)(o),b=(0,Y.Z)(B,2),M=b[0],E=b[1];return(0,e.jsx)(u.Z,{span:C?24:24/v,children:(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({style:{position:"relative",display:"flex",alignItems:"center",marginBottom:4},className:"option"},E),{},{children:[(0,e.jsx)("span",{style:{position:"absolute",display:(M||C)&&l==="MultipleBlank"?"":"none"},children:(0,e.jsx)(L.MT,{infer:"DragVertical",style:{fontSize:19,color:"#9e9e9e",cursor:"move"},className:"drag-handle-option"})}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:20,flex:"0 0 70%"},children:[l==="MultipleBlank"&&(0,e.jsx)(Ue.rN,{name:"title",style:{minWidth:120,width:"auto",marginLeft:30}}),(0,e.jsx)(L.uO,{}),(0,e.jsx)("div",{children:(0,e.jsx)(Ue.rN,{name:"suffix",display:(t=h.values.attribute)!==null&&t!==void 0&&t.suffix?"visible":"none",basePath:"attribute",style:{minWidth:120,maxWidth:160,width:"auto",marginLeft:5},mirrorFieldAddress:"attribute._suffix",placeholder:"\u9009\u9879\u540E\u6587\u5B57"})})]}),(0,e.jsxs)("div",{style:{flex:"0 0 30%",display:M?"":"none"},children:[l==="MultipleBlank"&&(0,e.jsx)(L.MT,{infer:"MinusCircle",title:"\u5220\u9664",className:"operate-icon",onClick:function(O){O.stopPropagation(),f==null||f.deleteNode(o)}}),(0,e.jsx)(L.MT,{infer:"Setting",title:"\u8BBE\u7F6E",className:"operate-icon"})]})]}))})}var z=(0,ke.P)(w),G=(0,A.Pi)(function(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=t.isFocus,h=o.children;return(0,e.jsx)("div",{className:r()("single"),children:(0,e.jsx)(L.W2,{disabled:!f,dragHandleSelector:".drag-handle-option",groupName:"".concat(o.id),getChildPayload:function(l){return{node:h[l]}},behaviour:"contain",lockAxis:"y",onDrop:function(l){var x=l.addedIndex,C=l.payload;x!=null&&C&&C.node&&n.dropSortNode(C.node,o,x)},children:h.map(function(v,l){return(0,e.jsx)(L._l,{disabled:!f,children:(0,e.jsx)(L.RV,{form:v.form,children:(0,e.jsx)(z,{index:l,node:v})},v.id)},v.id)})})})});(0,S.RY)("FillBlank",G),(0,S.RY)("MultipleBlank",G);function te(s){var n=s.settingType;return(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(Tt,{}),(0,e.jsx)(Pt,{}),(0,e.jsx)(We,{}),(0,e.jsx)(Gt,{})]}),n==="option"&&(0,e.jsxs)("div",{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Bt,{}),(0,e.jsx)(tt,{}),(0,e.jsx)(lt,{}),(0,e.jsx)(Ht,{}),(0,e.jsx)(Mn,{}),(0,e.jsx)(ee,{}),(0,e.jsx)(ee,{soft:!0})]})]})}(0,S.QT)("Textarea",(0,A.Pi)(te));function ve(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node;return(0,e.jsx)("div",{style:{paddingLeft:40},children:(0,e.jsxs)("a",{onClick:function(){n.addNodeWithTemplate({title:"\u586B\u7A7A".concat(o.children.length+1)},o)},children:[(0,e.jsx)(L.MT,{infer:"Plus"}),"\u6DFB\u52A0\u5355\u4E2A\u9009\u9879"]})})}(0,S.j1)("Textarea",(0,ke.P)(ve));var Ze=un.Z.TextArea;function xe(s){var n,t,o,f=s.node,h=f.parent,v=(0,A.cI)(),l=(h==null||(n=h.form.values.attribute)===null||n===void 0?void 0:n.columns)||1,x=(0,S.Ck)((t=v.values.attribute)===null||t===void 0?void 0:t.autoSize,[2,4]),C=h.type,B=(0,m.useContext)(S.Gb),b=B.isFocus,M=(0,D.Mq)(f),E=(0,Y.Z)(M,2),P=E[0],O=E[1];return(0,e.jsx)(u.Z,{span:b?24:24/l,children:(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({style:{position:"relative",display:"flex",alignItems:"center",marginBottom:4},className:"option"},O),{},{children:[(0,e.jsx)("span",{style:{position:"absolute",display:(P||b)&&C==="MultipleBlank"?"":"none"},children:(0,e.jsx)(L.MT,{infer:"DragVertical",style:{fontSize:19,color:"#9e9e9e",cursor:"move"},className:"drag-handle-option"})}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:20,flex:"0 0 70%"},children:[C==="MultipleBlank"&&(0,e.jsx)(Ue.rN,{name:"title",style:{minWidth:120,width:"auto",marginLeft:30}}),(0,e.jsx)(Ze,{autoSize:{minRows:x[1],maxRows:x[2]}}),(0,e.jsx)("div",{children:(0,e.jsx)(Ue.rN,{name:"suffix",display:(o=v.values.attribute)!==null&&o!==void 0&&o.suffix?"visible":"none",basePath:"attribute",style:{minWidth:120,maxWidth:160,width:"auto",marginLeft:5},mirrorFieldAddress:"attribute._suffix",placeholder:"\u9009\u9879\u540E\u6587\u5B57"})})]}),(0,e.jsxs)("div",{style:{flex:"0 0 30%",display:P?"":"none"},children:[C==="MultipleBlank"&&(0,e.jsx)(L.MT,{infer:"MinusCircle",title:"\u5220\u9664",className:"operate-icon",onClick:function(q){q.stopPropagation(),h==null||h.deleteNode(f)}}),(0,e.jsx)(L.MT,{infer:"Setting",title:"\u8BBE\u7F6E",className:"operate-icon"})]})]}))})}var Ae=(0,ke.P)(xe),Je=(0,A.Pi)(function(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=t.isFocus,h=o.children;return(0,e.jsx)("div",{className:r()("textarea"),children:(0,e.jsx)(L.W2,{disabled:!f,dragHandleSelector:".drag-handle-option",groupName:"".concat(o.id),getChildPayload:function(l){return{node:h[l]}},behaviour:"contain",lockAxis:"y",onDrop:function(l){var x=l.addedIndex,C=l.payload;x!=null&&C&&C.node&&n.dropSortNode(C.node,o,x)},children:h.map(function(v,l){return(0,e.jsx)(L._l,{disabled:!f,children:(0,e.jsx)(L.RV,{form:v.form,children:(0,e.jsx)(Ae,{index:l,node:v})},v.id)},v.id)})})})});(0,S.RY)("Textarea",Je);function jt(s){var n=s.settingType;return(0,e.jsx)("div",{children:n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{}),(0,e.jsx)(Ut,{}),(0,e.jsx)(Gt,{})]})})}(0,S.QT)("Select",(0,A.Pi)(jt));function Qe(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=t.getContainer,h=(0,m.useState)(!1),v=(0,Y.Z)(h,2),l=v[0],x=v[1];return(0,e.jsxs)("div",{style:{paddingLeft:20,marginTop:10},children:[(0,e.jsxs)("a",{onClick:function(){x(!0)},children:[(0,e.jsx)(L.MT,{infer:"Plus"}),"\u9009\u9879\u7F16\u8F91"]}),(0,e.jsx)(L.E4,{getContainer:f,onConfirm:function(B){n.batchAddNode(B.filter(function(b){return b.trim()!==""}).map(function(b){return{title:b}}),o)}}),l&&(0,e.jsx)(L.aF,{onClose:function(){return x(!1)},dataSource:o.children.map(function(C){return{label:C.title,value:C.id}}),onOk:function(B){n.batchReplaceNode(B.map(function(b){return{id:b.value,title:b.label}}),o),x(!1)}})]})}(0,S.j1)("Select",(0,ke.P)(Qe));var dt=(0,A.Pi)(function(){var s=(0,m.useContext)(S.Gb),n=s.node,t=n.children;return(0,e.jsx)("div",{className:r()("select"),children:(0,e.jsx)(Me.Z,{style:{width:260,marginLeft:20},options:t.map(function(o){return{label:o.title,value:o.id}})})})});(0,S.RY)("Select",dt);var Ot=c(36877),Yt=c(13876);function Un(s){var n=s.settingType;return(0,e.jsx)("div",{children:n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{}),(0,e.jsx)(Ut,{})]})})}(0,S.QT)("Cascader",(0,A.Pi)(Un));var jn=c(6936),sn=(0,A.Pi)(function(){var s=(0,A.cI)(),n=s.query("dataSource").get("value");return(0,e.jsxs)("div",{className:r()("select"),children:[(0,e.jsx)(A.gN,{name:"dataSource"}),(0,e.jsx)(Yt.Z,{style:{width:260,marginLeft:20},options:n,placeholder:"\u8BF7\u9009\u62E9"})]})});(0,S.RY)("Cascader",sn);var _t=c(79521),on=c(19675),Jt=c(78030);function en(s){var n=(0,m.useContext)(S.xI),t=n.getContainer,o=s.className,f=s.id,h=s.deleteHeader,v=s.moveOrder,l=s.node,x=(0,D.Mq)(l),C=(0,Y.Z)(x,2),B=C[1],b=(0,e.jsxs)("div",{className:"header-setting",children:[(0,e.jsx)("span",{onClick:function(){return v("left")},children:"\u5DE6\u79FB"}),(0,e.jsx)("span",{onClick:function(){return v("right")},children:"\u53F3\u79FB"}),(0,e.jsx)("span",{onClick:function(){return h(f)},children:"\u5220\u9664"})]});return(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({className:o},B),{},{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,e.jsx)(Jt.rN,{name:"title"}),(0,e.jsx)(A.gN,{name:"dataSource"}),(0,e.jsx)(ye.Z,{getPopupContainer:t,content:b,trigger:"click",placement:"bottom",overlayClassName:"matrix-column-setting",children:(0,e.jsx)(on.Z,{style:{marginLeft:20,cursor:"pointer",color:"#cccccc"}})})]}))}var Ba=(0,A.Pi)(en);function Pa(s){var n=s.columns,t=s.data,o=s.updateWidth,f=m.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),h=(0,_t.useTable)({columns:n,data:t,defaultColumn:f},_t.useBlockLayout,_t.useResizeColumns),v=h.getTableProps,l=h.getTableBodyProps,x=h.headerGroups,C=h.rows,B=h.prepareRow,b=h.headers,M=(0,m.useRef)(),E=(0,m.useRef)();return(0,m.useEffect)(function(){Array.isArray(b)&&b.length>0&&(E.current=b.map(function(P){var O=P.id,J=P.width;return{id:O,width:J}})),M.current||(M.current=requestAnimationFrame(function(){E.current&&(o(E.current),E.current=void 0,M.current=void 0)}))}),(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({},v()),{},{className:"table",children:[(0,e.jsx)("div",{children:x.map(function(P){return(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},P.getHeaderGroupProps()),{},{className:"tr",children:P.headers.map(function(O){return(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({},O.getHeaderProps()),{},{className:"th",children:[O.render("Header"),(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},O.getResizerProps()),{},{className:"resizer ".concat(O.isResizing?"isResizing":"")}))]}))})}))})}),(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},l()),{},{children:C.map(function(P){return B(P),(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},P.getRowProps()),{},{className:"tr",children:P.cells.map(function(O){return(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},O.getCellProps()),{},{className:"td",children:O.render("Cell")}))})}))})})),(0,e.jsx)("div",{className:"continue",children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}var Da=(0,A.Pi)(function(){var s=(0,m.useContext)(S.Gb),n=s.node,t=n.children,o=(0,m.useContext)(S.xI),f=o.operation,h=n.form.values,v=function(E,P){var O=t.find(function(q){return q.id===P});if(!!O){var J=O.index;if(J===0&&E==="left"){ae.default.warn("\u5DF2\u662F\u6700\u5DE6");return}if(J===t.length-1&&E==="right"){ae.default.warn("\u5DF2\u662F\u6700\u53F3");return}E==="left"?f.dropSortNode(O,n,J-1):f.dropSortNode(O,n,J+1)}},l=function(E){if(t.length===1){ae.default.error("\u8BF7\u4FDD\u7559\u6700\u5C11\u4E00\u5217");return}var P=t.find(function(O){return O.id===E});P&&f.removeNodes(P)},x=(0,m.useMemo)(function(){var M=t.map(function(E,P){var O;return{Header:(0,e.jsx)(L.RV,{form:E.form,children:(0,e.jsx)(Ba,{id:E.id,index:P,moveOrder:function(q){return v(q,E.id)},deleteHeader:l,node:E})}),width:((O=E.form.values.attribute)===null||O===void 0?void 0:O.width)||150,accessor:E.id}});return M},[t]),C=[],B={};t.forEach(function(M){var E,P=(E=M.form.values.attribute)===null||E===void 0?void 0:E.dataType,O=M.form.values.dataSource||[];P==="select"?B["".concat(M.id)]=(0,e.jsx)(Me.Z,{placeholder:"\u8BF7\u9009\u62E9",style:{minWidth:80},options:O.map(function(J){return{label:J.text,value:J.code}})}):B["".concat(M.id)]=(0,e.jsx)(L.uO,{dataType:P})}),C.push(B),C.push(B);var b=function(E){E.forEach(function(P){var O=P.id,J=P.width;if(O==="title")h.attribute.width=J;else{var q=t.find(function(Te){return Te.id===O});q&&(q.form.values.attribute||(q.form.values.attribute={}),q.form.values.attribute.width=J)}})};return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Pa,{columns:x,data:C,updateWidth:b})})});function Ma(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=o.form.values,h=function(){n.addNode("Option",o)};return(0,e.jsx)("div",{style:{paddingLeft:40},children:(0,e.jsxs)("a",{onClick:h,children:[(0,e.jsx)(L.MT,{infer:"Plus"}),"\u6DFB\u52A0\u9009\u9879"]})})}(0,S.j1)("MatrixAuto",(0,ke.P)(Ma));var Ia=(0,A.Pi)(function(s){var n=s.settingType,t=(0,m.useState)(!1),o=(0,Y.Z)(t,2),f=o[0],h=o[1],v=(0,A.cI)();return(0,A.U7)(function(l){(0,ut.Zj)("attribute._select",function(x){x.value?h(!0):h(!1)}),(0,ut.Zj)("attribute.dataType",function(x,C){x.value==="select"?C.query("dataSource").take(function(B){return B.visible=!0}):C.query("dataSource").take(function(B){return B.visible=!1})})}),(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{})]}),n==="option"&&(0,e.jsxs)("div",{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(St,{}),(0,e.jsx)(lt,{}),(0,e.jsx)(Ht,{syncDisplay:{dataType:["text"]}}),(0,e.jsx)(ee,{}),(0,e.jsx)(ee,{soft:!0}),(0,e.jsx)(bt,{name:"_select",syncDisplay:{dataType:["select"]},title:"\u4E0B\u62C9\u8BBE\u7F6E",innerComponent:function(x){return(0,e.jsx)("a",{onClick:function(B){B.stopPropagation(),x.onChange(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})}}),f&&(0,e.jsx)(L.aF,{dataSource:v.values.dataSource||[],onClose:function(){v.values.attribute._select=!1},onOk:function(x){v.values.attribute._select=!1,v.values.dataSource=x}})]})]})});(0,S.QT)("MatrixAuto",Ia);function ka(){return(0,e.jsx)("div",{className:r()("matrix"),children:(0,e.jsx)(Da,{})})}(0,S.RY)("MatrixAuto",(0,A.Pi)(ka));var Pr=c(88983),Ra=c(47933);function wa(s){var n=(0,m.useContext)(S.xI),t=n.getContainer,o=s.className,f=s.id,h=s.deleteHeader,v=s.moveOrder,l=s.node,x=(0,D.Mq)(l),C=(0,Y.Z)(x,2),B=C[1],b=(0,e.jsxs)("div",{className:"header-setting",children:[(0,e.jsx)("span",{onClick:function(){return v("left")},children:"\u5DE6\u79FB"}),(0,e.jsx)("span",{onClick:function(){return v("right")},children:"\u53F3\u79FB"}),(0,e.jsx)("span",{onClick:function(){return h(f)},children:"\u5220\u9664"})]});return(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({className:o},B),{},{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,e.jsx)(Jt.rN,{name:"title"}),(0,e.jsx)(ye.Z,{getPopupContainer:t,content:b,trigger:"click",placement:"bottom",overlayClassName:"matrix-column-setting",children:(0,e.jsx)(on.Z,{style:{marginLeft:20,cursor:"pointer",color:"#cccccc"}})})]}))}var Oa=(0,A.Pi)(wa);function La(s){var n=s.className,t=s.deleteHeader,o=s.moveOrder,f=s.index,h=(0,m.useRef)(null),v=(0,e.jsxs)("div",{className:"header-setting",children:[(0,e.jsx)("span",{onClick:function(){return o("up")},children:"\u4E0A\u79FB"}),(0,e.jsx)("span",{onClick:function(){return o("down")},children:"\u4E0B\u79FB"}),(0,e.jsx)("span",{onClick:t,children:"\u5220\u9664"})]});return(0,e.jsxs)("div",{ref:h,className:n,onClick:function(x){x.stopPropagation()},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,e.jsx)(Jt.rN,{name:"title",basePath:"row.".concat(f)}),(0,e.jsx)(ye.Z,{getPopupContainer:function(){return h.current},content:v,trigger:"click",placement:"bottom",overlayClassName:"matrix-column-setting",children:(0,e.jsx)(on.Z,{style:{marginLeft:20,cursor:"pointer",color:"#cccccc"}})})]})}var Ha=(0,A.Pi)(La);function $a(s){var n=s.columns,t=s.data,o=s.updateWidth,f=m.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),h=(0,_t.useTable)({columns:n,data:t,defaultColumn:f},_t.useBlockLayout,_t.useResizeColumns),v=h.getTableProps,l=h.getTableBodyProps,x=h.headerGroups,C=h.rows,B=h.prepareRow,b=h.headers,M=(0,m.useRef)(),E=(0,m.useRef)();return(0,m.useEffect)(function(){Array.isArray(b)&&b.length>0&&(E.current=b.map(function(P){var O=P.id,J=P.width;return{id:O,width:J}})),M.current||(M.current=requestAnimationFrame(function(){E.current&&(o(E.current),E.current=void 0,M.current=void 0)}))}),(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({},v()),{},{className:"table",children:[(0,e.jsx)("div",{children:x.map(function(P){return(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},P.getHeaderGroupProps()),{},{className:"tr",children:P.headers.map(function(O){return(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({},O.getHeaderProps()),{},{className:"th",children:[O.render("Header"),(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},O.getResizerProps()),{},{className:"resizer ".concat(O.isResizing?"isResizing":"")}))]}))})}))})}),(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},l()),{},{children:C.map(function(P){return B(P),(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},P.getRowProps()),{},{className:"tr",children:P.cells.map(function(O){return(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},O.getCellProps()),{},{className:"td",children:O.render("Cell")}))})}))})}))]}))}var za=(0,A.Pi)(function(){var s=(0,m.useContext)(S.Gb),n=s.node,t=n.children,o=(0,m.useContext)(S.xI),f=o.operation,h=n.form.values,v=function(M,E){var P=t.find(function(J){return J.id===E});if(!!P){var O=P.index;if(O===0&&M==="left"){ae.default.warn("\u5DF2\u662F\u6700\u5DE6");return}if(O===t.length-1&&M==="right"){ae.default.warn("\u5DF2\u662F\u6700\u53F3");return}M==="left"?f.dropSortNode(P,n,O-1):f.dropSortNode(P,n,O+1)}},l=function(M){if(t.length===1){ae.default.error("\u8BF7\u4FDD\u7559\u6700\u5C11\u4E00\u5217");return}var E=t.find(function(P){return P.id===M});E&&f.removeNodes(E)},x=(0,m.useMemo)(function(){var b,M=t.map(function(E,P){var O;return{Header:(0,e.jsx)(L.RV,{form:E.form,children:(0,e.jsx)(Oa,{id:E.id,index:P,moveOrder:function(q){return v(q,E.id)},deleteHeader:l,node:E})}),width:((O=E.form.values.attribute)===null||O===void 0?void 0:O.width)||150,accessor:E.id}});return M.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((b=h.attribute)===null||b===void 0?void 0:b.width)||150,accessor:"title"}),M},[t]),C=h.row.map(function(b,M){return{title:(0,e.jsx)(Ha,{index:M,deleteHeader:function(){var P;(P=h.row)===null||P===void 0||P.splice(M,1)},moveOrder:function(P){var O=h.row.splice(M,1)[0];if(P==="up"){var J;if(M===0){ae.default.warn("\u5DF2\u662F\u6700\u4E0A");return}(J=h.row)===null||J===void 0||J.splice(M-1,0,O)}else{var q;if(M===h.row.length-1){ae.default.warn("\u5DF2\u662F\u6700\u4E0B");return}(q=h.row)===null||q===void 0||q.splice(M+1,0,O)}}})}});t.forEach(function(b){var M,E=(M=b.form.values.attribute)===null||M===void 0?void 0:M.dataType;C.forEach(function(P){switch(n.type){case"MatrixFillBlank":P[b.id]=(0,e.jsx)(L.uO,{dataType:E});break;case"MatrixRadio":P[b.id]=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ra.ZP,{}),E&&(0,e.jsx)(L.uO,{dataType:E})]});break;case"MatrixCheckbox":P[b.id]=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(mn.Z,{}),E&&(0,e.jsx)(L.uO,{dataType:E})]});break;default:break}})});var B=function(M){M.forEach(function(E){var P=E.id,O=E.width;if(P==="title")h.attribute.width=O;else{var J=t.find(function(q){return q.id===P});J&&(J.form.values.attribute||(J.form.values.attribute={}),J.form.values.attribute.width=O)}})};return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)($a,{columns:x,data:C,updateWidth:B})})});function Gn(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=o.form.values,h=function(){n.addNode("Option",o)},v=function(){var x;(x=f.row)===null||x===void 0||x.push({id:(0,Be.Ox)(),title:"\u8BF7\u8F93\u5165"}),n.snapshot()};return(0,e.jsxs)("div",{style:{paddingLeft:40},children:[(0,e.jsxs)("a",{onClick:h,children:[(0,e.jsx)(L.MT,{infer:"Plus"}),"\u6DFB\u52A0\u9009\u9879"]}),(0,e.jsxs)("a",{onClick:v,style:{marginLeft:15},children:[(0,e.jsx)(L.MT,{infer:"Plus"}),"\u6DFB\u52A0\u884C"]})]})}(0,S.j1)("MatrixFillBlank",(0,ke.P)(Gn)),(0,S.j1)("MatrixRadio",(0,ke.P)(Gn)),(0,S.j1)("MatrixCheckbox",(0,ke.P)(Gn));function Jn(s,n){return(0,A.Pi)(function(t){var o=t.settingType;return(0,e.jsxs)("div",{children:[o==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ht,{}),(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{})]}),o==="option"&&n]})})}(0,S.QT)("MatrixFillBlank",Jn("MatrixFillBlank",(0,e.jsxs)("div",{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(tt,{}),(0,e.jsx)(St,{}),(0,e.jsx)(Ht,{syncDisplay:{dataType:["text"]}}),(0,e.jsx)(ee,{}),(0,e.jsx)(ee,{soft:!0})]}))),(0,S.QT)("MatrixRadio",Jn("MatrixRadio",(0,e.jsxs)("div",{children:[(0,e.jsx)(at,{}),(0,e.jsx)(L.Sc,{title:"\u5728\u9009\u9879\u540E\u589E\u52A0\u586B\u7A7A\u6846",initialDependOn:"dataType",name:"_void",children:(0,e.jsxs)("div",{className:"collapse-fill-blank",children:[(0,e.jsx)(St,{}),(0,e.jsx)(lt,{}),(0,e.jsx)(Ee,{}),(0,e.jsx)(Ht,{syncDisplay:{dataType:["text"]}}),(0,e.jsx)(ee,{}),(0,e.jsx)(ee,{soft:!0})]})})]}))),(0,S.QT)("MatrixCheckbox",Jn("MatrixCheckbox",(0,e.jsxs)("div",{children:[(0,e.jsx)(at,{}),(0,e.jsx)(L.Sc,{title:"\u5728\u9009\u9879\u540E\u589E\u52A0\u586B\u7A7A\u6846",initialDependOn:"dataType",name:"_void",children:(0,e.jsxs)("div",{className:"collapse-fill-blank",children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(St,{}),(0,e.jsx)(lt,{}),(0,e.jsx)(Ht,{syncDisplay:{dataType:["text"]}}),(0,e.jsx)(ee,{}),(0,e.jsx)(ee,{soft:!0})]})})]})));function Qn(){return(0,e.jsx)("div",{className:r()("matrix"),children:(0,e.jsx)(za,{})})}(0,S.RY)("MatrixFillBlank",(0,A.Pi)(Qn)),(0,S.RY)("MatrixRadio",(0,A.Pi)(Qn)),(0,S.RY)("MatrixCheckbox",(0,A.Pi)(Qn));function Va(s){var n=s.settingType;return(0,e.jsx)("div",{children:n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{})]})})}(0,S.QT)("Pagination",(0,A.Pi)(Va));var Ya=(0,A.Pi)(function(){var s=(0,m.useContext)(S.Gb),n=s.node,t=(0,m.useContext)(S.xI),o=t.tree,f=o.children.filter(function(h){return h.type==="Pagination"}).length;return(0,e.jsxs)("div",{className:r()("pagination"),children:["\u7B2C",n.index+1,"\u9875(\u5171",f,"\u9875)"]})});(0,S.RY)("Pagination",Ya);function Wa(s){return(0,e.jsx)("div",{children:(0,e.jsx)(We,{})})}(0,S.QT)("Remark",(0,A.Pi)(Wa));var Ua=(0,A.Pi)(function(){var s=(0,m.useContext)(S.Gb),n=s.node;return(0,e.jsx)("div",{className:r()("remark"),children:(0,e.jsx)(Ue.rN,{name:"title",style:{width:450,minHeight:60},innerStyle:{fontSize:"17px"},bounds:'[data-id="'.concat(n.id,'"]'),placeholder:"\u8BF7\u8F93\u5165\u6587\u5B57\u63CF\u8FF0"})})});(0,S.RY)("Remark",Ua);function Ga(s){return(0,e.jsx)("div",{})}(0,S.QT)("SplitLine",(0,A.Pi)(Ga));var Ja=(0,A.Pi)(function(){return(0,e.jsx)("div",{className:r()("split-line"),children:(0,e.jsx)("div",{className:"line"})})});(0,S.RY)("SplitLine",Ja);function Qa(s){var n=s.settingType;return(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{})]}),n==="option"&&(0,e.jsxs)("div",{children:[(0,e.jsx)(ze,{title:"\u6700\u5927\u6587\u4EF6\u6570\u91CF",name:"maxFileCount",popoverContent:"\u6B64\u5C5E\u6027\u7528\u4E8E\u9650\u5236\u586B\u5199\u8005\u6700\u5927\u4E0A\u4F20\u6587\u4EF6\u6570\u91CF\u3002",max:20,min:0}),(0,e.jsx)(ze,{title:"\u5355\u4E2A\u6587\u4EF6\u6700\u5927\u4F53\u79EF",name:"maxFileSize",popoverContent:"\u6B64\u5C5E\u6027\u7528\u4E8E\u9650\u5236\u586B\u5199\u8005\u5355\u4E2A\u6587\u4EF6\u6700\u5927\u4F53\u79EF\u3002\u53EF\u6839\u636E\u9700\u8981\u6536\u96C6\u7684\u6587\u4EF6\u7C7B\u578B\u505A\u9009\u62E9\uFF0C\u4F8B\u59821\u5F20\u7167\u7247\u5927\u7EA63MB\uFF0C1\u99963\u5206\u949Fmp3\u97F3\u9891\u5927\u7EA65MB\u3002",min:0}),(0,e.jsx)(nn,{title:"\u6587\u4EF6\u7C7B\u578B",name:"fileAccept",dataSource:[{label:"\u6587\u6863\u7C7B\u578B",value:".txt, .pdf, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .wps, .rtf, .hlp"},{label:"\u56FE\u7247\u7C7B\u578B",value:".jpg, .jpeg, .png, .gif, .bmp, .psd, .tif"},{label:"\u89C6\u9891\u7C7B\u578B",value:".mkv, .mp4, .avi, .swf, .wmv, .rmvb, .mov, .mpg"}],innerStyle:{width:120},popoverContent:"\u6587\u4EF6\u7C7B\u578B\uFF0C\u8BF7\u8F93\u5165\u6587\u4EF6\u540E\u7F00\uFF0C\u591A\u79CD\u7C7B\u578B\u4EE5\u82F1\u6587\u9017\u53F7\u5206\u5272\u3002\u5982 excel \u548C word\uFF0C\u8F93\u5165 .xlsx,.docx\u3002"}),(0,e.jsx)(In,{})]})]})}(0,S.QT)("Upload",(0,A.Pi)(Qa));var Dr=c(43185),ua=c(11324),Ka=c(43347),Xa=ua.Z.Dragger;function qa(s){var n,t,o,f,h,v,l=s.node,x=(0,A.cI)(),C=(n=x.values)===null||n===void 0||(t=n.attribute)===null||t===void 0?void 0:t.maxFileSize,B=(o=x.values)===null||o===void 0||(f=o.attribute)===null||f===void 0?void 0:f.maxFileCount,b=(h=x.values)===null||h===void 0||(v=h.attribute)===null||v===void 0?void 0:v.fileAccept,M=(0,D.Mq)(l),E=(0,Y.Z)(M,2),P=E[0],O=E[1],J=function(){var Te=[];return B&&Te.push("\u6700\u591A\u4E0A\u4F20".concat(B,"\u4E2A")),C&&Te.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(C,"M\u4EE5\u5185")),b&&Te.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(b)),Te.join(",")};return(0,e.jsx)("div",(0,H.Z)((0,H.Z)({style:{height:150}},O),{},{children:(0,e.jsxs)(Xa,(0,H.Z)((0,H.Z)({},s),{},{disabled:!0,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",style:{marginBottom:10},children:(0,e.jsx)(Ka.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:J()})]}))}))}var _a=(0,ke.P)(qa),sa=(0,A.Pi)(function(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=t.isFocus,h=o.children;return(0,e.jsx)("div",{className:r()("single"),children:h.map(function(v,l){return(0,e.jsx)(L.RV,{form:v.form,children:(0,e.jsx)(_a,{index:l,node:v})},v.id)})})});(0,S.RY)("Upload",sa),(0,S.RY)("Upload",sa);var Mr=c(13062),oa=c(71230);function ei(s){var n=s.settingType;return(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(Pt,{})]}),n==="option"&&(0,e.jsx)("div",{})]})}(0,S.QT)("Signature",(0,A.Pi)(ei));var ti=c(17672),ni=function(){var n=(0,m.useRef)(null),t=(0,m.useState)(!1),o=(0,Y.Z)(t,2),f=o[0],h=o[1];return(0,m.useEffect)(function(){var v=n.current;if(v){let x=function(){if(v!=null){var C=Math.max(window.devicePixelRatio||1,1);v.width=v.offsetWidth*C,v.height=v.offsetHeight*C,v.getContext("2d").scale(C,C),l.clear()}};var l=new ti.Z(n.current,{onBegin:function(){h(!0)}});window.addEventListener("resize",x),x()}},[]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)("canvas",{ref:n,style:{width:"100%",height:120}}),(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:f?"hidden":"visible"},children:"\u8BF7\u5728\u6B64\u5904\u7B7E\u540D"})]})},ai=(0,A.Pi)(function(){return(0,e.jsx)("div",{className:r()("signature"),children:(0,e.jsx)("div",{children:(0,e.jsx)(oa.Z,{children:(0,e.jsx)(u.Z,{xs:24,sm:24,md:24,xl:24,children:(0,e.jsx)(ni,{})})})})})});(0,S.RY)("Signature",ai);var ii={1:(0,e.jsx)(Le.Z,{}),2:(0,e.jsx)(Le.Z,{}),3:(0,e.jsx)(rt.Z,{}),4:(0,e.jsx)(je.Z,{}),5:(0,e.jsx)(je.Z,{})},ri=(0,A.Pi)(function(s){var n,t,o=s.node,f=(0,m.useContext)(S.Gb),h=f.isFocus,v=(0,D.Mq)(o),l=(0,Y.Z)(v,2),x=l[0],C=l[1],B=(0,A.cI)(),b=(n=B.values.attribute)===null||n===void 0?void 0:n.scoreStyle,M=(t=B.values.attribute)===null||t===void 0?void 0:t.scope,E=0,P=5;if(M){var O=M.match(/[([](\d*),\s*(\d*)[\)\]]/);O&&(E=parseInt(O[1])||0,P=parseInt(O[2])||1)}var J=function(){return b==="heart"?(0,e.jsx)(it.Z,{defaultValue:E,character:(0,e.jsx)(ct.Z,{}),style:{color:"#ea7463"},count:P}):b==="smile"?(0,e.jsx)(it.Z,{defaultValue:E,character:function(K){var ce=K.index;return ii[ce+1]},count:P}):(0,e.jsx)(it.Z,{defaultValue:E,count:P})};return(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({},C),{},{className:"option",children:[(0,e.jsx)("div",{className:"option-item",children:J()}),(0,e.jsx)("div",{className:"option-item-setting",style:{flex:"0 0 30%",display:x||h?"":"none"},children:(0,e.jsx)(L.MT,{infer:"Setting",title:"\u8BBE\u7F6E",className:"operate-icon"})})]}))});function ui(s){var n=s.settingType;return(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{})]}),n==="option"&&(0,e.jsxs)("div",{children:[(0,e.jsx)(mt,{}),(0,e.jsx)(le,{})]})]})}(0,S.QT)("Score",(0,A.Pi)(ui));var si=(0,A.Pi)(function(){var s=(0,m.useContext)(S.Gb),n=s.node,t=n.children;return(0,e.jsx)("div",{className:r()("score"),children:t.map(function(o){return(0,e.jsx)(L.RV,{form:o.form,children:(0,e.jsx)(ri,{node:o},o.id)},o.id)})})});(0,S.RY)("Score",si);function oi(s){var n=s.settingType;return(0,e.jsx)("div",{children:n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{})]})})}(0,S.QT)("User",(0,A.Pi)(oi));var li=(0,A.Pi)(function(){return(0,e.jsx)("div",{className:r()("select"),children:(0,e.jsx)(Me.Z,{style:{width:260},options:[],open:!1})})});(0,S.RY)("User",li);function ci(s){var n=s.settingType;return(0,e.jsx)("div",{children:n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{})]})})}(0,S.QT)("Dept",(0,A.Pi)(ci));var di=(0,A.Pi)(function(){return(0,e.jsx)("div",{className:r()("select"),children:(0,e.jsx)(Me.Z,{style:{width:260},options:[],open:!1})})});(0,S.RY)("Dept",di);function vi(s){for(var n=[],t=2;t<s+2;t++)n.push(t/(s+2));return n}var fi=(0,A.Pi)(function(s){var n=s.node,t=(0,D.Mq)(n),o=(0,Y.Z)(t,2),f=o[0],h=o[1],v=(0,m.useState)(-1),l=(0,Y.Z)(v,2),x=l[0],C=l[1],B=function(){var M=vi(x||0);return(0,e.jsx)("div",{className:"nps-container",onMouseLeave:function(){C(-1)},children:[0,1,2,3,4,5,6,7,8,9,10].map(function(E){var P={background:"#2672ff",opacity:M[E]};return(0,e.jsx)("div",{className:"nps-item",style:x>=E?P:void 0,onMouseOver:function(){C(E)},children:E},E)})})};return(0,e.jsx)("div",(0,H.Z)((0,H.Z)({},h),{},{className:"option",children:(0,e.jsxs)("div",{className:"option-item",children:[B(),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,e.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]})}))});function hi(s){var n=s.settingType;return(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{})]}),n==="option"&&(0,e.jsx)("div",{})]})}(0,S.QT)("Nps",(0,A.Pi)(hi));var mi=(0,A.Pi)(function(){var s=(0,m.useContext)(S.Gb),n=s.node,t=n.children;return(0,e.jsx)("div",{className:r()("nps"),children:t.map(function(o){return(0,e.jsx)(L.RV,{form:o.form,children:(0,e.jsx)(fi,{node:o},o.id)},o.id)})})});(0,S.RY)("Nps",mi);var xi=c(91220);function pi(s){var n=s.settingType;return(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(Tt,{}),(0,e.jsx)(Pt,{}),(0,e.jsx)(We,{}),(0,e.jsx)(Ut,{}),(0,e.jsx)(Gt,{})]}),n==="option"&&(0,e.jsxs)("div",{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(at,{}),(0,e.jsx)(Bt,{}),(0,e.jsx)(tt,{}),(0,e.jsx)(St,{}),(0,e.jsx)(lt,{}),(0,e.jsx)(Ht,{syncDisplay:{dataType:["text"]}}),(0,e.jsx)(ee,{}),(0,e.jsx)(ee,{soft:!0})]})]})}(0,S.QT)("HorzBlank",(0,A.Pi)(pi));var gi=(0,A.Pi)(function(){var s,n=(0,m.useContext)(S.xI),t=n.operation,o=(0,m.useContext)(S.Gb),f=o.node,h=(s=f.form.values.attribute)===null||s===void 0?void 0:s.content;return(0,m.useEffect)(function(){for(var v=[],l=h.split(/_{3,}/).length-1,x=0;x<l;x++)v.push({title:"\u586B\u7A7A".concat(x+1)});f.children.forEach(function(C,B){v[B]&&(v[B]=C.serialize())}),t.batchReplaceNode(v,f)},[h]),(0,m.useEffect)(function(){document.addEventListener("click",function(v){var l=(0,D.te)(v);l&&t.focusClean()})},[]),(0,e.jsx)("div",{className:r()("single"),onClick:function(l){return l.stopPropagation()},children:(0,e.jsx)(Ue.rN,{name:"content",basePath:"attribute",style:{width:"auto",marginLeft:5},placeholder:"\u8BF7\u8F93\u5165\u586B\u7A7A\u9898\u5185\u5BB9",onChangeSelection:function(l,x){var C=RegExp("_{3,}","g"),B=x.matchAll(C),b=0,M=(0,xi.Z)(B),E;try{for(M.s();!(E=M.n()).done;){var P=E.value,O=P.index,J=P.index+P[0].length;l>O&&l<J&&t.switchFocusNode(f.children[b]),b++}}catch(q){M.e(q)}finally{M.f()}}})})});(0,S.RY)("HorzBlank",gi);function ji(s){var n=s.settingType;return(0,e.jsxs)("div",{children:[n==="question"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(Pt,{})]}),n==="option"&&(0,e.jsx)("div",{children:(0,e.jsx)(kn,{})})]})}(0,S.QT)("Address",(0,A.Pi)(ji));function Ci(s){var n,t=s.node,o=t.parent,f=(o==null||(n=o.form.values.attribute)===null||n===void 0?void 0:n.columns)||1,h=(0,m.useContext)(S.Gb),v=h.isFocus,l=(0,D.Mq)(t),x=(0,Y.Z)(l,2),C=x[0],B=x[1];return(0,e.jsx)(u.Z,{span:v?24:24/f,children:(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({style:{position:"relative",display:"flex",alignItems:"center",marginBottom:4},className:"option"},B),{},{children:[(0,e.jsx)("div",{style:{display:"flex",alignItems:"center",marginLeft:20,flex:"0 0 70%"},children:(0,e.jsx)(un.Z.TextArea,{readOnly:!0,placeholder:"\u8BF7\u9009\u62E9"})}),(0,e.jsx)("div",{style:{flex:"0 0 30%",display:C?"":"none"},children:(0,e.jsx)(L.MT,{infer:"Setting",title:"\u8BBE\u7F6E",className:"operate-icon"})})]}))})}var yi=(0,ke.P)(Ci),bi=(0,A.Pi)(function(){var s=(0,m.useContext)(S.xI),n=s.operation,t=(0,m.useContext)(S.Gb),o=t.node,f=t.isFocus,h=o.children;return(0,e.jsx)("div",{className:r()("address"),children:(0,e.jsx)(L.W2,{disabled:!f,dragHandleSelector:".drag-handle-option",groupName:"".concat(o.id),getChildPayload:function(l){return{node:h[l]}},behaviour:"contain",lockAxis:"y",onDrop:function(l){var x=l.addedIndex,C=l.payload;x!=null&&C&&C.node&&n.dropSortNode(C.node,o,x)},children:h.map(function(v,l){return(0,e.jsx)(L._l,{disabled:!f,children:(0,e.jsx)(L.RV,{form:v.form,children:(0,e.jsx)(yi,{index:l,node:v})},v.id)},v.id)})})})});(0,S.RY)("Address",bi);function Si(s){var n=s.node,t=n.children,o=(0,m.useContext)(S.xI),f=o.operation;return(0,e.jsx)("div",{children:(0,e.jsxs)(L.W2,{groupName:"1",dragHandleSelector:".drag-handle",dropPlaceholder:{className:"drop-placeholder",errorClassName:"error-drop-placeholder"},onDropOver:function(v){var l;return((l=v.payload)===null||l===void 0?void 0:l.type)!=="Pagination"},getChildPayload:function(v){return{node:t[v]}},shouldAcceptDrop:function(v,l){return!(l&&l.type==="QuestionSet")},getGhostParent:function(){return document.body},onDrop:function(v){var l=v.addedIndex,x=v.payload;l!=null&&(x&&x.type?f.dropAddNode(n,{addedIndex:l,name:x.name,type:x.type}):x&&x.node?f.dropSortNode(x.node,n,l):x&&x.template&&f.dropAddNode(n,{addedIndex:l,template:x.template}))},children:[(0,e.jsx)(L.Sq,{node:n,size:120}),t.map(function(h,v){if(!h.type){console.error("".concat(h.type," \u672A\u6CE8\u518C"));return}return(0,e.jsx)(L._l,{children:(0,e.jsx)(A.RV,{form:h.form,children:(0,e.jsx)(ie,{node:h})},h.id)},h.id)})]})})}var Fi=(0,A.Pi)(Si),la=c(74797);function Ei(){return(0,e.jsx)("div",{children:(0,e.jsxs)(A.Wo,{name:"attribute",children:[(0,e.jsx)(Ve,{}),(0,e.jsx)(We,{})]})})}(0,la.QT)("QuestionSet",(0,A.Pi)(Ei));var Ni=(0,A.Pi)(function(){var s=(0,m.useContext)(S.Gb),n=s.node;return(0,e.jsx)("div",{className:r()("questionSet"),children:(0,e.jsx)(Fi,{node:n})})});(0,S.RY)("QuestionSet",Ni);function Zi(){var s=(0,D.Tv)();return(0,e.jsxs)("div",{children:[(0,e.jsx)(Wn,{name:"mode"}),(0,e.jsx)(bt,{name:"backgroundImage",title:"\u80CC\u666F\u56FE\u7247",innerComponent:function(t){return(0,e.jsx)("a",{onClick:function(){t.onChange(void 0),s.snapshot()},children:"\u79FB\u9664"})}}),(0,e.jsx)(bt,{name:"headerImage",title:"\u9875\u7709\u56FE\u7247",innerComponent:function(t){return(0,e.jsx)("a",{onClick:function(){t.onChange(void 0),s.snapshot()},children:"\u79FB\u9664"})}})]})}(0,la.QT)("Survey",(0,A.Pi)(Zi));var Ai=function(n){var t=n.visible,o=(0,D.AR)(),f=(0,ot.IE)();return(0,e.jsx)("div",{className:r()("actions"),style:{visibility:t?"visible":"hidden"},children:(0,e.jsx)(L.MT,{infer:"QuestionTemplate",className:r()("actionIcon",{visible:t}),tooltip:"\u6DFB\u52A0\u5230\u95EE\u5377\u6A21\u677F\u5E93",onClick:function(v){v.stopPropagation(),f.currentSchema=o.serialize()}})})},Ti=(0,A.Pi)(function(){var s,n=(0,D.jE)(),t=n.mode,o=(0,A.cI)(),f=((s=o.values.attribute)===null||s===void 0?void 0:s.examScore)||0;return t!=="exam"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{className:"evaluation-total-score",children:[(0,e.jsx)("div",{className:"total-scpre-title",children:"\u603B\u5206"}),(0,e.jsx)("div",{className:"total-score",children:f})]})}),Bi=(0,A.Pi)(function(){var s,n=(0,D.AR)(),t=n.focus,o=(0,D.Mq)(n),f=(0,Y.Z)(o,2),h=f[0],v=f[1],l=(s=n.form.values.attribute)===null||s===void 0?void 0:s.headerImage;return(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({},v),{},{className:r()("header",{focus:t,hover:h}),children:[(0,e.jsx)(Ai,{visible:t||h}),l&&(0,e.jsx)("div",{className:"header-banner",style:{backgroundColor:"rgb(255, 255, 255)",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:200,width:"100%",backgroundPosition:"center top",backgroundImage:"url(/api/public/preview/".concat(l,")")}}),(0,e.jsxs)("div",{className:"header-content",children:[(0,e.jsx)(Ue.rN,{name:"title",size:"large",className:"title",style:{marginBottom:10},innerStyle:{fontSize:"32px"},bounds:".header"}),(0,e.jsx)(Ue.rN,{name:"description",className:"prefix",size:"large",bounds:".header"}),(0,e.jsx)(Ti,{})]})]}))}),Pi=(0,A.Pi)(function(s){var n=(0,m.useContext)(S.xI),t=n.tree,o=t.focus,f=(0,D.Mq)(t),h=(0,Y.Z)(f,2),v=h[0],l=h[1];return(0,e.jsxs)("div",(0,H.Z)((0,H.Z)({},l),{},{className:r()("footer",{focus:o,hover:v}),children:[(0,e.jsx)("div",{className:"description",children:(0,e.jsx)(Ue.rN,{basePath:"attribute",name:"suffix",bounds:".footer",placeholder:"\u8BF7\u8F93\u5165\u7ED3\u675F\u8BED"})}),(0,e.jsx)("div",{className:"title",children:(0,e.jsx)(Ue.rN,{name:"submitButton",basePath:"attribute",style:{width:120,background:"#2672ff",display:"inline-block"},bounds:".footer",placeholder:"\u8BF7\u8F93\u5165"})})]}))}),Di=c(99541),Mi=c(63439),Ir=c(61384);function ca(){var s=new Date;return"".concat(s.getHours(),":").concat(s.getMinutes())}var Ii=function(){var n=(0,D.cF)(),t=(0,D.AK)("preview-panel-phone"),o=(0,m.useState)(ca()),f=(0,Y.Z)(o,2),h=f[0],v=f[1];return(0,m.useEffect)(function(){var l=setInterval(function(){return v(ca())},1e3);return function(){return clearInterval(l)}},[]),(0,e.jsxs)("div",{className:t,children:[(0,e.jsxs)("div",{className:t+"-status",children:[(0,e.jsx)("span",{children:"\u624B\u673A\u7AEF\u9884\u89C8"}),(0,e.jsx)("span",{children:h})]}),(0,e.jsx)("div",{className:t+"-content",children:(0,e.jsx)(Mi.Z,{theme:"antdmobile",schema:n.serialize(),onSubmit:function(x){console.log(x)}})})]})},ki=(0,A.Pi)(function(){var s=(0,D.wq)(),n=(0,D.AK)("preview-panel"),t=function(){return s.previewType==="PC"?(0,e.jsx)(Di.Z,{}):s.previewType==="PHONE"?(0,e.jsx)(Ii,{}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsx)(e.Fragment,{children:t()})}),kr=null,Ri=(0,A.Pi)(function(){var s=(0,D.AK)("preview-panel");return(0,e.jsx)("div",{className:r()(s),children:(0,e.jsx)(ki,{})})}),wi=(0,A.Pi)(function(){var s=(0,D.AK)("main-panel"),n=(0,D.wq)(),t=function(){if(n.type==="EDITOR")return(0,e.jsx)(Fe,{});if(n.type==="PREVIEW")return(0,e.jsx)(Ri,{});if(n.type==="JSONTREE")return(0,e.jsx)(yt,{})};return(0,e.jsx)("div",{className:r()(s+"-content"),id:"editorContent",children:t()})}),Oi=function(n){var t=(0,D.AK)("main-panel");return(0,e.jsx)("div",{className:r()(t),children:n.children})},Rr=c(57663),Nt=c(71577),Li=c(51615),Hi=(0,A.Pi)(function(s){var n,t=(0,D.AK)("main-panel"),o=(0,D.k6)(),f=(0,D.Tv)(),h=(0,D.wq)(),v=(0,ot.IE)(),l=(0,D.cF)(),x=(0,Li.k6)(),C=(0,D.AR)(),B=(0,m.useContext)(S.xI),b=B.mode,M=B.onClose,E=v.loading,P=(0,D.AR)(),O=((n=P.form.values.attribute)===null||n===void 0?void 0:n.examScore)||0,J=function(){return(0,e.jsxs)(Nt.Z.Group,{size:"small",style:{marginRight:20},children:[(0,e.jsx)(Nt.Z,{size:"small",disabled:!o.allowUndo,onClick:function(){o.undo()},children:(0,e.jsx)(L.MT,{infer:"Undo",tooltip:"\u64A4\u9500"})}),(0,e.jsx)(Nt.Z,{disabled:!o.allowRedo,onClick:function(){o.redo()},children:(0,e.jsx)(L.MT,{infer:"Redo",tooltip:"\u6062\u590D"})}),b==="exam"&&(0,e.jsxs)(Nt.Z,{style:{width:120},children:["\u603B\u5206 ",O," \u5206"]})]})},q=function(){return h.type!=="PREVIEW"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)(Nt.Z.Group,{size:"small",style:{marginRight:20},children:[(0,e.jsx)(Nt.Z,{size:"small",disabled:h.previewType==="PC",onClick:function(){f.changePreviewType("PC")},children:(0,e.jsx)(L.MT,{infer:"PC",tooltip:"\u7535\u8111"})}),(0,e.jsx)(Nt.Z,{size:"small",disabled:h.previewType==="PHONE",onClick:function(){f.changePreviewType("PHONE")},children:(0,e.jsx)(L.MT,{infer:"MobileOutline",tooltip:"\u624B\u673A"})}),(0,e.jsx)(Nt.Z,{disabled:!0,size:"small",children:(0,e.jsx)(L.MT,{infer:"Responsive"})})]})},Te=function(){return(0,e.jsxs)(Nt.Z.Group,{size:"small",children:[(0,e.jsx)(Nt.Z,{size:"small",onClick:function(){return f.changeWorkbench("EDITOR")},disabled:h.type==="EDITOR",children:"\u7F16\u8F91"}),(0,e.jsx)(Nt.Z,{size:"small",disabled:h.type==="JSONTREE",onClick:function(){return f.changeWorkbench("JSONTREE")},children:"JSON"}),(0,e.jsx)(Nt.Z,{size:"small",onClick:function(){return f.changeWorkbench("PREVIEW")},disabled:h.type==="PREVIEW",children:"\u9884\u89C8"}),(0,e.jsx)(Nt.Z,{size:"small",type:"primary",loading:E,onClick:function(){b==="survey"||b==="exam"?v.saveOrUpdateProject({survey:l.serialize()}).then(function(W){W.success&&W.data&&x.push("/survey/".concat(W.data.id,"/edit?mode=").concat(b)),W.success&&ae.default.success("\u4FDD\u5B58\u6210\u529F")}):b==="template"&&(v.currentSchema=C.serialize())},children:"\u4FDD\u5B58"}),b==="template"&&(0,e.jsx)(Nt.Z,{size:"small",danger:!0,type:"primary",loading:E,onClick:function(){M&&M()},children:"\u5173\u95ED"})]})};return(0,e.jsxs)("div",{className:r()(t+"-toolbar"),children:[(0,e.jsxs)("div",{children:[J(),q()]}),(0,e.jsx)("div",{style:{marginRight:15},children:Te()})]})}),$i=(0,ke.P)(function(s){var n=(0,D.AK)("setting-panel"),t=(0,m.useRef)(null),o=(0,D.Uh)();return(0,e.jsx)(L.Aj,{placement:"right",baseClassName:"setting",className:"survey-editor survey-light survey-drawer setting-drawer customDrawer",width:265,handlerVisible:!!o,children:(0,e.jsx)(S.Y7.Provider,{value:{getContainer:function(){return t.current}},children:(0,e.jsx)("div",{className:r()(n),ref:t,children:(0,e.jsx)(L.pE,{})})})})}),zi=c(76629),Vi=function(n){return{setActive:function(o){n.activeTab=o}}},Kn=m.createContext({}),Yi=function(n){var t=(0,D.AK)("sidebar-panel"),o=(0,D.$1)(Vi,{activeTab:"questionType"}),f=(0,Y.Z)(o,2),h=f[0].activeTab,v=f[1].setActive;return(0,e.jsx)(L.Aj,{baseClassName:"sidebar",width:300,className:"survey-editor survey-light survey-drawer",placement:"left",openIcon:(0,e.jsx)(zi.Z,{style:{color:"#fff",fontSize:20}}),children:(0,e.jsx)("div",{className:t,children:(0,e.jsx)(Kn.Provider,{value:{activeTab:h,setActive:v},children:n.children})})})},Wi=function(){var n=(0,D.AK)("sidebar-panel"),t=(0,m.useContext)(Kn),o=t.activeTab,f=t.setActive;return(0,e.jsxs)("div",{className:r()(n+"-tabs"),children:[(0,e.jsxs)("div",{className:r()(n+"-tabs-pane",{active:o==="questionType"}),onClick:function(){return f("questionType")},children:[(0,e.jsx)(L.MT,{infer:"Survey",size:16}),"\u9898\u76EE"]}),(0,e.jsxs)("div",{className:r()(n+"-tabs-pane",{active:o==="theme"}),onClick:function(){return f("theme")},children:[(0,e.jsx)(L.MT,{infer:"Theme",size:16}),"\u5916\u89C2"]})]})},wr=c(18106),ln=c(67164),Ui=function(){return(0,e.jsx)(L.ce,{})},Or=c(13254),cn=c(14277),Lr=c(7359),da=c(27279),Gi=c(25782),Ji=c(20082),Qi=c(24616),Ki=da.Z.Panel;function Xi(s){var n={},t=[];return s.forEach(function(o){var f=o.category;f?(n[f]||(n[f]=[]),n[f].push(o)):t.push(o)}),t.length>0&&(n.\u672A\u5206\u7C7B=t),n}var qi=(0,ke.P)(function(){var s=(0,D.Tv)(),n=(0,ot.IE)(),t=n.qt,o=t.length===0;(0,m.useEffect)(function(){t.length===0&&n.loadTemplate()},[]);var f=function(l){return(0,e.jsx)(L.W2,{behaviour:"copy",groupName:"1",getChildPayload:function(C){return{template:l[C].template}},onDrop:function(C){console.log(C)},children:l.map(function(x,C){return(0,e.jsx)(L._l,{children:(0,e.jsx)("div",{children:(0,e.jsxs)(Ji.L,{className:"menu-group-item",onClick:function(){s.addNodeWithTemplate(x.template)},children:[C+1,".",x.name]})})},x.id)})})},h=Xi(t);return(0,e.jsxs)("div",{className:r()("question-library",{empty:o}),children:[o&&(0,e.jsx)("div",{children:(0,e.jsx)(cn.Z,{image:cn.Z.PRESENTED_IMAGE_SIMPLE,description:"\u6CA1\u6709\u4FDD\u5B58\u6A21\u677F"})}),(0,e.jsx)(da.Z,{expandIcon:function(l){var x=l.isActive;return(0,e.jsx)(Gi.Z,{rotate:x?90:0})},className:"site-collapse-custom-collapse",defaultActiveKey:0,children:Object.keys(h).map(function(v,l){return(0,e.jsx)(Ki,{header:v,extra:(0,e.jsx)(Qi.Z,{onClick:function(C){C.stopPropagation(),n.currentCategory=v}}),children:f(h[v])},l)})}),(0,e.jsx)(L.Zq,{})]})}),Hr=c(32157),_i=c(32138),er=c(57254),tr=c(87998);function va(s){var n;(n=document.querySelector("[data-id='".concat(s,"']")))===null||n===void 0||n.scrollIntoView({behavior:"smooth",block:"start",inline:"center"})}function fa(s){return s.children.filter(function(n){return!(0,tr.nj)(n.type)}).map(function(n){return n.type==="QuestionSet"?{title:(0,e.jsxs)("div",{onClick:function(){return va(n.id)},children:[n.index+1,".",(0,S.WO)(n.title)]}),key:n.id,children:fa(n)}:{title:(0,e.jsxs)("div",{onClick:function(){return va(n.id)},children:[n.index+1,".",(0,S.WO)(n.title)]}),key:n.id}})}var nr=(0,A.Pi)(function(){var s=(0,D.AR)(),n=s.children.length===0;return(0,e.jsxs)("div",{className:r()("question-title",{empty:n}),children:[n&&(0,e.jsx)("div",{children:(0,e.jsx)(cn.Z,{image:cn.Z.PRESENTED_IMAGE_SIMPLE,description:"\u6CA1\u6709\u6DFB\u52A0\u9898\u76EE"})}),(0,e.jsx)(_i.Z,{treeData:fa(s),blockNode:!0,showLine:{showLeafIcon:!1},selectable:!1,switcherIcon:(0,e.jsx)(er.Z,{})})]})}),Xn=ln.Z.TabPane,ar=function(){return(0,e.jsx)("div",{className:"question-panel",children:(0,e.jsxs)(ln.Z,{defaultActiveKey:"1",type:"card",centered:!0,tabBarGutter:0,children:[(0,e.jsx)(Xn,{tab:"\u9898\u578B",children:(0,e.jsx)(Ui,{})},"1"),(0,e.jsx)(Xn,{tab:"\u9898\u5E93",children:(0,e.jsx)(qi,{})},"2"),(0,e.jsx)(Xn,{tab:"\u5927\u7EB2",children:(0,e.jsx)(nr,{})},"3")]})})},ir=c(3182),$r=c(22385),ha=c(31097),rr=c(94043),ma=c.n(rr),ur=c(62298),qn=c(42768),sr=c(57119),or=c(73171),lr=function(n){var t=n.file,o=n.onPreview,f=n.onRemove;return(0,e.jsxs)("div",{className:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card",children:[(0,e.jsx)("div",{className:"ant-upload-list-item-info",children:(0,e.jsxs)("span",{className:"ant-upload-span",children:[(0,e.jsx)("a",{className:"ant-upload-list-item-thumbnail",href:t.url,target:"_blank",rel:"noopener noreferrer",children:(0,e.jsx)("img",{src:t.thumbUrl,alt:t.fileName,className:"ant-upload-list-item-image"})}),(0,e.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"ant-upload-list-item-name",title:t.url,href:t.url,children:t.name})]})}),(0,e.jsxs)("span",{className:"ant-upload-list-item-actions",children:[(0,e.jsx)(Nt.Z,{title:"\u8BBE\u7F6E\u80CC\u666F",size:"small",onClick:o,type:"text",icon:(0,e.jsx)(qn.Z,{style:{color:"white"},className:"ant-upload-list-item-card-actions-btn"})}),(0,e.jsx)(Nt.Z,{title:"\u5220\u9664\u56FE\u7247",size:"small",type:"text",onClick:f,icon:(0,e.jsx)(or.Z,{style:{color:"white"},className:"ant-upload-list-item-card-actions-btn"})})]})]})},xa=function(n){var t=(0,ot.IE)(),o=n.list,f=n.type,h=(0,D.Tv)(),v=(0,m.useState)(o.map(function(E){return{uid:E.id,name:E.originalName,status:"done",thumbUrl:E.previewUrl||"/api/public/preview/".concat(E.id,"@thumbnail"),url:E.previewUrl||"/api/public/preview/".concat(E.id)}})||[]),l=(0,Y.Z)(v,2),x=l[0],C=l[1],B=(0,e.jsx)("div",{children:(0,e.jsx)(ha.Z,{title:"\u56FE\u7247\u4E0A\u4F20",children:(0,e.jsx)(ur.Z,{style:{minWidth:30}})})}),b=function(){var E=(0,ir.Z)(ma().mark(function P(O){var J,q,Te,K;return ma().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:J=O.onSuccess,q=O.onError,Te=O.file,K=O.onProgress,t.uploadImage(f,Te,function(V){K&&K({percent:V.loaded/V.total*100})}).then(function(V){if(V.success&&J&&J(V.data),!V.success&&q){var ue=new Error("Some error");q({event:ue})}});case 2:case"end":return W.stop()}},P)}));return function(O){return E.apply(this,arguments)}}(),M=function(P){C(P.fileList)};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ua.Z,{listType:"picture-card",accept:".jpg,.jpeg,.png,.gif,.bmp,.wbmp",customRequest:b,itemRender:function(P,O,J,q){return(0,e.jsx)(lr,{file:O,onPreview:q.preview,onRemove:q.remove})},showUploadList:{showPreviewIcon:!1,downloadIcon:(0,e.jsx)(qn.Z,{}),showDownloadIcon:!0},fileList:x,iconRender:function(P){return(0,e.jsx)("a",{children:P.name})},onPreview:function(P){var O,J=((O=P.response)===null||O===void 0?void 0:O.id)||P.uid;h.changeBackgroundImage(f===1?"backgroundImage":"headerImage",J)},onRemove:function(P){var O=P.uid;return Lt.Z.confirm({title:"\u786E\u8BA4",icon:(0,e.jsx)(sr.Z,{}),content:"\u786E\u5B9A\u8981\u5220\u9664\u5F53\u524D\u56FE\u7247\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){t.deleteImage(O,f).then(function(q){q&&C(function(Te){return(0,Fn.Z)(Te.filter(function(K){var ce;return((ce=K.response)===null||ce===void 0?void 0:ce.id)||K.uid!==O}))})})}}),!1},onChange:M,children:B})})},pa=ln.Z.TabPane,cr=function(n){var t=n.onCancel,o=(0,ot.IE)(),f=o.bgi,h=o.hi;return(0,e.jsx)(Lt.Z,{onCancel:t,visible:!0,footer:!1,closable:!1,bodyStyle:{padding:"2px 5px",height:450,overflowY:"auto"},width:650,children:(0,e.jsxs)(ln.Z,{defaultActiveKey:"1",className:"img-box-modal",children:[(0,e.jsx)(pa,{tab:"\u80CC\u666F\u56FE",children:(0,e.jsx)(xa,{type:1,list:f||[]})},"bgi"),(0,e.jsx)(pa,{tab:"\u9875\u7709\u56FE",children:(0,e.jsx)(xa,{type:2,list:h||[]})},"hi")]})})},dr=(0,A.Pi)(cr),vr=c(18547),fr=c(18401),ga=(0,A.Pi)(function(s){var n,t,o,f,h,v=s.fileId,l=s.onOk,x=(0,D.AR)(),C=(n=x.form.values)===null||n===void 0||(t=n.attribute)===null||t===void 0?void 0:t.backgroundImage,B=(o=x.form.values)===null||o===void 0||(f=o.attribute)===null||f===void 0?void 0:f.headerImage,b=C===v||B===v;return(0,e.jsx)("div",{className:"picture-card-wrapper",children:(0,e.jsxs)("div",{className:r()("picture-card",(h={},(0,gt.Z)(h,"checked",b),(0,gt.Z)(h,"upload-img",v==="new"),h)),onClick:function(){v==="new"?l("new"):b?l():l(v)},children:[v!=="new"&&(0,e.jsx)("img",{src:"/api/public/preview/".concat(v)}),(0,e.jsxs)("span",{className:"actions",children:[!b&&v!=="new"&&(0,e.jsx)(qn.Z,{style:{cursor:"pointer",width:30}}),b&&v!=="new"&&(0,e.jsx)(vr.Z,{style:{cursor:"pointer",width:30}}),v==="new"&&(0,e.jsx)(fr.Z,{style:{cursor:"pointer",width:30}})]})]})})}),ja=function(n){var t=n.list,o=n.type,f=(0,m.useState)(!1),h=(0,Y.Z)(f,2),v=h[0],l=h[1],x=(0,D.Tv)(),C=function(b){if(b==="new"){l(!0);return}x.changeBackgroundImage(o===1?"backgroundImage":"headerImage",b)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"picture-card-container",children:[t.map(function(B){return(0,e.jsx)(ga,{fileId:B.id,onOk:function(M){return C(M)}},B.id)}),(0,e.jsx)(ga,{fileId:"new",onOk:function(b){return C(b)}})]}),v&&(0,e.jsx)(dr,{onCancel:function(){return l(!1)}})]})},hr=(0,ke.P)(function(){var s=(0,ot.IE)(),n=s.bgi;return n.length,(0,e.jsx)(ja,{type:1,list:n||[]})}),mr=(0,ke.P)(function(){var s=(0,ot.IE)(),n=s.hi;return n.length,(0,e.jsx)(ja,{type:2,list:n||[]})}),Ca=ln.Z.TabPane,xr=function(){return(0,e.jsx)("div",{className:"theme-panel",children:(0,e.jsxs)(ln.Z,{defaultActiveKey:"bgi",type:"card",centered:!0,tabBarGutter:0,onChange:function(){},children:[(0,e.jsx)(Ca,{tab:"\u80CC\u666F\u56FE",children:(0,e.jsx)(hr,{})},"bgi"),(0,e.jsx)(Ca,{tab:"\u9875\u7709\u56FE",children:(0,e.jsx)(mr,{})},"hi")]})})},pr=(0,ke.P)(function(s){var n=s.item,t=(0,m.useState)(0),o=(0,Y.Z)(t,2),f=o[0],h=o[1],v=(0,m.useRef)(-1),l=(0,D.Tv)(),x=function(){var b=-1,M=0,E=0,P=0;clearInterval(v.current),v.current=window.setInterval(function(){b++,b==200&&(b=0,P+=.5),h(E/4),Math.floor(P)%2==0?E<200?M=(2*b+1)/200:M=2-(2*b+1)/200:E>200?M=-(2*b+1)/200:M=(2*b+1)/200-2,E=E+M},20)},C=function(){clearInterval(v.current),h(0)};return(0,m.useEffect)(function(){clearInterval(v.current)},[]),(0,e.jsxs)(u.Z,{onMouseEnter:x,onMouseLeave:C,span:12,style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#dde5ed",padding:4,borderRight:"1px solid white"},children:[(0,e.jsx)("div",{style:{backgroundImage:"url(/api/public/preview/".concat(n.previewUrl,")"),overflowY:"hidden",height:140,width:"100%",backgroundSize:"cover",backgroundPosition:"center top",backgroundPositionY:"".concat(f,"%")}}),f>0&&(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",width:"100%"},children:[(0,e.jsx)("a",{onClick:function(){l.templatePreview(n.template),ae.default.info("\u6A21\u677F".concat(n.name,"\u9884\u89C8\u6210\u529F\uFF0C\u70B9\u51FB\u56DE\u9000\u9000\u51FA\u5F53\u524D\u6A21\u677F"),6)},children:"\u9884\u89C8"}),(0,e.jsx)("a",{onClick:function(){l.fromTemplate(n.template),ae.default.success("\u5DF2\u5E94\u7528\u6A21\u677F".concat(n.name,"\uFF0C\u70B9\u51FB\u56DE\u9000\u9000\u51FA\u5E94\u7528\u5F53\u524D\u6A21\u677F"),6)},children:"\u5E94\u7528"})]}),f===0&&(0,e.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",textAlign:"center"},children:n.name})]})}),gr=(0,ke.P)(function(){var s=(0,ot.IE)(),n=s.st;return(0,m.useEffect)(function(){s.st.length===0&&s.loadTemplate("Survey")},[]),n.length===0?(0,e.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(cn.Z,{image:cn.Z.PRESENTED_IMAGE_SIMPLE,description:(0,e.jsxs)("span",{children:["\u6CA1\u6709\u4FDD\u5B58\u95EE\u5377\u6A21\u677F",(0,e.jsx)(ha.Z,{title:"\u7F16\u8F91\u9875\u9762\u70B9\u51FB\u6807\u9898\u53F3\u4FA7\u6DFB\u52A0\u6309\u94AE\u53EF\u4EE5\u6DFB\u52A0\u5F53\u524D\u95EE\u5377\u5230\u6A21\u677F\u5E93",children:(0,e.jsx)(gn.Z,{style:{marginLeft:10,color:"#8c8c8c"}})})]})})}):(0,e.jsx)(oa.Z,{gutter:[0,10],style:{overflowY:"auto",padding:"20px 0 20px 0"},children:n.map(function(t){return(0,e.jsx)(pr,{item:t},t.id)})})}),jr=function(){var n=(0,D.AK)("sidebar-panel"),t=(0,m.useContext)(Kn),o=t.activeTab;return(0,e.jsxs)("div",{className:r()(n+"-tabs-content"),children:[o==="questionType"&&(0,e.jsx)(ar,{}),o==="theme"&&(0,e.jsx)(xr,{}),o==="surveyTemplate"&&(0,e.jsx)(gr,{})]})},ya=(0,A.Pi)(function(s){var n=s.onClose,t=(0,ot.IE)(),o=s.mode||t.mode||"survey",f=(0,m.useMemo)(function(){return new Be.j$(t.schema,o)},[t.schema,o]),h=(0,Mt.dD)(),v=(0,m.useRef)(null);(0,m.useEffect)(function(){if(o!=="template"&&Object.keys(s.location.query).includes("fromTemplate")){var x,C,B=(x=s.match)===null||x===void 0||(C=x.params)===null||C===void 0?void 0:C.id,b=localStorage.getItem("temp-template");B==="new"&&b&&(f.from(JSON.parse(b)),localStorage.removeItem("temp-template"),ae.default.success("\u5E94\u7528\u6A21\u677F\u6210\u529F"))}},[]);var l=t.id;return(0,m.useEffect)(function(){l!=="new"&&f.setId(l)},[l,f]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(S.xI.Provider,{value:(0,m.useMemo)(function(){return{getContainer:function(){return v.current},prefixCls:"survey-",tree:f.tree,operation:f.operation,history:f.history,workspace:f,mode:o,onClose:n}},[f.tree,f,o]),children:(0,e.jsxs)("div",{id:"editor",className:r()("survey-editor","survey-light","survey-app",h?"mobile":"pc"),children:[(0,e.jsxs)(Yi,{children:[(0,e.jsx)(Wi,{}),(0,e.jsx)(jr,{})]}),(0,e.jsxs)(Oi,{children:[(0,e.jsx)(Hi,{}),(0,e.jsx)(wi,{})]}),(0,e.jsx)($i,{}),(0,e.jsx)("div",{id:"survey-modal-container",ref:v})]})})})}),Cr=ya},6936:function($t,At,c){"use strict";c.d(At,{H:function(){return L},D:function(){return Qt}});var He=c(94657),ae=c(67294),m=c(77613),A=c(71194),Ce=c(50146),r=c(83279),Et=c(9778),Mt=c(94184),S=c.n(Mt),Be=c(74118),D=c(85893),Y=(0,m.P)(function(Se){var se=Se.className,De=Se.style,ie=Se.level,fe=Se.total,Fe=(0,ae.useRef)(null),he=(0,ae.useState)(!1),Ne=(0,He.Z)(he,2),de=Ne[0],ye=Ne[1],Ie=(0,ae.useContext)(U),re=Ie.options,ne=Ie.updateOption,oe=re[ie-1];return(0,D.jsxs)("div",{ref:Fe,style:De,className:S()(se,"title",{"has-error":de}),"data-id":"".concat(oe.id),children:[(0,D.jsx)("div",{className:"col-item-wrap",children:(0,D.jsx)(Be.Bn,{value:oe.title,style:{padding:7},onChange:function(ze){return ne(oe.id,ze)},size:"small",bounds:".column".concat(ie)})}),(0,D.jsx)("div",{className:"col-item-limit",children:fe})]})}),be=c(11849),Pe=c(75414),e=(0,m.P)(function(Se){var se=Se.data,De=Se.active,ie=Se.className,fe=Se.level,Fe=se.label,he=se.value,Ne=(0,ae.useContext)(U),de=Ne.updateItem,ye=Ne.deleteItem,Ie=(0,ae.useRef)(null),re=(0,Et.XI)(),ne=(0,He.Z)(re,3),oe=ne[0],_=ne[1],ze=ne[2];return(0,ae.useLayoutEffect)(function(){var ft;(ft=ze.current)===null||ft===void 0||ft.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[]),(0,D.jsxs)("div",(0,be.Z)((0,be.Z)({onClick:function(){de(fe,Fe,he),setTimeout(function(){var Me;return(Me=Ie.current)===null||Me===void 0?void 0:Me.focus()},20)},className:S()(ie,"cell",{"column-item-active":De})},_),{},{children:[(0,D.jsx)("div",{className:"col-item-order",children:(0,D.jsx)(Pe.MT,{infer:"DragVertical",className:"drag-handle-option",style:{cursor:"move"}})}),(0,D.jsxs)("div",{className:"col-item-wrap",children:[!De&&Fe,De&&(0,D.jsx)("input",{value:Fe,className:"col-item-input",onChange:function(Me){return de(fe,Me.target.value,he)}})]}),se.children&&(0,D.jsx)("div",{className:"col-item-limit",children:se.children.length}),(oe||De)&&(0,D.jsx)(Pe.MT,{infer:"MinusCircle",className:"col-item-del",onClick:function(Me){Me.stopPropagation(),ye(fe,he)}})]}))}),$e=c(80937),yt=(0,$e.Pi)(function(Se){var se=Se.title,De=Se.dataSource,ie=De===void 0?[]:De,fe=Se.level,Fe=Se.checked,he=Se.active,Ne=Se.hasOption,de=(0,ae.useContext)(U),ye=de.addItem,Ie=de.updateOrder;return(0,D.jsxs)("div",{className:"column",children:[(0,D.jsx)("div",{className:"cascader-title",children:se}),(0,D.jsxs)("div",{className:"cascader-content column-".concat(fe),children:[Ne&&(0,D.jsx)(Y,{level:fe,total:ie.length,style:{display:ie.length>0?"block":"none"}}),(0,D.jsx)(Pe.W2,{dragHandleSelector:".drag-handle-option",groupName:"cascader-level".concat(fe),behaviour:"contain",lockAxis:"y",disabled:ie.length===0,onDrop:function(ne){var oe=ne.addedIndex,_=ne.removedIndex;oe!==null&&_!==null&&Ie(fe,_,oe)},children:ie.map(function(re,ne){return(0,D.jsx)(Pe._l,{children:(0,D.jsx)(e,{data:re,active:Fe===re.value,level:fe,index:ne})},"".concat(re.value))})})]}),he&&(0,D.jsx)("div",{onClick:function(){return ye(fe)},className:"cascader-add-item",children:"+\u6DFB\u52A0\u9009\u9879"})]})}),H=c(87310),qe=c(54531),$=c(71211),kt=c(76826),st=function(se){return{addItem:function(ie){for(var fe=se.checked,Fe=se.dataSource,he=Fe,Ne=function(Ie){if(Ie===ie){var re=1;he.length>0&&(re=Math.max.apply(Math,(0,r.Z)(he.map(function(oe){return parseInt(oe.value,10)})))+1),he.push({label:"\u65B0\u9009\u9879".concat(he.length+1),value:"".concat(re)})}else{var ne=he.find(function(oe){return oe.value===fe[Ie-1]});ne.children||(ne.children=[]),he=ne.children}},de=1;de<=ie;de++)Ne(de)},deleteItem:function(ie,fe){for(var Fe=se.checked,he=se.dataSource,Ne=he,de=function(re){var ne=void 0;if(re===ie){var oe=Ne.findIndex(function(ze){return ze.value===fe});if(Ne.splice(oe,1),Ne.length===0){var _;(_=ne)===null||_===void 0||delete _.children}}else ne=Ne.find(function(ze){return ze.value===Fe[re-1]}),ne.children||(ne.children=[]),Ne=ne.children},ye=1;ye<=ie;ye++)de(ye);Fe.splice(ie-1)},updateItem:function(ie,fe,Fe){for(var he=se.checked,Ne=se.dataSource,de=Ne,ye=function(ne){if(ne===ie){var oe=de.find(function(ze){return ze.value===Fe}),_=de.findIndex(function(ze){return ze.value===Fe});oe&&(oe.label=fe),de.splice(_,1,oe)}else de=de.find(function(ze){return ze.value===he[ne-1]}).children},Ie=1;Ie<=ie;Ie++)ye(Ie);he[ie-1]!==Fe&&(he[ie-1]=Fe,he.splice(ie))},updateOrder:function(ie,fe,Fe){for(var he=se.checked,Ne=se.dataSource,de=Ne,ye=function(ne){if(ne===ie){var oe=de[fe];de.splice(fe,1),de.splice(Fe,0,oe)}else de=de.find(function(_){return _.value===he[ne-1]}).children},Ie=1;Ie<=ie;Ie++)ye(Ie)},updateOption:function(ie,fe){var Fe=se.options.find(function(he){return he.id===ie});Fe&&(Fe.title=fe)},addOption:function(){se.options.push({id:(0,$.Ox)(),title:"\u8BF7\u9009\u62E9"})}}},U=ae.createContext({}),Rt=(0,$e.Pi)(function(Se){var se,De,ie,fe=Se.onCancel,Fe=Se.onOk,he=Se.value,Ne=(0,ae.useRef)(null),de=(0,ae.useContext)(kt.xI),ye=de.getContainer,Ie=(0,Et.$1)(st,{dataSource:(0,qe.ZN)(he)||[],checked:[],options:(0,r.Z)(new Array(4)).map(function(at,ke){return Se.options.length>ke?Se.options[ke]:{id:(0,$.Ox)(),title:"\u8BF7\u9009\u62E9"}})}),re=(0,He.Z)(Ie,2),ne=re[0],oe=ne.dataSource,_=ne.checked,ze=ne.options,ft=re[1],Me=ft.addItem,Kt=ft.deleteItem,zt=ft.updateItem,nn=ft.updateOrder,bt=ft.addOption,Xt=ft.updateOption,St=_.length>=1&&((se=oe.find(function(at){return at.value===_[0]}))===null||se===void 0?void 0:se.children)||[],Ee=_.length>=2&&St&&((De=St.find(function(at){return at.value===_[1]}))===null||De===void 0?void 0:De.children)||[],Ve=_.length>=3&&Ee&&((ie=Ee.find(function(at){return at.value===_[2]}))===null||ie===void 0?void 0:ie.children)||[],Tt=(0,ae.useMemo)(function(){return(0,H.vC)((0,qe.ZN)(oe))},[oe]);return(0,D.jsx)(U.Provider,{value:{addItem:Me,deleteItem:Kt,updateItem:zt,updateOrder:nn,updateOption:Xt,addOption:bt,options:ze},children:(0,D.jsx)("div",{ref:Ne,children:(0,D.jsx)(Ce.Z,{title:"\u9009\u9879\u7F16\u8F91",getContainer:ye,visible:!0,className:"cascader-modal",onOk:function(){Fe(oe,ze.slice(0,Tt/2))},onCancel:function(){fe()},width:800,maskClosable:!1,children:(0,D.jsxs)("div",{className:"content",children:[(0,D.jsx)(yt,{level:1,checked:_[0],dataSource:oe,title:"\u4E00\u7EA7\u9009\u9879",active:_.length>=0,hasOption:Tt>=2}),(0,D.jsx)(yt,{level:2,checked:_[1],dataSource:St,title:"\u4E8C\u7EA7\u9009\u9879",active:_.length>=1,hasOption:Tt>=4}),(0,D.jsx)(yt,{level:3,checked:_[2],dataSource:Ee,title:"\u4E09\u7EA7\u9009\u9879",active:_.length>=2,hasOption:Tt>=6}),(0,D.jsx)(yt,{level:4,checked:_[3],dataSource:Ve,title:"\u56DB\u7EA7\u9009\u9879",active:_.length>=3,hasOption:Tt>=8})]})})})})});function Qt(Se){return Se.split(/\t|\s+|\//).filter(function(se){return se.trim()!==""}).map(function(se){return{title:se}})}function L(Se){var se=Se.reduce(function(De,ie){return ie.split(/\t|\s+|\//).reduce(function(fe,Fe,he,Ne){fe.value=(0,$.Ox)();var de=Ne.slice(0,he+1).join("."),ye=(fe.children=fe.children||[]).find(function(Ie){return Ie.label===de});return ye||fe.children.push(ye={label:de,value:(0,$.Ox)()}),ye},De),De},{children:[]}).children;return JSON.parse(JSON.stringify(se,function(De,ie){return De==="label"?ie.split(".").slice(-1)[0]:ie}))}function ot(){var Se=(0,ae.useState)(!1),se=(0,He.Z)(Se,2),De=se[0],ie=se[1],fe=(0,$e.cI)(),Fe=(0,ae.useContext)(kt.xI),he=Fe.operation,Ne=(0,ae.useContext)(kt.Gb),de=Ne.node,ye=Ne.getContainer,Ie=fe.query("dataSource").get("value");return(0,D.jsxs)("div",{style:{paddingLeft:20,marginTop:10},children:[(0,D.jsxs)("a",{onClick:function(){ie(!0)},children:[(0,D.jsx)(Pe.MT,{infer:"Plus"}),"\u9009\u9879\u7F16\u8F91"]}),(0,D.jsx)(Pe.E4,{getContainer:ye,onConfirm:function(ne){var oe=Qt(ne[0]),_=L(ne.slice(1));fe.query("dataSource").take(function(ze){return ze.value=_}),he.batchReplaceNode(oe,de)}}),De&&(0,D.jsx)(Rt,{onCancel:function(){return ie(!1)},value:Ie,options:de.children.map(function(re){return{id:re.id,title:re.title}}),onOk:function(ne,oe){fe.query("dataSource").take(function(_){return _.value=ne}),he.batchReplaceNode(oe,de),ie(!1)}})]})}(0,kt.j1)("Cascader",(0,m.P)(ot))},11989:function($t){$t.exports={settingItem:"settingItem___Xa8Ne"}},16761:function($t){$t.exports={settingItem:"settingItem___1IChY",popover:"popover___1LQeP"}}}]);
