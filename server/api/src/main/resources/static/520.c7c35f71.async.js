(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[520],{55686:function(Ke,Ie,h){"use strict";var Y=h(11849),J=h(94233),y=h(51890),R=h(93224),O=h(89366),p=h(85893),C=function(re){var je=re.user,M=(0,R.Z)(re,["user"]);return je.avatar?(0,p.jsx)(y.C,(0,Y.Z)({src:"/api/public/preview/".concat(je.avatar),size:M.size||"small"},M)):(0,p.jsx)(y.C,(0,Y.Z)({icon:(0,p.jsx)(O.Z,{}),size:M.size||"small"},M))};Ie.Z=C},78210:function(Ke,Ie,h){"use strict";var Y=h(15020),J=h(85893),y=function(O){var p=O.html,C=p===void 0?"":p,Ee=O.replaceP,re=Ee===void 0?!0:Ee;return re?(0,J.jsx)(J.Fragment,{children:typeof C=="string"&&(0,Y.ZP)(C.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,J.jsx)(J.Fragment,{children:typeof C=="string"&&(0,Y.ZP)(C)})};Ie.Z=y},45290:function(Ke,Ie,h){"use strict";h.d(Ie,{Mt:function(){return qe},hl:function(){return N},AT:function(){return Be},HN:function(){return be},we:function(){return Se},x4:function(){return Ge},k9:function(){return C},oq:function(){return dt},jI:function(){return _e}});var Y=h(2299),J=h(67294),y=h(24004),R=h(95522),O=h(87998),p=h(85893);function C(P){var b=(0,J.useContext)(y.ZX),E=b.theme,H=b.footerVisible,le=b.headerVisible,ve=P.schema,k=function(I){var q=(0,R.GZ)(E,"Survey");if(q)return J.createElement(q,{schema:ve,footerVisible:H,headerVisible:le},I)},T=function(){var I,q=-1;return(I=ve.children)===null||I===void 0?void 0:I.map(function(L){var Fe=L.type,W=L.id;return(0,O.nj)(Fe)||q++,Fe==="QuestionSet"?(0,p.jsx)(Se,{schema:L,index:q},W):(0,p.jsx)(be,{schema:L,index:q},W)})};return(0,p.jsxs)(p.Fragment,{children:[k(T()),(0,p.jsx)(Y.gN,{name:"_finish"})]})}var Ee=h(32059),re=h(2824),je=h(86582),M=h(11849);function xe(P){var b,E=[],H=P.attribute;return H&&H.required&&E.push({required:!0,triggerType:"onInput"}),H&&H.answerLimit&&E.push({answerLimit:!0,schema:P}),(b=P.children)===null||b===void 0||b.forEach(function(le){E.push.apply(E,(0,je.Z)(S(le,P)))}),E.forEach(function(le){le.triggerType="manual"}),E}function S(P,b){var E,H,le,ve,k=[];if((E=P.attribute)!==null&&E!==void 0&&E.dataType){var T;k.push((T={},(0,Ee.Z)(T,P.attribute.dataType,!0),(0,Ee.Z)(T,"schema",(0,M.Z)((0,M.Z)({},P),{},{parent:b})),T))}return(H=P.attribute)!==null&&H!==void 0&&H.required&&k.push({required:!0,schema:(0,M.Z)((0,M.Z)({},P),{},{parent:b})}),(le=P.attribute)!==null&&le!==void 0&&le.textLimit&&k.push({textLimit:!0,schema:(0,M.Z)((0,M.Z)({},P),{},{parent:b})}),(ve=P.attribute)!==null&&ve!==void 0&&ve.scope&&k.push({scope:!0,schema:(0,M.Z)((0,M.Z)({},P),{},{parent:b})}),k}var w=h(80705),X=h(15020),N=function(b){var E=b.html,H=E===void 0?"":E;return(0,p.jsx)(p.Fragment,{children:typeof H=="string"&&(0,X.ZP)(H.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))})},e=function(b){return(0,p.jsx)("div",{className:"preview",children:De(b)})};function De(P){var b=P.schema,E=P.value;if(!E)return"";var H;if(b.type==="Radio"||b.type==="Select")Object.entries(E).some(function(T){var $=(0,re.Z)(T,2),I=$[0],q=$[1];if(q===!0){var L,Fe;H=(0,p.jsx)(N,{html:(L=b.children)===null||L===void 0||(Fe=L.find(function(we){return we.id===I}))===null||Fe===void 0?void 0:Fe.title})}else if(q){var W,Ne;H=(0,p.jsx)(N,{html:(W=b.children)===null||W===void 0||(Ne=W.find(function(we){return we.id===I}))===null||Ne===void 0?void 0:Ne.title})}return!0});else{if(b.type==="Checkbox")return Object.entries(E).map(function(T){var $=(0,re.Z)(T,2),I=$[0],q=$[1];if(q===!0){var L,Fe;return(0,p.jsx)(N,{html:(L=b.children)===null||L===void 0||(Fe=L.find(function(we){return we.id===I}))===null||Fe===void 0?void 0:Fe.title},I)}else if(q){var W,Ne;return(0,p.jsx)(N,{html:(W=b.children)===null||W===void 0||(Ne=W.find(function(we){return we.id===I}))===null||Ne===void 0?void 0:Ne.title},I)}}).reduce(function(T,$){return[T,", ",$]});if(b.type==="Cascader"){var le=b.children.map(function(T){return T.id}),ve=le.map(function(T){return E[T]}),k=b.dataSource;return ve.filter(function(T){return T!==void 0}).map(function(T,$){var I,q=(I=k)===null||I===void 0?void 0:I.find(function(L){return L.value===T});return k=q.children,(0,p.jsx)("span",{children:q.label},le[$])})}else if(b.type==="FillBlank"||b.type==="MultipleBlank"||b.type==="Textarea"||b.type==="Score"||b.type==="Nps")return Object.entries(E).map(function(T){var $=(0,re.Z)(T,2),I=$[0],q=$[1];return(0,p.jsx)("span",{children:q},I)})}return H}var be=(0,Y.Pi)(function(b){var E=b.schema,H=b.index,le=b.qsIndex,ve=E.id,k=E.type,T=(0,J.useContext)(y.ZX),$=T.theme,I=T.optionTypes,q=T.id2title,L=(0,J.useMemo)(function(){return(0,O.cB)(E,"calculate")},[]),Fe=(0,J.useMemo)(function(){var B;return(0,Y.$j)((0,R.I8)($,k),(0,Y.jM)(function(z,_){return(0,M.Z)((0,M.Z)({},z),{},{onChange:function(Q){function me(){_.selfErrors.length>0&&_.validate().catch(function(){})}if(!z.readOnly){if((0,w.xb)(Q)){_.onInput(void 0),me();return}if(k.startsWith("Matrix")&&(0,O.hb)(Q)){me(),_.onInput(void 0);return}Q&&Object.keys(Q).forEach(function(se){Q[se]===void 0&&(Q[se]="")}),_.onInput(Q),me()}}})}),(0,Y.vl)(((B=(0,R.I8)($,k))===null||B===void 0?void 0:B.Preview)||e))},[$,k]),W=(0,J.useCallback)(function(B){return(0,p.jsx)("div",{tabIndex:-1,onBlur:B==null?void 0:B.onBlur,"data-id":B.schema.id,children:J.createElement((0,R.GZ)($,"Question"),B)})},[$]),Ne=(0,J.useMemo)(function(){return(0,Y.$j)(W,(0,Y.jM)(function(B,z){return(0,M.Z)((0,M.Z)({},B),{},{error:z.selfErrors.length?(0,je.Z)(z.selfErrors):[],warning:z.selfWarnings.length?z.selfWarnings:[],onBlur:function(){return z.onBlur.apply(z,arguments)},required:z.required})}))},[W]),we=(0,J.useMemo)(function(){return(0,Y.$j)((0,R.I8)($,k),(0,Y.jM)(function(B,z){return(0,M.Z)({},B)}))},[$,k]);return(0,O.nj)(E.type)?(0,p.jsx)(Y.jG,{name:ve,component:[we,{schema:E,controlShow:void 0}],reactions:[function(B){var z,_=(z=E.attribute)===null||z===void 0?void 0:z.replaceTextRule;if(_){var ie=(0,O.vW)(_,function(me){var se=(0,O.Op)(me),ne=(0,re.Z)(se,1),ae=ne[0],Ce=B.query(ae).get("value");return(0,O.d0)(I,Ce,me,q)}),Q="";ie.success&&ie.result&&(Q=ie.result),B.setComponentProps((0,M.Z)((0,M.Z)({},B.componentProps),{},{replaceTitle:Q}))}}]}):(0,p.jsx)(Y.gN,{name:ve,component:[Fe,{schema:E,controlShow:void 0}],decorator:[Ne,{schema:E,index:H,qsIndex:le}],validator:xe(E),reactions:[function(B){Object.entries(L).forEach(function(z){var _=(0,re.Z)(z,2),ie=_[0],Q=_[1],me=Q,se=(0,O.vW)(me,function(ne){var ae=(0,O.Op)(ne),Ce=(0,re.Z)(ae,2),vt=Ce[0],ht=Ce[1],tt=B.query(vt).get("value");return(0,O.d0)(I,tt,ne)});se.success&&B.setState(function(ne){var ae;return ne.value=(0,M.Z)((0,M.Z)({},ne.value),{},(0,Ee.Z)({},ie,(0,O.A7)(se.result,(ae=E.children)===null||ae===void 0?void 0:ae.find(function(Ce){return Ce.id===ie}))))})})},function(B){var z,_=(z=E.attribute)===null||z===void 0?void 0:z.visibleRule;if(_){var ie=(0,O.vW)(_,function(Q){var me=(0,O.Op)(Q),se=(0,re.Z)(me,2),ne=se[0],ae=se[1],Ce=B.query(ne).get("value");return(0,O.d0)(I,Ce,Q)});ie.success&&(ie.result?B.display="visible":B.display="none")}},function(B){var z,_=(z=E.attribute)===null||z===void 0?void 0:z.requiredRule;if(_){var ie=(0,O.vW)(_,function(Q){var me=(0,O.Op)(Q),se=(0,re.Z)(me,2),ne=se[0],ae=se[1],Ce=B.query(ne).get("value");return(0,O.d0)(I,Ce,Q)});ie.success&&(ie.result?B.required=!0:B.required=!1)}},function(B){var z,_=(z=E.attribute)===null||z===void 0?void 0:z.replaceTextRule;if(_){var ie=(0,O.vW)(_,function(me){var se=(0,O.Op)(me),ne=(0,re.Z)(se,1),ae=ne[0],Ce=B.query(ae).get("value");return(0,O.d0)(I,Ce,me,q)}),Q="";ie.success&&ie.result&&(Q=ie.result),B.setDecoratorProps((0,M.Z)((0,M.Z)({},B.decoratorProps),{},{replaceTitle:Q}))}}]})});function Se(P){var b=P.schema,E=P.index,H=b.id,le=(0,J.useContext)(y.ZX),ve=le.theme,k=function(){var $;return($=b.children)===null||$===void 0?void 0:$.map(function(I,q){return I.type==="QuestionSet"?(0,p.jsx)(Se,{schema:I,index:q},I.id):(0,p.jsx)(be,{schema:I,index:q,qsIndex:E},I.id)})};return(0,p.jsx)(Y.jG,{name:H,decorator:[(0,R.GZ)(ve,"QuestionSet"),{schema:b,index:E}],children:k()})}var Qe=function(b){var E=b.progress,H=E===void 0?0:E;return _jsx("div",{className:"progress-bar",style:{width:"".concat(H*100,"%")}})},Xe=h(16165),Oe=function(){return(0,p.jsxs)("svg",{viewBox:"0 0 1024 1024",width:"150",height:"150",children:[(0,p.jsx)("path",{d:"M0 0h1024v1024H0z",fill:"#FFFFFF","p-id":"44112"}),(0,p.jsx)("path",{d:"M160 73.426667h83.173333V0h98.266667v155.010667h75.6v179.485333h37.813333V163.168h22.666667v-40.8h68.053333v24.474667h30.24v342.666666h60.48V40.8h45.36v236.586667h22.666667V179.485333h45.36V16.317333H893.333333V824H160V73.426667z",fill:"#DDEEFF",opacity:".4","p-id":"44113"}),(0,p.jsx)("path",{d:"M362.693333 741.416l635.866667 95.584L689.893333 997.333333 24 852.36z",fill:"#DFE7F7","p-id":"44114"}),(0,p.jsx)("path",{d:"M1002.64 813.370667l-307.6 160.322666-665.893333-144.970666-0.826667-2.629334v-8.213333l20.586667 2.666667v1.701333l318.933333-104.469333 614.213333 92.48v-5.101334H1002.666667v8.213334h-0.026667z",fill:"#5AA12E","p-id":"44115"}),(0,p.jsx)("path",{d:"M1002.64 805.157333l-308.64 160.314667-665.653333-144.92h-0.026667l-0.213333-0.04 0.213333-0.064v-8.104l17.733333 2.296 320.746667-105.066667 615.253333 92.488v-5.098666H1002.666667v8.213333h-0.026667z",fill:"#93C110","p-id":"44116"}),(0,p.jsx)("path",{d:"M366.8 701.333333L1002.666667 796.917333l-308.666667 160.333334L28.106667 812.266667z",fill:"#EEF2F5","p-id":"44117"}),(0,p.jsx)("path",{d:"M629.333333 809.333333a138.666667 6.666667 0 1 0 277.333334 0 138.666667 6.666667 0 1 0-277.333334 0Z",fill:"#E3E7EA","p-id":"44118"}),(0,p.jsx)("path",{d:"M162.666667 773.333333a152 13.333333 0 1 0 304 0 152 13.333333 0 1 0-304 0Z",fill:"#E3E7EA","p-id":"44119"}),(0,p.jsx)("path",{d:"M922.666667 610.666667h-64v170.666666h53.333333a13.333333 13.333333 0 0 1 0 26.666667h-181.333333a13.333333 13.333333 0 0 1 0-26.666667h58.666666v-144h-26.666666a10.666667 10.666667 0 0 1-10.666667-10.666666v-16h-117.333333v82.666666a8 8 0 0 1-16 0v-82.666666h-5.333334a10.666667 10.666667 0 0 1-10.666666-10.666667v-2.666667l48-50.666666h4.48a7.658667 7.658667 0 0 1 1.573333-0.968l187.093333-83.381334a10.4 10.4 0 0 1 14.773334 6.208l72.453333 81.178667a8.066667 8.066667 0 0 1 2.08 5.461333 11.581333 11.581333 0 0 1 0.213333 2.168v42.666667a10.666667 10.666667 0 0 1-10.666666 10.666667z m-272-42.666667l-26.666667 29.333333h26.666667v-29.333333z m117.333333 53.333333h66.666667v-58.666666h-29.333334l-37.333333 37.333333v21.333333z m-16-24l37.333333-37.333333h-37.333333v37.333333z m-45.333333 0h21.333333v-37.333333h-21.333333v37.333333z m-18.666667-37.333333h-21.333333v37.333333h21.333333v-37.333333z m5.84-13.333333h96.693333a9.224 9.224 0 0 1 0.693334-1.6l32.506666-56.290667zM842.666667 487.976L808.773333 546.666667H842.666667v-58.690667zM845.333333 648h-42.666666v26.666667h42.666666v-26.666667z m0 37.333333h-42.666666v42.666667h42.666666v-42.666667z m0 53.333334h-42.666666v42.666666h42.666666v-42.666666z m13.333334-141.333334h21.333333v-37.333333h-21.333333v37.333333z m0-104.690666V546.666667h48.213333zM917.333333 560h-21.333333v37.333333h21.333333v-37.333333z",fill:"#8BC8FF","p-id":"44120"}),(0,p.jsx)("path",{d:"M592 709.333333h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H514.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H592a8 8 0 0 1 0 16z",fill:"#DFF0FF","p-id":"44121"}),(0,p.jsx)("path",{d:"M936 298.666667h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205334 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H858.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205334H936a8 8 0 0 1 0 16z",fill:"#C3E2FF","p-id":"44122"}),(0,p.jsx)("path",{d:"M104 408H45.333333a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205334H26.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205334 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H104a8 8 0 0 1 0 16z",fill:"#DCEEFF","p-id":"44123"}),(0,p.jsx)("path",{d:"M309.333333 522.666667m-245.333333 0a245.333333 245.333333 0 1 0 490.666667 0 245.333333 245.333333 0 1 0-490.666667 0Z",fill:"#FFCC6C","p-id":"44124"}),(0,p.jsx)("path",{d:"M296 730.666667a245.389333 245.389333 0 0 0 237.013333-308.746667 245.333333 245.333333 0 1 1-460.693333 164.16A245.333333 245.333333 0 0 0 296 730.666667z",fill:"#F3B72C","p-id":"44125"}),(0,p.jsx)("path",{d:"M338.666667 464m-50.666667 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#E49817","p-id":"44126"}),(0,p.jsx)("path",{d:"M333.333333 456m-50.666666 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#FFFFFF","p-id":"44127"}),(0,p.jsx)("path",{d:"M303.333333 603.2a37.085333 37.085333 0 1 1-38 37.066667 37.544 37.544 0 0 1 38-37.066667z",fill:"#E49817","p-id":"44128"}),(0,p.jsx)("path",{d:"M299.333333 597.333333A37.085333 37.085333 0 1 1 261.333333 634.4a37.544 37.544 0 0 1 38-37.066667z",fill:"#FFFFFF","p-id":"44129"}),(0,p.jsx)("path",{d:"M182.786667 554.125333m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#E49817","p-id":"44130"}),(0,p.jsx)("path",{d:"M179.88 549.874667m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#FFFFFF","p-id":"44131"}),(0,p.jsx)("path",{d:"M251.733333 320.424a19.794667 19.794667 0 1 1-20.266666 19.789333 20.026667 20.026667 0 0 1 20.266666-19.789333z",fill:"#E49817","p-id":"44132"}),(0,p.jsx)("path",{d:"M249.6 317.333333a19.794667 19.794667 0 1 1-20.266667 19.786667 20.026667 20.026667 0 0 1 20.266667-19.786667z",fill:"#FFFFFF","p-id":"44133"}),(0,p.jsx)("path",{d:"M426.04 365.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44134"}),(0,p.jsx)("path",{d:"M419.293333 357.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44135"}),(0,p.jsx)("path",{d:"M466.04 589.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44136"}),(0,p.jsx)("path",{d:"M459.293333 581.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44137"}),(0,p.jsx)("path",{d:"M490.666667 860a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44138"}),(0,p.jsx)("path",{d:"M480 801.333333a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44139"}),(0,p.jsx)("path",{d:"M526.453333 597.12a48.968 48.968 0 0 0-4.586666-4.722667c55.493333-36.413333 83.466667-80.64 68.986666-121.04-8.746667-24.416-31.866667-44.266667-64.773333-58.512-0.346667-0.984-0.666667-1.970667-1.12-2.946666a40.712 40.712 0 0 0-3.12-5.410667c39.093333 15.2 66.72 37.432 76.72 65.333333 15.306667 42.656-14.026667 89.253333-72.106667 127.298667zM573.333333 856v5.333333s-135.84 11.306667-109.333333-136c19.866667-100.330667-32.586667-80.72-41.386667-80.112 0 0 0 0.016 0.026667 0.026667a595.552 595.552 0 0 1-66.4 17.274667c-160.48 32.136-312.186667-2.04-338.8-76.336-13.413333-37.413333 7.466667-77.866667 51.973333-112.904a31.802667 31.802667 0 0 0 0.293334 7.485333c0.053333 0.24 0.133333 0.464 0.186666 0.701333-39.04 32.48-56.933333 69.181333-44.746666 103.173334 25.493333 71.109333 172.8 103.397333 329.013333 72.114666a589.661333 589.661333 0 0 0 64.533333-16.714666L418.666667 640s72.826667-26.768 50.666666 80c-17.92 86.293333 13.146667 138.845333 104 136z",fill:"#FFE1A9","p-id":"44140"}),(0,p.jsx)("path",{d:"M512 884a74.666667 6.666667 0 1 0 149.333333 0 74.666667 6.666667 0 1 0-149.333333 0Z",fill:"#E3E7EA","p-id":"44141"}),(0,p.jsx)("path",{d:"M608.453333 802.666667h20.426667l17.093333 75.917333h-54.613333z m-6.88 15.165333h34.186667v6.752h-34.186667v-6.752z m-5.066666 16.917333h44.32v6.749334h-44.32v-6.749334z m-5.173334 21.917334h54.666667v6.749333h-54.666667v-6.749333z m-11.946666 21.917333h78.56a3.381333 3.381333 0 0 1 3.386666 3.373333 3.384 3.384 0 0 1-3.386666 3.373334h-78.56a3.384 3.384 0 0 1-3.386667-3.373334 3.381333 3.381333 0 0 1 3.386667-3.373333z",fill:"#F9A303","p-id":"44142"}),(0,p.jsx)("path",{d:"M768 838.666667a58.666667 6.666667 0 1 0 117.333333 0 58.666667 6.666667 0 1 0-117.333333 0Z",fill:"#E3E7EA","p-id":"44143"}),(0,p.jsx)("path",{d:"M880 845.333333a5.181333 5.181333 0 0 0 5.333333-5v-70a5.181333 5.181333 0 0 0-5.333333-5v80z",fill:"#845C45","p-id":"44144"}),(0,p.jsx)("path",{d:"M880 845.333333a5.181333 5.181333 0 0 1-5.333333-5v-70a5.181333 5.181333 0 0 1 5.333333-5v80z",fill:"#BA805A","p-id":"44145"}),(0,p.jsx)("path",{d:"M880 770.666667a45.333333 45.333333 0 0 0 0-90.666667v90.666667z",fill:"#628A21","p-id":"44146"}),(0,p.jsx)("path",{d:"M880 770.666667a45.333333 45.333333 0 0 1 0-90.666667v90.666667z",fill:"#6EA52E","p-id":"44147"}),(0,p.jsx)("path",{d:"M568 786.778667l-1.946667 6.824a1.130667 1.130667 0 0 1-1.173333 0.773333l-4.16-0.349333a19.581333 19.581333 0 0 1-18.88 8.477333l-13.093333-1.664 0.026666-0.04a3.733333 3.733333 0 0 1-0.986666-0.397333c-2.586667-1.504-3.706667-5.986667-3.306667-11.509334l-7.146667-1.816a3.408 3.408 0 0 1-2.56-4.173333 3.656 3.656 0 0 1 4.426667-2.4l6.453333 1.642667c0.293333-1.066667 0.613333-2.154667 1.013334-3.237334 0.213333-0.621333 0.453333-1.221333 0.693333-1.810666l-7.626667-1.938667a3.410667 3.410667 0 0 1-2.56-4.176 3.653333 3.653333 0 0 1 4.426667-2.4l9.12 2.317333a11.101333 11.101333 0 0 1 7.306667-5.472V765.333333l8.906666 1.136a18.562667 18.562667 0 0 1 16.613334 17.386667l3.813333 1.685333a1.066667 1.066667 0 0 1 0.64 1.237334z m-26.693333-20.149334c-2.693333-1.52-6.24 0.429333-9.306667 4.578667l4.08 1.032a3.392 3.392 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-5.68-1.437333c-0.24 0.573333-0.48 1.16-0.693333 1.765333q-0.6 1.642667-1.04 3.274667l6.88 1.744a3.389333 3.389333 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-6.133333-1.557333c-0.32 5.184 0.853333 9.368 3.386667 10.805333 4.053333 2.298667 10.08-3.309333 13.44-12.533333s2.853333-18.52-1.2-20.818667z",fill:"#FF6767","p-id":"44148"}),(0,p.jsx)("path",{d:"M578.666667 789.333333s194 0.666667 98.666666 64l-2.666666-2.666666s100.826667-53-98.666667-58.666667z",fill:"#FFE1A9","p-id":"44149"})]})},Be=function(b){return(0,p.jsx)(Xe.Z,(0,M.Z)({component:Oe},b))},st=h(27484),Ue=h.n(st),pt=h(75977),Re=h(45418),gt=h(62713),Gt=h(33852),Ae=h(10285),jt=h.n(Ae),ut=h(72540),Ct=h.n(ut),Je=h(96036),yt=h.n(Je);Ue().locale("zh-cn"),Ue().extend(Ct()),Ue().extend(jt()),Ue().extend(yt());var qe=(0,Re.default)((0,M.Z)({},pt.Z)),lt=qe,_e=J.forwardRef(function(P,b){return(0,p.jsx)(lt,(0,M.Z)((0,M.Z)({},P),{},{picker:"time",mode:void 0,ref:b}))});_e.displayName="TimePicker";var Zt=null,bt=h(57663),ce=h(71577);function ot(){return(0,J.useContext)(O.ff)}var dt=(0,Y.Pi)(function(){var P,b=ot(),E=((P=b.savedAnswer)===null||P===void 0?void 0:P.progress)||0;return(0,p.jsx)("div",{className:"temp-confirm",children:(0,p.jsxs)("div",{className:"temp-confirm-cont",children:[(0,p.jsx)("div",{children:(0,p.jsxs)("svg",{t:"1647102518492",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4235",width:"128",height:"128",children:[(0,p.jsx)("path",{d:"M876.88894187 362.30785921v463.42517333c0 23.4826304-19.07152853 42.6838976-42.55415894 42.6838976-23.61236907 0-42.6838976-19.07152853-42.6838976-42.6838976V362.30785921h85.23805654z",fill:"#CCCBCA","p-id":"4236","data-spm-anchor-id":"a313x.7781069.0.i0",className:"selected"}),(0,p.jsx)("path",{d:"M791.52114667 825.86277121V235.68328748l-103.27167894-103.27167894H146.98132053v693.45116267c0 10.898016 4.1516256 21.79603307 12.45487574 30.0992832 8.30325013 8.30325013 19.3310048 12.45487573 30.0992832 12.45487573H834.20504427c-23.4826304 0.12973867-42.6838976-19.07152853-42.6838976-42.55415893z",fill:"#FFFFFF","p-id":"4237","data-spm-anchor-id":"a313x.7781069.0.i1",className:"selected"}),(0,p.jsx)("path",{d:"M210.81255893 544.97937174h246.502752v11.4169696h-246.502752zM210.81255893 581.95478508h246.502752v11.28723093h-246.502752zM210.81255893 618.93019734h246.502752v11.4169696h-246.502752zM210.81255893 655.90561068h246.502752v11.4169696h-246.502752zM210.81255893 692.88102294h246.502752v11.4169696h-246.502752zM210.81255893 729.85643628h246.502752v11.4169696h-246.502752zM210.81255893 766.83184854h246.502752v11.4169696h-246.502752z",fill:"#CCCBCA","p-id":"4238"}),(0,p.jsx)("path",{d:"M210.81255893 397.07772054h246.502752V519.42092908h-246.502752z",fill:"#516575","p-id":"4239"}),(0,p.jsx)("path",{d:"M482.8737536 397.07772054h246.63249067v11.4169696H482.8737536zM482.8737536 434.05313388h246.63249067v11.4169696H482.8737536zM482.8737536 471.02854614h246.63249067v11.4169696H482.8737536zM482.8737536 508.00395948h246.63249067v11.4169696H482.8737536zM482.8737536 544.97937174h246.63249067v11.4169696H482.8737536zM482.8737536 581.95478508h246.63249067v11.28723093H482.8737536zM482.8737536 618.93019734h246.63249067v11.4169696H482.8737536zM482.8737536 655.90561068h246.63249067v122.34320746H482.8737536z",fill:"#CCCBCA","p-id":"4240","data-spm-anchor-id":"a313x.7781069.0.i5",className:"selected"}),(0,p.jsx)("path",{d:"M494.1609856 685.87515521h24.00158293V767.22106348h-24.00158293zM527.50372587 732.84041601H551.3755712V767.22106348h-23.87184533zM560.84646613 695.86500374h24.001584v71.35605974h-24.001584zM594.18920747 709.74700054h24.00158293V767.22106348H594.18920747zM627.53194773 675.10687681h24.001584v92.11418667h-24.001584zM660.874688 751.39299201h23.87184533V767.22106348h-23.87184533zM694.21742933 692.88102294h24.00158294V767.22106348h-24.00158294z",fill:"#FFFFFF","p-id":"4241"}),(0,p.jsx)("path",{d:"M209.1259616 245.54339841h520.250544v76.15637547h-520.250544z",fill:"#EC6C3F","p-id":"4242"}),(0,p.jsx)("path",{d:"M209.1259616 344.27423681h520.250544v7.1356064h-520.250544zM209.1259616 215.96306774h520.250544v7.1356064h-520.250544z",fill:"#2B4456","p-id":"4243"}),(0,p.jsx)("path",{d:"M791.52114667 235.68328748h-103.27167894v-103.27167894z",fill:"#CCCBCA","p-id":"4244"})]})}),(0,p.jsxs)("h4",{className:"confirm-title",children:[(0,p.jsx)("span",{children:"\u4E4B\u524D\u7684\u586B\u5199\u8FDB\u5EA6\u4E3A"}),(E*100).toFixed(0),"%",(0,p.jsx)("br",{}),(0,p.jsx)("span",{children:"\u662F\u5426\u7EE7\u7EED\u4E0A\u6B21\u586B\u5199\uFF1F"})]}),(0,p.jsxs)("div",{className:"confirm-btn-group",children:[(0,p.jsx)(ce.Z,{type:"primary",block:!0,onClick:function(){b.confirmTempAnswerType=2},children:"\u7EE7\u7EED\u586B\u5199"}),(0,p.jsx)(ce.Z,{block:!0,style:{marginTop:15},onClick:function(){b.confirmTempAnswerType=3},children:"\u91CD\u65B0\u586B\u5199"})]})]})})}),Ft=h(34792),ct=h(48086),et=h(47673),$e=h(4107),Mt=h(74855),Ge=(0,Y.Pi)(function(){var P,b=ot(),E=b.success,H=(P=b.setting)===null||P===void 0?void 0:P.submittedSetting,le=H||{},ve=le.contentHtml,k=b.answerUrl,T=b.answerQrCodeUrl;return E?(0,p.jsx)("div",{className:"survey-end animated",children:(0,p.jsxs)("div",{className:"survey-end-content",children:[(0,p.jsx)("h3",{className:"survey-end-title ",children:(0,p.jsx)("div",{children:(0,p.jsx)(N,{html:ve||"\u95EE\u5377\u5230\u6B64\u7ED3\u675F\uFF0C\u611F\u8C22\u60A8\u7684\u53C2\u4E0E\uFF01"})})}),k&&(0,p.jsxs)("div",{className:"survey-end-result",children:[(0,p.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:100,height:100},children:(0,p.jsx)("img",{src:T,height:95,width:95})}),(0,p.jsxs)($e.Z.Group,{compact:!0,className:"survey-end-result-copy",children:[(0,p.jsx)($e.Z,{defaultValue:k,style:{width:300,background:"#f6f6f6",border:"1px solid #e1e7f2"}}),(0,p.jsx)(Mt.CopyToClipboard,{text:k,onCopy:function(){return ct.default.success("\u590D\u5236\u6210\u529F")},children:(0,p.jsx)(ce.Z,{children:"\u590D\u5236"})})]}),(0,p.jsx)("span",{className:"survey-end-result-tip",children:"\u957F\u6309\u4FDD\u5B58\u4E8C\u7EF4\u7801\u6216\u8005\u590D\u5236\u94FE\u63A5\u53EF\u4EE5\u4FEE\u6539\u7B54\u6848"})]})]})}):(0,p.jsx)(p.Fragment,{})})},39017:function(Ke,Ie,h){"use strict";h.d(Ie,{Rk:function(){return je},AK:function(){return y},Al:function(){return Ee}});var Y=h(67294),J=h(24004);function y(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",xe=(0,Y.useContext)(J.ZX),S=xe.theme;return"survey-".concat(S)+M}function R(M,xe){var S=(xe&&xe.depends||[]).reduce(function(w,X){return w||!X},!1);return O(S?void 0:function(w,X){return fetch(w,X).then(function(N){if(!!N.ok)return N.json()})},M,xe||{})}function O(M){for(var xe=arguments.length,S=new Array(xe>1?xe-1:0),w=1;w<xe;w++)S[w-1]=arguments[w];var X=useState(0),N=_slicedToArray(X,2),e=N[0],De=N[1],be=useCallback(function(){De(Math.random())},[]),Se=useState({loading:!1,mutate:be}),Qe=_slicedToArray(Se,2),Xe=Qe[0],Oe=Qe[1];return useEffect(function(){!M||S[1].manual&&e===0||M.apply(null,S).then(function(Be){Be.code===200?Oe({loading:!1,data:Be.data,mutate:be}):Oe({error:Be.message,loading:!1,mutate:be})}).catch(function(Be){Oe({error:Be,loading:!1,mutate:be})})},p(e,S)),Xe}function p(){for(var M=arguments.length,xe=new Array(M),S=0;S<M;S++)xe[S]=arguments[S];for(var w=[],X=0;X<arguments.length;X++){var N=arguments[X];if(N instanceof Array)for(var e=0;e<N.length;e++)w=w.concat(p(N[e]));else if(typeof URL!="undefined"&&N instanceof URL)w=w.concat(N.toJSON());else if(N instanceof Object)for(var De=Object.keys(N),be=0;be<De.length;be++){var Se=De[be];Se==="depends"?w=w.concat(N[Se]):w=w.concat([Se]).concat(p(N[Se]))}else w=w.concat(N)}return w}var C=h(87998);function Ee(){return(0,Y.useContext)(C.ZX)}function re(){return useSurvey().attachments}function je(){var M=(0,Y.useContext)(C.ZX);return M.innerStore}},40520:function(Ke,Ie,h){"use strict";h.d(Ie,{O:function(){return Yt},Z:function(){return Hn}});var Y=h(91220),J=h(3182),y=h(11849),R=h(2824),O=h(94043),p=h.n(O),C=h(67294),Ee=h(2299),re=h(64031),je=h(54531),M=h(45290),xe=h(24004),S=h(95522),w=h(78210),X=h(87998),N=h(39017),e=h(85893);function De(t){var n=t.schema,i=t.index,r=(0,N.AK)("-body-questionSet"),a=(0,C.useContext)(X.ZX),s=a.questionNumber;return(0,e.jsxs)("div",{className:r,children:[(0,e.jsxs)("div",{className:r+"-title",children:[s?"".concat(i+1,"."):"",(0,e.jsx)(w.Z,{html:n.title})]}),t.children,(0,e.jsx)("div",{className:r+"-splitLine"})]})}(0,S.eC)("QuestionSet",De,"antd");var be=h(9715),Se=h(93766);function Qe(t){var n=t.schema,i=t.index,r=t.qsIndex,a=t.required,s=t.error,v=t.replaceTitle,o=(0,C.useContext)(X.ZX),l=o.questionNumber,c=(0,N.AK)("-body-question"),d=t.error.length>0,u=t.warning.length>0,m=(0,C.useState)(),f=(0,R.Z)(m,2),x=f[0],g=f[1];(0,C.useEffect)(function(){if(x){var F,A;(F=document.querySelector("[data-id='".concat(n.id,"']")))===null||F===void 0||F.classList.remove("ant-form-item-has-error"),(A=document.querySelector("[data-id='".concat(n.id,"']")))===null||A===void 0||A.querySelectorAll("[data-id]").forEach(function(ye){ye.classList.remove("ant-form-item-has-error")})}if(s.length>0){var ee,V=s[0].split("^"),D=(0,R.Z)(V,2),he=D[0],G=D[1],oe;G?(oe=document.querySelector("[data-id='".concat(he,"']")),g(G)):(oe=document.querySelector("[data-id='".concat(n.id,"']")),g(he)),(ee=oe)===null||ee===void 0||ee.classList.add("ant-form-item-has-error")}else x&&g(void 0)},[s]);var j="";r!==void 0&&(j+=r+1+"-"),i!==void 0&&(j+=i+1+".");var Z=function(){return x?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:x})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsx)("div",{className:c,children:(0,e.jsx)(Se.Z.Item,{label:(0,e.jsxs)("span",{className:c+"-header",children:[l?j:"",(0,e.jsx)(M.hl,{html:v||n.title}),Z()]}),labelCol:{span:24},wrapperCol:{span:24},required:a,children:t.children})})}(0,S.eC)("Question",Qe,"antd");var Xe=h(84305),Oe=h(88182),Be=h(82925),st=function(){var n=(0,N.AK)(),i=(0,C.useContext)(X.ZX),r=i.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(M.hl,{html:r.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(M.hl,{html:r.description})})]})},Ue=function(n){var i=(0,N.AK)();return(0,e.jsx)("div",{className:i+"-body",children:n.children})},pt=h(57663),Re=h(71577);function gt(){var t,n,i,r=(0,N.AK)("-footer"),a=(0,C.useContext)(X.ZX),s=a.schema,v=a.onSubmit,o=a.onPrev,l=a.pagination,c=a.onNext,d=a.loading,u=l.pageSize>1,m=l.current===1,f=l.current===l.pageSize,x=u?(t=s.children)===null||t===void 0?void 0:t.slice(-1)[0]:void 0;return(0,e.jsxs)("div",{className:r,children:[f&&(0,e.jsx)("div",{className:r+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(M.hl,{html:s==null||(n=s.attribute)===null||n===void 0?void 0:n.suffix})}),(0,e.jsxs)("div",{className:r+"-pagination",children:[u&&!m&&(0,e.jsx)("div",{children:(0,e.jsx)(Re.Z,{type:"primary",block:!0,onClick:function(){return o()},children:"\u4E0A\u4E00\u9875"})}),u&&!f&&(0,e.jsx)("div",{children:(0,e.jsx)(Re.Z,{type:"primary",block:!0,onClick:function(){return c()},children:"\u4E0B\u4E00\u9875"})}),f&&(0,e.jsx)("div",{children:(0,e.jsx)(Re.Z,{type:"primary",block:!0,onClick:v,loading:d,children:(0,e.jsx)(M.hl,{html:((i=s.attribute)===null||i===void 0?void 0:i.submitButton)||"\u63D0\u4EA4"})})}),u&&(0,e.jsxs)("div",{className:r+"-pagination-info",children:["\u7B2C",l.current,"\u9875/\u5171",l.pageSize,"\u9875"]})]})]})}var Gt=h(47673),Ae=h(4107),jt=h(39002),ut=h(68351),Ct=h(14965),Je=h(77121),yt=h(77883),qe=h(85482),lt=h(29985),_e=h(46842),Zt=h(64302),bt=h(27484),ce=h.n(bt),ot=h(33852);ce().locale("zh-cn");var dt="YYYY-MM-DD",Ft="YYYY-MM-DD HH:mm:ss",ct="HH:mm:ss";function et(t,n){if(!!t){if(n==="date")return ce()(t,dt);if(n==="dateTime")return ce()(t,Ft);if(n==="time")return ce()(t,ct)}}var $e=function(n){var i=n.onChange,r=n.type,a=n.value,s=n.suffix,v=n.style,o=v===void 0?{width:"100%"}:v;return r==="number"?(0,e.jsx)(qe.Z,{onChange:i,value:a,style:o}):r==="date"?(0,e.jsx)(Je.Z,{onChange:function(c,d){console.log(c),i(d)},value:et(a,r),style:o}):r==="dateTime"?(0,e.jsx)(Je.Z,{showTime:!0,onChange:function(c,d){return i(d)},value:et(a,r),style:o}):r==="time"?(0,e.jsx)(ut.Z,{value:et(a,r),onChange:function(c,d){return i(d)},style:o}):r==="mobile"?(0,e.jsx)(Ae.Z,{prefix:(0,e.jsx)(lt.Z,{}),onChange:function(c){return i(c.target.value)},value:a}):r==="idCard"?(0,e.jsx)(Ae.Z,{prefix:(0,e.jsx)(_e.Z,{}),onChange:function(c){return i(c.target.value)},value:a,style:o}):r==="email"?(0,e.jsx)(Ae.Z,{prefix:(0,e.jsx)(Zt.Z,{}),onChange:function(c){return i(c.target.value)},value:a,style:o}):(0,e.jsx)(Ae.Z,{onChange:function(c){return i(c.target.value)},value:a,suffix:s,style:o})},Mt=h(49111),Ge=h(19650),P=h(17672),b=function(n){var i=n.onChange,r=(0,C.useRef)(null),a=(0,C.useRef)(),s=(0,C.useRef)(),v=(0,C.useState)(0),o=(0,R.Z)(v,2),l=o[0],c=o[1];return(0,C.useEffect)(function(){var d=r.current;if(d){var u,m=new P.Z(r.current,{onBegin:function(){c(1)}});a.current=m;var f=Math.max(window.devicePixelRatio||1,1);d.width=d.offsetWidth*f,d.height=d.offsetHeight*f,(u=d.getContext("2d"))===null||u===void 0||u.scale(f,f)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:s.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:r,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:l!==2?"block":"none"}}),l===2&&(0,e.jsx)("img",{src:s.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(Ge.Z,{children:[l===1&&(0,e.jsx)(Re.Z,{type:"link",onClick:function(){var u;(u=a.current)===null||u===void 0||u.clear(),c(0)},children:"\u6E05\u7A7A"}),(l===0||l===1)&&(0,e.jsx)(Re.Z,{type:"primary",disabled:l!==1,ghost:!0,size:"small",onClick:function(){var u;i(a.current.toDataURL()),s.current=(u=a.current)===null||u===void 0?void 0:u.toDataURL(),c(2)},children:"\u5B8C\u6210"}),l===2&&(0,e.jsx)(Re.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var u;c(0),(u=a.current)===null||u===void 0||u.clear()},children:"\u91CD\u7B7E"})]})})]})]})},E=h(3024),H=(0,Ee.Pi)(function(){var t=(0,C.useContext)(X.ZX),n=t.progressBar,i=(0,N.AK)(),r=(0,N.Rk)(),a=r.progress;return n?(0,e.jsx)(E.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:i+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(a*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),le=h(71194),ve=h(50146);function k(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var T=function(n){var i=n.onChange,r=n.value,a=n.mapMove,s=a===void 0?!1:a,v=n.optionId,o=(0,C.useRef)(null),l=(0,C.useRef)(),c=(0,C.useRef)(),d=(0,C.useRef)(),u=(0,C.useState)(function(){if(!!r){var G=r.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(G&&G.length>2)return[parseFloat(G[1]),parseFloat(G[2])]}}),m=(0,R.Z)(u,2),f=m[0],x=m[1],g=(0,C.useState)(function(){return k(r)}),j=(0,R.Z)(g,2),Z=j[0],F=j[1],A=(0,C.useState)(!1),ee=(0,R.Z)(A,2),V=ee[0],D=ee[1],he=(0,C.useCallback)(function(G){c.current.getLocation(G,function(oe,ye){if(oe==="complete"&&ye.geocodes.length){var ge=ye.geocodes[0].location;d.current.start(ge)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,C.useEffect)(function(){if(!!V){window["localMap".concat(v)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(ze){var ke=new AMap.Map("map-".concat(v),{zoom:16,center:f,dragEnable:s,zoomEnable:s});if(l.current=ke,s){var de=new ze({mode:"dragMarker",map:ke});de.on("success",function(Le){F(Le.address),x([Le.position.lng,Le.position.lat])}),f?de.start(f):de.start(),ke.panBy(0,1),d.current=de}var xt=new AMap.Geocoder({city:"010"});c.current=xt;var He=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});He.getCurrentPosition(function(Le,We){Le=="complete"?(ke.setCenter(We.position),F(We.formattedAddress),x([We.position.lng,We.position.lat])):console.error(We)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var G="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(v,"&plugin=AMap.Geocoder,AMap.Geolocation"),oe=document.createElement("script");oe.src=G,document.head.appendChild(oe);var ye="https://webapi.amap.com/ui/1.1/main-async.js",ge=document.createElement("script");ge.src=ye,document.head.appendChild(ge)}},[V]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(Ae.Z.TextArea,{readOnly:!0,value:k(r),onClick:function(){return D(!0)}}),(0,e.jsxs)(ve.Z,{visible:V,onCancel:function(){D(!1)},onOk:function(){f&&i("".concat(Z,"[").concat(f[0],", ").concat(f[1],"]")),D(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:s&&(0,e.jsx)(Ae.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(oe){return he(oe)}})}),(0,e.jsx)("div",{ref:o,id:"map-".concat(v),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:Z})]})]})},$=function(n){var i,r=n.optionId,a=n.questionId,s=n.checked,v=n.checkedCount,o=(0,N.Al)(),l=o.statistics,c=l==null?void 0:l.questionStatistics[a],d=((c==null?void 0:c.optionStatistics.reduce(function(f,x){return f+x.count},0))||0)+v,u=(c==null||(i=c.optionStatistics.find(function(f){return f.optionId===r}))===null||i===void 0?void 0:i.count)||0;u=s?u+1:u;var m="".concat(Math.floor(u/d*1e3)/10,"%");return v===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[(0,e.jsxs)("span",{className:"vote-info-cnt ",children:[u,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:m}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:m}})})]})};ce().locale("zh-cn");function I(t){var n=t.headerVisible,i=t.footerVisible,r=t.schema,a=(0,N.AK)(),s=function(){var o,l=(o=r.attribute)===null||o===void 0?void 0:o.headerImage;if(l)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(l),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:a,children:[(0,e.jsx)(H,{}),(0,e.jsx)("div",{className:a+"-banner",children:s()}),n&&(0,e.jsx)(st,{}),(0,e.jsx)(Oe.ZP,{locale:Be.Z,children:(0,e.jsx)(Ue,{children:t.children})}),i&&(0,e.jsx)(gt,{})]})}(0,S.eC)("Survey",I,"antd");var q=h(13062),L=h(71230),Fe=h(89032),W=h(15746),Ne=h(76826);function we(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=(0,N.AK)("-body-question");function o(l,c){a[l]=c,c===""&&delete a[l],i((0,y.Z)({},a))}return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(l){var c=l.id,d=l.attribute,u=l.title,m=(0,Ne.Ck)(d==null?void 0:d.autoSize,[2,4]);return(0,e.jsxs)(L.Z,{style:{marginBottom:10},"data-id":c,children:[u&&(0,e.jsx)(W.Z,{className:v+"-option",span:4,children:l.title&&(0,e.jsx)("span",{className:v+"-option-title",children:l.title})},l.id),(0,e.jsx)(W.Z,{span:12,children:(0,e.jsx)(Ae.Z.TextArea,{autoSize:{minRows:m[1],maxRows:m[2]},value:a[c]||"",onChange:function(x){return o(c,x.target.value)}})})]},c)})})}(0,S.RM)("Textarea",we,"antd");var B=h(36877),z=h(13876);function _(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=s===void 0?[]:s;function o(l){var c={};l.forEach(function(d,u){var m=v[u].id;c[m]=d}),i(c)}return(0,e.jsx)(L.Z,{children:(0,e.jsx)(W.Z,{span:12,children:(0,e.jsx)(z.Z,{value:v.map(function(l){return a[l.id]}).filter(function(l){return l}),style:{width:260},options:n.dataSource,onChange:o,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,S.RM)("Cascader",_,"antd");function ie(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=(0,N.AK)("-body-question");function o(l,c){a[l]=c,c===""&&delete a[l],i((0,y.Z)({},a))}return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(l){var c=l.id,d=l.attribute,u=l.title,m=d==null?void 0:d.suffix,f=d==null?void 0:d.dataType;return(0,e.jsxs)(L.Z,{style:{marginBottom:10},"data-id":c,children:[u&&(0,e.jsx)(W.Z,{className:v+"-option",span:4,children:l.title&&(0,e.jsx)("span",{className:v+"-option-title",children:(0,e.jsx)(M.hl,{html:l.title})})},l.id),(0,e.jsx)(W.Z,{span:12,children:(0,e.jsx)($e,{type:f,value:a[c]||"",onChange:function(g){return o(c,g)},suffix:m&&(0,e.jsx)("span",{className:v+"-option-suffix",children:(0,e.jsx)(M.hl,{html:m})})})})]},c)})})}(0,S.RM)("FillBlank",ie,"antd"),(0,S.RM)("MultipleBlank",ie,"antd");var Q=h(86582),me=h(43358),se=h(97268),ne=h(79521),ae=h(68489),Ce=h(54121),vt=function(n){var i=(0,ae.XI)(200),r=(0,R.Z)(i,2),a=r[0],s=r[1],v=(0,ae.XI)(200),o=(0,R.Z)(v,2),l=o[0],c=o[1];return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},n.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:a,children:[n.cells.map(function(d){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},d.getCellProps()),{},{className:"td","data-id":"".concat(n.i,"-").concat(d.column.id),children:d.render("Cell")}))}),n.onDelete&&(0,e.jsx)("div",{ref:l,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(Ce.Z,{onClick:function(){n.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:s||c?"visible":"hidden"}})})]}))};function ht(t){var n=t.columns,i=t.data,r=t.onAdd,a=t.onDelete,s=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),v=(0,ne.useTable)({columns:n,data:i,defaultColumn:s},ne.useBlockLayout),o=v.getTableProps,l=v.getTableBodyProps,c=v.headerGroups,d=v.rows,u=v.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},o()),{},{className:"table",children:[(0,e.jsx)("div",{children:c.map(function(m){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},m.getHeaderGroupProps()),{},{className:"tr",children:m.headers.map(function(f){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},f.getHeaderProps()),{},{className:"th",children:f.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},l()),{},{children:d.map(function(m,f){return u(m),(0,C.createElement)(vt,(0,y.Z)((0,y.Z)({},m),{},{key:f,i:f,onDelete:a?function(){return a(f)}:void 0}))})})),r&&(0,e.jsx)("div",{className:"footer",onClick:r,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function tt(t){var n=t.schema,i=t.onChange,r=t.value||[{}],a=n.children,s=a===void 0?[]:a,v=(0,C.useMemo)(function(){return s.map(function(o){var l;return{Header:(0,e.jsx)(w.Z,{html:o.title}),width:(l=o.attribute)===null||l===void 0?void 0:l.width,accessor:o.id,Cell:function(d){var u,m=d.value,f=d.row,x=d.data;if(((u=o.attribute)===null||u===void 0?void 0:u.dataType)==="select"){var g;return(0,e.jsx)(se.Z,{placeholder:"\u8BF7\u9009\u62E9",value:m,style:{minWidth:80},onChange:function(Z){x[f.index][o.id]=Z},options:((g=o.dataSource)===null||g===void 0?void 0:g.map(function(j){return{label:j.label,value:j.value}}))||[]})}else return(0,e.jsx)(Ae.Z,{value:m,onChange:function(Z){x[f.index][o.id]=Z.target.value,i((0,Q.Z)(x))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(ht,{columns:v,data:r,onAdd:function(){r.push({}),i((0,Q.Z)(r))},onDelete:function(l){r.splice(l,1),i((0,Q.Z)(r))}})})}var Kt=function(n){var i=n.schema,r=n.value||[{},{}],a=i.children,s=a===void 0?[]:a,v=(0,C.useMemo)(function(){return s.map(function(o){var l;return{Header:(0,e.jsx)(w.Z,{html:o.title}),width:(l=o.attribute)===null||l===void 0?void 0:l.width,accessor:o.id,Cell:function(d){var u,m=d.value,f=d.row,x=d.data;if(((u=o.attribute)===null||u===void 0?void 0:u.dataType)==="select"){var g,j,Z=((g=o.dataSource)===null||g===void 0||(j=g.find(function(F){return F.value===m}))===null||j===void 0?void 0:j.label)||"";return(0,e.jsx)("span",{children:Z})}else return(0,e.jsx)("span",{children:m})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(ht,{columns:v,data:r})})};tt.Preview=Kt,(0,S.RM)("MatrixAuto",tt,"antd");var ft=h(93224);function Et(t){var n=t.columns,i=t.data,r=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,ne.useTable)({columns:n,data:i,defaultColumn:r},ne.useBlockLayout),s=a.getTableProps,v=a.getTableBodyProps,o=a.headerGroups,l=a.rows,c=a.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:o.map(function(d){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},d.getHeaderGroupProps()),{},{className:"tr",children:d.headers.map(function(u){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},v()),{},{children:l.map(function(d){return c(d),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},d.getRowProps()),{},{className:"tr",children:d.cells.map(function(u){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},u.getCellProps()),{},{className:"td","data-id":"".concat(d.original.rowId,"-").concat(u.column.id),children:u.render("Cell")}))})}))})}))]}))}function St(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=s===void 0?[]:s,o=n.row,l=o===void 0?[]:o,c=(0,C.useMemo)(function(){var u,m=v.map(function(f){var x;return{Header:(0,e.jsx)(w.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,F=j.row,A=j.data;return(0,e.jsx)($e,{value:Z,onChange:function(V){var D={};A.forEach(function(he,G){var oe=he.title,ye=he.rowId,ge=(0,ft.Z)(he,["title","rowId"]);F.index===G&&(ge[f.id]=V),D[ye]=ge}),i(D)}})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=n.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),m},[]),d=l.map(function(u,m){var f=u.id,x=a[f]||{};return(0,y.Z)({title:(0,e.jsx)(w.Z,{html:u.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Et,{columns:c,data:d})})}var Xt=function(n){var i=n.schema,r=n.value,a=r===void 0?{}:r,s=i.children,v=s===void 0?[]:s,o=i.row,l=o===void 0?[]:o,c=(0,C.useMemo)(function(){var u,m=v.map(function(f){var x;return{Header:function(){return(0,e.jsx)(w.Z,{html:f.title})},width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value;return(0,e.jsx)("span",{children:Z})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(u=i.attribute)===null||u===void 0?void 0:u.width,accessor:"title"}),m},[]),d=l.map(function(u,m){var f=u.id,x=a[f]||{};return(0,y.Z)({title:u.title,rowId:f},x)});return console.log(c),(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Et,{columns:c,data:d})})};St.Preview=Xt,(0,S.RM)("MatrixFillBlank",St,"antd");var Ln=h(88983),nt=h(47933);function Nt(t){var n=t.columns,i=t.data,r=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,ne.useTable)({columns:n,data:i,defaultColumn:r},ne.useBlockLayout),s=a.getTableProps,v=a.getTableBodyProps,o=a.headerGroups,l=a.rows,c=a.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:o.map(function(d){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},d.getHeaderGroupProps()),{},{className:"tr",children:d.headers.map(function(u){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},v()),{},{children:l.map(function(d){return c(d),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},d.getRowProps()),{},{className:"tr",children:d.cells.map(function(u){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},u.getCellProps()),{},{className:"td",children:u.render("Cell")}))})}))})}))]}))}function Pt(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=s===void 0?[]:s,o=n.row,l=o===void 0?[]:o,c=(0,C.useMemo)(function(){var u,m=v.map(function(f){var x;return{Header:(0,e.jsx)(w.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,F=j.row,A=j.data;return(0,e.jsx)("div",{onClick:function(){var V={};A.forEach(function(D,he){var G=D.title,oe=D.rowId,ye=(0,ft.Z)(D,["title","rowId"]);F.index===he?(V[oe]={},V[oe][f.id]=!0):V[oe]=ye}),i(V)},children:(0,e.jsx)(nt.ZP,{checked:!!Z})})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=n.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),m},[]),d=l.map(function(u,m){var f=u.id,x=a[f]||{};return(0,y.Z)({title:(0,e.jsx)(w.Z,{html:u.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Nt,{columns:c,data:d})})}var Jt=function(n){var i=n.schema,r=n.value,a=r===void 0?{}:r,s=i.children,v=s===void 0?[]:s,o=i.row,l=o===void 0?[]:o,c=(0,C.useMemo)(function(){var u,m=v.map(function(f){var x;return{Header:(0,e.jsx)(w.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,F=j.row,A=j.data;return Z?(0,e.jsx)("div",{children:(0,e.jsx)(nt.ZP,{checked:!!Z,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=i.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),m},[]),d=l.map(function(u,m){var f=u.id,x=a[f]||{};return(0,y.Z)({title:(0,e.jsx)(w.Z,{html:u.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Nt,{columns:c,data:d})})};Pt.Preview=Jt,(0,S.RM)("MatrixRadio",Pt,"antd");var Wn=h(63185),at=h(9676);function wt(t){var n=t.columns,i=t.data,r=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,ne.useTable)({columns:n,data:i,defaultColumn:r},ne.useBlockLayout),s=a.getTableProps,v=a.getTableBodyProps,o=a.headerGroups,l=a.rows,c=a.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:o.map(function(d){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},d.getHeaderGroupProps()),{},{className:"tr",children:d.headers.map(function(u){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},v()),{},{children:l.map(function(d){return c(d),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},d.getRowProps()),{},{className:"tr",children:d.cells.map(function(u){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},u.getCellProps()),{},{className:"td",children:u.render("Cell")}))})}))})}))]}))}function At(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=s===void 0?[]:s,o=n.row,l=o===void 0?[]:o,c=(0,C.useMemo)(function(){var u,m=v.map(function(f){var x;return{Header:(0,e.jsx)(w.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,F=j.row,A=j.data;return(0,e.jsx)("div",{onClick:function(V){var D=!Z,he={};A.forEach(function(G,oe){var ye=G.title,ge=G.rowId,ze=(0,ft.Z)(G,["title","rowId"]);F.index===oe&&(D?ze[f.id]=!0:delete ze[f.id]),he[ge]=ze}),i(he)},children:(0,e.jsx)(at.Z,{checked:!!Z})})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=n.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),m},[]),d=l.map(function(u,m){var f=u.id,x=a[f]||{};return(0,y.Z)({title:(0,e.jsx)(w.Z,{html:u.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(wt,{columns:c,data:d})})}var qt=function(n){var i=n.schema,r=n.value,a=r===void 0?{}:r,s=i.children,v=s===void 0?[]:s,o=i.row,l=o===void 0?[]:o,c=(0,C.useMemo)(function(){var u,m=v.map(function(f){var x;return{Header:(0,e.jsx)(w.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,F=j.row,A=j.data;return Z?(0,e.jsx)("div",{children:(0,e.jsx)(at.Z,{checked:!!Z,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=i.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),m},[]),d=l.map(function(u,m){var f=u.id,x=a[f]||{};return(0,y.Z)({title:(0,e.jsx)(w.Z,{html:u.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(wt,{columns:c,data:d})})};At.Preview=qt,(0,S.RM)("MatrixCheckbox",At,"antd");var pe=h(32059);function _t(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=n.attribute,o=24/((v==null?void 0:v.columns)||1),l=(0,N.AK)("-body-question"),c=!!(v!=null&&v.statEnabled);function d(u,m,f){var x,g,j=(x=n.children)===null||x===void 0?void 0:x.find(function(F){return F.id===u}),Z=j==null||(g=j.attribute)===null||g===void 0?void 0:g.dataType;m?a[u]=Z?f:!0:delete a[u],i((0,y.Z)({},a))}return(0,C.useEffect)(function(){s==null||s.forEach(function(u){var m;(m=u.attribute)!==null&&m!==void 0&&m.defaultChecked&&Object.keys(a).length===0&&i((0,pe.Z)({},u.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(L.Z,{children:s==null?void 0:s.map(function(u){var m,f,x=u.title,g=u.id,j=(m=u.attribute)===null||m===void 0?void 0:m.dataType,Z=(f=u.attribute)===null||f===void 0?void 0:f.suffix;return(0,e.jsxs)(W.Z,{span:o,className:l+"-option","data-id":g,children:[(0,e.jsx)(at.Z,{value:g,checked:a.hasOwnProperty(g),onChange:function(A){return d(g,A.target.checked)},children:(0,e.jsx)(M.hl,{html:x})}),c&&(0,e.jsx)($,{checked:!!a[g],optionId:g,questionId:n.id,checkedCount:Object.keys(a).length}),j&&(0,e.jsx)($e,{value:a[g],style:{maxWidth:120},type:j,onChange:function(A){return d(g,!0,A)},suffix:Z&&(0,e.jsx)("span",{className:l+"-option-suffix",children:(0,e.jsx)(M.hl,{html:Z})})})]},g)})})})}(0,S.RM)("Checkbox",_t,"antd");function en(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=s===void 0?[]:s;function o(l){var c,d=(c=n.children)===null||c===void 0?void 0:c.find(function(u){return u.id===l});d&&i((0,pe.Z)({},l,!0))}return(0,C.useEffect)(function(){var l;(l=n.children)===null||l===void 0||l.forEach(function(c){var d,u=c.id;(d=c.attribute)!==null&&d!==void 0&&d.defaultChecked&&Object.keys(a).length===0&&i((0,pe.Z)({},u,!0))})},[]),(0,e.jsx)(L.Z,{children:(0,e.jsx)(W.Z,{span:12,children:(0,e.jsx)(se.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){i(void 0)},showSearch:!0,value:Object.keys(a)[0],filterOption:function(c,d){return(d==null?void 0:d.label).toLowerCase().indexOf(c.toLowerCase())!==-1},onChange:o,style:{width:260},options:v.map(function(l){return{label:l.title,value:l.id}})})})})}(0,S.RM)("Select",en,"antd");var tn=nt.ZP.Group;function nn(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=n.attribute,o=24/((v==null?void 0:v.columns)||1),l=(0,N.AK)("-body-question"),c=!!(v!=null&&v.statEnabled);function d(m){var f,x=m.target.value,g=(f=n.children)===null||f===void 0?void 0:f.find(function(A){return A.id===x});if(g){var j=g.id,Z=g.attribute,F=Z==null?void 0:Z.dataType;i((0,pe.Z)({},m.target.value,F?a[j]:!0))}}function u(m,f){i((0,pe.Z)({},m,f))}return(0,C.useEffect)(function(){var m;(m=n.children)===null||m===void 0||m.forEach(function(f){var x,g=f.id,j=f.attribute,Z=j==null?void 0:j.dataType;(x=f.attribute)!==null&&x!==void 0&&x.defaultChecked&&Object.keys(a).length===0&&i((0,pe.Z)({},g,Z?a[g]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(tn,{onChange:d,value:Object.keys(a)[0],style:{width:"100%"},children:(0,e.jsx)(L.Z,{children:s==null?void 0:s.map(function(m){var f,x,g=m.title,j=m.id,Z=(f=m.attribute)===null||f===void 0?void 0:f.dataType,F=(x=m.attribute)===null||x===void 0?void 0:x.suffix;return(0,e.jsxs)(W.Z,{span:o,className:l+"-option","data-id":j,children:[(0,e.jsx)(nt.ZP,{value:j,className:"radio-item",children:(0,e.jsx)(M.hl,{html:g})}),c&&(0,e.jsx)($,{checked:!!a[j],optionId:j,questionId:n.id,checkedCount:Object.keys(a).length}),Z&&(0,e.jsx)($e,{value:a[j],type:Z,style:{maxWidth:120},onChange:function(ee){return u(j,ee)},suffix:F&&(0,e.jsx)("span",{className:l+"-option-suffix",children:(0,e.jsx)(M.hl,{html:F})})})]},j)})})})})}(0,S.RM)("Radio",nn,"antd");var Un=h(48736),It=h(27049);function Bt(t){var n=(0,N.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(It.Z,{plain:!0})})}Bt.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,S.RM)("SplitLine",Bt,"antd");function Vt(t){var n=(0,N.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(M.hl,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}Vt.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,S.RM)("Remark",Vt,"antd");var Yn=h(34792),an=h(48086),kn=h(43185),Dt=h(11324),rn=h(43347),sn=Dt.Z.Dragger;function Rt(t){var n=t.schema,i=t.onChange,r=t.value,a=t.readOnly,s=n.children,v=(0,N.Al)(),o=(0,C.useState)(),l=(0,R.Z)(o,2),c=l[0],d=l[1];(0,C.useEffect)(function(){var f=n.children[0].id,x=r&&r[f]||[];c==null&&x.length>0&&ae.hi.loadFiles({ids:x}).then(function(g){d(g==null?void 0:g.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[r]);var u=function(){var f=(0,J.Z)(p().mark(function x(g){var j,Z,F,A;return p().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:j=g.onSuccess,Z=g.onError,F=g.file,A=g.onProgress,v.onUpload&&v.onUpload(F,function(D){A&&A({percent:D.loaded/D.total*100})}).then(function(D){if(D.success&&j&&j(D.data),!D.success&&Z){var he=new Error("Some error");Z({event:he})}});case 2:case"end":return V.stop()}},x)}));return function(g){return f.apply(this,arguments)}}(),m=function(x,g){if(d(x.fileList),(x.file.status==="removed"||x.file.status==="done")&&!x.fileList.find(function(Z){return Z.status!=="done"})){var j=x.fileList.filter(function(Z){return Z.status==="done"}).map(function(Z){var F;return((F=Z.response)===null||F===void 0?void 0:F.id)||Z.uid});j.length===0?i(void 0):i((0,pe.Z)({},g,j))}};return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(f){var x=f.id,g=f.attribute,j=[];if(g){var Z=g.maxFileCount,F=g.maxFileSize,A=g.fileAccept;Z&&j.push("\u6700\u591A\u4E0A\u4F20".concat(Z,"\u4E2A")),F&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(F,"M\u4EE5\u5185")),A&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(A))}return(0,e.jsxs)(sn,{multiple:!0,disabled:a,maxCount:(g==null?void 0:g.maxFileCount)||20,accept:g==null?void 0:g.fileAccept,beforeUpload:function(V){return g!=null&&g.maxFileSize&&V.size>g.maxFileSize*1024*1024?(an.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(g.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Dt.Z.LIST_IGNORE):!0},customRequest:u,onChange:function(V){return m(V,x)},fileList:c,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(rn.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},x)})})}var un=function(n){var i=n.value,r=(0,C.useState)(),a=(0,R.Z)(r,2),s=a[0],v=a[1];return(0,C.useEffect)(function(){if(i){var o=Object.values(i).reduce(function(l,c){return l.push.apply(l,(0,Q.Z)(c)),l},[]);ae.hi.loadFiles({ids:o}).then(function(l){v(l)})}},[i]),(0,e.jsx)("div",{className:"preview",children:s==null?void 0:s.map(function(o){return(0,e.jsx)("a",{onClick:function(){return ae.hi.download("/api/files/".concat(o.id))},children:o.originalName},o.id)})})};Rt.Preview=un,(0,S.RM)("Upload",Rt,"antd");var Qn=h(34669),ln=h(61873);function Tt(t){var n=t.schema,i=t.onChange,r=n.children,a=(0,N.Al)(),s=(0,C.useState)(0),v=(0,R.Z)(s,2),o=v[0],l=v[1];function c(d,u){var m="signature-".concat(u,"-").concat((0,X.kb)(6),".png");if(!a.onUpload){i((0,pe.Z)({},u,[m]));return}fetch(d).then(function(f){return f.blob()}).then(function(f){var x=new File([f],m,{type:"image/png"});a.onUpload(x,function(g){l(g.loaded/g.total*100)}).then(function(g){g.success&&g.data.id&&i((0,pe.Z)({},u,[g.data.id]))})})}return(0,e.jsx)("div",{children:r==null?void 0:r.map(function(d){var u=d.id,m=d.title;return(0,e.jsxs)(L.Z,{gutter:[10,0],"data-id":u,children:[m&&(0,e.jsx)(W.Z,{span:24},d.id),(0,e.jsxs)(W.Z,{span:24,children:[(0,e.jsx)(b,{onChange:function(x){return c(x,u)}}),o>0&&o!==100&&(0,e.jsx)(ln.Z,{percent:o,size:"small",showInfo:!1})]})]},u)})})}Tt.Preview=function(t){var n=t.value,i;return n&&(i=Object.values(n)[0][0]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("img",{src:"/api/files/".concat(i)})})},(0,S.RM)("Signature",Tt,"antd");var Gn=h(96433),mt=h(2864),zt=h(41687),on=h(46870),Ot=h(18613),dn=h(57206),cn={1:(0,e.jsx)(zt.Z,{}),2:(0,e.jsx)(zt.Z,{}),3:(0,e.jsx)(on.Z,{}),4:(0,e.jsx)(Ot.Z,{}),5:(0,e.jsx)(Ot.Z,{})};function vn(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=s===void 0?[]:s;function o(c,d){i((0,pe.Z)({},c,d))}var l=function(d){var u=d.attribute||{},m=d.id,f=u.scope,x=f===void 0?"[0,5]":f,g=u.scoreStyle,j=x.replace("[","").replace("]","").split(","),Z=(0,R.Z)(j,2),F=Z[0],A=Z[1];return g==="heart"?(0,e.jsx)(mt.Z,{defaultValue:parseInt(F),character:(0,e.jsx)(dn.Z,{}),style:{color:"#ea7463"},count:parseInt(A),onChange:function(V){return o(m,V)}},m):g==="smile"?(0,e.jsx)(mt.Z,{defaultValue:parseInt(F),character:function(V){var D=V.index;return cn[D+1]},count:parseInt(A),onChange:function(V){return o(m,V)}},m):(0,e.jsx)(mt.Z,{defaultValue:parseInt(F),count:parseInt(A),onChange:function(V){return o(m,V)}},m)};return(0,e.jsx)(L.Z,{children:v.map(function(c){return l(c)})})}(0,S.RM)("Score",vn,"antd");var Kn=h(22385),hn=h(31097),$t=h(55686),fn=se.Z.Option;function Ht(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=s===void 0?[]:s,o=v[0].id,l=(0,C.useState)([]),c=(0,R.Z)(l,2),d=c[0],u=c[1];function m(g){o&&i((0,pe.Z)({},o,g))}var f=(0,ae.zE)(function(g){ae.hi.userSelect({name:g,selected:a[o]||[]}).then(function(j){j.success&&u(j.data)})},5),x=function(j){m(j?d.map(function(Z){return Z.userId}):void 0)};return(0,C.useEffect)(function(){var g;f(""),(g=n.children)===null||g===void 0||g.forEach(function(j){var Z,F=j.id;(Z=j.attribute)!==null&&Z!==void 0&&Z.defaultChecked&&Object.keys(a).length===0&&i((0,pe.Z)({},F,!0))})},[]),(0,e.jsx)(L.Z,{children:(0,e.jsx)(W.Z,{span:12,children:(0,e.jsx)(se.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,mode:"multiple",onClear:function(){i(void 0)},value:a[o]||[],onSearch:f,showSearch:!0,onChange:m,filterOption:!1,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(It.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(at.Z,{onChange:function(F){x(F.target.checked)},children:"\u5168\u9009"})})]})},children:d.map(function(g){return(0,e.jsx)(fn,{value:g.userId,label:g.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)($t.Z,{user:g,size:20})}),g.name," ",g.deptName&&"(".concat(g.deptName,")")]})},g.userId)})})})})}var mn=function(n){var i=n.schema,r=n.value,a=r===void 0?{}:r,s=i.children,v=s===void 0?[]:s,o=v[0].id,l=(0,C.useState)([]),c=(0,R.Z)(l,2),d=c[0],u=c[1];return(0,C.useEffect)(function(){ae.hi.userSelect({selected:a[o]||[],name:"^_^"}).then(function(m){m.success&&u(m.data)})},[a]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(Ge.Z,{children:d.map(function(m){return(0,e.jsx)(hn.Z,{title:m.name,children:(0,e.jsx)($t.Z,{user:m,size:24})},m.userId)})})})};Ht.Preview=mn,(0,S.RM)("User",Ht,"antd");var Xn=h(71153),xn=h(60331),Jn=h(62999),pn=h(51753),gn=h(60780),jn=h.n(gn);function Lt(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=s===void 0?[]:s,o=v[0].id,l=(0,C.useState)([]),c=(0,R.Z)(l,2),d=c[0],u=c[1];function m(x){o&&((x==null?void 0:x.length)===0?i(void 0):i((0,pe.Z)({},o,x==null?void 0:x.map(function(g){return g.value}))))}var f=(0,C.useMemo)(function(){return jn()(d.map(function(x){return{title:x.name,key:x.id,value:x.id,parentId:x.parentId}}),{parentProperty:"parentId",customID:"key"})},[d]);return(0,C.useEffect)(function(){ae.hi.deptSelect({}).then(function(x){x.success&&u(x.data)})},[]),(0,e.jsx)(L.Z,{children:(0,e.jsx)(W.Z,{span:12,children:(0,e.jsx)(pn.Z,{style:{width:"100%"},treeCheckable:!0,value:(a[o]||[]).map(function(x){return{value:x}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:f,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:m,showSearch:!1})})})}var Cn=function(n){var i=n.schema,r=n.value,a=r===void 0?{}:r,s=i.children,v=s===void 0?[]:s,o=v[0].id,l=(0,C.useState)([]),c=(0,R.Z)(l,2),d=c[0],u=c[1];return(0,C.useEffect)(function(){ae.hi.deptSelect({selected:a[o]||[],name:"^_^"}).then(function(m){m.success&&u(m.data)})},[a]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(Ge.Z,{children:d.map(function(m){return(0,e.jsx)(xn.Z,{color:"blue",children:m.name},m.id)})})})};Lt.Preview=Cn,(0,S.RM)("Dept",Lt,"antd");function yn(t){for(var n=[],i=2;i<t+2;i++)n.push(i/(t+2));return n}function Zn(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=s===void 0?[]:s,o=v[0].id,l=(0,C.useState)(function(){return a[o]||-1}),c=(0,R.Z)(l,2),d=c[0],u=c[1];function m(x){i((0,pe.Z)({},o,x))}(0,C.useEffect)(function(){Object.keys(a).length>0&&u(a[o])},[a,o]);var f=function(g){var j=a[o],Z=yn(d||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){u(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:[0,1,2,3,4,5,6,7,8,9,10].map(function(F){var A={background:"#2672ff",opacity:Z[F]};return(0,e.jsx)("div",{className:"nps-item",style:d>=F?A:void 0,onMouseOver:function(){u(F)},onClick:function(){return m(F)},children:F},F)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,e.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]},g.id)};return(0,e.jsx)(L.Z,{children:v.map(function(x){return f(x)})})}(0,S.RM)("Nps",Zn,"antd");function bn(t,n){var i=RegExp("_{3,}","g"),r=t.matchAll(i),a=[],s=(0,Y.Z)(r),v;try{for(s.s();!(v=s.n()).done;){var o=v.value,l=o.index,c=o.index+o[0].length;a.push([l,c])}}catch(j){s.e(j)}finally{s.f()}for(var d=a[0][0]===0?"":t.substring(0,a[0][0]),u=0;u<a.length;u++){var m=a[u],f=a[u+1],x=t.substring(m[0],m[1]),g=t.substring(m[1],f?f[0]:t.length);d+='<input data-id="'.concat(n[u].id,'" class="mod_fillblank" style="width: ').concat(12*x.length,'px;">'),d+=g}return d}function Fn(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children,v=n.attribute,o=v===void 0?{}:v,l=o.content;function c(d,u){a[d]=u,u===""&&delete a[d],i((0,y.Z)({},a))}return(0,C.useEffect)(function(){s==null||s.forEach(function(d){var u=document.querySelector("[data-id='".concat(d.id,"']"));if(u){var m=a[d.id];m&&(u.value=m),u.onchange=function(f){var x;c(d.id,(x=f.target)===null||x===void 0?void 0:x.value)}}})},[]),(0,C.useEffect)(function(){Object.keys(a).forEach(function(d){var u=a[d],m=document.querySelector("[data-id='".concat(d,"']"));u!==m.value&&(m.value=u===void 0?"":u)})},[a]),(0,e.jsx)("div",{children:(0,e.jsx)(w.Z,{html:bn(l,s),replaceP:!1})})}(0,S.RM)("HorzBlank",Fn,"antd");function Mn(t){var n=t.schema,i=t.onChange,r=t.value,a=r===void 0?{}:r,s=n.children;function v(o,l){i((0,pe.Z)({},l,o))}return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(o){var l=o.id,c=o.title,d=o.attribute,u=d===void 0?{}:d,m=u.mapMove;return(0,e.jsxs)(L.Z,{gutter:[10,0],"data-id":l,children:[c&&(0,e.jsx)(W.Z,{span:24},o.id),(0,e.jsx)(W.Z,{span:24,children:(0,e.jsx)(T,{optionId:l,onChange:function(x){return v(x,l)},value:a[l],mapMove:m})})]},l)})})}(0,S.RM)("Address",Mn,"antd");var Wt=h(80705),En=h(99439),Sn=h(66607),Nn=h.n(Sn);ce().extend(Nn()),Number.prototype.isBetween=function(n,i,r){var a=this,s=parseFloat(n);isNaN(s)&&(s=-99999);var v=parseFloat(i);return isNaN(v)&&(v=99999),!(a>v||a<s||r[0]==="("&&s==a||r[1]===")"&&v==a)};function Pn(t,n){var i=rt(t),r=Number(n);return r.isBetween(t.substring(1,t.indexOf(",")),t.substring(t.indexOf(",")+1,t.length-1),i)}function wn(t,n){if(!n)return!0;var i=ce()(n),r=Ye(t.substring(1,t.indexOf(",")),!0),a=Ye(t.substring(t.indexOf(",")+1,t.length-1),!1),s=rt(t);return i.isBetween(r,a,null,s)}function An(t,n){if(!n)return!0;var i=ce()(n),r=Ye(t.substring(1,t.indexOf(",")),!0,"YYYY-MM-DD hh:mm:ss"),a=Ye(t.substring(t.indexOf(",")+1,t.length-1),!1,"YYYY-MM-DD hh:mm:ss"),s=rt(t);return i.isBetween(r,a,null,s)}function In(t,n){if(!n)return!0;var i="2018-02-08 ",r=ce()(i+n),a=Ye(i+t.substring(1,t.indexOf(",")),!0,"YYYY-MM-DD hh:mm:ss"),s=Ye(i+t.substring(t.indexOf(",")+1,t.length-1),!1,"YYYY-MM-DD hh:mm:ss"),v=rt(t);return r.isBetween(a,s,null,v)}function Ye(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"YYYY-MM-DD",r,a=ce()(ce()().format(i));return t==="undefined"?n?r=ce()("1900-01-01"):r=ce()("2999-01-01"):t.indexOf("T")!==-1?t==="T"?r=a:/T-\d+/.test(t)?r=a.subtract(parseInt(t.match(/\d+/)[0]),"days"):/T\+\d+/.test(t)&&(r=a.add(parseInt(t.match(/\d+/)[0]),"days")):/\d+-\d+-\d+/.test(t)&&(r=ce()(t)),r}function rt(t){var n=t[0],i=t[t.length-1],r="".concat(n).concat(i);return r}function Bn(t,n){var i,r=n.id,a=[];if((i=n.parent)!==null&&i!==void 0&&i.type.startsWith("Matrix"))if(n.parent.type==="MatrixAuto"&&Array.isArray(t))t.forEach(function(l,c){a.push(["".concat(c,"-").concat(r),l[n.id]])});else{var s;(s=n.parent.row)===null||s===void 0||s.forEach(function(l){t[l.id]?a.push(["".concat(l.id,"-").concat(r),t[l.id][n.id]]):a.push(["".concat(l.id,"-").concat(r),void 0])})}else{var v,o=(v=n.parent)===null||v===void 0?void 0:v.type;o==="Radio"||o==="Checkbox"?Object.keys(t).includes(n.id)&&a.push([n.id,t[n.id]]):a.push([n.id,t[n.id]])}return a}function Ut(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Vn(t){return!!(Ut(t)&&Number.isInteger(parseFloat(t)))}function Te(t){var n=t.errMsg,i=t.schema,r=t.regEx,a=t.value;return i?Ve({schema:i,value:a,errMsg:n,isValid:function(v){return v?r.test("".concat(v)):!0}}):null}function Ve(t){var n=t.value,i=t.schema,r=t.isValid,a=t.errMsg;return!i||n==null?null:Bn(n,i).map(function(s){var v=(0,R.Z)(s,2),o=v[0],l=v[1];return r(l)?null:"".concat(o,"^").concat(a)}).filter(function(s){return s})[0]}(0,En.au)({required:function(n,i){var r=i.schema;return i&&i.required===!1?null:(0,Wt.xb)(n)||typeof n=="object"&&Object.keys(n).length===0?"\u8FD9\u9053\u9898\u672A\u56DE\u7B54":Ve({schema:r,value:n,errMsg:"\u8FD9\u4E2A\u9009\u9879\u672A\u56DE\u7B54",isValid:function(s){return!(0,Wt.xb)(s)}})},answerLimit:function(n,i){var r,a=i.schema,s=a==null||(r=a.attribute)===null||r===void 0?void 0:r.answerLimit;if(!s)return null;var v=s.slice(1,s.length-1).split(","),o=parseInt(v[0]||"0"),l=parseInt(v[1]||"0"),c=Object.keys(n||{}).length;return n&&(c<o&&o!==0||c>l&&l!==0)?o===0?"\u6700\u591A\u9009\u62E9".concat(l,"\u9879"):l===0?"\u6700\u5C11\u9009\u62E9".concat(o,"\u9879"):"\u6700\u5C11\u9009\u62E9".concat(o,"\u9879,\u6700\u591A\u9009\u62E9").concat(l,"\u9879"):null},number:function(n,i){var r,a=i.schema,s=a==null||(r=a.attribute)===null||r===void 0?void 0:r.numericScale;if(!a)return null;var v="\u8BF7\u8F93\u5165\u6570\u5B57";return s===0?v="\u8BF7\u8F93\u5165\u6574\u6570":s&&s>0&&(v="\u8BF7\u4FDD\u7559".concat(s,"\u4F4D\u5C0F\u6570")),Ve({errMsg:v,schema:a,value:n,isValid:function(l){return!(l!==void 0&&(!Ut(l)||s===0&&!Vn(l)||s!==void 0&&s>0&&("".concat(l).split(".")[1]||"").length>s))}})},date:function(n,i){var r=i.schema;return Te({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F",schema:r,regEx:/^(?:(?:1[6-9]|[2-9][0-9])[0-9]{2}([-/.]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:(?:1[6-9]|[2-9][0-9])(?:0[48]|[2468][048]|[13579][26])|(?:16|[2468][048]|[3579][26])00)([-/.]?)0?2\2(?:29))(\s+([01][0-9]:|2[0-3]:)?[0-5][0-9]:[0-5][0-9])?$/,value:n})},dateTime:function(n,i){var r=i.schema;return Te({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F\u65F6\u95F4",schema:r,regEx:/^\d{4}[-]([0][1-9]|(1[0-2]))[-]([1-9]|([012]\d)|(3[01]))\s(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:n})},time:function(n,i){var r=i.schema;return Te({errMsg:"\u8BF7\u8F93\u5165\u65F6\u95F4",schema:r,regEx:/^(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:n})},mobile:function(n,i){var r=i.schema;return Te({errMsg:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",schema:r,regEx:/^1([358][0-9]|4[579]|66|7[01235678]|9[189])[0-9]{8}$/,value:n})},decimal:function(n,i){var r=i.schema;return Te({errMsg:"\u8BF7\u8F93\u5165\u6570\u5B57",schema:r,regEx:/^[+-]?\d+(\.\d+)?$/,value:n})},email:function(n,i){var r=i.schema;return Te({errMsg:"\u90AE\u4EF6\u683C\u5F0F\u4E0D\u6B63\u786E",schema:r,regEx:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,value:n})},idCard:function(n,i){var r=i.schema;return Ve({errMsg:"\u8EAB\u4EFD\u8BC1\u683C\u5F0F\u4E0D\u6B63\u786E",schema:r,value:n,isValid:function(s){return!(s&&!Rn("".concat(s)))}})},chinese:function(n,i){var r=i.schema;return Te({errMsg:"\u8BF7\u8F93\u5165\u6C49\u5B57",schema:r,regEx:/^[\u4e00-\u9fa5]+$/,value:n})},alphabet:function(n,i){var r=i.schema;return Te({errMsg:"\u8BF7\u8F93\u5165\u5B57\u6BCD",schema:r,regEx:/^[a-zA-Z]+$/,value:n})},textLimit:function(n,i){var r,a=i.schema,s=a==null||(r=a.attribute)===null||r===void 0?void 0:r.textLimit;if(!s)return null;var v=s.slice(1,s.length-1).split(","),o=parseInt(v[0]||"0"),l=parseInt(v[1]||"0"),c=Ve({errMsg:o!==l?"\u8BF7\u8F93\u5165".concat(o,"~").concat(l,"\u4E2A\u5B57"):"\u8BF7\u8F93\u5165".concat(o,"\u4E2A\u5B57"),schema:a,value:n,isValid:function(u){return!(u&&("".concat(u).length<o||"".concat(u).length>l))}});return c},scope:function(n,i){var r,a,s=i.schema,v=s==null||(r=s.attribute)===null||r===void 0?void 0:r.scope,o=s==null||(a=s.attribute)===null||a===void 0?void 0:a.dataType;if(v&&o){if(o==="number")return Ve({errMsg:"\u6570\u503C\u8303\u56F4\u4E0D\u6B63\u786E ".concat(v),schema:s,value:n,isValid:function(c){return!(c&&!Pn(v,"".concat(c)))}});if(o==="date")return Ve({errMsg:"\u65E5\u671F\u8303\u56F4\u4E0D\u6B63\u786E ".concat(v),schema:s,value:n,isValid:function(c){return!(c&&!wn(v,"".concat(c)))}});if(o==="dateTime")return Ve({errMsg:"\u65E5\u671F\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(v),schema:s,value:n,isValid:function(c){return!(c&&!An(v,"".concat(c)))}});if(o==="time")return Ve({errMsg:"\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(v),schema:s,value:n,isValid:function(c){return!(c&&!In(v,"".concat(c)))}})}return null}});function Dn(t){var n=t.substring(6,8),i=t.substring(8,10),r=t.substring(10,12),a=new Date(parseFloat(n),parseFloat(i)-1,parseFloat(r));return!(a.getFullYear()-1900!==parseFloat(n)||a.getMonth()!==parseFloat(i)-1||a.getDate()!==parseFloat(r))}function Rn(t){var n=t;if(t.length!==15&&t.length!==18)return!1;if(t.length===15)return Dn(n);var i={11:"\u5317\u4EAC",12:"\u5929\u6D25",13:"\u6CB3\u5317",14:"\u5C71\u897F",15:"\u5185\u8499\u53E4",21:"\u8FBD\u5B81",22:"\u5409\u6797",23:"\u9ED1\u9F99\u6C5F ",31:"\u4E0A\u6D77",32:"\u6C5F\u82CF",33:"\u6D59\u6C5F",34:"\u5B89\u5FBD",35:"\u798F\u5EFA",36:"\u6C5F\u897F",37:"\u5C71\u4E1C",41:"\u6CB3\u5357",42:"\u6E56\u5317 ",43:"\u6E56\u5357",44:"\u5E7F\u4E1C",45:"\u5E7F\u897F",46:"\u6D77\u5357",50:"\u91CD\u5E86",51:"\u56DB\u5DDD",52:"\u8D35\u5DDE",53:"\u4E91\u5357",54:"\u897F\u85CF ",61:"\u9655\u897F",62:"\u7518\u8083",63:"\u9752\u6D77",64:"\u5B81\u590F",65:"\u65B0\u7586",71:"\u53F0\u6E7E",81:"\u9999\u6E2F",82:"\u6FB3\u95E8",91:"\u56FD\u5916 "},r=!0;if(!n||!/^([1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx])|([1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2})$/i.test(n))r=!1;else if(!i[n.substr(0,2)])r=!1;else if(n.length>18)r=!1;else if(n.length===18){for(var a=n.split(""),s=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],v=[1,0,"X",9,8,7,6,5,4,3,2],o=0,l=0,c=0,d=0;d<17;d+=1)l=parseInt(a[d],10),c=s[d],o+=l*c;var u=a[17].toUpperCase()==="X"?"X":Number(a[17]);v[o%11]!==u&&(r=!1)}return r}function Tn(t,n){}var zn=h(69610),On=h(54941),$n=function(){function t(){(0,zn.Z)(this,t),this.progress=0,this.makeObservable()}return(0,On.Z)(t,[{key:"makeObservable",value:function(){(0,je.Ou)(this,{progress:je.LO.ref,changeProgress:je.aD})}},{key:"changeProgress",value:function(i){this.progress=i}}]),t}(),Yt=(0,C.forwardRef)(function(t,n){var i=t.theme,r=i===void 0?S.uH:i,a=t.footerVisible,s=a===void 0?!0:a,v=t.headerVisible,o=v===void 0?!0:v,l=t.initialValues,c=t.readOnly,d=t.loading,u=t.onChange,m=t.questionNumber,f=m===void 0?!0:m,x=t.onUpload,g=t.paginationVisible,j=g===void 0?!0:g,Z=t.fieldPermission,F=t.progressBar,A=F===void 0?!1:F,ee=t.statistics,V=(0,C.useMemo)(function(){return new $n},[]),D=(0,C.useMemo)(function(){return(0,X.Gt)(t.schema)},[t.schema]),he=(0,C.useMemo)(function(){var ue={},te=function fe(U){ue[U.id]=U.title,U.children&&U.children.forEach(fe)};return te(D),document.title=(0,Ne.WO)(D.title),ue},[D]),G=(0,C.useMemo)(function(){return j?(0,X._T)(t.schema):[t.schema.children]},[t.schema,j]),oe=(0,C.useState)(function(){return(0,X.dr)(t.schema)}),ye=(0,R.Z)(oe,2),ge=ye[0],ze=ye[1],ke=(0,C.useMemo)(function(){return(0,X.R6)(t.schema)},[t.schema]),de=(0,C.useMemo)(function(){return(0,re.Np)({initialValues:l,readOnly:c,validateFirst:!0,effects:function(te){(0,re.dQ)(function(){if(G.map(function(Ze,K){return K}).slice(1).forEach(function(Ze){return He(Ze,"hidden")}),Z){var fe=[],U=[];Object.entries(Z).forEach(function(Ze){var K=(0,R.Z)(Ze,2),it=K[0],Qt=K[1];Qt===0?fe.push(it):Qt===1&&U.push(it)}),fe.length>0&&de.setFieldState("*(".concat(fe.join(","),")"),function(Ze){return Ze.display="none"}),U.length>0&&de.setFieldState("*(".concat(U.join(","),")"),function(Ze){return Ze.pattern="readPretty"})}var Pe=0,Me=0;de.query("*").forEach(function(Ze){Ze.displayName==="Field"&&!Ze.address.toString().startsWith("_")&&(Ze.display==="visible"&&Pe++,(0,X.xb)(Ze.value)||Me++)}),u&&(V.changeProgress(Me/Pe),u(l,Me/Pe))}),(0,re.pO)(function(fe){var U=0,Pe=0;de.query("*").forEach(function(Me){Me.displayName==="Field"&&!Me.address.toString().startsWith("_")&&(Me.display==="visible"&&U++,(0,X.xb)(Me.value)||Pe++)}),u&&(V.changeProgress(Pe/U),u((0,je.ZN)(fe.values),Pe/U))}),Tn(D,te)}})},[]),xt=(0,C.useCallback)(function(ue){return de.validate("*(".concat(G[ue].map(function(te){return te.id}).join(","),")"))},[]),He=(0,C.useCallback)(function(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"visible";de.query("*(".concat(G[ue].map(function(fe){return fe.id}).join(","),")")).forEach(function(fe){fe.display=te})},[]),Le=(0,C.useCallback)(function(){ze(function(ue){var te=ue.current-1;return He(te,"hidden"),He(te-1,"visible"),(0,y.Z)((0,y.Z)({},ue),{},{current:ue.current-1})})},[]),We=(0,C.useCallback)((0,J.Z)(p().mark(function ue(){var te;return p().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return te=ge.current-1,U.prev=1,U.next=4,xt(te);case 4:ze(function(Pe){return He(te,"hidden"),He(te+1,"visible"),(0,y.Z)((0,y.Z)({},Pe),{},{current:ge.current+1})}),U.next=9;break;case 7:U.prev=7,U.t0=U.catch(1);case 9:case"end":return U.stop()}},ue,null,[[1,7]])})),[ge]),kt=(0,C.useCallback)((0,J.Z)(p().mark(function ue(){var te,fe,U,Pe,Me;return p().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:te="",K.prev=1,fe=de.query("*").map().filter(function(it){return!(0,re.JF)(it)}),U=(0,Y.Z)(fe),K.prev=4,U.s();case 6:if((Pe=U.n()).done){K.next=15;break}if(Me=Pe.value,!(0,re.JF)(Me)){K.next=10;break}return K.abrupt("continue",13);case 10:return te=Me.path.toString(),K.next=13,Me.validate();case 13:K.next=6;break;case 15:K.next=20;break;case 17:K.prev=17,K.t0=K.catch(4),U.e(K.t0);case 20:return K.prev=20,U.f(),K.finish(20);case 23:return t.onSubmit&&t.onSubmit((0,je.ZN)(de.values)),K.abrupt("return",{values:(0,je.ZN)(de.values)});case 27:K.prev=27,K.t1=K.catch(1),(0,X.lA)(te,A?-25:0);case 30:case"end":return K.stop()}},ue,null,[[1,27],[4,17,20,23]])})),[]);return(0,C.useImperativeHandle)(n,function(){return{submit:function(){return kt()},reset:function(){de.reset()},setValues:function(te){de.setValues(te,"overwrite")},toggleReadOnly:function(te){de.setState(function(fe){fe.pattern=te?"readPretty":"editable"})},getValues:function(){return de.values}}}),(0,e.jsx)(Ee.RV,{form:de,children:(0,e.jsx)(xe.ZX.Provider,{value:(0,C.useMemo)(function(){return{theme:r,schema:D,footerVisible:s,questionNumber:f,headerVisible:o,pagination:ge,optionTypes:ke,onNext:We,onPrev:Le,onSubmit:kt,onUpload:x,loading:d,id2title:he,progressBar:A,innerStore:V,statistics:ee}},[ge,d,D,ee]),children:(0,e.jsx)(M.k9,{schema:D})})})}),Hn=Yt}}]);
