(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1034],{29791:function(g,y,n){"use strict";var E=n(24557),h=n(78874),D=n(11013),x=n(97544),e=n(85893),R=void 0==="1";y.Z=function(){return R?(0,e.jsx)(x.Z,{copyright:!1,links:[{key:"Survey King",title:(0,e.jsx)(E.Z,{}),href:"https://surveyking.cn",blankTarget:!0},{key:"github",title:(0,e.jsx)(h.Z,{}),href:"https://github.com/javahuang/SurveyKing",blankTarget:!0},{key:"gitee",title:(0,e.jsx)(D.Z,{}),href:"https://gitee.com/surveyking/surveyking",blankTarget:!0}]}):(0,e.jsx)(e.Fragment,{})}},10334:function(g,y,n){"use strict";n.r(y),n.d(y,{default:function(){return en}});var E=n(86582),h=n(11849),D=n(57527),x=n(67294),e=n(42285),R=n(73727),un=n(49111),P=n(19650),A=n(1870),cn=n(94233),B=n(51890),ln=n(30887),Z=n(54689),dn=n(20228),L=n(11382),H=n(3182),I=n(94043),N=n.n(I),K=n(24616),W=n(55035),T=n(17673),vn=n(59250),U=n(13013),$=n(93224),F=n(94184),S=n.n(F),G=n(2589),z=n.n(G),a=n(85893),Y=function(r){var c=r.overlayClassName,o=(0,$.Z)(r,["overlayClassName"]);return(0,a.jsx)(U.Z,(0,h.Z)({overlayClassName:S()(z().container,c)},o))},J=Y,Q=n(26222),s=n.n(Q),M=n(27400),V=n(80937),X=function(){var j=(0,H.Z)(N().mark(function r(){var c,o,d,v,m;return N().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:c=e.m8.location,o=c.query,d=o===void 0?{}:o,v=c.pathname,m=d.redirect,window.location.pathname!=="/user/login"&&!m&&e.m8.replace({pathname:"/user/login",search:(0,T.stringify)({redirect:v})});case 3:case"end":return f.stop()}},r)}));return function(){return j.apply(this,arguments)}}(),k=function(r){var c=r.menu,o=(0,M.a)(),d=o.user,v=(0,x.useCallback)(function(f){var C=f.key;if(C==="logout"){o.logout(),X();return}e.m8.push("/account/".concat(C))},[o]),m=(0,a.jsx)("span",{className:"".concat(s().action," ").concat(s().account),children:(0,a.jsx)(L.Z,{size:"small",style:{marginLeft:8,marginRight:8}})});if(o.loading||!d||!d.name)return m;var i=(0,a.jsxs)(Z.Z,{className:s().menu,selectedKeys:[],onClick:v,children:[c&&(0,a.jsxs)(Z.Z.Item,{children:[(0,a.jsx)(K.Z,{}),"\u4E2A\u4EBA\u8BBE\u7F6E"]},"settings"),c&&(0,a.jsx)(Z.Z.Divider,{}),(0,a.jsxs)(Z.Z.Item,{children:[(0,a.jsx)(W.Z,{}),"\u9000\u51FA\u767B\u5F55"]},"logout")]});return(0,a.jsx)(J,{overlay:i,children:(0,a.jsxs)("span",{className:"".concat(s().action," ").concat(s().account),children:[(0,a.jsx)(B.C,{size:"small",className:s().avatar,src:"/api/public/preview/".concat(d.avatar)||0,alt:"avatar"}),(0,a.jsx)("span",{className:"".concat(s().name," anticon"),children:d.name})]})})},b=(0,V.Pi)(k),w=function(){var r=s().right;return r="".concat(s().right,"  ").concat(s().dark),(0,a.jsxs)(P.Z,{className:r,children:[(0,a.jsx)("span",{className:s().action,onClick:function(){window.open("https://surveyking.cn/docs")},children:(0,a.jsx)(A.Z,{})}),(0,a.jsx)(b,{menu:!0}),(0,a.jsx)(e.pD,{className:s().action})]})},q=w,_=n(29791),nn=n(5481),an=n.n(nn),tn=n(77613),rn=function(r){var c=r.children,o=r.location,d=o===void 0?{pathname:"/"}:o,v=(0,M.a)(),m=v.user,i=v.system,f=(0,e.YB)(),C=f.formatMessage;(0,x.useEffect)(function(){v.currentUser()},[v]),(0,x.useEffect)(function(){var l=document.querySelector("link[rel~='icon']");l&&(l.href="/api/public/".concat(i.avatar)),document.title=i.name||"\u5377\u738B";var t=document.getElementById("loading-img");t&&(t.src="/api/public/preview/".concat(i.avatar));var u=document.getElementById("loading-name");u&&(u.textContent=document.title)},[i]);var on=function l(t){return t.filter(function(u){var p;return m==null||(p=m.authorityList)===null||p===void 0?void 0:p.find(function(O){return O.startsWith(u.authority)})}).map(function(u){return(0,h.Z)((0,h.Z)({},u),{},{children:u.children?l(u.children):void 0})})};return(0,a.jsx)(D.ZP,(0,h.Z)((0,h.Z)({title:i==null?void 0:i.name,logo:(0,a.jsx)("img",{src:i.avatar?"/api/public/preview/".concat(i.avatar):an()}),formatMessage:C},r),{},{onMenuHeaderClick:function(){return e.m8.push("/")},menuItemRender:function(t,u){return t.isUrl||!t.path||d.pathname===t.path?u:(0,a.jsx)(R.rU,{to:t.path,children:u})},breadcrumbRender:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return[{path:"/",breadcrumbName:C({id:"menu.home"})}].concat((0,E.Z)(t))},itemRender:function(t,u,p,O){var sn=p.indexOf(t)===0;return sn?(0,a.jsx)(R.rU,{to:O.join("/"),children:t.breadcrumbName}):(0,a.jsx)("span",{children:t.breadcrumbName})},footerRender:function(){return(0,a.jsx)(_.Z,{})},menuDataRender:on,rightContentRender:function(){return(0,a.jsx)(q,{})},onPageChange:function(){},children:c}))},en=(0,tn.P)(rn)},5481:function(g,y,n){g.exports=n.p+"static/logo.de1a765f.svg"},2589:function(g){g.exports={container:"container___1Rq3A"}},26222:function(g){g.exports={menu:"menu___1L63y",right:"right___3L8KG",action:"action___LP4_P",search:"search___2W0sJ",account:"account___6HXOq",avatar:"avatar___2cOWV",dark:"dark___1NwCY",name:"name___WfKAK"}}}]);
