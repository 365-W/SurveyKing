(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8454],{90586:function(He,ce,n){"use strict";n.d(ce,{P:function(){return R}});var Ie=n(11849),y=n(93224),f=n(80937),e=n(67294),X=n(30381),de=n.n(X),Pe=n(85893),R=function(Y){var ve=Y.children,x=Y.syncDisplay,ke=Y.isMoment,G=(0,y.Z)(Y,["children","syncDisplay","isMoment"]),ne=(0,e.useMemo)(function(){return(0,f.$j)(function(B){var S=B.value,H=B.onChange,A=S;return ke&&S&&(A=de()(S)),e.cloneElement(ve,{value:A,onChange:function(V){H(V)}})},(0,f.jM)(function(B,S){return{value:B.value,onChange:function(A){de().isMoment(A)?S.onInput(A.valueOf()):S.onInput(A)}}}))},[]);return(0,Pe.jsx)(f.gN,(0,Ie.Z)((0,Ie.Z)({},G),{},{component:[ne,Y],reactions:[function(B){if(x)if(typeof x=="string"){var S=B.query(B.path.parent().concat(x)).get("value");S?B.display="visible":B.display="none"}else typeof x=="object"&&Object.keys(x).forEach(function(H){var A=B.query(B.path.parent().concat(H)).get("value");x[H].includes(A)?B.display="visible":B.display="none"})}]}))};ce.Z=R},37222:function(He,ce,n){"use strict";n.d(ce,{Z:function(){return Ue}});var Ie=n(49111),y=n(19650),f=n(71153),e=n(60331),X=n(13062),de=n(71230),Pe=n(57663),R=n(71577),Te=n(48736),Y=n(27049),ve=n(89032),x=n(15746),ke=n(62999),G=n(54680),ne=n(83279),B=n(94657),S=n(43358),H=n(34041),A=n(18106),Ze=n(51752),V=n(3980),d=n(80937),Ae=n(60780),Oe=n.n(Ae),ae=n(67294),Ne=n(49101),m=n(85893),Fe=H.Z.Option,$e=(0,d.Pi)(function(q){var xe=q.onChange,ge=q.orgTreeData,re=q.positions,te=(0,ae.useState)(),K=(0,B.Z)(te,2),C=K[0],v=K[1],D=(0,ae.useState)(),E=(0,B.Z)(D,2),b=E[0],I=E[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(de.Z,{gutter:10,children:[(0,m.jsx)(x.Z,{span:16,children:(0,m.jsx)(G.Z,{onChange:function(U){return v(U)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:[{title:"\u53D1\u8D77\u4EBA\u5F53\u524D\u90E8\u95E8",value:"${currentOrgId}",key:"${currentOrgId}"},{title:"\u53D1\u8D77\u4EBA\u4E0A\u7EA7\u90E8\u95E8",value:"${parentOrgId}",key:"${parentOrgId}"}].concat((0,ne.Z)(ge)),placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0,value:C})}),(0,m.jsx)(x.Z,{span:8,children:(0,m.jsx)(H.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",allowClear:!0,value:b,onChange:function(U){return I(U)},children:re.map(function(M){return(0,m.jsx)(Fe,{value:M.id,children:M.name},M.id)})})})]}),(0,m.jsx)(de.Z,{style:{marginTop:10},children:(0,m.jsx)(x.Z,{children:(0,m.jsx)(R.Z,{icon:(0,m.jsx)(Ne.Z,{}),onClick:function(){(C||b)&&xe("P:".concat(C||"",":").concat(b||""))},children:"\u6DFB\u52A0"})})})]})}),he=Ze.Z.TabPane,Le=H.Z.Option,Re=(0,d.Pi)(function(q){var xe=q.onChange,ge=q.tabs,re=ge===void 0?["user","role","position"]:ge,te=(0,V.m2)(),K=(0,ae.useState)(q.value||[]),C=(0,B.Z)(K,2),v=C[0],D=C[1];(0,ae.useEffect)(function(){D(q.value||[])},[q.value]);var E=(0,V.LF)(v),b=te.depts,I=te.users,M=te.roles,U=te.positions,se=(0,ae.useState)(),$=(0,B.Z)(se,2),Ce=$[0],pe=$[1];(0,ae.useEffect)(function(){Ce&&te.loadUsers({orgId:Ce,pageSize:1024})},[Ce,te]);var Se=(0,ae.useMemo)(function(){return Oe()(b.map(function(h){return{value:h.id,title:h.name,key:h.id,parentId:h.parentId}}),{parentProperty:"parentId",customID:"value"})},[b]),le=function(O){var W=(0,ne.Z)(v);O.forEach(function(Q){W.includes(Q)||W.push(Q)}),D(W),xe(W)},je=function(){for(var O=arguments.length,W=new Array(O),Q=0;Q<O;Q++)W[Q]=arguments[Q];var _=(0,ne.Z)(v.filter(function(fe){return!W.includes(fe)}));D(_),xe(_)};return(0,m.jsx)("div",{style:{width:400},children:(0,m.jsxs)(Ze.Z,{defaultActiveKey:"user",children:[(0,m.jsx)(he,{tab:"\u6210\u5458",disabled:!re.includes("user"),children:(0,m.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,m.jsxs)(de.Z,{gutter:20,children:[(0,m.jsx)(x.Z,{span:16,children:(0,m.jsx)(G.Z,{onChange:function(O){return pe(O)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:Se,placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0})}),(0,m.jsx)(x.Z,{span:8,children:(0,m.jsx)(H.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",allowClear:!0,showSearch:!0,mode:"multiple",onChange:function(O){return le(O)},maxTagCount:0,value:v.filter(function(h){return h.startsWith("U:")}),dropdownRender:function(O){return(0,m.jsxs)("div",{children:[O,(0,m.jsx)(Y.Z,{style:{margin:"4px 0"}}),(0,m.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8},children:(0,m.jsx)(R.Z,{size:"small",type:"link",onClick:function(){return le(I.map(function(Q){return"U:".concat(Q.id)}))},children:"\u5168\u9009"})})]})},children:I.map(function(h){return(0,m.jsx)(Le,{value:"U:".concat(h.id),children:h.name},h.id)})})})]}),(0,m.jsx)(y.Z,{style:{marginTop:20},wrap:!0,children:v.filter(function(h){return h.startsWith("U:")}).map(function(h){return(0,m.jsx)(e.Z,{closable:!0,color:"blue",onClose:function(){return je(h)},children:E.user[h.split(":")[1]]},h)})})]})},"user"),(0,m.jsx)(he,{tab:"\u89D2\u8272",disabled:!re.includes("role"),children:(0,m.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,m.jsx)(H.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",allowClear:!0,showSearch:!0,mode:"multiple",value:v.filter(function(h){return h.startsWith("R:")}),onChange:function(O){return le(O)},maxTagCount:0,children:M.map(function(h){return(0,m.jsx)(Le,{value:"R:".concat(h.id),children:h.name},h.id)})}),(0,m.jsx)(y.Z,{style:{marginTop:20},wrap:!0,children:v.filter(function(h){return h.startsWith("R:")}).map(function(h){return(0,m.jsx)(e.Z,{closable:!0,color:"blue",onClose:function(){return je(h)},children:E.role[h.split(":")[1]]},h)})})]})},"role"),(0,m.jsx)(he,{tab:"\u673A\u6784\u5C97\u4F4D",disabled:!re.includes("position"),children:(0,m.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,m.jsx)($e,{positions:U,orgTreeData:Se,onChange:function(O){return le([O])}}),(0,m.jsx)(y.Z,{style:{marginTop:20},wrap:!0,children:v.filter(function(h){return h.startsWith("P:")}).map(function(h){var O=h.split(":"),W=(0,B.Z)(O,3),Q=W[1],_=W[2];return(0,m.jsxs)(e.Z,{closable:!0,color:"blue",onClose:function(){return je(h)},children:[E.org[Q],"-",E.position[_]]},Q+":"+_)})})]})},"position")]})})}),Ue=Re},10391:function(He,ce,n){"use strict";n.d(ce,{Z:function(){return te}});var Ie=n(88983),y=n(66253),f=n(94657),e=n(80937),X=n(67294),de=n(66456),Pe=n(1670),R=n(49111),Te=n(19650),Y=n(71194),ve=n(50146),x=n(62350),ke=n(75443),G=n(57663),ne=n(71577),B=n(34792),S=n(48086),H=n(11628),A=n(3980),Ze=n(47673),V=n(4107),d=n(85893);function Ae(K){var C=(0,X.useState)(""),v=(0,f.Z)(C,2),D=v[0],E=v[1];return(0,d.jsx)(ve.Z,{title:"\u6DFB\u52A0\u767D\u540D\u5355",maskClosable:!1,visible:!0,onCancel:K.onCancel,onOk:function(){return K.onOk(D)},children:(0,d.jsx)(V.Z.TextArea,{placeholder:"\u6BCF\u884C\u4E00\u4E2A\u540D\u5355\uFF0C\u53EF\u4ECEExcel\u4E2D\u590D\u5236\u7C98\u8D34\u3002",value:D,rows:8,onChange:function(I){return E(I.target.value)}})})}var Oe=n(93224),ae=n(77883),Ne=n(85482),m=n(43358),Fe=n(34041),$e=n(77576),he=n(12028),Le=function(C){var v=C.value,D=C.onChange,E=C.title,b=(0,X.useState)(!!v),I=(0,f.Z)(b,2),M=I[0],U=I[1];return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"setting-item",children:[(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{children:E}),(0,d.jsx)(he.Z,{checked:!!v,style:{margin:"0 6px"},onChange:function($){$?(U(!0),D({limitFreq:"only",limitNum:1})):(U(!1),D(void 0))}})]}),M&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Fe.Z,{style:{width:100},value:v==null?void 0:v.limitFreq,onChange:function($){return D({limitFreq:$,limitNum:(v==null?void 0:v.limitNum)||1})},options:[{label:"\u53EA\u80FD",value:"only"},{label:"\u6BCF\u5C0F\u65F6",value:"hour"},{label:"\u6BCF\u5929",value:"day"},{label:"\u6BCF\u81EA\u7136\u5468",value:"week"},{label:"\u6BCF\u81EA\u7136\u6708",value:"month"},{label:"\u6BCF\u5B63\u5EA6",value:"quarter"},{label:"\u6BCF\u81EA\u7136\u5E74",value:"year"}]}),(0,d.jsx)("span",{style:{margin:"0 10px"},children:"\u7B54\u9898"}),(0,d.jsx)(Ne.Z,{min:1,max:9999,defaultValue:1,value:v==null?void 0:v.limitNum,onChange:function($){return D({limitNum:$,limitFreq:(v==null?void 0:v.limitFreq)||"only"})}}),(0,d.jsx)("span",{style:{margin:"0 10px"},children:"\u6B21"})]})]})})},Re=function(C){var v=C.name,D=C.basePath,E=(0,Oe.Z)(C,["name","basePath"]);return(0,d.jsx)(e.gN,{component:[Le,E],name:v,basePath:D})},Ue=n(37222),q=function(C){var v=(0,X.useState)([]),D=(0,f.Z)(v,2),E=D[0],b=D[1];return(0,d.jsx)(ve.Z,{title:"\u8BBE\u7F6E\u7CFB\u7EDF\u7528\u6237\u767D\u540D\u5355",visible:!0,onCancel:C.onCancel,onOk:function(){return C.onOk(E)},children:(0,d.jsx)(Ue.Z,{tabs:["user"],onChange:function(M){b(M.map(function(U){return U.split(":")[1]}))}})})},xe=q,ge=(0,e.Pi)(function(C){var v=C.visible,D=C.onCancel,E=C.whitelistType,b=(0,H.IE)(),I=b.id,M=(0,X.useState)([]),U=(0,f.Z)(M,2),se=U[0],$=U[1],Ce=(0,X.useState)(!1),pe=(0,f.Z)(Ce,2),Se=pe[0],le=pe[1],je=(0,X.useState)(!1),h=(0,f.Z)(je,2),O=h[0],W=h[1],Q=(0,X.useState)([]),_=(0,f.Z)(Q,2),fe=_[0],Qe=_[1],ye=function(){return A.hi.loadProjectPartner({projectId:I,types:[E]}).then(function(N){$(N||[])})},Ve=function(N){A.hi.deleteProjectPartner({ids:N,projectId:I}).then(function(T){T.success?(S.default.success("\u5220\u9664\u6210\u529F"),ye()):S.default.error(T.message)})},Be=[{title:"\u5E8F\u53F7",dataIndex:"index",render:function(N,T,me){return me+1}},{title:"\u540D\u5355",dataIndex:"userName",render:function(N,T){var me;return N||((me=T.user)===null||me===void 0?void 0:me.name)}},{title:"\u72B6\u6001",dataIndex:"status",filters:[{text:"\u672A\u8BBF\u95EE",value:0},{text:"\u5DF2\u8BBF\u95EE",value:1},{text:"\u5DF2\u7B54\u9898",value:2}],onFilter:function(N,T){return T.status===N},ellipsis:!0,render:function(N){return N===0?"\u672A\u8BBF\u95EE":N===1?"\u5DF2\u8BBF\u95EE":N===2?"\u5DF2\u7B54\u9898":"-"}},{title:"\u64CD\u4F5C",dataIndex:"operation",render:function(N,T){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(ke.Z,{title:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u540D\u5355\u5417?",onConfirm:function(){Ve([T.id])},okText:"Yes",cancelText:"No",children:(0,d.jsx)(ne.Z,{type:"link",size:"small",children:"\u5220\u9664"})})})}}];return(0,X.useEffect)(function(){ye()},[]),(0,d.jsxs)(ve.Z,{visible:v,onCancel:D,maskClosable:!1,width:650,closable:!1,okText:!1,title:"\u767D\u540D\u5355\u8BBE\u7F6E",footer:(0,d.jsxs)(Te.Z,{children:[(0,d.jsx)(ne.Z,{onClick:function(){E===3?W(!0):le(!0)},children:"\u6DFB\u52A0\u767D\u540D\u5355"}),(0,d.jsx)(ne.Z,{danger:!0,type:"primary",disabled:fe.length===0,onClick:function(){ve.Z.confirm({title:"\u786E\u5B9A\u5C06 ".concat(fe.length," \u4E2A\u540D\u5355\u5220\u9664\u5417?"),content:"\u540D\u5355\u5220\u9664\u4E4B\u540E\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u3002",okType:"danger",onOk:function(){Ve(fe)}})},children:"\u6279\u91CF\u5220\u9664"}),(0,d.jsx)(ne.Z,{onClick:D,children:"\u5173\u95ED"})]}),children:[(0,d.jsx)("div",{style:{lineHeight:"36px",padding:"6px 0"},children:(0,d.jsx)(Re,{basePath:"answerSetting",name:"whitelistLimit",title:"\u767D\u540D\u5355\u7B54\u9898\u9650\u5236"})}),(0,d.jsx)(Pe.Z,{dataSource:se,columns:Be,rowKey:"id",scroll:{y:350},rowSelection:{onChange:function(N){Qe(N)}},bordered:!0,size:"small",pagination:!1}),Se&&(0,d.jsx)(Ae,{onCancel:function(){return le(!1)},onOk:function(N){A.hi.addProjectPartner({projectId:I,type:E,userNames:N.split(`
`).map(function(T){return T.trim()}).filter(function(T){return T})}).then(function(T){T.success?(S.default.success("\u6DFB\u52A0\u6210\u529F"),le(!1),ye()):S.default.error(T.message)})}}),O&&(0,d.jsx)(xe,{onCancel:function(){return W(!1)},onOk:function(N){A.hi.addProjectPartner({userIds:N,projectId:I,type:3}).then(function(){S.default.success("\u6DFB\u52A0\u6210\u529F"),W(!1),ye()})}})]})}),re=function(C){var v=C.value,D=C.onChange,E=(0,X.useState)(!1),b=(0,f.Z)(E,2),I=b[0],M=b[1];return(0,d.jsxs)("div",{children:[C.value&&(0,d.jsx)("a",{style:{marginRight:4},onClick:function(){return M(!0)},children:"\u8BBE\u7F6E"}),(0,d.jsxs)(y.ZP.Group,{buttonStyle:"solid",size:"small",value:C.value,onChange:function(se){C.onChange(se.target.value)},children:[(0,d.jsx)(y.ZP.Button,{value:3,onClick:function(){v===3&&D(void 0)},children:"\u7CFB\u7EDF\u7528\u6237"}),(0,d.jsx)(y.ZP.Button,{value:4,onClick:function(){v===4&&D(void 0)},children:"\u5916\u90E8\u7528\u6237"})]}),I&&C.value&&(0,d.jsx)(ge,{visible:I,onCancel:function(){return M(!1)},whitelistType:C.value})]})};function te(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(e.gN,{basePath:"answerSetting",name:"whitelistType",component:[re]})})}},18454:function(He,ce,n){"use strict";n.d(ce,{KL:function(){return Ne},M6:function(){return Ae},yX:function(){return fe},kJ:function(){return Ke},tx:function(){return Fn},cg:function(){return Xe},rs:function(){return m},q1:function(){return N},qo:function(){return q},Jg:function(){return _}});var Ie=n(63185),y=n(80937),f=n(67294),e=n(85893),X=function(i){var t=i.children,u=_objectWithoutProperties(i,["children"]),l=function(a){return _jsx(_Checkbox,{checked:a.value,onChange:function(Z){a.onChange(Z.target.checked)},children:t})};return _jsx(Field,_objectSpread({component:[l]},u))},de=n(47673),Pe=function(i){var t=i.children,u=i.style,l=_objectWithoutProperties(i,["children","style"]),r=function(c){return _jsx(_Input,{value:c.value,style:u,onChange:function(F){c.onChange(F.target.value)},children:t})};return _jsx(Field,_objectSpread({component:[r]},l))},R=n(11849),Te=n(71194),Y=n(50146),ve=n(57663),x=n(71577),ke=n(77576),G=n(12028),ne=n(22385),B=n(94199),S=n(94657),H=n(68068),A=n(84387),Ze=n(54531),V=n(11628),d=function(i){var t=i.value,u=i.onChange,l=(0,f.useState)(!1),r=(0,S.Z)(l,2),a=r[0],c=r[1],Z=(0,V.IE)(),F=(0,f.useRef)(null);return(0,f.useEffect)(function(){t||c(!1)},[t]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u8BBE\u7F6E\u95EE\u5377\u9ED8\u8BA4\u7B54\u6848",(0,e.jsx)(B.Z,{overlay:"\u8BBE\u7F6E\u7684\u7B54\u6848\u5C06\u4F5C\u4E3A\u9ED8\u8BA4\u7B54\u6848\u5E26\u5165\u95EE\u5377",children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:!!t,onChange:function(j){j?c(!0):u(void 0)}})]}),(a||!!t)&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsx)(x.Z,{onClick:function(){return c(!0)},style:{marginLeft:10},type:"dashed",children:t?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),a&&(0,e.jsx)(Y.Z,{visible:!0,onCancel:function(){return c(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){var j;u((0,Ze.ZN)((j=F.current)===null||j===void 0?void 0:j.getValues())),c(!1)},children:Z.schema?(0,e.jsx)(H.Z,{ref:F,initialValues:t,paginationVisible:!1,schema:Z.schema,footerVisible:!1}):"\u95EE\u5377\u4E3A\u7A7A"})]})},Ae=function(i){return(0,e.jsx)(y.gN,(0,R.Z)({component:[d]},i))},Oe=n(70811),ae=function(i){var t=i.value,u=i.onChange,l=(0,f.useState)(!1),r=(0,S.Z)(l,2),a=r[0],c=r[1],Z=(0,V.IE)();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u9875\u9762",(0,e.jsx)(B.Z,{overlay:"\u4F60\u53EF\u4EE5\u5728\u8868\u5355\u63D0\u4EA4\u9875\u9762\u8BBE\u7F6E\u66F4\u4E3A\u4E30\u5BCC\u591A\u5F69\u7684\u5185\u5BB9\uFF0C\u5305\u62EC\u63D2\u5165\u56FE\u7247\u3001\u8BBE\u7F6E\u5B57\u53F7\u3001\u5B57\u4F53\u989C\u8272\u3001\u5E8F\u53F7\u3001\u8BBE\u7F6E\u8D85\u94FE\u63A5\u7B49\u7B49\u3002",children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:!!t,onChange:function(o){o?c(!0):u(void 0)}})]}),(a||!!t)&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsx)(x.Z,{onClick:function(){return c(!0)},style:{marginLeft:10},type:"dashed",children:t?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),a&&(0,e.jsx)(Oe.cM,{value:t,title:"\u63D0\u4EA4\u540E\u56FE\u6587\u5C55\u793A",width:750,toolbar:Z.mode==="exam"?["score","scoreLogic"]:[],onChange:function(o){u(o),c(!1)},onClose:function(){c(!1)}})]})},Ne=function(i){return(0,e.jsx)(y.gN,(0,R.Z)({component:[ae]},i))},m=function(i){var t=i.title,u=i.tooltip,l=function(a){return(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:[t,u&&(0,e.jsx)(B.Z,{overlay:u,children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:a.value,onChange:function(Z){a.onChange(Z)}})]})})};return(0,e.jsx)(y.gN,(0,R.Z)({component:[l]},i))},Fe=n(93224),$e=n(77883),he=n(85482),Le=n(43358),Re=n(34041),Ue=function(i){var t=i.value,u=i.onChange,l=i.title,r=i.tooltip,a=(0,f.useState)(!!t),c=(0,S.Z)(a,2),Z=c[0],F=c[1];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:[l,(0,e.jsx)(B.Z,{overlay:r,children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:!!t,onChange:function(j){j?(F(!0),u({limitFreq:"only",limitNum:1})):(F(!1),u(void 0))}})]}),Z&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsxs)("div",{children:[(0,e.jsx)(Re.Z,{style:{width:100},value:t==null?void 0:t.limitFreq,onChange:function(j){return u({limitFreq:j,limitNum:(t==null?void 0:t.limitNum)||1})},options:[{label:"\u53EA\u80FD",value:"only"},{label:"\u6BCF\u5C0F\u65F6",value:"hour"},{label:"\u6BCF\u5929",value:"day"},{label:"\u6BCF\u81EA\u7136\u5468",value:"week"},{label:"\u6BCF\u81EA\u7136\u6708",value:"month"},{label:"\u6BCF\u5B63\u5EA6",value:"quarter"},{label:"\u6BCF\u81EA\u7136\u5E74",value:"year"}]}),(0,e.jsx)("span",{style:{margin:"0 10px"},children:"\u7B54\u9898"}),(0,e.jsx)(he.Z,{min:1,max:9999,defaultValue:1,value:t==null?void 0:t.limitNum,onChange:function(j){return u({limitNum:j,limitFreq:(t==null?void 0:t.limitFreq)||"only"})}}),(0,e.jsx)("span",{style:{margin:"0 10px"},children:"\u6B21"})]})})]})})},q=function(i){var t=i.name,u=i.basePath,l=(0,Fe.Z)(i,["name","basePath"]);return(0,e.jsx)(y.gN,{component:[Ue,l],name:t,basePath:u})},xe=function(){var i=function(u){var l=u.value,r=u.onChange;return l===1?_jsx(_Button,{type:"primary",icon:_jsx(CaretRightOutlined,{}),onClick:function(){return r(0)},children:"\u6B63\u5728\u56DE\u6536"}):_jsx(_Button,{type:"primary",danger:!0,icon:_jsx(PauseOutlined,{}),onClick:function(){return r(1)},children:"\u6682\u505C\u56DE\u6536"})};return _jsx(Field,{name:"status",component:[i],basePath:""})},ge=n(59250),re=n(13013),te=n(30887),K=n(28682),C=n(3182),v=n(4107),D=n(94043),E=n.n(D),b=n(92592),I=n(83279),M=n(20136),U=n(55241),se=n(49111),$=n(19650),Ce=n(54977),pe=n(23538),Se=n(73171),le=n(71211),je=v.Z.Search;function h(s){return"".concat(window.location.origin,"/s/").concat(s)}var O=function(i){var t=i.item,u=i.onChange,l=i.onDelete,r=(0,V.IE)(),a=t.url,c=(0,f.useState)(""),Z=(0,S.Z)(c,2),F=Z[0],o=Z[1],j=(0,f.useRef)(null),L=(0,V.IE)(),k=(0,f.useState)(!1),w=(0,S.Z)(k,2),ie=w[0],ue=w[1];(0,f.useEffect)(function(){function g(){return P.apply(this,arguments)}function P(){return P=(0,C.Z)(E().mark(function be(){return E().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:b.toDataURL(a,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(ee){o(ee)}).catch(function(ee){console.error(ee)});case 1:case"end":return J.stop()}},be)})),P.apply(this,arguments)}g()},[a]);var p=(0,f.useCallback)(function(){var g=(0,C.Z)(E().mark(function P(be){return E().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:b.toDataURL(a,{errorCorrectionLevel:"H",margin:5,width:be}).then(function(ee){o(ee);var Me=document.createElement("a");Me.href=ee,Me.setAttribute("download","".concat(r.name,"_").concat(be,".png")),document.body.appendChild(Me),Me.click(),document.body.removeChild(Me)});case 1:case"end":return J.stop()}},P)}));return function(P){return g.apply(this,arguments)}}(),[a,r]);return(0,e.jsxs)("div",{style:{border:"1px solid #d9d9d9",margin:"5px 0",padding:"8px 4px"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(v.Z,{value:t.name,style:{width:200},placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",onChange:function(P){return u((0,R.Z)((0,R.Z)({},t),{},{name:P.target.value}))}}),(0,e.jsxs)($.Z,{children:[(0,e.jsx)(x.Z,{icon:(0,e.jsx)(Ce.Z,{}),onClick:function(){return ue(!0)}}),(0,e.jsx)(U.Z,{content:(0,e.jsxs)("div",{children:[(0,e.jsx)("img",{src:F,height:150,width:150}),(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsxs)($.Z,{children:[(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return p(256)},children:"\u5C0F\u53F7"}),(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return p(512)},children:"\u4E2D\u53F7"}),(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return p(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(r.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click"],children:(0,e.jsx)(x.Z,{icon:(0,e.jsx)(pe.Z,{})})}),(0,e.jsx)(x.Z,{icon:(0,e.jsx)(Se.Z,{}),onClick:function(){return l(t.id)}})]})]}),(0,e.jsx)(je,{value:a,style:{margin:"5px 0 0 0"},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(r.id,"?id=").concat(t.id))}}),(0,e.jsx)(Y.Z,{visible:ie,onCancel:function(){return ue(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){ue(!1)},children:L.schema&&(0,e.jsx)(H.Z,{ref:j,initialValues:t.value,schema:L.schema,footerVisible:!1,onSubmit:function(P){}})})]})},W=function(i){var t=i.visible,u=i.onClose,l=(0,f.useState)([]),r=(0,S.Z)(l,2),a=r[0],c=r[1],Z=(0,V.IE)();return(0,e.jsxs)(Y.Z,{visible:t,onCancel:u,title:"\u5E26\u503C\u94FE\u63A5\u8BBE\u7F6E",maskClosable:!1,bodyStyle:{maxHeight:360,overflow:"auto"},children:[a.map(function(F){return(0,e.jsx)(O,{item:F,onChange:function(j){var L=a.findIndex(function(k){return k.id===j.id});a.splice(L,1,j),c((0,I.Z)(a))},onDelete:function(j){c((0,I.Z)(a.filter(function(L){return L.id!==j})))}},F.id)}),(0,e.jsx)(x.Z,{block:!0,type:"primary",ghost:!0,onClick:function(){var o=(0,le.Ox)();a.push({id:o,url:"".concat(h(Z.id),"?id=").concat(o)}),c((0,I.Z)(a))},children:"\u6DFB\u52A0"})]})},Q=v.Z.Search;function _(s){return"".concat(window.location.origin,"/s/").concat(s)}var fe=function(){var i=(0,V.IE)(),t=_(i.id),u=(0,f.useState)(""),l=(0,S.Z)(u,2),r=l[0],a=l[1],c=(0,f.useState)(!1),Z=(0,S.Z)(c,2),F=Z[0],o=Z[1];(0,f.useEffect)(function(){function k(){return w.apply(this,arguments)}function w(){return w=(0,C.Z)(E().mark(function ie(){return E().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:b.toDataURL(t,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(g){a(g)}).catch(function(g){console.error(g)});case 1:case"end":return p.stop()}},ie)})),w.apply(this,arguments)}k()},[t]);var j=(0,f.useCallback)(function(){var k=(0,C.Z)(E().mark(function w(ie){return E().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:b.toDataURL(t,{errorCorrectionLevel:"H",margin:5,width:ie}).then(function(g){a(g);var P=document.createElement("a");P.href=g,P.setAttribute("download","".concat(i.name,"_").concat(ie,".png")),document.body.appendChild(P),P.click(),document.body.removeChild(P)});case 1:case"end":return p.stop()}},w)}));return function(w){return k.apply(this,arguments)}}(),[t,i]),L=(0,e.jsx)(K.Z,{onClick:function(w){return j(parseInt(w.key))},items:[{label:"\u5C0F\u53F7",key:256},{label:"\u4E2D\u53F7",key:512},{label:"\u5927\u53F7",key:1024}]});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsx)("span",{children:"\u95EE\u5377\u94FE\u63A5"}),(0,e.jsx)(Q,{value:t,style:{width:300},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(i.id))}})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:10},children:[(0,e.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:100,height:100},children:(0,e.jsx)("img",{src:r,height:95,width:95})}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,e.jsx)(re.Z,{overlay:L,placement:"bottomLeft",children:(0,e.jsx)(x.Z,{children:"\u4E0B\u8F7D\u4E8C\u7EF4\u7801"})}),(0,e.jsxs)(x.Z,{type:"primary",ghost:!0,style:{marginTop:10,visibility:"hidden"},onClick:function(){return o(!0)},children:["\u5E26\u503C\u94FE\u63A5",(0,e.jsx)(B.Z,{overlay:"\u94FE\u63A5\u6DFB\u52A0\u53C2\u6570\uFF0C\u5C06\u81EA\u52A8\u5E94\u7528\u4E3A\u95EE\u5377\u7684\u7B54\u6848\u3002",children:(0,e.jsx)(A.Z,{className:"setting-prompt",style:{color:"#1891ff"}})})]})]}),(0,e.jsx)(W,{visible:F,onClose:function(){return o(!1)}})]})]})},Qe=n(14965),ye=n(68318),Ve=n(30381),Be=n.n(Ve),z=function(i){var t=i.value,u=i.onChange,l=i.title,r=i.tooltip,a=i.type,c=a===void 0?"text":a,Z=i.prefix,F=i.suffix,o=i.style,j=(0,f.useState)(t!==void 0),L=(0,S.Z)(j,2),k=L[0],w=L[1];(0,f.useEffect)(function(){t!==void 0&&w(!0)},[t]);var ie=function(){return c==="datepicker"?(0,e.jsx)(ye.Z,{value:t?Be()(t):void 0,showTime:!0,style:o,onChange:function(g){u(g?g==null?void 0:g.valueOf():void 0)}}):c==="number"?(0,e.jsx)(he.Z,{value:t,onChange:function(g){return u(g)},style:(0,R.Z)({width:200},o)}):(0,e.jsx)(v.Z,{value:t,onChange:function(g){return u(g.target.value)},style:(0,R.Z)({width:200},o)})};return(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:[l,r&&(0,e.jsx)(B.Z,{overlay:r,children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:t!==void 0,onChange:function(p){p?(w(!0),u("")):(w(!1),u(void 0))}})]}),k&&(0,e.jsxs)("div",{className:"setting-item-content",children:[Z,ie(),F]})]})},N=function(i){var t=i.name,u=i.basePath,l=(0,Fe.Z)(i,["name","basePath"]);return(0,e.jsx)(y.gN,{component:[z,l],name:t,basePath:u})},T=n(25782),me=n(69816),Ke=function(){var i=function(u){var l=u.value,r=u.onChange;return l===1?(0,e.jsx)(x.Z,{type:"primary",icon:(0,e.jsx)(T.Z,{}),onClick:function(){return r(0)},children:"\u6B63\u5728\u56DE\u6536"}):(0,e.jsx)(x.Z,{type:"primary",danger:!0,icon:(0,e.jsx)(me.Z,{}),onClick:function(){return r(1)},children:"\u6682\u505C\u56DE\u6536"})};return(0,e.jsx)(y.gN,{component:[i],name:"status",basePath:""})},We=n(1997),Je=function(i){var t=i.value,u=i.onChange,l=(0,f.useState)(!1),r=(0,S.Z)(l,2),a=r[0],c=r[1],Z=(0,V.IE)(),F=Z.schema;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"setting-item",children:[(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u94FE\u63A5",(0,e.jsx)(B.Z,{overlay:"\u95EE\u5377\u4FDD\u5B58\u4E4B\u540E\uFF0C\u53EF\u4EE5\u8DF3\u8F6C\u5230\u6307\u5B9A\u94FE\u63A5\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u94FE\u63A5\u53C2\u6570\u3002",children:(0,e.jsx)(A.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(G.Z,{checked:!!t,onChange:function(j){j?c(!0):u(void 0)}})]}),(a||!!t)&&(0,e.jsx)("div",{className:"setting-item-content",children:(0,e.jsx)(x.Z,{onClick:function(){return c(!0)},style:{marginLeft:10},type:"dashed",children:t?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),a&&(0,e.jsx)(We.tC,{value:t,schema:F,title:"\u63D0\u4EA4\u540E\u81EA\u5B9A\u4E49\u8DF3\u8F6C\u94FE\u63A5",onOk:function(j){u(j),c(!1)},onCancel:function(){c(!1)}})]})},Xe=function(i){return(0,e.jsx)(y.gN,(0,R.Z)({component:[Je]},i))},Ge=n(49101),qe=n(40807),pn=n(48736),_e=n(27049),Sn=n(34792),we=n(48086),Bn=n(9715),De=n(86835),en=n(56692),nn=n(3980),tn=n(64031),un=n(74855),Dn=n(88983),Ee=n(66253),an=n(90586),ln=n(32059),bn=n(13254),ze=n(14277),rn=n(76826),sn=n(96486),on=["FillBlank","MultipleBlank","Textarea","Signature","Radio","Checkbox","Select","Cascader","HorzBlank","MatrixAuto","MatrixRadio","MatrixCheckbox","MatrixFillBlank","MatrixNps","MatrixScore","Upload","Score","Nps","Remark","SplitLine","User","Dept","Address","Barcode"],cn=["Pagination","Remark","SplitLine"],dn={Pagination:"\u5206\u9875",Remark:"\u5907\u6CE8",SplitLine:"\u5206\u5272\u7EBF"};function Ye(s){var i=[];return s&&((on.includes(s.type)||cn.includes(s.type))&&i.push({id:s.id,title:dn[s.type]||(0,rn.WO)(s.title),type:s.type}),s.children&&s.children.map(function(t){var u=Ye(t);u&&i.push.apply(i,(0,I.Z)(u))})),i}var vn=function(i){var t=i.value,u=i.onChange;return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:i.title}),(0,e.jsx)("td",{onClick:function(){return u(2)},children:(0,e.jsx)(Ee.ZP,{value:2,checked:t===2})}),(0,e.jsx)("td",{onClick:function(){return u(1)},children:(0,e.jsx)(Ee.ZP,{value:1,checked:t===1})}),(0,e.jsx)("td",{onClick:function(){return u(0)},children:(0,e.jsx)(Ee.ZP,{value:0,checked:t===0})})]},i.id)},hn=function(i){var t=i.onChange,u=i.value,l=u===void 0?{}:u,r=(0,V.IE)(),a=r.schema,c=r.mode,Z=(0,f.useMemo)(function(){var o=Ye(a);return c==="exam"&&o.push({id:"examScore",title:"\u8003\u8BD5\u5206\u6570",type:"FillBlank"}),o},[a]);(0,f.useEffect)(function(){if((0,sn.isEmpty)(l)&&Z.length>0){var o={};Z.forEach(function(j){return o[j.id]=1}),t&&t(o)}},[a,l,Z,t]);var F=function(j){t&&t(Z.reduce(function(L,k){return L[k.id]=j,L},{}))};return a?(0,e.jsx)("div",{children:(0,e.jsxs)("table",{className:"field-permission-table",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{style:{width:"64%"},children:"\u5B57\u6BB5\u540D"}),(0,e.jsx)("th",{style:{width:"12%"},children:"\u53EF\u7F16\u8F91"}),(0,e.jsx)("th",{style:{width:"12%"},children:"\u4EC5\u53EF\u89C1"}),(0,e.jsx)("th",{style:{width:"12%"},children:"\u9690\u85CF"})]})}),(0,e.jsx)("tbody",{children:Z.map(function(o){return(0,f.createElement)(vn,(0,R.Z)((0,R.Z)({},o),{},{value:l[o.id],onChange:function(L){t&&t((0,R.Z)((0,R.Z)({},l),{},(0,ln.Z)({},o.id,L)))},key:o.id}))})}),(0,e.jsx)("tfoot",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{}),(0,e.jsx)("td",{children:(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return F(2)},children:"\u5168\u9009"})}),(0,e.jsx)("td",{children:(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return F(1)},children:"\u5168\u9009"})}),(0,e.jsx)("td",{children:(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return F(0)},children:"\u5168\u9009"})})]})})]})}):(0,e.jsx)("div",{children:(0,e.jsx)(ze.Z,{image:ze.Z.PRESENTED_IMAGE_SIMPLE,description:"\u95EE\u5377\u4E3A\u7A7A"})})},fn=ye.Z.RangePicker,mn=function(i){var t=i.name,u=i.placeholder,l=function(a){return(0,e.jsx)(v.Z,{onChange:a.onChange,value:a.value,placeholder:u})};return(0,e.jsx)(y.gN,{name:t,component:[l]})},xn=(0,y.Pi)(function(){var s,i=(0,V.IE)(),t=i.schema,u=(0,f.useState)(!1),l=(0,S.Z)(u,2),r=l[0],a=l[1],c=(0,y.cI)(),Z=(s=c.values)===null||s===void 0?void 0:s.conditionQuestion,F=(0,f.useMemo)(function(){return(0,We.sJ)(i.schema)},[i]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(an.Z,{name:"conditionQuestion",children:(0,e.jsx)(We.ML,{variable:F,readOnly:!0,placeholder:"\u67E5\u8BE2\u6761\u4EF6\u4E3A\u7A7A\uFF0C\u70B9\u51FB\u9009\u62E9"})}),(0,e.jsx)(x.Z,{type:"link",onClick:function(){return a(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),t&&(0,e.jsx)(We.ZP,{visible:r,value:Z,title:"\u9009\u62E9\u67E5\u8BE2\u6761\u4EF6",schema:t,onCancel:function(){return a(!1)},functionVisible:!1,fieldTypes:["FillBlank"],functions:[{name:"\u57FA\u7840",functions:[{name:"hah",description:"heih"}]}],onOk:function(j){c.values.conditionQuestion=j,a(!1)}})]})}),gn=(0,y.Pi)(function(){return(0,e.jsx)(y.gN,{name:"fieldPermission",component:[hn]})}),Cn=function(){var i=function(u){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee.ZP,{checked:u.value===void 0,onClick:function(){u.onChange(void 0)},children:"\u516C\u5F00"}),(0,e.jsx)(Ee.ZP,{checked:u.value!==void 0,onClick:function(){u.onChange("")},children:"\u975E\u516C\u5F00\uFF0C\u9700\u8981\u8BBF\u95EE\u5BC6\u7801"}),u.value!==void 0&&(0,e.jsx)(v.Z,{style:{width:200},onChange:function(r){return u.onChange(r.target.value)},value:u.value})]})};return(0,e.jsx)(y.gN,{name:"password",component:[i]})},jn=function(){var i=function(u){var l;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee.ZP,{checked:u.value===void 0,onClick:function(){u.onChange(void 0)},children:"\u6C38\u4E45\u6709\u6548"}),(0,e.jsx)(Ee.ZP,{checked:u.value!==void 0,onClick:function(){u.onChange([Be()().format("YYYY-MM-DD HH:mm:ss"),Be()().add(7,"days").format("YYYY-MM-DD HH:mm:ss")])},children:"\u6307\u5B9A\u65E5\u671F\u6BB5\u5185\u6709\u6548"}),u.value!==void 0&&(0,e.jsx)(fn,{showTime:!0,value:(l=u.value)===null||l===void 0?void 0:l.map(function(r){return Be()(r)}),onChange:function(a){u.onChange(a==null?void 0:a.map(function(c){return c==null?void 0:c.format("YYYY-MM-DD HH:mm:ss")}))}})]})};return(0,e.jsx)(y.gN,{name:"linkValidityPeriod",component:[i]})},yn=(0,y.Pi)(function(s){var i=s.values,t=s.onCancel,u=s.onOk,l=s.visible,r=(0,f.useMemo)(function(){return(0,tn.Np)({initialValues:i})},[]);return(0,e.jsx)(y.RV,{form:r,children:(0,e.jsxs)(Y.Z,{visible:l,title:"\u65B0\u589E\u67E5\u8BE2\u9875\u9762",okText:"\u4FDD\u5B58",width:750,bodyStyle:{maxHeight:650,overflow:"auto"},onCancel:t,onOk:function(){return u(r.values)},className:"query-item-modal",children:[(0,e.jsx)(De.Z.Item,{label:"\u9875\u9762\u6807\u9898",required:!0,labelCol:{span:24},children:(0,e.jsx)(mn,{name:"title",placeholder:"\u67E5\u8BE2\u6807\u9898"})}),(0,e.jsx)(De.Z.Item,{label:"\u9875\u9762\u67E5\u8BE2\u63CF\u8FF0\u4FE1\u606F",labelCol:{span:24},children:(0,e.jsx)(en.rN,{name:"description",placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u63CF\u8FF0\u4FE1\u606F\uFF0C\u652F\u6301\u5BCC\u6587\u672C\u8F93\u5165",style:{border:"1px solid #d9d9d9"},size:"large"})}),(0,e.jsx)(De.Z.Item,{label:"\u67E5\u8BE2\u6761\u4EF6",required:!0,labelCol:{span:24},children:(0,e.jsx)(xn,{})}),(0,e.jsx)(De.Z.Item,{label:"\u67E5\u8BE2\u7ED3\u679C",required:!0,labelCol:{span:24},children:(0,e.jsx)(gn,{})}),(0,e.jsx)(De.Z.Item,{label:"\u67E5\u770B\u6743\u9650",required:!0,labelCol:{span:24},children:(0,e.jsx)(Cn,{})}),(0,e.jsx)(De.Z.Item,{label:"\u94FE\u63A5\u6709\u6548\u671F",required:!0,labelCol:{span:24},children:(0,e.jsx)(jn,{})})]})})}),En=(0,y.Pi)(function(s){var i=(0,y.U$)(),t=s.index,u=s.item,l=(0,f.useState)(!1),r=(0,S.Z)(l,2),a=r[0],c=r[1],Z=(0,f.useState)(""),F=(0,S.Z)(Z,2),o=F[0],j=F[1],L=(0,V.IE)(),k=_(L.id)+"/result/".concat(u.id),w=(0,y.cI)(),ie=i.value[t].enabled;(0,f.useEffect)(function(){function p(){return g.apply(this,arguments)}function g(){return g=(0,C.Z)(E().mark(function P(){return E().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:b.toDataURL(k,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(J){j(J)}).catch(function(J){console.error(J)});case 1:case"end":return oe.stop()}},P)})),g.apply(this,arguments)}p()},[k]);var ue=(0,f.useCallback)(function(){var p=(0,C.Z)(E().mark(function g(P){return E().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:b.toDataURL(k,{errorCorrectionLevel:"H",margin:5,width:P}).then(function(J){j(J);var ee=document.createElement("a");ee.href=J,ee.setAttribute("download","".concat(L.name,"_").concat(P,".png")),document.body.appendChild(ee),ee.click(),document.body.removeChild(ee)});case 1:case"end":return oe.stop()}},g)}));return function(g){return p.apply(this,arguments)}}(),[k,L]);return(0,e.jsxs)(y.Wo,{name:t,children:[(0,e.jsxs)("div",{style:{background:"white",marginBottom:10,padding:"20px 10px 10px 10px"},children:[u.linkValidityPeriod&&(0,e.jsxs)("div",{style:{lineHeight:"32px"},children:["\u94FE\u63A5\u6709\u6548\u671F\uFF1A","".concat(u.linkValidityPeriod[0],"-").concat(u.linkValidityPeriod[1])]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:u.title||"\u4FE1\u606F\u67E5\u8BE2"}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"6px 0px"},children:[(0,e.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:32,height:32},children:(0,e.jsx)(U.Z,{content:(0,e.jsxs)("div",{children:[(0,e.jsx)("img",{src:o,height:150,width:150}),(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsxs)($.Z,{children:[(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return ue(256)},children:"\u5C0F\u53F7"}),(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return ue(512)},children:"\u4E2D\u53F7"}),(0,e.jsx)(x.Z,{size:"small",type:"link",onClick:function(){return ue(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(L.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click","hover"],children:(0,e.jsx)("img",{src:o,height:30,width:30})})}),(0,e.jsxs)($.Z,{style:{marginLeft:10},children:[(0,e.jsx)(v.Z,{value:k,readOnly:!0,style:{width:340,background:"#f7f8fa"}}),(0,e.jsx)(un.CopyToClipboard,{text:k,onCopy:function(){return we.default.success("\u590D\u5236\u6210\u529F")},children:(0,e.jsx)(x.Z,{type:"primary",ghost:!0,disabled:!ie,children:"\u590D\u5236"})}),(0,e.jsx)(x.Z,{type:"primary",ghost:!0,onClick:function(){return window.open(k)},disabled:!ie,children:"\u6253\u5F00"})]})]})]}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,e.jsxs)($.Z,{children:[(0,e.jsx)(x.Z,{type:"link",size:"small",onClick:function(){return c(!0)},children:"\u8BBE\u7F6E"}),(0,e.jsx)(_e.Z,{type:"vertical"}),(0,e.jsx)(x.Z,{type:"link",size:"small",onClick:function(){return i.remove(t)},children:"\u5220\u9664"})]}),(0,e.jsx)(y.gN,{name:"enabled",component:[function(p){return(0,e.jsx)(G.Z,{onChange:function(P){return p.onChange(P)},checked:p.value,checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"})}]})]})]}),(0,e.jsx)(yn,{visible:a,values:u,onCancel:function(){return c(!1)},onOk:function(g){i.value[t]=(0,R.Z)((0,R.Z)({},u),g),nn.hi.updateSetting({id:L.id,settingKey:"submittedSetting.publicQuery",settingValue:i.value}).then(function(P){P.success&&we.default.info("\u4FDD\u5B58\u4E2D")}),c(!1)}})]})}),Zn=(0,y.Pi)(function(){var s,i=(0,y.U$)();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:380,overflow:"auto"},children:(s=i.value)===null||s===void 0?void 0:s.map(function(t,u){return(0,e.jsx)(En,{item:t,index:u},t.id)})}),(0,e.jsx)(x.Z,{type:"link",onClick:function(){i.push({id:(0,qe.kb)(6)})},icon:(0,e.jsx)(Ge.Z,{}),children:"\u65B0\u589E\u67E5\u8BE2\u9875\u9762"})]})}),Fn=function(i){var t=(0,f.useState)(!1),u=(0,S.Z)(t,2),l=u[0],r=u[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{title:"\u5BF9\u5916\u67E5\u8BE2\u8BBE\u7F6E",onCancel:function(){return r(!1)},maskClosable:!1,width:650,visible:l,footer:!1,bodyStyle:{background:"#f7f8fa",height:450,overflow:"hidden"},children:(0,e.jsx)(y.OF,{name:"publicQuery",component:[Zn]})}),(0,e.jsx)(x.Z,{type:"link",onClick:function(){return r(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]})},In=n(10391)}}]);
