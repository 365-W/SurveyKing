(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9741],{55686:function(We,Se,v){"use strict";var H=v(11849),j=v(94233),T=v(51890),ge=v(93224),V=v(89366),c=v(85893),pe=function(_){var Y=_.user,F=(0,ge.Z)(_,["user"]);return Y.avatar?(0,c.jsx)(T.C,(0,H.Z)({src:"/api/public/preview/".concat(Y.avatar),size:F.size||"small"},F)):(0,c.jsx)(T.C,(0,H.Z)({icon:(0,c.jsx)(V.Z,{}),size:F.size||"small"},F))};Se.Z=pe},78210:function(We,Se,v){"use strict";var H=v(15020),j=v(85893),T=function(V){var c=V.html,pe=c===void 0?"":c;return(0,j.jsx)(j.Fragment,{children:typeof pe=="string"&&(0,H.ZP)(pe.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))})};Se.Z=T},14247:function(We,Se,v){"use strict";v.d(Se,{Mt:function(){return le},hl:function(){return e},AT:function(){return Ne},HN:function(){return ce},we:function(){return je},k9:function(){return pe},jI:function(){return Ye}});var H=v(2299),j=v(67294),T=v(24004),ge=v(95522),V=v(87998),c=v(85893);function pe(P){var y=(0,j.useContext)(T.ZX),E=y.theme,z=y.footerVisible,se=y.headerVisible,oe=P.schema,J=function(D){var N=(0,ge.GZ)(E,"Survey");if(N)return j.createElement(N,{schema:oe,footerVisible:z,headerVisible:se},D)},B=function(){var D,N=-1;return(D=oe.children)===null||D===void 0?void 0:D.map(function(re){var L=re.type,de=re.id;return(0,V.nj)(L)||N++,L==="QuestionSet"?(0,c.jsx)(je,{schema:re,index:N},de):(0,c.jsx)(ce,{schema:re,index:N},de)})};return(0,c.jsxs)(c.Fragment,{children:[J(B()),(0,c.jsx)(H.gN,{name:"_finish"})]})}var be=v(32059),_=v(2824),Y=v(86582),F=v(11849);function M(P){var y,E=[],z=P.attribute;return z&&z.required&&E.push({required:!0,triggerType:"onInput"}),z&&z.answerLimit&&E.push({answerLimit:!0,schema:P}),(y=P.children)===null||y===void 0||y.forEach(function(se){E.push.apply(E,(0,Y.Z)(ne(se,P)))}),E}function ne(P,y){var E,z,se,oe,J=[];if((E=P.attribute)!==null&&E!==void 0&&E.dataType){var B;J.push((B={},(0,be.Z)(B,P.attribute.dataType,!0),(0,be.Z)(B,"schema",(0,F.Z)((0,F.Z)({},P),{},{parent:y})),B))}return(z=P.attribute)!==null&&z!==void 0&&z.required&&J.push({required:!0,schema:(0,F.Z)((0,F.Z)({},P),{},{parent:y})}),(se=P.attribute)!==null&&se!==void 0&&se.textLimit&&J.push({textLimit:!0,schema:(0,F.Z)((0,F.Z)({},P),{},{parent:y})}),(oe=P.attribute)!==null&&oe!==void 0&&oe.scope&&J.push({scope:!0,schema:(0,F.Z)((0,F.Z)({},P),{},{parent:y})}),J}var S=v(80705),A=v(15020),e=function(y){var E=y.html,z=E===void 0?"":E;return(0,c.jsx)(c.Fragment,{children:typeof z=="string"&&(0,A.ZP)(z.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))})},Fe=function(y){return(0,c.jsx)("div",{className:"preview",children:Re(y)})};function Re(P){var y=P.schema,E=P.value;if(!E)return"";var z;if(y.type==="Radio"||y.type==="Select")Object.entries(E).some(function(B){var O=(0,_.Z)(B,2),D=O[0],N=O[1];if(N===!0){var re,L;z=(0,c.jsx)(e,{html:(re=y.children)===null||re===void 0||(L=re.find(function(Ee){return Ee.id===D}))===null||L===void 0?void 0:L.title})}else if(N){var de,Ze;z=(0,c.jsx)(e,{html:(de=y.children)===null||de===void 0||(Ze=de.find(function(Ee){return Ee.id===D}))===null||Ze===void 0?void 0:Ze.title})}return!0});else{if(y.type==="Checkbox")return Object.entries(E).map(function(B){var O=(0,_.Z)(B,2),D=O[0],N=O[1];if(N===!0){var re,L;return(0,c.jsx)(e,{html:(re=y.children)===null||re===void 0||(L=re.find(function(Ee){return Ee.id===D}))===null||L===void 0?void 0:L.title},D)}else if(N){var de,Ze;return(0,c.jsx)(e,{html:(de=y.children)===null||de===void 0||(Ze=de.find(function(Ee){return Ee.id===D}))===null||Ze===void 0?void 0:Ze.title},D)}}).reduce(function(B,O){return[B,", ",O]});if(y.type==="Cascader"){var se=y.children.map(function(B){return B.id}),oe=se.map(function(B){return E[B]}),J=y.dataSource;return oe.filter(function(B){return B!==void 0}).map(function(B,O){var D,N=(D=J)===null||D===void 0?void 0:D.find(function(re){return re.value===B});return J=N.children,(0,c.jsx)("span",{children:N.label},se[O])})}else if(y.type==="FillBlank"||y.type==="MultipleBlank"||y.type==="Textarea"||y.type==="Score"||y.type==="Nps")return Object.entries(E).map(function(B){var O=(0,_.Z)(B,2),D=O[0],N=O[1];return(0,c.jsx)("span",{children:N},D)})}return z}var ce=(0,H.Pi)(function(y){var E=y.schema,z=y.index,se=y.qsIndex,oe=E.id,J=E.type,B=(0,j.useContext)(T.ZX),O=B.theme,D=B.optionTypes,N=B.id2title,re=(0,j.useMemo)(function(){return(0,V.cB)(E,"calculate")},[]),L=(0,j.useMemo)(function(){var I;return(0,H.$j)((0,ge.I8)(O,J),(0,H.jM)(function(R,K){return(0,F.Z)((0,F.Z)({},R),{},{onChange:function(G){if(!R.readOnly){if((0,S.xb)(G)){K.onInput(void 0);return}if(J.startsWith("Matrix")&&(0,V.hb)(G)){K.onInput(void 0);return}G&&Object.keys(G).forEach(function(ae){G[ae]===void 0&&(G[ae]="")}),K.onInput(G)}}})}),(0,H.vl)(((I=(0,ge.I8)(O,J))===null||I===void 0?void 0:I.Preview)||Fe))},[O,J]),de=(0,j.useCallback)(function(I){return(0,c.jsx)("div",{tabIndex:-1,onBlur:I==null?void 0:I.onBlur,children:j.createElement((0,ge.GZ)(O,"Question"),I)})},[O]),Ze=(0,j.useMemo)(function(){return(0,H.$j)(de,(0,H.jM)(function(I,R){return(0,F.Z)((0,F.Z)({},I),{},{error:R.selfErrors.length?(0,Y.Z)(R.selfErrors):[],warning:R.selfWarnings.length?R.selfWarnings:[],onBlur:function(){return R.onBlur.apply(R,arguments)},required:R.required})}))},[de]),Ee=(0,j.useMemo)(function(){return(0,H.$j)((0,ge.I8)(O,J),(0,H.jM)(function(I,R){return(0,F.Z)({},I)}))},[O,J]);return(0,V.nj)(E.type)?(0,c.jsx)(H.jG,{name:oe,component:[Ee,{schema:E,controlShow:void 0}],reactions:[function(I){var R,K=(R=E.attribute)===null||R===void 0?void 0:R.replaceTextRule;if(K){var Q=(0,V.vW)(K,function(ae){var q=(0,V.Op)(ae),W=(0,_.Z)(q,1),me=W[0],ve=I.query(me).get("value");return(0,V.d0)(D,ve,ae,N)}),G="";Q.success&&Q.result&&(G=Q.result),I.setComponentProps((0,F.Z)((0,F.Z)({},I.componentProps),{},{replaceTitle:G}))}}]}):(0,c.jsx)(H.gN,{name:oe,component:[L,{schema:E,controlShow:void 0}],decorator:[Ze,{schema:E,index:z,qsIndex:se}],validator:M(E),reactions:[function(I){Object.entries(re).forEach(function(R){var K=(0,_.Z)(R,2),Q=K[0],G=K[1],ae=G,q=(0,V.vW)(ae,function(W){var me=(0,V.Op)(W),ve=(0,_.Z)(me,2),Ke=ve[0],it=ve[1],ut=I.query(Ke).get("value");return(0,V.d0)(D,ut,W)});q.success&&I.setState(function(W){var me;return W.value=(0,F.Z)((0,F.Z)({},W.value),{},(0,be.Z)({},Q,(0,V.A7)(q.result,(me=E.children)===null||me===void 0?void 0:me.find(function(ve){return ve.id===Q}))))})})},function(I){var R,K=(R=E.attribute)===null||R===void 0?void 0:R.visibleRule;if(K){var Q=(0,V.vW)(K,function(G){var ae=(0,V.Op)(G),q=(0,_.Z)(ae,2),W=q[0],me=q[1],ve=I.query(W).get("value");return(0,V.d0)(D,ve,G)});Q.success&&(Q.result?I.display="visible":I.display="none")}},function(I){var R,K=(R=E.attribute)===null||R===void 0?void 0:R.requiredRule;if(K){var Q=(0,V.vW)(K,function(G){var ae=(0,V.Op)(G),q=(0,_.Z)(ae,2),W=q[0],me=q[1],ve=I.query(W).get("value");return(0,V.d0)(D,ve,G)});Q.success&&(Q.result?I.required=!0:I.required=!1)}},function(I){var R,K=(R=E.attribute)===null||R===void 0?void 0:R.replaceTextRule;if(K){var Q=(0,V.vW)(K,function(ae){var q=(0,V.Op)(ae),W=(0,_.Z)(q,1),me=W[0],ve=I.query(me).get("value");return(0,V.d0)(D,ve,ae,N)}),G="";Q.success&&Q.result&&(G=Q.result),I.setDecoratorProps((0,F.Z)((0,F.Z)({},I.decoratorProps),{},{replaceTitle:G}))}}]})});function je(P){var y=P.schema,E=P.index,z=y.id,se=(0,j.useContext)(T.ZX),oe=se.theme,J=function(){var O;return(O=y.children)===null||O===void 0?void 0:O.map(function(D,N){return D.type==="QuestionSet"?(0,c.jsx)(je,{schema:D,index:N},D.id):(0,c.jsx)(ce,{schema:D,index:N,qsIndex:E},D.id)})};return(0,c.jsx)(H.jG,{name:z,decorator:[(0,ge.GZ)(oe,"QuestionSet"),{schema:y,index:E}],children:J()})}var Ue=function(y){var E=y.progress,z=E===void 0?0:E;return _jsx("div",{className:"progress-bar",style:{width:"".concat(z*100,"%")}})},$e=v(16165),Be=function(){return(0,c.jsxs)("svg",{viewBox:"0 0 1024 1024",width:"150",height:"150",children:[(0,c.jsx)("path",{d:"M0 0h1024v1024H0z",fill:"#FFFFFF","p-id":"44112"}),(0,c.jsx)("path",{d:"M160 73.426667h83.173333V0h98.266667v155.010667h75.6v179.485333h37.813333V163.168h22.666667v-40.8h68.053333v24.474667h30.24v342.666666h60.48V40.8h45.36v236.586667h22.666667V179.485333h45.36V16.317333H893.333333V824H160V73.426667z",fill:"#DDEEFF",opacity:".4","p-id":"44113"}),(0,c.jsx)("path",{d:"M362.693333 741.416l635.866667 95.584L689.893333 997.333333 24 852.36z",fill:"#DFE7F7","p-id":"44114"}),(0,c.jsx)("path",{d:"M1002.64 813.370667l-307.6 160.322666-665.893333-144.970666-0.826667-2.629334v-8.213333l20.586667 2.666667v1.701333l318.933333-104.469333 614.213333 92.48v-5.101334H1002.666667v8.213334h-0.026667z",fill:"#5AA12E","p-id":"44115"}),(0,c.jsx)("path",{d:"M1002.64 805.157333l-308.64 160.314667-665.653333-144.92h-0.026667l-0.213333-0.04 0.213333-0.064v-8.104l17.733333 2.296 320.746667-105.066667 615.253333 92.488v-5.098666H1002.666667v8.213333h-0.026667z",fill:"#93C110","p-id":"44116"}),(0,c.jsx)("path",{d:"M366.8 701.333333L1002.666667 796.917333l-308.666667 160.333334L28.106667 812.266667z",fill:"#EEF2F5","p-id":"44117"}),(0,c.jsx)("path",{d:"M629.333333 809.333333a138.666667 6.666667 0 1 0 277.333334 0 138.666667 6.666667 0 1 0-277.333334 0Z",fill:"#E3E7EA","p-id":"44118"}),(0,c.jsx)("path",{d:"M162.666667 773.333333a152 13.333333 0 1 0 304 0 152 13.333333 0 1 0-304 0Z",fill:"#E3E7EA","p-id":"44119"}),(0,c.jsx)("path",{d:"M922.666667 610.666667h-64v170.666666h53.333333a13.333333 13.333333 0 0 1 0 26.666667h-181.333333a13.333333 13.333333 0 0 1 0-26.666667h58.666666v-144h-26.666666a10.666667 10.666667 0 0 1-10.666667-10.666666v-16h-117.333333v82.666666a8 8 0 0 1-16 0v-82.666666h-5.333334a10.666667 10.666667 0 0 1-10.666666-10.666667v-2.666667l48-50.666666h4.48a7.658667 7.658667 0 0 1 1.573333-0.968l187.093333-83.381334a10.4 10.4 0 0 1 14.773334 6.208l72.453333 81.178667a8.066667 8.066667 0 0 1 2.08 5.461333 11.581333 11.581333 0 0 1 0.213333 2.168v42.666667a10.666667 10.666667 0 0 1-10.666666 10.666667z m-272-42.666667l-26.666667 29.333333h26.666667v-29.333333z m117.333333 53.333333h66.666667v-58.666666h-29.333334l-37.333333 37.333333v21.333333z m-16-24l37.333333-37.333333h-37.333333v37.333333z m-45.333333 0h21.333333v-37.333333h-21.333333v37.333333z m-18.666667-37.333333h-21.333333v37.333333h21.333333v-37.333333z m5.84-13.333333h96.693333a9.224 9.224 0 0 1 0.693334-1.6l32.506666-56.290667zM842.666667 487.976L808.773333 546.666667H842.666667v-58.690667zM845.333333 648h-42.666666v26.666667h42.666666v-26.666667z m0 37.333333h-42.666666v42.666667h42.666666v-42.666667z m0 53.333334h-42.666666v42.666666h42.666666v-42.666666z m13.333334-141.333334h21.333333v-37.333333h-21.333333v37.333333z m0-104.690666V546.666667h48.213333zM917.333333 560h-21.333333v37.333333h21.333333v-37.333333z",fill:"#8BC8FF","p-id":"44120"}),(0,c.jsx)("path",{d:"M592 709.333333h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H514.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H592a8 8 0 0 1 0 16z",fill:"#DFF0FF","p-id":"44121"}),(0,c.jsx)("path",{d:"M936 298.666667h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205334 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H858.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205334H936a8 8 0 0 1 0 16z",fill:"#C3E2FF","p-id":"44122"}),(0,c.jsx)("path",{d:"M104 408H45.333333a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205334H26.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205334 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H104a8 8 0 0 1 0 16z",fill:"#DCEEFF","p-id":"44123"}),(0,c.jsx)("path",{d:"M309.333333 522.666667m-245.333333 0a245.333333 245.333333 0 1 0 490.666667 0 245.333333 245.333333 0 1 0-490.666667 0Z",fill:"#FFCC6C","p-id":"44124"}),(0,c.jsx)("path",{d:"M296 730.666667a245.389333 245.389333 0 0 0 237.013333-308.746667 245.333333 245.333333 0 1 1-460.693333 164.16A245.333333 245.333333 0 0 0 296 730.666667z",fill:"#F3B72C","p-id":"44125"}),(0,c.jsx)("path",{d:"M338.666667 464m-50.666667 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#E49817","p-id":"44126"}),(0,c.jsx)("path",{d:"M333.333333 456m-50.666666 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#FFFFFF","p-id":"44127"}),(0,c.jsx)("path",{d:"M303.333333 603.2a37.085333 37.085333 0 1 1-38 37.066667 37.544 37.544 0 0 1 38-37.066667z",fill:"#E49817","p-id":"44128"}),(0,c.jsx)("path",{d:"M299.333333 597.333333A37.085333 37.085333 0 1 1 261.333333 634.4a37.544 37.544 0 0 1 38-37.066667z",fill:"#FFFFFF","p-id":"44129"}),(0,c.jsx)("path",{d:"M182.786667 554.125333m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#E49817","p-id":"44130"}),(0,c.jsx)("path",{d:"M179.88 549.874667m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#FFFFFF","p-id":"44131"}),(0,c.jsx)("path",{d:"M251.733333 320.424a19.794667 19.794667 0 1 1-20.266666 19.789333 20.026667 20.026667 0 0 1 20.266666-19.789333z",fill:"#E49817","p-id":"44132"}),(0,c.jsx)("path",{d:"M249.6 317.333333a19.794667 19.794667 0 1 1-20.266667 19.786667 20.026667 20.026667 0 0 1 20.266667-19.786667z",fill:"#FFFFFF","p-id":"44133"}),(0,c.jsx)("path",{d:"M426.04 365.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44134"}),(0,c.jsx)("path",{d:"M419.293333 357.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44135"}),(0,c.jsx)("path",{d:"M466.04 589.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44136"}),(0,c.jsx)("path",{d:"M459.293333 581.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44137"}),(0,c.jsx)("path",{d:"M490.666667 860a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44138"}),(0,c.jsx)("path",{d:"M480 801.333333a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44139"}),(0,c.jsx)("path",{d:"M526.453333 597.12a48.968 48.968 0 0 0-4.586666-4.722667c55.493333-36.413333 83.466667-80.64 68.986666-121.04-8.746667-24.416-31.866667-44.266667-64.773333-58.512-0.346667-0.984-0.666667-1.970667-1.12-2.946666a40.712 40.712 0 0 0-3.12-5.410667c39.093333 15.2 66.72 37.432 76.72 65.333333 15.306667 42.656-14.026667 89.253333-72.106667 127.298667zM573.333333 856v5.333333s-135.84 11.306667-109.333333-136c19.866667-100.330667-32.586667-80.72-41.386667-80.112 0 0 0 0.016 0.026667 0.026667a595.552 595.552 0 0 1-66.4 17.274667c-160.48 32.136-312.186667-2.04-338.8-76.336-13.413333-37.413333 7.466667-77.866667 51.973333-112.904a31.802667 31.802667 0 0 0 0.293334 7.485333c0.053333 0.24 0.133333 0.464 0.186666 0.701333-39.04 32.48-56.933333 69.181333-44.746666 103.173334 25.493333 71.109333 172.8 103.397333 329.013333 72.114666a589.661333 589.661333 0 0 0 64.533333-16.714666L418.666667 640s72.826667-26.768 50.666666 80c-17.92 86.293333 13.146667 138.845333 104 136z",fill:"#FFE1A9","p-id":"44140"}),(0,c.jsx)("path",{d:"M512 884a74.666667 6.666667 0 1 0 149.333333 0 74.666667 6.666667 0 1 0-149.333333 0Z",fill:"#E3E7EA","p-id":"44141"}),(0,c.jsx)("path",{d:"M608.453333 802.666667h20.426667l17.093333 75.917333h-54.613333z m-6.88 15.165333h34.186667v6.752h-34.186667v-6.752z m-5.066666 16.917333h44.32v6.749334h-44.32v-6.749334z m-5.173334 21.917334h54.666667v6.749333h-54.666667v-6.749333z m-11.946666 21.917333h78.56a3.381333 3.381333 0 0 1 3.386666 3.373333 3.384 3.384 0 0 1-3.386666 3.373334h-78.56a3.384 3.384 0 0 1-3.386667-3.373334 3.381333 3.381333 0 0 1 3.386667-3.373333z",fill:"#F9A303","p-id":"44142"}),(0,c.jsx)("path",{d:"M768 838.666667a58.666667 6.666667 0 1 0 117.333333 0 58.666667 6.666667 0 1 0-117.333333 0Z",fill:"#E3E7EA","p-id":"44143"}),(0,c.jsx)("path",{d:"M880 845.333333a5.181333 5.181333 0 0 0 5.333333-5v-70a5.181333 5.181333 0 0 0-5.333333-5v80z",fill:"#845C45","p-id":"44144"}),(0,c.jsx)("path",{d:"M880 845.333333a5.181333 5.181333 0 0 1-5.333333-5v-70a5.181333 5.181333 0 0 1 5.333333-5v80z",fill:"#BA805A","p-id":"44145"}),(0,c.jsx)("path",{d:"M880 770.666667a45.333333 45.333333 0 0 0 0-90.666667v90.666667z",fill:"#628A21","p-id":"44146"}),(0,c.jsx)("path",{d:"M880 770.666667a45.333333 45.333333 0 0 1 0-90.666667v90.666667z",fill:"#6EA52E","p-id":"44147"}),(0,c.jsx)("path",{d:"M568 786.778667l-1.946667 6.824a1.130667 1.130667 0 0 1-1.173333 0.773333l-4.16-0.349333a19.581333 19.581333 0 0 1-18.88 8.477333l-13.093333-1.664 0.026666-0.04a3.733333 3.733333 0 0 1-0.986666-0.397333c-2.586667-1.504-3.706667-5.986667-3.306667-11.509334l-7.146667-1.816a3.408 3.408 0 0 1-2.56-4.173333 3.656 3.656 0 0 1 4.426667-2.4l6.453333 1.642667c0.293333-1.066667 0.613333-2.154667 1.013334-3.237334 0.213333-0.621333 0.453333-1.221333 0.693333-1.810666l-7.626667-1.938667a3.410667 3.410667 0 0 1-2.56-4.176 3.653333 3.653333 0 0 1 4.426667-2.4l9.12 2.317333a11.101333 11.101333 0 0 1 7.306667-5.472V765.333333l8.906666 1.136a18.562667 18.562667 0 0 1 16.613334 17.386667l3.813333 1.685333a1.066667 1.066667 0 0 1 0.64 1.237334z m-26.693333-20.149334c-2.693333-1.52-6.24 0.429333-9.306667 4.578667l4.08 1.032a3.392 3.392 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-5.68-1.437333c-0.24 0.573333-0.48 1.16-0.693333 1.765333q-0.6 1.642667-1.04 3.274667l6.88 1.744a3.389333 3.389333 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-6.133333-1.557333c-0.32 5.184 0.853333 9.368 3.386667 10.805333 4.053333 2.298667 10.08-3.309333 13.44-12.533333s2.853333-18.52-1.2-20.818667z",fill:"#FF6767","p-id":"44148"}),(0,c.jsx)("path",{d:"M578.666667 789.333333s194 0.666667 98.666666 64l-2.666666-2.666666s100.826667-53-98.666667-58.666667z",fill:"#FFE1A9","p-id":"44149"})]})},Ne=function(y){return(0,c.jsx)($e.Z,(0,F.Z)({component:Be},y))},Je=v(27484),ze=v.n(Je),Ve=v(75977),qe=v(45418),Rt=v(62713),Te=v(33852),ot=v(10285),_e=v.n(ot),et=v(72540),tt=v.n(et),at=v(96036),nt=v.n(at);ze().locale("zh-cn"),ze().extend(tt()),ze().extend(_e()),ze().extend(nt());var le=(0,qe.default)((0,F.Z)({},Ve.Z)),rt=le,Ye=j.forwardRef(function(P,y){return(0,c.jsx)(rt,(0,F.Z)((0,F.Z)({},P),{},{picker:"time",mode:void 0,ref:y}))});Ye.displayName="TimePicker";var dt=null},39017:function(We,Se,v){"use strict";v.d(Se,{Rk:function(){return Y},AK:function(){return T},Al:function(){return be}});var H=v(67294),j=v(24004);function T(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",M=(0,H.useContext)(j.ZX),ne=M.theme;return"survey-".concat(ne)+F}function ge(F,M){var ne=(M&&M.depends||[]).reduce(function(S,A){return S||!A},!1);return V(ne?void 0:function(S,A){return fetch(S,A).then(function(e){if(!!e.ok)return e.json()})},F,M||{})}function V(F){for(var M=arguments.length,ne=new Array(M>1?M-1:0),S=1;S<M;S++)ne[S-1]=arguments[S];var A=useState(0),e=_slicedToArray(A,2),Fe=e[0],Re=e[1],ce=useCallback(function(){Re(Math.random())},[]),je=useState({loading:!1,mutate:ce}),Ue=_slicedToArray(je,2),$e=Ue[0],Be=Ue[1];return useEffect(function(){!F||ne[1].manual&&Fe===0||F.apply(null,ne).then(function(Ne){Ne.code===200?Be({loading:!1,data:Ne.data,mutate:ce}):Be({error:Ne.message,loading:!1,mutate:ce})}).catch(function(Ne){Be({error:Ne,loading:!1,mutate:ce})})},c(Fe,ne)),$e}function c(){for(var F=arguments.length,M=new Array(F),ne=0;ne<F;ne++)M[ne]=arguments[ne];for(var S=[],A=0;A<arguments.length;A++){var e=arguments[A];if(e instanceof Array)for(var Fe=0;Fe<e.length;Fe++)S=S.concat(c(e[Fe]));else if(typeof URL!="undefined"&&e instanceof URL)S=S.concat(e.toJSON());else if(e instanceof Object)for(var Re=Object.keys(e),ce=0;ce<Re.length;ce++){var je=Re[ce];je==="depends"?S=S.concat(e[je]):S=S.concat([je]).concat(c(e[je]))}else S=S.concat(e)}return S}var pe=v(87998);function be(){return(0,H.useContext)(pe.ZX)}function _(){return useSurvey().attachments}function Y(){var F=(0,H.useContext)(pe.ZX);return F.innerStore}},99741:function(We,Se,v){"use strict";v.d(Se,{O:function(){return wt},Z:function(){return ya}});var H=v(3182),j=v(11849),T=v(2824),ge=v(94043),V=v.n(ge),c=v(67294),pe=v(2299),be=v(64031),_=v(54531),Y=v(14247),F=v(24004),M=v(95522),ne=v(78210),S=v(87998),A=v(39017),e=v(85893);function Fe(t){var a=t.schema,i=t.index,n=(0,A.AK)("-body-questionSet"),r=(0,c.useContext)(S.ZX),s=r.questionNumber;return(0,e.jsxs)("div",{className:n,children:[(0,e.jsxs)("div",{className:n+"-title",children:[s?"".concat(i+1,"."):"",(0,e.jsx)(ne.Z,{html:a.title})]}),t.children,(0,e.jsx)("div",{className:n+"-splitLine"})]})}(0,M.eC)("QuestionSet",Fe,"antd");var Re=v(9715),ce=v(93766);function je(t){var a=t.schema,i=t.index,n=t.qsIndex,r=t.required,s=t.error,h=t.replaceTitle,d=(0,c.useContext)(S.ZX),l=d.questionNumber,f=(0,A.AK)("-body-question"),o=t.error.length>0,u=t.warning.length>0,g=(0,c.useState)(),x=(0,T.Z)(g,2),m=x[0],p=x[1];(0,c.useEffect)(function(){if(m){var Z,b;(Z=document.querySelector("[data-id='".concat(a.id,"']")))===null||Z===void 0||Z.classList.remove("ant-form-item-has-error"),(b=document.querySelector("[data-id='".concat(a.id,"']")))===null||b===void 0||b.querySelectorAll("[data-id]").forEach(function(ye){ye.classList.remove("ant-form-item-has-error")})}if(s.length>0){var $,ie=s[0].split("^"),w=(0,T.Z)(ie,2),X=w[0],ue=w[1],Ce;ue?(Ce=document.querySelector("[data-id='".concat(X,"']")),p(ue)):(Ce=document.querySelector("[data-id='".concat(a.id,"']")),p(X)),($=Ce)===null||$===void 0||$.classList.add("ant-form-item-has-error")}else m&&p(void 0)},[s]);var C="";return n!==void 0&&(C+=n+1+"-"),i!==void 0&&(C+=i+1+"."),(0,e.jsx)("div",{className:f,"data-id":a.id,children:(0,e.jsx)(ce.Z.Item,{label:(0,e.jsxs)("span",{className:f+"-header",children:[l?C:"",(0,e.jsx)(Y.hl,{html:h||a.title})]}),labelCol:{span:24},wrapperCol:{span:24},required:r,help:m,children:t.children})})}(0,M.eC)("Question",je,"antd");var Ue=v(84305),$e=v(88182),Be=v(82925),Ne=function(){var a=(0,A.AK)(),i=(0,c.useContext)(S.ZX),n=i.schema;return(0,e.jsxs)("div",{className:a+"-header",children:[(0,e.jsx)("div",{className:a+"-header-title",children:(0,e.jsx)(Y.hl,{html:n.title})}),(0,e.jsx)("div",{className:a+"-header-description",children:(0,e.jsx)(Y.hl,{html:n.description})})]})},Je=function(a){var i=(0,A.AK)();return(0,e.jsx)("div",{className:i+"-body",children:a.children})},ze=v(57663),Ve=v(71577);function qe(){var t,a,i,n=(0,A.AK)("-footer"),r=(0,c.useContext)(S.ZX),s=r.schema,h=r.onSubmit,d=r.onPrev,l=r.pagination,f=r.onNext,o=r.loading,u=l.pageSize>1,g=l.current===1,x=l.current===l.pageSize,m=u?(t=s.children)===null||t===void 0?void 0:t.slice(-1)[0]:void 0;return(0,e.jsxs)("div",{className:n,children:[x&&(0,e.jsx)("div",{className:n+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(Y.hl,{html:s==null||(a=s.attribute)===null||a===void 0?void 0:a.suffix})}),(0,e.jsxs)("div",{className:n+"-pagination",children:[u&&!g&&(0,e.jsx)("div",{children:(0,e.jsx)(Ve.Z,{type:"primary",block:!0,onClick:function(){return d()},children:"\u4E0A\u4E00\u9875"})}),u&&!x&&(0,e.jsx)("div",{children:(0,e.jsx)(Ve.Z,{type:"primary",block:!0,onClick:function(){return f()},children:"\u4E0B\u4E00\u9875"})}),x&&(0,e.jsx)("div",{children:(0,e.jsx)(Ve.Z,{type:"primary",block:!0,onClick:h,loading:o,children:(0,e.jsx)(Y.hl,{html:((i=s.attribute)===null||i===void 0?void 0:i.submitButton)||"\u63D0\u4EA4"})})}),u&&(0,e.jsxs)("div",{className:n+"-pagination-info",children:["\u7B2C",l.current,"\u9875/\u5171",l.pageSize,"\u9875"]})]})]})}var Rt=v(47673),Te=v(4107),ot=v(77883),_e=v(85482),et=v(29985),tt=v(46842),at=v(64302),nt=v(27484),le=v.n(nt),rt="YYYY-MM-DD",Ye="YYYY-MM-DD HH:mm:ss",dt="HH:mm:ss";function P(t,a){if(!!t){if(a==="date")return le()(t,rt);if(a==="dateTime")return le()(t,Ye);if(a==="time")return le()(t,dt)}}var y=function(a){var i=a.onChange,n=a.type,r=a.value,s=a.suffix,h=a.style,d=h===void 0?{width:"100%"}:h;return n==="number"?(0,e.jsx)(_e.Z,{onChange:i,value:r,style:d}):n==="date"?(0,e.jsx)(Y.Mt,{onChange:function(f,o){return i(o)},value:P(r,n),style:d}):n==="dateTime"?(0,e.jsx)(Y.Mt,{showTime:!0,onChange:function(f,o){return i(o)},value:P(r,n),style:d}):n==="time"?(0,e.jsx)(Y.jI,{value:P(r,n),onChange:function(f,o){return i(o)},style:d}):n==="mobile"?(0,e.jsx)(Te.Z,{prefix:(0,e.jsx)(et.Z,{}),onChange:function(f){return i(f.target.value)},value:r}):n==="idCard"?(0,e.jsx)(Te.Z,{prefix:(0,e.jsx)(tt.Z,{}),onChange:function(f){return i(f.target.value)},value:r,style:d}):n==="email"?(0,e.jsx)(Te.Z,{prefix:(0,e.jsx)(at.Z,{}),onChange:function(f){return i(f.target.value)},value:r,style:d}):(0,e.jsx)(Te.Z,{onChange:function(f){return i(f.target.value)},value:r,suffix:s,style:d})},E=v(49111),z=v(19650),se=v(17672),oe=function(a){var i=a.onChange,n=(0,c.useRef)(null),r=(0,c.useRef)(),s=(0,c.useRef)(),h=(0,c.useState)(0),d=(0,T.Z)(h,2),l=d[0],f=d[1];return(0,c.useEffect)(function(){var o=n.current;if(o){var u,g=new se.Z(n.current,{onBegin:function(){f(1)}});r.current=g;var x=Math.max(window.devicePixelRatio||1,1);o.width=o.offsetWidth*x,o.height=o.offsetHeight*x,(u=o.getContext("2d"))===null||u===void 0||u.scale(x,x)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:s.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:n,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:l!==2?"block":"none"}}),l===2&&(0,e.jsx)("img",{src:s.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(z.Z,{children:[l===1&&(0,e.jsx)(Ve.Z,{type:"link",onClick:function(){var u;(u=r.current)===null||u===void 0||u.clear(),f(0)},children:"\u6E05\u7A7A"}),(l===0||l===1)&&(0,e.jsx)(Ve.Z,{type:"primary",disabled:l!==1,ghost:!0,size:"small",onClick:function(){var u;i(r.current.toDataURL()),s.current=(u=r.current)===null||u===void 0?void 0:u.toDataURL(),f(2)},children:"\u5B8C\u6210"}),l===2&&(0,e.jsx)(Ve.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var u;f(0),(u=r.current)===null||u===void 0||u.clear()},children:"\u91CD\u7B7E"})]})})]})]})},J=v(3024),B=(0,pe.Pi)(function(){var t=(0,c.useContext)(S.ZX),a=t.progressBar,i=(0,A.AK)(),n=(0,A.Rk)(),r=n.progress;return a?(0,e.jsx)(J.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:i+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(r*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})});function O(t){var a=t.headerVisible,i=t.footerVisible,n=t.schema,r=(0,A.AK)(),s=function(){var d,l=(d=n.attribute)===null||d===void 0?void 0:d.headerImage;if(l)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(l),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:r,children:[(0,e.jsx)(B,{}),(0,e.jsx)("div",{className:r+"-banner",children:s()}),a&&(0,e.jsx)(Ne,{}),(0,e.jsx)($e.ZP,{locale:Be.Z,children:(0,e.jsx)(Je,{children:t.children})}),i&&(0,e.jsx)(qe,{})]})}(0,M.eC)("Survey",O,"antd");var D=v(13062),N=v(71230),re=v(89032),L=v(15746),de=v(76826);function Ze(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=(0,A.AK)("-body-question");function d(l,f){r[l]=f,f===""&&delete r[l],i((0,j.Z)({},r))}return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(l){var f=l.id,o=l.attribute,u=l.title,g=(0,de.Ck)(o==null?void 0:o.autoSize,[2,4]);return(0,e.jsxs)(N.Z,{style:{marginBottom:10},"data-id":f,children:[u&&(0,e.jsx)(L.Z,{className:h+"-option",span:4,children:l.title&&(0,e.jsx)("span",{className:h+"-option-title",children:l.title})},l.id),(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(Te.Z.TextArea,{autoSize:{minRows:g[1],maxRows:g[2]},value:r[f]||"",onChange:function(m){return d(f,m.target.value)}})})]},f)})})}(0,M.RM)("Textarea",Ze,"antd");var Ee=v(36877),I=v(13876);function R(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=s===void 0?[]:s;function d(l){var f={};l.forEach(function(o,u){var g=h[u].id;f[g]=o}),i(f)}return(0,e.jsx)(N.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(I.Z,{value:h.map(function(l){return r[l.id]}).filter(function(l){return l}),style:{width:260},options:a.dataSource,onChange:d,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,M.RM)("Cascader",R,"antd");function K(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=(0,A.AK)("-body-question");function d(l,f){r[l]=f,f===""&&delete r[l],i((0,j.Z)({},r))}return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(l){var f=l.id,o=l.attribute,u=l.title,g=o==null?void 0:o.suffix,x=o==null?void 0:o.dataType;return(0,e.jsxs)(N.Z,{style:{marginBottom:10},"data-id":f,children:[u&&(0,e.jsx)(L.Z,{className:h+"-option",span:4,children:l.title&&(0,e.jsx)("span",{className:h+"-option-title",children:l.title})},l.id),(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(y,{type:x,value:r[f]||"",onChange:function(p){return d(f,p)},suffix:g&&(0,e.jsx)("span",{className:h+"-option-suffix",children:(0,e.jsx)(Y.hl,{html:g})})})})]},f)})})}(0,M.RM)("FillBlank",K,"antd"),(0,M.RM)("MultipleBlank",K,"antd");var Q=v(86582),G=v(43358),ae=v(97268),q=v(79521),W=v(68489),me=v(54121),ve=function(a){var i=(0,W.XI)(200),n=(0,T.Z)(i,2),r=n[0],s=n[1],h=(0,W.XI)(200),d=(0,T.Z)(h,2),l=d[0],f=d[1];return(0,e.jsxs)("div",(0,j.Z)((0,j.Z)({},a.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:r,children:[a.cells.map(function(o){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},o.getCellProps()),{},{className:"td","data-id":"".concat(a.i,"-").concat(o.column.id),children:o.render("Cell")}))}),a.onDelete&&(0,e.jsx)("div",{ref:l,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(me.Z,{onClick:function(){a.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:s||f?"visible":"hidden"}})})]}))};function Ke(t){var a=t.columns,i=t.data,n=t.onAdd,r=t.onDelete,s=c.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),h=(0,q.useTable)({columns:a,data:i,defaultColumn:s},q.useBlockLayout),d=h.getTableProps,l=h.getTableBodyProps,f=h.headerGroups,o=h.rows,u=h.prepareRow;return(0,e.jsxs)("div",(0,j.Z)((0,j.Z)({},d()),{},{className:"table",children:[(0,e.jsx)("div",{children:f.map(function(g){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},g.getHeaderGroupProps()),{},{className:"tr",children:g.headers.map(function(x){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},x.getHeaderProps()),{},{className:"th",children:x.render("Header")}))})}))})}),(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},l()),{},{children:o.map(function(g,x){return u(g),(0,c.createElement)(ve,(0,j.Z)((0,j.Z)({},g),{},{key:x,i:x,onDelete:r?function(){return r(x)}:void 0}))})})),n&&(0,e.jsx)("div",{className:"footer",onClick:n,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function it(t){var a=t.schema,i=t.onChange,n=t.value||[{},{}],r=a.children,s=r===void 0?[]:r,h=(0,c.useMemo)(function(){return s.map(function(d){var l;return{Header:d.title,width:(l=d.attribute)===null||l===void 0?void 0:l.width,accessor:d.id,Cell:function(o){var u,g=o.value,x=o.row,m=o.data;if(((u=d.attribute)===null||u===void 0?void 0:u.dataType)==="select"){var p;return(0,e.jsx)(ae.Z,{placeholder:"\u8BF7\u9009\u62E9",value:g,style:{minWidth:80},onChange:function(Z){m[x.index][d.id]=Z},options:((p=d.dataSource)===null||p===void 0?void 0:p.map(function(C){return{label:C.label,value:C.value}}))||[]})}else return(0,e.jsx)(Te.Z,{value:g,onChange:function(Z){m[x.index][d.id]=Z.target.value,i((0,Q.Z)(m))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ke,{columns:h,data:n,onAdd:function(){n.push({}),i((0,Q.Z)(n))},onDelete:function(l){n.splice(l,1),i((0,Q.Z)(n))}})})}var ut=function(a){var i=a.schema,n=a.value||[{},{}],r=i.children,s=r===void 0?[]:r,h=(0,c.useMemo)(function(){return s.map(function(d){var l;return{Header:d.title,width:(l=d.attribute)===null||l===void 0?void 0:l.width,accessor:d.id,Cell:function(o){var u,g=o.value,x=o.row,m=o.data;if(((u=d.attribute)===null||u===void 0?void 0:u.dataType)==="select"){var p,C,Z=((p=d.dataSource)===null||p===void 0||(C=p.find(function(b){return b.value===g}))===null||C===void 0?void 0:C.label)||"";return(0,e.jsx)("span",{children:Z})}else return(0,e.jsx)("span",{children:g})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ke,{columns:h,data:n})})};it.Preview=ut,(0,M.RM)("MatrixAuto",it,"antd");var st=v(93224);function ct(t){var a=t.columns,i=t.data,n=c.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,q.useTable)({columns:a,data:i,defaultColumn:n},q.useBlockLayout),s=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,l=r.rows,f=r.prepareRow;return(0,e.jsxs)("div",(0,j.Z)((0,j.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(u){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},h()),{},{children:l.map(function(o){return f(o),(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(u){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},u.getCellProps()),{},{className:"td","data-id":"".concat(o.original.rowId,"-").concat(u.column.id),children:u.render("Cell")}))})}))})}))]}))}function vt(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=s===void 0?[]:s,d=a.row,l=d===void 0?[]:d,f=(0,c.useMemo)(function(){var u,g=h.map(function(x){var m;return{Header:x.title,width:(m=x.attribute)===null||m===void 0?void 0:m.width,accessor:x.id,Cell:function(C){var Z=C.value,b=C.row,$=C.data;return(0,e.jsx)(y,{value:Z,onChange:function(w){var X={};$.forEach(function(ue,Ce){var ye=ue.title,Me=ue.rowId,Ae=(0,st.Z)(ue,["title","rowId"]);b.index===Ce&&(Ae[x.id]=w),X[Me]=Ae}),i(X)}})}}});return g.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=a.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),g},[]),o=l.map(function(u,g){var x=u.id,m=r[x]||{};return(0,j.Z)({title:u.title,rowId:x},m)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(ct,{columns:f,data:o})})}var Bt=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,h=s===void 0?[]:s,d=i.row,l=d===void 0?[]:d,f=(0,c.useMemo)(function(){var u,g=h.map(function(x){var m;return{Header:x.title,width:(m=x.attribute)===null||m===void 0?void 0:m.width,accessor:x.id,Cell:function(C){var Z=C.value;return(0,e.jsx)("span",{children:Z})}}});return g.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(u=i.attribute)===null||u===void 0?void 0:u.width,accessor:"title"}),g},[]),o=l.map(function(u,g){var x=u.id,m=r[x]||{};return(0,j.Z)({title:u.title,rowId:x},m)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(ct,{columns:f,data:o})})};vt.Preview=Bt,(0,M.RM)("MatrixFillBlank",vt,"antd");var Ma=v(88983),Qe=v(47933);function ht(t){var a=t.columns,i=t.data,n=c.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,q.useTable)({columns:a,data:i,defaultColumn:n},q.useBlockLayout),s=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,l=r.rows,f=r.prepareRow;return(0,e.jsxs)("div",(0,j.Z)((0,j.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(u){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},h()),{},{children:l.map(function(o){return f(o),(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(u){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},u.getCellProps()),{},{className:"td",children:u.render("Cell")}))})}))})}))]}))}function ft(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=s===void 0?[]:s,d=a.row,l=d===void 0?[]:d,f=(0,c.useMemo)(function(){var u,g=h.map(function(x){var m;return{Header:x.title,width:(m=x.attribute)===null||m===void 0?void 0:m.width,accessor:x.id,Cell:function(C){var Z=C.value,b=C.row,$=C.data;return(0,e.jsx)("div",{onClick:function(){var w={};$.forEach(function(X,ue){var Ce=X.title,ye=X.rowId,Me=(0,st.Z)(X,["title","rowId"]);b.index===ue?(w[ye]={},w[ye][x.id]=!0):w[ye]=Me}),i(w)},children:(0,e.jsx)(Qe.ZP,{checked:!!Z})})}}});return g.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=a.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),g},[]),o=l.map(function(u,g){var x=u.id,m=r[x]||{};return(0,j.Z)({title:u.title,rowId:x},m)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(ht,{columns:f,data:o})})}var Tt=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,h=s===void 0?[]:s,d=i.row,l=d===void 0?[]:d,f=(0,c.useMemo)(function(){var u,g=h.map(function(x){var m;return{Header:x.title,width:(m=x.attribute)===null||m===void 0?void 0:m.width,accessor:x.id,Cell:function(C){var Z=C.value,b=C.row,$=C.data;return Z?(0,e.jsx)("div",{children:(0,e.jsx)(Qe.ZP,{checked:!!Z,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return g.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=i.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),g},[]),o=l.map(function(u,g){var x=u.id,m=r[x]||{};return(0,j.Z)({title:u.title,rowId:x},m)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(ht,{columns:f,data:o})})};ft.Preview=Tt,(0,M.RM)("MatrixRadio",ft,"antd");var Sa=v(63185),Ge=v(9676);function mt(t){var a=t.columns,i=t.data,n=c.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,q.useTable)({columns:a,data:i,defaultColumn:n},q.useBlockLayout),s=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,l=r.rows,f=r.prepareRow;return(0,e.jsxs)("div",(0,j.Z)((0,j.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(u){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},u.getHeaderProps()),{},{className:"th",children:u.render("Header")}))})}))})}),(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},h()),{},{children:l.map(function(o){return f(o),(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(u){return(0,e.jsx)("div",(0,j.Z)((0,j.Z)({},u.getCellProps()),{},{className:"td",children:u.render("Cell")}))})}))})}))]}))}function xt(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=s===void 0?[]:s,d=a.row,l=d===void 0?[]:d,f=(0,c.useMemo)(function(){var u,g=h.map(function(x){var m;return{Header:x.title,width:(m=x.attribute)===null||m===void 0?void 0:m.width,accessor:x.id,Cell:function(C){var Z=C.value,b=C.row,$=C.data;return(0,e.jsx)("div",{onClick:function(w){var X=!Z,ue={};$.forEach(function(Ce,ye){var Me=Ce.title,Ae=Ce.rowId,He=(0,st.Z)(Ce,["title","rowId"]);b.index===ye&&(X?He[x.id]=!0:delete He[x.id]),ue[Ae]=He}),i(ue)},children:(0,e.jsx)(Ge.Z,{checked:!!Z})})}}});return g.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=a.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),g},[]),o=l.map(function(u,g){var x=u.id,m=r[x]||{};return(0,j.Z)({title:u.title,rowId:x},m)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(mt,{columns:f,data:o})})}var At=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,h=s===void 0?[]:s,d=i.row,l=d===void 0?[]:d,f=(0,c.useMemo)(function(){var u,g=h.map(function(x){var m;return{Header:x.title,width:(m=x.attribute)===null||m===void 0?void 0:m.width,accessor:x.id,Cell:function(C){var Z=C.value,b=C.row,$=C.data;return Z?(0,e.jsx)("div",{children:(0,e.jsx)(Ge.Z,{checked:!!Z,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return g.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((u=i.attribute)===null||u===void 0?void 0:u.width)||150,accessor:"title"}),g},[]),o=l.map(function(u,g){var x=u.id,m=r[x]||{};return(0,j.Z)({title:u.title,rowId:x},m)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(mt,{columns:f,data:o})})};xt.Preview=At,(0,M.RM)("MatrixCheckbox",xt,"antd");var he=v(32059);function Ot(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=a.attribute,d=24/((h==null?void 0:h.columns)||1),l=(0,A.AK)("-body-question");function f(o,u,g){var x,m,p=(x=a.children)===null||x===void 0?void 0:x.find(function(Z){return Z.id===o}),C=p==null||(m=p.attribute)===null||m===void 0?void 0:m.dataType;u?r[o]=C?g:!0:delete r[o],i((0,j.Z)({},r))}return(0,c.useEffect)(function(){s==null||s.forEach(function(o){var u;(u=o.attribute)!==null&&u!==void 0&&u.defaultChecked&&Object.keys(r).length===0&&i((0,he.Z)({},o.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(N.Z,{children:s==null?void 0:s.map(function(o){var u,g,x=o.title,m=o.id,p=(u=o.attribute)===null||u===void 0?void 0:u.dataType,C=(g=o.attribute)===null||g===void 0?void 0:g.suffix;return(0,e.jsxs)(L.Z,{span:d,className:l+"-option","data-id":m,children:[(0,e.jsx)(Ge.Z,{value:m,checked:r.hasOwnProperty(m),onChange:function(b){return f(m,b.target.checked)},children:(0,e.jsx)(Y.hl,{html:x})}),p&&(0,e.jsx)(y,{value:r[m],style:{maxWidth:120},type:p,onChange:function(b){return f(m,!0,b)},suffix:C&&(0,e.jsx)("span",{className:l+"-option-suffix",children:(0,e.jsx)(Y.hl,{html:C})})})]},m)})})})}(0,M.RM)("Checkbox",Ot,"antd");function $t(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=s===void 0?[]:s;function d(l){var f,o=(f=a.children)===null||f===void 0?void 0:f.find(function(u){return u.id===l});o&&i((0,he.Z)({},l,!0))}return(0,c.useEffect)(function(){var l;(l=a.children)===null||l===void 0||l.forEach(function(f){var o,u=f.id;(o=f.attribute)!==null&&o!==void 0&&o.defaultChecked&&Object.keys(r).length===0&&i((0,he.Z)({},u,!0))})},[]),(0,e.jsx)(N.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(ae.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){i(void 0)},showSearch:!0,value:Object.keys(r)[0],filterOption:function(f,o){return(o==null?void 0:o.label).toLowerCase().indexOf(f.toLowerCase())!==-1},onChange:d,style:{width:260},options:h.map(function(l){return{label:l.title,value:l.id}})})})})}(0,M.RM)("Select",$t,"antd");var zt=Qe.ZP.Group;function Ht(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=a.attribute,d=24/((h==null?void 0:h.columns)||1),l=(0,A.AK)("-body-question");function f(u){var g,x=u.target.value,m=(g=a.children)===null||g===void 0?void 0:g.find(function(b){return b.id===x});if(m){var p=m.id,C=m.attribute,Z=C==null?void 0:C.dataType;i((0,he.Z)({},u.target.value,Z?r[p]:!0))}}function o(u,g){i((0,he.Z)({},u,g))}return(0,c.useEffect)(function(){var u;(u=a.children)===null||u===void 0||u.forEach(function(g){var x,m=g.id,p=g.attribute,C=p==null?void 0:p.dataType;(x=g.attribute)!==null&&x!==void 0&&x.defaultChecked&&Object.keys(r).length===0&&i((0,he.Z)({},m,C?r[m]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(zt,{onChange:f,value:Object.keys(r)[0],style:{width:"100%"},children:(0,e.jsx)(N.Z,{children:s==null?void 0:s.map(function(u){var g,x,m=u.title,p=u.id,C=(g=u.attribute)===null||g===void 0?void 0:g.dataType,Z=(x=u.attribute)===null||x===void 0?void 0:x.suffix;return(0,e.jsxs)(L.Z,{span:d,className:l+"-option","data-id":p,children:[(0,e.jsx)(Qe.ZP,{value:p,className:"radio-item",children:(0,e.jsx)(Y.hl,{html:m})}),C&&(0,e.jsx)(y,{value:r[p],type:C,style:{maxWidth:120},onChange:function($){return o(p,$)},suffix:Z&&(0,e.jsx)("span",{className:l+"-option-suffix",children:(0,e.jsx)(Y.hl,{html:Z})})})]},p)})})})})}(0,M.RM)("Radio",Ht,"antd");var Na=v(48736),gt=v(27049);function pt(t){var a=(0,A.AK)("-body-question");return(0,e.jsx)("div",{className:a,children:(0,e.jsx)(gt.Z,{plain:!0})})}pt.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,M.RM)("SplitLine",pt,"antd");function jt(t){var a=(0,A.AK)("-body-question");return(0,e.jsx)("div",{className:a,children:(0,e.jsx)(Y.hl,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}jt.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,M.RM)("Remark",jt,"antd");var Pa=v(34792),Lt=v(48086),wa=v(43185),Ct=v(94412),Wt=v(43347),Ut=Ct.Z.Dragger;function Zt(t){var a=t.schema,i=t.onChange,n=t.value,r=t.readOnly,s=a.children,h=(0,A.Al)(),d=(0,c.useState)(),l=(0,T.Z)(d,2),f=l[0],o=l[1];(0,c.useEffect)(function(){var x=a.children[0].id,m=n&&n[x]||[];f==null&&m.length>0&&W.hi.loadFiles({ids:m}).then(function(p){o(p==null?void 0:p.map(function(C){return{name:C.originalName,uid:C.id,status:"done"}}))})},[n]);var u=function(){var x=(0,H.Z)(V().mark(function m(p){var C,Z,b,$;return V().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:C=p.onSuccess,Z=p.onError,b=p.file,$=p.onProgress,h.onUpload&&h.onUpload(b,function(X){$&&$({percent:X.loaded/X.total*100})}).then(function(X){if(X.success&&C&&C(X.data),!X.success&&Z){var ue=new Error("Some error");Z({event:ue})}});case 2:case"end":return w.stop()}},m)}));return function(p){return x.apply(this,arguments)}}(),g=function(m,p){if(o(m.fileList),(m.file.status==="removed"||m.file.status==="done")&&!m.fileList.find(function(Z){return Z.status!=="done"})){var C=m.fileList.filter(function(Z){return Z.status==="done"}).map(function(Z){var b;return((b=Z.response)===null||b===void 0?void 0:b.id)||Z.uid});C.length===0?i(void 0):i((0,he.Z)({},p,C))}};return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(x){var m=x.id,p=x.attribute,C=[];if(p){var Z=p.maxFileCount,b=p.maxFileSize,$=p.fileAccept;Z&&C.push("\u6700\u591A\u4E0A\u4F20".concat(Z,"\u4E2A")),b&&C.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(b,"M\u4EE5\u5185")),$&&C.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat($))}return(0,e.jsxs)(Ut,{multiple:!0,disabled:r,maxCount:(p==null?void 0:p.maxFileCount)||20,accept:p==null?void 0:p.fileAccept,beforeUpload:function(w){return p!=null&&p.maxFileSize&&w.size>p.maxFileSize*1024*1024?(Lt.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(p.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Ct.Z.LIST_IGNORE):!0},customRequest:u,onChange:function(w){return g(w,m)},fileList:f,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Wt.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:C.join(",")})]},m)})})}var Yt=function(a){var i=(0,c.useState)(),n=(0,T.Z)(i,2),r=n[0],s=n[1];return(0,c.useEffect)(function(){var h=Object.values(a.value).reduce(function(d,l){return d.push.apply(d,(0,Q.Z)(l)),d},[]);W.hi.loadFiles({ids:h}).then(function(d){s(d)})},[]),(0,e.jsx)("div",{className:"preview",children:r==null?void 0:r.map(function(h){return(0,e.jsx)("a",{onClick:function(){return W.hi.download("/api/files/".concat(h.id))},children:h.originalName},h.id)})})};Zt.Preview=Yt,(0,M.RM)("Upload",Zt,"antd");var Va=v(34669),Kt=v(61873);function yt(t){var a=t.schema,i=t.onChange,n=a.children,r=(0,A.Al)(),s=(0,c.useState)(0),h=(0,T.Z)(s,2),d=h[0],l=h[1];function f(o,u){var g="signature-".concat(u,"-").concat((0,S.kb)(6),".png");if(!r.onUpload){i((0,he.Z)({},u,[g]));return}fetch(o).then(function(x){return x.blob()}).then(function(x){var m=new File([x],g,{type:"image/png"});r.onUpload(m,function(p){l(p.loaded/p.total*100)}).then(function(p){p.success&&p.data.id&&i((0,he.Z)({},u,[p.data.id]))})})}return(0,e.jsx)("div",{children:n==null?void 0:n.map(function(o){var u=o.id,g=o.title;return(0,e.jsxs)(N.Z,{gutter:[10,0],"data-id":u,children:[g&&(0,e.jsx)(L.Z,{span:24},o.id),(0,e.jsxs)(L.Z,{span:24,children:[(0,e.jsx)(oe,{onChange:function(m){return f(m,u)}}),d>0&&d!==100&&(0,e.jsx)(Kt.Z,{percent:d,size:"small",showInfo:!1})]})]},u)})})}yt.Preview=function(t){var a=t.value,i;return a&&(i=Object.values(a)[0][0]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("img",{src:"/api/files/".concat(i)})})},(0,M.RM)("Signature",yt,"antd");var Ia=v(96433),lt=v(2864),bt=v(41687),Qt=v(46870),Ft=v(18613),Gt=v(57206),Xt={1:(0,e.jsx)(bt.Z,{}),2:(0,e.jsx)(bt.Z,{}),3:(0,e.jsx)(Qt.Z,{}),4:(0,e.jsx)(Ft.Z,{}),5:(0,e.jsx)(Ft.Z,{})};function kt(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=s===void 0?[]:s;function d(f,o){i((0,he.Z)({},f,o))}var l=function(o){var u=o.attribute||{},g=o.id,x=u.scope,m=x===void 0?"[1,5]":x,p=u.scoreStyle,C=m.replace("[","").replace("]","").split(","),Z=(0,T.Z)(C,2),b=Z[0],$=Z[1];return p==="heart"?(0,e.jsx)(lt.Z,{defaultValue:parseInt(b),character:(0,e.jsx)(Gt.Z,{}),style:{color:"#ea7463"},count:parseInt($),onChange:function(w){return d(g,w)}},o.id):p==="smile"?(0,e.jsx)(lt.Z,{defaultValue:parseInt(b),character:function(w){var X=w.index;return Xt[X+1]},count:parseInt($),onChange:function(w){return d(g,w)}},o.id):(0,e.jsx)(lt.Z,{defaultValue:parseInt(b),count:parseInt($),onChange:function(w){return d(g,w)}},o.id)};return(0,e.jsx)(N.Z,{children:h.map(function(f){return l(f)})})}(0,M.RM)("Score",kt,"antd");var Da=v(22385),Jt=v(31097),Et=v(55686),qt=ae.Z.Option;function Mt(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=s===void 0?[]:s,d=h[0].id,l=(0,c.useState)([]),f=(0,T.Z)(l,2),o=f[0],u=f[1];function g(p){d&&i((0,he.Z)({},d,p))}var x=(0,W.zE)(function(p){W.hi.userSelect({name:p,selected:r[d]||[]}).then(function(C){C.success&&u(C.data)})},5),m=function(C){g(C?o.map(function(Z){return Z.userId}):void 0)};return(0,c.useEffect)(function(){var p;x(""),(p=a.children)===null||p===void 0||p.forEach(function(C){var Z,b=C.id;(Z=C.attribute)!==null&&Z!==void 0&&Z.defaultChecked&&Object.keys(r).length===0&&i((0,he.Z)({},b,!0))})},[]),(0,e.jsx)(N.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(ae.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,mode:"multiple",onClear:function(){i(void 0)},value:r[d]||[],onSearch:x,showSearch:!0,onChange:g,filterOption:!1,dropdownRender:function(C){return(0,e.jsxs)("div",{children:[C,(0,e.jsx)(gt.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(Ge.Z,{onChange:function(b){m(b.target.checked)},children:"\u5168\u9009"})})]})},children:o.map(function(p){return(0,e.jsx)(qt,{value:p.userId,label:p.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Et.Z,{user:p,size:20})}),p.name," ",p.deptName&&"(".concat(p.deptName,")")]})},p.userId)})})})})}var _t=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,h=s===void 0?[]:s,d=h[0].id,l=(0,c.useState)([]),f=(0,T.Z)(l,2),o=f[0],u=f[1];return(0,c.useEffect)(function(){W.hi.userSelect({selected:r[d]||[],name:"^_^"}).then(function(g){g.success&&u(g.data)})},[r]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(z.Z,{children:o.map(function(g){return(0,e.jsx)(Jt.Z,{title:g.name,children:(0,e.jsx)(Et.Z,{user:g,size:24})},g.userId)})})})};Mt.Preview=_t,(0,M.RM)("User",Mt,"antd");var Ra=v(71153),ea=v(60331),Ba=v(62999),ta=v(51753),aa=v(60780),na=v.n(aa);function St(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=s===void 0?[]:s,d=h[0].id,l=(0,c.useState)([]),f=(0,T.Z)(l,2),o=f[0],u=f[1];function g(m){d&&((m==null?void 0:m.length)===0?i(void 0):i((0,he.Z)({},d,m==null?void 0:m.map(function(p){return p.value}))))}var x=(0,c.useMemo)(function(){return na()(o.map(function(m){return{title:m.name,key:m.id,value:m.id,parentId:m.parentId}}),{parentProperty:"parentId",customID:"key"})},[o]);return(0,c.useEffect)(function(){W.hi.deptSelect({}).then(function(m){m.success&&u(m.data)})},[]),(0,e.jsx)(N.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(ta.Z,{style:{width:"100%"},treeCheckable:!0,value:(r[d]||[]).map(function(m){return{value:m}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:x,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:g,showSearch:!1})})})}var ra=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,h=s===void 0?[]:s,d=h[0].id,l=(0,c.useState)([]),f=(0,T.Z)(l,2),o=f[0],u=f[1];return(0,c.useEffect)(function(){W.hi.deptSelect({selected:r[d]||[],name:"^_^"}).then(function(g){g.success&&u(g.data)})},[r]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(z.Z,{children:o.map(function(g){return(0,e.jsx)(ea.Z,{color:"blue",children:g.name},g.id)})})})};St.Preview=ra,(0,M.RM)("Dept",St,"antd");function ia(t){for(var a=[],i=2;i<t+2;i++)a.push(i/(t+2));return a}function ua(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,h=s===void 0?[]:s,d=h[0].id,l=(0,c.useState)(function(){return r[d]||-1}),f=(0,T.Z)(l,2),o=f[0],u=f[1];function g(m){i((0,he.Z)({},d,m))}(0,c.useEffect)(function(){Object.keys(r).length>0&&u(r[d])},[r,d]);var x=function(p){var C=r[d],Z=ia(o||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){u(C)},children:[(0,e.jsx)("div",{className:"nps-container",children:[0,1,2,3,4,5,6,7,8,9,10].map(function(b){var $={background:"#2672ff",opacity:Z[b]};return(0,e.jsx)("div",{className:"nps-item",style:o>=b?$:void 0,onMouseOver:function(){u(b)},onClick:function(){return g(b)},children:b},b)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,e.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]},p.id)};return(0,e.jsx)(N.Z,{children:h.map(function(m){return x(m)})})}(0,M.RM)("Nps",ua,"antd");var Nt=v(80705),sa=v(99439),la=v(66607),oa=v.n(la);le().extend(oa()),Number.prototype.isBetween=function(a,i,n){var r=this,s=parseFloat(a);isNaN(s)&&(s=-99999);var h=parseFloat(i);return isNaN(h)&&(h=99999),!(r>h||r<s||n[0]==="("&&s==r||n[1]===")"&&h==r)};function da(t,a){var i=Xe(t),n=Number(a);return n.isBetween(t.substring(1,t.indexOf(",")),t.substring(t.indexOf(",")+1,t.length-1),i)}function ca(t,a){if(!a)return!0;var i=le()(a),n=Oe(t.substring(1,t.indexOf(",")),!0),r=Oe(t.substring(t.indexOf(",")+1,t.length-1),!1),s=Xe(t);return i.isBetween(n,r,null,s)}function va(t,a){if(!a)return!0;var i=le()(a),n=Oe(t.substring(1,t.indexOf(",")),!0,"YYYY-MM-DD hh:mm:ss"),r=Oe(t.substring(t.indexOf(",")+1,t.length-1),!1,"YYYY-MM-DD hh:mm:ss"),s=Xe(t);return i.isBetween(n,r,null,s)}function ha(t,a){if(!a)return!0;var i="2018-02-08 ",n=le()(i+a),r=Oe(i+t.substring(1,t.indexOf(",")),!0,"YYYY-MM-DD hh:mm:ss"),s=Oe(i+t.substring(t.indexOf(",")+1,t.length-1),!1,"YYYY-MM-DD hh:mm:ss"),h=Xe(t);return n.isBetween(r,s,null,h)}function Oe(t,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"YYYY-MM-DD",n,r=le()(le()().format(i));return t==="undefined"?a?n=le()("1900-01-01"):n=le()("2999-01-01"):t.indexOf("T")!==-1?t==="T"?n=r:/T-\d+/.test(t)?n=r.subtract(parseInt(t.match(/\d+/)[0]),"days"):/T\+\d+/.test(t)&&(n=r.add(parseInt(t.match(/\d+/)[0]),"days")):/\d+-\d+-\d+/.test(t)&&(n=le()(t)),n}function Xe(t){var a=t[0],i=t[t.length-1],n="".concat(a).concat(i);return n}function fa(t,a){var i,n=a.id,r=[];if((i=a.parent)!==null&&i!==void 0&&i.type.startsWith("Matrix"))if(a.parent.type==="MatrixAuto"&&Array.isArray(t))t.forEach(function(l,f){r.push(["".concat(f,"-").concat(n),l[a.id]])});else{var s;(s=a.parent.row)===null||s===void 0||s.forEach(function(l){t[l.id]?r.push(["".concat(l.id,"-").concat(n),t[l.id][a.id]]):r.push(["".concat(l.id,"-").concat(n),void 0])})}else{var h,d=(h=a.parent)===null||h===void 0?void 0:h.type;d==="Radio"||d==="Checkbox"?Object.keys(t).includes(a.id)&&r.push([a.id,t[a.id]]):r.push([a.id,t[a.id]])}return r}function Pt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function ma(t){return!!(Pt(t)&&Number.isInteger(parseFloat(t)))}function Ie(t){var a=t.errMsg,i=t.schema,n=t.regEx,r=t.value;return i?Pe({schema:i,value:r,errMsg:a,isValid:function(h){return h?n.test("".concat(h)):!0}}):null}function Pe(t){var a=t.value,i=t.schema,n=t.isValid,r=t.errMsg;return!i||a==null?null:fa(a,i).map(function(s){var h=(0,T.Z)(s,2),d=h[0],l=h[1];return n(l)?null:"".concat(d,"^").concat(r)}).filter(function(s){return s})[0]}(0,sa.au)({required:function(a,i){var n=i.schema;return i&&i.required===!1?null:(0,Nt.xb)(a)||typeof a=="object"&&Object.keys(a).length===0?"\u4E0D\u80FD\u4E3A\u7A7A":Pe({schema:n,value:a,errMsg:"\u4E0D\u80FD\u4E3A\u7A7A",isValid:function(s){return!(0,Nt.xb)(s)}})},answerLimit:function(a,i){var n,r=i.schema,s=r==null||(n=r.attribute)===null||n===void 0?void 0:n.answerLimit;if(!s)return null;var h=s.slice(1,s.length-1).split(","),d=parseInt(h[0]||"0"),l=parseInt(h[1]||"0"),f=Object.keys(a||{}).length;return a&&(f<d&&d!==0||f>l&&l!==0)?d===0?"\u6700\u591A\u9009\u62E9".concat(l,"\u9879"):l===0?"\u6700\u5C11\u9009\u62E9".concat(d,"\u9879"):"\u6700\u5C11\u9009\u62E9".concat(d,"\u9879,\u6700\u591A\u9009\u62E9").concat(l,"\u9879"):null},number:function(a,i){var n,r=i.schema,s=r==null||(n=r.attribute)===null||n===void 0?void 0:n.numericScale;if(!r)return null;var h="\u8BF7\u8F93\u5165\u6570\u5B57";return s===0?h="\u8BF7\u8F93\u5165\u6574\u6570":s&&s>0&&(h="\u8BF7\u4FDD\u7559".concat(s,"\u4F4D\u5C0F\u6570")),Pe({errMsg:h,schema:r,value:a,isValid:function(l){return!(l!==void 0&&(!Pt(l)||s===0&&ma(l)||s!==void 0&&s>0&&("".concat(l).split(".")[1]||"").length>s))}})},date:function(a,i){var n=i.schema;return Ie({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F",schema:n,regEx:/^(?:(?:1[6-9]|[2-9][0-9])[0-9]{2}([-/.]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:(?:1[6-9]|[2-9][0-9])(?:0[48]|[2468][048]|[13579][26])|(?:16|[2468][048]|[3579][26])00)([-/.]?)0?2\2(?:29))(\s+([01][0-9]:|2[0-3]:)?[0-5][0-9]:[0-5][0-9])?$/,value:a})},dateTime:function(a,i){var n=i.schema;return Ie({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F\u65F6\u95F4",schema:n,regEx:/^\d{4}[-]([0][1-9]|(1[0-2]))[-]([1-9]|([012]\d)|(3[01]))\s(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:a})},time:function(a,i){var n=i.schema;return Ie({errMsg:"\u8BF7\u8F93\u5165\u65F6\u95F4",schema:n,regEx:/^(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:a})},mobile:function(a,i){var n=i.schema;return Ie({errMsg:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",schema:n,regEx:/^1([358][0-9]|4[579]|66|7[01235678]|9[189])[0-9]{8}$/,value:a})},decimal:function(a,i){var n=i.schema;return Ie({errMsg:"\u8BF7\u8F93\u5165\u6570\u5B57",schema:n,regEx:/^[+-]?\d+(\.\d+)?$/,value:a})},email:function(a,i){var n=i.schema;return Ie({errMsg:"\u90AE\u4EF6\u683C\u5F0F\u4E0D\u6B63\u786E",schema:n,regEx:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,value:a})},idCard:function(a,i){var n=i.schema;return Pe({errMsg:"\u8EAB\u4EFD\u8BC1\u683C\u5F0F\u4E0D\u6B63\u786E",schema:n,value:a,isValid:function(s){return!(s&&!ga("".concat(s)))}})},chinese:function(a,i){var n=i.schema;return Ie({errMsg:"\u8BF7\u8F93\u5165\u6C49\u5B57",schema:n,regEx:/^[\u4e00-\u9fa5]+$/,value:a})},alphabet:function(a,i){var n=i.schema;return Ie({errMsg:"\u8BF7\u8F93\u5165\u5B57\u6BCD",schema:n,regEx:/^[a-zA-Z]+$/,value:a})},textLimit:function(a,i){var n,r=i.schema,s=r==null||(n=r.attribute)===null||n===void 0?void 0:n.textLimit;if(!s)return null;var h=s.slice(1,s.length-1).split(","),d=parseInt(h[0]||"0"),l=parseInt(h[1]||"0"),f=Pe({errMsg:"\u8BF7\u8F93\u5165".concat(d,"~").concat(l,"\u4E2A\u5B57"),schema:r,value:a,isValid:function(u){return!(u&&("".concat(u).length<d||"".concat(u).length>l))}});return f},scope:function(a,i){var n,r,s=i.schema,h=s==null||(n=s.attribute)===null||n===void 0?void 0:n.scope,d=s==null||(r=s.attribute)===null||r===void 0?void 0:r.dataType;if(h&&d){if(d==="number")return Pe({errMsg:"\u6570\u503C\u8303\u56F4\u4E0D\u6B63\u786E ".concat(h),schema:s,value:a,isValid:function(f){return!(f&&!da(h,"".concat(f)))}});if(d==="date")return Pe({errMsg:"\u65E5\u671F\u8303\u56F4\u4E0D\u6B63\u786E ".concat(h),schema:s,value:a,isValid:function(f){return!(f&&!ca(h,"".concat(f)))}});if(d==="dateTime")return Pe({errMsg:"\u65E5\u671F\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(h),schema:s,value:a,isValid:function(f){return!(f&&!va(h,"".concat(f)))}});if(d==="time")return Pe({errMsg:"\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(h),schema:s,value:a,isValid:function(f){return!(f&&!ha(h,"".concat(f)))}})}return null}});function xa(t){var a=t.substring(6,8),i=t.substring(8,10),n=t.substring(10,12),r=new Date(parseFloat(a),parseFloat(i)-1,parseFloat(n));return!(r.getFullYear()-1900!==parseFloat(a)||r.getMonth()!==parseFloat(i)-1||r.getDate()!==parseFloat(n))}function ga(t){var a=t;if(t.length!==15&&t.length!==18)return!1;if(t.length===15)return xa(a);var i={11:"\u5317\u4EAC",12:"\u5929\u6D25",13:"\u6CB3\u5317",14:"\u5C71\u897F",15:"\u5185\u8499\u53E4",21:"\u8FBD\u5B81",22:"\u5409\u6797",23:"\u9ED1\u9F99\u6C5F ",31:"\u4E0A\u6D77",32:"\u6C5F\u82CF",33:"\u6D59\u6C5F",34:"\u5B89\u5FBD",35:"\u798F\u5EFA",36:"\u6C5F\u897F",37:"\u5C71\u4E1C",41:"\u6CB3\u5357",42:"\u6E56\u5317 ",43:"\u6E56\u5357",44:"\u5E7F\u4E1C",45:"\u5E7F\u897F",46:"\u6D77\u5357",50:"\u91CD\u5E86",51:"\u56DB\u5DDD",52:"\u8D35\u5DDE",53:"\u4E91\u5357",54:"\u897F\u85CF ",61:"\u9655\u897F",62:"\u7518\u8083",63:"\u9752\u6D77",64:"\u5B81\u590F",65:"\u65B0\u7586",71:"\u53F0\u6E7E",81:"\u9999\u6E2F",82:"\u6FB3\u95E8",91:"\u56FD\u5916 "},n=!0;if(!a||!/^([1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx])|([1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2})$/i.test(a))n=!1;else if(!i[a.substr(0,2)])n=!1;else if(a.length>18)n=!1;else if(a.length===18){for(var r=a.split(""),s=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],h=[1,0,"X",9,8,7,6,5,4,3,2],d=0,l=0,f=0,o=0;o<17;o+=1)l=parseInt(r[o],10),f=s[o],d+=l*f;var u=r[17].toUpperCase()==="X"?"X":Number(r[17]);h[d%11]!==u&&(n=!1)}return n}function pa(t,a){}var ja=v(69610),Ca=v(54941),Za=function(){function t(){(0,ja.Z)(this,t),this.progress=0,this.makeObservable()}return(0,Ca.Z)(t,[{key:"makeObservable",value:function(){(0,_.Ou)(this,{progress:_.LO.ref,changeProgress:_.aD})}},{key:"changeProgress",value:function(i){this.progress=i}}]),t}(),wt=(0,c.forwardRef)(function(t,a){var i=t.theme,n=i===void 0?M.uH:i,r=t.footerVisible,s=r===void 0?!0:r,h=t.headerVisible,d=h===void 0?!0:h,l=t.initialValues,f=t.readOnly,o=t.loading,u=t.onChange,g=t.questionNumber,x=g===void 0?!0:g,m=t.onUpload,p=t.paginationVisible,C=p===void 0?!0:p,Z=t.fieldPermission,b=t.progressBar,$=b===void 0?!1:b,ie=(0,c.useMemo)(function(){return new Za},[]),w=(0,c.useMemo)(function(){return(0,S.Gt)(t.schema)},[t.schema]),X=(0,c.useMemo)(function(){var ee={},te=function U(k){ee[k.id]=k.title,k.children&&k.children.forEach(U)};return te(w),document.title=w.title,ee},[w]),ue=(0,c.useMemo)(function(){return C?(0,S._T)(t.schema):[t.schema.children]},[t.schema,C]),Ce=(0,c.useState)(function(){return(0,S.dr)(t.schema)}),ye=(0,T.Z)(Ce,2),Me=ye[0],Ae=ye[1],He=(0,c.useMemo)(function(){return(0,S.R6)(t.schema)},[t.schema]),fe=(0,c.useMemo)(function(){return(0,be.Np)({initialValues:l,readOnly:f,effects:function(te){(0,be.dQ)(function(){if(ue.map(function(xe,ke){return ke}).slice(1).forEach(function(xe){return Le(xe,"hidden")}),Z){var U=[],k=[];Object.entries(Z).forEach(function(xe){var ke=(0,T.Z)(xe,2),It=ke[0],Dt=ke[1];Dt===0?U.push(It):Dt===1&&k.push(It)}),U.length>0&&fe.setFieldState("*(".concat(U.join(","),")"),function(xe){return xe.display="none"}),k.length>0&&fe.setFieldState("*(".concat(k.join(","),")"),function(xe){return xe.pattern="readPretty"})}var we=0,De=0;fe.query("*").forEach(function(xe){xe.displayName==="Field"&&!xe.address.toString().startsWith("_")&&(xe.display==="visible"&&we++,(0,S.xb)(xe.value)||De++)}),u&&(ie.changeProgress(De/we),u(void 0,De/we))}),(0,be.pO)(function(U){var k=0,we=0;fe.query("*").forEach(function(De){De.displayName==="Field"&&!De.address.toString().startsWith("_")&&(De.display==="visible"&&k++,(0,S.xb)(De.value)||we++)}),u&&(ie.changeProgress(we/k),u((0,_.ZN)(U.values),we/k))}),pa(w,te)}})},[]),ba=(0,c.useCallback)(function(ee){return fe.validate("*(".concat(ue[ee].map(function(te){return te.id}).join(","),")"))},[]),Le=(0,c.useCallback)(function(ee){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"visible";fe.query("*(".concat(ue[ee].map(function(U){return U.id}).join(","),")")).forEach(function(U){U.display=te})},[]),Fa=(0,c.useCallback)(function(){Ae(function(ee){var te=ee.current-1;return Le(te,"hidden"),Le(te-1,"visible"),(0,j.Z)((0,j.Z)({},ee),{},{current:ee.current-1})})},[]),Ea=(0,c.useCallback)((0,H.Z)(V().mark(function ee(){var te;return V().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return te=Me.current-1,k.prev=1,k.next=4,ba(te);case 4:Ae(function(we){return Le(te,"hidden"),Le(te+1,"visible"),(0,j.Z)((0,j.Z)({},we),{},{current:Me.current+1})}),k.next=9;break;case 7:k.prev=7,k.t0=k.catch(1);case 9:case"end":return k.stop()}},ee,null,[[1,7]])})),[Me]),Vt=(0,c.useCallback)((0,H.Z)(V().mark(function ee(){return V().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.prev=0,U.next=3,fe.validate();case 3:return t.onSubmit&&t.onSubmit((0,_.ZN)(fe.values)),U.abrupt("return",{values:(0,_.ZN)(fe.values)});case 7:U.prev=7,U.t0=U.catch(0);case 9:case"end":return U.stop()}},ee,null,[[0,7]])})),[]);return(0,c.useImperativeHandle)(a,function(){return{submit:function(){return Vt()},reset:function(){fe.reset()},setValues:function(te){fe.setValues(te,"overwrite")},toggleReadOnly:function(te){fe.setState(function(U){U.pattern=te?"readPretty":"editable"})},getValues:function(){return fe.values}}}),(0,e.jsx)(pe.RV,{form:fe,children:(0,e.jsx)(F.ZX.Provider,{value:(0,c.useMemo)(function(){return{theme:n,schema:w,footerVisible:s,questionNumber:x,headerVisible:d,pagination:Me,optionTypes:He,onNext:Ea,onPrev:Fa,onSubmit:Vt,onUpload:m,loading:o,id2title:X,progressBar:$,innerStore:ie}},[Me,o,w]),children:(0,e.jsx)(Y.k9,{schema:w})})})}),ya=wt}}]);
