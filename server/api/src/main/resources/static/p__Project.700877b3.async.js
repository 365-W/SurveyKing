(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7562],{99884:function(Cu,me,u){"use strict";u.d(me,{Z:function(){return He}});var Eu=u(57338),Te=u(25084),Fu=u(49111),w=u(19650),Bu=u(57663),R=u(71577),he=u(94657),z=u(29656),Q=u(67294),_e=u(88386),l=u(85893),ke={lineWrapping:!0,lineNumbers:!1,autofocus:!0,placeholder:"\u8BF7\u5C06\u51C6\u5907\u597D\u7684\u6587\u6863\u6309\u7167\u793A\u4F8B\u683C\u5F0F\u590D\u5236\u7C98\u8D34\u5230\u8FD9\u91CC"},Pe=`\u9879\u76EE\u6807\u9898
\u611F\u8C22\u60A8\u80FD\u62BD\u51FA\u51E0\u5206\u949F\u65F6\u95F4\u6765\u53C2\u52A0\u672C\u6B21\u7B54\u9898\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u9A6C\u4E0A\u5F00\u59CB\u5427\uFF01\u3010\u6B22\u8FCE\u8BED\u3011


`,se=(0,Q.forwardRef)(function(a,t){var n=a.onChange,r=(0,Q.useState)(),i=(0,he.Z)(r,2),e=i[0],f=i[1];(0,Q.useImperativeHandle)(t,function(){return{clear:function(){return e==null?void 0:e.setValue("")}}});var p=(0,Q.useCallback)(function(E,K){f(E),n(a.defaultContent===void 0?Pe:a.defaultContent),setTimeout(function(){E.refresh(),E.focus()},1)},[]),x=(0,Q.useCallback)(function(){n(e.getValue())},[e]);return(0,l.jsx)(z.Rt,{autoCursor:!0,value:a.defaultContent===void 0?Pe:a.defaultContent,options:ke,editorDidMount:p,onChange:function(){x()}})}),be=u(19357),U=u(3980),eu=u(5795),j=u(71211),Le=u(6936);function xe(a){for(var t={type:"Survey",title:"",id:(0,j.Ox)(),children:[]},n=a.split(/[\n\r]{2,}/g).filter(function(i){return i.trim()}),r=0;r<n.length;r++)r===0?uu(n[0],t):A(n[r]).forEach(function(i){ae(i,t)});return t}function uu(a,t){a.split(/[\n]+/).forEach(function(n,r){r===0?t.title=n:t.description=n.replace(/【.*】/,"")})}function ae(a,t){var n,r=a.split(/\n/g),i=(0,eu.Z)(r),e=i[0],f=i.slice(1),p=X(e,f),x={id:(0,j.Ox)(),type:p,title:e.replace(/【.*】/,""),children:[]};(n=t.children)===null||n===void 0||n.push(x),p==="QuestionSet"?I(f,x):tu(f,x)}function A(a){var t=a.split(/\n/g),n=[],r=[];return t.forEach(function(i,e){/^\d+[.、]/i.test(i.trim())?(r.length>0&&(n.push(r.join(`
`)),r=[]),r.push(i.replace(/^\d+[.、]/,"").trim())):r.push(i.trim())}),r.length>0&&n.push(r.join(`
`)),n}function I(a,t){}function tu(a,t){if(t.type==="FillBlank"||t.type==="Signature"){var n;(n=t.children)===null||n===void 0||n.push({title:"",id:(0,j.Ox)()})}else if(t.type==="Cascader"){if(a.length>1){var r=(0,Le.D)(a[0]),i=(0,Le.H)(a.slice(1));r.forEach(function(x){var E;(E=t.children)===null||E===void 0||E.push({title:x.title,id:(0,j.Ox)()})}),t.dataSource=i}}else if(t.type==="HorzBlank"){if(a.length>0){var e=a.join(`
`).split(/_{3,}/).length-1;t.attribute={content:a.join("<br/>")};for(var f=0;f<e;f++){var p;(p=t.children)===null||p===void 0||p.push({title:"\u586B\u7A7A".concat(f+1),id:(0,j.Ox)()})}}}else a==null||a.filter(function(x){return x.trim()}).forEach(function(x){var E;(E=t.children)===null||E===void 0||E.push({title:x,id:(0,j.Ox)()})})}function X(a,t){var n=a.substring(a.lastIndexOf("\u3010")+1,a.lastIndexOf("\u3011")).trim();if(!n&&t.length===0)return"FillBlank";switch(n){case"\u5355\u9009\u9898":return"Radio";case"\u591A\u9009\u9898":return"Checkbox";case"\u586B\u7A7A\u9898":return"FillBlank";case"\u5355\u884C\u6587\u672C\u9898":return"FillBlank";case"\u591A\u884C\u6587\u672C\u9898":return"MultipleBlank";case"\u4E0B\u62C9\u9898":return"Select";case"\u7B7E\u540D\u9898":return"Signature";case"\u6A2A\u5411\u586B\u7A7A":return"HorzBlank";case"\u6587\u672C\u63CF\u8FF0":return"Remark";case"\u7EA7\u8054\u9898":return"Cascader";default:return"Radio"}}function h(a,t){for(var n,r={type:"Survey",title:"",id:(0,j.Ox)(),attribute:{},children:[]},i=a.split(/[\n\r]{2,}/g).filter(function(f){return f.trim()}),e=0;e<i.length;e++)e===0&&t?Me(i[0],r):Re(i[e]).forEach(function(f){oe(f,r)});return r.attribute.examScore=(n=r.children)===null||n===void 0?void 0:n.reduce(function(f,p){var x;return f+(((x=p.attribute)===null||x===void 0?void 0:x.examScore)||0)},0),r}function Me(a,t){a.split(/[\n]+/).forEach(function(n,r){r===0?t.title=n:t.description=n.replace(/【.*】/,"")})}function oe(a,t){var n;(n=t.children)===null||n===void 0||n.push(Ce(a.split(/\n/g)))}function Re(a){var t=a.split(/\n/g),n=[],r=[];return t.forEach(function(i,e){/^\d+[.、]/i.test(i.trim())?(r.length>0&&(n.push(r.join(`
`)),r=[]),r.push(i.replace(/^\d+[.、]/,"").trim())):r.push(i.trim())}),r.length>0&&n.push(r.join(`
`)),n.filter(function(i){return i.trim()})}function Ve(a){var t={optionLine:[],titleLine:"",correctAnswerLine:[],tagLine:[]};return a.map(function(n){return n.trim()}).forEach(function(n,r){if(r===0)t.titleLine=n;else if(n.startsWith("\u7B54\u6848\u89E3\u6790"))t.analysisLine=n.replace(/^答案解析[:：]/,"").trim();else if(n.startsWith("\u6B63\u786E\u7B54\u6848")){var i=n.replace(/^正确答案[:：]/,"").trim();i&&t.correctAnswerLine.push(i)}else n.startsWith("\u6807\u7B7E")?t.tagLine=n.replace(/^标签[:：]/,"").trim().split(/[、,]/).filter(function(e){return e}):n&&t.optionLine.push(n)}),a[0].includes("\u3010\u5224\u65AD\u9898\u3011")&&(t.optionLine.push("\u6B63\u786E","\u9519\u8BEF"),t.correctAnswerLine[0]==="\u6B63\u786E"&&(t.correctAnswerLine[0]="A"),t.correctAnswerLine[0]==="\u9519\u8BEF"&&(t.correctAnswerLine[0]="B")),t}function q(a){var t={title:""},n=a,r=a.match(/[(（]([\d\.]+)分[)）]/);r&&r.length>1&&(t.examScore=parseFloat(r[1]),n=n.replace(r[0],"").trim());var i=a.match(/[（(](正确答案|[A-Z]+)[）)]/);i&&i.length>1&&(t.examCorrectAnswer=i[1],n=n.replace(i[0],"").trim()),a.indexOf("\u3010")>=0&&(n=n.substring(0,n.indexOf("\u3010")).trim());var e=a.match(/^答案解析[:：](.+)/);return e&&e.length>1&&(t.examAnalysis=e[1]),i=a.match(/^正确答案[:：](.+)/),i&&i.length>1&&(t.examCorrectAnswer=i[1]),t.title=n,t}function Ce(a){var t=Ve(a),n=Ee(t.titleLine,t.optionLine),r=q(t.titleLine),i={id:(0,j.Ox)(),type:n,title:r.title,tags:t.tagLine,attribute:{examScore:r.examScore,examAnalysis:t.analysisLine},children:[]};if(n==="Radio"||n==="Select"){if(i.attribute.examAnswerMode="onlyOne",t.optionLine.forEach(function(P){var y,F,k=q(P),te=(0,j.Ox)();(y=i.children)===null||y===void 0||y.push({id:te,type:"Option",title:k.title,attribute:{examCorrectAnswer:k.examCorrectAnswer?te:void 0,examScore:k.examCorrectAnswer?(F=i.attribute)===null||F===void 0?void 0:F.examScore:void 0}})}),t.correctAnswerLine.length>0||r.examCorrectAnswer){var e=(t.correctAnswerLine[0]||r.examCorrectAnswer).toUpperCase().charCodeAt(0)-65,f=i.children[e];if(f){var p;f.attribute.examCorrectAnswer=f.id,f.attribute.examScore=(p=i.attribute)===null||p===void 0?void 0:p.examScore}}}else if(n==="Checkbox"){if(i.attribute.examAnswerMode="selectAll",t.optionLine.forEach(function(P){var y,F=q(P),k=(0,j.Ox)();(y=i.children)===null||y===void 0||y.push({id:k,type:"Option",title:F.title,attribute:{examCorrectAnswer:F.examCorrectAnswer?k:void 0}})}),t.correctAnswerLine.length>0||r.examCorrectAnswer)for(var x=(t.correctAnswerLine[0]||r.examCorrectAnswer).toUpperCase(),E=0;E<x.length;E++){var K=x.charCodeAt(E)-65,ee=i.children[K];ee&&(ee.attribute.examCorrectAnswer=ee.id)}}else if(n==="FillBlank"){var ue;i.attribute.examAnswerMode="selectAll",i.attribute.examMatchRule="completeSame";var de=(0,j.Ox)();(ue=i.children)===null||ue===void 0||ue.push({id:de,type:"Option",title:"",attribute:{}}),t.correctAnswerLine&&t.correctAnswerLine.forEach(function(P,y){var F=i.children[y];F&&(F.attribute.examCorrectAnswer=P)})}else n==="HorzBlank"&&(i.attribute.examAnswerMode="select",i.attribute.content=t.optionLine[0],t.optionLine.slice(1).forEach(function(P){var y,F,k=q(P),te=(0,j.Ox)();(y=i.children)===null||y===void 0||y.push({id:te,type:"Option",title:k.title,attribute:{examScore:k.examCorrectAnswer?(F=i.attribute)===null||F===void 0?void 0:F.examScore:void 0}})}),t.correctAnswerLine&&t.correctAnswerLine.forEach(function(P,y){var F=i.children[y];F&&(F.attribute.examCorrectAnswer=P)}));return i}function Ee(a,t){var n=a.substring(a.lastIndexOf("\u3010")+1,a.lastIndexOf("\u3011")).trim();if(!n&&t.length===0)return"FillBlank";switch(n){case"\u5355\u9009\u9898":return"Radio";case"\u591A\u9009\u9898":return"Checkbox";case"\u586B\u7A7A\u9898":return"FillBlank";case"\u5355\u884C\u6587\u672C\u9898":return"FillBlank";case"\u591A\u884C\u6587\u672C\u9898":return"MultipleBlank";case"\u4E0B\u62C9\u9898":return"Select";case"\u7B7E\u540D\u9898":return"Signature";case"\u6A2A\u5411\u586B\u7A7A":return"HorzBlank";case"\u6587\u672C\u63CF\u8FF0":return"Remark";case"\u7EA7\u8054\u9898":return"Cascader";case"\u5224\u65AD\u9898":return"Radio";default:return"Radio"}}var Fe=u(72850),nu=u(71194),N=u(50146),Be=u(11849),Ae=u(18106),ze=u(51752),Qe={lineWrapping:!0,lineNumbers:!1,autofocus:!1,placeholder:"\u8BF7\u5C06\u51C6\u5907\u597D\u7684\u6587\u6863\u6309\u7167\u793A\u4F8B\u683C\u5F0F\u590D\u5236\u7C98\u8D34\u5230\u8FD9\u91CC",readOnly:!0};function ru(a){var t;return a.id=(0,j.Ox)(),(t=a.children)===null||t===void 0||t.forEach(function(n){n.id=(0,j.Ox)()}),{id:"demo",title:"",type:"Survey",children:[a]}}function ce(a){var t=a.title,n=a.schema,r=a.text,i=a.mode;return(0,l.jsxs)("div",{className:"doc-item",children:[(0,l.jsxs)("h3",{className:"doc-item-title",children:[t,":"]}),(0,l.jsxs)("div",{className:"doc-item-wrapper",children:[(0,l.jsx)("div",{className:"doc-item-left",children:(0,l.jsx)(z.Rt,{value:r,options:Qe,editorDidMount:function(f){setTimeout(function(){f.refresh()},1)}})}),(0,l.jsxs)("div",{className:"doc-item-right",children:[(0,l.jsx)("div",{className:"tips",children:"\u9884\u89C8"}),(0,l.jsx)(be.Z,{schema:ru(n),headerVisible:!1,footerVisible:!1,questionNumber:!1,progressBar:!1,mode:i,correctAnswerVisible:i==="exam"})]})]})]})}var Ue=[{title:"\u6B22\u8FCE\u8BED",text:"\u611F\u8C22\u60A8\u80FD\u62BD\u51FA\u51E0\u5206\u949F\u65F6\u95F4\u6765\u53C2\u52A0\u672C\u6B21\u7B54\u9898\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u9A6C\u4E0A\u5F00\u59CB\u5427\uFF01\u3010\u6B22\u8FCE\u8BED\u3011",schema:{id:"1",type:"Remark",title:"\u611F\u8C22\u60A8\u80FD\u62BD\u51FA\u51E0\u5206\u949F\u65F6\u95F4\u6765\u53C2\u52A0\u672C\u6B21\u7B54\u9898\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u9A6C\u4E0A\u5F00\u59CB\u5427\uFF01\u3010\u6B22\u8FCE\u8BED\u3011"}},{title:"\u5355\u9009\u9898",text:`\u60A8\u7ECF\u5E38\u521B\u5EFA\u4EC0\u4E48\u7C7B\u578B\u7684\u9879\u76EE\uFF1F\u3010\u5355\u9009\u9898\u3011
\u95EE\u5377\u8C03\u7814
\u6295\u7968\u8BC4\u9009
\u6D4B\u8BC4\u8003\u8BD5
    `,schema:{type:"Radio",title:"\u60A8\u7ECF\u5E38\u521B\u5EFA\u4EC0\u4E48\u7C7B\u578B\u7684\u9879\u76EE\uFF1F",children:[{title:"\u95EE\u5377\u8C03\u7814"},{title:"\u6295\u7968\u8BC4\u9009"},{title:"\u6D4B\u8BC4\u8003\u8BD5"}]}},{title:"\u591A\u9009\u9898",text:`\u60A8\u4E86\u89E3\u8FC7\u54EA\u4E9B\u95EE\u5377\u7CFB\u7EDF\uFF1F\u3010\u591A\u9009\u9898\u3011
  \u95EE\u5377\u7F51
  \u95EE\u5377\u661F
  \u91D1\u6570\u636E
  \u5377\u738B
      `,schema:{type:"Checkbox",title:"\u60A8\u4E86\u89E3\u8FC7\u54EA\u4E9B\u95EE\u5377\u7CFB\u7EDF\uFF1F",children:[{title:"\u95EE\u5377\u7F51"},{title:"\u95EE\u5377\u661F"},{title:"\u91D1\u6570\u636E"},{title:"\u5377\u738B"}]}},{title:"\u586B\u7A7A\u9898",text:"\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE\u3010\u586B\u7A7A\u9898\u3011",schema:{type:"FillBlank",title:"\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE",children:[{title:""}]}},{title:"\u591A\u884C\u6587\u672C\u9898",text:`\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE\u3010\u591A\u884C\u6587\u672C\u9898\u3011
  \u8EAB\u9AD8
  \u4F53\u91CD
  BMI
  `,schema:{type:"MultipleBlank",title:"\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE",children:[{title:"\u8EAB\u9AD8"},{title:"\u4F53\u91CD"},{title:"BMI"}]}},{title:"\u4E0B\u62C9\u9898",text:`\u6027\u522B\u3010\u4E0B\u62C9\u9898\u3011
  \u7537
  \u5973`,schema:{type:"Select",title:"\u6027\u522B",children:[{title:"\u7537"},{title:"\u5973"}]}},{title:"\u7B7E\u540D",text:"\u7B7E\u4E2A\u540D\u5427\uFF01\u3010\u7B7E\u540D\u3011",schema:{type:"Signature",title:"\u7B7E\u4E2A\u540D\u5427\uFF01",children:[{title:""}]}},{title:"\u6A2A\u5411\u586B\u7A7A",text:`\u8BF7\u586B\u5199\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\uFF1F\u3010\u6A2A\u5411\u586B\u7A7A\u3011
  \u59D3\u540D___\u5E74\u9F84___\u5C81
  \u8054\u7CFB\u65B9\u5F0F____`,schema:{type:"HorzBlank",title:"\u8BF7\u586B\u5199\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\uFF1F",attribute:{content:`\u59D3\u540D___\u5E74\u9F84___\u5C81
  \u8054\u7CFB\u65B9\u5F0F____`},children:[{title:""},{title:""},{title:""}]}},{title:"\u7EA7\u8054\u9898",text:`\u7701\u5E02\u53BF\u3010\u7EA7\u8054\u9898\u3011
  \u7701 \u5E02 \u53BF
  \u5317\u4EAC\u5E02 \u6D77\u6DC0\u533A
  \u5317\u4EAC\u5E02 \u897F\u57CE\u533A
  \u6CB3\u5357\u7701 \u90D1\u5DDE\u5E02 \u7BA1\u57CE\u533A
  \u6CB3\u5357\u7701 \u90D1\u5DDE\u5E02 \u9AD8\u65B0\u533A`,schema:{type:"Cascader",title:"\u5730\u533A",children:[{title:"\u7701",id:"6t0l"},{title:"\u5E02",id:"1bdu"},{title:"\u53BF",id:"ie4u"}],dataSource:[{label:"\u5317\u4EAC\u5E02",value:"vv5k",children:[{label:"\u6D77\u6DC0\u533A",value:"55x3"},{label:"\u897F\u57CE\u533A",value:"dxg7"}]},{label:"\u6CB3\u5357\u7701",value:"fyx1",children:[{label:"\u90D1\u5DDE\u5E02",value:"qu6c",children:[{label:"\u7BA1\u57CE\u533A",value:"x7zs"},{label:"\u9AD8\u65B0\u533A",value:"t67i"}]}]}]}}],au=[{title:"\u6B22\u8FCE\u8BED",text:"\u611F\u8C22\u60A8\u80FD\u62BD\u51FA\u51E0\u5206\u949F\u65F6\u95F4\u6765\u53C2\u52A0\u672C\u6B21\u7B54\u9898\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u9A6C\u4E0A\u5F00\u59CB\u5427\uFF01\u3010\u6B22\u8FCE\u8BED\u3011",schema:{id:"1",type:"Remark",title:"\u611F\u8C22\u60A8\u80FD\u62BD\u51FA\u51E0\u5206\u949F\u65F6\u95F4\u6765\u53C2\u52A0\u672C\u6B21\u7B54\u9898\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u9A6C\u4E0A\u5F00\u59CB\u5427\uFF01\u3010\u6B22\u8FCE\u8BED\u3011"}},{title:"\u5355\u9009\u9898",text:`\u5377\u738B\u662F\u516C\u53F8\u8FD8\u662F\u4E2A\u4EBA\u5F00\u53D1\u7684\uFF1F\uFF0810\u5206\uFF09\u3010\u5355\u9009\u9898\u3011
\u516C\u53F8
\u4E2A\u4EBA\uFF08\u6B63\u786E\u7B54\u6848\uFF09
\u7B54\u6848\u89E3\u6790\uFF1A\u5377\u738B\u662F\u4E2A\u4EBA\u5F00\u53D1\u7684
\u6807\u7B7E\uFF1A\u7B80\u5355
    `,schema:{type:"Radio",title:"\u5377\u738B\u662F\u516C\u53F8\u8FD8\u662F\u4E2A\u4EBA\u5F00\u53D1\u7684\uFF1F",attribute:{examAnswerMode:"select",examScore:10},children:[{title:"\u516C\u53F8"},{title:"\u4E2A\u4EBA",id:"o111",attribute:{examCorrectAnswer:"o111",examScore:10}}]}},{title:"\u591A\u9009\u9898",text:`\u5377\u738B\u591A\u9009\u9898\u652F\u6301\u54EA\u4E9B\u8BA1\u5206\u65B9\u5F0F\uFF1F\uFF0830\u5206\uFF09\u3010\u591A\u9009\u9898\u3011
A.\u5168\u90E8\u7B54\u5BF9\u624D\u5F97\u5206\uFF08\u6B63\u786E\u7B54\u6848\uFF09
B.\u7B54\u5BF9\u51E0\u9879\u5F97\u51E0\u5206\uFF0C\u7B54\u9519\u4E0D\u5F97\u5206\uFF08\u6B63\u786E\u7B54\u6848\uFF09
C.\u6BCF\u4E2A\u9009\u9879\u90FD\u6709\u76F8\u5E94\u5206\u503C\uFF08\u6B63\u786E\u7B54\u6848\uFF09
\u7B54\u6848\u89E3\u6790\uFF1A\u95EE\u5377\u7F51\u7CBE\u591A\u9009\u9898\u652F\u6301\u4E09\u79CD\u8BA1\u5206\u65B9\u5F0F
      `,schema:{type:"Checkbox",title:"\u5377\u738B\u591A\u9009\u9898\u652F\u6301\u54EA\u4E9B\u8BA1\u5206\u65B9\u5F0F?",attribute:{examAnswerMode:"selectCorrect",examScore:10},children:[{title:"A.\u5168\u90E8\u7B54\u5BF9\u624D\u5F97\u5206",attribute:{examCorrectAnswer:"o11"}},{title:"B.\u7B54\u5BF9\u51E0\u9879\u5F97\u51E0\u5206\uFF0C\u7B54\u9519\u4E0D\u5F97\u5206",attribute:{examCorrectAnswer:"o11"}},{title:"C.\u6BCF\u4E2A\u9009\u9879\u90FD\u6709\u76F8\u5E94\u5206\u503C",attribute:{examCorrectAnswer:"o11"}}]}}],_=ze.Z.TabPane,iu=function(t){var n=t.onClose;return(0,l.jsx)(N.Z,{visible:!0,onCancel:function(){return n()},footer:!1,title:"\u793A\u4F8B&\u5E2E\u52A9",width:750,maskClosable:!1,className:"import-text-doc-modal",children:(0,l.jsxs)(ze.Z,{children:[(0,l.jsxs)(_,{tab:"\u4E0D\u542B\u5206\u503C\u548C\u7B54\u6848",children:[(0,l.jsxs)("div",{"data-v-5d201132":"",className:"doc-desc",children:[(0,l.jsx)("h3",{"data-v-5d201132":"",children:"\u683C\u5F0F\u8BF4\u660E\uFF1A"})," ",(0,l.jsx)("p",{"data-v-5d201132":"",children:"1. \u9898\u76EE\u6807\u9898\u6700\u597D\u4EE5\u6570\u5B57\u5F00\u5934\uFF1B"}),(0,l.jsx)("p",{"data-v-5d201132":"",children:"2. \u5EFA\u8BAE\u5728\u9898\u76EE\u540E\u9762\u6DFB\u52A0\u9898\u578B\u6807\u8BC6(\u4F7F\u7528\u3010\u3011)\uFF0C\u672A\u6807\u8BC6\u7684\u9898\u76EE\u7CFB\u7EDF\u5C06\u81EA\u52A8\u8BC6\u522B\uFF1B"}),(0,l.jsxs)("p",{"data-v-5d201132":"",children:["3. \u76EE\u524D\u53EF\u8BC6\u522B\u7684\u9898\u578B\u6807\u8BC6\u5305\u62EC\uFF1A",(0,l.jsx)("span",{"data-v-5d201132":"",children:"\u3010\u6B22\u8FCE\u8BED\u3011\u3001"}),"\u3010\u5355\u9009\u9898\u3011\u3001\u3010\u591A\u9009\u9898\u3011\u3001\u3010\u7B7E\u540D\u9898\u3011\u3001\u3010\u4E0B\u62C9\u9898\u3011\u3001\u3010\u586B\u7A7A\u9898\u3011\u3001\u3010\u591A\u9879\u586B\u7A7A\u3011\u3001\u3010\u6A2A\u5411\u586B\u7A7A\u3011\u3001\u3010\u7EA7\u8054\u9898\u3011\u3001\u3010\u5907\u6CE8\u8BF4\u660E\u3011\uFF1B"]}),(0,l.jsx)("p",{"data-v-5d201132":"",children:"4. \u5982\u679C\u65E0\u6CD5\u6B63\u786E\u8BC6\u522B\uFF0C\u8BF7\u5C1D\u8BD5\u5728\u9898\u76EE\u4E0E\u9898\u76EE\u4E4B\u95F4\u52A0\u5165\u7A7A\u884C\uFF1B"}),(0,l.jsx)("p",{"data-v-5d201132":"",children:"5. \u8BF7\u52FF\u5728\u9009\u9879\u4E0E\u9009\u9879\u4E4B\u95F4\u7A7A\u884C\u3002"})]}),Ue.map(function(r){return(0,l.jsx)(ce,(0,Be.Z)({},r),r.title)})]},"survey"),(0,l.jsxs)(_,{tab:"\u542B\u5206\u503C\u548C\u7B54\u6848",children:[(0,l.jsxs)("div",{"data-v-5d201132":"",className:"doc-desc",children:[(0,l.jsx)("h3",{"data-v-5d201132":"",children:"\u683C\u5F0F\u8BF4\u660E\uFF1A"})," ",(0,l.jsx)("p",{"data-v-5d201132":"",children:"1. \u9898\u76EE\u6807\u9898\u6700\u597D\u4EE5\u6570\u5B57\u5F00\u5934\uFF1B"}),(0,l.jsx)("p",{"data-v-5d201132":"",children:"2. \u5EFA\u8BAE\u5728\u9898\u76EE\u540E\u9762\u6DFB\u52A0\u9898\u578B\u6807\u8BC6(\u4F7F\u7528\u3010\u3011)\uFF0C\u672A\u6807\u8BC6\u7684\u9898\u76EE\u7CFB\u7EDF\u5C06\u81EA\u52A8\u8BC6\u522B\uFF1B"}),(0,l.jsxs)("p",{"data-v-5d201132":"",children:["3. \u76EE\u524D\u53EF\u8BC6\u522B\u7684\u9898\u578B\u6807\u8BC6\u5305\u62EC\uFF1A",(0,l.jsx)("span",{"data-v-5d201132":"",children:"\u3010\u6B22\u8FCE\u8BED\u3011\u3001"}),"\u3010\u5355\u9009\u9898\u3011\u3001\u3010\u591A\u9009\u9898\u3011\u3001\u3010\u7B7E\u540D\u9898\u3011\u3001\u3010\u4E0B\u62C9\u9898\u3011\u3001\u3010\u586B\u7A7A\u9898\u3011\u3001\u3010\u591A\u9879\u586B\u7A7A\u3011\u3001\u3010\u6A2A\u5411\u586B\u7A7A\u3011\u3001\u3010\u7EA7\u8054\u9898\u3011\u3001\u3010\u5907\u6CE8\u8BF4\u660E\u3011\uFF1B"]}),(0,l.jsx)("p",{"data-v-5d201132":"",children:"4. \u5982\u679C\u65E0\u6CD5\u6B63\u786E\u8BC6\u522B\uFF0C\u8BF7\u5C1D\u8BD5\u5728\u9898\u76EE\u4E0E\u9898\u76EE\u4E4B\u95F4\u52A0\u5165\u7A7A\u884C\uFF1B"}),(0,l.jsx)("p",{"data-v-5d201132":"",children:"5. \u8BF7\u52FF\u5728\u9009\u9879\u4E0E\u9009\u9879\u4E4B\u95F4\u7A7A\u884C\u3002"})]}),au.map(function(r){return(0,l.jsx)(ce,(0,Be.Z)((0,Be.Z)({},r),{},{mode:"exam"}),r.title)})]},"exam")]})})},pe=iu,$e=function(t){var n=t.onClose,r=t.mode,i=r===void 0?"survey":r,e=t.okText,f=t.onOk,p=t.title,x=p===void 0?"\u5BFC\u5165\u6587\u672C":p,E=t.headerVisible,K=E===void 0?!0:E,ee=t.footerVisible,ue=ee===void 0?!0:ee,de=t.defaultContent,P=(0,Q.useRef)(null),y=(0,Q.useState)({}),F=(0,he.Z)(y,2),k=F[0],te=F[1],ye=(0,Q.useState)(!1),ve=(0,he.Z)(ye,2),Je=ve[0],je=ve[1],ge=(0,Q.useRef)(),We=(0,U.zE)(function($){te(i==="exam"?h($,K):xe($,K))},30);return(0,l.jsxs)(Te.Z,{visible:!0,onClose:n,width:"100%",placement:"left",className:"import-text-drawer",closeIcon:!1,title:(0,l.jsx)("span",{children:x}),autoFocus:!1,extra:(0,l.jsxs)(w.Z,{children:[(0,l.jsx)(R.Z,{onClick:n,children:"\u5173\u95ED"}),(0,l.jsx)(R.Z,{type:"primary",onClick:function(){return f(k)},children:e})]}),children:[(0,l.jsxs)("div",{className:"text-header",children:[(0,l.jsxs)("div",{className:"header-left",children:[(0,l.jsx)("h3",{className:"header-left-title",children:"\u6587\u672C\u7F16\u8F91"}),(0,l.jsx)("div",{children:(0,l.jsxs)(w.Z,{children:[(0,l.jsx)(R.Z,{type:"link",onClick:function(){je(!0)},children:"\u793A\u4F8B&\u5E2E\u52A9"}),(0,l.jsx)(R.Z,{icon:(0,l.jsx)(Fe.Z,{}),onClick:function(){var ie;return(ie=ge.current)===null||ie===void 0?void 0:ie.clear()},children:"\u6E05\u7A7A\u6587\u672C"})]})})]}),(0,l.jsx)("div",{className:"header-right",children:(0,l.jsx)("h3",{className:"header-right-title ",children:"\u9898\u76EE\u9884\u89C8"})})]}),(0,l.jsxs)("div",{className:"text-body",children:[(0,l.jsx)("div",{className:"editor-container",children:(0,l.jsx)(se,{ref:ge,defaultContent:de,onChange:function(ie){We(ie)}})}),(0,l.jsx)("div",{className:"preview-container",children:(0,l.jsx)(be.O,{ref:P,schema:k,headerVisible:K,footerVisible:ue,paginationVisible:!1,mode:i,correctAnswerVisible:!0})})]}),Je&&(0,l.jsx)(pe,{onClose:function(){return je(!1)}})]})},He=$e},36841:function(Cu,me,u){"use strict";u.r(me),u.d(me,{Project:function(){return ou},ProjectContext:function(){return Ze},default:function(){return yu}});var Eu=u(14781),Te=u(93286),Fu=u(59250),w=u(13013),Bu=u(57663),R=u(71577),he=u(36017),z=u(35247),Q=u(13062),_e=u(71230),l=u(89032),ke=u(15746),Pe=u(88983),se=u(66253),be=u(34792),U=u(48086),eu=u(47673),j=u(4107),Le=u(17462),xe=u(76772),uu=u(30887),ae=u(28682),A=u(11849),I=u(94657),tu=u(71194),X=u(50146),h=u(67294),Me=u(15873),oe=u(57119),Re=u(18401),Ve=u(34707),q=u(49101),Ce=u(51615),Ee=u(80937),Fe=u(23156),nu=u(99937),N=u(3980),Be=u(54421),Ae=u(38272),ze=u(58024),Qe=u(91894),ru=u(54029),ce=u(79166),Ue=u(83279),au=u(71153),_=u(60331),iu=u(13254),pe=u(14277),$e=u(8212),He=u(92570),a=u(57820),t=u(24616),n=u(44545),r=u(42285),i=u(92977),e=u(85893);function f(b){var B=b.project,D=(0,h.useContext)(Ze),m=D.deleteProject,T=D.editName;return(0,e.jsx)("div",{style:{width:230,marginLeft:8},onClick:function(){r.m8.push("/project/".concat(B.id))},children:(0,e.jsxs)("div",{className:"folder-box",style:{marginTop:14},children:[(0,e.jsx)("div",{className:"folder-wrap",children:(0,e.jsxs)("button",{className:"folder",children:[(0,e.jsx)("i",{className:"folder-page"}),(0,e.jsx)("i",{className:"folder-page-add"}),(0,e.jsx)("i",{className:"folder-cover"})]})}),(0,e.jsxs)("div",{className:"folder-info",children:[(0,e.jsx)("div",{className:"folder-name",children:(0,e.jsx)("button",{title:B.name,className:"folder-title",children:B.name})}),(0,e.jsxs)("div",{className:"folder-statistics",children:[(0,e.jsxs)("span",{className:"total",children:[B.total," \u4E2A\u95EE\u5377"]}),(0,e.jsx)("button",{className:"morebtn",onClick:function(C){return C.stopPropagation()},children:(0,e.jsx)(w.Z,{trigger:["click"],overlay:(0,e.jsx)(ae.Z,{items:[{key:"1",label:(0,e.jsx)("a",{onClick:function(C){T(B)},children:"\u91CD\u547D\u540D"})},{key:"2",label:(0,e.jsx)("a",{onClick:function(C){m(B)},children:"\u79FB\u52A8\u5230\u56DE\u6536\u7AD9"})}]}),children:(0,e.jsx)(i.Z,{})})})]})]})]})})}var p=(0,Ee.Pi)(function(b){var B=b.moreMenu,D=(0,N.ok)(),m=D.loading,T=D.projects,Z=(0,N.dD)(),C=function(d,c,s){d.stopPropagation(),s!=="more"&&r.m8.push("/survey/".concat(c.id,"/").concat(s,"?mode=").concat(c.mode||"survey"))};if(T.length===0)return(0,e.jsx)(pe.Z,{image:pe.Z.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:60},description:(0,e.jsx)("span",{children:"\u5F53\u524D\u8FD8\u6CA1\u6709\u521B\u5EFA\u95EE\u5377"})});var L=function(d){return d==="exam"?(0,e.jsx)(_.Z,{color:"red",children:"\u8003\u8BD5"}):(0,e.jsx)(_.Z,{color:"blue",children:"\u95EE\u5377"})};return(0,e.jsx)(Ae.ZP,{rowKey:"id",className:"survey-home-content",loading:m,grid:{gutter:16,xs:1,sm:2,md:3,lg:3,xl:4,xxl:6},dataSource:(0,Ue.Z)(T),renderItem:function(d){return d&&d.id?d.mode==="folder"?(0,e.jsx)(f,{project:d}):(0,e.jsx)(Ae.ZP.Item,{children:(0,e.jsx)(Qe.Z,{hoverable:!0,style:{width:Z?void 0:240},actions:[(0,e.jsx)(R.Z,{shape:"circle",size:"small",icon:(0,e.jsx)($e.Z,{onClick:function(s){return C(s,d,"edit")}},"edit")}),(0,e.jsx)(R.Z,{shape:"circle",size:"small",icon:(0,e.jsx)(He.Z,{onClick:function(s){return C(s,d,"data")}},"data")}),(0,e.jsx)(R.Z,{shape:"circle",size:"small",icon:(0,e.jsx)(a.Z,{onClick:function(s){return C(s,d,"report")}},"report")}),(0,e.jsx)(R.Z,{shape:"circle",size:"small",icon:(0,e.jsx)(t.Z,{onClick:function(s){return C(s,d,"setting")}},"setting")}),(0,e.jsx)(R.Z,{shape:"circle",size:"small",icon:(0,e.jsx)(w.Z,{overlay:B(d),trigger:["click"],children:(0,e.jsx)(n.Z,{onClick:function(s){return C(s,d,"more")}},"ellipsis")})})],children:(0,e.jsxs)("div",{onClick:function(){return r.m8.push("/survey/".concat(d.id,"?mode=").concat(d.mode||"survey"))},children:[(0,e.jsxs)("div",{className:"card-header",children:[(0,e.jsx)("span",{className:"survey-title",title:d.name,children:d.name}),L(d.mode)]}),(0,e.jsxs)("div",{className:"card-content",children:[(0,e.jsx)("div",{className:"publish-status",children:d.setting.status===1?(0,e.jsx)(ce.Z,{status:"processing",text:"\u6536\u96C6\u4E2D",className:"yes"}):(0,e.jsx)(ce.Z,{status:"warning",text:"\u672A\u53D1\u5E03",className:"no"})}),(0,e.jsxs)("div",{className:"total",children:[(0,e.jsx)("span",{children:d.total}),"\u4EFD\u6570\u636E"]})]})]})})},d.id):(0,e.jsx)(Ae.ZP.Item,{children:(0,e.jsxs)(R.Z,{type:"dashed",className:"newButton",onClick:function(){return r.m8.push("/survey/new")},children:[(0,e.jsx)(q.Z,{})," \u65B0\u589E\u95EE\u5377"]})})}})}),x=p,E=u(66456),K=u(1670),ee=u(48736),ue=u(27049),de=u(16165),P=u(77613),y=function(){return(0,e.jsxs)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"32",height:"32",children:[(0,e.jsx)("path",{d:"M938.666667 464.592593h-853.333334v-265.481482c0-62.577778 51.2-113.777778 113.777778-113.777778h128.948148c15.17037 0 28.444444 3.792593 41.718519 11.377778l98.607407 64.474074h356.503704c62.577778 0 113.777778 51.2 113.777778 113.777778v189.62963z",fill:"#3A69DD","p-id":"7352"}),(0,e.jsx)("path",{d:"M805.925926 398.222222h-587.851852v-125.155555c0-24.651852 20.859259-45.511111 45.511111-45.511111h496.82963c24.651852 0 45.511111 20.859259 45.511111 45.511111V398.222222z",fill:"#D9E3FF","p-id":"7353"}),(0,e.jsx)("path",{d:"M843.851852 417.185185h-663.703704v-98.607407c0-28.444444 22.755556-53.096296 53.096296-53.096297h559.407408c28.444444 0 53.096296 22.755556 53.096296 53.096297V417.185185z",fill:"#FFFFFF","p-id":"7354"}),(0,e.jsx)("path",{d:"M786.962963 938.666667h-549.925926c-83.437037 0-151.703704-68.266667-151.703704-151.703704V341.333333s316.681481 37.925926 430.45926 37.925926c189.62963 0 422.874074-37.925926 422.874074-37.925926v445.62963c0 83.437037-68.266667 151.703704-151.703704 151.703704z",fill:"#5F7CF9","p-id":"7355"}),(0,e.jsx)("path",{d:"M559.407407 512h-75.851851c-20.859259 0-37.925926-17.066667-37.925926-37.925926s17.066667-37.925926 37.925926-37.925926h75.851851c20.859259 0 37.925926 17.066667 37.925926 37.925926s-17.066667 37.925926-37.925926 37.925926z",fill:"#F9D523","p-id":"7356"})]})},F=(0,P.P)(function(b){var B=b.moreMenu,D=(0,h.useContext)(Ze),m=D.deleteProject,T=D.editName,Z=(0,N.ok)(),C=Z.loading,L=Z.projects,S=function(s,v){return{onClick:function(){s.mode==="folder"?r.m8.push("/project/".concat(s.id)):v==="name"?r.m8.push("/survey/".concat(s.id,"/edit?mode=").concat(s.mode||"survey")):v==="total"?r.m8.push("/survey/".concat(s.id,"/data?mode=").concat(s.mode||"survey")):r.m8.push("/survey/".concat(s.id,"?mode=").concat(s.mode||"survey"))}}},d=[{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"name",onCell:function(s){return S(s,"name")},render:function(s,v){return v.mode==="folder"?(0,e.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,e.jsx)(de.Z,{component:y,style:{marginRight:5,margin:"-6px 5px -6px 0"}}),s]}):s}},{title:"\u9879\u76EE\u72B6\u6001",dataIndex:"status",onCell:function(s){return S(s,"status")},render:function(s,v){var V,G=(V=v.setting)===null||V===void 0?void 0:V.status;return G===void 0?"":G===0?(0,e.jsx)(_.Z,{color:"warning",children:"\u672A\u5F00\u59CB"}):(0,e.jsx)(_.Z,{color:"processing",children:"\u6536\u96C6\u4E2D"})}},{title:"\u7C7B\u578B",dataIndex:"mode",render:function(s){return s==="exam"?"\u8003\u8BD5":s==="survey"?"\u95EE\u5377":""},onCell:function(s){return S(s,"status")}},{title:"\u7B54\u5377\u6570",dataIndex:"total",onCell:function(s){return S(s,"total")},render:function(s,v){return v.mode==="folder"?"":s}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createAt",onCell:function(s){return S(s,"createAt")}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateAt",onCell:function(s){return S(s,"updateAt")}},{title:"\u64CD\u4F5C",dataIndex:"operate",render:function(s,v){return v.mode==="folder"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){return T(v)},children:"\u91CD\u547D\u540D"},"rename"),(0,e.jsx)(ue.Z,{type:"vertical"}),(0,e.jsx)("a",{onClick:function(){return m(v)},children:"\u5220\u9664"},"delete")]}):(0,e.jsx)(w.Z,{overlay:B(v),trigger:["click"],children:(0,e.jsx)(n.Z,{},"ellipsis")})}}];return(0,e.jsx)("div",{children:(0,e.jsx)(K.Z,{dataSource:L,loading:C,columns:d,rowKey:"id",pagination:!1,rowClassName:function(){return"project-list-row"}})})}),k=F,te=u(43185),ye=u(32620),ve=u(43347),Je=ye.Z.Dragger,je=function(B){var D=B.onCancel,m=(0,h.useState)(""),T=(0,I.Z)(m,2),Z=T[0],C=T[1],L={multiple:!1,accept:".json",beforeUpload:function(d){var c=new FileReader;return c.readAsText(d,"UTF-8"),c.onload=function(s){try{var v=JSON.parse(s.target.result);C(v)}catch(V){U.default.error("\u6A21\u677F\u89E3\u6790\u5931\u8D25")}},c.onerror=function(){U.default.error("\u6A21\u677F\u8BFB\u53D6\u5931\u8D25")},!1}};return(0,e.jsx)(X.Z,{visible:!0,title:"\u901A\u8FC7\u6A21\u677F\u5BFC\u5165\u95EE\u5377(JSON\u6A21\u677F)",okText:"\u5BFC\u5165",onOk:function(){setTimeout(function(){localStorage.setItem("temp-template",JSON.stringify(Z)),r.m8.push("/survey/new?fromTemplate")},20)},onCancel:D,children:(0,e.jsxs)(Je,(0,A.Z)((0,A.Z)({},L),{},{children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(ve.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u8005\u62D6\u62FD\u6A21\u677F\u6587\u4EF6\u5230\u6B64\u5904"})]}))})},ge=u(99884),We=ye.Z.Dragger,$=function(B){var D=B.onCancel,m=B.parentId,T=(0,h.useState)(!1),Z=(0,I.Z)(T,2),C=Z[0],L=Z[1],S=(0,h.useState)(),d=(0,I.Z)(S,2),c=d[0],s=d[1],v=(0,h.useState)([]),V=(0,I.Z)(v,2),G=V[0],H=V[1],Ye=(0,h.useState)(!1),Se=(0,I.Z)(Ye,2),le=Se[0],we=Se[1],Oe={multiple:!1,accept:".xlsx",beforeUpload:function(J){return H([J]),!1},onRemove:function(){H([])},maxCount:1};return(0,e.jsxs)(X.Z,{visible:!0,title:"\u901A\u8FC7Excel\u5BFC\u5165\u95EE\u5377",okText:le?"\u8DF3\u8F6C":"\u5BFC\u5165",onOk:function(){if(le)r.m8.push("/survey/".concat(c,"/data?mode=survey"));else{if(G.length===0){U.default.error("\u8BF7\u9009\u62E9\u6587\u4EF6");return}L(!0),N.hi.upload("/api/answers/upload",{file:G[0],autoSchema:!0,parentId:m},function(J){}).then(function(J){J.success?(U.default.success("\u5BFC\u5165\u6210\u529F\uFF0C\u70B9\u51FB\u8DF3\u8F6C"),s(J.data.projectId),we(!0)):U.default.error(J.message),L(!1)})}},okButtonProps:{loading:C},confirmLoading:C,onCancel:D,children:[(0,e.jsxs)(We,(0,A.Z)((0,A.Z)({},Oe),{},{disabled:le,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(ve.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u8005\u62D6\u62FDExcel\u6587\u4EF6\u5230\u6B64\u5904"})]})),(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)(xe.Z,{message:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:"1. excel \u7B2C\u4E00\u884C\u4F1A\u88AB\u89E3\u6790\u4E3A\u95EE\u9898\u6807\u9898"}),(0,e.jsx)("div",{children:"2. excel \u540D\u79F0\u4F1A\u88AB\u89E3\u6790\u4E3A\u95EE\u5377\u540D\u79F0"}),(0,e.jsx)("div",{children:"3. \u6240\u6709\u9898\u76EE\u9ED8\u8BA4\u5C06\u88AB\u89E3\u6790\u6210\u586B\u7A7A\u9898"}),(0,e.jsx)("div",{children:"4. \u5BFC\u5165\u5B8C\u6BD5\u53EF\u4EE5\u5728\u7F16\u8F91\u9875\u9762\u7EE7\u7EED\u5BF9\u95EE\u5377\u8FDB\u884C\u7F16\u8F91"})]}),type:"info"})})]})},ie=u(9715),Ke=u(86835);function Au(b){var B=b.onCancel,D=b.onOk,m=b.current,T=Ke.Z.useForm(),Z=(0,I.Z)(T,1),C=Z[0],L=function(d){console.log("Finish:",d)};return(0,e.jsx)(X.Z,{title:m?"\u4FEE\u6539\u6587\u4EF6\u5939\u540D\u79F0":"\u521B\u5EFA\u6587\u4EF6\u5939",visible:!0,maskClosable:!1,onCancel:B,onOk:function(){C.validateFields().then(function(d){m?N.hi.updateProject({id:m.id,name:d.name}).then(function(c){c.success?D():U.default.error(c.message)}):N.hi.saveProject({mode:"folder",name:d.name}).then(function(c){c.success?D():U.default.error(c.message)})})},children:(0,e.jsx)(Ke.Z,{form:C,onFinish:L,initialValues:{name:m==null?void 0:m.name},children:(0,e.jsx)(Ke.Z.Item,{name:"name",rules:[{required:!0,message:"\u6587\u4EF6\u5939\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A!"}],children:(0,e.jsx)(j.Z,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",style:{maxWidth:320}})})})})}var Ge=u(73727),pu=u(80129),lu=u.n(pu),De=X.Z.confirm,su="home-content-type",ou=(0,Ee.Pi)(function(b){var B=(0,N.ok)(),D=(0,Ce.UO)(),m=D.id,T=(0,h.useRef)(""),Z=(0,h.useState)(localStorage.getItem(su)||"card"),C=(0,I.Z)(Z,2),L=C[0],S=C[1],d=(0,h.useState)({current:1,pageSize:24}),c=(0,I.Z)(d,2),s=c[0],v=c[1],V=(0,h.useState)(),G=(0,I.Z)(V,2),H=G[0],Ye=G[1],Se=(0,h.useState)(!1),le=(0,I.Z)(Se,2),we=le[0],Oe=le[1],Ie=(0,h.useState)(!1),J=(0,I.Z)(Ie,2),ju=J[0],cu=J[1],gu=(0,h.useState)(!1),du=(0,I.Z)(gu,2),Du=du[0],vu=du[1],Zu=(0,h.useState)(),fu=(0,I.Z)(Zu,2),Xe=fu[0],Ne=fu[1],Su=(0,h.useState)([]),mu=(0,I.Z)(Su,2),Ou=mu[0],Iu=mu[1],qe=(0,Ce.k6)();(0,h.useEffect)(function(){B.loadProjects((0,A.Z)((0,A.Z)({},s),{},{parentId:m}))},[s,B,m]);var hu=function(){N.hi.loadProjects({mode:"folder",current:1,pageSize:1024}).then(function(o){Iu(o.list)})};(0,h.useEffect)(function(){hu()},[]),(0,h.useEffect)(function(){m&&N.hi.loadProject(m).then(function(g){g&&Ye(g)})},[m]);var xu=function(o){return o.mode==="folder"?(0,e.jsx)(ae.Z,{onClick:function(ne){return ne.domEvent.stopPropagation()},items:[{label:"\u91CD\u547D\u540D",key:"preview",onClick:function(){return window.open("/s/".concat(o.id))}}]}):(0,e.jsx)(ae.Z,{items:[{key:"preview",label:"\u9884\u89C8"},{key:"rename",label:"\u91CD\u547D\u540D"},{key:"publish",label:"\u53D1\u5E03",style:{display:o.setting.status===0?"flex":"none"}},{key:"stop",label:"\u505C\u6B62",style:{display:o.setting.status===1?"flex":"none"}},{key:"moveOut",label:"\u79FB\u51FA\u6587\u4EF6\u5939",style:{display:o.parentId&&o.parentId!=="0"?"flex":"none"}},{key:"moveIn",label:"\u79FB\u52A8",style:{display:!o.parentId||o.parentId==="0"?"flex":"none"},children:Ou.map(function(O){return{label:O.name,key:O.id}})},{key:"delete",label:"\u5220\u9664"}],onClick:function(ne){var W=ne.key,fe=ne.keyPath,bu=ne.domEvent;W==="rename"?De({title:"\u95EE\u5377\u91CD\u547D\u540D",icon:void 0,content:(0,e.jsxs)("div",{children:[(0,e.jsx)(xe.Z,{message:"\u95EE\u5377\u91CD\u547D\u540D\u6210\u529F\uFF0C\u7CFB\u7EDF\u5185\u5404\u5904\u5C06\u663E\u793A\u91CD\u547D\u540D\u6807\u9898\u3002\u6B64\u64CD\u4F5C\u4E0D\u5F71\u54CD\u516C\u5F00\u95EE\u5377\u540D\u79F0",type:"info",showIcon:!0}),(0,e.jsx)(j.Z,{style:{marginTop:10},onChange:function(M){return T.current=M.target.value},defaultValue:o.name})]}),okText:"\u786E\u8BA4",okType:"primary",cancelText:"\u53D6\u6D88",onOk:function(){new Fe.Uf(o.id).saveOrUpdateProject({name:T.current}).then(function(M){M.code===200&&v(function(re){return(0,A.Z)({},re)})})}}):W==="publish"?De({title:"\u786E\u5B9A\u53D1\u5E03\u5F53\u524D\u95EE\u5377?",icon:(0,e.jsx)(Me.Z,{style:{color:"#1890ff"}}),content:"\u53EA\u6709\u53D1\u5E03\u7684\u95EE\u5377\u624D\u80FD\u6536\u96C6\u6570\u636E",okText:"\u53D1\u5E03",okType:"primary",cancelText:"\u53D6\u6D88",onOk:function(){N.hi.updateSetting({id:o.id,settingKey:"status",settingValue:1}).then(function(M){M.success&&v(function(re){return(0,A.Z)({},re)})})}}):W==="stop"?De({title:"\u786E\u5B9A\u505C\u6B62\u5F53\u524D\u95EE\u5377?",icon:(0,e.jsx)(oe.Z,{}),content:"\u505C\u6B62\u4E4B\u540E\u95EE\u5377\u5C06\u4E0D\u80FD\u7EE7\u7EED\u6536\u96C6\u6570\u636E",okText:"\u505C\u6B62",okType:"danger",cancelText:"\u53D6\u6D88",onOk:function(){N.hi.updateSetting({id:o.id,settingKey:"status",settingValue:0}).then(function(M){M.success&&v(function(re){return(0,A.Z)({},re)})})}}):W==="moveOut"?N.hi.updateProject({id:o.id,parentId:"0"}).then(function(Y){Y.success&&v(function(M){return(0,A.Z)({},M)})}):fe.length>1&&fe[1]==="moveIn"?N.hi.updateProject({id:o.id,parentId:fe[0]}).then(function(Y){Y.success&&v(function(M){return(0,A.Z)({},M)})}):W==="delete"?De({title:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u95EE\u5377?",icon:(0,e.jsx)(oe.Z,{}),content:"\u5220\u9664\u4E4B\u540E\u53EF\u4EE5\u5728\u56DE\u6536\u7AD9\u91CC\u9762\u627E\u56DE",okText:"\u5220\u9664",okType:"danger",cancelText:"\u53D6\u6D88",onOk:function(){new Fe.Uf(o.id).deleteProject(o.id).then(function(M){M.code===200&&v(function(re){return(0,A.Z)({},re)})})}}):W==="preview"&&window.open("/s/".concat(o.id))}})},Nu=function(o){Ne({type:"editName",current:o})},Tu=function(o){X.Z.confirm({title:"\u79FB\u52A8\u5230\u56DE\u6536\u7AD9",content:"\u786E\u5B9A\u8981\u5C06\u6587\u4EF6\u5939 \u201C".concat(o.name,"\u201D \u79FB\u52A8\u5230\u56DE\u6536\u7AD9\u5417\uFF1F "),icon:(0,e.jsx)(oe.Z,{}),okType:"danger",cancelText:"\u53D6\u6D88",okText:"\u786E\u5B9A",onOk:function(ne){return N.hi.deleteProject(o.id).then(function(W){W.success?(ne(),v(function(fe){return(0,A.Z)({},fe)})):U.default.error(W.message)}),!1}})},ku=function(){return L==="card"?(0,e.jsx)(x,{moreMenu:xu}):(0,e.jsx)(k,{moreMenu:xu})},Pu=(0,e.jsx)("div",{children:(0,e.jsx)(_e.Z,{className:"survey-home-search",children:(0,e.jsxs)(ke.Z,{span:24,children:[(0,e.jsxs)(se.ZP.Group,{value:L,onChange:function(o){S(o.target.value),localStorage.setItem(su,o.target.value)},children:[(0,e.jsx)(se.ZP.Button,{value:"card",children:(0,e.jsx)(Re.Z,{})}),(0,e.jsx)(se.ZP.Button,{value:"list",children:(0,e.jsx)(Ve.Z,{})})]}),(0,e.jsx)(j.Z.Search,{className:"search",placeholder:"\u641C\u7D22\u9879\u76EE\u540D\u79F0",onSearch:function(o){v(function(O){return(0,A.Z)((0,A.Z)({},O),{},{name:o})})}})]})})});return(0,e.jsx)(Ze.Provider,{value:{editName:Nu,deleteProject:Tu},children:(0,e.jsxs)(nu.ZP,{header:{title:H?H.name:"\u6211\u7684\u9879\u76EE",ghost:!0,breadcrumb:m?(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(z.Z.Item,{children:(0,e.jsx)(Ge.rU,{to:"/",children:"\u9996\u9875"})}),(0,e.jsx)(z.Z.Item,{children:(0,e.jsx)(Ge.rU,{to:"/project",children:"\u6211\u7684\u9879\u76EE"})}),(0,e.jsx)(z.Z.Item,{children:H==null?void 0:H.name})]}):(0,e.jsxs)(z.Z,{children:[(0,e.jsx)(z.Z.Item,{children:(0,e.jsx)(Ge.rU,{to:"/",children:"\u9996\u9875"})}),(0,e.jsx)(z.Z.Item,{children:"\u6211\u7684\u9879\u76EE"})]})},content:Pu,extra:[(0,e.jsx)(w.Z,{trigger:["click"],overlay:(0,e.jsx)(ae.Z,{onClick:function(o){var O=o.key;O==="newFolder"?Ne({type:"editName"}):O==="survey"?qe.push("/survey/new?".concat(lu().stringify({parentId:m,mode:"survey"}))):O==="importJson"?Oe(!0):O==="exam"?qe.push("/survey/new?".concat(lu().stringify({parentId:m,mode:"exam"}))):O==="importText"?cu(!0):O==="importExcel"&&vu(!0)},items:[{label:"\u95EE\u5377\u8C03\u67E5",key:"survey"},{label:"\u5728\u7EBF\u8003\u8BD5",key:"exam"},{label:"\u901A\u8FC7Excel\u5BFC\u5165(\u5FEB\u67E5)",key:"importExcel"},{label:"\u901A\u8FC7\u6587\u672C\u5BFC\u5165",key:"importText"},{label:"\u901A\u8FC7\u6A21\u677F\u5BFC\u5165",key:"importJson"},{label:"\u65B0\u5EFA\u6587\u4EF6\u5939",key:"newFolder",style:{display:H?"none":"flex"}}]}),placement:"bottomLeft",children:(0,e.jsx)(R.Z,{type:"primary",icon:(0,e.jsx)(q.Z,{}),size:"large",style:{width:200},children:"\u65B0\u5EFA"},"add")},"add")],children:[(0,e.jsxs)("div",{className:"survey-home",children:[ku(),(0,e.jsx)("div",{className:"pagination-container",children:(0,e.jsx)(Te.Z,{size:"small",current:s.current,pageSize:s.pageSize,total:B.total,showTotal:function(o){return"\u5171 ".concat(o," \u6761")},onChange:function(o){v(function(O){return(0,A.Z)((0,A.Z)({},O),{},{current:o})})}})})]}),we&&(0,e.jsx)(je,{onCancel:function(){return Oe(!1)}}),Xe&&Xe.type==="editName"&&(0,e.jsx)(Au,{onCancel:function(){return Ne(void 0)},current:Xe.current,onOk:function(){Ne(void 0),hu(),v(function(o){return(0,A.Z)({},o)})}}),Du&&(0,e.jsx)($,{onCancel:function(){return vu(!1)}}),ju&&(0,e.jsx)(ge.Z,{onClose:function(){return cu(!1)},okText:"\u521B\u5EFA\u9879\u76EE",mode:"survey",title:"\u6587\u672C\u5BFC\u5165\u95EE\u5377",defaultContent:`\u9879\u76EE\u6807\u9898
\u611F\u8C22\u60A8\u80FD\u62BD\u51FA\u51E0\u5206\u949F\u65F6\u95F4\u6765\u53C2\u52A0\u672C\u6B21\u7B54\u9898\uFF0C\u73B0\u5728\u6211\u4EEC\u5C31\u9A6C\u4E0A\u5F00\u59CB\u5427\uFF01\u3010\u6B22\u8FCE\u8BED\u3011

\u60A8\u7ECF\u5E38\u521B\u5EFA\u4EC0\u4E48\u7C7B\u578B\u7684\u9879\u76EE\uFF1F\u3010\u5355\u9009\u9898\u3011
\u95EE\u5377\u8C03\u7814
\u6295\u7968\u8BC4\u9009
\u6D4B\u8BC4\u8003\u8BD5

\u60A8\u4E86\u89E3\u8FC7\u54EA\u4E9B\u95EE\u5377\u7CFB\u7EDF\uFF1F\u3010\u591A\u9009\u9898\u3011
\u95EE\u5377\u7F51
\u95EE\u5377\u661F
\u91D1\u6570\u636E
\u5377\u738B

\u8BF7\u586B\u5199\u60A8\u7684\u95EE\u9898\u548C\u5EFA\u8BAE\u3010\u586B\u7A7A\u9898\u3011

\u8BF7\u586B\u5199\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\uFF1F\u3010\u6A2A\u5411\u586B\u7A7A\u3011
\u59D3\u540D___\u5E74\u9F84___\u5C81
\u8054\u7CFB\u65B9\u5F0F____

\u5730\u533A\u3010\u7EA7\u8054\u9898\u3011
\u7701 \u5E02 \u53BF
\u5317\u4EAC\u5E02 \u6D77\u6DC0\u533A
\u5317\u4EAC\u5E02 \u897F\u57CE\u533A
\u6CB3\u5357\u7701 \u90D1\u5DDE\u5E02 \u7BA1\u57CE\u533A
\u6CB3\u5357\u7701 \u90D1\u5DDE\u5E02 \u9AD8\u65B0\u533A
\u6CB3\u5357\u7701 \u4FE1\u9633\u5E02 \u6D49\u6CB3\u533A
\u6CB3\u5357\u7701 \u4FE1\u9633\u5E02 \u7F8A\u5C71\u65B0\u533A`,onOk:function(o){setTimeout(function(){localStorage.setItem("temp-template",JSON.stringify(o)),qe.push("/survey/new?fromTemplate&mode=survey")},20)}})]})})}),yu=ou,Ze=(0,h.createContext)({})}}]);
