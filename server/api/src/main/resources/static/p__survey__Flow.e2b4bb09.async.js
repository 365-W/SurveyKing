(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6132],{55686:function(ke,_,c){"use strict";var A=c(11849),xe=c(94233),I=c(51890),ue=c(93224),S=c(89366),Y=c(85893),he=function(fe){var F=fe.user,T=(0,ue.Z)(fe,["user"]);return F.avatar?(0,Y.jsx)(I.C,(0,A.Z)({src:"/api/public/preview/".concat(F.avatar),size:T.size||"small"},T)):(0,Y.jsx)(I.C,(0,A.Z)({icon:(0,Y.jsx)(S.Z,{}),size:T.size||"small"},T))};_.Z=he},90586:function(ke,_,c){"use strict";c.d(_,{P:function(){return ce}});var A=c(11849),xe=c(93224),I=c(2299),ue=c(67294),S=c(30381),Y=c.n(S),he=c(85893),ce=function(F){var T=F.children,C=F.syncDisplay,ge=F.isMoment,pe=(0,xe.Z)(F,["children","syncDisplay","isMoment"]),p=(0,ue.useMemo)(function(){return(0,I.$j)(function(x){var B=x.value,M=x.onChange,E=B;return ge&&B&&(E=Y()(B)),ue.cloneElement(T,{value:E,onChange:function(ae){M(ae)}})},(0,I.jM)(function(x,B){return{value:x.value,onChange:function(E){Y().isMoment(E)?B.onInput(E.valueOf()):B.onInput(E)}}}))},[]);return(0,he.jsx)(I.gN,(0,A.Z)((0,A.Z)({},pe),{},{component:[p,F],reactions:[function(x){if(C)if(typeof C=="string"){var B=x.query(x.path.parent().concat(C)).get("value");B?x.display="visible":x.display="none"}else typeof C=="object"&&Object.keys(C).forEach(function(M){var E=x.query(x.path.parent().concat(M)).get("value");C[M].includes(E)?x.display="visible":x.display="none"})}]}))};_.Z=ce},1903:function(ke,_,c){"use strict";c.r(_),c.d(_,{Flow:function(){return jt},default:function(){return Vn}});var A=c(11849),xe=c(49111),I=c(19650),ue=c(57663),S=c(71577),Y=c(3182),he=c(71194),ce=c(50146),fe=c(34792),F=c(48086),T=c(86582),C=c(2824),ge=c(94043),pe=c.n(ge),p=c(67294),x=c(59782),B=c.n(x),M=c(86492),E={pluginName:"control",__lf:null,__controlItems:[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"\u7F29\u5C0F\u6D41\u7A0B\u56FE",text:"\u7F29\u5C0F",onClick:function(){E.__lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"\u653E\u5927\u6D41\u7A0B\u56FE",text:"\u653E\u5927",onClick:function(){E.__lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"\u6062\u590D\u6D41\u7A0B\u539F\u6709\u5C3A\u5BF8",text:"\u9002\u5E94",onClick:function(){E.__lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"\u56DE\u5230\u4E0A\u4E00\u6B65",text:"\u4E0A\u4E00\u6B65",onClick:function(){E.__lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"\u79FB\u5230\u4E0B\u4E00\u6B65",text:"\u4E0B\u4E00\u6B65",onClick:function(){E.__lf.redo()}}],addItem:function(n){E.__controlItems.push(n)},removeItem:function(n){var e=E.__controlItems.findIndex(function(a){return a.key===n});return E.__controlItems.splice(e,1)[0]},install:function(){},render:function(n,e){E.__lf=n,E.__domContainer=e,E.__tool=this.__getControlTool(),e.appendChild(E.__tool)},destroy:function(){try{var n;(n=E.__domContainer)===null||n===void 0||n.removeChild(E.__tool)}catch(e){console.warn("unexpect destory error",e)}},__getControlTool:function(){var n="lf-control-item",e="lf-control-item disabled",a=document.createElement("div"),r=[];return a.className="lf-control",E.__controlItems.forEach(function(s){var o=document.createElement("div"),l=document.createElement("i"),u=document.createElement("span");switch(o.className=e,s.onClick&&(o.onclick=s.onClick.bind(null,E.__lf)),s.onMouseEnter&&(o.onmouseenter=s.onMouseEnter.bind(null,E.__lf)),s.onMouseLeave&&(o.onmouseleave=s.onMouseLeave.bind(null,E.__lf)),l.className=s.iconClass,u.className="lf-control-text",u.title=s.title,u.innerText=s.text,o.append(l,u),s.text){case"\u4E0A\u4E00\u6B65":E.__lf.on("history:change",function(d){var v=d.data.undoAble;o.className=v?n:e});break;case"\u4E0B\u4E00\u6B65":E.__lf.on("history:change",function(d){var v=d.data.redoAble;o.className=v?n:e});break;default:o.className=n;break}r.push(o)}),a.append.apply(a,r),a}},Bt=null;function ae(i,n){for(var e=0;e<n;e++)i+="  ";return i}function me(i,n,e,a){var r="";if(i instanceof Array)for(var s=0,o=i.length;s<o;s++)r+=ae(e,a)+me(i[s],n,e,a+1);else if(typeof i=="object"){var l=!1;r+=ae(e,a)+"<"+n;for(var u in i)u.charAt(0)=="-"?r+=" "+u.substr(1)+'="'+i[u].toString().replace("<","&lt;")+'"':l=!0;if(r+=l?">":" />",l){for(var d in i)d=="#text"?r+=i[d]:d=="#cdata"?r+="<![CDATA["+i[d]+"]]>":d.charAt(0)!="-"&&(r+=me(i[d],d,e,a+1));r+=ae(e,a)+"</"+n+">"}}else r+=ae(e,a)+"<"+n+">"+i.toString()+"</"+n+">";return r}function Dt(i){var n="";for(var e in i)n+=me(i[e],e,`	
`,0);return n}var N=function(){};N.ObjTree=function(){return this},N.ObjTree.VERSION="0.23",N.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`,N.ObjTree.prototype.attr_prefix="-",N.ObjTree.prototype.parseXML=function(i){var n;if(window.DOMParser){var e=new DOMParser,a=e.parseFromString(i,"application/xml");if(!a)return;n=a.documentElement}else window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(i),n=e.documentElement);if(!!n)return this.parseDOM(n)},N.ObjTree.prototype.parseHTTP=function(i,n,e){var a={};for(var r in n)a[r]=n[r];if(a.method||(typeof a.postBody=="undefined"&&typeof a.postbody=="undefined"&&typeof a.parameters=="undefined"?a.method="get":a.method="post"),e){a.asynchronous=!0;var s=this,o=e,l=a.onComplete;a.onComplete=function(v){var h;v&&v.responseXML&&v.responseXML.documentElement&&(h=s.parseDOM(v.responseXML.documentElement)),o(h,v),l&&l(v)}}else a.asynchronous=!1;var u;if(typeof HTTP!="undefined"&&HTTP.Request){a.uri=i;var d=new HTTP.Request(a);d&&(u=d.transport)}else if(typeof Ajax!="undefined"&&Ajax.Request){var d=new Ajax.Request(i,a);d&&(u=d.transport)}if(e)return u;if(u&&u.responseXML&&u.responseXML.documentElement)return this.parseDOM(u.responseXML.documentElement)},N.ObjTree.prototype.parseDOM=function(i){if(!!i){if(this.__force_array={},this.force_array)for(var n=0;n<this.force_array.length;n++)this.__force_array[this.force_array[n]]=1;var e=this.parseElement(i);if(this.__force_array[i.nodeName]&&(e=[e]),i.nodeType!=11){var a={};a[i.nodeName]=e,e=a}return e}},N.ObjTree.prototype.parseElement=function(i){if(i.nodeType!=7){if(i.nodeType==3||i.nodeType==4){var n=i.nodeValue.match(/[^\x00-\x20]/);return n==null?void 0:i.nodeValue}var e,a={};if(i.attributes&&i.attributes.length){e={};for(var r=0;r<i.attributes.length;r++){var s=i.attributes[r].nodeName;if(typeof s=="string"){var o=i.attributes[r].nodeValue;!o||(s=this.attr_prefix+s,typeof a[s]=="undefined"&&(a[s]=0),a[s]++,this.addNode(e,s,a[s],o))}}}if(i.childNodes&&i.childNodes.length){var l=!0;e&&(l=!1);for(var r=0;r<i.childNodes.length&&l;r++){var u=i.childNodes[r].nodeType;u==3||u==4||(l=!1)}if(l){e||(e="");for(var r=0;r<i.childNodes.length;r++)e+=i.childNodes[r].nodeValue}else{e||(e={});for(var r=0;r<i.childNodes.length;r++){var s=i.childNodes[r].nodeName;if(typeof s=="string"){var o=this.parseElement(i.childNodes[r]);!o||(typeof a[s]=="undefined"&&(a[s]=0),a[s]++,this.addNode(e,s,a[s],o))}}}}return e}},N.ObjTree.prototype.addNode=function(i,n,e,a){this.__force_array[n]?(e==1&&(i[n]=[]),i[n][i[n].length]=a):e==1?i[n]=a:e==2?i[n]=[i[n],a]:i[n][i[n].length]=a},N.ObjTree.prototype.writeXML=function(i){var n=this.hash_to_xml(null,i);return this.xmlDecl+n},N.ObjTree.prototype.hash_to_xml=function(i,n){var e=[],a=[];for(var r in n)if(!!n.hasOwnProperty(r)){var s=n[r];r.charAt(0)!=this.attr_prefix?typeof s=="undefined"||s==null?e[e.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?e[e.length]=this.array_to_xml(r,s):typeof s=="object"?e[e.length]=this.hash_to_xml(r,s):e[e.length]=this.scalar_to_xml(r,s):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var o=a.join(""),l=e.join("");return typeof i=="undefined"||i==null||(e.length>0?l.match(/\n/)?l="<"+i+o+`>
`+l+"</"+i+`>
`:l="<"+i+o+">"+l+"</"+i+`>
`:l="<"+i+o+` />
`),l},N.ObjTree.prototype.array_to_xml=function(i,n){for(var e=[],a=0;a<n.length;a++){var r=n[a];typeof r=="undefined"||r==null?e[e.length]="<"+i+" />":typeof r=="object"&&r.constructor==Array?e[e.length]=this.array_to_xml(i,r):typeof r=="object"?e[e.length]=this.hash_to_xml(i,r):e[e.length]=this.scalar_to_xml(i,r)}return e.join("")},N.ObjTree.prototype.scalar_to_xml=function(i,n){return i=="#text"?this.xml_escape(n):"<"+i+">"+this.xml_escape(n)+"</"+i+`>
`},N.ObjTree.prototype.xml_escape=function(i){return i.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var At=N,Re={width:40,height:40},Ue={width:40,height:40},We={width:40,height:40},ze={width:100,height:80},Ve={width:100,height:80},bt={rect:{radius:5,stroke:"rgb(24, 125, 255)"},circle:{r:18,stroke:"rgb(24, 125, 255)"},polygon:{stroke:"rgb(24, 125, 255)"},polyline:{stroke:"rgb(24, 125, 255)",hoverStroke:"rgb(24, 125, 255)",selectedStroke:"rgb(24, 125, 255)"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}},G;(function(i){i.START="startEvent",i.END="endEvent",i.GATEWAY="exclusiveGateway",i.USER="userTask",i.SYSTEM="serviceTask",i.FLOW="sequenceFlow"})(G||(G={}));var Ge=["startEvent","endEvent","exclusiveGateway","userTask","serviceTask","sequenceFlow","completionCondition","multiInstanceLoopCharacteristics","conditionExpression","#text"],He=["-name","-id","incoming","outgoing","-sourceRef","-targetRef"];function ye(i){var n={};return Object.entries(i).forEach(function(e){var a=(0,C.Z)(e,2),r=a[0],s=a[1];s!=null&&(typeof s!="object"?r.indexOf("-")===0||Ge.includes(r)?n[r]=s:n["-".concat(r)]=s:n[r]=ye(s))}),n}function Ee(i){var n={};return Object.entries(i).forEach(function(e){var a=(0,C.Z)(e,2),r=a[0],s=a[1];typeof s=="string"?r.indexOf("-")===0?n[r.substr(1)]=s:n[r]=s:typeof s=="object"?n[r]=Ee(s):n[r]=s}),n}function Ft(i,n){var e=new Map;n.nodes.forEach(function(r){var s,o={"-id":r.id};if((s=r.text)!==null&&s!==void 0&&s.value&&(o["-name"]=r.text.value),r.properties){var l=ye(r.properties);Object.assign(o,l)}e.set(r.id,o),i[r.type]?Array.isArray(i[r.type])?i[r.type].push(o):i[r.type]=[i[r.type],o]:i[r.type]=o});var a=n.edges.map(function(r){var s,o={"-id":r.id,"-sourceRef":r.sourceNodeId,"-targetRef":r.targetNodeId};if((s=r.text)!==null&&s!==void 0&&s.value){var l;o["-name"]=(l=r.text)===null||l===void 0?void 0:l.value}if(r.properties){var u=ye(r.properties);Object.assign(o,u)}return o});i[G.FLOW]=a}function Zt(i,n){i["bpmndi:BPMNEdge"]=n.edges.map(function(e){var a,r=e.id,s=e.pointsList.map(function(l){var u=l.x,d=l.y;return{"-x":u,"-y":d}}),o={"-id":"".concat(r,"_di"),"-bpmnElement":r,"di:waypoint":s};return(a=e.text)!==null&&a!==void 0&&a.value&&(o["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":e.text.x-e.text.value.length*10/2,"-y":e.text.y-7,"-width":e.text.value.length*10,"-height":14}}),o}),i["bpmndi:BPMNShape"]=n.nodes.map(function(e){var a,r=e.id,s=100,o=80,l=e.x,u=e.y,d=K.shapeConfigMap.get(e.type);d&&(s=d.width,o=d.height),l-=s/2,u-=o/2;var v={"-id":"".concat(r,"_di"),"-bpmnElement":r,"dc:Bounds":{"-x":l,"-y":u,"-width":s,"-height":o}};return(a=e.text)!==null&&a!==void 0&&a.value&&(v["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":e.text.x-e.text.value.length*10/2,"-y":e.text.y-7,"-width":e.text.value.length*10,"-height":14}}),v})}function Mt(i){var n=[],e=[],a=i.definitions;if(a){var r=a.process;Object.keys(r).forEach(function(s){if(Ge.includes(s)){var o=r[s];if(s===G.FLOW){var l=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];e=Nt(o,l)}else{var u=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];n=n.concat(St(o,u,s))}}})}return{nodes:n,edges:e}}function St(i,n,e){var a=[];if(Array.isArray(i))i.forEach(function(o){var l;Array.isArray(n)?l=n.find(function(d){return d["-bpmnElement"]===o["-id"]}):l=n;var u=Xe(l,e,o);a.push(u)});else{var r;Array.isArray(n)?r=n.find(function(o){return o["-bpmnElement"]===i["-id"]}):r=n;var s=Xe(r,e,i);a.push(s)}return a}function Xe(i,n,e){var a=Number(i["dc:Bounds"]["-x"]),r=Number(i["dc:Bounds"]["-y"]),s=e["-name"],o=K.shapeConfigMap.get(n);o&&(a+=o.width/2,r+=o.height/2);var l;Object.entries(e).forEach(function(h){var f=(0,C.Z)(h,2),w=f[0],R=f[1];He.indexOf(w)===-1&&(l||(l={}),l[w]=R)}),l&&(l=Ee(l));var u;if(s&&(u={x:a,y:r,value:s},i["bpmndi:BPMNLabel"]&&i["bpmndi:BPMNLabel"]["dc:Bounds"])){var d=i["bpmndi:BPMNLabel"]["dc:Bounds"];u.x=Number(d["-x"])+Number(d["-width"])/2,u.y=Number(d["-y"])+Number(d["-height"])/2}var v={id:i["-bpmnElement"],type:n,x:a,y:r,properties:l};return u&&(v.text=u),v}function Nt(i,n){var e=[];if(Array.isArray(i))i.forEach(function(r){var s;Array.isArray(n)?s=n.find(function(o){return o["-bpmnElement"]===r["-id"]}):s=n,e.push(Ke(s,r))});else{var a;Array.isArray(n)?a=n.find(function(r){return r["-bpmnElement"]===i["-id"]}):a=n,e.push(Ke(a,i))}return e}function Ke(i,n){var e,a=n["-name"];if(a){var r=i["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;a.split(`
`).forEach(function(u){s<u.length&&(s=u.length)}),e={value:a,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var o;Object.entries(n).forEach(function(u){var d=(0,C.Z)(u,2),v=d[0],h=d[1];He.indexOf(v)===-1&&(o||(o={}),o[v]=h)}),o&&(o=Ee(o));var l={id:n["-id"],type:G.FLOW,pointsList:i["di:waypoint"].map(function(u){return{x:Number(u["-x"]),y:Number(u["-y"])}}),sourceNodeId:n["-sourceRef"],targetNodeId:n["-targetRef"],properties:o};return e&&(l.text=e),l}var K={pluginName:"bpmn-adapter",install:function(n){n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut},shapeConfigMap:new Map,setCustomShape:function(n,e){this.shapeConfigMap.set(n,e)},adapterOut:function(n,e){var a={"-id":"".concat(e),"-isExecutable":"true"};Ft(a,n);var r={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};Zt(r,n);var s={definitions:{"-id":"Definitions_".concat(e),"-xmlns":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-xmlns:flowable":"http://flowable.org/bpmn","-xmlns:s":"http://surveyking.cn/bpmn","-targetNamespace":"http://bpmn.io/schema/bpmn","-exporter":"bpmn-js (https://demo.bpmn.io)","-exporterVersion":"7.3.0",process:a,"bpmndi:BPMNDiagram":{"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":r}}};return s},adapterIn:function(n){if(n)return Mt(n)}};K.shapeConfigMap.set(G.START,{width:Re.width,height:Re.height}),K.shapeConfigMap.set(G.END,{width:Ue.width,height:Ue.height}),K.shapeConfigMap.set(G.GATEWAY,{width:We.width,height:We.height}),K.shapeConfigMap.set(G.SYSTEM,{width:ze.width,height:ze.height}),K.shapeConfigMap.set(G.USER,{width:Ve.width,height:Ve.height});var Tt={pluginName:"bpmn-xml-adapter",install:function(n){n.adapterIn=this.adapterXmlIn,n.adapterOut=this.adapterXmlOut},adapterXmlIn:function(n){var e=new At.ObjTree().parseXML(n);return K.adapterIn(e)},adapterXmlOut:function(n){var e=K.adapterOut(n,this.options.extraConf.id);return Dt(e)}},Gn=null,P=c(69610),ee=c(54941),je=c(63543),Ce=c(94663),L=c(43028),k=c(5869),$e=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(a,r){return(0,P.Z)(this,e),a.id||(a.id="starter"),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),n.call(this,a,r)}return(0,ee.Z)(e,[{key:"setAttributes",value:function(){this.r=18}},{key:"getConnectedTargetRules",value:function(){var r=(0,je.Z)((0,Ce.Z)(e.prototype),"getConnectedTargetRules",this).call(this),s={message:"\u8D77\u59CB\u8282\u70B9\u4E0D\u80FD\u4F5C\u4E3A\u8FB9\u7684\u7EC8\u70B9",validate:function(){return!1}};return r.push(s),r}}]),e}(x.CircleNodeModel);$e.extendKey="StartEventModel";var Ye=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(){return(0,P.Z)(this,e),n.apply(this,arguments)}return(0,ee.Z)(e,[{key:"getShape",value:function(){var r=this.props.model,s=r.x,o=r.y,l=this.props.model.getNodeStyle(),u=l.stroke;return(0,x.h)("svg",{x:s-64/2+10,y:o-64/2+10,width:64,height:64,viewBox:"0 0 32 32"},(0,x.h)("path",{fill:u,d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM10.622 8.415l4.879 3.252a.4.4 0 0 1 0 .666l-4.88 3.252a.4.4 0 0 1-.621-.332V8.747a.4.4 0 0 1 .622-.332z"}))}}]),e}(x.CircleNode);Ye.extendKey="StartEventNode";var Pt={type:"startEvent",view:Ye,model:$e},Ot=Pt,It=c(77596),Lt=(0,It.kP)("_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",10);function de(){return Lt()}var Je=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(a,r){return(0,P.Z)(this,e),a.id||(a.id="Event_".concat(de())),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),n.call(this,a,r)}return(0,ee.Z)(e,[{key:"setAttributes",value:function(){this.r=18}},{key:"getConnectedSourceRules",value:function(){var r=(0,je.Z)((0,Ce.Z)(e.prototype),"getConnectedSourceRules",this).call(this),s={message:"\u7ED3\u675F\u8282\u70B9\u4E0D\u80FD\u4F5C\u4E3A\u8FB9\u7684\u8D77\u70B9",validate:function(){return!1}};return r.push(s),r}}]),e}(x.CircleNodeModel);Je.extendKey="EndEventModel";var Qe=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(){return(0,P.Z)(this,e),n.apply(this,arguments)}return(0,ee.Z)(e,[{key:"getAnchorStyle",value:function(){return{visibility:"hidden"}}},{key:"getShape",value:function(){var r=this.props.model,s=r.getNodeStyle(),o=r.x,l=r.y,u=r.r,d=r.width,v=r.height,h=(0,je.Z)((0,Ce.Z)(e.prototype),"getShape",this).call(this),f=this.props.model.getNodeStyle(),w=f.fill,R=f.stroke,U=f.strokeWidth,q=(0,x.h)("svg",{x:o-64/2+10,y:l-64/2+10,width:64,height:64,viewBox:"0 0 32 32"},(0,x.h)("path",{fill:R,d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM9 9h6v6H9V9z"}));return q}}]),e}(x.CircleNode);Qe.extendKey="EndEventView";var kt={type:"endEvent",view:Qe,model:Je},Rt=kt,qe=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(a,r){var s;return(0,P.Z)(this,e),a.id||(a.id="Gateway_".concat(de())),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),s=n.call(this,a,r),s.points=[[25,0],[50,25],[25,50],[0,25]],s}return e}(x.PolygonNodeModel);qe.extendKey="ExclusiveGatewayModel";var _e=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(){return(0,P.Z)(this,e),n.apply(this,arguments)}return(0,ee.Z)(e,[{key:"getShape",value:function(){var r=this.props.model,s=r.x,o=r.y,l=r.width,u=r.height,d=r.points,v=r.getNodeStyle();return(0,x.h)("g",{transform:"matrix(1 0 0 1 ".concat(s-l/2," ").concat(o-u/2,")")},(0,x.h)("polygon",(0,A.Z)((0,A.Z)({},v),{},{x:s,y:o,points:d})),(0,x.h)("path",(0,A.Z)({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},v)))}}]),e}(x.PolygonNode);_e.extendKey="ExclusiveGatewayNode";var Ut={type:"exclusiveGateway",view:_e,model:qe},Wt=Ut,et=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(a,r){return(0,P.Z)(this,e),a.id||(a.id="Activity_".concat(de())),n.call(this,a,r)}return e}(x.RectNodeModel);et.extendKey="UserTaskModel";var tt=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(){return(0,P.Z)(this,e),n.apply(this,arguments)}return(0,ee.Z)(e,[{key:"getLabelShape",value:function(){var r=this.props.model,s=r.x,o=r.y,l=r.width,u=r.height,d=r.getNodeStyle();return(0,x.h)("svg",{x:s-l/2+5,y:o-u/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},(0,x.h)("path",{fill:d.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))}},{key:"getShape",value:function(){var r=this.props.model,s=r.x,o=r.y,l=r.width,u=r.height,d=r.radius,v=r.getNodeStyle();return(0,x.h)("g",{},[(0,x.h)("rect",(0,A.Z)((0,A.Z)({},v),{},{x:s-l/2,y:o-u/2,rx:d,ry:d,width:l,height:u})),this.getLabelShape()])}}]),e}(x.RectNode);tt.extendKey="UserTaskNode";var zt={type:"userTask",view:tt,model:et},Vt=zt,nt=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(a,r){return(0,P.Z)(this,e),a.id||(a.id="Activity_".concat(de())),n.call(this,a,r)}return e}(x.RectNodeModel);nt.extendKey="ServiceTaskModel";var it=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(){return(0,P.Z)(this,e),n.apply(this,arguments)}return(0,ee.Z)(e,[{key:"getLabelShape",value:function(){var r=this.props.model,s=r.x,o=r.y,l=r.width,u=r.height,d=r.getNodeStyle();return(0,x.h)("svg",{x:s-l/2+5,y:o-u/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},(0,x.h)("path",{fill:d.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))}},{key:"getShape",value:function(){var r=this.props.model,s=r.x,o=r.y,l=r.width,u=r.height,d=r.radius,v=r.getNodeStyle();return(0,x.h)("g",{},[(0,x.h)("rect",(0,A.Z)({x:s-l/2,y:o-u/2,rx:d,ry:d,width:l,height:u},v)),this.getLabelShape()])}}]),e}(x.RectNode);it.extendKey="ServiceTaskNode";var Gt={type:"serviceTask",view:it,model:nt},Ht=Gt,rt=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(a,r){return(0,P.Z)(this,e),a.id||(a.id="Flow_".concat(de())),n.call(this,a,r)}return e}(x.PolylineEdgeModel);rt.extendKey="SequenceFlowModel";var at=function(i){(0,L.Z)(e,i);var n=(0,k.Z)(e);function e(){return(0,P.Z)(this,e),n.apply(this,arguments)}return e}(x.PolylineEdge);at.extendKey="SequenceFlowEdge";var Xt={type:"sequenceFlow",view:at,model:rt},Kt=Xt,st=function i(n){var e=n.lf;(0,P.Z)(this,i),e.setTheme(bt),e.register(Ot),e.register(Rt),e.register(Wt),e.register(Vt),e.register(Ht),e.options.customBpmnEdge||(e.register(Kt),e.setDefaultEdgeType("sequenceFlow"))};st.pluginName="BpmnElement";var Hn=c(57338),ot=c(25084),$t=c(29656),Xn=c(29589),t=c(85893),Yt={mode:"application/xml",lineWrapping:!0,lineNumbers:!0},Jt=function(n){var e=n.visible,a=n.xml,r=n.onClose,s=(0,p.useState)(),o=(0,C.Z)(s,2),l=o[0],u=o[1];return(0,t.jsx)(ot.Z,{visible:e,onClose:function(){return r(l.getValue())},width:850,className:"flow-drawer",children:(0,t.jsx)($t.Rt,{autoCursor:!1,value:a,options:Yt,editorDidMount:function(v){return u(v)},onChange:function(){}})})},y=c(2299),lt={};function se(i,n){lt[i]=n}function we(i){return lt[i]}var Kn=c(18106),J=c(67164),$n=c(43358),Z=c(97268),Qt=c(32059),Yn=c(13254),ut=c(14277),Jn=c(88983),Be=c(47933),oe=c(11628),qt=c(76826),ct=c(96486),_t=["FillBlank","MultipleBlank","Textarea","Signature","Radio","Checkbox","Select","Cascader","MatrixAuto","MatrixRadio","MatrixCheckbox","MatrixFillBlank","MatrixScore","Upload","Score","Nps","Remark","SplitLine","User","Dept"],en=["Pagination","Remark","SplitLine"],tn={Pagination:"\u5206\u9875",Remark:"\u5907\u6CE8",SplitLine:"\u5206\u5272\u7EBF"};function dt(i){var n=[];return i&&((_t.includes(i.type)||en.includes(i.type))&&n.push({id:i.id,title:tn[i.type]||(0,qt.WO)(i.title),type:i.type}),i.children&&i.children.map(function(e){var a=dt(e);a&&n.push.apply(n,(0,T.Z)(a))})),n}var nn=function(n){var e=n.value,a=n.onChange;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:n.title}),(0,t.jsx)("td",{onClick:function(){return a(2)},children:(0,t.jsx)(Be.ZP,{value:2,checked:e===2})}),(0,t.jsx)("td",{onClick:function(){return a(1)},children:(0,t.jsx)(Be.ZP,{value:1,checked:e===1})}),(0,t.jsx)("td",{onClick:function(){return a(0)},children:(0,t.jsx)(Be.ZP,{value:0,checked:e===0})})]},n.id)},De=function(n){var e=n.onChange,a=n.value,r=a===void 0?{}:a,s=(0,oe.IE)(),o=s.schema,l=(0,p.useMemo)(function(){return dt(o)},[o]);(0,p.useEffect)(function(){if((0,ct.isEmpty)(r)&&l.length>0){var d={};l.forEach(function(v){return d[v.id]=2}),e&&e(d)}},[o,r,l,e]);var u=function(v){e&&e(l.reduce(function(h,f){return h[f.id]=v,h},{}))};return o?(0,t.jsx)("div",{children:(0,t.jsxs)("table",{className:"field-permission-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:"64%"},children:"\u5B57\u6BB5\u540D"}),(0,t.jsx)("th",{style:{width:"12%"},children:"\u53EF\u7F16\u8F91"}),(0,t.jsx)("th",{style:{width:"12%"},children:"\u4EC5\u53EF\u89C1"}),(0,t.jsx)("th",{style:{width:"12%"},children:"\u9690\u85CF"})]})}),(0,t.jsx)("tbody",{children:l.map(function(d){return(0,p.createElement)(nn,(0,A.Z)((0,A.Z)({},d),{},{value:r[d.id],onChange:function(h){e&&e((0,A.Z)((0,A.Z)({},r),{},(0,Qt.Z)({},d.id,h)))},key:d.id}))})}),(0,t.jsx)("tfoot",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{}),(0,t.jsx)("td",{children:(0,t.jsx)(S.Z,{size:"small",type:"link",onClick:function(){return u(2)},children:"\u5168\u9009"})}),(0,t.jsx)("td",{children:(0,t.jsx)(S.Z,{size:"small",type:"link",onClick:function(){return u(1)},children:"\u5168\u9009"})}),(0,t.jsx)("td",{children:(0,t.jsx)(S.Z,{size:"small",type:"link",onClick:function(){return u(0)},children:"\u5168\u9009"})})]})})]})}):(0,t.jsx)("div",{children:(0,t.jsx)(ut.Z,{image:ut.Z.PRESENTED_IMAGE_SIMPLE,description:"\u95EE\u5377\u4E3A\u7A7A"})})},Qn=c(20136),rn=c(55241),qn=c(94233),Ae=c(51890),te=c(68489),vt=c(49101),_n=c(22385),ht=c(31097),an=c(43061),be=function(n){var e=n.title,a=n.onClose,r=(0,p.useState)(!1),s=(0,C.Z)(r,2),o=s[0],l=s[1];return(0,t.jsx)(ht.Z,{title:e,children:(0,t.jsxs)("div",{style:{position:"relative"},onMouseOver:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:[n.children,(0,t.jsx)(an.Z,{onClick:function(){a&&a()},style:{color:"#f5222d",cursor:"pointer",visibility:o?"visible":"hidden",position:"absolute",right:0,top:0,transform:"translate(25%, -25%)",transformOrigin:"100% 0%"}})]})})},ei=c(71153),Fe=c(60331),ti=c(13062),le=c(71230),ni=c(48736),ft=c(27049),ii=c(89032),H=c(15746),ri=c(62999),pt=c(51753),sn=c(60780),on=c.n(sn),ln=Z.Z.Option,un=(0,y.Pi)(function(i){var n=i.onChange,e=i.orgTreeData,a=i.positions,r=(0,p.useState)(),s=(0,C.Z)(r,2),o=s[0],l=s[1],u=(0,p.useState)(),d=(0,C.Z)(u,2),v=d[0],h=d[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(le.Z,{gutter:10,children:[(0,t.jsx)(H.Z,{span:16,children:(0,t.jsx)(pt.Z,{onChange:function(w){return l(w)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:[{title:"\u53D1\u8D77\u4EBA\u5F53\u524D\u90E8\u95E8",value:"${currentDeptId}",key:"${currentDeptId}"},{title:"\u53D1\u8D77\u4EBA\u4E0A\u7EA7\u90E8\u95E8",value:"${parentDeptId}",key:"${parentDeptId}"}].concat((0,T.Z)(e)),placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0,value:o})}),(0,t.jsx)(H.Z,{span:8,children:(0,t.jsx)(Z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",allowClear:!0,value:v,onChange:function(w){return h(w)},children:a.map(function(f){return(0,t.jsx)(ln,{value:f.id,children:f.name},f.id)})})})]}),(0,t.jsx)(le.Z,{style:{marginTop:10},children:(0,t.jsx)(H.Z,{children:(0,t.jsx)(S.Z,{icon:(0,t.jsx)(vt.Z,{}),onClick:function(){(o||v)&&n("P:".concat(o||"",":").concat(v||""))},children:"\u6DFB\u52A0"})})})]})}),Ze=J.Z.TabPane,xt=Z.Z.Option,cn=(0,y.Pi)(function(i){var n=i.value,e=n===void 0?[]:n,a=i.onChange,r=(0,te.m2)(),s=(0,te.LF)(e),o=r.depts,l=r.users,u=r.roles,d=r.positions,v=(0,p.useState)(),h=(0,C.Z)(v,2),f=h[0],w=h[1];(0,p.useEffect)(function(){f&&r.loadUsers({deptId:f,pageSize:1024})},[f,r]);var R=(0,p.useMemo)(function(){return on()(o.map(function(g){return{value:g.id,title:g.name,key:g.id,parentId:g.parentId}}),{parentProperty:"parentId",customID:"value"})},[o]),U=function(D){var j=(0,T.Z)(e);D.forEach(function(m){j.includes(m)||j.push(m)}),a(j)},q=function(){for(var D=arguments.length,j=new Array(D),m=0;m<D;m++)j[m]=arguments[m];a((0,T.Z)(e.filter(function(b){return!j.includes(b)})))};return(0,t.jsx)("div",{style:{width:400},children:(0,t.jsxs)(J.Z,{defaultActiveKey:"1",children:[(0,t.jsx)(Ze,{tab:"\u6210\u5458",children:(0,t.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,t.jsxs)(le.Z,{gutter:20,children:[(0,t.jsx)(H.Z,{span:16,children:(0,t.jsx)(pt.Z,{onChange:function(D){return w(D)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:R,placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0})}),(0,t.jsx)(H.Z,{span:8,children:(0,t.jsx)(Z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",allowClear:!0,showSearch:!0,mode:"multiple",onChange:function(D){return U(D)},maxTagCount:0,value:e.filter(function(g){return g.startsWith("U:")}),dropdownRender:function(D){return(0,t.jsxs)("div",{children:[D,(0,t.jsx)(ft.Z,{style:{margin:"4px 0"}}),(0,t.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8},children:(0,t.jsx)(S.Z,{size:"small",type:"link",onClick:function(){return U(l.map(function(m){return"U:".concat(m.id)}))},children:"\u5168\u9009"})})]})},children:l.map(function(g){return(0,t.jsx)(xt,{value:"U:".concat(g.id),children:g.name},g.id)})})})]}),(0,t.jsx)(I.Z,{style:{marginTop:20},wrap:!0,children:e.filter(function(g){return g.startsWith("U:")}).map(function(g){return(0,t.jsx)(Fe.Z,{closable:!0,color:"blue",onClose:function(){return q(g)},children:s.user[g.split(":")[1]]},g)})})]})},"fieldPermission"),(0,t.jsx)(Ze,{tab:"\u89D2\u8272",children:(0,t.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,t.jsx)(Z.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",allowClear:!0,showSearch:!0,mode:"multiple",value:e.filter(function(g){return g.startsWith("R:")}),onChange:function(D){return U(D)},maxTagCount:0,children:u.map(function(g){return(0,t.jsx)(xt,{value:"R:".concat(g.id),children:g.name},g.id)})}),(0,t.jsx)(I.Z,{style:{marginTop:20},wrap:!0,children:e.filter(function(g){return g.startsWith("R:")}).map(function(g){return(0,t.jsx)(Fe.Z,{closable:!0,color:"blue",onClose:function(){return q(g)},children:s.role[g.split(":")[1]]},g)})})]})},"basicSetting"),(0,t.jsx)(Ze,{tab:"\u673A\u6784\u5C97\u4F4D",children:(0,t.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,t.jsx)(un,{positions:d,orgTreeData:R,onChange:function(D){return U([D])}}),(0,t.jsx)(I.Z,{style:{marginTop:20},wrap:!0,children:e.filter(function(g){return g.startsWith("P:")}).map(function(g){var D=g.split(":"),j=(0,C.Z)(D,3),m=j[1],b=j[2];return(0,t.jsxs)(Fe.Z,{closable:!0,color:"blue",onClose:function(){return q(g)},children:[s.org[m],"-",s.position[b]]},m+":"+b)})})]})},"advanceSetting")]})})}),dn=c(55686),ve=(0,te.Gr)(function(i){var n=i.value,e=n===void 0?[]:n,a=i.onChange,r=(0,te.LF)(e),s=(0,te.m2)(),o=s.users,l=function(){for(var d=arguments.length,v=new Array(d),h=0;h<d;h++)v[h]=arguments[h];a((0,T.Z)(e.filter(function(f){return!v.includes(f)})))};return(0,t.jsx)("div",{style:{lineHeight:"36px",paddingTop:10},children:(0,t.jsxs)(I.Z,{wrap:!0,children:[(0,t.jsx)(rn.Z,{content:(0,t.jsx)(cn,{onChange:a,value:e}),trigger:"click",placement:"leftTop",children:(0,t.jsx)(Ae.C,{className:"add-user",icon:(0,t.jsx)(vt.Z,{}),size:24})}),e.map(function(u){var d=u.split(":"),v=(0,C.Z)(d,3),h=v[0],f=v[1],w=v[2];if(h=="U"){var R=o.find(function(U){return U.id===f});return(0,t.jsx)(be,{title:r.user[f],onClose:function(){return l(u)},children:(0,t.jsx)(dn.Z,{user:{avatar:R==null?void 0:R.avatar},style:{backgroundColor:"#87d068"},size:24})},f)}else return h==="R"?(0,t.jsx)(be,{title:r.role[f],onClose:function(){return l(u)},children:(0,t.jsx)(Ae.C,{style:{backgroundColor:"#40a9ff"},size:24,children:"R"})},f):h==="P"?(0,t.jsx)(be,{title:"".concat(r.org[f],"-").concat(r.position[w]),onClose:function(){return l(u)},children:(0,t.jsx)(Ae.C,{style:{backgroundColor:"#f56a00"},size:24,children:"P"})},"".concat(f,"-").concat(w)):(0,t.jsx)(t.Fragment,{})})]})})},{name:"identity"}),ai=null,si=c(47673),Me=c(4107),oi=c(77576),vn=c(12028),hn=c(2603),fn=c(11075),pn=c(13105),xn=c(3157),gn=c(65602),mn=c(89792),yn=c(15360),ne=(0,te.Gr)(function(i){var n=i.value,e=i.onChange,a=i.initialValue;return(0,t.jsx)(vn.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",defaultChecked:!!a,checked:n,onChange:function(s){return e(s)}})}),En=(0,te.Gr)(function(i){var n=i.value,e=i.onChange;return(0,t.jsx)(Me.Z,{value:n,onChange:e})}),Se=(0,y.Pi)(function(i){var n=i.settings;return(0,t.jsxs)(y.Wo,{name:"setting",children:[n.includes("passwordRequired")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(hn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u586B\u5199\u5BC6\u7801"}),(0,t.jsx)(ne,{name:"passwordRequired",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u51ED\u5BC6\u7801\u624D\u80FD\u586B\u5199\u8868\u5355"}),(0,t.jsx)("div",{className:"setting-content",children:(0,t.jsx)(En,{name:"password",syncDisplay:"passwordRequired"})})]})]}),n.includes("allowWithdrawStarter")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(fn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u5141\u8BB8\u64A4\u56DE"}),(0,t.jsx)(ne,{name:"allowWithdraw",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u5141\u8BB8\u7533\u8BF7\u4EBA\u5BF9\u672A\u8FDB\u5165\u6D41\u7A0B\uFF08\u7B2C\u4E00\u4E2A\u6D41\u7A0B\u8282\u70B9\u4E3A\u5F85\u5904\u7406\u72B6\u6001\uFF09\u7684\u7533\u8BF7\u8FDB\u884C\u64A4\u56DE"})]})]}),n.includes("flowLogVisible")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(pn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u6D41\u7A0B\u65E5\u5FD7"}),(0,t.jsx)(ne,{name:"flowLogVisible",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u5141\u8BB8\u67E5\u770B\u6D41\u7A0B\u65E5\u5FD7"})]})]}),n.includes("allowAssignee")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(xn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u4EE3\u529E\u8F6C\u4EA4"}),(0,t.jsx)(ne,{name:"allowAssignee",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u5C06\u5F85\u529E\u4E8B\u9879\u8F6C\u4EA4\u7ED9\u5176\u4ED6\u6210\u5458\u5904\u7406"}),(0,t.jsx)("div",{className:"setting-content",children:(0,t.jsx)(ve,{name:"assignee",syncDisplay:"allowAssignee"})})]})]}),n.includes("allowWithdrawUser")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(gn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u6D41\u7A0B\u64A4\u56DE"}),(0,t.jsx)(ne,{name:"allowWithdraw",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u5BF9\u5DF2\u5904\u7406\u8FC7\u7684\u5F85\u529E\u6570\u636E\u8FDB\u884C\u64A4\u56DE"})]})]}),n.includes("allowGoBack")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(mn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u6D41\u7A0B\u56DE\u9000"}),(0,t.jsx)(ne,{name:"allowGoBack",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u5C06\u6D41\u7A0B\u56DE\u9000\u5230\u4E4B\u524D\u7684\u8282\u70B9\uFF0C\u4EC5\u5BA1\u6279\u8282\u70B9\u53EF\u7528"})]})]}),n.includes("allowFinishFlow")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(yn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u6D41\u7A0B\u62D2\u7EDD"}),(0,t.jsx)(ne,{name:"allowFinishFlow",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u4EE5\u62D2\u7EDD\u8BE5\u6D41\u7A0B\uFF08\u62D2\u7EDD\u540E\u6D41\u7A0B\u76F4\u63A5\u7ED3\u675F\uFF0C\u6807\u8BB0\u4E3A\u5DF2\u62D2\u7EDD\uFF09"})]})]})]})}),jn=c(54977),Cn=function(n){var e=n.value,a=n.onChange,r=(0,p.useState)(!1),s=(0,C.Z)(r,2),o=s[0],l=s[1],u=(0,p.useRef)(null),d=function(h){a&&a(h)};return(0,p.useEffect)(function(){if(o){var v;(v=u.current)===null||v===void 0||v.focus()}},[o]),o?(0,t.jsx)(Me.Z,{ref:u,value:e,onChange:function(h){return d(h.target.value)},onKeyUp:function(h){h.key==="Enter"&&l(!1)},onBlur:function(h){d(h.target.value),l(!1)}}):(0,t.jsxs)("div",{style:{cursor:"pointer"},className:"title",onClick:function(){return l(!0)},children:[(0,t.jsx)("span",{children:e||"\u70B9\u51FB\u8BBE\u7F6E\u540D\u79F0"}),(0,t.jsx)(jn.Z,{style:{marginLeft:10}})]})},V=c(90586),gt=Z.Z.Option,Ne=J.Z.TabPane,wn=(0,y.Pi)(function(){var i=(0,oe.IE)(),n=(0,p.useContext)(Q),e=n.active,a=n.flow,r=(0,y.cI)(),s=r.query("".concat(i.id,".identity")).get("value"),o=(0,p.useState)(s?"assign":"all"),l=(0,C.Z)(o,2),u=l[0],d=l[1];return(0,p.useEffect)(function(){var v=u==="all"?"none":"visible",h=r.query("".concat(i.id,".identity")).take();h&&h.setDisplay(v)},[u]),(0,p.useEffect)(function(){a==null||a.setProperties(e.id,{candidateStarterUsers:s?s.filter(function(v){return v.startsWith("U:")}).join(","):void 0,candidateStarterGroups:s?s.map(function(v){return!v.startsWith("U:")}).join(","):void 0})},[s]),(0,t.jsxs)(y.Wo,{name:i.id,children:[(0,t.jsx)(y.gN,{name:"id",value:i.id}),(0,t.jsx)(y.gN,{name:"flowType",value:"process"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u7533\u8BF7\u4EBA"}),(0,t.jsx)("div",{children:(0,t.jsxs)(Z.Z,{style:{width:200},onChange:function(h){return d(h)},value:u,children:[(0,t.jsx)(gt,{value:"all",children:"\u6240\u6709\u4EBA\u53EF\u586B"}),(0,t.jsx)(gt,{value:"assign",children:"\u6307\u5B9A\u6210\u5458\u53EF\u586B"})]})}),u==="assign"&&(0,t.jsx)(ve,{}),(0,t.jsxs)(J.Z,{defaultActiveKey:"1",children:[(0,t.jsx)(Ne,{tab:"\u5B57\u6BB5\u8BBE\u7F6E",children:(0,t.jsx)(V.Z,{name:"fieldPermission",children:(0,t.jsx)(De,{})})},"fieldPermission"),(0,t.jsx)(Ne,{tab:"\u57FA\u7840\u8BBE\u7F6E",children:(0,t.jsx)(Se,{settings:["passwordRequired","flowLogVisible","allowWithdrawStarter"]})},"basicSetting"),(0,t.jsx)(Ne,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",children:"\u9AD8\u7EA7\u8BBE\u7F6E"},"advanceSetting")]})]})]})});se("Process",wn);var Bn=(0,y.Pi)(function(){var i,n=(0,p.useContext)(Q),e=n.flow,a=n.active,r=function(o){e==null||e.updateText(a.id,o)};return(0,t.jsxs)(y.Wo,{name:a.id,children:[(0,t.jsx)(y.gN,{name:"id",value:a.id}),(0,t.jsxs)("div",{children:[(0,t.jsx)(le.Z,{gutter:[10,10],children:(0,t.jsxs)(H.Z,{span:12,children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u670D\u52A1\u540D\u79F0"}),(0,t.jsx)("div",{children:(0,t.jsx)(Me.Z,{placeholder:"\u8BBE\u7F6E\u540D\u79F0",onChange:function(o){return r(o.target.value)},defaultValue:(i=a.text)===null||i===void 0?void 0:i.value})})]})}),(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u6761\u4EF6\u516C\u5F0F"})]})]})});se("StartEvent",Bn);var Dn=c(1870),mt=Z.Z.Option,Te=J.Z.TabPane,An=(0,y.Pi)(function(){var i=(0,p.useContext)(Q),n=i.flow,e=i.active,a=(0,y.cI)(),r=a.query("".concat(e.id,".setting.isSequential")).get("value"),s=a.query("".concat(e.id,".identity")).get("value"),o=a.query("".concat(e.id,".setting.approveType")).get("value");return(0,p.useEffect)(function(){if((s==null?void 0:s.length)===1&&s[0].startsWith("U:")){n==null||n.setProperties(e.id,{"flowable:assignee":s[0].replace("U:",""),"flowable:candidateUsers":null,"flowable:candidateGroups":null,multiInstanceLoopCharacteristics:null});return}if(s&&r===1&&o===1){s.every(function(l){return l.startsWith("U:")})?n==null||n.setProperties(e.id,{"flowable:assignee":null,"flowable:candidateUsers":s==null?void 0:s.filter(function(l){return l.startsWith("U:")}).map(function(l){return l.replace("U:","")}).join(","),"flowable:candidateGroups":null,multiInstanceLoopCharacteristics:null}):n==null||n.setProperties(e.id,{"flowable:assignee":null,"flowable:candidateUsers":"${t.getUsers('".concat(e.id,"', starterUserId)}"),"flowable:candidateGroups":null,multiInstanceLoopCharacteristics:null});return}n==null||n.setProperties(e.id,{"flowable:assignee":"${t.getAssignee(user)}","flowable:candidateGroups":"${t.getCandidateGroups(user)}",multiInstanceLoopCharacteristics:{isSequential:r===1?"false":"true","flowable:collection":"${t.getUser(execution)}","flowable:elementVariable":"user",completionCondition:"${t.isComplete(execution) }"}})},[r,s,o]),(0,t.jsxs)(y.Wo,{name:e.id,children:[(0,t.jsx)(y.gN,{name:"id",value:e.id}),(0,t.jsx)(y.gN,{name:"flowType",value:"userTask"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(le.Z,{gutter:[10,10],children:[(0,t.jsxs)(H.Z,{span:12,children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u8D1F\u8D23\u4EBA"}),(0,t.jsx)("div",{children:(0,t.jsx)(y.Wo,{name:"setting",children:(0,t.jsx)(V.Z,{name:"isSequential",initialValue:1,children:(0,t.jsxs)(Z.Z,{style:{width:"100%"},children:[(0,t.jsx)(Z.Z.Option,{value:1,children:"\u5E38\u89C4\u5BA1\u6279"}),(0,t.jsx)(Z.Z.Option,{value:2,children:"\u9010\u7EA7\u5BA1\u6279"})]})})})})]}),r===1&&(0,t.jsxs)(H.Z,{span:12,children:[(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u5BA1\u6279\u7C7B\u578B",(0,t.jsx)(ht.Z,{title:"\u8D1F\u8D23\u4EBA\u4E3A\u591A\u4EBA\u65F6\u7684\u5BA1\u6279\u65B9\u5F0F",children:(0,t.jsx)(Dn.Z,{style:{marginLeft:5,color:"rgba(43,52,65,.4)",cursor:"pointer"}})})]}),(0,t.jsx)("div",{children:(0,t.jsx)(y.Wo,{name:"setting",children:(0,t.jsx)(V.Z,{name:"approveType",initialValue:1,syncDisplay:{isSequential:[1]},children:(0,t.jsxs)(Z.Z,{style:{width:"100%"},children:[(0,t.jsx)(mt,{value:1,children:"\u6216\u7B7E(\u4E00\u540D\u8D1F\u8D23\u4EBA\u901A\u8FC7\u6216\u8005\u62D2\u7EDD\u5373\u53EF)"}),(0,t.jsx)(mt,{value:2,children:"\u4F1A\u7B7E(\u9700\u6240\u6709\u8D1F\u8D23\u4EBA\u901A\u8FC7)"})]})})})})]}),(0,t.jsx)(H.Z,{span:24,children:(0,t.jsx)(ve,{})})]}),(0,t.jsxs)(J.Z,{defaultActiveKey:"1",children:[(0,t.jsx)(Te,{tab:"\u5B57\u6BB5\u8BBE\u7F6E",children:(0,t.jsx)(V.Z,{name:"fieldPermission",children:(0,t.jsx)(De,{})})},"fieldPermission"),(0,t.jsx)(Te,{tab:"\u57FA\u7840\u8BBE\u7F6E",children:(0,t.jsx)(Se,{settings:["allowAssignee","allowFinishFlow","allowGoBack","allowWithdrawStarter","flowLogVisible"]})},"basicSetting"),(0,t.jsx)(Te,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",children:"\u9AD8\u7EA7\u8BBE\u7F6E"},"advanceSetting")]})]})]})});se("userTask",An);var bn=function(){return(0,t.jsx)("div",{})};se("EndEvent",bn);var X=c(1997),Fn=(0,y.Pi)(function(){var i=(0,p.useContext)(Q),n=i.flow,e=i.active,a=(0,y.cI)(),r=(0,oe.IE)(),s=r.schema,o=(0,p.useState)(!1),l=(0,C.Z)(o,2),u=l[0],d=l[1],v=(0,p.useMemo)(function(){return(0,X.sJ)(r.schema)},[r]),h=a.query("".concat(e.id,".expression")).get("value");return(0,p.useEffect)(function(){n==null||n.setProperties(e.id,{conditionExpression:{"xsi:type":"tFormalExpression","#text":"${t.condition(execution)}"}})},[h]),(0,t.jsxs)(y.Wo,{name:e.id,children:[(0,t.jsx)(y.gN,{name:"id",value:e.id}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u6761\u4EF6\u516C\u5F0F",(0,t.jsx)(S.Z,{type:"link",onClick:function(){return d(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,t.jsx)("div",{className:"formula-container",children:(0,t.jsx)(V.Z,{name:"expression",children:(0,t.jsx)(X.ML,{variable:v,readOnly:!0,placeholder:"\u516C\u5F0F\u4E3A\u7A7A\uFF0C\u8BF7\u8BBE\u7F6E"})})}),r.schema&&(0,t.jsx)(X.ZP,{visible:u,value:h,title:"\u6761\u4EF6\u516C\u5F0F\u8BBE\u7F6E",schema:s,onCancel:function(){return d(!1)},functions:[{name:"\u57FA\u7840",functions:[{name:"hah",description:"heih"}]}],onOk:function(w){a.setValuesIn("".concat(e.id,".expression"),w),d(!1)}})]})]})});se("sequenceFlow",Fn);var Pe=J.Z.TabPane,Zn=(0,y.Pi)(function(){var i=(0,p.useContext)(Q),n=i.flow,e=i.active,a=(0,y.cI)(),r=(0,oe.IE)(),s=(0,p.useState)(!1),o=(0,C.Z)(s,2),l=o[0],u=o[1],d=(0,p.useMemo)(function(){return(0,X.sJ)(r.schema)},[r]),v=a.query("".concat(e.id,".expression")).get("value"),h=a.query("".concat(e.id,".flowType")).get("value");return(0,p.useEffect)(function(){n==null||n.setProperties(e.id,{"flowable:expression":"${t.serve(execution)}"})},[v,e]),(0,p.useEffect)(function(){if(h){var f;a.query("*(".concat(e.id,".copyToFlowType,").concat(e.id,".mailFlowType,").concat(e.id,".smsFlowType,").concat(e.id,".httpFlowType)")).forEach(function(w){return w.setDisplay("none")}),(f=a.query("".concat(e.id,".").concat(h,"FlowType")).take())===null||f===void 0||f.setDisplay("visible"),n==null||n.setProperties(e.id,{"s:type":h})}},[h,e]),(0,t.jsxs)(y.Wo,{name:e.id,children:[(0,t.jsx)(y.gN,{name:"id",value:e.id}),(0,t.jsxs)("div",{children:[(0,t.jsx)(le.Z,{gutter:[10,10],children:(0,t.jsxs)(H.Z,{span:12,children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u670D\u52A1\u7C7B\u578B"}),(0,t.jsx)("div",{children:(0,t.jsx)(V.Z,{name:"flowType",initialValue:"copyTo",children:(0,t.jsxs)(Z.Z,{style:{width:200},children:[(0,t.jsx)(Z.Z.Option,{value:"copyTo",children:"\u6284\u9001\u4EFB\u52A1"}),(0,t.jsx)(Z.Z.Option,{value:"mail",children:"\u53D1\u9001\u90AE\u4EF6"}),(0,t.jsx)(Z.Z.Option,{value:"sms",children:"\u53D1\u9001\u77ED\u4FE1"}),(0,t.jsx)(Z.Z.Option,{value:"http",children:"\u8C03\u7528\u63A5\u53E3"})]})})})]})}),h==="copyTo"&&(0,t.jsx)(y.jG,{name:"sendFlowType",children:(0,t.jsxs)(J.Z,{defaultActiveKey:"1",children:[(0,t.jsx)(Pe,{tab:"\u5B57\u6BB5\u8BBE\u7F6E",children:(0,t.jsx)(V.Z,{name:"fieldPermission",children:(0,t.jsx)(De,{})})},"fieldPermission"),(0,t.jsx)(Pe,{tab:"\u57FA\u7840\u8BBE\u7F6E",children:(0,t.jsx)(Se,{settings:["flowLogVisible"]})},"basicSetting"),(0,t.jsx)(Pe,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",children:"\u9AD8\u7EA7\u8BBE\u7F6E"},"advanceSetting")]})}),h==="mail"&&(0,t.jsxs)(y.jG,{name:"mailFlowType",children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u6536\u4EF6\u4EBA"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ve,{name:"identity"}),(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u6761\u4EF6\u516C\u5F0F",(0,t.jsx)(S.Z,{type:"link",onClick:function(){return u(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,t.jsx)("div",{className:"formula-container",children:(0,t.jsx)(V.Z,{name:"expression",children:(0,t.jsx)(X.ML,{variable:d,readOnly:!0,placeholder:"\u6A21\u677F\u4E3A\u7A7A\uFF0C\u8BF7\u8BBE\u7F6E"})})}),r.schema&&(0,t.jsx)(X.ZP,{visible:l,value:v,title:"\u90AE\u4EF6\u6A21\u677F\u8BBE\u7F6E",schema:r.schema,onCancel:function(){return u(!1)},functionVisible:!1,onOk:function(w){a.setValuesIn("".concat(e.id,".expression"),w),u(!1)}})]})]}),h==="sms"&&(0,t.jsxs)(y.jG,{name:"smsFlowType",children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u6536\u4EF6\u4EBA"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ve,{name:"identity"}),(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u6761\u4EF6\u516C\u5F0F",(0,t.jsx)(S.Z,{type:"link",onClick:function(){return u(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,t.jsx)("div",{className:"formula-container",children:(0,t.jsx)(V.Z,{name:"expression",children:(0,t.jsx)(X.ML,{variable:d,readOnly:!0,placeholder:"\u6A21\u677F\u4E3A\u7A7A\uFF0C\u8BF7\u8BBE\u7F6E"})})}),r.schema&&(0,t.jsx)(X.ZP,{visible:l,value:v,title:"\u77ED\u4FE1\u6A21\u677F\u8BBE\u7F6E",schema:r.schema,onCancel:function(){return u(!1)},functionVisible:!1,onOk:function(w){a.setValuesIn("".concat(e.id,".expression"),w),u(!1)}})]})]}),h==="http"&&(0,t.jsxs)(y.jG,{name:"httpFlowType",children:[(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u63A5\u53E3\u5730\u5740\u914D\u7F6E",(0,t.jsx)(S.Z,{type:"link",onClick:function(){return u(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,t.jsx)("div",{className:"formula-container",children:(0,t.jsx)(V.Z,{name:"expression",children:(0,t.jsx)(X.ML,{variable:d,readOnly:!0,placeholder:"\u8BF7\u8F93\u5165\u63A5\u53E3\u5730\u5740"})})}),r.schema&&(0,t.jsx)(X.ZP,{visible:l,value:v,title:"\u63A5\u53E3\u5730\u5740\u8BBE\u7F6E",schema:r.schema,onCancel:function(){return u(!1)},functionVisible:!1,onOk:function(w){a.setValuesIn("".concat(e.id,".expression"),w),u(!1)}})]})]})]})});se("serviceTask",Zn);var Mn=c(73171),Sn=c(94184),Nn=c.n(Sn),Tn={Process:"\u53D1\u8D77\u4EBA",serviceTask:"\u53D1\u9001\u8282\u70B9",userTask:"\u5BA1\u6279\u8282\u70B9",sequenceFlow:"\u6D41\u7A0B\u5206\u652F"},Pn=(0,y.Pi)(function(){var i=(0,p.useContext)(Q),n=i.active,e=i.flow,a=(0,y.cI)(),r=a.query("".concat(n.id,".name")).get("value");return(0,p.useEffect)(function(){e==null||e.updateText(n.id,r)},[n,r,e]),(0,t.jsxs)("div",{className:Nn()("header",(0,ct.snakeCase)(n.type)),children:[(0,t.jsx)("div",{children:(0,t.jsx)(V.P,{name:"name",basePath:n.id,children:(0,t.jsx)(Cn,{})})}),(0,t.jsxs)("div",{className:"action",children:[Tn[n.type],(0,t.jsx)(ft.Z,{type:"vertical"}),(0,t.jsx)("span",{className:"action-delete",children:(0,t.jsx)(Mn.Z,{})})]})]})}),On=Pn,Q=p.createContext({}),In=(0,y.Pi)(function(){var i=(0,p.useContext)(Q),n=i.active,e=function(){var r=we(n.type);return n&&n.type&&!r&&console.log(n.type+"\u672A\u6CE8\u518C"),n&&n.type&&r?p.createElement(we(n.type)):p.createElement(we("Process"))};return(0,t.jsx)("div",{children:(0,t.jsxs)(ot.Z,{visible:!0,mask:!1,closable:!1,width:500,className:"properties-panel",children:[(0,t.jsx)(On,{}),e()]})})}),Ln=In,kn=c(99008),yt=c(54531);function Rn(i){var n=i.lf;function e(){n.dnd.startDrag({type:"startEvent",text:"\u5F00\u59CB"})}function a(){n.dnd.startDrag({type:"userTask"})}function r(){n.dnd.startDrag({type:"serviceTask"})}function s(){n.dnd.startDrag({type:"exclusiveGateway"})}function o(){n.dnd.startDrag({type:"endEvent",text:"\u7ED3\u675F"})}function l(){n.updateEditConfig({stopMoveGraph:!0})}return n&&n.on("selection:selected",function(){n.updateEditConfig({stopMoveGraph:!1})}),(0,t.jsxs)("div",{className:"pattern",children:[(0,t.jsx)("div",{className:"pattern-selection",onMouseDown:function(){return l()}}),(0,t.jsx)("div",{children:"\u9009\u533A"}),(0,t.jsx)("div",{className:"pattern-start",onMouseDown:function(){return e()}}),(0,t.jsx)("div",{children:"\u5F00\u59CB"}),(0,t.jsx)("div",{className:"pattern-user",onMouseDown:function(){return a()}}),(0,t.jsx)("div",{children:"\u5BA1\u6279\u8282\u70B9"}),(0,t.jsx)("div",{className:"pattern-send",onMouseDown:function(){return r()}}),(0,t.jsx)("div",{children:"\u6284\u9001\u8282\u70B9"}),(0,t.jsx)("div",{className:"pattern-condition",onMouseDown:function(){return s()}}),(0,t.jsx)("div",{children:"\u6761\u4EF6\u5224\u65AD"}),(0,t.jsx)("div",{className:"pattern-end",onMouseDown:function(){return o()}}),(0,t.jsx)("div",{children:"\u7ED3\u675F"})]})}var Un=function(n){return`
<definitions id="Definitions_`.concat(n,`" xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:flowable="http://flowable.org/bpmn" xmlns:s="http://surveyking.cn/bpmn" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="7.3.0">
  <process id="`).concat(n,`" isExecutable="true">
    <startEvent id="starter" />
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="`).concat(n,`">
        <bpmndi:BPMNShape id="starter_di" bpmnElement="starter">
          <dc:Bounds x="180" y="120" width="40" height="40" />
        </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
`)},li={type:"startEvent",text:"\u5F00\u59CB",label:"\u5F00\u59CB",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM10.622 8.415l4.879 3.252a.4.4 0 0 1 0 .666l-4.88 3.252a.4.4 0 0 1-.621-.332V8.747a.4.4 0 0 1 .622-.332z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E"},Oe={type:"userTask",label:"\u5BA1\u6279",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M4 22a8 8 0 1 1 16 0h-2a6 6 0 1 0-12 0H4zm8-9c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm0-2c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E",properties:{}},Ie={type:"serviceTask",label:"\u53D1\u9001",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M1.923 9.37c-.51-.205-.504-.51.034-.689l19.086-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.475.553-.717.07L11 13 1.923 9.37zm4.89-.2l5.636 2.255 3.04 6.082 3.546-12.41L6.812 9.17z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E",cls:"import_icon"},Et={type:"exclusiveGateway",label:"\u6761\u4EF6\u5224\u65AD",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0H24V24H0z'/%3E%3Cpath d='M9.536 13H7.329c-.412 1.166-1.523 2-2.829 2-1.657 0-3-1.343-3-3s1.343-3 3-3c1.306 0 2.418.835 2.83 2h2.206L13 5h3.17c.412-1.165 1.524-2 2.83-2 1.657 0 3 1.343 3 3s-1.343 3-3 3c-1.306 0-2.417-.834-2.829-2h-2.017l-2.886 4.999L14.155 17h2.016c.411-1.165 1.523-2 2.829-2 1.657 0 3 1.343 3 3s-1.343 3-3 3c-1.306 0-2.417-.834-2.829-2H13l-3.464-6zM19 17c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zM4.5 11c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zM19 5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E"},Wn={type:"endEvent",label:"\u7ED3\u675F",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM9 9h6v6H9V9z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E"},ui={label:"\u9009\u533A",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",callback:function(){lf.openSelectionSelect(),lf.once("selection:selected",function(){lf.closeSelectionSelect()})}};function zn(i){var n={icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-4.586 6l1.768 1.768-1.414 1.414L12 15.414l-1.768 1.768-1.414-1.414L10.586 14l-1.768-1.768 1.414-1.414L12 12.586l1.768-1.768 1.414 1.414L13.414 14zM9 4v2h6V4H9z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E",callback:function(a){i.deleteElement(a.id),i.hideContextMenu()}};i.setContextMenuItems(n),i.setContextMenuByType("startEvent",[Oe,Ie,Et]),i.setContextMenuByType("userTask",[Oe,Ie,Et,Wn]),i.setContextMenuByType("exclusiveGateway",[Oe,Ie])}B().use(st),B().use(Tt),B().use(M.a9),M.a9.init({disabledPlugins:[M.v2.name]}),B().use(M.Qs),B().use(M.jX),B().use(M.Ou),B().use(M.v2),B().use(M.xV),B().use(E),B().use(M.aC),B().use(M.Ju);function ci(i,n){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),e.setAttribute("download",i),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}var jt=(0,y.Pi)(function(){var i=(0,oe.IE)(),n=(0,oe.Ge)(),e=i.id,a=i.name,r=n.loading,s=n.bpmnXml,o=(0,p.useRef)(null),l=(0,p.useRef)(),u=(0,p.useMemo)(function(){return{type:"Process",x:0,y:0,id:e}},[]),d=(0,p.useState)(u),v=(0,C.Z)(d,2),h=v[0],f=v[1];(0,p.useEffect)(function(){if(h.id){var j;(j=l.current)===null||j===void 0||j.selectElementById(h.id)}},[h]),(0,p.useEffect)(function(){if(s){var j;(j=l.current)===null||j===void 0||j.render(s)}},[s]),(0,p.useEffect)(function(){n.getFlow(e)},[n,e]);var w=function(){var m,b,ie,$=(m=l.current)===null||m===void 0?void 0:m.getGraphData(),O=(b=l.current)===null||b===void 0?void 0:b.getGraphRawData(),re=O==null?void 0:(ie=O.edges.map(function(W){return W.id})).concat.apply(ie,(0,T.Z)(O.nodes.map(function(W){return W.id}))),Le=Object.values(n.form.values).filter(function(W){return(re==null?void 0:re.includes(W.id))||W.id===e});$&&n.saveFlow({bpmnXml:$,projectId:e,nodes:Le}).then(function(W){W.success?F.default.success("\u4FDD\u5B58\u6210\u529F"):F.default.error(W.message)})},R=function(){var m,b,ie,$=(m=l.current)===null||m===void 0?void 0:m.getGraphData(),O=(b=l.current)===null||b===void 0?void 0:b.getGraphRawData(),re=O==null?void 0:(ie=O.edges.map(function(z){return z.id})).concat.apply(ie,(0,T.Z)(O.nodes.map(function(z){return z.id}))),Le=Object.values(n.form.values).filter(function(z){return(re==null?void 0:re.includes(z.id))||z.id===e}),W=O.nodes.filter(function(z){return z.type==="startEvent"});if(W.length===0){F.default.error("\u5F00\u59CB\u8282\u70B9\u672A\u8BBE\u7F6E");return}if(W.length!==1){F.default.error("\u5F00\u59CB\u8282\u70B9\u53EA\u80FD\u8BBE\u7F6E\u4E00\u4E2A");return}var Ct=O.nodes.filter(function(z){return z.type==="endEvent"});if(Ct.length===0){F.default.error("\u7ED3\u675F\u8282\u70B9\u672A\u8BBE\u7F6E");return}if(Ct.length!==1){F.default.error("\u7ED3\u675F\u8282\u70B9\u53EA\u80FD\u8BBE\u7F6E\u4E00\u4E2A");return}$&&n.saveFlow({bpmnXml:$,projectId:e,nodes:Le}).then(function(z){z.success&&n.deploy(e).then(function(wt){wt.success?F.default.success("\u53D1\u5E03\u6210\u529F"):F.default.error(wt.message)})})};(0,p.useEffect)(function(){if(o.current){E.addItem({key:"save",iconClass:"save-icon",title:"",text:"\u4FDD\u5B58",onClick:function(){return w()}}),E.addItem({key:"deploy",iconClass:"deploy-icon",title:"",text:"\u53D1\u5E03",onClick:function(){ce.Z.confirm({type:"confirm",title:"\u6D41\u7A0B\u53D1\u5E03",content:"\u786E\u5B9A\u53D1\u5E03\u5F53\u524D\u6D41\u7A0B\u5417\uFF1F",onOk:function(){R()}})}});var j=new(B())({extraConf:{id:e},container:o.current,hideAnchors:!1,grid:{type:"dot",size:20},keyboard:{enabled:!0},snapline:!0});l.current=j,zn(j),j.render(s||Un(e)),j.on("element:click",function(m){var b=["starter","exclusiveGateway","endEvent"];b.includes(m.data.type)?f(u):f(m.data)}),j.on("blank:click",function(m){f(u)}),j.on("node:add",function(m){f(m.data)})}return function(){E.removeItem("deploy"),E.removeItem("save")}},[]);var U=(0,p.useState)({visible:!1}),q=(0,C.Z)(U,2),g=q[0],D=q[1];return(0,t.jsx)(y.RV,{form:n.form,children:(0,t.jsxs)("div",{style:{height:"100vh",position:"relative"},className:"flow",children:[(0,t.jsx)("div",{ref:o,style:{height:"100%",flex:1}}),(0,t.jsx)(Rn,{lf:l.current}),(0,t.jsx)("div",{style:{width:500},children:(0,t.jsx)(Q.Provider,{value:{flow:l.current,active:h},children:(0,t.jsx)(Ln,{})})}),(0,t.jsxs)(I.Z,{style:{position:"absolute",left:100,bottom:10},children:[(0,t.jsx)(S.Z,{onClick:(0,Y.Z)(pe().mark(function j(){var m,b;return pe().wrap(function($){for(;;)switch($.prev=$.next){case 0:try{b=(m=l.current)===null||m===void 0?void 0:m.getGraphData(),D({visible:!0,xml:b})}catch(O){console.error(O)}case 1:case"end":return $.stop()}},j)})),icon:(0,t.jsx)(kn.Z,{}),size:"small",children:"XML"}),(0,t.jsx)(S.Z,{onClick:function(){var m;console.log((m=l.current)===null||m===void 0?void 0:m.getGraphRawData()),console.log((0,yt.ZN)(n.form.values[h.id])),console.log((0,yt.ZN)(n.form.values))},children:"\u6570\u636E"})]}),(0,t.jsx)(Jt,(0,A.Z)((0,A.Z)({},g),{},{onClose:function(m){D({visible:!1})}}))]})})}),Vn=jt}}]);
