(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[17],{5966:function(w,b,e){"use strict";var E=e(22122),M=e(81253),n=e(67294),U=e(79976),P=["fieldProps","proFieldProps"],G=["fieldProps","proFieldProps"],K="text",B=function(_){var Q=_.fieldProps,z=_.proFieldProps,j=(0,M.Z)(_,P);return n.createElement(U.Z,(0,E.Z)({mode:"edit",valueType:K,fieldProps:Q,filedConfig:{valueType:K},proFieldProps:z},j))},F=function(_){var Q=_.fieldProps,z=_.proFieldProps,j=(0,M.Z)(_,G);return n.createElement(U.Z,(0,E.Z)({mode:"edit",valueType:"password",fieldProps:Q,proFieldProps:z,filedConfig:{valueType:K}},j))},C=B;C.Password=F,C.displayName="ProFormComponent",b.Z=C},90672:function(w,b,e){"use strict";var E=e(22122),M=e(81253),n=e(67294),U=e(79976),P=["fieldProps","proFieldProps"],G=function(B,F){var C=B.fieldProps,d=B.proFieldProps,_=(0,M.Z)(B,P);return n.createElement(U.Z,(0,E.Z)({ref:F,mode:"edit",valueType:"textarea",fieldProps:C,proFieldProps:d},_))};b.Z=n.forwardRef(G)},93279:function(w,b,e){"use strict";var E=e(22122),M=e(81253),n=e(59250),U=e(13013),P=e(57663),G=e(71577),K=e(30887),B=e(28682),F=e(84305),C=e(88182),d=e(67294),_=e(94184),Q=e.n(_),z=e(57254),j=e(44545),p=e(32070),N=e.n(p),m=["key","name"],H=function(a){var r=a.children,i=a.menus,t=a.onSelect,l=a.className,x=a.style,s=(0,d.useContext)(C.ZP.ConfigContext),f=s.getPrefixCls,y=f("pro-table-dropdown"),Z=d.createElement(B.Z,{onClick:function(o){return t&&t(o.key)}},i==null?void 0:i.map(function(c){return d.createElement(B.Z.Item,{key:c.key},c.name)}));return d.createElement(U.Z,{overlay:Z,className:Q()(y,l)},d.createElement(G.Z,{style:x},r," ",d.createElement(z.Z,null)))},S=function(a){var r=a.className,i=a.style,t=a.onSelect,l=a.menus,x=l===void 0?[]:l,s=a.children,f=(0,d.useContext)(C.ZP.ConfigContext),y=f.getPrefixCls,Z=y("pro-table-dropdown"),c=d.createElement(B.Z,{onClick:function(u){t==null||t(u.key)}},x.map(function(o){var u=o.key,T=o.name,g=(0,M.Z)(o,m);return d.createElement(B.Z.Item,(0,E.Z)({key:u},g),T)}));return d.createElement(U.Z,{overlay:c,className:Q()(Z,r)},d.createElement("a",{style:i},s||d.createElement(j.Z,null)))};S.Button=H,b.Z=S},32070:function(){},70347:function(){},86468:function(w,b,e){"use strict";e.d(b,{lq:function(){return _},FQ:function(){return j},fl:function(){return p}});var E=e(43358),M=e(34041),n=e(20228),U=e(11382),P=e(11849),G=e(94657),K=e(93224),B=e(36602),F=e(952),C=e(67294),d=e(85893),_=function(m){var H=m.fps,S=H===void 0?30:H,V=m.fetcher,a=m.width,r=m.className,i=m.defaultOptions,t=m.readonly,l=m.value,x=(0,K.Z)(m,["fps","fetcher","width","className","defaultOptions","readonly","value"]),s=(0,C.useState)(!1),f=(0,G.Z)(s,2),y=f[0],Z=f[1],c=(0,C.useState)(i||[]),o=(0,G.Z)(c,2),u=o[0],T=o[1],g=C.useRef(0),O=p(a),$=(0,B.zE)(function(I){Z(!0),T([]),g.current+=1;var J=g.current;m.fetcher(I).then(function(W){J===g.current&&(T(W),Z(!1))})},S);if(t){var L;return(0,d.jsx)(F.ZP.Item,(0,P.Z)((0,P.Z)({},x),{},{children:(0,d.jsx)("span",{children:(L=u.find(function(I){return I.value===l}))===null||L===void 0?void 0:L.label})}))}return(0,d.jsx)(F.ZP.Item,(0,P.Z)((0,P.Z)({},x),{},{children:(0,d.jsx)(M.Z,(0,P.Z)({showSearch:!0,placeholder:m.placeholder,filterOption:!1,onSearch:$,allowClear:!0,onFocus:function(){return $("")},onClear:function(){return $("")},loading:y,notFoundContent:y?(0,d.jsx)(U.Z,{size:"small"}):null,options:u},O))}))},Q=e(62999),z=e(54680),j=function(m){var H=m.width,S=m.className,V=m.treeData,a=m.placeholder,r=m.readonly,i=m.value,t=(0,K.Z)(m,["width","className","treeData","placeholder","readonly","value"]),l=p(H);if(r){var x;return(0,d.jsx)(F.ZP.Item,(0,P.Z)((0,P.Z)({},t),{},{children:(0,d.jsx)("span",{children:(x=(0,B.hE)(V,i,"key"))===null||x===void 0?void 0:x.title})}))}return(0,d.jsx)(F.ZP.Item,(0,P.Z)((0,P.Z)({},t),{},{children:(0,d.jsx)(z.Z,(0,P.Z)({dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:V,placeholder:a,treeDefaultExpandAll:!0},l))}))};function p(N){if(!N)return{};if(typeof N=="number")return{style:{width:N}};if(typeof N=="string")return{className:"pro-field ".concat(typeof N=="string"?"pro-field-".concat(N):"")}}},79871:function(w,b,e){"use strict";e.d(b,{G:function(){return Z},y:function(){return y}});var E=e(57663),M=e(71577),n=e(3182),U=e(71194),P=e(50146),G=e(34792),K=e(48086),B=e(94657),F=e(83279),C=e(94043),d=e.n(C),_=e(36602),Q=e(57119),z=e(49101),j=e(16894),p=e(93279),N=e(80937),m=e(60780),H=e.n(m),S=e(67294),V=e(11849),a=e(90672),r=e(952),i=e(71975),t=e(5966),l=e(77613),x=e(86468),s=e(85893),f=(0,l.P)(function(c){var o=c.dept,u=c.readonly,T=c.onClose,g=c.onOk,O=(0,_.m2)(),$=(0,S.useRef)(),L=!!(o!=null&&o.id),I=O.depts,J=(0,S.useMemo)(function(){return H()(I.map(function(W){return{value:W.id,title:W.name,key:W.id,parentId:W.parentId}}),{parentProperty:"parentId",customID:"value"})},[I]);return(0,s.jsxs)(i.a,{title:u?"\u7EC4\u7EC7\u673A\u6784\u8BE6\u60C5":L?"\u4FEE\u6539\u7EC4\u7EC7\u673A\u6784":"\u65B0\u5EFA\u7EC4\u7EC7\u673A\u6784",formRef:$,initialValues:(0,V.Z)({},o),visible:!0,submitter:{submitButtonProps:{style:{display:u?"none":"block"}}},drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){T()}},onFinish:function(){var W=(0,n.Z)(d().mark(function h(v){var D;return d().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,O.saveOrUpdateDept((0,V.Z)((0,V.Z)({},o),v));case 2:D=R.sent,D.success?g():K.default.error("\u4FDD\u5B58\u5931\u8D25");case 4:case"end":return R.stop()}},h)}));return function(h){return W.apply(this,arguments)}}(),children:[(0,s.jsxs)(r.ZP.Group,{children:[(!o||o&&o.id!=="1")&&I.length>0&&(0,s.jsx)(x.FQ,{name:"parentId",width:"md",treeData:J,label:"\u4E0A\u7EA7\u90E8\u95E8",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",required:!0,readonly:u,value:o==null?void 0:o.id,rules:[{required:!0,message:"\u4E0A\u7EA7\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,s.jsx)(t.Z,{name:"code",width:"md",label:"\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u7F16\u7801",readonly:u,required:!0,rules:[{required:!0,message:"\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}]})]}),(0,s.jsxs)(r.ZP.Group,{children:[(0,s.jsx)(t.Z,{name:"name",width:"md",label:"\u5168\u79F0",id:"form-name",placeholder:"\u8BF7\u8F93\u5165\u5168\u79F0",readonly:u,required:!0,rules:[{required:!0,message:"\u5168\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,s.jsx)(t.Z,{name:"shortName",width:"md",label:"\u7B80\u79F0",id:"form-name",placeholder:"\u8BF7\u8F93\u5165\u7B80\u79F0",readonly:u,required:!0})]}),(0,s.jsx)(r.ZP.Group,{children:(0,s.jsx)(x.lq,{fps:2,name:"managerId",width:"md",label:"\u8D1F\u8D23\u4EBA",placeholder:"\u8F93\u5165\u59D3\u540D\u68C0\u7D22",readonly:u,value:o==null?void 0:o.managerId,defaultOptions:L?[{label:o.managerName,value:o.managerId}]:void 0,fetcher:function(h){return _.hi.loadUsers({name:h}).then(function(v){return v.list.map(function(D){return{label:D.name,value:D.id}})})}})}),(0,s.jsx)(r.ZP.Group,{children:(0,s.jsx)(a.Z,{name:"remark",width:690,label:"\u5907\u6CE8",id:"form-name",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",readonly:u})})]})});function y(c,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"id",T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!o)return c;for(var g=(0,F.Z)(c);g.length;){var O=g[T?"pop":"shift"]();if(O&&O[u]===o)return[O];O!=null&&O.children&&g.push.apply(g,(0,F.Z)(O.children))}return null}var Z=(0,N.Pi)(function(c){var o=c.selectedDept,u=(0,_.m2)(),T=u.loading,g=(0,S.useRef)(),O=(0,S.useState)({visible:!1}),$=(0,B.Z)(O,2),L=$[0],I=$[1],J=y(H()(u.depts,{customID:"id",parentProperty:"parentId"}),o),W=[{title:"\u673A\u6784\u540D\u79F0",dataIndex:"name",width:200},{title:"\u673A\u6784\u7B80\u79F0",dataIndex:"shortName",search:!1,width:200},{title:"\u8D1F\u8D23\u4EBA",dataIndex:"managerName",search:!1,width:150},{title:"\u64CD\u4F5C",valueType:"option",render:function(v,D){return[(0,s.jsx)("a",{onClick:function(){return I({visible:!0,current:D,readonly:!0})},children:"\u8BE6\u60C5"},"editable"),(0,s.jsx)(p.Z,{onSelect:function(R){if(R==="edit"&&I({visible:!0,current:D}),R==="delete"){if(D.children&&D.children.length>0){K.default.error("\u8BF7\u5148\u5220\u9664\u5B50\u673A\u6784\uFF01");return}P.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u673A\u6784?",icon:(0,s.jsx)(Q.Z,{}),onOk:function(){u.deleteDept(D.id)}})}},menus:[{key:"edit",name:"\u7F16\u8F91"},{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];return(0,s.jsxs)("div",{children:[(0,s.jsx)(j.ZP,{columns:W,actionRef:g,loading:T,dataSource:J,request:(0,n.Z)(d().mark(function h(){return d().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",u.loadDepts());case 1:case"end":return D.stop()}},h)})),columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage"},rowKey:"id",search:!1,scroll:{x:650},pagination:!1,dateFormatter:"string",headerTitle:"\u673A\u6784\u7BA1\u7406",toolBarRender:function(){return[(0,s.jsx)(M.Z,{icon:(0,s.jsx)(z.Z,{}),type:"primary",onClick:function(){I({visible:!0})},children:"\u65B0\u5EFA"},"button")]}}),L.visible&&(0,s.jsx)(f,{onOk:function(){I({visible:!1})},dept:L.current,readonly:L.readonly,onClose:function(){return I({visible:!1})}})]})})},40017:function(w,b,e){"use strict";e.d(b,{A:function(){return x}});var E=e(58024),M=e(39144),n=e(32157),U=e(32138),P=e(34792),G=e(48086),K=e(49111),B=e(19650),F=e(22385),C=e(61580),d=e(94657),_=e(83279),Q=e(36602),z=e(81162),j=e(17828),p=e(59879),N=e(91816),m=e(86504),H=e(63258),S=e(80937),V=e(60780),a=e.n(V),r=e(67294),i=e(79871),t=e(85893);function l(s){var f=[];return s.forEach(function(y){y.children&&(f.push(y.key),f.push.apply(f,(0,_.Z)(l(y.children))))}),f}var x=(0,S.Pi)(function(s){var f=(0,Q.m2)(),y=f.depts;(0,r.useEffect)(function(){f.loadDepts()},[f]);var Z=(0,r.useMemo)(function(){return a()(y.map(function(h){return{title:h.name,key:h.id,parentId:h.parentId}}),{parentProperty:"parentId",customID:"key"})},[y]),c=(0,r.useState)([]),o=(0,d.Z)(c,2),u=o[0],T=o[1],g=(0,r.useState)(!0),O=(0,d.Z)(g,2),$=O[0],L=O[1],I=(0,r.useMemo)(function(){return l(Z)},[Z]),J=function(v){T(v),L(!1)},W=function(v){v.length>0?s.onSelect(v[0]):s.onSelect(void 0)};return(0,t.jsx)(M.Z,{title:"\u7EC4\u7EC7\u673A\u6784",extra:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(B.Z,{children:[u.length>0?(0,t.jsx)(C.Z,{title:"\u6298\u53E0\u6240\u6709",children:(0,t.jsx)(z.Z,{style:{cursor:"pointer"},onClick:function(){return T([])}})}):(0,t.jsx)(C.Z,{title:"\u5C55\u5F00\u6240\u6709",children:(0,t.jsx)(j.Z,{style:{cursor:"pointer"},onClick:function(){return T(I)}})}),(0,t.jsx)(C.Z,{title:"\u5237\u65B0",children:(0,t.jsx)(p.Z,{style:{cursor:"pointer"},onClick:function(){return f.loadDepts()}})})]})}),children:(0,t.jsx)(U.Z,{expandedKeys:u,onExpand:J,draggable:!0,autoExpandParent:$,onSelect:W,showIcon:!0,treeData:Z,onDrop:function(v){if(v.dragNode.pos!=="".concat(v.node.pos,"-0")){if(v.node.parentId!==v.dragNode.parentId&&v.dragNode.parentId!==v.node.key){G.default.error("\u53EA\u80FD\u6539\u53D8\u540C\u7EA7\u673A\u6784\u7684\u987A\u5E8F");return}var D=v.dragNode.parentId,Y=(0,i.y)(Z,D,"key");if(Y){var R,k=(R=Y[0].children)===null||R===void 0?void 0:R.map(function(te){return te.key}),ee=v.dragNode.key,re=k.indexOf(ee);k.splice(re,1,""),k.splice(v.dropPosition,0,ee),f.sortDept(k.filter(function(te){return te}))}}},icon:function(v){var D=v.expanded;return D?(0,t.jsx)(N.Z,{}):!v.data.children||v.data.children.length===0?(0,t.jsx)(m.Z,{}):(0,t.jsx)(H.Z,{})}})})})},39144:function(w,b,e){"use strict";e.d(b,{Z:function(){return V}});var E=e(96156),M=e(22122),n=e(67294),U=e(94184),P=e.n(U),G=e(98423),K=e(65632),B=function(a,r){var i={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(i[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(a);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(a,t[l])&&(i[t[l]]=a[t[l]]);return i},F=function(r){var i=r.prefixCls,t=r.className,l=r.hoverable,x=l===void 0?!0:l,s=B(r,["prefixCls","className","hoverable"]);return n.createElement(K.C,null,function(f){var y=f.getPrefixCls,Z=y("card",i),c=P()("".concat(Z,"-grid"),t,(0,E.Z)({},"".concat(Z,"-grid-hoverable"),x));return n.createElement("div",(0,M.Z)({},s,{className:c}))})},C=F,d=function(a,r){var i={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(i[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(a);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(a,t[l])&&(i[t[l]]=a[t[l]]);return i},_=function(r){return n.createElement(K.C,null,function(i){var t=i.getPrefixCls,l=r.prefixCls,x=r.className,s=r.avatar,f=r.title,y=r.description,Z=d(r,["prefixCls","className","avatar","title","description"]),c=t("card",l),o=P()("".concat(c,"-meta"),x),u=s?n.createElement("div",{className:"".concat(c,"-meta-avatar")},s):null,T=f?n.createElement("div",{className:"".concat(c,"-meta-title")},f):null,g=y?n.createElement("div",{className:"".concat(c,"-meta-description")},y):null,O=T||g?n.createElement("div",{className:"".concat(c,"-meta-detail")},T,g):null;return n.createElement("div",(0,M.Z)({},Z,{className:o}),u,O)})},Q=_,z=e(51752),j=e(71230),p=e(15746),N=e(97647),m=function(a,r){var i={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&r.indexOf(t)<0&&(i[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(a);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(a,t[l])&&(i[t[l]]=a[t[l]]);return i};function H(a){var r=a.map(function(i,t){return n.createElement("li",{style:{width:"".concat(100/a.length,"%")},key:"action-".concat(t)},n.createElement("span",null,i))});return r}var S=n.forwardRef(function(a,r){var i,t,l=n.useContext(K.E_),x=l.getPrefixCls,s=l.direction,f=n.useContext(N.Z),y=function(ne){var q;(q=a.onTabChange)===null||q===void 0||q.call(a,ne)},Z=function(){var ne;return n.Children.forEach(a.children,function(q){q&&q.type&&q.type===C&&(ne=!0)}),ne},c=a.prefixCls,o=a.className,u=a.extra,T=a.headStyle,g=T===void 0?{}:T,O=a.bodyStyle,$=O===void 0?{}:O,L=a.title,I=a.loading,J=a.bordered,W=J===void 0?!0:J,h=a.size,v=a.type,D=a.cover,Y=a.actions,R=a.tabList,k=a.children,ee=a.activeTabKey,re=a.defaultActiveTabKey,te=a.tabBarExtraContent,ue=a.hoverable,le=a.tabProps,ce=le===void 0?{}:le,ve=m(a,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),A=x("card",c),me=$.padding===0||$.padding==="0px"?{padding:24}:void 0,X=n.createElement("div",{className:"".concat(A,"-loading-block")}),fe=n.createElement("div",{className:"".concat(A,"-loading-content"),style:me},n.createElement(j.Z,{gutter:8},n.createElement(p.Z,{span:22},X)),n.createElement(j.Z,{gutter:8},n.createElement(p.Z,{span:8},X),n.createElement(p.Z,{span:15},X)),n.createElement(j.Z,{gutter:8},n.createElement(p.Z,{span:6},X),n.createElement(p.Z,{span:18},X)),n.createElement(j.Z,{gutter:8},n.createElement(p.Z,{span:13},X),n.createElement(p.Z,{span:9},X)),n.createElement(j.Z,{gutter:8},n.createElement(p.Z,{span:4},X),n.createElement(p.Z,{span:3},X),n.createElement(p.Z,{span:16},X))),oe=ee!==void 0,Ee=(0,M.Z)((0,M.Z)({},ce),(i={},(0,E.Z)(i,oe?"activeKey":"defaultActiveKey",oe?ee:re),(0,E.Z)(i,"tabBarExtraContent",te),i)),se,de=R&&R.length?n.createElement(z.Z,(0,M.Z)({size:"large"},Ee,{className:"".concat(A,"-head-tabs"),onChange:y}),R.map(function(ae){return n.createElement(z.Z.TabPane,{tab:ae.tab,disabled:ae.disabled,key:ae.key})})):null;(L||u||de)&&(se=n.createElement("div",{className:"".concat(A,"-head"),style:g},n.createElement("div",{className:"".concat(A,"-head-wrapper")},L&&n.createElement("div",{className:"".concat(A,"-head-title")},L),u&&n.createElement("div",{className:"".concat(A,"-extra")},u)),de));var Pe=D?n.createElement("div",{className:"".concat(A,"-cover")},D):null,ye=n.createElement("div",{className:"".concat(A,"-body"),style:$},I?fe:k),he=Y&&Y.length?n.createElement("ul",{className:"".concat(A,"-actions")},H(Y)):null,De=(0,G.Z)(ve,["onTabChange"]),ie=h||f,Oe=P()(A,(t={},(0,E.Z)(t,"".concat(A,"-loading"),I),(0,E.Z)(t,"".concat(A,"-bordered"),W),(0,E.Z)(t,"".concat(A,"-hoverable"),ue),(0,E.Z)(t,"".concat(A,"-contain-grid"),Z()),(0,E.Z)(t,"".concat(A,"-contain-tabs"),R&&R.length),(0,E.Z)(t,"".concat(A,"-").concat(ie),ie),(0,E.Z)(t,"".concat(A,"-type-").concat(v),!!v),(0,E.Z)(t,"".concat(A,"-rtl"),s==="rtl"),t),o);return n.createElement("div",(0,M.Z)({ref:r},De,{className:Oe}),se,Pe,ye,he)});S.Grid=C,S.Meta=Q;var V=S},58024:function(w,b,e){"use strict";var E=e(38663),M=e.n(E),n=e(70347),U=e.n(n),P=e(18106),G=e(13062),K=e(89032)}}]);
