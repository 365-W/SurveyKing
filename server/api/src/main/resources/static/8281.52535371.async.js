(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8281],{55686:function(ge,Y,g){"use strict";var E=g(11849),k=g(94233),C=g(51890),b=g(93224),S=g(89366),e=g(85893),K=function(q){var A=q.user,P=(0,b.Z)(q,["user"]);return!A||!A.avatar?(0,e.jsx)(C.C,(0,E.Z)({icon:(0,e.jsx)(S.Z,{}),size:P.size||"small"},P)):(0,e.jsx)(C.C,(0,E.Z)({src:"/api/public/preview/".concat(A.avatar),size:P.size||"small"},P))};Y.Z=K},78210:function(ge,Y,g){"use strict";var E=g(15020),k=g(85893),C=function(S){var e=S.html,K=e===void 0?"":e,te=S.replaceP,q=te===void 0?!0:te;return q?(0,k.jsx)(k.Fragment,{children:typeof K=="string"&&(0,E.ZP)(K.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,k.jsx)(k.Fragment,{children:typeof K=="string"&&(0,E.ZP)(K)})};Y.Z=C},39017:function(ge,Y,g){"use strict";g.d(Y,{Rk:function(){return A},AK:function(){return C},Al:function(){return te}});var E=g(67294),k=g(24004);function C(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",F=(0,E.useContext)(k.ZX),O=F.theme;return"survey-".concat(O)+P}function b(P,F){var O=(F&&F.depends||[]).reduce(function($,G){return $||!G},!1);return S(O?void 0:function($,G){return fetch($,G).then(function(I){if(!!I.ok)return I.json()})},P,F||{})}function S(P){for(var F=arguments.length,O=new Array(F>1?F-1:0),$=1;$<F;$++)O[$-1]=arguments[$];var G=useState(0),I=_slicedToArray(G,2),Q=I[0],re=I[1],B=useCallback(function(){re(Math.random())},[]),_=useState({loading:!1,mutate:B}),oe=_slicedToArray(_,2),be=oe[0],ae=oe[1];return useEffect(function(){!P||O[1].manual&&Q===0||P.apply(null,O).then(function(ne){ne.code===200?ae({loading:!1,data:ne.data,mutate:B}):ae({error:ne.message,loading:!1,mutate:B})}).catch(function(ne){ae({error:ne,loading:!1,mutate:B})})},e(Q,O)),be}function e(){for(var P=arguments.length,F=new Array(P),O=0;O<P;O++)F[O]=arguments[O];for(var $=[],G=0;G<arguments.length;G++){var I=arguments[G];if(I instanceof Array)for(var Q=0;Q<I.length;Q++)$=$.concat(e(I[Q]));else if(typeof URL!="undefined"&&I instanceof URL)$=$.concat(I.toJSON());else if(I instanceof Object)for(var re=Object.keys(I),B=0;B<re.length;B++){var _=re[B];_==="depends"?$=$.concat(I[_]):$=$.concat([_]).concat(e(I[_]))}else $=$.concat(I)}return $}var K=g(87998);function te(){return(0,E.useContext)(K.ZX)}function q(){return useSurvey().attachments}function A(){var P=(0,E.useContext)(K.ZX);return P.innerStore}},90063:function(ge,Y,g){"use strict";g.r(Y),g.d(Y,{default:function(){return da}});var E=g(78210),k=g(87998),C=g(67294),b=g(39017),S=g(95522),e=g(85893);function K(t){var a=t.schema,s=t.index,l=t.seqNo,r=(0,b.AK)("-body-questionSet"),u=(0,C.useContext)(k.ZX),h=u.questionNumber;return(0,e.jsxs)("div",{className:r,children:[(0,e.jsxs)("div",{className:r+"-title",children:[h?l||"".concat(s+1,"."):"",(0,e.jsx)(E.Z,{html:a.title})]}),t.children,(0,e.jsx)("div",{className:r+"-splitLine"})]})}(0,S.eC)("QuestionSet",K,"antd");var te=g(9715),q=g(86835),A=g(94657),P=g(80937),F=g(48644),O=function(){var a=(0,b.AK)(),s=(0,C.useContext)(k.ZX),l=s.schema;return(0,e.jsxs)("div",{className:a+"-header",children:[(0,e.jsx)("div",{className:a+"-header-title",children:(0,e.jsx)(F.hl,{html:l.title})}),(0,e.jsx)("div",{className:a+"-header-description",children:(0,e.jsx)(F.hl,{html:l.description})})]})},$=function(a){var s=(0,b.AK)();return(0,e.jsx)("div",{className:s+"-body",children:a.children})},G=g(57663),I=g(71577),Q=(0,P.Pi)(function(){var t,a,s=(0,b.AK)("-footer"),l=(0,C.useContext)(k.ZX),r=l.schema,u=l.loading,h=(0,b.Rk)(),d=h.pagination,i=d.pageSize>1,f=d.current===1,o=d.current===d.pageSize;return(0,e.jsxs)("div",{className:s,children:[o&&(0,e.jsx)("div",{className:s+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(F.hl,{html:r==null||(t=r.attribute)===null||t===void 0?void 0:t.suffix})}),(0,e.jsxs)("div",{className:s+"-pagination",children:[i&&!f&&(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{type:"primary",block:!0,onClick:function(){return h.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),i&&!o&&(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{type:"primary",block:!0,onClick:function(){return h.handleNext()},children:"\u4E0B\u4E00\u9875"})}),o&&(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{type:"primary",block:!0,onClick:function(){return h.submit()},loading:u,children:(0,e.jsx)(F.hl,{html:((a=r.attribute)===null||a===void 0?void 0:a.submitButton)||"\u63D0\u4EA4"})})}),i&&(0,e.jsxs)("div",{className:s+"-pagination-info",children:["\u7B2C",d.current,"\u9875/\u5171",d.pageSize,"\u9875"]})]})]})}),re=g(47673),B=g(4107),_=g(39002),oe=g(68351),be=g(14965),ae=g(68318),ne=g(77883),Je=g(85482),qe=g(29985),_e=g(46842),et=g(64302),tt=g(27484),ie=g.n(tt),ha=g(33852);ie().locale("zh-cn");var at="YYYY-MM-DD",nt="YYYY-MM-DD HH:mm:ss",rt="HH:mm:ss";function je(t,a){if(!!t){if(a==="date")return ie()(t,at);if(a==="dateTime")return ie()(t,nt);if(a==="time")return ie()(t,rt)}}var ue=function(a){var s=a.onChange,l=a.type,r=a.value,u=a.suffix,h=a.style,d=h===void 0?{width:"100%"}:h;return l==="number"?(0,e.jsx)(Je.Z,{onChange:s,value:r,style:d,addonAfter:u}):l==="date"?(0,e.jsx)(ae.Z,{onChange:function(f,o){console.log(f),s(o)},value:je(r,l),style:d}):l==="dateTime"?(0,e.jsx)(ae.Z,{showTime:!0,onChange:function(f,o){return s(o)},value:je(r,l),style:d}):l==="time"?(0,e.jsx)(oe.Z,{value:je(r,l),onChange:function(f,o){return s(o)},style:d}):l==="mobile"?(0,e.jsx)(B.Z,{prefix:(0,e.jsx)(qe.Z,{}),onChange:function(f){return s(f.target.value)},value:r}):l==="idCard"?(0,e.jsx)(B.Z,{prefix:(0,e.jsx)(_e.Z,{}),onChange:function(f){return s(f.target.value)},value:r,style:d}):l==="email"?(0,e.jsx)(B.Z,{prefix:(0,e.jsx)(et.Z,{}),onChange:function(f){return s(f.target.value)},value:r,style:d}):(0,e.jsx)(B.Z,{onChange:function(f){return s(f.target.value)},value:r,suffix:u,style:d})},fa=g(49111),pe=g(19650),it=g(17672),st=function(a){var s=a.onChange,l=(0,C.useRef)(null),r=(0,C.useRef)(),u=(0,C.useRef)(),h=(0,C.useState)(0),d=(0,A.Z)(h,2),i=d[0],f=d[1];return(0,C.useEffect)(function(){var o=l.current;if(o){var n,c=new it.Z(l.current);c.addEventListener("beginStroke",function(){f(1)}),r.current=c;var v=Math.max(window.devicePixelRatio||1,1);o.width=o.offsetWidth*v,o.height=o.offsetHeight*v,(n=o.getContext("2d"))===null||n===void 0||n.scale(v,v)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:u.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:l,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:i!==2?"block":"none"}}),i===2&&(0,e.jsx)("img",{src:u.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(pe.Z,{children:[i===1&&(0,e.jsx)(I.Z,{type:"link",onClick:function(){var n;(n=r.current)===null||n===void 0||n.clear(),f(0)},children:"\u6E05\u7A7A"}),(i===0||i===1)&&(0,e.jsx)(I.Z,{type:"primary",disabled:i!==1,ghost:!0,size:"small",onClick:function(){var n;s(r.current.toDataURL()),u.current=(n=r.current)===null||n===void 0?void 0:n.toDataURL(),f(2)},children:"\u5B8C\u6210"}),i===2&&(0,e.jsx)(I.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var n;f(0),(n=r.current)===null||n===void 0||n.clear()},children:"\u91CD\u7B7E"})]})})]})]})},lt=g(3024),ot=(0,P.Pi)(function(){var t=(0,C.useContext)(k.ZX),a=t.progressBar,s=(0,b.AK)(),l=(0,b.Rk)(),r=l.progress;return a?(0,e.jsx)(lt.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:s+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(r*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),ma=g(71194),ut=g(50146);function Se(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var dt=function(a){var s=a.onChange,l=a.value,r=a.mapMove,u=r===void 0?!1:r,h=a.optionId,d=(0,C.useRef)(null),i=(0,C.useRef)(),f=(0,C.useRef)(),o=(0,C.useRef)(),n=(0,C.useState)(function(){if(!!l){var T=l.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(T&&T.length>2)return[parseFloat(T[1]),parseFloat(T[2])]}}),c=(0,A.Z)(n,2),v=c[0],m=c[1],x=(0,C.useState)(function(){return Se(l)}),j=(0,A.Z)(x,2),p=j[0],y=j[1],w=(0,C.useState)(!1),R=(0,A.Z)(w,2),N=R[0],M=R[1],z=(0,C.useCallback)(function(T){f.current.getLocation(T,function(D,W){if(D==="complete"&&W.geocodes.length){var U=W.geocodes[0].location;o.current.start(U)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,C.useEffect)(function(){if(!!N){window["localMap".concat(h)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(ee){var me=new AMap.Map("map-".concat(h),{zoom:16,center:v,dragEnable:u,zoomEnable:u});if(i.current=me,u){var xe=new ee({mode:"dragMarker",map:me});xe.on("success",function(se){y(se.address),m([se.position.lng,se.position.lat])}),v?xe.start(v):xe.start(),me.panBy(0,1),o.current=xe}var ca=new AMap.Geocoder({city:"010"});f.current=ca;var va=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});va.getCurrentPosition(function(se,le){se=="complete"?(me.setCenter(le.position),y(le.formattedAddress),m([le.position.lng,le.position.lat])):console.error(le)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var T="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(h,"&plugin=AMap.Geocoder,AMap.Geolocation"),D=document.createElement("script");D.src=T,document.head.appendChild(D);var W="https://webapi.amap.com/ui/1.1/main-async.js",U=document.createElement("script");U.src=W,document.head.appendChild(U)}},[N]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(B.Z.TextArea,{readOnly:!0,value:Se(l),onClick:function(){return M(!0)}}),(0,e.jsxs)(ut.Z,{visible:N,onCancel:function(){M(!1)},onOk:function(){v&&s("".concat(p,"[").concat(v[0],", ").concat(v[1],"]")),M(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:u&&(0,e.jsx)(B.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(D){return z(D)}})}),(0,e.jsx)("div",{ref:d,id:"map-".concat(h),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:p})]})]})},we=function(a){var s,l=a.optionId,r=a.questionId,u=a.checked,h=a.checkedCount,d=(0,b.Al)(),i=d.statistics,f=i==null?void 0:i.questionStatistics[r],o=((f==null?void 0:f.optionStatistics.reduce(function(v,m){return v+m.count},0))||0)+h,n=(f==null||(s=f.optionStatistics.find(function(v){return v.optionId===l}))===null||s===void 0?void 0:s.count)||0;n=u?n+1:n;var c="".concat(Math.floor(n/o*1e3)/10,"%");return h===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[(0,e.jsxs)("span",{className:"vote-info-cnt ",children:[n,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:c}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:c}})})]})},Ce=function(a){var s=a.schema,l=a.type,r=s.attribute,u=r===void 0?{}:r,h=u.examCorrectAnswer,d=(0,b.Al)(),i=d.correctAnswerVisible,f=d.mode;return h&&i&&f==="exam"?l==="FillBlank"||l==="HorzBlank"||l==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:h}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},ct=function(a){var s=a.schema,l=s.attribute,r=l===void 0?{}:l,u=r.examScore,h=(0,b.Al)(),d=h.mode,i=h.examScoreVisible;return u&&d==="exam"&&i?(0,e.jsxs)("span",{className:"question-score",children:["\uFF08",u,"\u5206\uFF09"]}):(0,e.jsx)(e.Fragment,{})},xa=g(22385),Ne=g(61580),Z=g(11849),de=g(93224),vt=g(94184),Pe=g.n(vt),ht=g(49914),ft=g(78338);function mt(t){t=Number(t);var a=Math.floor(t/3600),s=Math.floor(t%3600/60),l=Math.floor(t%3600%60),r="".concat(a).padStart(2,"0"),u="".concat(s).padStart(2,"0"),h="".concat(l).padStart(2,"0");return"".concat(r,":").concat(u,":").concat(h)}function xt(t){return t<=60?"#ff4d4f":t<=180?"#faad14":"#52c41a"}var gt=(0,P.Pi)(function(){var t,a,s=(0,ht.H)(),l=(0,b.Rk)(),r=s.startTime,u=((t=s.project)===null||t===void 0||(a=t.setting.examSetting)===null||a===void 0?void 0:a.maxSubmitMinutes)||0,h=(0,C.useState)(0),d=(0,A.Z)(h,2),i=d[0],f=d[1],o=r+u*60*1e3,n=(0,C.useRef)();return(0,C.useEffect)(function(){if(u!==0)return n.current=window.setInterval(function(){f((o-new Date().getTime())/1e3)},1e3),function(){clearInterval(n.current)}},[o]),(0,C.useEffect)(function(){i<0&&(l.submit(),clearInterval(n.current))},[i]),u===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,e.jsx)(ft.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,e.jsx)("span",{style:{marginLeft:3,color:xt(i)},children:mt(i)})]})}),Ze=(0,P.Pi)(function(t){var a=(0,b.Rk)(),s=a.props.answerSheetVisible,l=t.size,r=t.marked,u=r===void 0?!0:r,h=(0,de.Z)(t,["size","marked"]);return s?(0,e.jsx)(Ne.Z,{title:"\u6807\u8BB0",children:(0,e.jsx)("svg",(0,Z.Z)((0,Z.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:t.size||24,height:t.size||24,className:"marked"},h),{},{children:(0,e.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:u?"#EA4942":"#d8d8d8","p-id":"1287"})}))}):(0,e.jsx)(e.Fragment,{})}),jt=(0,P.Pi)(function(t){var a=(0,b.Rk)(),s=t.finished,l=t.id,r=t.marked,u=t.seqNo;return(0,e.jsxs)("div",{className:Pe()("answer-sheet-item",{marked:r,finished:s}),onClick:function(){return a.changePageIndex(l)},children:[u,r&&(0,e.jsx)(Ze,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),pt=(0,P.Pi)(function(){var t=(0,b.Rk)(),a=t.answerSheet;return(0,e.jsx)(e.Fragment,{children:a.filter(function(s){return s.display!=="none"}).map(function(s,l){return(0,C.createElement)(jt,(0,Z.Z)((0,Z.Z)({},s),{},{seqNo:l+1,key:s.id}))})})}),Ct=(0,P.Pi)(function(){var t=(0,b.Rk)(),a=t.answerSheet,s=a.filter(function(u){return u.finished}).length,l=a.filter(function(u){return!u.finished}).length,r=a.filter(function(u){return u.marked}).length;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:s})]}),(0,e.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:l})]}),(0,e.jsxs)("div",{className:"marked",children:[(0,e.jsx)(Ze,{size:18}),"\u6807\u8BB0",(0,e.jsx)("span",{style:{marginLeft:4},children:r})]})]})}),Zt=(0,P.Pi)(function(){return(0,e.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,e.jsx)(gt,{})]})}),yt=(0,P.Pi)(function(){var t=(0,b.Rk)(),a=t.props.answerSheetVisible;return a?(0,e.jsxs)("div",{className:"answer-sheet",children:[(0,e.jsx)(Zt,{}),(0,e.jsx)("div",{className:"answer-sheet-content",children:(0,e.jsx)(pt,{})}),(0,e.jsx)("div",{className:"answer-sheet-footer",children:(0,e.jsx)(Ct,{})})]}):(0,e.jsx)(e.Fragment,{})});function bt(t){var a,s=t.schema,l=t.index,r=t.qsIndex,u=t.required,h=t.error,d=t.replaceTitle,i=t.seqNo,f=(0,C.useContext)(k.ZX),o=f.questionNumber,n=(0,b.AK)("-body-question"),c=(0,C.useState)(),v=(0,A.Z)(c,2),m=v[0],x=v[1],j=(0,b.Rk)(),p=(a=j.answerSheet.find(function(R){return R.id===s.id}))===null||a===void 0?void 0:a.marked;(0,C.useEffect)(function(){if(m){var R,N;(R=document.querySelector("[data-id='".concat(s.id,"']")))===null||R===void 0||R.classList.remove("ant-form-item-has-error"),(N=document.querySelector("[data-id='".concat(s.id,"']")))===null||N===void 0||N.querySelectorAll("[data-id]").forEach(function(ee){ee.classList.remove("ant-form-item-has-error")})}if(h.length>0){var M,z=h[0].split("^"),T=(0,A.Z)(z,2),D=T[0],W=T[1],U;W?(U=document.querySelector("[data-id='".concat(D,"']")),x(W)):(U=document.querySelector("[data-id='".concat(s.id,"']")),x(D)),(M=U)===null||M===void 0||M.classList.add("ant-form-item-has-error")}else m&&x(void 0)},[h]);var y="";r!==void 0&&(y+=r+1+"-"),l!==void 0&&(y+=l+1+".");var w=function(){return m?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:m})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(q.Z.Item,{label:(0,e.jsxs)("span",{className:n+"-header",children:[o?i||y:"",(0,e.jsx)(F.hl,{html:d||s.title}),(0,e.jsx)(ct,{schema:s}),w(),(0,e.jsx)(Ze,{marked:p,onClick:function(){j.markQuestion(s.id,!p)}})]}),labelCol:{span:24},wrapperCol:{span:24},required:u,children:t.children})})}(0,S.eC)("Question",(0,P.Pi)(bt),"antd");var ga=g(84305),St=g(88182),wt=g(82925);ie().locale("zh-cn");function Nt(t){var a=t.headerVisible,s=t.footerVisible,l=t.schema,r=(0,b.AK)(),u=(0,b.Al)(),h=function(){var i,f=(i=l.attribute)===null||i===void 0?void 0:i.headerImage;if(f)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(f),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Pe()(r,{preview:u.isPreview}),children:[(0,e.jsx)(ot,{}),(0,e.jsx)("div",{className:r+"-banner",children:h()}),a&&(0,e.jsx)(O,{}),(0,e.jsx)(St.ZP,{locale:wt.Z,children:(0,e.jsx)($,{children:t.children})}),s&&(0,e.jsx)(Q,{}),(0,e.jsx)(yt,{})]})}(0,S.eC)("Survey",Nt,"antd");var ja=g(13062),V=g(71230),pa=g(89032),L=g(15746),Pt=g(76826);function Et(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=(0,b.AK)("-body-question");function d(i,f){r[i]=f,f===""&&delete r[i],s((0,Z.Z)({},r))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(i){var f=i.id,o=i.attribute,n=i.title,c=(0,Pt.Ck)(o==null?void 0:o.autoSize,[2,4]);return(0,e.jsxs)(V.Z,{style:{marginBottom:10},"data-id":f,children:[n&&(0,e.jsx)(L.Z,{className:h+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:h+"-option-title",children:i.title})},i.id),(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(B.Z.TextArea,{autoSize:{minRows:c[1],maxRows:c[2]},value:r[f]||"",onChange:function(m){return d(f,m.target.value)}})})]},f)})})}(0,S.RM)("Textarea",Et,"antd");var Ca=g(36877),Mt=g(96607);function At(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=u===void 0?[]:u;function d(i){var f={};i.forEach(function(o,n){var c=h[n].id;f[c]=o}),s(f)}return(0,e.jsx)(V.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(Mt.Z,{value:h.map(function(i){return r[i.id]}).filter(function(i){return i}),style:{width:260},options:a.dataSource,onChange:d,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,S.RM)("Cascader",At,"antd");function Ee(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=(0,b.AK)("-body-question");function d(i,f){r[i]=f,f===""&&delete r[i],s((0,Z.Z)({},r))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(i){var f=i.id,o=i.attribute,n=i.title,c=o==null?void 0:o.suffix,v=o==null?void 0:o.dataType;return(0,e.jsxs)(V.Z,{style:{marginBottom:10},"data-id":f,children:[n&&(0,e.jsx)(L.Z,{className:h+"-option",span:4,children:i.title&&(0,e.jsx)("span",{className:h+"-option-title",children:(0,e.jsx)(F.hl,{html:i.title})})},i.id),(0,e.jsxs)(L.Z,{span:12,children:[(0,e.jsx)(ue,{type:v,value:r[f],onChange:function(x){return d(f,x)},suffix:c&&(0,e.jsx)("span",{className:h+"-option-suffix",children:(0,e.jsx)(F.hl,{html:c})})}),(0,e.jsx)(Ce,{schema:i,type:a.type})]})]},f)})})}(0,S.RM)("FillBlank",Ee,"antd"),(0,S.RM)("MultipleBlank",Ee,"antd");var ce=g(83279),Za=g(43358),ve=g(34041),J=g(79521),X=g(36602),Ft=g(54121),Rt=function(a){var s=(0,X.XI)(200),l=(0,A.Z)(s,2),r=l[0],u=l[1],h=(0,X.XI)(200),d=(0,A.Z)(h,2),i=d[0],f=d[1];return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},a.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:r,children:[a.cells.map(function(o){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getCellProps()),{},{className:"td","data-id":"".concat(a.i,"-").concat(o.column.id),children:o.render("Cell")}))}),a.onDelete&&(0,e.jsx)("div",{ref:i,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(Ft.Z,{onClick:function(){a.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:u||f?"visible":"hidden"}})})]}))};function Me(t){var a=t.columns,s=t.data,l=t.onAdd,r=t.onDelete,u=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),h=(0,J.useTable)({columns:a,data:s,defaultColumn:u},J.useBlockLayout),d=h.getTableProps,i=h.getTableBodyProps,f=h.headerGroups,o=h.rows,n=h.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},d()),{},{className:"table",children:[(0,e.jsx)("div",{children:f.map(function(c){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},c.getHeaderGroupProps()),{},{className:"tr",children:c.headers.map(function(v){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},v.getHeaderProps()),{},{className:"th",children:v.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},i()),{},{children:o.map(function(c,v){return n(c),(0,C.createElement)(Rt,(0,Z.Z)((0,Z.Z)({},c),{},{key:v,i:v,onDelete:r?function(){return r(v)}:void 0}))})})),l&&(0,e.jsx)("div",{className:"footer",onClick:l,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Ae(t){var a=t.schema,s=t.onChange,l=t.value||[{}],r=a.children,u=r===void 0?[]:r,h=(0,C.useMemo)(function(){return u.map(function(d){var i;return{Header:(0,e.jsx)(E.Z,{html:d.title}),width:(i=d.attribute)===null||i===void 0?void 0:i.width,accessor:d.id,Cell:function(o){var n,c=o.value,v=o.row,m=o.data;if(((n=d.attribute)===null||n===void 0?void 0:n.dataType)==="select"){var x;return(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",value:c,style:{minWidth:80},onChange:function(p){m[v.index][d.id]=p},options:((x=d.dataSource)===null||x===void 0?void 0:x.map(function(j){return{label:j.label,value:j.value}}))||[]})}else return(0,e.jsx)(B.Z,{value:c,onChange:function(p){m[v.index][d.id]=p.target.value,s((0,ce.Z)(m))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Me,{columns:h,data:l,onAdd:function(){l.push({}),s((0,ce.Z)(l))},onDelete:function(i){l.splice(i,1),s((0,ce.Z)(l))}})})}var It=function(a){var s=a.schema,l=a.value||[{},{}],r=s.children,u=r===void 0?[]:r,h=(0,C.useMemo)(function(){return u.map(function(d){var i;return{Header:(0,e.jsx)(E.Z,{html:d.title}),width:(i=d.attribute)===null||i===void 0?void 0:i.width,accessor:d.id,Cell:function(o){var n,c=o.value,v=o.row,m=o.data;if(((n=d.attribute)===null||n===void 0?void 0:n.dataType)==="select"){var x,j,p=((x=d.dataSource)===null||x===void 0||(j=x.find(function(y){return y.value===c}))===null||j===void 0?void 0:j.label)||"";return(0,e.jsx)("span",{children:p})}else return(0,e.jsx)("span",{children:c})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Me,{columns:h,data:l})})};Ae.Preview=It,(0,S.RM)("MatrixAuto",Ae,"antd");function Fe(t){var a=t.columns,s=t.data,l=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,J.useTable)({columns:a,data:s,defaultColumn:l},J.useBlockLayout),u=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,i=r.rows,f=r.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(n){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},n.getHeaderProps()),{},{className:"th",children:n.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},h()),{},{children:i.map(function(o){return f(o),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(n){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},n.getCellProps()),{},{className:"td","data-id":"".concat(o.original.rowId,"-").concat(n.column.id),children:n.render("Cell")}))})}))})}))]}))}function Re(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=u===void 0?[]:u,d=a.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var n,c=h.map(function(v){var m;return{Header:(0,e.jsx)(E.Z,{html:v.title}),width:(m=v.attribute)===null||m===void 0?void 0:m.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,w=j.data;return(0,e.jsx)(ue,{value:p,onChange:function(N){var M={};w.forEach(function(z,T){var D=z.title,W=z.rowId,U=(0,de.Z)(z,["title","rowId"]);y.index===T&&(U[v.id]=N),M[W]=U}),s(M)}})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=a.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),o=i.map(function(n,c){var v=n.id,m=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(E.Z,{html:n.title}),rowId:v},m)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Fe,{columns:f,data:o})})}var $t=function(a){var s=a.schema,l=a.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var n,c=h.map(function(v){var m;return{Header:function(){return(0,e.jsx)(E.Z,{html:v.title})},width:(m=v.attribute)===null||m===void 0?void 0:m.width,accessor:v.id,Cell:function(j){var p=j.value;return(0,e.jsx)("span",{children:p})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(n=s.attribute)===null||n===void 0?void 0:n.width,accessor:"title"}),c},[]),o=i.map(function(n,c){var v=n.id,m=r[v]||{};return(0,Z.Z)({title:n.title,rowId:v},m)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Fe,{columns:f,data:o})})};Re.Preview=$t,(0,S.RM)("MatrixFillBlank",Re,"antd");var ya=g(88983),he=g(47933);function Ie(t){var a=t.columns,s=t.data,l=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,J.useTable)({columns:a,data:s,defaultColumn:l},J.useBlockLayout),u=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,i=r.rows,f=r.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(n){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},n.getHeaderProps()),{},{className:"th",children:n.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},h()),{},{children:i.map(function(o){return f(o),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(n){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},n.getCellProps()),{},{className:"td",children:n.render("Cell")}))})}))})}))]}))}function $e(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=u===void 0?[]:u,d=a.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var n,c=h.map(function(v){var m;return{Header:(0,e.jsx)(E.Z,{html:v.title}),width:(m=v.attribute)===null||m===void 0?void 0:m.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,w=j.data;return(0,e.jsx)("div",{onClick:function(){var N={};w.forEach(function(M,z){var T=M.title,D=M.rowId,W=(0,de.Z)(M,["title","rowId"]);y.index===z?(N[D]={},N[D][v.id]=!0):N[D]=W}),s(N)},children:(0,e.jsx)(he.ZP,{checked:!!p})})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=a.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),o=i.map(function(n,c){var v=n.id,m=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(E.Z,{html:n.title}),rowId:v},m)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ie,{columns:f,data:o})})}var Tt=function(a){var s=a.schema,l=a.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var n,c=h.map(function(v){var m;return{Header:(0,e.jsx)(E.Z,{html:v.title}),width:(m=v.attribute)===null||m===void 0?void 0:m.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,w=j.data;return p?(0,e.jsx)("div",{children:(0,e.jsx)(he.ZP,{checked:!!p,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=s.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),o=i.map(function(n,c){var v=n.id,m=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(E.Z,{html:n.title}),rowId:v},m)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ie,{columns:f,data:o})})};$e.Preview=Tt,(0,S.RM)("MatrixRadio",$e,"antd");var ba=g(63185),fe=g(9676);function Te(t){var a=t.columns,s=t.data,l=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,J.useTable)({columns:a,data:s,defaultColumn:l},J.useBlockLayout),u=r.getTableProps,h=r.getTableBodyProps,d=r.headerGroups,i=r.rows,f=r.prepareRow;return(0,e.jsxs)("div",(0,Z.Z)((0,Z.Z)({},u()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(n){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},n.getHeaderProps()),{},{className:"th",children:n.render("Header")}))})}))})}),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},h()),{},{children:i.map(function(o){return f(o),(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(n){return(0,e.jsx)("div",(0,Z.Z)((0,Z.Z)({},n.getCellProps()),{},{className:"td",children:n.render("Cell")}))})}))})}))]}))}function Be(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=u===void 0?[]:u,d=a.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var n,c=h.map(function(v){var m;return{Header:(0,e.jsx)(E.Z,{html:v.title}),width:(m=v.attribute)===null||m===void 0?void 0:m.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,w=j.data;return(0,e.jsx)("div",{onClick:function(N){var M=!p,z={};w.forEach(function(T,D){var W=T.title,U=T.rowId,ee=(0,de.Z)(T,["title","rowId"]);y.index===D&&(M?ee[v.id]=!0:delete ee[v.id]),z[U]=ee}),s(z)},children:(0,e.jsx)(fe.Z,{checked:!!p})})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=a.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),o=i.map(function(n,c){var v=n.id,m=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(E.Z,{html:n.title}),rowId:v},m)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Te,{columns:f,data:o})})}var Bt=function(a){var s=a.schema,l=a.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=s.row,i=d===void 0?[]:d,f=(0,C.useMemo)(function(){var n,c=h.map(function(v){var m;return{Header:(0,e.jsx)(E.Z,{html:v.title}),width:(m=v.attribute)===null||m===void 0?void 0:m.width,accessor:v.id,Cell:function(j){var p=j.value,y=j.row,w=j.data;return p?(0,e.jsx)("div",{children:(0,e.jsx)(fe.Z,{checked:!!p,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return c.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((n=s.attribute)===null||n===void 0?void 0:n.width)||150,accessor:"title"}),c},[]),o=i.map(function(n,c){var v=n.id,m=r[v]||{};return(0,Z.Z)({title:(0,e.jsx)(E.Z,{html:n.title}),rowId:v},m)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Te,{columns:f,data:o})})};Be.Preview=Bt,(0,S.RM)("MatrixCheckbox",Be,"antd");var H=g(32059);function Dt(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=a.attribute,d=24/((h==null?void 0:h.columns)||1),i=(0,b.AK)("-body-question"),f=!!(h!=null&&h.statEnabled);function o(n,c,v){var m,x,j=(m=a.children)===null||m===void 0?void 0:m.find(function(y){return y.id===n}),p=j==null||(x=j.attribute)===null||x===void 0?void 0:x.dataType;c?r[n]=p?v:!0:delete r[n],s((0,Z.Z)({},r))}return(0,C.useEffect)(function(){u==null||u.forEach(function(n){var c;(c=n.attribute)!==null&&c!==void 0&&c.defaultChecked&&Object.keys(r).length===0&&s((0,H.Z)({},n.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(V.Z,{children:u==null?void 0:u.map(function(n){var c,v,m=n.title,x=n.id,j=(c=n.attribute)===null||c===void 0?void 0:c.dataType,p=(v=n.attribute)===null||v===void 0?void 0:v.suffix;return(0,e.jsxs)(L.Z,{span:d,className:i+"-option","data-id":x,children:[(0,e.jsxs)(fe.Z,{value:x,checked:r.hasOwnProperty(x),onChange:function(w){return o(x,w.target.checked)},children:[(0,e.jsx)(F.hl,{html:m}),(0,e.jsx)(Ce,{schema:n})]}),f&&(0,e.jsx)(we,{checked:!!r[x],optionId:x,questionId:a.id,checkedCount:Object.keys(r).length}),j&&(0,e.jsx)(ue,{value:r[x],style:{maxWidth:120},type:j,onChange:function(w){return o(x,!0,w)},suffix:p&&(0,e.jsx)("span",{className:i+"-option-suffix",children:(0,e.jsx)(F.hl,{html:p})})})]},x)})})})}(0,S.RM)("Checkbox",Dt,"antd");function Ot(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=u===void 0?[]:u;function d(i){var f,o=(f=a.children)===null||f===void 0?void 0:f.find(function(n){return n.id===i});o&&s((0,H.Z)({},i,!0))}return(0,C.useEffect)(function(){var i;(i=a.children)===null||i===void 0||i.forEach(function(f){var o,n=f.id;(o=f.attribute)!==null&&o!==void 0&&o.defaultChecked&&Object.keys(r).length===0&&s((0,H.Z)({},n,!0))})},[]),(0,e.jsx)(V.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){s(void 0)},showSearch:!0,value:Object.keys(r)[0],filterOption:function(f,o){return(o==null?void 0:o.label).toLowerCase().indexOf(f.toLowerCase())!==-1},onChange:d,style:{width:260},options:h.map(function(i){return{label:i.title,value:i.id}})})})})}(0,S.RM)("Select",Ot,"antd");var Ht=he.ZP.Group;function kt(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=a.attribute,d=24/((h==null?void 0:h.columns)||1),i=(0,b.AK)("-body-question"),f=!!(h!=null&&h.statEnabled);function o(c){var v,m=c.target.value,x=(v=a.children)===null||v===void 0?void 0:v.find(function(w){return w.id===m});if(x){var j=x.id,p=x.attribute,y=p==null?void 0:p.dataType;s((0,H.Z)({},c.target.value,y?r[j]:!0))}}function n(c,v){s((0,H.Z)({},c,v))}return(0,C.useEffect)(function(){var c;(c=a.children)===null||c===void 0||c.forEach(function(v){var m,x=v.id,j=v.attribute,p=j==null?void 0:j.dataType;(m=v.attribute)!==null&&m!==void 0&&m.defaultChecked&&Object.keys(r).length===0&&s((0,H.Z)({},x,p?r[x]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(Ht,{onChange:o,value:Object.keys(r)[0],style:{width:"100%"},children:(0,e.jsx)(V.Z,{children:u==null?void 0:u.map(function(c){var v,m,x=c.title,j=c.id,p=(v=c.attribute)===null||v===void 0?void 0:v.dataType,y=(m=c.attribute)===null||m===void 0?void 0:m.suffix;return(0,e.jsxs)(L.Z,{span:d,className:i+"-option","data-id":j,children:[(0,e.jsxs)(he.ZP,{value:j,className:"radio-item",children:[(0,e.jsx)(F.hl,{html:x}),(0,e.jsx)(Ce,{schema:c})]}),f&&(0,e.jsx)(we,{checked:!!r[j],optionId:j,questionId:a.id,checkedCount:Object.keys(r).length}),p&&(0,e.jsx)(ue,{value:r[j],type:p,style:{maxWidth:120},onChange:function(R){return n(j,R)},suffix:y&&(0,e.jsx)("span",{className:i+"-option-suffix",children:(0,e.jsx)(F.hl,{html:y})})})]},j)})})})})}(0,S.RM)("Radio",kt,"antd");var Sa=g(48736),De=g(27049);function Oe(t){var a=(0,b.AK)("-body-question");return(0,e.jsx)("div",{className:a,children:(0,e.jsx)(De.Z,{plain:!0})})}Oe.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,S.RM)("SplitLine",Oe,"antd");function He(t){var a=(0,b.AK)("-body-question");return(0,e.jsx)("div",{className:a,children:(0,e.jsx)(F.hl,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}He.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,S.RM)("Remark",He,"antd");var wa=g(34792),Lt=g(48086),zt=g(3182),Na=g(43185),ke=g(11324),Ut=g(94043),Le=g.n(Ut),Vt=g(43347),Wt=ke.Z.Dragger;function ze(t){var a=t.schema,s=t.onChange,l=t.value,r=t.readOnly,u=a.children,h=(0,b.Al)(),d=(0,C.useState)(),i=(0,A.Z)(d,2),f=i[0],o=i[1];(0,C.useEffect)(function(){var v=a.children[0].id,m=l&&l[v]||[];f==null&&m.length>0&&X.hi.loadFiles({ids:m}).then(function(x){o(x==null?void 0:x.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[l]);var n=function(){var v=(0,zt.Z)(Le().mark(function m(x){var j,p,y,w;return Le().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:j=x.onSuccess,p=x.onError,y=x.file,w=x.onProgress,h.onUpload&&h.onUpload(y,function(M){w&&w({percent:M.loaded/M.total*100})}).then(function(M){if(M.success&&j&&j(M.data),!M.success&&p){var z=new Error("Some error");p({event:z})}});case 2:case"end":return N.stop()}},m)}));return function(x){return v.apply(this,arguments)}}(),c=function(m,x){if(o(m.fileList),(m.file.status==="removed"||m.file.status==="done")&&!m.fileList.find(function(p){return p.status!=="done"})){var j=m.fileList.filter(function(p){return p.status==="done"}).map(function(p){var y;return((y=p.response)===null||y===void 0?void 0:y.id)||p.uid});j.length===0?s(void 0):s((0,H.Z)({},x,j))}};return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(v){var m=v.id,x=v.attribute,j=[];if(x){var p=x.maxFileCount,y=x.maxFileSize,w=x.fileAccept;p&&j.push("\u6700\u591A\u4E0A\u4F20".concat(p,"\u4E2A")),y&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(y,"M\u4EE5\u5185")),w&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(w))}return(0,e.jsxs)(Wt,{multiple:!0,disabled:r,maxCount:(x==null?void 0:x.maxFileCount)||20,accept:x==null?void 0:x.fileAccept,beforeUpload:function(N){return x!=null&&x.maxFileSize&&N.size>x.maxFileSize*1024*1024?(Lt.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(x.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),ke.Z.LIST_IGNORE):!0},customRequest:n,onChange:function(N){return c(N,m)},fileList:f,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Vt.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},m)})})}var Kt=function(a){var s=a.value,l=(0,C.useState)(),r=(0,A.Z)(l,2),u=r[0],h=r[1];return(0,C.useEffect)(function(){if(s){var d=Object.values(s).reduce(function(i,f){return i.push.apply(i,(0,ce.Z)(f)),i},[]);X.hi.loadFiles({ids:d}).then(function(i){h(i)})}},[s]),(0,e.jsx)("div",{className:"preview",children:u==null?void 0:u.map(function(d){return(0,e.jsx)("a",{onClick:function(){return X.hi.download("/api/files/".concat(d.id))},children:d.originalName},d.id)})})};ze.Preview=Kt,(0,S.RM)("Upload",ze,"antd");var Pa=g(34669),Gt=g(54458);function Ue(t){var a=t.schema,s=t.onChange,l=a.children,r=(0,b.Al)(),u=(0,C.useState)(0),h=(0,A.Z)(u,2),d=h[0],i=h[1];function f(o,n){var c="signature-".concat(n,"-").concat((0,k.kb)(6),".png");if(!r.onUpload){s((0,H.Z)({},n,[c]));return}fetch(o).then(function(v){return v.blob()}).then(function(v){var m=new File([v],c,{type:"image/png"});r.onUpload(m,function(x){i(x.loaded/x.total*100)}).then(function(x){x.success&&x.data.id&&s((0,H.Z)({},n,[x.data.id]))})})}return(0,e.jsx)("div",{children:l==null?void 0:l.map(function(o){var n=o.id,c=o.title;return(0,e.jsxs)(V.Z,{gutter:[10,0],"data-id":n,children:[c&&(0,e.jsx)(L.Z,{span:24},o.id),(0,e.jsxs)(L.Z,{span:24,children:[(0,e.jsx)(st,{onChange:function(m){return f(m,n)}}),d>0&&d!==100&&(0,e.jsx)(Gt.Z,{percent:d,size:"small",showInfo:!1})]})]},n)})})}Ue.Preview=function(t){var a=t.value,s;return a&&(s=Object.values(a)[0][0]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("img",{src:"/api/files/".concat(s)})})},(0,S.RM)("Signature",Ue,"antd");var Ea=g(96433),ye=g(2864),Ve=g(41687),Xt=g(46870),We=g(18613),Yt=g(57206),Qt={1:(0,e.jsx)(Ve.Z,{}),2:(0,e.jsx)(Ve.Z,{}),3:(0,e.jsx)(Xt.Z,{}),4:(0,e.jsx)(We.Z,{}),5:(0,e.jsx)(We.Z,{})};function Jt(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=u===void 0?[]:u;function d(f,o){s((0,H.Z)({},f,o))}var i=function(o){var n=o.attribute||{},c=o.id,v=n.scope,m=v===void 0?"[0,5]":v,x=n.scoreStyle,j=m.replace("[","").replace("]","").split(","),p=(0,A.Z)(j,2),y=p[0],w=p[1];return x==="heart"?(0,e.jsx)(ye.Z,{defaultValue:parseInt(y),character:(0,e.jsx)(Yt.Z,{}),style:{color:"#ea7463"},count:parseInt(w),onChange:function(N){return d(c,N)}},c):x==="smile"?(0,e.jsx)(ye.Z,{defaultValue:parseInt(y),character:function(N){var M=N.index;return Qt[M+1]},count:parseInt(w),onChange:function(N){return d(c,N)}},c):(0,e.jsx)(ye.Z,{defaultValue:parseInt(y),count:parseInt(w),onChange:function(N){return d(c,N)}},c)};return(0,e.jsx)(V.Z,{children:h.map(function(f){return i(f)})})}(0,S.RM)("Score",Jt,"antd");var Ke=g(55686),qt=ve.Z.Option;function Ge(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),f=(0,A.Z)(i,2),o=f[0],n=f[1];function c(x){d&&s((0,H.Z)({},d,x))}var v=(0,X.zE)(function(x){X.hi.userSelect({name:x,selected:r[d]||[]}).then(function(j){j.success&&n(j.data)})},5),m=function(j){c(j?o.map(function(p){return p.userId}):void 0)};return(0,C.useEffect)(function(){var x;v(""),(x=a.children)===null||x===void 0||x.forEach(function(j){var p,y=j.id;(p=j.attribute)!==null&&p!==void 0&&p.defaultChecked&&Object.keys(r).length===0&&s((0,H.Z)({},y,!0))})},[]),(0,e.jsx)(V.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,mode:"multiple",onClear:function(){s(void 0)},value:r[d]||[],onSearch:v,showSearch:!0,onChange:c,filterOption:!1,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(De.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(fe.Z,{onChange:function(y){m(y.target.checked)},children:"\u5168\u9009"})})]})},children:o.map(function(x){return(0,e.jsx)(qt,{value:x.userId,label:x.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Ke.Z,{user:x,size:20})}),x.name," ",x.deptName&&"(".concat(x.deptName,")")]})},x.userId)})})})})}var _t=function(a){var s=a.schema,l=a.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),f=(0,A.Z)(i,2),o=f[0],n=f[1];return(0,C.useEffect)(function(){X.hi.userSelect({selected:r[d]||[],name:"^_^"}).then(function(c){c.success&&n(c.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(pe.Z,{children:o.map(function(c){return(0,e.jsx)(Ne.Z,{title:c.name,children:(0,e.jsx)(Ke.Z,{user:c,size:24})},c.userId)})})})};Ge.Preview=_t,(0,S.RM)("User",Ge,"antd");var Ma=g(71153),ea=g(60331),Aa=g(62999),ta=g(54680),aa=g(60780),na=g.n(aa);function Xe(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),f=(0,A.Z)(i,2),o=f[0],n=f[1];function c(m){d&&((m==null?void 0:m.length)===0?s(void 0):s((0,H.Z)({},d,m==null?void 0:m.map(function(x){return x.value}))))}var v=(0,C.useMemo)(function(){return na()(o.map(function(m){return{title:m.name,key:m.id,value:m.id,parentId:m.parentId}}),{parentProperty:"parentId",customID:"key"})},[o]);return(0,C.useEffect)(function(){X.hi.deptSelect({}).then(function(m){m.success&&n(m.data)})},[]),(0,e.jsx)(V.Z,{children:(0,e.jsx)(L.Z,{span:12,children:(0,e.jsx)(ta.Z,{style:{width:"100%"},treeCheckable:!0,value:(r[d]||[]).map(function(m){return{value:m}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:v,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:c,showSearch:!1})})})}var ra=function(a){var s=a.schema,l=a.value,r=l===void 0?{}:l,u=s.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)([]),f=(0,A.Z)(i,2),o=f[0],n=f[1];return(0,C.useEffect)(function(){X.hi.deptSelect({selected:r[d]||[],name:"^_^"}).then(function(c){c.success&&n(c.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(pe.Z,{children:o.map(function(c){return(0,e.jsx)(ea.Z,{color:"blue",children:c.name},c.id)})})})};Xe.Preview=ra,(0,S.RM)("Dept",Xe,"antd");function ia(t){for(var a=[],s=2;s<t+2;s++)a.push(s/(t+2));return a}function sa(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=u===void 0?[]:u,d=h[0].id,i=(0,C.useState)(function(){return r[d]||-1}),f=(0,A.Z)(i,2),o=f[0],n=f[1];function c(m){s((0,H.Z)({},d,m))}(0,C.useEffect)(function(){Object.keys(r).length>0&&n(r[d])},[r,d]);var v=function(x){var j=r[d],p=ia(o||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){n(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:[0,1,2,3,4,5,6,7,8,9,10].map(function(y){var w={background:"#2672ff",opacity:p[y]};return(0,e.jsx)("div",{className:"nps-item",style:o>=y?w:void 0,onMouseOver:function(){n(y)},onClick:function(){return c(y)},children:y},y)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,e.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]},x.id)};return(0,e.jsx)(V.Z,{children:h.map(function(m){return v(m)})})}(0,S.RM)("Nps",sa,"antd");var la=g(91220);function Ye(t,a,s){if(!t)return"";var l=RegExp("_{3,}","g"),r=t.matchAll(l),u=[],h=(0,la.Z)(r),d;try{for(h.s();!(d=h.n()).done;){var i=d.value,f=i.index,o=i.index+i[0].length;u.push([f,o])}}catch(y){h.e(y)}finally{h.f()}if(u.length===0)return t;for(var n=u[0][0]===0?"":t.substring(0,u[0][0]),c=0;c<u.length;c++){var v=u[c],m=u[c+1],x=t.substring(v[0],v[1]),j=t.substring(v[1],m?m[0]:t.length),p=s?s[a[c].id]:"";n+='<input data-id="'.concat(a[c].id,`" value='`).concat(p,`' class="mod_fillblank" style="width: `).concat(12*x.length,'px;">'),n+=j}return n}function Qe(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children,h=a.attribute,d=h===void 0?{}:h,i=d.content;function f(o,n){r[o]=n,n===""&&delete r[o],s((0,Z.Z)({},r))}return(0,C.useEffect)(function(){u==null||u.forEach(function(o){var n=document.querySelector("[data-id='".concat(o.id,"']"));if(n){var c=r[o.id];c&&(n.value=c),n.onchange=function(v){var m;f(o.id,(m=v.target)===null||m===void 0?void 0:m.value)}}})},[]),(0,C.useEffect)(function(){Object.keys(r).forEach(function(o){var n=r[o],c=document.querySelector("[data-id='".concat(o,"']"));n!==c.value&&(c.value=n===void 0?"":n)})},[r]),(0,e.jsx)("div",{children:(0,e.jsx)(E.Z,{html:Ye(i,u),replaceP:!1})})}Qe.Preview=function(t){var a=t.schema,s=t.value,l=a.children,r=a.attribute,u=r===void 0?{}:r,h=u.content;return(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("div",{children:(0,e.jsx)(E.Z,{html:Ye(h,l,s),replaceP:!1})})})},(0,S.RM)("HorzBlank",Qe,"antd");function oa(t){var a=t.schema,s=t.onChange,l=t.value,r=l===void 0?{}:l,u=a.children;function h(d,i){s((0,H.Z)({},i,d))}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(d){var i=d.id,f=d.title,o=d.attribute,n=o===void 0?{}:o,c=n.mapMove;return(0,e.jsxs)(V.Z,{gutter:[10,0],"data-id":i,children:[f&&(0,e.jsx)(L.Z,{span:24},d.id),(0,e.jsx)(L.Z,{span:24,children:(0,e.jsx)(dt,{optionId:i,onChange:function(m){return h(m,i)},value:r[i],mapMove:c})})]},i)})})}(0,S.RM)("Address",oa,"antd");var ua=function(a){return(0,e.jsx)(e.Fragment,{children:a.children})},da=ua}}]);
