(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1034],{51009:function(f,R,n){"use strict";n.r(R),n.d(R,{default:function(){return Rn}});var G=n(86582),Z=n(11849),I=n(57527),p=n(67294),y=n(42285),M=n(73727),Hn=n(49111),T=n(19650),$=n(1870),Vn=n(94233),F=n(51890),An=n(30887),N=n(54689),Mn=n(20228),W=n(11382),z=n(3182),U=n(94043),B=n.n(U),Y=n(24616),J=n(55035),Q=n(17673),Bn=n(59250),X=n(13013),E=n(93224),b=n(94184),S=n.n(b),k=n(2589),w=n.n(k),a=n(85893),q=function(t){var u=t.overlayClassName,r=(0,E.Z)(t,["overlayClassName"]);return(0,a.jsx)(X.Z,(0,Z.Z)({overlayClassName:S()(w().container,u)},r))},_=q,nn=n(26222),s=n.n(nn),O=n(27400),an=n(2299),tn=function(){var x=(0,z.Z)(B().mark(function t(){var u,r,c,d,h;return B().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:u=y.m8.location,r=u.query,c=r===void 0?{}:r,d=u.pathname,h=c.redirect,window.location.pathname!=="/user/login"&&!h&&y.m8.replace({pathname:"/user/login",search:(0,Q.stringify)({redirect:d})});case 3:case"end":return v.stop()}},t)}));return function(){return x.apply(this,arguments)}}(),en=function(t){var u=t.menu,r=(0,O.a)(),c=r.user,d=(0,p.useCallback)(function(v){var m=v.key;if(m==="logout"){r.logout(),tn();return}y.m8.push("/account/".concat(m))},[r]),h=(0,a.jsx)("span",{className:"".concat(s().action," ").concat(s().account),children:(0,a.jsx)(W.Z,{size:"small",style:{marginLeft:8,marginRight:8}})});if(r.loading||!c||!c.name)return h;var o=(0,a.jsxs)(N.Z,{className:s().menu,selectedKeys:[],onClick:d,children:[u&&(0,a.jsxs)(N.Z.Item,{children:[(0,a.jsx)(Y.Z,{}),"\u4E2A\u4EBA\u8BBE\u7F6E"]},"settings"),u&&(0,a.jsx)(N.Z.Divider,{}),(0,a.jsxs)(N.Z.Item,{children:[(0,a.jsx)(J.Z,{}),"\u9000\u51FA\u767B\u5F55"]},"logout")]});return(0,a.jsx)(_,{overlay:o,children:(0,a.jsxs)("span",{className:"".concat(s().action," ").concat(s().account),children:[(0,a.jsx)(F.C,{size:"small",className:s().avatar,src:"/api/public/preview/".concat(c.avatar)||0,alt:"avatar"}),(0,a.jsx)("span",{className:"".concat(s().name," anticon"),children:c.name})]})})},rn=(0,an.Pi)(en),En=n(65011),on=n(49288),On=n(47673),sn=n(4107),ln=n(32059),K=n(2824),un=n(76570),L=n(21770),cn=n(10292),D=n.n(cn),dn=function(t){var u=t.className,r=t.defaultValue,c=t.onVisibleChange,d=t.placeholder,h=t.visible,o=t.defaultVisible,v=(0,E.Z)(t,["className","defaultValue","onVisibleChange","placeholder","visible","defaultVisible"]),m=(0,p.useRef)(null),H=(0,L.Z)(r,{value:t.value,onChange:t.onChange}),l=(0,K.Z)(H,2),e=l[0],i=l[1],g=(0,L.Z)(o!=null?o:!1,{value:t.visible,onChange:c}),j=(0,K.Z)(g,2),C=j[0],P=j[1],Sn=S()(D().input,(0,ln.Z)({},D().show,C));return(0,a.jsxs)("div",{className:S()(u,D().headerSearch),onClick:function(){P(!0),C&&m.current&&m.current.focus()},onTransitionEnd:function(A){var Dn=A.propertyName;Dn==="width"&&!C&&c&&c(C)},children:[(0,a.jsx)(un.Z,{style:{cursor:"pointer"}},"Icon"),(0,a.jsx)(on.Z,{className:Sn,value:e,options:v.options,onChange:i,children:(0,a.jsx)(sn.Z,{size:"small",ref:m,defaultValue:r,"aria-label":d,placeholder:d,onKeyDown:function(A){A.key==="Enter"&&v.onSearch&&v.onSearch(e)},onBlur:function(){P(!1)}})},"AutoComplete")]})},vn=dn,hn=function(){var t=s().right;return t="".concat(s().right,"  ").concat(s().dark),(0,a.jsxs)(T.Z,{className:t,children:[(0,a.jsx)(vn,{className:"".concat(s().action," ").concat(s().search),placeholder:"\u7AD9\u5185\u641C\u7D22",options:[{label:(0,a.jsx)("a",{href:"https://surveyking.cn",children:"Survey King"}),value:"Survey King"}]}),(0,a.jsx)("span",{className:s().action,onClick:function(){window.open("https://surveyking.cn")},children:(0,a.jsx)($.Z,{})}),(0,a.jsx)(rn,{menu:!0}),(0,a.jsx)(y.pD,{className:s().action})]})},mn=hn,fn=n(24557),gn=n(78874),yn=n(11013),xn=n(97544),jn=function(){return(0,a.jsx)(xn.Z,{copyright:!1,links:[{key:"Survey King",title:(0,a.jsx)(fn.Z,{}),href:"https://surveyking.cn",blankTarget:!0},{key:"github",title:(0,a.jsx)(gn.Z,{}),href:"https://github.com/javahuang/SurveyKing",blankTarget:!0},{key:"gitee",title:(0,a.jsx)(yn.Z,{}),href:"https://gitee.com/surveyking/surveyking",blankTarget:!0}]})},Cn=n(5481),Zn=n.n(Cn),pn=n(77613),Nn=function(t){var u=t.children,r=t.location,c=r===void 0?{pathname:"/"}:r,d=(0,O.a)(),h=d.user,o=d.system,v=(0,y.YB)(),m=v.formatMessage;(0,p.useEffect)(function(){d.currentUser()},[d]),(0,p.useEffect)(function(){var l=document.querySelector("link[rel~='icon']");l&&(l.href="/api/public/".concat(o.avatar)),document.title=o.name||"\u5377\u738B";var e=document.getElementById("loading-img");e&&(e.src="/api/public/preview/".concat(o.avatar));var i=document.getElementById("loading-name");i&&(i.textContent=document.title)},[o]);var H=function l(e){return e.filter(function(i){var g;return h==null||(g=h.authorityList)===null||g===void 0?void 0:g.find(function(j){return j.startsWith(i.authority)})}).map(function(i){return(0,Z.Z)((0,Z.Z)({},i),{},{children:i.children?l(i.children):void 0})})};return(0,a.jsx)(I.ZP,(0,Z.Z)((0,Z.Z)({title:o==null?void 0:o.name,logo:(0,a.jsx)("img",{src:o.avatar?"/api/public/preview/".concat(o.avatar):Zn()}),formatMessage:m},t),{},{onMenuHeaderClick:function(){return y.m8.push("/")},menuItemRender:function(e,i){return e.isUrl||!e.path||c.pathname===e.path?i:(0,a.jsx)(M.rU,{to:e.path,children:i})},breadcrumbRender:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return[{path:"/",breadcrumbName:m({id:"menu.home"})}].concat((0,G.Z)(e))},itemRender:function(e,i,g,j){var C=g.indexOf(e)===0;return C?(0,a.jsx)(M.rU,{to:j.join("/"),children:e.breadcrumbName}):(0,a.jsx)("span",{children:e.breadcrumbName})},footerRender:function(){return(0,a.jsx)(jn,{})},menuDataRender:H,rightContentRender:function(){return(0,a.jsx)(mn,{})},onPageChange:function(){},children:u}))},Rn=(0,pn.P)(Nn)},5481:function(f,R,n){f.exports=n.p+"static/logo.de1a765f.svg"},2589:function(f){f.exports={container:"container___1Rq3A"}},10292:function(f){f.exports={headerSearch:"headerSearch___RN1il",input:"input___3Vzpl",show:"show___VZRKu"}},26222:function(f){f.exports={menu:"menu___1L63y",right:"right___3L8KG",action:"action___LP4_P",search:"search___2W0sJ",account:"account___6HXOq",avatar:"avatar___2cOWV",dark:"dark___1NwCY",name:"name___WfKAK"}}}]);
