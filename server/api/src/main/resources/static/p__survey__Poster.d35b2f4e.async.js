(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[304],{61767:function(I,De,a){"use strict";a.r(De),a.d(De,{default:function(){return Pt}});var M=a(67294),X=a(94657),R=a(11628),i=a(72706),Fe=a(80937),f=a(11849),Ze=M.createContext({}),w="http://150.158.30.131:8181/";function ut(){return Math.random()}function ee(r,t){var n=(0,f.Z)({},r);return n=ct(n,["width","height","lineHeight","fontSize","borderWidth"]),n=V(n,["animationDuration","animationDelay"]),t||(delete n.top,delete n.right,delete n.bottom,delete n.left,delete n.transform,delete n.borderWidth,delete n.animationName),n}function ct(r,t){return t.forEach(function(n){r[n]&&(r[n]+"").indexOf("px")===-1&&(r[n]=r[n]+"px")}),r}function V(r,t){return t.forEach(function(n){r[n]&&(r[n]+"").indexOf("s")===-1&&(r[n]=r[n]+"s")}),r}var Te=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,s=null;return function(){s!==null&&clearTimeout(s),s=setTimeout(t,n)}};function fe(){return document.getElementById("root")}function yt(){}function ge(r){return document.getElementById("cmp"+r)}function q(){var r=(0,M.useState)(0),t=(0,X.Z)(r,2),n=t[1],s=(0,M.useCallback)(function(){n(function(o){return o+1})},[]);return s}function re(){return(0,M.useContext)(Ze)}var me=a(11292),Qe=a.n(me),e=a(85893);function Ie(r){var t=r.children,n=r.baseCmp,s=r.value,o=r.style,u=o===void 0?{width:200,height:200}:o,c=re(),h=M.useMemo(function(){return(0,f.Z)((0,f.Z)({},n),{},{data:(0,f.Z)((0,f.Z)({},n.data),{},{value:s,style:(0,f.Z)((0,f.Z)({},n.data.style),u)})})},[n,s,u]),l=function(b){b.preventDefault(),b.stopPropagation(),c.addCmp(h)},p=function(b){b.dataTransfer.setData("add-component",JSON.stringify(h))};return(0,e.jsx)("li",{className:Qe().main,onClick:l,draggable:"true",onDragStart:p,children:t})}var dt=[{style:{width:180,height:320},value:w+"chuliu.jpeg"},{style:{width:180,height:320},value:w+"hua-bg.png"},{style:{width:315,height:187},value:w+"tiger.png"},{style:{width:128,height:30},value:w+"fu.png"},{style:{width:40,height:30},value:w+"gold-coins.png"},{style:{width:40,height:30},value:w+"gold-coins2.png"},{style:{width:120,height:230},value:w+"meng.webp"},{style:{width:300,height:152},value:w+"taohuayun.png"},{style:{width:300,height:312},value:w+"hua.png"},{style:{width:320,height:200},value:w+"certificate.jpg"},{style:{width:320,height:200},value:w+"rose.jpg"},{style:{width:320,height:200},value:w+"red-rose.jpg"},{style:{width:320,height:200},value:w+"peony.jpg"},{style:{width:320,height:200},value:w+"flower.jpg"}];function We(r){var t=r.baseCmp,n=(0,R.IE)(),s=n.images[i.__.PosterImage];return(0,e.jsx)(e.Fragment,{children:s.map(function(o,u){return(0,e.jsx)(Ie,{baseCmp:t,value:"/api/public/preview/".concat(o.id),children:(0,e.jsx)("img",{src:"/api/public/preview/".concat(o.id),alt:""})},"img"+u)})})}var Ue=(0,Fe.Pi)(We),Ve=a(23804),J=a(61501),Ee=[{type:"QRNormal",component:J.QRNormal},{type:"QRRandRect",component:J.QRRandRect},{type:"QRDsj",component:J.QRDsj},{type:"QR25D",component:J.QR25D},{type:"QRImage",component:J.QRImage},{type:"QRResImage",component:J.QRResImage},{type:"QRBubble",component:J.QRBubble},{type:"QRFunc",component:J.QRFunc},{type:"QRLine",component:J.QRLine}];function mt(r){var t,n=(t=Ee.find(function(s){return s.type===r}))===null||t===void 0?void 0:t.component;return n||J.QRNormal}function Be(r){var t=r.baseCmp,n=(0,R.IE)(),s=(0,Ve.Jg)(n.id);return(0,e.jsx)(e.Fragment,{children:Ee.map(function(o,u){return(0,e.jsx)(Ie,{baseCmp:(0,f.Z)((0,f.Z)({},t),{},{data:(0,f.Z)((0,f.Z)({},t.data),{},{componentType:o.type})}),value:s,style:{width:120,height:120,backgroundColor:"#ffffff"},children:M.createElement(o.component,{value:s})},"img"+u)})})}var ht=Be,Ke=a(46133),ae=a.n(Ke),Ne=0,Re=1,pe=2,Ce=3,vt=[{desc:"\u6587\u672C",icon:"Text",data:{type:Ne,value:"\u6587\u672C",iconfont:"iconfont icon-wenben",style:{top:1,left:0,width:80,height:30,lineHeight:30,fontSize:12,fontWeight:"normal",color:"#000",backgroundColor:"#ffffff00",textAlign:"left",borderRadius:"0%",borderStyle:"none",borderWidth:"0",borderColor:"#ffffff00"}}},{desc:"\u6309\u94AE",icon:"Button",data:{type:Re,value:"\u6309\u94AE",iconfont:"iconfont icon-anniu",style:{top:0,left:0,width:80,height:30,lineHeight:30,fontSize:12,fontWeight:"normal",color:"#000",backgroundColor:"#ffffff00",textAlign:"left",borderRadius:"0%",borderStyle:"none",borderWidth:"0",borderColor:"#ffffff00"}}},{desc:"\u56FE\u7247",icon:"Picture",data:{type:pe,iconfont:"iconfont icon-image",value:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1333208373,3297678241&fm=26&gp=0.jpg",style:{top:0,left:0,width:200,height:100,borderRadius:"0%",borderStyle:"none",borderWidth:"0",borderColor:"#ffffff00"}}},{desc:"\u4E8C\u7EF4\u7801",icon:"Qrcode",data:{type:Ce,iconfont:"iconfont icon-image",value:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1333208373,3297678241&fm=26&gp=0.jpg",style:{top:0,left:0,width:200,height:100,borderRadius:"0%",borderStyle:"none",borderWidth:"0",borderColor:"#ffffff00"}}}],_=a(75414),xe=a(54549);function ye(){var r=re(),t=(0,M.useState)(null),n=(0,X.Z)(t,2),s=n[0],o=n[1],u=function(l,p){p.data.type===pe||p.data.type===Ce||l.dataTransfer.setData("add-component",JSON.stringify(p))},c=function(l,p){if(l.preventDefault(),l.stopPropagation(),p.data.type===Ne||p.data.type===Re){r.addCmp(p);return}if(s)o(null);else{var P=null;switch(p.data.type){case pe:P=(0,e.jsx)(Ue,{baseCmp:p});break;case Ce:P=(0,e.jsx)(ht,{baseCmp:p});break;default:P=null}o(P)}};return(0,e.jsxs)("div",{id:"cmps",className:ae().main,children:[(0,e.jsx)("div",{className:ae().cmpList,children:vt.map(function(h){return(0,e.jsxs)("div",{className:ae().cmp,draggable:h.data.type!==pe,onDragStart:function(p){return u(p,h)},onClick:function(p){return c(p,h)},children:[(0,e.jsx)("span",{className:"".concat(ae().cmpIcon),children:(0,e.jsx)(_.MT,{infer:h.icon})}),(0,e.jsxs)("span",{className:ae().cmpText,children:[" ",h.desc," "]})]},h.desc)})}),s&&(0,e.jsx)(xe.Z,{onClick:function(){return o(null)},className:ae().close}),s&&(0,e.jsx)("ul",{className:ae().detailList,children:s})]})}var ze=(0,Fe.Pi)(ye),$=a(69610),he=a(54941),je=a(43028),Xe=a(5869),Ye=a(97226),oe=a.n(Ye);function we(r){var t=r.index,n=r.pos,s=r.cmp,o=re(),u=function(x){x.stopPropagation(),o.deleteSelectedCmp(s)},c=function(){o.addCmp(s)},h=function(x){o.changeCmpIndex(t)},l=function(x){o.changeCmpIndex(t,0)},p=o.getCmps(),P=function(x,j){var F=document.getElementById("cmp"+j.onlyKey),S=F.className;S.indexOf("hover")===-1&&F.setAttribute("class",S+" hover")},b=function(x,j){var F=document.getElementById("cmp"+j.onlyKey),S=F.className;S.indexOf("hover")>-1&&F.setAttribute("class",S.slice(0,-6))},v=function(x,j){o.setSelectedCmp(j)};return(0,e.jsxs)("ul",{className:oe().main,style:n,children:[(0,e.jsx)("li",{className:oe().item,onClick:c,children:"\u590D\u5236"}),(0,e.jsx)("li",{className:oe().item,onClick:u,children:"\u5220\u9664"}),(0,e.jsx)("li",{className:oe().item,onClick:h,children:"\u7F6E\u9876"}),(0,e.jsx)("li",{className:oe().item,onClick:l,children:"\u7F6E\u5E95"}),p.map(function(g){return(0,e.jsxs)("li",{className:oe().item,onMouseOver:function(j){return P(j,g)},onMouseLeave:function(j){return b(j,g)},onClick:function(j){return v(j,g)},children:[(0,e.jsx)("div",{className:oe().desc,children:g.desc}),(0,e.jsx)("div",{className:oe().thumbnail,style:{width:g.data.style.width,height:g.data.style.height},children:Me(g)})]},g.onlyKey)})]})}var Je=a(29011),$e=a.n(Je);function Ge(r){var t=r.style;return(0,e.jsx)("div",{className:$e().main,style:ee(t,!1),children:r.value})}var qe=a(73420),_e=a.n(qe);function et(r){var t=r.style;return(0,e.jsx)("button",{className:_e().main,style:ee(t,!1),children:r.value})}var tt=a(69851),nt=a.n(tt);function at(r){var t=r.style;return(0,e.jsx)("img",{className:nt().main,style:ee(t),src:r.value,alt:""})}var Ae=a(68009),ot=a.n(Ae);function ft(r){var t=r.style,n=r.componentType;return M.createElement(mt(n),{value:r.value,style:ee(t),className:ot().main})}var it=a(94184),ie=a.n(it),st=a(97427),Y=a.n(st),Pe=function(r){(0,je.Z)(n,r);var t=(0,Xe.Z)(n);function n(s,o){var u;return(0,$.Z)(this,n),u=t.call(this,s),u.moveByMouse=function(c,h){c.preventDefault(),u.context.updateSelectedCmpStyle(h,"frequently")},u.whichEvent=function(c){var h=u.context,l=h.getSelectedCmp(),p={};switch(c.keyCode){case 37:p.left=l.data.style.left-1,u.moveByMouse(c,p);break;case 38:p.top=l.data.style.top-1,u.moveByMouse(c,p);break;case 39:p.left=l.data.style.left+1,u.moveByMouse(c,p);break;case 40:p.top=l.data.style.top+1,u.moveByMouse(c,p);break;default:break}},u.onStoreChange=function(){u.forceUpdate()},u.setShowContextMenu=function(c){c.stopPropagation(),c.preventDefault(),u.state.showContextMenu&&u.setState({showContextMenu:!1})},u.handleMouseDown=function(c,h){c.stopPropagation(),c.preventDefault();var l=u.context.getCmp(u.props.index),p=c.pageX,P=c.pageY,b=function(x){var j=x.pageX,F=x.pageY,S=j-p,O=F-P,ne={};h&&(h.indexOf("top")>=0&&(O=0-O,ne.top=l.data.style.top-O),h.indexOf("left")>=0&&(S=0-S,ne.left=l.data.style.left-S)),Te(u.context.updateSelectedCmpStyle((0,f.Z)((0,f.Z)({},ne),{},{width:l.data.style.width+S,height:l.data.style.height+O}),"frequently"))},v=function g(){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",g),u.context.recordCanvasChangeHistory()};document.addEventListener("mousemove",b),document.addEventListener("mouseup",v)},u.handleDragStart=function(c){u.setActive(c);var h=c.pageX,l=c.pageY;c.dataTransfer.setData("startPos",JSON.stringify({pageX:h,pageY:l}))},u.setActive=function(c){c.stopPropagation();var h=u.context.getCmp(u.props.index);u.context.setSelectedCmp(h)},u.handleContextMenu=function(c){c.preventDefault(),u.setState({showContextMenu:!0})},u.handleMouseDownofRotate=function(c){c.stopPropagation(),c.preventDefault();var h=u.context.updateSelectedCmpStyle,l=c.pageX,p=c.pageY,P=function(g){var x=g.pageX,j=g.pageY,F=x-l,S=j-p,O=360*Math.atan2(S,F)/(2*Math.PI);Te(h({transform:"rotate(".concat(O,"deg)")},"frequently"))},b=function v(){document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",v),u.context.recordCanvasChangeHistory()};document.addEventListener("mousemove",P),document.addEventListener("mouseup",b)},u.state={showContextMenu:!1},u}return(0,he.Z)(n,[{key:"componentDidMount",value:function(){document.getElementById("root").addEventListener("click",this.setShowContextMenu),document.onkeydown=this.whichEvent,this.unregisterCmpsEntity=this.context.registerCmpsEntity(this.context.getCmp(this.props.index).onlyKey,this)}},{key:"componentWillUnmount",value:function(){document.getElementById("root").removeEventListener("click",this.setShowContextMenu),this.unregisterCmpsEntity()}},{key:"render",value:function(){var o=this,u=this.props.index,c=this.context,h=c.getCmp(this.props.index),l=c.getSelectedCmp(),p=l&&l.onlyKey===h.onlyKey,P=this.state.showContextMenu,b=h.data.style,v=b.top-4,g=b.left-4,x=b.width,j=b.height;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{id:"cmp"+h.onlyKey,className:Y().main+" "+(p?"selected":Y().unselected),style:(0,f.Z)((0,f.Z)({},ee(b,!0)),{},{zIndex:u}),draggable:!0,onDragStart:this.handleDragStart,onClick:this.setActive,onContextMenu:this.handleContextMenu,children:Me(h)}),p&&(0,e.jsxs)("ul",{className:Y().stretch,style:{transform:"rotate".concat(b.transform)},children:[(0,e.jsx)("li",{className:ie()(Y().rotate,"iconfont icon-xuanzhuan"),style:{top:v-20,left:g+x/2},onMouseDown:this.handleMouseDownofRotate}),(0,e.jsx)("li",{className:Y().stretchDot,style:{top:v,left:g},onMouseDown:function(S){return o.handleMouseDown(S,"top left")}}),(0,e.jsx)("li",{className:Y().stretchDot,style:{top:v,left:g+x/2},onMouseDown:function(S){return o.handleMouseDown(S,"top")}}),(0,e.jsx)("li",{className:Y().stretchDot,style:{top:v,left:g+x+2},onMouseDown:function(S){return o.handleMouseDown(S,"top right")}}),(0,e.jsx)("li",{style:{top:v+j/2,left:g+x+2},onMouseDown:this.handleMouseDown}),(0,e.jsx)("li",{className:Y().stretchDot,style:{top:v+j+2,left:g+x+2},onMouseDown:this.handleMouseDown}),(0,e.jsx)("li",{className:Y().stretchDot,style:{top:v+j+2,left:g+x/2},onMouseDown:this.handleMouseDown}),(0,e.jsx)("li",{className:Y().stretchDot,style:{top:v+j+2,left:g},onMouseDown:function(S){return o.handleMouseDown(S,"bottom left")}}),(0,e.jsx)("li",{className:Y().stretchDot,style:{top:v+j/2,left:g},onMouseDown:function(S){return o.handleMouseDown(S,"left")}})]}),P&&(0,e.jsx)(we,{index:u,pos:{top:b.top-80,left:b.left+60},cmp:h})]})}}]),n}(M.Component);Pe.contextType=Ze;function Me(r){var t=r.data,n=null;switch(t.type){case Ne:n=(0,e.jsx)(Ge,(0,f.Z)({},t));break;case Re:n=(0,e.jsx)(et,(0,f.Z)({},t));break;case pe:n=(0,e.jsx)(at,(0,f.Z)({},t));break;case Ce:n=(0,e.jsx)(ft,(0,f.Z)({},t));break;default:n=null}return n}var lt=a(53384),Le=a.n(lt),H=a(10781),d=a.n(H),m=a(85939),C=a.n(m),Z=[{id:"0",name:"\u5956\u72B6",img:w+"gaoshaoyun.png",cmps:'{"style":{"width":320,"height":568,"backgroundColor":"#ffffff00","backgroundImage":"","backgroundPosition":"center","backgroundSize":"cover","backgroundRepeat":"no-repeat","boxSizing":"content-box"},"cmps":[{"desc":"\u56FE\u7247","data":{"type":2,"iconfont":"iconfont icon-image","value":"http://150.158.30.131:8181/certificate.jpg","style":{"top":0,"left":0,"width":320,"height":200,"borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.2471236123826679},{"desc":"\u56FE\u7247","data":{"type":2,"iconfont":"iconfont icon-image","value":"http://150.158.30.131:8181/tiger.png","style":{"top":138,"left":243,"width":43,"height":39,"borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.7204251020316776},{"desc":"\u6587\u672C","data":{"type":0,"value":"\u9AD8\u5C11\u4E91\u540C\u5B66\uFF1A","iconfont":"iconfont icon-wenben","style":{"top":72,"left":29,"width":80,"height":30,"lineHeight":30,"fontSize":"12","fontWeight":"bold","color":"#000","backgroundColor":"#ffffff00","textAlign":"left","borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.19367990107557298},{"desc":"\u6587\u672C","data":{"type":0,"value":"\u57282021\u5E74\u5EA6\u8868\u73B0\u4F18\u5F02\uFF0C\u88AB\u8BC4\u4E3A","iconfont":"iconfont icon-wenben","style":{"top":98,"left":53,"width":179,"height":26,"lineHeight":30,"fontSize":12,"fontWeight":"bold","color":"#000","backgroundColor":"#ffffff00","textAlign":"left","borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.5641712922935813},{"desc":"\u6587\u672C","data":{"type":0,"value":"\u4E09\u597D\u5B66\u751F","iconfont":"iconfont icon-wenben","style":{"top":127,"left":106,"width":92,"height":31,"lineHeight":30,"fontSize":"22","fontWeight":"bold","color":"#fc0000ff","backgroundColor":"#ffffff00","textAlign":"left","borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.3161408071395724},{"desc":"\u6587\u672C","data":{"type":0,"value":"\u7279\u53D1\u6B64\u72B6\uFF0C\u4EE5\u8D44\u9F13\u52B1\uFF01","iconfont":"iconfont icon-wenben","style":{"top":155,"left":28,"width":179,"height":26,"lineHeight":30,"fontSize":12,"fontWeight":"bold","color":"#000","backgroundColor":"#ffffff00","textAlign":"left","borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.5359619832019422}]}'},{id:"1",name:"\u65B0\u5E74",img:w+"newyear.png",cmps:'{"style":{"width":320,"height":568,"backgroundColor":"#ffffff00","backgroundImage":"http://150.158.30.131:8181/chuliu.jpeg","backgroundPosition":"center","backgroundSize":"cover","backgroundRepeat":"no-repeat","boxSizing":"content-box"},"cmps":[{"desc":"\u56FE\u7247","data":{"type":2,"iconfont":"iconfont icon-image","value":"http://150.158.30.131:8181/tiger.png","style":{"top":355,"left":-15,"width":72,"height":86,"borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#fff","animationName":"jello","animationDelay":0,"animationDuration":1,"animationIterationCount":"infinite"}},"onlyKey":0.284866448554715},{"desc":"\u56FE\u7247","data":{"type":2,"iconfont":"iconfont icon-image","value":"http://150.158.30.131:8181/hua.png","style":{"top":499,"left":155,"width":61,"height":66,"borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#fff"}},"onlyKey":0.04785683542864816}]}'}];function E(r){var t=r.openOrCloseTpl,n=r.globalCanvas,s=function(u){n.updateCanvas(JSON.parse(u)),t(!1)};return(0,e.jsxs)("ul",{className:C().main,children:[(0,e.jsx)("li",{className:C().close,onClick:t,children:(0,e.jsx)("i",{className:"iconfont icon-close"})}),Z.map(function(o){return(0,e.jsxs)("li",{className:C().item,onClick:function(){return s(o.cmps)},children:[(0,e.jsx)("div",{className:C().name,children:o.name}),(0,e.jsx)("div",{className:C().thumbnail,children:(0,e.jsx)("img",{src:o.img,alt:o.name})})]},o.id)})]})}var y=a(29306),D=a.n(y),L=a(71194),A=a(50146),k=a(18106),B=a(67164),G=a(43185),K=a(11324),T=a(83279),te=a(3182),ue=a(22385),U=a(31097),N=a(94043),Q=a.n(N),be=a(62298),ke=a(42768),se=a(57119),ve=a(57663),ce=a(71577),jt=a(73171),bt=function(t){var n=t.file,s=t.onPreview,o=t.onRemove;return(0,e.jsxs)("div",{className:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card",children:[(0,e.jsx)("div",{className:"ant-upload-list-item-info",children:(0,e.jsxs)("span",{className:"ant-upload-span",children:[(0,e.jsx)("a",{className:"ant-upload-list-item-thumbnail",href:n.url,target:"_blank",rel:"noopener noreferrer",children:(0,e.jsx)("img",{src:n.thumbUrl,alt:n.fileName,className:"ant-upload-list-item-image"})}),(0,e.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"ant-upload-list-item-name",title:n.url,href:n.url,children:n.name})]})}),(0,e.jsxs)("span",{className:"ant-upload-list-item-actions",children:[(0,e.jsx)(ce.Z,{title:"\u8BBE\u7F6E\u80CC\u666F",size:"small",onClick:s,type:"text",icon:(0,e.jsx)(ke.Z,{style:{color:"white"},className:"ant-upload-list-item-card-actions-btn"})}),(0,e.jsx)(ce.Z,{title:"\u5220\u9664\u56FE\u7247",size:"small",type:"text",onClick:o,icon:(0,e.jsx)(jt.Z,{style:{color:"white"},className:"ant-upload-list-item-card-actions-btn"})})]})]})},gt=function(t){var n=(0,R.IE)(),s=t.list,o=t.type,u=(0,M.useState)([]),c=(0,X.Z)(u,2),h=c[0],l=c[1];(0,M.useEffect)(function(){l(s.map(function(v){return{uid:v.id,name:v.originalName,status:"done",thumbUrl:v.previewUrl||"/api/public/preview/".concat(v.id,"@thumbnail"),url:v.previewUrl||"/api/public/preview/".concat(v.id)}})||[])},[s]);var p=(0,e.jsx)("div",{children:(0,e.jsx)(U.Z,{title:"\u56FE\u7247\u4E0A\u4F20",children:(0,e.jsx)(be.Z,{style:{minWidth:30}})})}),P=function(){var v=(0,te.Z)(Q().mark(function g(x){var j,F,S,O;return Q().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:j=x.onSuccess,F=x.onError,S=x.file,O=x.onProgress,n.uploadImage(o,S,function(de){O&&O({percent:de.loaded/de.total*100})}).then(function(de){if(de.success&&j&&j(de.data),!de.success&&F){var rt=new Error("Some error");F({event:rt})}});case 2:case"end":return Se.stop()}},g)}));return function(x){return v.apply(this,arguments)}}(),b=function(g){l(g.fileList)};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(K.Z,{listType:"picture-card",accept:".jpg,.jpeg,.png,.gif,.bmp,.wbmp",customRequest:P,multiple:!0,itemRender:function(g,x,j,F){return(0,e.jsx)(bt,{file:x,onPreview:F.preview,onRemove:F.remove})},showUploadList:{showPreviewIcon:!1,downloadIcon:(0,e.jsx)(ke.Z,{}),showDownloadIcon:!0},fileList:h,iconRender:function(g){return(0,e.jsx)("a",{children:g.name})},onPreview:function(g){var x,j=((x=g.response)===null||x===void 0?void 0:x.id)||g.uid},onRemove:function(g){var x=g.uid;return A.Z.confirm({title:"\u786E\u8BA4",icon:(0,e.jsx)(se.Z,{}),content:"\u786E\u5B9A\u8981\u5220\u9664\u5F53\u524D\u56FE\u7247\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){n.deleteImage(x,o).then(function(F){F&&l(function(S){return(0,T.Z)(S.filter(function(O){var ne;return((ne=O.response)===null||ne===void 0?void 0:ne.id)||O.uid!==x}))})})}}),!1},onChange:b,children:p})})},pt=B.Z.TabPane,St=function(t){var n=t.onCancel,s=(0,R.IE)(),o=s.images[6];return(0,M.useEffect)(function(){s.loadFiles(6)},[]),(0,e.jsx)(A.Z,{onCancel:n,visible:!0,footer:!1,closable:!1,bodyStyle:{padding:"2px 5px",height:450,overflowY:"auto"},width:650,children:(0,e.jsxs)(B.Z,{defaultActiveKey:"1",className:"img-box-modal",children:[(0,e.jsx)(pt,{tab:"\u7D20\u6750\u56FE",children:(0,e.jsx)(gt,{type:6,list:o||[]})},"bgi"),(0,e.jsx)(pt,{tab:"\u6A21\u677F",children:(0,e.jsx)(gt,{type:2,list:[]})},"hi")]})})},Zt=(0,Fe.Pi)(St);function Et(){var r=(0,M.useState)(!1),t=(0,X.Z)(r,2),n=t[0],s=t[1],o=re(),u=(0,M.useState)(!1),c=(0,X.Z)(u,2),h=c[0],l=c[1],p=(0,R.IE)(),P=function(){o.goPrevCanvasHistory()},b=function(){o.goNextCanvasHistory()},v=(0,M.useCallback)(function(){s(!n)},[n]),g=function(){o.emptyCanvas()},x=function(){D().toBlob(document.getElementById("canvas"),{bgcolor:"white"}).then(function(F){F.name=p.name;var S=window.URL.createObjectURL(F),O=document.createElement("a");O.href=S,O.setAttribute("download",p.name+".png"),document.body.appendChild(O),O.click(),document.body.removeChild(O)}).catch(function(F){console.log(F)})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("ul",{className:d().main,children:[(0,e.jsxs)("li",{className:d().item,onClick:function(){return l(!0)},children:[(0,e.jsx)("span",{className:"".concat(d().chooseTemplateIcon),children:(0,e.jsx)(_.MT,{infer:"Choose"})}),(0,e.jsx)("span",{className:d().txt,children:"\u7D20\u6750\u7BA1\u7406"})]}),(0,e.jsxs)("li",{className:d().item,onClick:P,children:[(0,e.jsx)("span",{className:ie()(d().lastStep),children:(0,e.jsx)(_.MT,{infer:"Undo"})}),(0,e.jsx)("span",{className:d().txt,children:"\u4E0A\u4E00\u6B65"})]}),(0,e.jsxs)("li",{className:d().item,onClick:b,children:[(0,e.jsx)("span",{className:ie()(d().nextStep),children:(0,e.jsx)(_.MT,{infer:"Redo"})}),(0,e.jsx)("span",{className:d().txt,children:"\u4E0B\u4E00\u6B65"})]}),(0,e.jsxs)("li",{className:d().item,onClick:g,children:[(0,e.jsx)("span",{className:ie()(d().clearCanvasIcon),children:(0,e.jsx)(_.MT,{infer:"Clear"})}),(0,e.jsx)("span",{className:d().txt,children:"\u6E05\u7A7A\u753B\u5E03"})]}),(0,e.jsxs)("li",{className:ie()(d().item),onClick:x,children:[(0,e.jsx)("span",{className:ie()(d().releaseIcon),children:(0,e.jsx)(_.MT,{infer:"Publish"})}),(0,e.jsx)("span",{className:d().txt,children:"\u4E0B\u8F7D\u6D77\u62A5"})]})]}),n&&(0,e.jsx)(E,{openOrCloseTpl:v,globalCanvas:o}),h&&(0,e.jsx)(Zt,{onCancel:function(){return l(!1)}})]})}function Nt(){var r=re(),t=r.getCanvasStyle(),n=r.getCmps(),s=(0,M.useState)(null),o=(0,X.Z)(s,2),u=o[0],c=o[1],h=(0,M.useRef)();(0,M.useEffect)(function(){var b=h.current.getBoundingClientRect();c(b);var v=function(x){["canvas","root","app","content","editCmp"].indexOf(x.target.id)>-1&&r.setSelectedCmp(null)};document.getElementById("root").addEventListener("click",v)},[r]);var l=function(v){v.preventDefault(),v.stopPropagation()},p=function(v){v.preventDefault(),v.stopPropagation()},P=function(v){v.preventDefault(),v.stopPropagation();var g=v.dataTransfer.getData("add-component");if(g){g=JSON.parse(g);var x=v.pageY-u.top-15,j=v.pageX-u.left-40,F=(0,f.Z)((0,f.Z)({},g),{},{data:(0,f.Z)((0,f.Z)({},g.data),{},{style:(0,f.Z)((0,f.Z)({},g.data.style),{},{top:x,left:j})})});r.addCmp(F)}else{var S=v.dataTransfer.getData("startPos");S=JSON.parse(S);var O=v.pageX-S.pageX,ne=v.pageY-S.pageY,Se=r.getSelectedCmp(),de=Se.data.style.top+ne,rt=Se.data.style.left+O;r.updateSelectedCmpStyle({top:de,left:rt})}};return(0,e.jsxs)("div",{id:"content",className:Le().main,children:[(0,e.jsx)(Et,{}),(0,e.jsx)("div",{className:Le().canvas,id:"canvas",style:(0,f.Z)((0,f.Z)({},ee(t)),{},{backgroundImage:"url(".concat(t.backgroundImage,")")}),ref:h,onDragEnter:l,onDragOver:l,onDragLeave:p,onDrop:P,children:h.current&&n.map(function(b,v){return b.data?(0,e.jsx)(Pe,{index:v},b.onlyKey):null})})]})}var Dt=Nt,Ct=a(32059),He=a(73311),Ft=a(80592),le=a.n(Ft);function It(r){var t=r.globalCanvas,n=t.getCanvasStyle(),s=function(u,c){var h=c.name,l=c.value;u&&(u.stopPropagation(),u.preventDefault()),t.updateCanvasStyle((0,Ct.Z)({},h,l))};return(0,e.jsx)("div",{className:le().main,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:le().title,children:[(0,e.jsx)("span",{className:"iconfont icon-shuxing".concat(" ",le().attributeIcon)}),(0,e.jsx)("span",{className:le().attribute,children:"\u753B\u5E03\u5C5E\u6027"})]}),n.width!==void 0&&(0,e.jsx)(Oe,{label:"\u753B\u5E03\u5BBD\u5EA6(px)",children:(0,e.jsx)("input",{className:le().itemRight,type:"number",value:n.width,onChange:function(u){return s(u,{name:"width",value:u.target.value})}})}),n.height!==void 0&&(0,e.jsx)(Oe,{label:"\u753B\u5E03\u9AD8\u5EA6(px)",children:(0,e.jsx)("input",{className:le().itemRight,type:"number",value:n.height,onChange:function(u){return s(u,{name:"height",value:u.target.value})}})}),n.backgroundColor!==void 0&&(0,e.jsx)(Oe,{label:"\u80CC\u666F\u989C\u8272",children:(0,e.jsx)(He.ZP,{className:le().itemRight,initialValue:n.backgroundColor,onChange:function(u){return s(null,{name:"backgroundColor",value:u.hex})},placement:"right"})}),n.backgroundImage!==void 0&&(0,e.jsx)(Oe,{label:"\u80CC\u666F\u56FE\u7247",children:(0,e.jsx)("input",{className:le().itemRight,type:"text",value:n.backgroundImage,onChange:function(u){return s(u,{name:"backgroundImage",value:u.target.value})}})})]})})}function Oe(r){var t=r.label,n=r.children;return(0,e.jsxs)("div",{className:le().item,children:[(0,e.jsx)("label",{children:t}),n]})}var Bt=a(52890),W=a.n(Bt);function Rt(r){var t=r.selectedCmp,n=r.globalCanvas,s=t.data,o=s.style,u=function(l){l.stopPropagation(),l.preventDefault();var p=l.target.value;n.updateSelectedCmpValue(p)},c=function(l,p){var P=p.name,b=p.value;l&&(l.stopPropagation(),l.preventDefault());var v=(0,Ct.Z)({},P,b);P==="animationName"&&(b===""?Object.assign(v,{animationDelay:0,animationDuration:0,animationIterationCount:0}):o.animationName||Object.assign(v,{animationDelay:0,animationDuration:1,animationIterationCount:1})),n.updateSelectedCmpStyle(v)};return(0,e.jsxs)("div",{id:"editCmp",className:W().main,children:[(0,e.jsx)("div",{className:W().title,children:t.desc}),s.value!==void 0&&(0,e.jsx)(z,{label:t.desc==="\u56FE\u7247"?"\u56FE\u7247\u5730\u5740":"\u63CF\u8FF0",children:(0,e.jsx)("input",{className:W().itemRight,type:"text",value:s.value,onChange:function(l){return u(l)}})}),o.fontSize!==void 0&&(0,e.jsx)(z,{label:"\u5B57\u4F53\u5927\u5C0F",children:(0,e.jsx)("input",{className:W().itemRight,type:"number",value:o.fontSize,onChange:function(l){return c(l,{name:"fontSize",value:l.target.value})}})}),["\u6587\u672C","\u6309\u94AE"].indexOf(t.desc)>-1&&(0,e.jsx)(z,{label:"\u5B57\u4F53\u7C97\u7EC6",children:(0,e.jsxs)("select",{className:W().itemRight,value:o.fontWeight,onChange:function(l){c(l,{name:"fontWeight",value:l.target.value})},children:[(0,e.jsx)("option",{value:"normal",children:"normal"}),(0,e.jsx)("option",{value:"bold",children:"bold"}),(0,e.jsx)("option",{value:"lighter",children:"lighter"})]})}),o.lineHeight!==void 0&&(0,e.jsx)(z,{label:"\u884C\u9AD8",children:(0,e.jsx)("input",{className:W().itemRight,type:"number",value:o.lineHeight,onChange:function(l){return c(l,{name:"lineHeight",value:l.target.value})}})}),o.textAlign!==void 0&&(0,e.jsx)(z,{label:"\u5BF9\u9F50",children:(0,e.jsxs)("select",{className:W().itemRight,value:o.textAlign,onChange:function(l){c(l,{name:"textAlign",value:l.target.value})},children:[(0,e.jsx)("option",{value:"left",children:"\u5C45\u5DE6"}),(0,e.jsx)("option",{value:"center",children:"\u5C45\u4E2D"}),(0,e.jsx)("option",{value:"right",children:"\u5C45\u53F3\u8FB9"})]})}),o.borderRadius!==void 0&&(0,e.jsx)(z,{label:"\u5706\u89D2",children:(0,e.jsx)("input",{className:W().itemRight,type:"text",value:o.borderRadius,onChange:function(l){return c(l,{name:"borderRadius",value:l.target.value})}})}),(0,e.jsx)(z,{label:"\u8FB9\u6846\u6837\u5F0F",children:(0,e.jsxs)("select",{className:W().itemRight,value:o.borderStyle,onChange:function(l){c(l,{name:"borderStyle",value:l.target.value})},children:[(0,e.jsx)("option",{value:"none",children:"none"}),(0,e.jsx)("option",{value:"dashed",children:"dashed"}),(0,e.jsx)("option",{value:"dotted",children:"dotted"}),(0,e.jsx)("option",{value:"double",children:"double"}),(0,e.jsx)("option",{value:"groove",children:"groove"}),(0,e.jsx)("option",{value:"hidden",children:"hidden"}),(0,e.jsx)("option",{value:"solid",children:"solid"})]})}),(0,e.jsx)(z,{label:"\u8FB9\u6846\u5BBD\u5EA6",children:(0,e.jsx)("input",{className:W().itemRight,type:"number",value:o.borderWidth,onChange:function(l){return c(l,{name:"borderWidth",value:l.target.value})}})}),(0,e.jsx)(z,{label:"\u8FB9\u6846\u989C\u8272",children:(0,e.jsx)(He.ZP,{className:W().itemRight,initialValue:o.borderColor||"#ffffff00",onChange:function(l){return c(null,{name:"borderColor",value:l.hex})},placement:"right"})}),o.color!==void 0&&(0,e.jsx)(z,{label:"\u5B57\u4F53\u989C\u8272",children:(0,e.jsx)(He.ZP,{className:W().itemRight,initialValue:o.color,onChange:function(l){return c(null,{name:"color",value:l.hex})},placement:"right"})}),o.backgroundColor!==void 0&&(0,e.jsx)(z,{label:"\u80CC\u666F\u989C\u8272",children:(0,e.jsx)(He.ZP,{className:W().itemRight,initialValue:o.backgroundColor,onChange:function(l){return c(null,{name:"backgroundColor",value:l.hex})},placement:"right"})}),(0,e.jsx)(z,{label:"\u52A8\u753B\u540D\u79F0",children:(0,e.jsxs)("select",{className:W().itemRight,value:o.animationName,onChange:function(l){c(l,{name:"animationName",value:l.target.value})},children:[(0,e.jsx)("option",{value:"",children:"\u65E0\u52A8\u753B"}),(0,e.jsx)("option",{value:"toggle",children:"\u95EA\u70C1"}),(0,e.jsx)("option",{value:"jello",children:"\u679C\u51BB"}),(0,e.jsx)("option",{value:"shake",children:"\u6296\u52A8"}),(0,e.jsx)("option",{value:"wobble",children:"\u5DE6\u53F3\u6447\u6446"})]})}),o.animationName&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(z,{label:"\u52A8\u753B\u6301\u7EED\u65F6\u957F(s)",children:(0,e.jsx)("input",{className:W().itemRight,type:"number",value:o.animationDuration,onChange:function(l){return c(l,{name:"animationDuration",value:l.target.value})}})}),(0,e.jsxs)(z,{label:"\u52A8\u753B\u5FAA\u73AF\u6B21\u6570",children:[(0,e.jsx)("button",{className:ie()("iconfont icon-wuqiongda",{selected:o.animationIterationCount==="infinite"}),onClick:function(l){return c(l,{name:"animationIterationCount",value:o.animationIterationCount==="infinite"?1:"infinite"})}}),(0,e.jsx)("input",{className:W().itemRight,type:"number",disabled:o.animationIterationCount!=="infinite",value:o.animationIterationCount,onChange:function(l){return c(l,{name:"animationIterationCount",value:l.target.value})}})]}),(0,e.jsx)(z,{label:"\u52A8\u753B\u5EF6\u8FDF\u65F6\u95F4(s)",children:(0,e.jsx)("input",{className:W().itemRight,type:"number",value:o.animationDelay,onChange:function(l){return c(l,{name:"animationDelay",value:l.target.value})}})}),o.animationIterationCount==="infinite"&&(0,e.jsxs)("button",{className:W().pouseAnimation,onClick:function(l){return c(l,{name:"animationPlayState",value:o.animationPlayState!=="running"?"running":"paused"})},children:[o.animationPlayState!=="running"?"\u6682\u505C":"\u5F00\u59CB","\u52A8\u753B\u6F14\u793A"]})]})]})}function z(r){var t=r.label,n=r.children;return(0,e.jsxs)("div",{className:W().item,children:[(0,e.jsx)("label",{children:t}),n]})}var xt=function(r){(0,je.Z)(n,r);var t=(0,Xe.Z)(n);function n(){var s;(0,$.Z)(this,n);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return s=t.call.apply(t,[this].concat(u)),s.onStoreChange=function(){s.forceUpdate()},s}return(0,he.Z)(n,[{key:"componentDidMount",value:function(){this.unregister=this.context.registerStoreChangeCmps(this)}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"render",value:function(){var o=this.context.getSelectedCmp();return o?(0,e.jsx)(Rt,(0,f.Z)((0,f.Z)({},this.props),{},{selectedCmp:o,globalCanvas:this.context})):(0,e.jsx)(It,{globalCanvas:this.context})}}]),n}(M.Component);xt.contextType=Ze;var wt=function r(){var t=this;(0,$.Z)(this,r),this.cmpsEntity=void 0,this.defaultCanvas=void 0,this.canvas=void 0,this.canvasChangeHistory=void 0,this.canvasIndex=void 0,this.listeners=void 0,this.selectedCmp=void 0,this.storeChangeCmps=void 0,this.getCanvasData=function(){return(0,f.Z)({},t.canvas)},this.goPrevCanvasHistory=function(){var n=t.canvasIndex-1<0?0:t.canvasIndex-1;if(n!==t.canvasIndex&&t.canvasChangeHistory[n]){t.canvasIndex=n;var s=t.canvasChangeHistory[n];t.canvas=s,t.runListeners()}},this.goNextCanvasHistory=function(){var n=t.canvasIndex+1>t.canvasChangeHistory.length-1?t.canvasChangeHistory.length-1:t.canvasIndex+1;if(n!==t.canvasIndex&&t.canvasChangeHistory[n]){t.canvasIndex=n;var s=t.canvasChangeHistory[n];t.canvas=s,t.runListeners()}},this.recordCanvasChangeHistory=function(){t.canvasChangeHistory.push(t.canvas),t.canvasIndex=t.canvasChangeHistory.length-1},this.getCanvasStyle=function(){return(0,f.Z)({},t.canvas.style)},this.updateCanvas=function(n){t.selectedCmp=null,t.canvas=(0,f.Z)({},n),t.runListeners(),t.recordCanvasChangeHistory()},this.emptyCanvas=function(){t.canvas=(0,f.Z)({},t.defaultCanvas),t.runListeners(),t.recordCanvasChangeHistory()},this.updateCanvasStyle=function(n){var s=(0,f.Z)((0,f.Z)({},t.canvas),{},{style:(0,f.Z)((0,f.Z)({},t.getCanvasStyle()),n)});JSON.stringify(s)!==JSON.stringify(t.canvas)&&(t.canvas=s,t.runListeners(),t.recordCanvasChangeHistory())},this.registerStoreChangeCmps=function(n){return t.storeChangeCmps.push(n),function(){t.storeChangeCmps=t.storeChangeCmps.filter(function(s){return n.onlyKey!==s.onlyKey})}},this.registerCmpsEntity=function(n,s){return t.cmpsEntity.set(n,s),function(){return t.cmpsEntity.delete(n)}},this.forceCmpsUpdate=function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];s.forEach(function(u){var c;(c=t.cmpsEntity.get(u.onlyKey))===null||c===void 0||c.onStoreChange()}),t.storeChangeCmps.forEach(function(u){var c=u.onStoreChange;return c()})},this.getCmp=function(n){var s=t.getCmps();return(0,f.Z)({},s[n])},this.getCmps=function(){return(0,T.Z)(t.canvas.cmps)},this.setCmps=function(n){t.canvas=(0,f.Z)((0,f.Z)({},t.canvas),{},{cmps:n})},this.updateCmps=function(n){t.setCmps(n),t.runListeners(),t.recordCanvasChangeHistory()},this.addCmp=function(n){t.selectedCmp=(0,f.Z)((0,f.Z)({},n),{},{onlyKey:ut()});var s=t.getCmps();t.updateCmps([].concat((0,T.Z)(s),[t.selectedCmp]))},this.updateCmp=function(n){for(var s=t.getCmps(),o=0;o<s.length;o++)if(s[o].onlyKey===n.onlyKey){s[o]=n;break}t.setCmps(s),t.forceCmpsUpdate(n)},this.getSelectedCmp=function(){return t.selectedCmp},this.setSelectedCmp=function(n){if(t.selectedCmp!==n){var s=[];t.selectedCmp&&s.push(t.selectedCmp),t.selectedCmp=n,t.selectedCmp&&s.push(t.selectedCmp),t.forceCmpsUpdate.apply(t,s)}},this.updateSelectedCmpStyle=function(n,s){var o=t.getSelectedCmp(),u=(0,f.Z)((0,f.Z)({},o),{},{data:(0,f.Z)((0,f.Z)({},o.data),{},{style:(0,f.Z)((0,f.Z)({},o.data.style),n)})});JSON.stringify(u)!==JSON.stringify(t.selectedCmp)&&(t.selectedCmp=u,t.updateCmp(u),s||t.recordCanvasChangeHistory())},this.updateSelectedCmpValue=function(n){var s=t.getSelectedCmp(),o=(0,f.Z)((0,f.Z)({},s),{},{data:(0,f.Z)((0,f.Z)({},s.data),{},{value:n})});t.selectedCmp=o,t.updateCmp(o),t.recordCanvasChangeHistory()},this.deleteSelectedCmp=function(n){t.setSelectedCmp(null);var s=t.getCmps();t.updateCmps(s.filter(function(o){return o.onlyKey!==n.onlyKey}))},this.changeCmpIndex=function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getCmps().length-1;if(n!==s){var o=t.getCmps(),u=o[n];o[n]=o[s],o[s]=u,t.updateCmps(o)}},this.runListeners=function(){t.listeners.forEach(function(n){return n()})},this.subscribe=function(n){return t.listeners.push(n),function(){t.listeners=t.listeners.filter(function(s){return s!==n})}},this.getCanvas=function(){var n=["getCanvasData","recordCanvasChangeHistory","goPrevCanvasHistory","goNextCanvasHistory","updateCanvas","emptyCanvas","getCanvasStyle","updateCanvasStyle","registerStoreChangeCmps","registerCmpsEntity","getCmp","getCmps","setCmps","addCmp","getSelectedCmp","setSelectedCmp","updateSelectedCmpStyle","updateSelectedCmpValue","deleteSelectedCmp","changeCmpIndex","subscribe"],s={};return n.forEach(function(o){s[o]=t[o]}),s},this.cmpsEntity=new Map,this.defaultCanvas={style:{width:320,height:568,backgroundColor:"#ffffff00",backgroundImage:"",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",boxSizing:"content-box"},cmps:[]},this.canvas=(0,f.Z)({},this.defaultCanvas),this.canvasChangeHistory=[],this.canvasIndex=-1,this.listeners=[],this.selectedCmp=null,this.storeChangeCmps=[]};function At(r){var t=(0,M.useRef)();if(!t.current)if(r)t.current=r;else{var n=new wt;t.current=n.getCanvas()}return t.current}function Pt(){var r=q(),t=(0,R.IE)(),n=At();return(0,M.useEffect)(function(){t.loadFiles(i.__.PosterImage)},[]),(0,M.useLayoutEffect)(function(){var s=n.subscribe(function(){r()});return function(){s()}},[n,r]),(0,e.jsx)("div",{className:"survey-poster",children:(0,e.jsxs)(Ze.Provider,{value:n,children:[(0,e.jsx)(ze,{}),(0,e.jsx)(Dt,{}),(0,e.jsx)(xt,{})]})})}},23804:function(I,De,a){"use strict";a.d(De,{KL:function(){return Ve},M6:function(){return dt},yX:function(){return ot},kJ:function(){return Le},rs:function(){return J},q1:function(){return Pe},qo:function(){return Ne},Jg:function(){return Ae}});var M=a(63185),X=a(80937),R=a(67294),i=a(85893),Fe=function(d){var m=d.children,C=_objectWithoutProperties(d,["children"]),Z=function(y){return _jsx(_Checkbox,{checked:y.value,onChange:function(L){y.onChange(L.target.checked)},children:m})};return _jsx(Field,_objectSpread({component:[Z]},C))},f=a(47673),Ze=function(d){var m=d.children,C=d.style,Z=_objectWithoutProperties(d,["children","style"]),E=function(D){return _jsx(_Input,{value:D.value,style:C,onChange:function(A){D.onChange(A.target.value)},children:m})};return _jsx(Field,_objectSpread({component:[E]},Z))},w=a(11849),ut=a(71194),ee=a(50146),ct=a(57663),V=a(71577),Te=a(77576),fe=a(12028),yt=a(22385),ge=a(31097),q=a(94657),re=a(63439),me=a(84387),Qe=a(54531),e=a(11628),Ie=function(d){var m=d.value,C=d.onChange,Z=(0,R.useState)(!1),E=(0,q.Z)(Z,2),y=E[0],D=E[1],L=(0,e.IE)(),A=(0,R.useRef)(null);return(0,R.useEffect)(function(){console.log(m),m||D(!1)},[m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"setting-item",children:[(0,i.jsxs)("div",{className:"setting-item-switch",children:[(0,i.jsxs)("span",{children:["\u8BBE\u7F6E\u95EE\u5377\u9ED8\u8BA4\u7B54\u6848",(0,i.jsx)(ge.Z,{overlay:"\u8BBE\u7F6E\u7684\u7B54\u6848\u5C06\u4F5C\u4E3A\u9ED8\u8BA4\u7B54\u6848\u5E26\u5165\u95EE\u5377",children:(0,i.jsx)(me.Z,{className:"setting-prompt"})})]}),(0,i.jsx)(fe.Z,{checked:!!m,onChange:function(B){B?D(!0):C(void 0)}})]}),(y||!!m)&&(0,i.jsx)("div",{className:"setting-item-content",children:(0,i.jsx)(V.Z,{onClick:function(){return D(!0)},style:{marginLeft:10},type:"dashed",children:m?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),y&&(0,i.jsx)(ee.Z,{visible:!0,onCancel:function(){return D(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){var B;C((0,Qe.ZN)((B=A.current)===null||B===void 0?void 0:B.getValues())),D(!1)},children:L.schema?(0,i.jsx)(re.Z,{ref:A,initialValues:m,schema:L.schema,footerVisible:!1}):"\u95EE\u5377\u4E3A\u7A7A"})]})},dt=function(d){return(0,i.jsx)(X.gN,(0,w.Z)({component:[Ie]},d))},We=a(74118),Ue=function(d){var m=d.value,C=d.onChange,Z=(0,R.useState)(!1),E=(0,q.Z)(Z,2),y=E[0],D=E[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"setting-item",children:[(0,i.jsxs)("div",{className:"setting-item-switch",children:[(0,i.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u9875\u9762",(0,i.jsx)(ge.Z,{overlay:"\u4F60\u53EF\u4EE5\u5728\u8868\u5355\u63D0\u4EA4\u9875\u9762\u8BBE\u7F6E\u66F4\u4E3A\u4E30\u5BCC\u591A\u5F69\u7684\u5185\u5BB9\uFF0C\u5305\u62EC\u63D2\u5165\u56FE\u7247\u3001\u8BBE\u7F6E\u5B57\u53F7\u3001\u5B57\u4F53\u989C\u8272\u3001\u5E8F\u53F7\u3001\u8BBE\u7F6E\u8D85\u94FE\u63A5\u7B49\u7B49\u3002",children:(0,i.jsx)(me.Z,{className:"setting-prompt"})})]}),(0,i.jsx)(fe.Z,{checked:!!m,onChange:function(A){A?D(!0):C(void 0)}})]}),(y||!!m)&&(0,i.jsx)("div",{className:"setting-item-content",children:(0,i.jsx)(V.Z,{onClick:function(){return D(!0)},style:{marginLeft:10},type:"dashed",children:m?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),y&&(0,i.jsx)(We.cM,{value:m,title:"\u63D0\u4EA4\u540E\u56FE\u6587\u5C55\u793A",width:750,onChange:function(A){C(A),D(!1)},onClose:function(){D(!1)}})]})},Ve=function(d){return(0,i.jsx)(X.gN,(0,w.Z)({component:[Ue]},d))},J=function(d){var m=function(Z){return(0,i.jsx)(fe.Z,{checked:Z.value,onChange:function(y){Z.onChange(y)}})};return(0,i.jsx)(X.gN,(0,w.Z)({component:[m]},d))},Ee=a(93224),mt=a(77883),Be=a(85482),ht=a(43358),Ke=a(97268),ae=function(d){var m=d.value,C=d.onChange,Z=d.title,E=d.tooltip,y=(0,R.useState)(!!m),D=(0,q.Z)(y,2),L=D[0],A=D[1];return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"setting-item",children:[(0,i.jsxs)("div",{className:"setting-item-switch",children:[(0,i.jsxs)("span",{children:[Z,(0,i.jsx)(ge.Z,{overlay:E,children:(0,i.jsx)(me.Z,{className:"setting-prompt"})})]}),(0,i.jsx)(fe.Z,{checked:!!m,onChange:function(B){B?(A(!0),C({limitFreq:"only",limitNum:1})):(A(!1),C(void 0))}})]}),L&&(0,i.jsx)("div",{className:"setting-item-content",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(Ke.Z,{style:{width:100},value:m==null?void 0:m.limitFreq,onChange:function(B){return C({limitFreq:B,limitNum:(m==null?void 0:m.limitNum)||1})},options:[{label:"\u53EA\u80FD",value:"only"},{label:"\u6BCF\u5C0F\u65F6",value:"hour"},{label:"\u6BCF\u5929",value:"day"},{label:"\u6BCF\u81EA\u7136\u5468",value:"week"},{label:"\u6BCF\u81EA\u7136\u6708",value:"month"},{label:"\u6BCF\u5B63\u5EA6",value:"quarter"},{label:"\u6BCF\u81EA\u7136\u5E74",value:"year"}]}),(0,i.jsx)("span",{style:{margin:"0 10px"},children:"\u7B54\u9898"}),(0,i.jsx)(Be.Z,{min:1,max:9999,defaultValue:1,value:m==null?void 0:m.limitNum,onChange:function(B){return C({limitNum:B,limitFreq:(m==null?void 0:m.limitFreq)||"only"})}}),(0,i.jsx)("span",{style:{margin:"0 10px"},children:"\u6B21"})]})})]})})},Ne=function(d){var m=d.name,C=d.basePath,Z=(0,Ee.Z)(d,["name","basePath"]);return(0,i.jsx)(X.gN,{component:[ae,Z],name:m,basePath:C})},Re=function(){var d=function(C){var Z=C.value,E=C.onChange;return Z===1?_jsx(_Button,{type:"primary",icon:_jsx(CaretRightOutlined,{}),onClick:function(){return E(0)},children:"\u6B63\u5728\u56DE\u6536"}):_jsx(_Button,{type:"primary",danger:!0,icon:_jsx(PauseOutlined,{}),onClick:function(){return E(1)},children:"\u6682\u505C\u56DE\u6536"})};return _jsx(Field,{name:"status",component:[d],basePath:""})},pe=a(59250),Ce=a(13013),vt=a(30887),_=a(54689),xe=a(3182),ye=a(4107),ze=a(94043),$=a.n(ze),he=a(92592),je=a(83279),Xe=a(20136),Ye=a(55241),oe=a(49111),we=a(19650),Je=a(54977),$e=a(23538),Ge=a(73171),qe=a(71211),_e=ye.Z.Search;function et(H){return"".concat(window.location.origin,"/s/").concat(H)}var tt=function(d){var m=d.item,C=d.onChange,Z=d.onDelete,E=(0,e.IE)(),y=m.url,D=(0,R.useState)(""),L=(0,q.Z)(D,2),A=L[0],k=L[1],B=(0,R.useRef)(null),G=(0,e.IE)(),K=(0,R.useState)(!1),T=(0,q.Z)(K,2),te=T[0],ue=T[1];(0,R.useEffect)(function(){function N(){return Q.apply(this,arguments)}function Q(){return Q=(0,xe.Z)($().mark(function be(){return $().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:he.toDataURL(y,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(ve){k(ve)}).catch(function(ve){console.error(ve)});case 1:case"end":return se.stop()}},be)})),Q.apply(this,arguments)}N()},[y]);var U=(0,R.useCallback)(function(){var N=(0,xe.Z)($().mark(function Q(be){return $().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:he.toDataURL(y,{errorCorrectionLevel:"H",margin:5,width:be}).then(function(ve){k(ve);var ce=document.createElement("a");ce.href=ve,ce.setAttribute("download","".concat(E.name,"_").concat(be,".png")),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)});case 1:case"end":return se.stop()}},Q)}));return function(Q){return N.apply(this,arguments)}}(),[y,E]);return(0,i.jsxs)("div",{style:{border:"1px solid #d9d9d9",margin:"5px 0",padding:"8px 4px"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(ye.Z,{value:m.name,style:{width:200},placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",onChange:function(Q){return C((0,w.Z)((0,w.Z)({},m),{},{name:Q.target.value}))}}),(0,i.jsxs)(we.Z,{children:[(0,i.jsx)(V.Z,{icon:(0,i.jsx)(Je.Z,{}),onClick:function(){return ue(!0)}}),(0,i.jsx)(Ye.Z,{content:(0,i.jsxs)("div",{children:[(0,i.jsx)("img",{src:A,height:150,width:150}),(0,i.jsx)("div",{style:{textAlign:"center"},children:(0,i.jsxs)(we.Z,{children:[(0,i.jsx)(V.Z,{size:"small",type:"link",onClick:function(){return U(256)},children:"\u5C0F\u53F7"}),(0,i.jsx)(V.Z,{size:"small",type:"link",onClick:function(){return U(512)},children:"\u4E2D\u53F7"}),(0,i.jsx)(V.Z,{size:"small",type:"link",onClick:function(){return U(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(E.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click"],children:(0,i.jsx)(V.Z,{icon:(0,i.jsx)($e.Z,{})})}),(0,i.jsx)(V.Z,{icon:(0,i.jsx)(Ge.Z,{}),onClick:function(){return Z(m.id)}})]})]}),(0,i.jsx)(_e,{value:y,style:{margin:"5px 0 0 0"},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(E.id,"?id=").concat(m.id))}}),(0,i.jsx)(ee.Z,{visible:te,onCancel:function(){return ue(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){ue(!1)},children:G.schema&&(0,i.jsx)(re.Z,{ref:B,initialValues:m.value,schema:G.schema,footerVisible:!1,onSubmit:function(Q){console.log(Q)}})})]})},nt=function(d){var m=d.visible,C=d.onClose,Z=(0,R.useState)([]),E=(0,q.Z)(Z,2),y=E[0],D=E[1],L=(0,e.IE)();return(0,i.jsxs)(ee.Z,{visible:m,onCancel:C,title:"\u5E26\u503C\u94FE\u63A5\u8BBE\u7F6E",maskClosable:!1,bodyStyle:{maxHeight:360,overflow:"auto"},children:[y.map(function(A){return(0,i.jsx)(tt,{item:A,onChange:function(B){var G=y.findIndex(function(K){return K.id===B.id});y.splice(G,1,B),D((0,je.Z)(y))},onDelete:function(B){D((0,je.Z)(y.filter(function(G){return G.id!==B})))}},A.id)}),(0,i.jsx)(V.Z,{block:!0,type:"primary",ghost:!0,onClick:function(){var k=(0,qe.Ox)();y.push({id:k,url:"".concat(et(L.id),"?id=").concat(k)}),D((0,je.Z)(y))},children:"\u6DFB\u52A0"})]})},at=ye.Z.Search;function Ae(H){return"".concat(window.location.origin,"/s/").concat(H)}var ot=function(){var d=(0,e.IE)(),m=Ae(d.id),C=(0,R.useState)(""),Z=(0,q.Z)(C,2),E=Z[0],y=Z[1],D=(0,R.useState)(!1),L=(0,q.Z)(D,2),A=L[0],k=L[1];(0,R.useEffect)(function(){function K(){return T.apply(this,arguments)}function T(){return T=(0,xe.Z)($().mark(function te(){return $().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:he.toDataURL(m,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(N){y(N)}).catch(function(N){console.error(N)});case 1:case"end":return U.stop()}},te)})),T.apply(this,arguments)}K()},[m]);var B=(0,R.useCallback)(function(){var K=(0,xe.Z)($().mark(function T(te){return $().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:he.toDataURL(m,{errorCorrectionLevel:"H",margin:5,width:te}).then(function(N){y(N);var Q=document.createElement("a");Q.href=N,Q.setAttribute("download","".concat(d.name,"_").concat(te,".png")),document.body.appendChild(Q),Q.click(),document.body.removeChild(Q)});case 1:case"end":return U.stop()}},T)}));return function(T){return K.apply(this,arguments)}}(),[m,d]),G=(0,i.jsxs)(_.Z,{onClick:function(T){return B(parseInt(T.key))},children:[(0,i.jsx)(_.Z.Item,{children:"\u5C0F\u53F7"},256),(0,i.jsx)(_.Z.Item,{children:"\u4E2D\u53F7"},512),(0,i.jsx)(_.Z.Item,{children:"\u5927\u53F7"},1024)]});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"setting-item-switch",children:[(0,i.jsx)("span",{children:"\u95EE\u5377\u94FE\u63A5"}),(0,i.jsx)(at,{value:m,style:{width:300},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(d.id))}})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:10},children:[(0,i.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:100,height:100},children:(0,i.jsx)("img",{src:E,height:95,width:95})}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(Ce.Z,{overlay:G,placement:"bottomLeft",children:(0,i.jsx)(V.Z,{children:"\u4E0B\u8F7D\u4E8C\u7EF4\u7801"})}),(0,i.jsxs)(V.Z,{type:"primary",ghost:!0,style:{marginTop:10,visibility:"hidden"},onClick:function(){return k(!0)},children:["\u5E26\u503C\u94FE\u63A5",(0,i.jsx)(ge.Z,{overlay:"\u94FE\u63A5\u6DFB\u52A0\u53C2\u6570\uFF0C\u5C06\u81EA\u52A8\u5E94\u7528\u4E3A\u95EE\u5377\u7684\u7B54\u6848\u3002",children:(0,i.jsx)(me.Z,{className:"setting-prompt",style:{color:"#1891ff"}})})]})]}),(0,i.jsx)(nt,{visible:A,onClose:function(){return k(!1)}})]})]})},ft=a(14965),it=a(77121),ie=a(30381),st=a.n(ie),Y=function(d){var m=d.value,C=d.onChange,Z=d.title,E=d.tooltip,y=d.type,D=y===void 0?"text":y,L=d.prefix,A=d.suffix,k=d.style,B=(0,R.useState)(m!==void 0),G=(0,q.Z)(B,2),K=G[0],T=G[1];(0,R.useEffect)(function(){m!==void 0&&T(!0)},[m]);var te=function(){return D==="datepicker"?(0,i.jsx)(it.Z,{value:m?st()(m):void 0,showTime:!0,style:k,onChange:function(N){C(N?N==null?void 0:N.valueOf():void 0)}}):D==="number"?(0,i.jsx)(Be.Z,{value:m,onChange:function(N){return C(N)},style:(0,w.Z)({width:200},k)}):(0,i.jsx)(ye.Z,{value:m,onChange:function(N){return C(N.target.value)},style:(0,w.Z)({width:200},k)})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"setting-item",children:[(0,i.jsxs)("div",{className:"setting-item-switch",children:[(0,i.jsxs)("span",{children:[Z,(0,i.jsx)(ge.Z,{overlay:E,children:(0,i.jsx)(me.Z,{className:"setting-prompt"})})]}),(0,i.jsx)(fe.Z,{checked:m!==void 0,onChange:function(U){U?(T(!0),C("")):(T(!1),C(void 0))}})]}),K&&(0,i.jsxs)("div",{className:"setting-item-content",children:[L,te(),A]})]})})},Pe=function(d){var m=d.name,C=d.basePath,Z=(0,Ee.Z)(d,["name","basePath"]);return(0,i.jsx)(X.gN,{component:[Y,Z],name:m,basePath:C})},Me=a(25782),lt=a(69816),Le=function(){var d=function(C){var Z=C.value,E=C.onChange;return Z===1?(0,i.jsx)(V.Z,{type:"primary",icon:(0,i.jsx)(Me.Z,{}),onClick:function(){return E(0)},children:"\u6B63\u5728\u56DE\u6536"}):(0,i.jsx)(V.Z,{type:"primary",danger:!0,icon:(0,i.jsx)(lt.Z,{}),onClick:function(){return E(1)},children:"\u6682\u505C\u56DE\u6536"})};return(0,i.jsx)(X.gN,{component:[d],name:"status",basePath:""})}},73420:function(I){I.exports={main:"main___21rJo"}},69851:function(I){I.exports={main:"main___135N1"}},68009:function(I){I.exports={main:"main___3fcDw"}},29011:function(I){I.exports={main:"main___3PlGX"}},11292:function(I){I.exports={main:"main___lXNcV"}},46133:function(I){I.exports={main:"main___UJX15",cmp:"cmp___2nkeC",cmpIcon:"cmpIcon___3_Wuh",cmpText:"cmpText___1uVZ6",close:"close___33Xtp",cmpTop:"cmpTop___15tlX",cmpList:"cmpList___2VkX2",detailList:"detailList___1CfRb"}},53384:function(I){I.exports={main:"main___2krr5",canvas:"canvas___-PTQi"}},97226:function(I){I.exports={main:"main___1pYX9",item:"item___1uSX4",desc:"desc___3xA87",thumbnail:"thumbnail___2-pjw"}},97427:function(I){I.exports={main:"main___2SoBw",unselected:"unselected___tqp--",stretch:"stretch___1n1Eg",rotate:"rotate___2a-x0",stretchDot:"stretchDot___25Yua"}},80592:function(I){I.exports={main:"main___349pA",attribute:"attribute___2xEX9",attributeIcon:"attributeIcon___3Nfw1",empty:"empty___jtunA",title:"title___umNfY",item:"item___3vdZZ",itemRight:"itemRight___177Zc"}},52890:function(I){I.exports={main:"main___G6HSt",empty:"empty___1A4Dv",title:"title___2ZOkC",item:"item___2dUEY",itemRight:"itemRight___2ThVu",pouseAnimation:"pouseAnimation___11Ht1"}},85939:function(I){I.exports={main:"main___3iBmI",close:"close___3MO16",item:"item___3OeSn",name:"name___2bVyY",thumbnail:"thumbnail___2vV0l"}},10781:function(I){I.exports={main:"main___2BWdq",item:"item___4osz2",release:"release___2RQrA",txt:"txt___IF_aZ"}}}]);
