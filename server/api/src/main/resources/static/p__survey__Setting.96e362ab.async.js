(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1117],{24025:function(ze,re,n){"use strict";n.d(re,{KL:function(){return ce},M6:function(){return Te},yX:function(){return fe},kJ:function(){return je},cg:function(){return Ve},rs:function(){return $e},q1:function(){return Oe},qo:function(){return ye},Jg:function(){return me}});var Xe=n(63185),I=n(80937),B=n(67294),t=n(85893),Ye=function(i){var u=i.children,l=_objectWithoutProperties(i,["children"]),f=function(s){return _jsx(_Checkbox,{checked:s.value,onChange:function(o){s.onChange(o.target.checked)},children:u})};return _jsx(Field,_objectSpread({component:[f]},l))},le=n(47673),V=function(i){var u=i.children,l=i.style,f=_objectWithoutProperties(i,["children","style"]),x=function(a){return _jsx(_Input,{value:a.value,style:l,onChange:function(v){a.onChange(v.target.value)},children:u})};return _jsx(Field,_objectSpread({component:[x]},f))},Z=n(11849),A=n(71194),k=n(50146),Ce=n(57663),P=n(71577),_=n(77576),K=n(12028),Q=n(22385),H=n(31097),N=n(94657),p=n(63439),e=n(84387),Ee=n(54531),z=n(11628),ee=function(i){var u=i.value,l=i.onChange,f=(0,B.useState)(!1),x=(0,N.Z)(f,2),s=x[0],a=x[1],o=(0,z.IE)(),v=(0,B.useRef)(null);return(0,B.useEffect)(function(){console.log(u),u||a(!1)},[u]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"setting-item",children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsxs)("span",{children:["\u8BBE\u7F6E\u95EE\u5377\u9ED8\u8BA4\u7B54\u6848",(0,t.jsx)(H.Z,{overlay:"\u8BBE\u7F6E\u7684\u7B54\u6848\u5C06\u4F5C\u4E3A\u9ED8\u8BA4\u7B54\u6848\u5E26\u5165\u95EE\u5377",children:(0,t.jsx)(e.Z,{className:"setting-prompt"})})]}),(0,t.jsx)(K.Z,{checked:!!u,onChange:function(c){c?a(!0):l(void 0)}})]}),(s||!!u)&&(0,t.jsx)("div",{className:"setting-item-content",children:(0,t.jsx)(P.Z,{onClick:function(){return a(!0)},style:{marginLeft:10},type:"dashed",children:u?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),s&&(0,t.jsx)(k.Z,{visible:!0,onCancel:function(){return a(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){var c;l((0,Ee.ZN)((c=v.current)===null||c===void 0?void 0:c.getValues())),a(!1)},children:o.schema?(0,t.jsx)(p.Z,{ref:v,initialValues:u,schema:o.schema,footerVisible:!1}):"\u95EE\u5377\u4E3A\u7A7A"})]})},Te=function(i){return(0,t.jsx)(I.gN,(0,Z.Z)({component:[ee]},i))},oe=n(74118),we=function(i){var u=i.value,l=i.onChange,f=(0,B.useState)(!1),x=(0,N.Z)(f,2),s=x[0],a=x[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"setting-item",children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u9875\u9762",(0,t.jsx)(H.Z,{overlay:"\u4F60\u53EF\u4EE5\u5728\u8868\u5355\u63D0\u4EA4\u9875\u9762\u8BBE\u7F6E\u66F4\u4E3A\u4E30\u5BCC\u591A\u5F69\u7684\u5185\u5BB9\uFF0C\u5305\u62EC\u63D2\u5165\u56FE\u7247\u3001\u8BBE\u7F6E\u5B57\u53F7\u3001\u5B57\u4F53\u989C\u8272\u3001\u5E8F\u53F7\u3001\u8BBE\u7F6E\u8D85\u94FE\u63A5\u7B49\u7B49\u3002",children:(0,t.jsx)(e.Z,{className:"setting-prompt"})})]}),(0,t.jsx)(K.Z,{checked:!!u,onChange:function(v){v?a(!0):l(void 0)}})]}),(s||!!u)&&(0,t.jsx)("div",{className:"setting-item-content",children:(0,t.jsx)(P.Z,{onClick:function(){return a(!0)},style:{marginLeft:10},type:"dashed",children:u?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),s&&(0,t.jsx)(oe.cM,{value:u,title:"\u63D0\u4EA4\u540E\u56FE\u6587\u5C55\u793A",width:750,onChange:function(v){l(v),a(!1)},onClose:function(){a(!1)}})]})},ce=function(i){return(0,t.jsx)(I.gN,(0,Z.Z)({component:[we]},i))},$e=function(i){var u=function(f){return(0,t.jsx)(K.Z,{checked:f.value,onChange:function(s){f.onChange(s)}})};return(0,t.jsx)(I.gN,(0,Z.Z)({component:[u]},i))},Y=n(93224),Je=n(77883),J=n(85482),Ge=n(43358),de=n(97268),He=function(i){var u=i.value,l=i.onChange,f=i.title,x=i.tooltip,s=(0,B.useState)(!!u),a=(0,N.Z)(s,2),o=a[0],v=a[1];return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"setting-item",children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsxs)("span",{children:[f,(0,t.jsx)(H.Z,{overlay:x,children:(0,t.jsx)(e.Z,{className:"setting-prompt"})})]}),(0,t.jsx)(K.Z,{checked:!!u,onChange:function(c){c?(v(!0),l({limitFreq:"only",limitNum:1})):(v(!1),l(void 0))}})]}),o&&(0,t.jsx)("div",{className:"setting-item-content",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(de.Z,{style:{width:100},value:u==null?void 0:u.limitFreq,onChange:function(c){return l({limitFreq:c,limitNum:(u==null?void 0:u.limitNum)||1})},options:[{label:"\u53EA\u80FD",value:"only"},{label:"\u6BCF\u5C0F\u65F6",value:"hour"},{label:"\u6BCF\u5929",value:"day"},{label:"\u6BCF\u81EA\u7136\u5468",value:"week"},{label:"\u6BCF\u81EA\u7136\u6708",value:"month"},{label:"\u6BCF\u5B63\u5EA6",value:"quarter"},{label:"\u6BCF\u81EA\u7136\u5E74",value:"year"}]}),(0,t.jsx)("span",{style:{margin:"0 10px"},children:"\u7B54\u9898"}),(0,t.jsx)(J.Z,{min:1,max:9999,defaultValue:1,value:u==null?void 0:u.limitNum,onChange:function(c){return l({limitNum:c,limitFreq:(u==null?void 0:u.limitFreq)||"only"})}}),(0,t.jsx)("span",{style:{margin:"0 10px"},children:"\u6B21"})]})})]})})},ye=function(i){var u=i.name,l=i.basePath,f=(0,Y.Z)(i,["name","basePath"]);return(0,t.jsx)(I.gN,{component:[He,f],name:u,basePath:l})},qe=function(){var i=function(l){var f=l.value,x=l.onChange;return f===1?_jsx(_Button,{type:"primary",icon:_jsx(CaretRightOutlined,{}),onClick:function(){return x(0)},children:"\u6B63\u5728\u56DE\u6536"}):_jsx(_Button,{type:"primary",danger:!0,icon:_jsx(PauseOutlined,{}),onClick:function(){return x(1)},children:"\u6682\u505C\u56DE\u6536"})};return _jsx(Field,{name:"status",component:[i],basePath:""})},Fe=n(59250),te=n(13013),_e=n(30887),b=n(54689),ne=n(3182),X=n(4107),M=n(94043),T=n.n(M),G=n(92592),ue=n(83279),Me=n(20136),Ze=n(55241),ve=n(49111),se=n(19650),Se=n(54977),pe=n(23538),Be=n(73171),ie=n(71211),Ae=X.Z.Search;function De(y){return"".concat(window.location.origin,"/s/").concat(y)}var Ne=function(i){var u=i.item,l=i.onChange,f=i.onDelete,x=(0,z.IE)(),s=u.url,a=(0,B.useState)(""),o=(0,N.Z)(a,2),v=o[0],r=o[1],c=(0,B.useRef)(null),C=(0,z.IE)(),g=(0,B.useState)(!1),j=(0,N.Z)(g,2),F=j[0],S=j[1];(0,B.useEffect)(function(){function d(){return m.apply(this,arguments)}function m(){return m=(0,ne.Z)(T().mark(function w(){return T().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:G.toDataURL(s,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(L){r(L)}).catch(function(L){console.error(L)});case 1:case"end":return O.stop()}},w)})),m.apply(this,arguments)}d()},[s]);var E=(0,B.useCallback)(function(){var d=(0,ne.Z)(T().mark(function m(w){return T().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:G.toDataURL(s,{errorCorrectionLevel:"H",margin:5,width:w}).then(function(L){r(L);var $=document.createElement("a");$.href=L,$.setAttribute("download","".concat(x.name,"_").concat(w,".png")),document.body.appendChild($),$.click(),document.body.removeChild($)});case 1:case"end":return O.stop()}},m)}));return function(m){return d.apply(this,arguments)}}(),[s,x]);return(0,t.jsxs)("div",{style:{border:"1px solid #d9d9d9",margin:"5px 0",padding:"8px 4px"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)(X.Z,{value:u.name,style:{width:200},placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",onChange:function(m){return l((0,Z.Z)((0,Z.Z)({},u),{},{name:m.target.value}))}}),(0,t.jsxs)(se.Z,{children:[(0,t.jsx)(P.Z,{icon:(0,t.jsx)(Se.Z,{}),onClick:function(){return S(!0)}}),(0,t.jsx)(Ze.Z,{content:(0,t.jsxs)("div",{children:[(0,t.jsx)("img",{src:v,height:150,width:150}),(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsxs)(se.Z,{children:[(0,t.jsx)(P.Z,{size:"small",type:"link",onClick:function(){return E(256)},children:"\u5C0F\u53F7"}),(0,t.jsx)(P.Z,{size:"small",type:"link",onClick:function(){return E(512)},children:"\u4E2D\u53F7"}),(0,t.jsx)(P.Z,{size:"small",type:"link",onClick:function(){return E(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(x.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click"],children:(0,t.jsx)(P.Z,{icon:(0,t.jsx)(pe.Z,{})})}),(0,t.jsx)(P.Z,{icon:(0,t.jsx)(Be.Z,{}),onClick:function(){return f(u.id)}})]})]}),(0,t.jsx)(Ae,{value:s,style:{margin:"5px 0 0 0"},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(x.id,"?id=").concat(u.id))}}),(0,t.jsx)(k.Z,{visible:F,onCancel:function(){return S(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){S(!1)},children:C.schema&&(0,t.jsx)(p.Z,{ref:c,initialValues:u.value,schema:C.schema,footerVisible:!1,onSubmit:function(m){console.log(m)}})})]})},Pe=function(i){var u=i.visible,l=i.onClose,f=(0,B.useState)([]),x=(0,N.Z)(f,2),s=x[0],a=x[1],o=(0,z.IE)();return(0,t.jsxs)(k.Z,{visible:u,onCancel:l,title:"\u5E26\u503C\u94FE\u63A5\u8BBE\u7F6E",maskClosable:!1,bodyStyle:{maxHeight:360,overflow:"auto"},children:[s.map(function(v){return(0,t.jsx)(Ne,{item:v,onChange:function(c){var C=s.findIndex(function(g){return g.id===c.id});s.splice(C,1,c),a((0,ue.Z)(s))},onDelete:function(c){a((0,ue.Z)(s.filter(function(C){return C.id!==c})))}},v.id)}),(0,t.jsx)(P.Z,{block:!0,type:"primary",ghost:!0,onClick:function(){var r=(0,ie.Ox)();s.push({id:r,url:"".concat(De(o.id),"?id=").concat(r)}),a((0,ue.Z)(s))},children:"\u6DFB\u52A0"})]})},he=X.Z.Search;function me(y){return"".concat(window.location.origin,"/s/").concat(y)}var fe=function(){var i=(0,z.IE)(),u=me(i.id),l=(0,B.useState)(""),f=(0,N.Z)(l,2),x=f[0],s=f[1],a=(0,B.useState)(!1),o=(0,N.Z)(a,2),v=o[0],r=o[1];(0,B.useEffect)(function(){function g(){return j.apply(this,arguments)}function j(){return j=(0,ne.Z)(T().mark(function F(){return T().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:G.toDataURL(u,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(d){s(d)}).catch(function(d){console.error(d)});case 1:case"end":return E.stop()}},F)})),j.apply(this,arguments)}g()},[u]);var c=(0,B.useCallback)(function(){var g=(0,ne.Z)(T().mark(function j(F){return T().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:G.toDataURL(u,{errorCorrectionLevel:"H",margin:5,width:F}).then(function(d){s(d);var m=document.createElement("a");m.href=d,m.setAttribute("download","".concat(i.name,"_").concat(F,".png")),document.body.appendChild(m),m.click(),document.body.removeChild(m)});case 1:case"end":return E.stop()}},j)}));return function(j){return g.apply(this,arguments)}}(),[u,i]),C=(0,t.jsxs)(b.Z,{onClick:function(j){return c(parseInt(j.key))},children:[(0,t.jsx)(b.Z.Item,{children:"\u5C0F\u53F7"},256),(0,t.jsx)(b.Z.Item,{children:"\u4E2D\u53F7"},512),(0,t.jsx)(b.Z.Item,{children:"\u5927\u53F7"},1024)]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsx)("span",{children:"\u95EE\u5377\u94FE\u63A5"}),(0,t.jsx)(he,{value:u,style:{width:300},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(i.id))}})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:10},children:[(0,t.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:100,height:100},children:(0,t.jsx)("img",{src:x,height:95,width:95})}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,t.jsx)(te.Z,{overlay:C,placement:"bottomLeft",children:(0,t.jsx)(P.Z,{children:"\u4E0B\u8F7D\u4E8C\u7EF4\u7801"})}),(0,t.jsxs)(P.Z,{type:"primary",ghost:!0,style:{marginTop:10,visibility:"hidden"},onClick:function(){return r(!0)},children:["\u5E26\u503C\u94FE\u63A5",(0,t.jsx)(H.Z,{overlay:"\u94FE\u63A5\u6DFB\u52A0\u53C2\u6570\uFF0C\u5C06\u81EA\u52A8\u5E94\u7528\u4E3A\u95EE\u5377\u7684\u7B54\u6848\u3002",children:(0,t.jsx)(e.Z,{className:"setting-prompt",style:{color:"#1891ff"}})})]})]}),(0,t.jsx)(Pe,{visible:v,onClose:function(){return r(!1)}})]})]})},We=n(14965),ke=n(77121),xe=n(30381),ge=n.n(xe),Ie=function(i){var u=i.value,l=i.onChange,f=i.title,x=i.tooltip,s=i.type,a=s===void 0?"text":s,o=i.prefix,v=i.suffix,r=i.style,c=(0,B.useState)(u!==void 0),C=(0,N.Z)(c,2),g=C[0],j=C[1];(0,B.useEffect)(function(){u!==void 0&&j(!0)},[u]);var F=function(){return a==="datepicker"?(0,t.jsx)(ke.Z,{value:u?ge()(u):void 0,showTime:!0,style:r,onChange:function(d){l(d?d==null?void 0:d.valueOf():void 0)}}):a==="number"?(0,t.jsx)(J.Z,{value:u,onChange:function(d){return l(d)},style:(0,Z.Z)({width:200},r)}):(0,t.jsx)(X.Z,{value:u,onChange:function(d){return l(d.target.value)},style:(0,Z.Z)({width:200},r)})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"setting-item",children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsxs)("span",{children:[f,(0,t.jsx)(H.Z,{overlay:x,children:(0,t.jsx)(e.Z,{className:"setting-prompt"})})]}),(0,t.jsx)(K.Z,{checked:u!==void 0,onChange:function(E){E?(j(!0),l("")):(j(!1),l(void 0))}})]}),g&&(0,t.jsxs)("div",{className:"setting-item-content",children:[o,F(),v]})]})})},Oe=function(i){var u=i.name,l=i.basePath,f=(0,Y.Z)(i,["name","basePath"]);return(0,t.jsx)(I.gN,{component:[Ie,f],name:u,basePath:l})},Le=n(25782),Re=n(69816),je=function(){var i=function(l){var f=l.value,x=l.onChange;return f===1?(0,t.jsx)(P.Z,{type:"primary",icon:(0,t.jsx)(Le.Z,{}),onClick:function(){return x(0)},children:"\u6B63\u5728\u56DE\u6536"}):(0,t.jsx)(P.Z,{type:"primary",danger:!0,icon:(0,t.jsx)(Re.Z,{}),onClick:function(){return x(1)},children:"\u6682\u505C\u56DE\u6536"})};return(0,t.jsx)(I.gN,{component:[i],name:"status",basePath:""})},Ue=n(1997),Ke=function(i){var u=i.value,l=i.onChange,f=(0,B.useState)(!1),x=(0,N.Z)(f,2),s=x[0],a=x[1],o=(0,z.IE)(),v=o.schema;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"setting-item",children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u94FE\u63A5",(0,t.jsx)(H.Z,{overlay:"\u95EE\u5377\u4FDD\u5B58\u4E4B\u540E\uFF0C\u53EF\u4EE5\u8DF3\u8F6C\u5230\u6307\u5B9A\u94FE\u63A5\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u94FE\u63A5\u53C2\u6570\u3002",children:(0,t.jsx)(e.Z,{className:"setting-prompt"})})]}),(0,t.jsx)(K.Z,{checked:!!u,onChange:function(c){c?a(!0):l(void 0)}})]}),(s||!!u)&&(0,t.jsx)("div",{className:"setting-item-content",children:(0,t.jsx)(P.Z,{onClick:function(){return a(!0)},style:{marginLeft:10},type:"dashed",children:u?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),s&&(0,t.jsx)(Ue.tC,{value:u,schema:v,functionVisible:!1,title:"\u63D0\u4EA4\u540E\u81EA\u5B9A\u4E49\u8DF3\u8F6C\u94FE\u63A5",onOk:function(c){l(c),a(!1)},onCancel:function(){a(!1)}})]})},Ve=function(i){return(0,t.jsx)(I.gN,(0,Z.Z)({component:[Ke]},i))}},76597:function(ze,re,n){"use strict";n.r(re),n.d(re,{Setting:function(){return f},default:function(){return x}});var Xe=n(13062),I=n(71230),B=n(89032),t=n(15746),Ye=n(34792),le=n(48086),V=n(94657),Z=n(80937),A=n(67294),k=(0,A.createContext)({});function Ce(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=(0,A.useContext)(k),o=a.prefixCls;return o+s}var P=n(58024),_=n(39144),K=n(22385),Q=n(31097),H=n(99008),N=n(84387),p=n(24025),e=n(85893);le.default.config({duration:1,maxCount:1});var Ee=(0,Z.Pi)(function(){var s=(0,Z.cI)();return(0,e.jsx)(Z.RV,{form:s,children:(0,e.jsx)(Z.Wo,{name:"answerSetting",children:(0,e.jsx)("div",{children:(0,e.jsxs)(_.Z,{title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(H.Z,{style:{marginRight:10}}),"\u95EE\u5377\u663E\u793A"]}),className:"answer-setting",extra:(0,e.jsx)(p.kJ,{}),children:[(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u5F00\u542F\u81EA\u52A8\u6682\u5B58",(0,e.jsx)(Q.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u53EF\u4EE5\u81EA\u52A8\u4FDD\u5B58\u672C\u6B21\u672A\u63D0\u4EA4\u7684\u586B\u5199\u5185\u5BB9\uFF0C\u518D\u6B21\u6253\u5F00\u95EE\u5377\u53EF\u663E\u793A\u4E0A\u6B21\u672A\u63D0\u4EA4\u7684\u586B\u5199\u5185\u5BB9\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(p.rs,{name:"autoSave"})]})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u663E\u793A\u9898\u76EE\u5E8F\u53F7",(0,e.jsx)(Q.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u95EE\u5377\u4E2D\u7684\u9898\u76EE\u4F1A\u6309\u6392\u5217\u987A\u5E8F\u4ECE1\u5F00\u59CB\u663E\u793A\u9898\u76EE\u5E8F\u53F7\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(p.rs,{name:"questionNumber"})]})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u663E\u793A\u8FDB\u5EA6\u6761",(0,e.jsx)(Q.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u586B\u5199\u8005\u6ED1\u52A8\u9875\u9762\u53EF\u4EE5\u770B\u5230\u5F53\u524D\u95EE\u5377\u586B\u5199\u8FDB\u5EA6\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(p.rs,{name:"progressBar"})]})}),(0,e.jsx)(p.M6,{name:"initialValues"})]})})})})}),z=n(54421),ee=n(38272),Te=n(94233),oe=n(51890),we=n(71194),ce=n(50146),$e=n(49111),Y=n(19650),Je=n(71153),J=n(60331),Ge=n(57663),de=n(71577),He=n(48736),ye=n(27049),qe=n(62999),Fe=n(51753),te=n(83279),_e=n(43358),b=n(97268),ne=n(18106),X=n(67164),M=n(68489),T=n(60780),G=n.n(T),ue=n(49101),Me=b.Z.Option,Ze=(0,Z.Pi)(function(s){var a=s.onChange,o=s.orgTreeData,v=s.positions,r=(0,A.useState)(),c=(0,V.Z)(r,2),C=c[0],g=c[1],j=(0,A.useState)(),F=(0,V.Z)(j,2),S=F[0],E=F[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(I.Z,{gutter:10,children:[(0,e.jsx)(t.Z,{span:16,children:(0,e.jsx)(Fe.Z,{onChange:function(m){return g(m)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:[{title:"\u53D1\u8D77\u4EBA\u5F53\u524D\u90E8\u95E8",value:"${currentOrgId}",key:"${currentOrgId}"},{title:"\u53D1\u8D77\u4EBA\u4E0A\u7EA7\u90E8\u95E8",value:"${parentOrgId}",key:"${parentOrgId}"}].concat((0,te.Z)(o)),placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0,value:C})}),(0,e.jsx)(t.Z,{span:8,children:(0,e.jsx)(b.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",allowClear:!0,value:S,onChange:function(m){return E(m)},children:v.map(function(d){return(0,e.jsx)(Me,{value:d.id,children:d.name},d.id)})})})]}),(0,e.jsx)(I.Z,{style:{marginTop:10},children:(0,e.jsx)(t.Z,{children:(0,e.jsx)(de.Z,{icon:(0,e.jsx)(ue.Z,{}),onClick:function(){(C||S)&&a("P:".concat(C||"",":").concat(S||""))},children:"\u6DFB\u52A0"})})})]})}),ve=X.Z.TabPane,se=b.Z.Option,Se=(0,Z.Pi)(function(s){var a=s.onChange,o=s.tabs,v=o===void 0?["user","role","position"]:o,r=(0,M.m2)(),c=(0,A.useState)(s.value||[]),C=(0,V.Z)(c,2),g=C[0],j=C[1];(0,A.useEffect)(function(){j(s.value||[])},[s.value]);var F=(0,M.LF)(g),S=r.depts,E=r.users,d=r.roles,m=r.positions,w=(0,A.useState)(),W=(0,V.Z)(w,2),O=W[0],L=W[1];(0,A.useEffect)(function(){O&&r.loadUsers({orgId:O,pageSize:1024})},[O,r]);var $=(0,A.useMemo)(function(){return G()(S.map(function(h){return{value:h.id,title:h.name,key:h.id,parentId:h.parentId}}),{parentProperty:"parentId",customID:"value"})},[S]),q=function(D){var U=(0,te.Z)(g);D.forEach(function(R){U.includes(R)||U.push(R)}),j(U),a(U)},be=function(){for(var D=arguments.length,U=new Array(D),R=0;R<D;R++)U[R]=arguments[R];var ae=(0,te.Z)(g.filter(function(Qe){return!U.includes(Qe)}));j(ae),a(ae)};return(0,e.jsx)("div",{style:{width:400},children:(0,e.jsxs)(X.Z,{defaultActiveKey:"user",children:[(0,e.jsx)(ve,{tab:"\u6210\u5458",disabled:!v.includes("user"),children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsxs)(I.Z,{gutter:20,children:[(0,e.jsx)(t.Z,{span:16,children:(0,e.jsx)(Fe.Z,{onChange:function(D){return L(D)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:$,placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0})}),(0,e.jsx)(t.Z,{span:8,children:(0,e.jsx)(b.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",allowClear:!0,showSearch:!0,mode:"multiple",onChange:function(D){return q(D)},maxTagCount:0,value:g.filter(function(h){return h.startsWith("U:")}),dropdownRender:function(D){return(0,e.jsxs)("div",{children:[D,(0,e.jsx)(ye.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8},children:(0,e.jsx)(de.Z,{size:"small",type:"link",onClick:function(){return q(E.map(function(R){return"U:".concat(R.id)}))},children:"\u5168\u9009"})})]})},children:E.map(function(h){return(0,e.jsx)(se,{value:"U:".concat(h.id),children:h.name},h.id)})})})]}),(0,e.jsx)(Y.Z,{style:{marginTop:20},wrap:!0,children:g.filter(function(h){return h.startsWith("U:")}).map(function(h){return(0,e.jsx)(J.Z,{closable:!0,color:"blue",onClose:function(){return be(h)},children:F.user[h.split(":")[1]]},h)})})]})},"user"),(0,e.jsx)(ve,{tab:"\u89D2\u8272",disabled:!v.includes("role"),children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsx)(b.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",allowClear:!0,showSearch:!0,mode:"multiple",value:g.filter(function(h){return h.startsWith("R:")}),onChange:function(D){return q(D)},maxTagCount:0,children:d.map(function(h){return(0,e.jsx)(se,{value:"R:".concat(h.id),children:h.name},h.id)})}),(0,e.jsx)(Y.Z,{style:{marginTop:20},wrap:!0,children:g.filter(function(h){return h.startsWith("R:")}).map(function(h){return(0,e.jsx)(J.Z,{closable:!0,color:"blue",onClose:function(){return be(h)},children:F.role[h.split(":")[1]]},h)})})]})},"role"),(0,e.jsx)(ve,{tab:"\u673A\u6784\u5C97\u4F4D",disabled:!v.includes("position"),children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsx)(Ze,{positions:m,orgTreeData:$,onChange:function(D){return q([D])}}),(0,e.jsx)(Y.Z,{style:{marginTop:20},wrap:!0,children:g.filter(function(h){return h.startsWith("P:")}).map(function(h){var D=h.split(":"),U=(0,V.Z)(D,3),R=U[1],ae=U[2];return(0,e.jsxs)(J.Z,{closable:!0,color:"blue",onClose:function(){return be(h)},children:[F.org[R],"-",F.position[ae]]},R+":"+ae)})})]})},"position")]})})}),pe=Se,Be=n(37809),ie=n(11628),Ae=function(a){var o=(0,A.useState)([]),v=(0,V.Z)(o,2),r=v[0],c=v[1];return(0,e.jsx)(ce.Z,{title:"\u8BBE\u7F6E\u534F\u4F5C\u7BA1\u7406\u5458",visible:!0,onCancel:a.onCancel,onOk:function(){return a.onOk(r)},children:(0,e.jsx)(pe,{tabs:["user"],onChange:function(g){c(g.map(function(j){return j.split(":")[1]}))}})})},De=function(){var a=(0,ie.IE)(),o=a.id,v=(0,A.useState)([]),r=(0,V.Z)(v,2),c=r[0],C=r[1],g=(0,A.useState)(!1),j=(0,V.Z)(g,2),F=j[0],S=j[1],E=function(){return M.hi.getProjectPartner(o).then(function(m){m&&C(m)})};return(0,A.useEffect)(function(){E()},[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{className:"answer-setting",title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(Be.Z,{}),(0,e.jsxs)("div",{children:["\u534F\u4F5C\u7BA1\u7406\u5458\u5217\u8868",(0,e.jsx)(Q.Z,{overlay:"\u534F\u4F5C\u8005\u53EF\u4EE5\u534F\u52A9\u521B\u5EFA\u8005\u8FDB\u884C\u7F16\u8F91\u95EE\u5377\u3001\u7BA1\u7406\u6570\u636E\u7B49\u64CD\u4F5C\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt",style:{marginLeft:5}})})]})]}),extra:(0,e.jsx)("a",{href:"#",onClick:function(){return S(!0)},children:"\u8BBE\u7F6E\u534F\u4F5C\u7BA1\u7406\u5458"}),children:(0,e.jsx)(ee.ZP,{itemLayout:"horizontal",dataSource:c,renderItem:function(m){var w,W;return(0,e.jsxs)(ee.ZP.Item,{actions:m.type!==1?[(0,e.jsx)("a",{onClick:function(){var L;ce.Z.confirm({title:"\u5220\u9664\u534F\u4F5C\u8005",content:(0,e.jsxs)("div",{children:["\u786E\u5B9A\u5220\u9664\u534F\u4F5C\u8005 ",(0,e.jsx)("b",{children:(L=m.user)===null||L===void 0?void 0:L.name}),"\u5417\uFF1F"]}),onOk:function(){M.hi.deleteProjectPartner(m.id,o).then(function(q){q.success&&E()})}})},children:"\u5220\u9664"},"list-loadmore-edit")]:[],children:[(0,e.jsx)(ee.ZP.Item.Meta,{avatar:(0,e.jsx)(oe.C,{src:(w=m.user)!==null&&w!==void 0&&w.avatar?"/api/public/preview/".concat(m.user.avatar):""}),title:(W=m.user)===null||W===void 0?void 0:W.name}),(0,e.jsx)("div",{children:m.type===1?"\u521B\u5EFA\u8005":"\u534F\u4F5C\u8005"})]})}})}),F&&(0,e.jsx)(Ae,{onCancel:function(){return S(!1)},onOk:function(m){M.hi.addProjectPartner({userIds:m,projectId:o}).then(function(){E(),S(!1)})}})]})},Ne=n(56931),Pe=(0,Z.Pi)(function(){return(0,e.jsx)(Z.Wo,{name:"submittedSetting",children:(0,e.jsx)("div",{children:(0,e.jsxs)(_.Z,{title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(Ne.Z,{}),"\u6295\u653E\u4E0E\u5206\u4EAB"]}),className:"submitted-setting",children:[(0,e.jsx)(p.KL,{name:"contentHtml"}),(0,e.jsx)(p.cg,{name:"redirectUrl"}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsx)(p.yX,{})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u5141\u8BB8\u4FEE\u6539\u7B54\u6848",(0,e.jsx)(Q.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u518D\u6B21\u6253\u5F00\u95EE\u5377\u4F1A\u56DE\u663E\u4E4B\u524D\u586B\u5199\u7684\u7B54\u6848\uFF0C\u5E76\u4E14\u53EF\u4EE5\u4FEE\u6539\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(p.rs,{name:"enableUpdate"})]})})]})})})}),he=n(1603);le.default.config({duration:1,maxCount:1});var me=(0,Z.Pi)(function(){return(0,e.jsx)("div",{children:(0,e.jsxs)(_.Z,{title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(he.Z,{style:{marginRight:10}}),"\u56DE\u6536\u8BBE\u7F6E"]}),className:"answer-setting",children:[(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u9700\u8981\u767B\u5F55",(0,e.jsx)(Q.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u53EA\u6709\u767B\u5F55\u7528\u6237\u624D\u53EF\u4EE5\u586B\u5199\u95EE\u5377\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(p.rs,{name:"loginRequired",basePath:"answerSetting"})]})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsx)("span",{children:"\u53EA\u80FD\u5FAE\u4FE1\u586B\u5199"}),(0,e.jsx)(p.rs,{name:"wechatOnly",basePath:"answerSetting"})]})}),(0,e.jsx)(p.q1,{name:"password",basePath:"answerSetting",title:"\u51ED\u5BC6\u7801\u586B\u5199",tooltip:"\u53EA\u6709\u8F93\u5165\u5BC6\u7801\u624D\u80FD\u586B\u5199\u95EE\u5377"}),(0,e.jsx)(p.qo,{name:"cookieLimit",basePath:"answerSetting",title:"\u6BCF\u53F0\u7535\u8111\u6216\u624B\u673A\u7B54\u9898\u6B21\u6570\u9650\u5236",tooltip:"\u6839\u636E cookie \u8FDB\u884C\u9650\u5236"}),(0,e.jsx)(p.qo,{name:"ipLimit",basePath:"answerSetting",title:"\u6BCF\u4E2AIP\u7B54\u9898\u6B21\u6570\u9650\u5236",tooltip:"\u6839\u636E IP \u8FDB\u884C\u9650\u5236"}),(0,e.jsx)(p.qo,{name:"loginLimit",basePath:"answerSetting",title:"\u6BCF\u4E2A\u767B\u5F55\u8D26\u53F7\u7B54\u9898\u6B21\u6570\u9650\u5236",tooltip:"\u6839\u636E\u767B\u5F55\u8D26\u53F7\u8FDB\u884C\u9650\u5236"}),(0,e.jsx)(p.q1,{name:"endTime",basePath:"answerSetting",title:"\u8BBE\u7F6E\u95EE\u5377\u7ED3\u675F\u65F6\u95F4",type:"datepicker"}),(0,e.jsx)(p.q1,{name:"maxAnswers",basePath:"answerSetting",title:"\u8BBE\u7F6E\u95EE\u5377\u56DE\u6536\u4E0A\u9650",type:"number",prefix:"\u56DE\u6536",suffix:"\u4EFD\u95EE\u5377\u540E\uFF0C\u505C\u6B62\u6536\u96C6",style:{width:80,margin:"0 5px"}})]})})}),fe=n(64031),We=(0,Z.Pi)(function(){var s=Ce("-content"),a=(0,ie.IE)(),o=a.setting,v=(0,A.useMemo)(function(){return(0,fe.Np)({initialValues:a.setting,effects:function(){(0,fe.ge)("*",function(c){var C=c.address.toString();console.log(C);var g=C.split("."),j=(0,V.Z)(g,2),F=j[0],S=j[1];a.setting&&a.setting[F]&&(S?a.setting[F][S]=c.value:a.setting[F]=c.value),M.hi.updateSetting({id:a.id,settingKey:C,settingValue:c.value}).then(function(E){E.success&&le.default.info("\u4FDD\u5B58\u4E2D")})})}})},[]);return(0,A.useEffect)(function(){o&&v.setInitialValues(o)},[o,v]),(0,e.jsx)(Z.RV,{form:v,children:(0,e.jsx)("div",{className:s,children:(0,e.jsxs)(I.Z,{gutter:[2,2],children:[(0,e.jsx)(t.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(Ee,{})}),(0,e.jsx)(t.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(me,{})}),(0,e.jsx)(t.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(Pe,{})}),(0,e.jsx)(t.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(De,{})})]})})})}),ke=n(7359),xe=n(27279),ge=n(8212),Ie=n(50206),Oe=n(25782),Le=n(94184),Re=n.n(Le),je=xe.Z.Panel,Ue=[{key:"answerSetting",title:"\u6570\u636E\u6536\u96C6\u8BBE\u7F6E",icon:(0,e.jsx)(ge.Z,{}),description:"\u57FA\u672C\u7684\u95EE\u5377\u586B\u5199\u8BBE\u7F6E"},{key:"answerLimitSetting",title:"\u7B54\u9898\u9650\u5236",icon:(0,e.jsx)(ge.Z,{}),description:"\u95EE\u5377\u7B54\u9898\u9650\u5236"},{key:"memberSetting",title:"\u534F\u540C\u7F16\u8F91",icon:(0,e.jsx)(Ie.Z,{}),description:"\u8BBE\u7F6E\u534F\u4F5C\u7BA1\u7406\u5458"},{key:"submittedSetting",title:"\u63D0\u4EA4\u95EE\u5377\u6570\u636E\u540E",icon:(0,e.jsx)(he.Z,{}),description:"\u95EE\u5377\u63D0\u4EA4\u5B8C\u6210\u9875\u9762\u8BBE\u7F6E"}],Ke=(0,Z.Pi)(function(){var s=Ce("-nav"),a=(0,A.useContext)(k),o=a.settingStore,v=o.activePanel;return(0,e.jsx)("div",{className:s,children:(0,e.jsxs)(xe.Z,{accordion:!0,expandIcon:function(c){var C=c.isActive;return(0,e.jsx)(Oe.Z,{rotate:C?90:0})},defaultActiveKey:"1",children:[(0,e.jsx)(je,{header:"\u57FA\u7840\u8BBE\u7F6E",style:{padding:0},children:Ue.map(function(r){return(0,e.jsxs)(I.Z,{className:Re()("nav-panel-item",{active:v===r.key}),onClick:function(){return o.activePanel=r.key},children:[(0,e.jsx)(t.Z,{span:4,children:(0,e.jsx)(oe.C,{icon:r.icon,shape:"square"})}),(0,e.jsx)(t.Z,{span:20,children:(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(t.Z,{span:24,children:r.title}),(0,e.jsx)(t.Z,{span:24,style:{fontSize:12,color:"#8c8c8c"},children:r.description})]})})]},r.key)})},"1"),(0,e.jsx)(je,{header:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)("p",{children:"todo"})},"2")]})})}),Ve=n(69610),y=n(54941),i=n(54531),u=function(){function s(a){(0,Ve.Z)(this,s),this.rootStore=void 0,this.activePanel=void 0,this.rootStore=a,this.activePanel="answerSetting",this.makeObservable()}return(0,y.Z)(s,[{key:"makeObservable",value:function(){(0,i.Ou)(this,{rootStore:i.LO.ref,activePanel:i.LO.ref})}}]),s}(),l=n(77613),f=(0,l.P)(function(){var s=(0,ie.IE)(),a=(0,A.useMemo)(function(){return new u(s)},[s]);return(0,e.jsx)(k.Provider,{value:{prefixCls:"survey-setting",settingStore:a},children:(0,e.jsx)("div",{className:"survey-setting",children:(0,e.jsx)(We,{})})})}),x=f}}]);
