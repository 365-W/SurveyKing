(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[304],{61767:function(B,Fe,a){"use strict";a.r(Fe),a.d(Fe,{default:function(){return Pt}});var O=a(67294),X=a(94657),P=a(11628),o=a(72706),Ie=a(80937),f=a(11849),Ee=O.createContext({}),k="http://150.158.30.131:8181/";function mt(){return Math.random()}function te(r,t){var n=(0,f.Z)({},r);return n=ht(n,["width","height","lineHeight","fontSize","borderWidth"]),n=K(n,["animationDuration","animationDelay"]),t||(delete n.top,delete n.right,delete n.bottom,delete n.left,delete n.transform,delete n.borderWidth,delete n.animationName),n}function ht(r,t){return t.forEach(function(n){r[n]&&(r[n]+"").indexOf("px")===-1&&(r[n]=r[n]+"px")}),r}function K(r,t){return t.forEach(function(n){r[n]&&(r[n]+"").indexOf("s")===-1&&(r[n]=r[n]+"s")}),r}var Ue=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,s=null;return function(){s!==null&&clearTimeout(s),s=setTimeout(t,n)}};function fe(){return document.getElementById("root")}function bt(){}function ge(r){return document.getElementById("cmp"+r)}function G(){var r=(0,O.useState)(0),t=(0,X.Z)(r,2),n=t[1],s=(0,O.useCallback)(function(){n(function(i){return i+1})},[]);return s}function ce(){return(0,O.useContext)(Ee)}var de=a(11292),Qe=a.n(de),e=a(85893);function Be(r){var t=r.children,n=r.baseCmp,s=r.value,i=r.style,u=i===void 0?{width:200,height:200}:i,c=ce(),h=O.useMemo(function(){return(0,f.Z)((0,f.Z)({},n),{},{data:(0,f.Z)((0,f.Z)({},n.data),{},{value:s,style:(0,f.Z)((0,f.Z)({},n.data.style),u)})})},[n,s,u]),l=function(b){b.preventDefault(),b.stopPropagation(),c.addCmp(h)},p=function(b){b.dataTransfer.setData("add-component",JSON.stringify(h))};return(0,e.jsx)("li",{className:Qe().main,onClick:l,draggable:"true",onDragStart:p,children:t})}var vt=[{style:{width:180,height:320},value:k+"chuliu.jpeg"},{style:{width:180,height:320},value:k+"hua-bg.png"},{style:{width:315,height:187},value:k+"tiger.png"},{style:{width:128,height:30},value:k+"fu.png"},{style:{width:40,height:30},value:k+"gold-coins.png"},{style:{width:40,height:30},value:k+"gold-coins2.png"},{style:{width:120,height:230},value:k+"meng.webp"},{style:{width:300,height:152},value:k+"taohuayun.png"},{style:{width:300,height:312},value:k+"hua.png"},{style:{width:320,height:200},value:k+"certificate.jpg"},{style:{width:320,height:200},value:k+"rose.jpg"},{style:{width:320,height:200},value:k+"red-rose.jpg"},{style:{width:320,height:200},value:k+"peony.jpg"},{style:{width:320,height:200},value:k+"flower.jpg"}];function We(r){var t=r.baseCmp,n=(0,P.IE)(),s=n.images[o.__.PosterImage];return(0,e.jsx)(e.Fragment,{children:s.map(function(i,u){return(0,e.jsx)(Be,{baseCmp:t,value:"/api/public/preview/".concat(i.id),children:(0,e.jsx)("img",{src:"/api/public/preview/".concat(i.id),alt:""})},"img"+u)})})}var Ve=(0,Ie.Pi)(We),Ke=a(24025),q=a(61501),Ze=[{type:"QRNormal",component:q.QRNormal},{type:"QRRandRect",component:q.QRRandRect},{type:"QRDsj",component:q.QRDsj},{type:"QR25D",component:q.QR25D},{type:"QRImage",component:q.QRImage},{type:"QRResImage",component:q.QRResImage},{type:"QRBubble",component:q.QRBubble},{type:"QRFunc",component:q.QRFunc},{type:"QRLine",component:q.QRLine}];function ft(r){var t,n=(t=Ze.find(function(s){return s.type===r}))===null||t===void 0?void 0:t.component;return n||q.QRNormal}function Re(r){var t=r.baseCmp,n=(0,P.IE)(),s=(0,Ke.Jg)(n.id);return(0,e.jsx)(e.Fragment,{children:Ze.map(function(i,u){return(0,e.jsx)(Be,{baseCmp:(0,f.Z)((0,f.Z)({},t),{},{data:(0,f.Z)((0,f.Z)({},t.data),{},{componentType:i.type})}),value:s,style:{width:120,height:120,backgroundColor:"#ffffff"},children:O.createElement(i.component,{value:s})},"img"+u)})})}var gt=Re,ze=a(46133),ie=a.n(ze),Ne=0,Ae=1,Ce=2,xe=3,pt=[{desc:"\u6587\u672C",icon:"Text",data:{type:Ne,value:"\u6587\u672C",iconfont:"iconfont icon-wenben",style:{top:1,left:0,width:80,height:30,lineHeight:30,fontSize:12,fontWeight:"normal",color:"#000",backgroundColor:"#ffffff00",textAlign:"left",borderRadius:"0%",borderStyle:"none",borderWidth:"0",borderColor:"#ffffff00"}}},{desc:"\u6309\u94AE",icon:"Button",data:{type:Ae,value:"\u6309\u94AE",iconfont:"iconfont icon-anniu",style:{top:0,left:0,width:80,height:30,lineHeight:30,fontSize:12,fontWeight:"normal",color:"#000",backgroundColor:"#ffffff00",textAlign:"left",borderRadius:"0%",borderStyle:"none",borderWidth:"0",borderColor:"#ffffff00"}}},{desc:"\u56FE\u7247",icon:"Picture",data:{type:Ce,iconfont:"iconfont icon-image",value:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1333208373,3297678241&fm=26&gp=0.jpg",style:{top:0,left:0,width:200,height:100,borderRadius:"0%",borderStyle:"none",borderWidth:"0",borderColor:"#ffffff00"}}},{desc:"\u4E8C\u7EF4\u7801",icon:"Qrcode",data:{type:xe,iconfont:"iconfont icon-image",value:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1333208373,3297678241&fm=26&gp=0.jpg",style:{top:0,left:0,width:200,height:100,borderRadius:"0%",borderStyle:"none",borderWidth:"0",borderColor:"#ffffff00"}}}],ee=a(75414),ye=a(54549);function je(){var r=ce(),t=(0,O.useState)(null),n=(0,X.Z)(t,2),s=n[0],i=n[1],u=function(l,p){p.data.type===Ce||p.data.type===xe||l.dataTransfer.setData("add-component",JSON.stringify(p))},c=function(l,p){if(l.preventDefault(),l.stopPropagation(),p.data.type===Ne||p.data.type===Ae){r.addCmp(p);return}if(s)i(null);else{var M=null;switch(p.data.type){case Ce:M=(0,e.jsx)(Ve,{baseCmp:p});break;case xe:M=(0,e.jsx)(gt,{baseCmp:p});break;default:M=null}i(M)}};return(0,e.jsxs)("div",{id:"cmps",className:ie().main,children:[(0,e.jsx)("div",{className:ie().cmpList,children:pt.map(function(h){return(0,e.jsxs)("div",{className:ie().cmp,draggable:h.data.type!==Ce,onDragStart:function(p){return u(p,h)},onClick:function(p){return c(p,h)},children:[(0,e.jsx)("span",{className:"".concat(ie().cmpIcon),children:(0,e.jsx)(ee.MT,{infer:h.icon})}),(0,e.jsxs)("span",{className:ie().cmpText,children:[" ",h.desc," "]})]},h.desc)})}),s&&(0,e.jsx)(ye.Z,{onClick:function(){return i(null)},className:ie().close}),s&&(0,e.jsx)("ul",{className:ie().detailList,children:s})]})}var Xe=(0,Ie.Pi)(je),_=a(69610),pe=a(54941),be=a(43028),Ye=a(5869),Je=a(97226),se=a.n(Je);function we(r){var t=r.index,n=r.pos,s=r.cmp,i=ce(),u=function(y){y.stopPropagation(),i.deleteSelectedCmp(s)},c=function(){i.addCmp(s)},h=function(y){i.changeCmpIndex(t)},l=function(y){i.changeCmpIndex(t,0)},p=i.getCmps(),M=function(y,j){var I=document.getElementById("cmp"+j.onlyKey),E=I.className;E.indexOf("hover")===-1&&I.setAttribute("class",E+" hover")},b=function(y,j){var I=document.getElementById("cmp"+j.onlyKey),E=I.className;E.indexOf("hover")>-1&&I.setAttribute("class",E.slice(0,-6))},v=function(y,j){i.setSelectedCmp(j)};return(0,e.jsxs)("ul",{className:se().main,style:n,children:[(0,e.jsx)("li",{className:se().item,onClick:c,children:"\u590D\u5236"}),(0,e.jsx)("li",{className:se().item,onClick:u,children:"\u5220\u9664"}),(0,e.jsx)("li",{className:se().item,onClick:h,children:"\u7F6E\u9876"}),(0,e.jsx)("li",{className:se().item,onClick:l,children:"\u7F6E\u5E95"}),p.map(function(g){return(0,e.jsxs)("li",{className:se().item,onMouseOver:function(j){return M(j,g)},onMouseLeave:function(j){return b(j,g)},onClick:function(j){return v(j,g)},children:[(0,e.jsx)("div",{className:se().desc,children:g.desc}),(0,e.jsx)("div",{className:se().thumbnail,style:{width:g.data.style.width,height:g.data.style.height},children:Le(g)})]},g.onlyKey)})]})}var $e=a(29011),Ge=a.n($e);function qe(r){var t=r.style;return(0,e.jsx)("div",{className:Ge().main,style:te(t,!1),children:r.value})}var _e=a(73420),et=a.n(_e);function tt(r){var t=r.style;return(0,e.jsx)("button",{className:et().main,style:te(t,!1),children:r.value})}var nt=a(69851),at=a.n(nt);function ot(r){var t=r.style;return(0,e.jsx)("img",{className:at().main,style:te(t),src:r.value,alt:""})}var Pe=a(68009),it=a.n(Pe);function Ct(r){var t=r.style,n=r.componentType;return O.createElement(ft(n),{value:r.value,style:te(t),className:it().main})}var st=a(94184),le=a.n(st),lt=a(97427),J=a.n(lt),ke=function(r){(0,be.Z)(n,r);var t=(0,Ye.Z)(n);function n(s,i){var u;return(0,_.Z)(this,n),u=t.call(this,s),u.moveByMouse=function(c,h){c.preventDefault(),u.context.updateSelectedCmpStyle(h,"frequently")},u.whichEvent=function(c){var h=u.context,l=h.getSelectedCmp(),p={};switch(c.keyCode){case 37:p.left=l.data.style.left-1,u.moveByMouse(c,p);break;case 38:p.top=l.data.style.top-1,u.moveByMouse(c,p);break;case 39:p.left=l.data.style.left+1,u.moveByMouse(c,p);break;case 40:p.top=l.data.style.top+1,u.moveByMouse(c,p);break;default:break}},u.onStoreChange=function(){u.forceUpdate()},u.setShowContextMenu=function(c){c.stopPropagation(),c.preventDefault(),u.state.showContextMenu&&u.setState({showContextMenu:!1})},u.handleMouseDown=function(c,h){c.stopPropagation(),c.preventDefault();var l=u.context.getCmp(u.props.index),p=c.pageX,M=c.pageY,b=function(y){var j=y.pageX,I=y.pageY,E=j-p,H=I-M,oe={};h&&(h.indexOf("top")>=0&&(H=0-H,oe.top=l.data.style.top-H),h.indexOf("left")>=0&&(E=0-E,oe.left=l.data.style.left-E)),Ue(u.context.updateSelectedCmpStyle((0,f.Z)((0,f.Z)({},oe),{},{width:l.data.style.width+E,height:l.data.style.height+H}),"frequently"))},v=function g(){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",g),u.context.recordCanvasChangeHistory()};document.addEventListener("mousemove",b),document.addEventListener("mouseup",v)},u.handleDragStart=function(c){u.setActive(c);var h=c.pageX,l=c.pageY;c.dataTransfer.setData("startPos",JSON.stringify({pageX:h,pageY:l}))},u.setActive=function(c){c.stopPropagation();var h=u.context.getCmp(u.props.index);u.context.setSelectedCmp(h)},u.handleContextMenu=function(c){c.preventDefault(),u.setState({showContextMenu:!0})},u.handleMouseDownofRotate=function(c){c.stopPropagation(),c.preventDefault();var h=u.context.updateSelectedCmpStyle,l=c.pageX,p=c.pageY,M=function(g){var y=g.pageX,j=g.pageY,I=y-l,E=j-p,H=360*Math.atan2(E,I)/(2*Math.PI);Ue(h({transform:"rotate(".concat(H,"deg)")},"frequently"))},b=function v(){document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",v),u.context.recordCanvasChangeHistory()};document.addEventListener("mousemove",M),document.addEventListener("mouseup",b)},u.state={showContextMenu:!1},u}return(0,pe.Z)(n,[{key:"componentDidMount",value:function(){document.getElementById("root").addEventListener("click",this.setShowContextMenu),document.onkeydown=this.whichEvent,this.unregisterCmpsEntity=this.context.registerCmpsEntity(this.context.getCmp(this.props.index).onlyKey,this)}},{key:"componentWillUnmount",value:function(){document.getElementById("root").removeEventListener("click",this.setShowContextMenu),this.unregisterCmpsEntity()}},{key:"render",value:function(){var i=this,u=this.props.index,c=this.context,h=c.getCmp(this.props.index),l=c.getSelectedCmp(),p=l&&l.onlyKey===h.onlyKey,M=this.state.showContextMenu,b=h.data.style,v=b.top-4,g=b.left-4,y=b.width,j=b.height;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{id:"cmp"+h.onlyKey,className:J().main+" "+(p?"selected":J().unselected),style:(0,f.Z)((0,f.Z)({},te(b,!0)),{},{zIndex:u}),draggable:!0,onDragStart:this.handleDragStart,onClick:this.setActive,onContextMenu:this.handleContextMenu,children:Le(h)}),p&&(0,e.jsxs)("ul",{className:J().stretch,style:{transform:"rotate".concat(b.transform)},children:[(0,e.jsx)("li",{className:le()(J().rotate,"iconfont icon-xuanzhuan"),style:{top:v-20,left:g+y/2},onMouseDown:this.handleMouseDownofRotate}),(0,e.jsx)("li",{className:J().stretchDot,style:{top:v,left:g},onMouseDown:function(E){return i.handleMouseDown(E,"top left")}}),(0,e.jsx)("li",{className:J().stretchDot,style:{top:v,left:g+y/2},onMouseDown:function(E){return i.handleMouseDown(E,"top")}}),(0,e.jsx)("li",{className:J().stretchDot,style:{top:v,left:g+y+2},onMouseDown:function(E){return i.handleMouseDown(E,"top right")}}),(0,e.jsx)("li",{style:{top:v+j/2,left:g+y+2},onMouseDown:this.handleMouseDown}),(0,e.jsx)("li",{className:J().stretchDot,style:{top:v+j+2,left:g+y+2},onMouseDown:this.handleMouseDown}),(0,e.jsx)("li",{className:J().stretchDot,style:{top:v+j+2,left:g+y/2},onMouseDown:this.handleMouseDown}),(0,e.jsx)("li",{className:J().stretchDot,style:{top:v+j+2,left:g},onMouseDown:function(E){return i.handleMouseDown(E,"bottom left")}}),(0,e.jsx)("li",{className:J().stretchDot,style:{top:v+j/2,left:g},onMouseDown:function(E){return i.handleMouseDown(E,"left")}})]}),M&&(0,e.jsx)(we,{index:u,pos:{top:b.top-80,left:b.left+60},cmp:h})]})}}]),n}(O.Component);ke.contextType=Ee;function Le(r){var t=r.data,n=null;switch(t.type){case Ne:n=(0,e.jsx)(qe,(0,f.Z)({},t));break;case Ae:n=(0,e.jsx)(tt,(0,f.Z)({},t));break;case Ce:n=(0,e.jsx)(ot,(0,f.Z)({},t));break;case xe:n=(0,e.jsx)(Ct,(0,f.Z)({},t));break;default:n=null}return n}var rt=a(53384),Me=a.n(rt),ut=a(10781),U=a.n(ut),ct=a(85939),R=a.n(ct),m=[{id:"0",name:"\u5956\u72B6",img:k+"gaoshaoyun.png",cmps:'{"style":{"width":320,"height":568,"backgroundColor":"#ffffff00","backgroundImage":"","backgroundPosition":"center","backgroundSize":"cover","backgroundRepeat":"no-repeat","boxSizing":"content-box"},"cmps":[{"desc":"\u56FE\u7247","data":{"type":2,"iconfont":"iconfont icon-image","value":"http://150.158.30.131:8181/certificate.jpg","style":{"top":0,"left":0,"width":320,"height":200,"borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.2471236123826679},{"desc":"\u56FE\u7247","data":{"type":2,"iconfont":"iconfont icon-image","value":"http://150.158.30.131:8181/tiger.png","style":{"top":138,"left":243,"width":43,"height":39,"borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.7204251020316776},{"desc":"\u6587\u672C","data":{"type":0,"value":"\u9AD8\u5C11\u4E91\u540C\u5B66\uFF1A","iconfont":"iconfont icon-wenben","style":{"top":72,"left":29,"width":80,"height":30,"lineHeight":30,"fontSize":"12","fontWeight":"bold","color":"#000","backgroundColor":"#ffffff00","textAlign":"left","borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.19367990107557298},{"desc":"\u6587\u672C","data":{"type":0,"value":"\u57282021\u5E74\u5EA6\u8868\u73B0\u4F18\u5F02\uFF0C\u88AB\u8BC4\u4E3A","iconfont":"iconfont icon-wenben","style":{"top":98,"left":53,"width":179,"height":26,"lineHeight":30,"fontSize":12,"fontWeight":"bold","color":"#000","backgroundColor":"#ffffff00","textAlign":"left","borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.5641712922935813},{"desc":"\u6587\u672C","data":{"type":0,"value":"\u4E09\u597D\u5B66\u751F","iconfont":"iconfont icon-wenben","style":{"top":127,"left":106,"width":92,"height":31,"lineHeight":30,"fontSize":"22","fontWeight":"bold","color":"#fc0000ff","backgroundColor":"#ffffff00","textAlign":"left","borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.3161408071395724},{"desc":"\u6587\u672C","data":{"type":0,"value":"\u7279\u53D1\u6B64\u72B6\uFF0C\u4EE5\u8D44\u9F13\u52B1\uFF01","iconfont":"iconfont icon-wenben","style":{"top":155,"left":28,"width":179,"height":26,"lineHeight":30,"fontSize":12,"fontWeight":"bold","color":"#000","backgroundColor":"#ffffff00","textAlign":"left","borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#ffffff00"}},"onlyKey":0.5359619832019422}]}'},{id:"1",name:"\u65B0\u5E74",img:k+"newyear.png",cmps:'{"style":{"width":320,"height":568,"backgroundColor":"#ffffff00","backgroundImage":"http://150.158.30.131:8181/chuliu.jpeg","backgroundPosition":"center","backgroundSize":"cover","backgroundRepeat":"no-repeat","boxSizing":"content-box"},"cmps":[{"desc":"\u56FE\u7247","data":{"type":2,"iconfont":"iconfont icon-image","value":"http://150.158.30.131:8181/tiger.png","style":{"top":355,"left":-15,"width":72,"height":86,"borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#fff","animationName":"jello","animationDelay":0,"animationDuration":1,"animationIterationCount":"infinite"}},"onlyKey":0.284866448554715},{"desc":"\u56FE\u7247","data":{"type":2,"iconfont":"iconfont icon-image","value":"http://150.158.30.131:8181/hua.png","style":{"top":499,"left":155,"width":61,"height":66,"borderRadius":"0%","borderStyle":"none","borderWidth":"0","borderColor":"#fff"}},"onlyKey":0.04785683542864816}]}'}];function d(r){var t=r.openOrCloseTpl,n=r.globalCanvas,s=function(u){n.updateCanvas(JSON.parse(u)),t(!1)};return(0,e.jsxs)("ul",{className:R().main,children:[(0,e.jsx)("li",{className:R().close,onClick:t,children:(0,e.jsx)("i",{className:"iconfont icon-close"})}),m.map(function(i){return(0,e.jsxs)("li",{className:R().item,onClick:function(){return s(i.cmps)},children:[(0,e.jsx)("div",{className:R().name,children:i.name}),(0,e.jsx)("div",{className:R().thumbnail,children:(0,e.jsx)("img",{src:i.img,alt:i.name})})]},i.id)})]})}var C=a(29306),Z=a.n(C),N=a(71194),x=a(50146),S=a(18106),w=a(67164),L=a(43185),A=a(11324),F=a(83279),$=a(3182),Y=a(22385),V=a(31097),ne=a(94043),ae=a.n(ne),Q=a(62298),D=a(42768),W=a(57119),De=a(57663),Oe=a(71577),re=a(73171),me=function(t){var n=t.file,s=t.onPreview,i=t.onRemove;return(0,e.jsxs)("div",{className:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card",children:[(0,e.jsx)("div",{className:"ant-upload-list-item-info",children:(0,e.jsxs)("span",{className:"ant-upload-span",children:[(0,e.jsx)("a",{className:"ant-upload-list-item-thumbnail",href:n.url,target:"_blank",rel:"noopener noreferrer",children:(0,e.jsx)("img",{src:n.thumbUrl,alt:n.fileName,className:"ant-upload-list-item-image"})}),(0,e.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"ant-upload-list-item-name",title:n.url,href:n.url,children:n.name})]})}),(0,e.jsxs)("span",{className:"ant-upload-list-item-actions",children:[(0,e.jsx)(Oe.Z,{title:"\u8BBE\u7F6E\u80CC\u666F",size:"small",onClick:s,type:"text",icon:(0,e.jsx)(D.Z,{style:{color:"white"},className:"ant-upload-list-item-card-actions-btn"})}),(0,e.jsx)(Oe.Z,{title:"\u5220\u9664\u56FE\u7247",size:"small",type:"text",onClick:i,icon:(0,e.jsx)(re.Z,{style:{color:"white"},className:"ant-upload-list-item-card-actions-btn"})})]})]})},he=function(t){var n=(0,P.IE)(),s=t.list,i=t.type,u=(0,O.useState)([]),c=(0,X.Z)(u,2),h=c[0],l=c[1];(0,O.useEffect)(function(){l(s.map(function(v){return{uid:v.id,name:v.originalName,status:"done",thumbUrl:v.previewUrl||"/api/public/preview/".concat(v.id,"@thumbnail"),url:v.previewUrl||"/api/public/preview/".concat(v.id)}})||[])},[s]);var p=(0,e.jsx)("div",{children:(0,e.jsx)(V.Z,{title:"\u56FE\u7247\u4E0A\u4F20",children:(0,e.jsx)(Q.Z,{style:{minWidth:30}})})}),M=function(){var v=(0,$.Z)(ae().mark(function g(y){var j,I,E,H;return ae().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:j=y.onSuccess,I=y.onError,E=y.file,H=y.onProgress,n.uploadImage(i,E,function(ve){H&&H({percent:ve.loaded/ve.total*100})}).then(function(ve){if(ve.success&&j&&j(ve.data),!ve.success&&I){var dt=new Error("Some error");I({event:dt})}});case 2:case"end":return Se.stop()}},g)}));return function(y){return v.apply(this,arguments)}}(),b=function(g){l(g.fileList)};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(A.Z,{listType:"picture-card",accept:".jpg,.jpeg,.png,.gif,.bmp,.wbmp",customRequest:M,multiple:!0,itemRender:function(g,y,j,I){return(0,e.jsx)(me,{file:y,onPreview:I.preview,onRemove:I.remove})},showUploadList:{showPreviewIcon:!1,downloadIcon:(0,e.jsx)(D.Z,{}),showDownloadIcon:!0},fileList:h,iconRender:function(g){return(0,e.jsx)("a",{children:g.name})},onPreview:function(g){var y,j=((y=g.response)===null||y===void 0?void 0:y.id)||g.uid},onRemove:function(g){var y=g.uid;return x.Z.confirm({title:"\u786E\u8BA4",icon:(0,e.jsx)(W.Z,{}),content:"\u786E\u5B9A\u8981\u5220\u9664\u5F53\u524D\u56FE\u7247\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){n.deleteImage(y,i).then(function(I){I&&l(function(E){return(0,F.Z)(E.filter(function(H){var oe;return((oe=H.response)===null||oe===void 0?void 0:oe.id)||H.uid!==y}))})})}}),!1},onChange:b,children:p})})},xt=w.Z.TabPane,St=function(t){var n=t.onCancel,s=(0,P.IE)(),i=s.images[6];return(0,O.useEffect)(function(){s.loadFiles(6)},[]),(0,e.jsx)(x.Z,{onCancel:n,visible:!0,footer:!1,closable:!1,bodyStyle:{padding:"2px 5px",height:450,overflowY:"auto"},width:650,children:(0,e.jsxs)(w.Z,{defaultActiveKey:"1",className:"img-box-modal",children:[(0,e.jsx)(xt,{tab:"\u7D20\u6750\u56FE",children:(0,e.jsx)(he,{type:6,list:i||[]})},"bgi"),(0,e.jsx)(xt,{tab:"\u6A21\u677F",children:(0,e.jsx)(he,{type:2,list:[]})},"hi")]})})},Et=(0,Ie.Pi)(St);function Zt(){var r=(0,O.useState)(!1),t=(0,X.Z)(r,2),n=t[0],s=t[1],i=ce(),u=(0,O.useState)(!1),c=(0,X.Z)(u,2),h=c[0],l=c[1],p=(0,P.IE)(),M=function(){i.goPrevCanvasHistory()},b=function(){i.goNextCanvasHistory()},v=(0,O.useCallback)(function(){s(!n)},[n]),g=function(){i.emptyCanvas()},y=function(){Z().toBlob(document.getElementById("canvas"),{bgcolor:"white"}).then(function(I){I.name=p.name;var E=window.URL.createObjectURL(I),H=document.createElement("a");H.href=E,H.setAttribute("download",p.name+".png"),document.body.appendChild(H),H.click(),document.body.removeChild(H)}).catch(function(I){console.log(I)})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("ul",{className:U().main,children:[(0,e.jsxs)("li",{className:U().item,onClick:function(){return l(!0)},children:[(0,e.jsx)("span",{className:"".concat(U().chooseTemplateIcon),children:(0,e.jsx)(ee.MT,{infer:"Choose"})}),(0,e.jsx)("span",{className:U().txt,children:"\u7D20\u6750\u7BA1\u7406"})]}),(0,e.jsxs)("li",{className:U().item,onClick:M,children:[(0,e.jsx)("span",{className:le()(U().lastStep),children:(0,e.jsx)(ee.MT,{infer:"Undo"})}),(0,e.jsx)("span",{className:U().txt,children:"\u4E0A\u4E00\u6B65"})]}),(0,e.jsxs)("li",{className:U().item,onClick:b,children:[(0,e.jsx)("span",{className:le()(U().nextStep),children:(0,e.jsx)(ee.MT,{infer:"Redo"})}),(0,e.jsx)("span",{className:U().txt,children:"\u4E0B\u4E00\u6B65"})]}),(0,e.jsxs)("li",{className:U().item,onClick:g,children:[(0,e.jsx)("span",{className:le()(U().clearCanvasIcon),children:(0,e.jsx)(ee.MT,{infer:"Clear"})}),(0,e.jsx)("span",{className:U().txt,children:"\u6E05\u7A7A\u753B\u5E03"})]}),(0,e.jsxs)("li",{className:le()(U().item),onClick:y,children:[(0,e.jsx)("span",{className:le()(U().releaseIcon),children:(0,e.jsx)(ee.MT,{infer:"Publish"})}),(0,e.jsx)("span",{className:U().txt,children:"\u4E0B\u8F7D\u6D77\u62A5"})]})]}),n&&(0,e.jsx)(d,{openOrCloseTpl:v,globalCanvas:i}),h&&(0,e.jsx)(Et,{onCancel:function(){return l(!1)}})]})}function Nt(){var r=ce(),t=r.getCanvasStyle(),n=r.getCmps(),s=(0,O.useState)(null),i=(0,X.Z)(s,2),u=i[0],c=i[1],h=(0,O.useRef)();(0,O.useEffect)(function(){var b=h.current.getBoundingClientRect();c(b);var v=function(y){["canvas","root","app","content","editCmp"].indexOf(y.target.id)>-1&&r.setSelectedCmp(null)};document.getElementById("root").addEventListener("click",v)},[r]);var l=function(v){v.preventDefault(),v.stopPropagation()},p=function(v){v.preventDefault(),v.stopPropagation()},M=function(v){v.preventDefault(),v.stopPropagation();var g=v.dataTransfer.getData("add-component");if(g){g=JSON.parse(g);var y=v.pageY-u.top-15,j=v.pageX-u.left-40,I=(0,f.Z)((0,f.Z)({},g),{},{data:(0,f.Z)((0,f.Z)({},g.data),{},{style:(0,f.Z)((0,f.Z)({},g.data.style),{},{top:y,left:j})})});r.addCmp(I)}else{var E=v.dataTransfer.getData("startPos");E=JSON.parse(E);var H=v.pageX-E.pageX,oe=v.pageY-E.pageY,Se=r.getSelectedCmp(),ve=Se.data.style.top+oe,dt=Se.data.style.left+H;r.updateSelectedCmpStyle({top:ve,left:dt})}};return(0,e.jsxs)("div",{id:"content",className:Me().main,children:[(0,e.jsx)(Zt,{}),(0,e.jsx)("div",{className:Me().canvas,id:"canvas",style:(0,f.Z)((0,f.Z)({},te(t)),{},{backgroundImage:"url(".concat(t.backgroundImage,")")}),ref:h,onDragEnter:l,onDragOver:l,onDragLeave:p,onDrop:M,children:h.current&&n.map(function(b,v){return b.data?(0,e.jsx)(ke,{index:v},b.onlyKey):null})})]})}var Dt=Nt,yt=a(32059),He=a(73311),Ft=a(80592),ue=a.n(Ft);function It(r){var t=r.globalCanvas,n=t.getCanvasStyle(),s=function(u,c){var h=c.name,l=c.value;u&&(u.stopPropagation(),u.preventDefault()),t.updateCanvasStyle((0,yt.Z)({},h,l))};return(0,e.jsx)("div",{className:ue().main,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:ue().title,children:[(0,e.jsx)("span",{className:"iconfont icon-shuxing".concat(" ",ue().attributeIcon)}),(0,e.jsx)("span",{className:ue().attribute,children:"\u753B\u5E03\u5C5E\u6027"})]}),n.width!==void 0&&(0,e.jsx)(Te,{label:"\u753B\u5E03\u5BBD\u5EA6(px)",children:(0,e.jsx)("input",{className:ue().itemRight,type:"number",value:n.width,onChange:function(u){return s(u,{name:"width",value:u.target.value})}})}),n.height!==void 0&&(0,e.jsx)(Te,{label:"\u753B\u5E03\u9AD8\u5EA6(px)",children:(0,e.jsx)("input",{className:ue().itemRight,type:"number",value:n.height,onChange:function(u){return s(u,{name:"height",value:u.target.value})}})}),n.backgroundColor!==void 0&&(0,e.jsx)(Te,{label:"\u80CC\u666F\u989C\u8272",children:(0,e.jsx)(He.ZP,{className:ue().itemRight,initialValue:n.backgroundColor,onChange:function(u){return s(null,{name:"backgroundColor",value:u.hex})},placement:"right"})}),n.backgroundImage!==void 0&&(0,e.jsx)(Te,{label:"\u80CC\u666F\u56FE\u7247",children:(0,e.jsx)("input",{className:ue().itemRight,type:"text",value:n.backgroundImage,onChange:function(u){return s(u,{name:"backgroundImage",value:u.target.value})}})})]})})}function Te(r){var t=r.label,n=r.children;return(0,e.jsxs)("div",{className:ue().item,children:[(0,e.jsx)("label",{children:t}),n]})}var Bt=a(52890),T=a.n(Bt);function Rt(r){var t=r.selectedCmp,n=r.globalCanvas,s=t.data,i=s.style,u=function(l){l.stopPropagation(),l.preventDefault();var p=l.target.value;n.updateSelectedCmpValue(p)},c=function(l,p){var M=p.name,b=p.value;l&&(l.stopPropagation(),l.preventDefault());var v=(0,yt.Z)({},M,b);M==="animationName"&&(b===""?Object.assign(v,{animationDelay:0,animationDuration:0,animationIterationCount:0}):i.animationName||Object.assign(v,{animationDelay:0,animationDuration:1,animationIterationCount:1})),n.updateSelectedCmpStyle(v)};return(0,e.jsxs)("div",{id:"editCmp",className:T().main,children:[(0,e.jsx)("div",{className:T().title,children:t.desc}),s.value!==void 0&&(0,e.jsx)(z,{label:t.desc==="\u56FE\u7247"?"\u56FE\u7247\u5730\u5740":"\u63CF\u8FF0",children:(0,e.jsx)("input",{className:T().itemRight,type:"text",value:s.value,onChange:function(l){return u(l)}})}),i.fontSize!==void 0&&(0,e.jsx)(z,{label:"\u5B57\u4F53\u5927\u5C0F",children:(0,e.jsx)("input",{className:T().itemRight,type:"number",value:i.fontSize,onChange:function(l){return c(l,{name:"fontSize",value:l.target.value})}})}),["\u6587\u672C","\u6309\u94AE"].indexOf(t.desc)>-1&&(0,e.jsx)(z,{label:"\u5B57\u4F53\u7C97\u7EC6",children:(0,e.jsxs)("select",{className:T().itemRight,value:i.fontWeight,onChange:function(l){c(l,{name:"fontWeight",value:l.target.value})},children:[(0,e.jsx)("option",{value:"normal",children:"normal"}),(0,e.jsx)("option",{value:"bold",children:"bold"}),(0,e.jsx)("option",{value:"lighter",children:"lighter"})]})}),i.lineHeight!==void 0&&(0,e.jsx)(z,{label:"\u884C\u9AD8",children:(0,e.jsx)("input",{className:T().itemRight,type:"number",value:i.lineHeight,onChange:function(l){return c(l,{name:"lineHeight",value:l.target.value})}})}),i.textAlign!==void 0&&(0,e.jsx)(z,{label:"\u5BF9\u9F50",children:(0,e.jsxs)("select",{className:T().itemRight,value:i.textAlign,onChange:function(l){c(l,{name:"textAlign",value:l.target.value})},children:[(0,e.jsx)("option",{value:"left",children:"\u5C45\u5DE6"}),(0,e.jsx)("option",{value:"center",children:"\u5C45\u4E2D"}),(0,e.jsx)("option",{value:"right",children:"\u5C45\u53F3\u8FB9"})]})}),i.borderRadius!==void 0&&(0,e.jsx)(z,{label:"\u5706\u89D2",children:(0,e.jsx)("input",{className:T().itemRight,type:"text",value:i.borderRadius,onChange:function(l){return c(l,{name:"borderRadius",value:l.target.value})}})}),(0,e.jsx)(z,{label:"\u8FB9\u6846\u6837\u5F0F",children:(0,e.jsxs)("select",{className:T().itemRight,value:i.borderStyle,onChange:function(l){c(l,{name:"borderStyle",value:l.target.value})},children:[(0,e.jsx)("option",{value:"none",children:"none"}),(0,e.jsx)("option",{value:"dashed",children:"dashed"}),(0,e.jsx)("option",{value:"dotted",children:"dotted"}),(0,e.jsx)("option",{value:"double",children:"double"}),(0,e.jsx)("option",{value:"groove",children:"groove"}),(0,e.jsx)("option",{value:"hidden",children:"hidden"}),(0,e.jsx)("option",{value:"solid",children:"solid"})]})}),(0,e.jsx)(z,{label:"\u8FB9\u6846\u5BBD\u5EA6",children:(0,e.jsx)("input",{className:T().itemRight,type:"number",value:i.borderWidth,onChange:function(l){return c(l,{name:"borderWidth",value:l.target.value})}})}),(0,e.jsx)(z,{label:"\u8FB9\u6846\u989C\u8272",children:(0,e.jsx)(He.ZP,{className:T().itemRight,initialValue:i.borderColor||"#ffffff00",onChange:function(l){return c(null,{name:"borderColor",value:l.hex})},placement:"right"})}),i.color!==void 0&&(0,e.jsx)(z,{label:"\u5B57\u4F53\u989C\u8272",children:(0,e.jsx)(He.ZP,{className:T().itemRight,initialValue:i.color,onChange:function(l){return c(null,{name:"color",value:l.hex})},placement:"right"})}),i.backgroundColor!==void 0&&(0,e.jsx)(z,{label:"\u80CC\u666F\u989C\u8272",children:(0,e.jsx)(He.ZP,{className:T().itemRight,initialValue:i.backgroundColor,onChange:function(l){return c(null,{name:"backgroundColor",value:l.hex})},placement:"right"})}),(0,e.jsx)(z,{label:"\u52A8\u753B\u540D\u79F0",children:(0,e.jsxs)("select",{className:T().itemRight,value:i.animationName,onChange:function(l){c(l,{name:"animationName",value:l.target.value})},children:[(0,e.jsx)("option",{value:"",children:"\u65E0\u52A8\u753B"}),(0,e.jsx)("option",{value:"toggle",children:"\u95EA\u70C1"}),(0,e.jsx)("option",{value:"jello",children:"\u679C\u51BB"}),(0,e.jsx)("option",{value:"shake",children:"\u6296\u52A8"}),(0,e.jsx)("option",{value:"wobble",children:"\u5DE6\u53F3\u6447\u6446"})]})}),i.animationName&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(z,{label:"\u52A8\u753B\u6301\u7EED\u65F6\u957F(s)",children:(0,e.jsx)("input",{className:T().itemRight,type:"number",value:i.animationDuration,onChange:function(l){return c(l,{name:"animationDuration",value:l.target.value})}})}),(0,e.jsxs)(z,{label:"\u52A8\u753B\u5FAA\u73AF\u6B21\u6570",children:[(0,e.jsx)("button",{className:le()("iconfont icon-wuqiongda",{selected:i.animationIterationCount==="infinite"}),onClick:function(l){return c(l,{name:"animationIterationCount",value:i.animationIterationCount==="infinite"?1:"infinite"})}}),(0,e.jsx)("input",{className:T().itemRight,type:"number",disabled:i.animationIterationCount!=="infinite",value:i.animationIterationCount,onChange:function(l){return c(l,{name:"animationIterationCount",value:l.target.value})}})]}),(0,e.jsx)(z,{label:"\u52A8\u753B\u5EF6\u8FDF\u65F6\u95F4(s)",children:(0,e.jsx)("input",{className:T().itemRight,type:"number",value:i.animationDelay,onChange:function(l){return c(l,{name:"animationDelay",value:l.target.value})}})}),i.animationIterationCount==="infinite"&&(0,e.jsxs)("button",{className:T().pouseAnimation,onClick:function(l){return c(l,{name:"animationPlayState",value:i.animationPlayState!=="running"?"running":"paused"})},children:[i.animationPlayState!=="running"?"\u6682\u505C":"\u5F00\u59CB","\u52A8\u753B\u6F14\u793A"]})]})]})}function z(r){var t=r.label,n=r.children;return(0,e.jsxs)("div",{className:T().item,children:[(0,e.jsx)("label",{children:t}),n]})}var jt=function(r){(0,be.Z)(n,r);var t=(0,Ye.Z)(n);function n(){var s;(0,_.Z)(this,n);for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];return s=t.call.apply(t,[this].concat(u)),s.onStoreChange=function(){s.forceUpdate()},s}return(0,pe.Z)(n,[{key:"componentDidMount",value:function(){this.unregister=this.context.registerStoreChangeCmps(this)}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"render",value:function(){var i=this.context.getSelectedCmp();return i?(0,e.jsx)(Rt,(0,f.Z)((0,f.Z)({},this.props),{},{selectedCmp:i,globalCanvas:this.context})):(0,e.jsx)(It,{globalCanvas:this.context})}}]),n}(O.Component);jt.contextType=Ee;var At=function r(){var t=this;(0,_.Z)(this,r),this.cmpsEntity=void 0,this.defaultCanvas=void 0,this.canvas=void 0,this.canvasChangeHistory=void 0,this.canvasIndex=void 0,this.listeners=void 0,this.selectedCmp=void 0,this.storeChangeCmps=void 0,this.getCanvasData=function(){return(0,f.Z)({},t.canvas)},this.goPrevCanvasHistory=function(){var n=t.canvasIndex-1<0?0:t.canvasIndex-1;if(n!==t.canvasIndex&&t.canvasChangeHistory[n]){t.canvasIndex=n;var s=t.canvasChangeHistory[n];t.canvas=s,t.runListeners()}},this.goNextCanvasHistory=function(){var n=t.canvasIndex+1>t.canvasChangeHistory.length-1?t.canvasChangeHistory.length-1:t.canvasIndex+1;if(n!==t.canvasIndex&&t.canvasChangeHistory[n]){t.canvasIndex=n;var s=t.canvasChangeHistory[n];t.canvas=s,t.runListeners()}},this.recordCanvasChangeHistory=function(){t.canvasChangeHistory.push(t.canvas),t.canvasIndex=t.canvasChangeHistory.length-1},this.getCanvasStyle=function(){return(0,f.Z)({},t.canvas.style)},this.updateCanvas=function(n){t.selectedCmp=null,t.canvas=(0,f.Z)({},n),t.runListeners(),t.recordCanvasChangeHistory()},this.emptyCanvas=function(){t.canvas=(0,f.Z)({},t.defaultCanvas),t.runListeners(),t.recordCanvasChangeHistory()},this.updateCanvasStyle=function(n){var s=(0,f.Z)((0,f.Z)({},t.canvas),{},{style:(0,f.Z)((0,f.Z)({},t.getCanvasStyle()),n)});JSON.stringify(s)!==JSON.stringify(t.canvas)&&(t.canvas=s,t.runListeners(),t.recordCanvasChangeHistory())},this.registerStoreChangeCmps=function(n){return t.storeChangeCmps.push(n),function(){t.storeChangeCmps=t.storeChangeCmps.filter(function(s){return n.onlyKey!==s.onlyKey})}},this.registerCmpsEntity=function(n,s){return t.cmpsEntity.set(n,s),function(){return t.cmpsEntity.delete(n)}},this.forceCmpsUpdate=function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];s.forEach(function(u){var c;(c=t.cmpsEntity.get(u.onlyKey))===null||c===void 0||c.onStoreChange()}),t.storeChangeCmps.forEach(function(u){var c=u.onStoreChange;return c()})},this.getCmp=function(n){var s=t.getCmps();return(0,f.Z)({},s[n])},this.getCmps=function(){return(0,F.Z)(t.canvas.cmps)},this.setCmps=function(n){t.canvas=(0,f.Z)((0,f.Z)({},t.canvas),{},{cmps:n})},this.updateCmps=function(n){t.setCmps(n),t.runListeners(),t.recordCanvasChangeHistory()},this.addCmp=function(n){t.selectedCmp=(0,f.Z)((0,f.Z)({},n),{},{onlyKey:mt()});var s=t.getCmps();t.updateCmps([].concat((0,F.Z)(s),[t.selectedCmp]))},this.updateCmp=function(n){for(var s=t.getCmps(),i=0;i<s.length;i++)if(s[i].onlyKey===n.onlyKey){s[i]=n;break}t.setCmps(s),t.forceCmpsUpdate(n)},this.getSelectedCmp=function(){return t.selectedCmp},this.setSelectedCmp=function(n){if(t.selectedCmp!==n){var s=[];t.selectedCmp&&s.push(t.selectedCmp),t.selectedCmp=n,t.selectedCmp&&s.push(t.selectedCmp),t.forceCmpsUpdate.apply(t,s)}},this.updateSelectedCmpStyle=function(n,s){var i=t.getSelectedCmp(),u=(0,f.Z)((0,f.Z)({},i),{},{data:(0,f.Z)((0,f.Z)({},i.data),{},{style:(0,f.Z)((0,f.Z)({},i.data.style),n)})});JSON.stringify(u)!==JSON.stringify(t.selectedCmp)&&(t.selectedCmp=u,t.updateCmp(u),s||t.recordCanvasChangeHistory())},this.updateSelectedCmpValue=function(n){var s=t.getSelectedCmp(),i=(0,f.Z)((0,f.Z)({},s),{},{data:(0,f.Z)((0,f.Z)({},s.data),{},{value:n})});t.selectedCmp=i,t.updateCmp(i),t.recordCanvasChangeHistory()},this.deleteSelectedCmp=function(n){t.setSelectedCmp(null);var s=t.getCmps();t.updateCmps(s.filter(function(i){return i.onlyKey!==n.onlyKey}))},this.changeCmpIndex=function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getCmps().length-1;if(n!==s){var i=t.getCmps(),u=i[n];i[n]=i[s],i[s]=u,t.updateCmps(i)}},this.runListeners=function(){t.listeners.forEach(function(n){return n()})},this.subscribe=function(n){return t.listeners.push(n),function(){t.listeners=t.listeners.filter(function(s){return s!==n})}},this.getCanvas=function(){var n=["getCanvasData","recordCanvasChangeHistory","goPrevCanvasHistory","goNextCanvasHistory","updateCanvas","emptyCanvas","getCanvasStyle","updateCanvasStyle","registerStoreChangeCmps","registerCmpsEntity","getCmp","getCmps","setCmps","addCmp","getSelectedCmp","setSelectedCmp","updateSelectedCmpStyle","updateSelectedCmpValue","deleteSelectedCmp","changeCmpIndex","subscribe"],s={};return n.forEach(function(i){s[i]=t[i]}),s},this.cmpsEntity=new Map,this.defaultCanvas={style:{width:320,height:568,backgroundColor:"#ffffff00",backgroundImage:"",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",boxSizing:"content-box"},cmps:[]},this.canvas=(0,f.Z)({},this.defaultCanvas),this.canvasChangeHistory=[],this.canvasIndex=-1,this.listeners=[],this.selectedCmp=null,this.storeChangeCmps=[]};function wt(r){var t=(0,O.useRef)();if(!t.current)if(r)t.current=r;else{var n=new At;t.current=n.getCanvas()}return t.current}function Pt(){var r=G(),t=(0,P.IE)(),n=wt();return(0,O.useEffect)(function(){t.loadFiles(o.__.PosterImage)},[]),(0,O.useLayoutEffect)(function(){var s=n.subscribe(function(){r()});return function(){s()}},[n,r]),(0,e.jsx)("div",{className:"survey-poster",children:(0,e.jsxs)(Ee.Provider,{value:n,children:[(0,e.jsx)(Xe,{}),(0,e.jsx)(Dt,{}),(0,e.jsx)(jt,{})]})})}},24025:function(B,Fe,a){"use strict";a.d(Fe,{KL:function(){return Ke},M6:function(){return vt},yX:function(){return it},kJ:function(){return Me},cg:function(){return ct},rs:function(){return q},q1:function(){return ke},qo:function(){return Ne},Jg:function(){return Pe}});var O=a(63185),X=a(80937),P=a(67294),o=a(85893),Ie=function(m){var d=m.children,C=_objectWithoutProperties(m,["children"]),Z=function(x){return _jsx(_Checkbox,{checked:x.value,onChange:function(w){x.onChange(w.target.checked)},children:d})};return _jsx(Field,_objectSpread({component:[Z]},C))},f=a(47673),Ee=function(m){var d=m.children,C=m.style,Z=_objectWithoutProperties(m,["children","style"]),N=function(S){return _jsx(_Input,{value:S.value,style:C,onChange:function(L){S.onChange(L.target.value)},children:d})};return _jsx(Field,_objectSpread({component:[N]},Z))},k=a(11849),mt=a(71194),te=a(50146),ht=a(57663),K=a(71577),Ue=a(77576),fe=a(12028),bt=a(22385),ge=a(31097),G=a(94657),ce=a(63439),de=a(84387),Qe=a(54531),e=a(11628),Be=function(m){var d=m.value,C=m.onChange,Z=(0,P.useState)(!1),N=(0,G.Z)(Z,2),x=N[0],S=N[1],w=(0,e.IE)(),L=(0,P.useRef)(null);return(0,P.useEffect)(function(){console.log(d),d||S(!1)},[d]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-item-switch",children:[(0,o.jsxs)("span",{children:["\u8BBE\u7F6E\u95EE\u5377\u9ED8\u8BA4\u7B54\u6848",(0,o.jsx)(ge.Z,{overlay:"\u8BBE\u7F6E\u7684\u7B54\u6848\u5C06\u4F5C\u4E3A\u9ED8\u8BA4\u7B54\u6848\u5E26\u5165\u95EE\u5377",children:(0,o.jsx)(de.Z,{className:"setting-prompt"})})]}),(0,o.jsx)(fe.Z,{checked:!!d,onChange:function(F){F?S(!0):C(void 0)}})]}),(x||!!d)&&(0,o.jsx)("div",{className:"setting-item-content",children:(0,o.jsx)(K.Z,{onClick:function(){return S(!0)},style:{marginLeft:10},type:"dashed",children:d?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),x&&(0,o.jsx)(te.Z,{visible:!0,onCancel:function(){return S(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){var F;C((0,Qe.ZN)((F=L.current)===null||F===void 0?void 0:F.getValues())),S(!1)},children:w.schema?(0,o.jsx)(ce.Z,{ref:L,initialValues:d,schema:w.schema,footerVisible:!1}):"\u95EE\u5377\u4E3A\u7A7A"})]})},vt=function(m){return(0,o.jsx)(X.gN,(0,k.Z)({component:[Be]},m))},We=a(74118),Ve=function(m){var d=m.value,C=m.onChange,Z=(0,P.useState)(!1),N=(0,G.Z)(Z,2),x=N[0],S=N[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-item-switch",children:[(0,o.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u9875\u9762",(0,o.jsx)(ge.Z,{overlay:"\u4F60\u53EF\u4EE5\u5728\u8868\u5355\u63D0\u4EA4\u9875\u9762\u8BBE\u7F6E\u66F4\u4E3A\u4E30\u5BCC\u591A\u5F69\u7684\u5185\u5BB9\uFF0C\u5305\u62EC\u63D2\u5165\u56FE\u7247\u3001\u8BBE\u7F6E\u5B57\u53F7\u3001\u5B57\u4F53\u989C\u8272\u3001\u5E8F\u53F7\u3001\u8BBE\u7F6E\u8D85\u94FE\u63A5\u7B49\u7B49\u3002",children:(0,o.jsx)(de.Z,{className:"setting-prompt"})})]}),(0,o.jsx)(fe.Z,{checked:!!d,onChange:function(L){L?S(!0):C(void 0)}})]}),(x||!!d)&&(0,o.jsx)("div",{className:"setting-item-content",children:(0,o.jsx)(K.Z,{onClick:function(){return S(!0)},style:{marginLeft:10},type:"dashed",children:d?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),x&&(0,o.jsx)(We.cM,{value:d,title:"\u63D0\u4EA4\u540E\u56FE\u6587\u5C55\u793A",width:750,onChange:function(L){C(L),S(!1)},onClose:function(){S(!1)}})]})},Ke=function(m){return(0,o.jsx)(X.gN,(0,k.Z)({component:[Ve]},m))},q=function(m){var d=function(Z){return(0,o.jsx)(fe.Z,{checked:Z.value,onChange:function(x){Z.onChange(x)}})};return(0,o.jsx)(X.gN,(0,k.Z)({component:[d]},m))},Ze=a(93224),ft=a(77883),Re=a(85482),gt=a(43358),ze=a(97268),ie=function(m){var d=m.value,C=m.onChange,Z=m.title,N=m.tooltip,x=(0,P.useState)(!!d),S=(0,G.Z)(x,2),w=S[0],L=S[1];return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-item-switch",children:[(0,o.jsxs)("span",{children:[Z,(0,o.jsx)(ge.Z,{overlay:N,children:(0,o.jsx)(de.Z,{className:"setting-prompt"})})]}),(0,o.jsx)(fe.Z,{checked:!!d,onChange:function(F){F?(L(!0),C({limitFreq:"only",limitNum:1})):(L(!1),C(void 0))}})]}),w&&(0,o.jsx)("div",{className:"setting-item-content",children:(0,o.jsxs)("div",{children:[(0,o.jsx)(ze.Z,{style:{width:100},value:d==null?void 0:d.limitFreq,onChange:function(F){return C({limitFreq:F,limitNum:(d==null?void 0:d.limitNum)||1})},options:[{label:"\u53EA\u80FD",value:"only"},{label:"\u6BCF\u5C0F\u65F6",value:"hour"},{label:"\u6BCF\u5929",value:"day"},{label:"\u6BCF\u81EA\u7136\u5468",value:"week"},{label:"\u6BCF\u81EA\u7136\u6708",value:"month"},{label:"\u6BCF\u5B63\u5EA6",value:"quarter"},{label:"\u6BCF\u81EA\u7136\u5E74",value:"year"}]}),(0,o.jsx)("span",{style:{margin:"0 10px"},children:"\u7B54\u9898"}),(0,o.jsx)(Re.Z,{min:1,max:9999,defaultValue:1,value:d==null?void 0:d.limitNum,onChange:function(F){return C({limitNum:F,limitFreq:(d==null?void 0:d.limitFreq)||"only"})}}),(0,o.jsx)("span",{style:{margin:"0 10px"},children:"\u6B21"})]})})]})})},Ne=function(m){var d=m.name,C=m.basePath,Z=(0,Ze.Z)(m,["name","basePath"]);return(0,o.jsx)(X.gN,{component:[ie,Z],name:d,basePath:C})},Ae=function(){var m=function(C){var Z=C.value,N=C.onChange;return Z===1?_jsx(_Button,{type:"primary",icon:_jsx(CaretRightOutlined,{}),onClick:function(){return N(0)},children:"\u6B63\u5728\u56DE\u6536"}):_jsx(_Button,{type:"primary",danger:!0,icon:_jsx(PauseOutlined,{}),onClick:function(){return N(1)},children:"\u6682\u505C\u56DE\u6536"})};return _jsx(Field,{name:"status",component:[m],basePath:""})},Ce=a(59250),xe=a(13013),pt=a(30887),ee=a(54689),ye=a(3182),je=a(4107),Xe=a(94043),_=a.n(Xe),pe=a(92592),be=a(83279),Ye=a(20136),Je=a(55241),se=a(49111),we=a(19650),$e=a(54977),Ge=a(23538),qe=a(73171),_e=a(71211),et=je.Z.Search;function tt(R){return"".concat(window.location.origin,"/s/").concat(R)}var nt=function(m){var d=m.item,C=m.onChange,Z=m.onDelete,N=(0,e.IE)(),x=d.url,S=(0,P.useState)(""),w=(0,G.Z)(S,2),L=w[0],A=w[1],F=(0,P.useRef)(null),$=(0,e.IE)(),Y=(0,P.useState)(!1),V=(0,G.Z)(Y,2),ne=V[0],ae=V[1];(0,P.useEffect)(function(){function D(){return W.apply(this,arguments)}function W(){return W=(0,ye.Z)(_().mark(function De(){return _().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:pe.toDataURL(x,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(me){A(me)}).catch(function(me){console.error(me)});case 1:case"end":return re.stop()}},De)})),W.apply(this,arguments)}D()},[x]);var Q=(0,P.useCallback)(function(){var D=(0,ye.Z)(_().mark(function W(De){return _().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:pe.toDataURL(x,{errorCorrectionLevel:"H",margin:5,width:De}).then(function(me){A(me);var he=document.createElement("a");he.href=me,he.setAttribute("download","".concat(N.name,"_").concat(De,".png")),document.body.appendChild(he),he.click(),document.body.removeChild(he)});case 1:case"end":return re.stop()}},W)}));return function(W){return D.apply(this,arguments)}}(),[x,N]);return(0,o.jsxs)("div",{style:{border:"1px solid #d9d9d9",margin:"5px 0",padding:"8px 4px"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(je.Z,{value:d.name,style:{width:200},placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",onChange:function(W){return C((0,k.Z)((0,k.Z)({},d),{},{name:W.target.value}))}}),(0,o.jsxs)(we.Z,{children:[(0,o.jsx)(K.Z,{icon:(0,o.jsx)($e.Z,{}),onClick:function(){return ae(!0)}}),(0,o.jsx)(Je.Z,{content:(0,o.jsxs)("div",{children:[(0,o.jsx)("img",{src:L,height:150,width:150}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsxs)(we.Z,{children:[(0,o.jsx)(K.Z,{size:"small",type:"link",onClick:function(){return Q(256)},children:"\u5C0F\u53F7"}),(0,o.jsx)(K.Z,{size:"small",type:"link",onClick:function(){return Q(512)},children:"\u4E2D\u53F7"}),(0,o.jsx)(K.Z,{size:"small",type:"link",onClick:function(){return Q(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(N.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click"],children:(0,o.jsx)(K.Z,{icon:(0,o.jsx)(Ge.Z,{})})}),(0,o.jsx)(K.Z,{icon:(0,o.jsx)(qe.Z,{}),onClick:function(){return Z(d.id)}})]})]}),(0,o.jsx)(et,{value:x,style:{margin:"5px 0 0 0"},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(N.id,"?id=").concat(d.id))}}),(0,o.jsx)(te.Z,{visible:ne,onCancel:function(){return ae(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){ae(!1)},children:$.schema&&(0,o.jsx)(ce.Z,{ref:F,initialValues:d.value,schema:$.schema,footerVisible:!1,onSubmit:function(W){console.log(W)}})})]})},at=function(m){var d=m.visible,C=m.onClose,Z=(0,P.useState)([]),N=(0,G.Z)(Z,2),x=N[0],S=N[1],w=(0,e.IE)();return(0,o.jsxs)(te.Z,{visible:d,onCancel:C,title:"\u5E26\u503C\u94FE\u63A5\u8BBE\u7F6E",maskClosable:!1,bodyStyle:{maxHeight:360,overflow:"auto"},children:[x.map(function(L){return(0,o.jsx)(nt,{item:L,onChange:function(F){var $=x.findIndex(function(Y){return Y.id===F.id});x.splice($,1,F),S((0,be.Z)(x))},onDelete:function(F){S((0,be.Z)(x.filter(function($){return $.id!==F})))}},L.id)}),(0,o.jsx)(K.Z,{block:!0,type:"primary",ghost:!0,onClick:function(){var A=(0,_e.Ox)();x.push({id:A,url:"".concat(tt(w.id),"?id=").concat(A)}),S((0,be.Z)(x))},children:"\u6DFB\u52A0"})]})},ot=je.Z.Search;function Pe(R){return"".concat(window.location.origin,"/s/").concat(R)}var it=function(){var m=(0,e.IE)(),d=Pe(m.id),C=(0,P.useState)(""),Z=(0,G.Z)(C,2),N=Z[0],x=Z[1],S=(0,P.useState)(!1),w=(0,G.Z)(S,2),L=w[0],A=w[1];(0,P.useEffect)(function(){function Y(){return V.apply(this,arguments)}function V(){return V=(0,ye.Z)(_().mark(function ne(){return _().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:pe.toDataURL(d,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(D){x(D)}).catch(function(D){console.error(D)});case 1:case"end":return Q.stop()}},ne)})),V.apply(this,arguments)}Y()},[d]);var F=(0,P.useCallback)(function(){var Y=(0,ye.Z)(_().mark(function V(ne){return _().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:pe.toDataURL(d,{errorCorrectionLevel:"H",margin:5,width:ne}).then(function(D){x(D);var W=document.createElement("a");W.href=D,W.setAttribute("download","".concat(m.name,"_").concat(ne,".png")),document.body.appendChild(W),W.click(),document.body.removeChild(W)});case 1:case"end":return Q.stop()}},V)}));return function(V){return Y.apply(this,arguments)}}(),[d,m]),$=(0,o.jsxs)(ee.Z,{onClick:function(V){return F(parseInt(V.key))},children:[(0,o.jsx)(ee.Z.Item,{children:"\u5C0F\u53F7"},256),(0,o.jsx)(ee.Z.Item,{children:"\u4E2D\u53F7"},512),(0,o.jsx)(ee.Z.Item,{children:"\u5927\u53F7"},1024)]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"setting-item-switch",children:[(0,o.jsx)("span",{children:"\u95EE\u5377\u94FE\u63A5"}),(0,o.jsx)(ot,{value:d,style:{width:300},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(m.id))}})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:10},children:[(0,o.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:100,height:100},children:(0,o.jsx)("img",{src:N,height:95,width:95})}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,o.jsx)(xe.Z,{overlay:$,placement:"bottomLeft",children:(0,o.jsx)(K.Z,{children:"\u4E0B\u8F7D\u4E8C\u7EF4\u7801"})}),(0,o.jsxs)(K.Z,{type:"primary",ghost:!0,style:{marginTop:10,visibility:"hidden"},onClick:function(){return A(!0)},children:["\u5E26\u503C\u94FE\u63A5",(0,o.jsx)(ge.Z,{overlay:"\u94FE\u63A5\u6DFB\u52A0\u53C2\u6570\uFF0C\u5C06\u81EA\u52A8\u5E94\u7528\u4E3A\u95EE\u5377\u7684\u7B54\u6848\u3002",children:(0,o.jsx)(de.Z,{className:"setting-prompt",style:{color:"#1891ff"}})})]})]}),(0,o.jsx)(at,{visible:L,onClose:function(){return A(!1)}})]})]})},Ct=a(14965),st=a(77121),le=a(30381),lt=a.n(le),J=function(m){var d=m.value,C=m.onChange,Z=m.title,N=m.tooltip,x=m.type,S=x===void 0?"text":x,w=m.prefix,L=m.suffix,A=m.style,F=(0,P.useState)(d!==void 0),$=(0,G.Z)(F,2),Y=$[0],V=$[1];(0,P.useEffect)(function(){d!==void 0&&V(!0)},[d]);var ne=function(){return S==="datepicker"?(0,o.jsx)(st.Z,{value:d?lt()(d):void 0,showTime:!0,style:A,onChange:function(D){C(D?D==null?void 0:D.valueOf():void 0)}}):S==="number"?(0,o.jsx)(Re.Z,{value:d,onChange:function(D){return C(D)},style:(0,k.Z)({width:200},A)}):(0,o.jsx)(je.Z,{value:d,onChange:function(D){return C(D.target.value)},style:(0,k.Z)({width:200},A)})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-item-switch",children:[(0,o.jsxs)("span",{children:[Z,(0,o.jsx)(ge.Z,{overlay:N,children:(0,o.jsx)(de.Z,{className:"setting-prompt"})})]}),(0,o.jsx)(fe.Z,{checked:d!==void 0,onChange:function(Q){Q?(V(!0),C("")):(V(!1),C(void 0))}})]}),Y&&(0,o.jsxs)("div",{className:"setting-item-content",children:[w,ne(),L]})]})})},ke=function(m){var d=m.name,C=m.basePath,Z=(0,Ze.Z)(m,["name","basePath"]);return(0,o.jsx)(X.gN,{component:[J,Z],name:d,basePath:C})},Le=a(25782),rt=a(69816),Me=function(){var m=function(C){var Z=C.value,N=C.onChange;return Z===1?(0,o.jsx)(K.Z,{type:"primary",icon:(0,o.jsx)(Le.Z,{}),onClick:function(){return N(0)},children:"\u6B63\u5728\u56DE\u6536"}):(0,o.jsx)(K.Z,{type:"primary",danger:!0,icon:(0,o.jsx)(rt.Z,{}),onClick:function(){return N(1)},children:"\u6682\u505C\u56DE\u6536"})};return(0,o.jsx)(X.gN,{component:[m],name:"status",basePath:""})},ut=a(1997),U=function(m){var d=m.value,C=m.onChange,Z=(0,P.useState)(!1),N=(0,G.Z)(Z,2),x=N[0],S=N[1],w=(0,e.IE)(),L=w.schema;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-item-switch",children:[(0,o.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u94FE\u63A5",(0,o.jsx)(ge.Z,{overlay:"\u95EE\u5377\u4FDD\u5B58\u4E4B\u540E\uFF0C\u53EF\u4EE5\u8DF3\u8F6C\u5230\u6307\u5B9A\u94FE\u63A5\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u94FE\u63A5\u53C2\u6570\u3002",children:(0,o.jsx)(de.Z,{className:"setting-prompt"})})]}),(0,o.jsx)(fe.Z,{checked:!!d,onChange:function(F){F?S(!0):C(void 0)}})]}),(x||!!d)&&(0,o.jsx)("div",{className:"setting-item-content",children:(0,o.jsx)(K.Z,{onClick:function(){return S(!0)},style:{marginLeft:10},type:"dashed",children:d?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),x&&(0,o.jsx)(ut.tC,{value:d,schema:L,functionVisible:!1,title:"\u63D0\u4EA4\u540E\u81EA\u5B9A\u4E49\u8DF3\u8F6C\u94FE\u63A5",onOk:function(F){C(F),S(!1)},onCancel:function(){S(!1)}})]})},ct=function(m){return(0,o.jsx)(X.gN,(0,k.Z)({component:[U]},m))}},73420:function(B){B.exports={main:"main___21rJo"}},69851:function(B){B.exports={main:"main___135N1"}},68009:function(B){B.exports={main:"main___3fcDw"}},29011:function(B){B.exports={main:"main___3PlGX"}},11292:function(B){B.exports={main:"main___lXNcV"}},46133:function(B){B.exports={main:"main___UJX15",cmp:"cmp___2nkeC",cmpIcon:"cmpIcon___3_Wuh",cmpText:"cmpText___1uVZ6",close:"close___33Xtp",cmpTop:"cmpTop___15tlX",cmpList:"cmpList___2VkX2",detailList:"detailList___1CfRb"}},53384:function(B){B.exports={main:"main___2krr5",canvas:"canvas___-PTQi"}},97226:function(B){B.exports={main:"main___1pYX9",item:"item___1uSX4",desc:"desc___3xA87",thumbnail:"thumbnail___2-pjw"}},97427:function(B){B.exports={main:"main___2SoBw",unselected:"unselected___tqp--",stretch:"stretch___1n1Eg",rotate:"rotate___2a-x0",stretchDot:"stretchDot___25Yua"}},80592:function(B){B.exports={main:"main___349pA",attribute:"attribute___2xEX9",attributeIcon:"attributeIcon___3Nfw1",empty:"empty___jtunA",title:"title___umNfY",item:"item___3vdZZ",itemRight:"itemRight___177Zc"}},52890:function(B){B.exports={main:"main___G6HSt",empty:"empty___1A4Dv",title:"title___2ZOkC",item:"item___2dUEY",itemRight:"itemRight___2ThVu",pouseAnimation:"pouseAnimation___11Ht1"}},85939:function(B){B.exports={main:"main___3iBmI",close:"close___3MO16",item:"item___3OeSn",name:"name___2bVyY",thumbnail:"thumbnail___2vV0l"}},10781:function(B){B.exports={main:"main___2BWdq",item:"item___4osz2",release:"release___2RQrA",txt:"txt___IF_aZ"}}}]);
