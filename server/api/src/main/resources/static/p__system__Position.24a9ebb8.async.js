(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5382],{64317:function(G,L,e){"use strict";var h=e(22122),c=e(28991),p=e(81253),O=e(22270),P=e(67294),W=e(66758),y=e(60692),M=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],b=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],s=P.forwardRef(function(t,U){var _=t.fieldProps,E=t.children,R=t.params,g=t.proFieldProps,A=t.mode,o=t.valueEnum,C=t.request,n=t.showSearch,v=t.options,f=(0,p.Z)(t,M),Z=(0,P.useContext)(W.Z);return P.createElement(y.Z,(0,h.Z)({mode:"edit",valueEnum:(0,O.h)(o),request:C,params:R,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:v,mode:A,showSearch:n,getPopupContainer:Z.getPopupContainer},_),ref:U,proFieldProps:g},f),E)}),I=P.forwardRef(function(t,U){var _=t.fieldProps,E=t.children,R=t.params,g=t.proFieldProps,A=t.mode,o=t.valueEnum,C=t.request,n=t.options,v=(0,p.Z)(t,b),f=(0,c.Z)({options:n,mode:A||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},_),Z=(0,P.useContext)(W.Z);return P.createElement(y.Z,(0,h.Z)({mode:"edit",valueEnum:(0,O.h)(o),request:C,params:R,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({getPopupContainer:Z.getPopupContainer},f),ref:U,proFieldProps:g},v),E)}),u=s,T=I,m=u;m.SearchSelect=T,m.displayName="ProFormComponent",L.Z=m},5966:function(G,L,e){"use strict";var h=e(22122),c=e(81253),p=e(67294),O=e(60692),P=["fieldProps","proFieldProps"],W=["fieldProps","proFieldProps"],y="text",M=function(u){var T=u.fieldProps,m=u.proFieldProps,t=(0,c.Z)(u,P);return p.createElement(O.Z,(0,h.Z)({mode:"edit",valueType:y,fieldProps:T,filedConfig:{valueType:y},proFieldProps:m},t))},b=function(u){var T=u.fieldProps,m=u.proFieldProps,t=(0,c.Z)(u,W);return p.createElement(O.Z,(0,h.Z)({mode:"edit",valueType:"password",fieldProps:T,proFieldProps:m,filedConfig:{valueType:y}},t))},s=M;s.Password=b,s.displayName="ProFormComponent",L.Z=s},93279:function(G,L,e){"use strict";var h=e(28991),c=e(81253),p=e(59250),O=e(13013),P=e(57663),W=e(71577),y=e(30887),M=e(28682),b=e(84305),s=e(88182),I=e(57254),u=e(44545),T=e(94184),m=e.n(T),t=e(67294),U=e(32070),_=e.n(U),E=["key","name"],R=function(o){var C=o.children,n=o.menus,v=o.onSelect,f=o.className,Z=o.style,i=(0,t.useContext)(s.ZP.ConfigContext),F=i.getPrefixCls,K=F("pro-table-dropdown"),l=t.createElement(M.Z,{onClick:function(d){return v&&v(d.key)}},n==null?void 0:n.map(function(r){return t.createElement(M.Z.Item,{key:r.key},r.name)}));return t.createElement(O.Z,{overlay:l,className:m()(K,f)},t.createElement(W.Z,{style:Z},C," ",t.createElement(I.Z,null)))},g=function(o){var C=o.className,n=o.style,v=o.onSelect,f=o.menus,Z=f===void 0?[]:f,i=o.children,F=(0,t.useContext)(s.ZP.ConfigContext),K=F.getPrefixCls,l=K("pro-table-dropdown"),r=t.createElement(M.Z,{onClick:function(j){v==null||v(j.key)},items:Z.map(function(d){var j=d.key,x=d.name,a=(0,c.Z)(d,E);return(0,h.Z)((0,h.Z)({key:j},a),{},{title:a.title,label:x})})});return t.createElement(O.Z,{overlay:r,className:m()(l,C)},t.createElement("a",{style:n},i||t.createElement(u.Z,null)))};g.Button=R,L.Z=g},32070:function(){},59686:function(G,L,e){"use strict";e.r(L),e.d(L,{default:function(){return Z}});var h=e(57663),c=e(71577),p=e(3182),O=e(34792),P=e(48086),W=e(71194),y=e(50146),M=e(94657),b=e(94043),s=e.n(b),I=e(3980),u=e(57119),T=e(49101),m=e(99937),t=e(16894),U=e(93279),_=e(77613),E=e(67294),R=e(11849),g=e(64317),A=e(952),o=e(71975),C=e(5966),n=e(85893),v=(0,_.P)(function(i){var F=i.onOk,K=i.onClose,l=i.position,r=i.readonly,d=(0,E.useRef)(),j=!!(l!=null&&l.id),x=(0,I.m2)();return(0,n.jsxs)(o.a,{title:j?l!=null&&l.id?"\u4FEE\u6539\u9898\u5E93":"\u65B0\u589E\u9898\u5E93":"\u67E5\u770B\u9898\u5E93",formRef:d,visible:!0,initialValues:l,submitter:{submitButtonProps:{style:{display:r?"none":"block"}}},drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){K()}},onFinish:function(){var a=(0,p.Z)(s().mark(function S(B){var D;return s().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,x.saveOrUpdatePosition((0,R.Z)((0,R.Z)({},l),B));case 2:D=N.sent,D.success&&F();case 4:case"end":return N.stop()}},S)}));return function(S){return a.apply(this,arguments)}}(),children:[(0,n.jsxs)(A.ZP.Group,{children:[(0,n.jsx)(C.Z,{name:"name",width:"md",label:"\u5C97\u4F4D\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u540D\u79F0",readonly:r,required:!0,rules:[{required:!0,message:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,n.jsx)(C.Z,{width:"md",readonly:r,name:"code",label:"\u5C97\u4F4D\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0,message:"\u5C97\u4F4D\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],required:!0})]}),(0,n.jsx)(A.ZP.Group,{children:(0,n.jsx)(g.Z,{width:"md",readonly:r,request:(0,p.Z)(s().mark(function a(){return s().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",[{label:"\u672C\u4EBA",value:"SELF"},{label:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",value:"SELF_AND_SUB"},{label:"\u672C\u90E8\u95E8",value:"DEPT"},{label:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",value:"DEPT_AND_SUB"},{label:"\u5168\u90E8",value:"ALL"}]);case 1:case"end":return B.stop()}},a)})),name:"dataPermissionType",label:"\u6570\u636E\u6743\u9650"})})]})}),f=(0,_.P)(function(){var i=(0,I.m2)(),F=(0,E.useRef)(),K=(0,E.useState)(),l=(0,M.Z)(K,2),r=l[0],d=l[1];(0,E.useEffect)(function(){i.loadPermissions()},[i]);var j=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"name",ellipsis:!0,width:200},{title:"\u7F16\u7801",dataIndex:"code",hideInSearch:!0,width:150},{title:"\u6570\u636E\u6743\u9650",dataIndex:"dataPermissionType",valueEnum:{SELF:"\u672C\u4EBA",SELF_AND_SUB:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",DEPT:"\u672C\u90E8\u95E8",DEPT_AND_SUB:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",ALL:"\u5168\u90E8"},hideInSearch:!0,width:150},{title:"\u64CD\u4F5C",valueType:"option",render:function(a,S){return[(0,n.jsx)("a",{onClick:function(){d({visible:!0,current:S,readonly:!0})},children:"\u8BE6\u60C5"},"readonly"),(0,n.jsx)(U.Z,{onSelect:function(D){D==="edit"&&d({current:S,visible:!0}),D==="delete"&&y.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u5C97\u4F4D?",icon:(0,n.jsx)(u.Z,{}),onOk:function(){i.deletePosition(S.id).then(function(N){if(N.success){var V;P.default.success("\u5220\u9664\u6210\u529F"),(V=F.current)===null||V===void 0||V.reload()}})}})},menus:[{key:"edit",name:"\u7F16\u8F91"},{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];return(0,n.jsxs)(m.ZP,{title:!1,children:[(0,n.jsx)(t.ZP,{columns:j,actionRef:F,dataSource:i.positions,request:function(){var x=(0,p.Z)(s().mark(function a(S){return s().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",i.loadPositions(S));case 1:case"end":return D.stop()}},a)}));return function(a){return x.apply(this,arguments)}}(),columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:5},scroll:{x:650},dateFormatter:"string",headerTitle:"\u5C97\u4F4D\u5217\u8868",toolBarRender:function(){return[(0,n.jsx)(c.Z,{icon:(0,n.jsx)(T.Z,{}),type:"primary",onClick:function(){d({visible:!0})},children:"\u65B0\u5EFA"},"button")]}}),(r==null?void 0:r.visible)&&(0,n.jsx)(v,{onClose:function(){d(void 0)},readonly:r.readonly,onOk:function(){var a;d(void 0),(a=F.current)===null||a===void 0||a.reload()},position:r.current})]})}),Z=f}}]);
