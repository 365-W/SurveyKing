(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[9999],{38006:function(A){A.exports={linkGroup:"linkGroup___9Jgdb"}},9016:function(A){A.exports={activitiesList:"activitiesList___H8HBB",username:"username___2ciPn",event:"event___3yvwe",pageHeaderContent:"pageHeaderContent___PWSiu",avatar:"avatar___3ZBop",content:"content___1eLtZ",contentTitle:"contentTitle___Yu-cR",extraContent:"extraContent___3rMo7",statItem:"statItem___2hHyE",members:"members___1FE9G",member:"member___2ERhZ",projectList:"projectList___2xaJs",cardTitle:"cardTitle___Bli-X",projectGrid:"projectGrid___Bia9a",projectItemContent:"projectItemContent___3_r0i",datetime:"datetime___2UCoC",activeCard:"activeCard___10qJg",container:"container___1D3Yy"}},60438:function(A,D,e){"use strict";e.r(D),e.d(D,{default:function(){return ve}});var x=e(13062),E=e(71230),ne=e(89032),B=e(15746),xe=e(58024),i=e(91894),W=e(54421),F=e(38272),re=e(94657),ye=e(95300),$=e(7277),he=e(94233),G=e(51890),ge=e(71748),le=e(90860),R=e(67294),Y=e(27400),se=e(87859),ie=e(9761),oe=e(30381),L=e.n(oe),ce=e(73727),t=e(57663),o=e(71577),c=e(49101),a=e(38006),s=e.n(a),n=e(85893),b=function(d){var r=d.links,f=d.linkElement,v=d.onAdd;return(0,n.jsxs)("div",{className:s().linkGroup,children:[r.map(function(l){return(0,R.createElement)(f,{key:"linkGroup-item-".concat(l.id||l.title),to:l.href,href:l.href},l.title)}),(0,n.jsxs)(o.Z,{size:"small",type:"primary",ghost:!0,onClick:v,children:[(0,n.jsx)(c.Z,{})," \u6DFB\u52A0"]})]})};b.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var Z=b,p=e(9016),u=e.n(p),g=e(18106),M=e(60561),C=e(39428),y=e(11849),O=e(3182),T=e(3980),J=e(91186),z=e(27484),V=e.n(z),X=function(){var d=[{title:"\u95EE\u5377\u540D\u79F0",dataIndex:"name"},{title:"\u5B8C\u6210\u72B6\u6001",dataIndex:"status",valueType:"select",valueEnum:{0:{text:"\u672A\u5F00\u59CB",status:"Default"},1:{text:"\u8FDB\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u5B8C\u6210",status:"Success"}}},{title:"\u64CD\u4F5C",dataIndex:"operate",renderText:function(f,v){return v.answerId?(0,n.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId,"/").concat(v.answerId,"?pattern=readPretty"))},children:"\u67E5\u770B\u7B54\u6848"}):(0,n.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId))},children:"\u8DF3\u8F6C"})}}];return(0,n.jsx)(J.ZP,{rowKey:"projectId",request:function(){var r=(0,O.Z)((0,C.Z)().mark(function f(v){var l;return(0,C.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,T.hi.getWithPagination("/api/listUserTask",(0,y.Z)((0,y.Z)({},v),{},{type:"survey"}));case 2:return l=m.sent,m.abrupt("return",(0,y.Z)((0,y.Z)({},l),{},{data:l.list}));case 4:case"end":return m.stop()}},f)}));return function(f){return r.apply(this,arguments)}}(),bordered:!0,columns:d,search:!1,toolbar:{}})},de=function(){var d=[{title:"\u8003\u8BD5\u540D\u79F0",dataIndex:"name"},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"examStartTime",renderText:function(f){return f?V()(f).format("YYYY-MM-DD HH:mm"):"-"}},{title:"\u5B8C\u6210\u72B6\u6001",dataIndex:"status",valueType:"select",valueEnum:{0:{text:"\u672A\u5F00\u59CB",status:"Default"},1:{text:"\u8FDB\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u5B8C\u6210",status:"Success"}}},{title:"\u64CD\u4F5C",dataIndex:"operate",renderText:function(f,v){return v.answerId?(0,n.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId,"/exam-result/").concat(v.answerId))},children:"\u67E5\u770B\u7ED3\u679C"}):(0,n.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId))},children:"\u8DF3\u8F6C"})}}];return(0,n.jsx)(J.ZP,{rowKey:"projectId",request:function(){var r=(0,O.Z)((0,C.Z)().mark(function f(v){var l;return(0,C.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,T.hi.getWithPagination("/api/listUserTask",(0,y.Z)((0,y.Z)({},v),{},{type:"exam"}));case 2:return l=m.sent,m.abrupt("return",(0,y.Z)((0,y.Z)({},l),{},{data:l.list}));case 4:case"end":return m.stop()}},f)}));return function(f){return r.apply(this,arguments)}}(),bordered:!0,columns:d,search:!1,toolbar:{}})};function ue(){return(0,n.jsx)(i.Z,{style:{width:"100%",marginBottom:24},children:(0,n.jsx)(M.Z,{items:[{key:"exam",label:"\u6211\u7684\u8003\u8BD5",children:(0,n.jsx)(de,{})},{key:"survey",label:"\u6211\u7684\u95EE\u5377",children:(0,n.jsx)(X,{})}]})})}var w=[{title:"\u521B\u5EFA\u95EE\u5377",href:"/survey/new?mode=survey"},{title:"\u521B\u5EFA\u8003\u8BD5",href:"/survey/new?mode=exam"}];function Q(){var j=new Date,d=j.getHours();return d<6?"\u51CC\u6668\u597D":d<9?"\u65E9\u4E0A\u597D":d<12?"\u4E0A\u5348\u597D":d<14?"\u4E2D\u5348\u597D":d<17?"\u4E0B\u5348\u597D":d<19?"\u508D\u665A\u597D":d<22?"\u665A\u4E0A\u597D":"\u591C\u91CC\u597D"}var K=function(d){var r=d.currentUser,f=r&&Object.keys(r).length;return f?(0,n.jsxs)("div",{className:u().pageHeaderContent,children:[(0,n.jsx)("div",{className:u().avatar,children:(0,n.jsx)(G.C,{size:"large",src:r.avatar})}),(0,n.jsxs)("div",{className:u().content,children:[(0,n.jsxs)("div",{className:u().contentTitle,children:[Q(),"\uFF0C",r.name,"\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"]}),(0,n.jsx)("div",{children:r.group})]}),(0,n.jsx)(I,{})]}):(0,n.jsx)(le.Z,{avatar:!0,paragraph:{rows:1},active:!0})},I=function(){var d=(0,Y.a)(),r=d.userOverview;return(0,n.jsxs)("div",{className:u().extraContent,children:[(0,n.jsx)("div",{className:u().statItem,children:(0,n.jsx)($.Z,{title:"\u95EE\u5377\u6570",value:r==null?void 0:r.surveyCount})}),(0,n.jsx)("div",{className:u().statItem,children:(0,n.jsx)($.Z,{title:"\u8003\u8BD5\u6570",value:r==null?void 0:r.examCount})})]})},k=void 0==="1",q=function(){var d=(0,Y.a)(),r=d.user,f=(0,R.useState)(function(){return!localStorage.getItem("welcome")}),v=(0,re.Z)(f,2),l=v[0],_=v[1],m={},ee=m.loading,H=m.data,te=H===void 0?[]:H,me=function(h){var fe=h.template.split(/@\{([^{}]*)\}/gi).map(function(P){return h[P]?(0,n.jsx)("a",{href:h[P].link,children:h[P].name},h[P].name):P});return(0,n.jsx)(F.ZP.Item,{children:(0,n.jsx)(F.ZP.Item.Meta,{avatar:(0,n.jsx)(G.C,{src:h.user.avatar}),title:(0,n.jsxs)("span",{children:[(0,n.jsx)("a",{className:u().username,children:h.user.name}),"\xA0",(0,n.jsx)("span",{className:u().event,children:fe})]}),description:(0,n.jsx)("span",{className:u().datetime,title:h.updatedAt,children:L()(h.updatedAt).fromNow()})})},h.id)};return(0,n.jsx)(se._z,{className:u().container,content:(0,n.jsx)(K,{currentUser:{avatar:"/api/public/preview/".concat(r==null?void 0:r.avatar),name:r==null?void 0:r.name,userid:r==null?void 0:r.userId,email:r==null?void 0:r.email,signature:r==null?void 0:r.profile,group:r==null?void 0:r.deptName}}),children:(0,n.jsxs)(E.Z,{gutter:24,children:[(0,n.jsxs)(B.Z,{xl:16,lg:24,md:24,sm:24,xs:24,children:[(0,n.jsx)(ue,{}),k&&(0,n.jsx)(i.Z,{bodyStyle:{padding:0},bordered:!1,className:u().activeCard,title:"\u52A8\u6001",loading:ee,children:(0,n.jsx)(F.ZP,{loading:ee,renderItem:function(h){return me(h)},dataSource:te,className:u().activitiesList,size:"large"})})]}),d.hasPermission("project:create")&&(0,n.jsx)(B.Z,{xl:8,lg:24,md:24,sm:24,xs:24,children:(0,n.jsx)(i.Z,{style:{marginBottom:24},title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",bordered:!1,bodyStyle:{padding:0},children:(0,n.jsx)(Z,{onAdd:function(){},links:w,linkElement:ce.rU})})})]})})},ve=(0,ie.Pi)(q)},91894:function(A,D,e){"use strict";e.d(D,{Z:function(){return ce}});var x=e(96156),E=e(22122),ne=e(36228),B=e.n(ne),xe=e(98423),i=e(67294),W=e(53124),F=e(97647),re=e(90860),ye=e(60561),$=function(t,o){var c={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&o.indexOf(a)<0&&(c[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)o.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(c[a[s]]=t[a[s]]);return c},he=function(o){var c=o.prefixCls,a=o.className,s=o.hoverable,n=s===void 0?!0:s,b=$(o,["prefixCls","className","hoverable"]);return i.createElement(W.C,null,function(Z){var p=Z.getPrefixCls,u=p("card",c),g=B()("".concat(u,"-grid"),a,(0,x.Z)({},"".concat(u,"-grid-hoverable"),n));return i.createElement("div",(0,E.Z)({},b,{className:g}))})},G=he,ge=function(t,o){var c={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&o.indexOf(a)<0&&(c[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)o.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(c[a[s]]=t[a[s]]);return c};function le(t){var o=t.map(function(c,a){return i.createElement("li",{style:{width:"".concat(100/t.length,"%")},key:"action-".concat(a)},i.createElement("span",null,c))});return o}var R=i.forwardRef(function(t,o){var c,a,s=i.useContext(W.E_),n=s.getPrefixCls,b=s.direction,Z=i.useContext(F.Z),p=function(N){var S;(S=t.onTabChange)===null||S===void 0||S.call(t,N)},u=function(){var N;return i.Children.forEach(t.children,function(S){S&&S.type&&S.type===G&&(N=!0)}),N},g=t.prefixCls,M=t.className,C=t.extra,y=t.headStyle,O=y===void 0?{}:y,T=t.bodyStyle,J=T===void 0?{}:T,z=t.title,V=t.loading,X=t.bordered,de=X===void 0?!0:X,ue=t.size,w=t.type,Q=t.cover,K=t.actions,I=t.tabList,k=t.children,q=t.activeTabKey,ve=t.defaultActiveTabKey,j=t.tabBarExtraContent,d=t.hoverable,r=t.tabProps,f=r===void 0?{}:r,v=ge(t,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),l=n("card",g),_=i.createElement(re.Z,{loading:!0,active:!0,paragraph:{rows:4},title:!1},k),m=q!==void 0,ee=(0,E.Z)((0,E.Z)({},f),(c={},(0,x.Z)(c,m?"activeKey":"defaultActiveKey",m?q:ve),(0,x.Z)(c,"tabBarExtraContent",j),c)),H,te=I&&I.length?i.createElement(ye.Z,(0,E.Z)({size:"large"},ee,{className:"".concat(l,"-head-tabs"),onChange:p,items:I.map(function(U){var N;return{label:U.tab,key:U.key,disabled:(N=U.disabled)!==null&&N!==void 0?N:!1}})})):null;(z||C||te)&&(H=i.createElement("div",{className:"".concat(l,"-head"),style:O},i.createElement("div",{className:"".concat(l,"-head-wrapper")},z&&i.createElement("div",{className:"".concat(l,"-head-title")},z),C&&i.createElement("div",{className:"".concat(l,"-extra")},C)),te));var me=Q?i.createElement("div",{className:"".concat(l,"-cover")},Q):null,ae=i.createElement("div",{className:"".concat(l,"-body"),style:J},V?_:k),h=K&&K.length?i.createElement("ul",{className:"".concat(l,"-actions")},le(K)):null,fe=(0,xe.Z)(v,["onTabChange"]),P=ue||Z,Ce=B()(l,(a={},(0,x.Z)(a,"".concat(l,"-loading"),V),(0,x.Z)(a,"".concat(l,"-bordered"),de),(0,x.Z)(a,"".concat(l,"-hoverable"),d),(0,x.Z)(a,"".concat(l,"-contain-grid"),u()),(0,x.Z)(a,"".concat(l,"-contain-tabs"),I&&I.length),(0,x.Z)(a,"".concat(l,"-").concat(P),P),(0,x.Z)(a,"".concat(l,"-type-").concat(w),!!w),(0,x.Z)(a,"".concat(l,"-rtl"),b==="rtl"),a),M);return i.createElement("div",(0,E.Z)({ref:o},fe,{className:Ce}),H,me,ae,h)}),Y=R,se=function(t,o){var c={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&o.indexOf(a)<0&&(c[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)o.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(c[a[s]]=t[a[s]]);return c},ie=function(o){return i.createElement(W.C,null,function(c){var a=c.getPrefixCls,s=o.prefixCls,n=o.className,b=o.avatar,Z=o.title,p=o.description,u=se(o,["prefixCls","className","avatar","title","description"]),g=a("card",s),M=B()("".concat(g,"-meta"),n),C=b?i.createElement("div",{className:"".concat(g,"-meta-avatar")},b):null,y=Z?i.createElement("div",{className:"".concat(g,"-meta-title")},Z):null,O=p?i.createElement("div",{className:"".concat(g,"-meta-description")},p):null,T=y||O?i.createElement("div",{className:"".concat(g,"-meta-detail")},y,O):null;return i.createElement("div",(0,E.Z)({},u,{className:M}),C,T)})},oe=ie,L=Y;L.Grid=G,L.Meta=oe;var ce=L},89032:function(A,D,e){"use strict";var x=e(38663),E=e.n(x),ne=e(6999)}}]);
