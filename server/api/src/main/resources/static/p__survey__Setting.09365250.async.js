(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1117],{23804:function(ke,le,n){"use strict";n.d(le,{KL:function(){return de},M6:function(){return we},yX:function(){return xe},kJ:function(){return Ce},rs:function(){return He},q1:function(){return Re},qo:function(){return Ze},Jg:function(){return fe}});var Xe=n(63185),R=n(80937),A=n(67294),t=n(85893),Ye=function(s){var u=s.children,o=_objectWithoutProperties(s,["children"]),h=function(d){return _jsx(_Checkbox,{checked:d.value,onChange:function(Z){d.onChange(Z.target.checked)},children:u})};return _jsx(Field,_objectSpread({component:[h]},o))},oe=n(47673),w=function(s){var u=s.children,o=s.style,h=_objectWithoutProperties(s,["children","style"]),f=function(x){return _jsx(_Input,{value:x.value,style:o,onChange:function(i){x.onChange(i.target.value)},children:u})};return _jsx(Field,_objectSpread({component:[f]},h))},p=n(11849),D=n(71194),W=n(50146),ye=n(57663),L=n(71577),_=n(77576),k=n(12028),K=n(22385),Q=n(31097),N=n(94657),B=n(63439),e=n(84387),Fe=n(54531),X=n(11628),ee=function(s){var u=s.value,o=s.onChange,h=(0,A.useState)(!1),f=(0,N.Z)(h,2),d=f[0],x=f[1],Z=(0,X.IE)(),i=(0,A.useRef)(null);return(0,A.useEffect)(function(){console.log(u),u||x(!1)},[u]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"setting-item",children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsxs)("span",{children:["\u8BBE\u7F6E\u95EE\u5377\u9ED8\u8BA4\u7B54\u6848",(0,t.jsx)(Q.Z,{overlay:"\u8BBE\u7F6E\u7684\u7B54\u6848\u5C06\u4F5C\u4E3A\u9ED8\u8BA4\u7B54\u6848\u5E26\u5165\u95EE\u5377",children:(0,t.jsx)(e.Z,{className:"setting-prompt"})})]}),(0,t.jsx)(k.Z,{checked:!!u,onChange:function(l){l?x(!0):o(void 0)}})]}),(d||!!u)&&(0,t.jsx)("div",{className:"setting-item-content",children:(0,t.jsx)(L.Z,{onClick:function(){return x(!0)},style:{marginLeft:10},type:"dashed",children:u?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),d&&(0,t.jsx)(W.Z,{visible:!0,onCancel:function(){return x(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){var l;o((0,Fe.ZN)((l=i.current)===null||l===void 0?void 0:l.getValues())),x(!1)},children:Z.schema?(0,t.jsx)(B.Z,{ref:i,initialValues:u,schema:Z.schema,footerVisible:!1}):"\u95EE\u5377\u4E3A\u7A7A"})]})},we=function(s){return(0,t.jsx)(R.gN,(0,p.Z)({component:[ee]},s))},ce=n(74118),$e=function(s){var u=s.value,o=s.onChange,h=(0,A.useState)(!1),f=(0,N.Z)(h,2),d=f[0],x=f[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"setting-item",children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsxs)("span",{children:["\u7B54\u9898\u5B8C\u6210\u540E\u8DF3\u8F6C\u81EA\u5B9A\u4E49\u9875\u9762",(0,t.jsx)(Q.Z,{overlay:"\u4F60\u53EF\u4EE5\u5728\u8868\u5355\u63D0\u4EA4\u9875\u9762\u8BBE\u7F6E\u66F4\u4E3A\u4E30\u5BCC\u591A\u5F69\u7684\u5185\u5BB9\uFF0C\u5305\u62EC\u63D2\u5165\u56FE\u7247\u3001\u8BBE\u7F6E\u5B57\u53F7\u3001\u5B57\u4F53\u989C\u8272\u3001\u5E8F\u53F7\u3001\u8BBE\u7F6E\u8D85\u94FE\u63A5\u7B49\u7B49\u3002",children:(0,t.jsx)(e.Z,{className:"setting-prompt"})})]}),(0,t.jsx)(k.Z,{checked:!!u,onChange:function(i){i?x(!0):o(void 0)}})]}),(d||!!u)&&(0,t.jsx)("div",{className:"setting-item-content",children:(0,t.jsx)(L.Z,{onClick:function(){return x(!0)},style:{marginLeft:10},type:"dashed",children:u?"\u70B9\u51FB\u4FEE\u6539":"\u70B9\u51FB\u8BBE\u7F6E"})})]}),d&&(0,t.jsx)(ce.cM,{value:u,title:"\u63D0\u4EA4\u540E\u56FE\u6587\u5C55\u793A",width:750,onChange:function(i){o(i),x(!1)},onClose:function(){x(!1)}})]})},de=function(s){return(0,t.jsx)(R.gN,(0,p.Z)({component:[$e]},s))},He=function(s){var u=function(h){return(0,t.jsx)(k.Z,{checked:h.value,onChange:function(d){h.onChange(d)}})};return(0,t.jsx)(R.gN,(0,p.Z)({component:[u]},s))},Y=n(93224),Je=n(77883),J=n(85482),Ge=n(43358),ve=n(97268),Me=function(s){var u=s.value,o=s.onChange,h=s.title,f=s.tooltip,d=(0,A.useState)(!!u),x=(0,N.Z)(d,2),Z=x[0],i=x[1];return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"setting-item",children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsxs)("span",{children:[h,(0,t.jsx)(Q.Z,{overlay:f,children:(0,t.jsx)(e.Z,{className:"setting-prompt"})})]}),(0,t.jsx)(k.Z,{checked:!!u,onChange:function(l){l?(i(!0),o({limitFreq:"only",limitNum:1})):(i(!1),o(void 0))}})]}),Z&&(0,t.jsx)("div",{className:"setting-item-content",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(ve.Z,{style:{width:100},value:u==null?void 0:u.limitFreq,onChange:function(l){return o({limitFreq:l,limitNum:(u==null?void 0:u.limitNum)||1})},options:[{label:"\u53EA\u80FD",value:"only"},{label:"\u6BCF\u5C0F\u65F6",value:"hour"},{label:"\u6BCF\u5929",value:"day"},{label:"\u6BCF\u81EA\u7136\u5468",value:"week"},{label:"\u6BCF\u81EA\u7136\u6708",value:"month"},{label:"\u6BCF\u5B63\u5EA6",value:"quarter"},{label:"\u6BCF\u81EA\u7136\u5E74",value:"year"}]}),(0,t.jsx)("span",{style:{margin:"0 10px"},children:"\u7B54\u9898"}),(0,t.jsx)(J.Z,{min:1,max:9999,defaultValue:1,value:u==null?void 0:u.limitNum,onChange:function(l){return o({limitNum:l,limitFreq:(u==null?void 0:u.limitFreq)||"only"})}}),(0,t.jsx)("span",{style:{margin:"0 10px"},children:"\u6B21"})]})})]})})},Ze=function(s){var u=s.name,o=s.basePath,h=(0,Y.Z)(s,["name","basePath"]);return(0,t.jsx)(R.gN,{component:[Me,h],name:u,basePath:o})},qe=function(){var s=function(o){var h=o.value,f=o.onChange;return h===1?_jsx(_Button,{type:"primary",icon:_jsx(CaretRightOutlined,{}),onClick:function(){return f(0)},children:"\u6B63\u5728\u56DE\u6536"}):_jsx(_Button,{type:"primary",danger:!0,icon:_jsx(PauseOutlined,{}),onClick:function(){return f(1)},children:"\u6682\u505C\u56DE\u6536"})};return _jsx(Field,{name:"status",component:[s],basePath:""})},Se=n(59250),te=n(13013),_e=n(30887),$=n(54689),ne=n(3182),z=n(4107),M=n(94043),H=n.n(M),G=n(92592),ue=n(83279),We=n(20136),pe=n(55241),he=n(49111),se=n(19650),Be=n(54977),Ae=n(23538),De=n(73171),ie=n(71211),Pe=z.Z.Search;function Ne(S){return"".concat(window.location.origin,"/s/").concat(S)}var Ie=function(s){var u=s.item,o=s.onChange,h=s.onDelete,f=(0,X.IE)(),d=u.url,x=(0,A.useState)(""),Z=(0,N.Z)(x,2),i=Z[0],a=Z[1],l=(0,A.useRef)(null),C=(0,X.IE)(),v=(0,A.useState)(!1),m=(0,N.Z)(v,2),y=m[0],F=m[1];(0,A.useEffect)(function(){function r(){return j.apply(this,arguments)}function j(){return j=(0,ne.Z)(H().mark(function I(){return H().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:G.toDataURL(d,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(V){a(V)}).catch(function(V){console.error(V)});case 1:case"end":return E.stop()}},I)})),j.apply(this,arguments)}r()},[d]);var g=(0,A.useCallback)(function(){var r=(0,ne.Z)(H().mark(function j(I){return H().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:G.toDataURL(d,{errorCorrectionLevel:"H",margin:5,width:I}).then(function(V){a(V);var b=document.createElement("a");b.href=V,b.setAttribute("download","".concat(f.name,"_").concat(I,".png")),document.body.appendChild(b),b.click(),document.body.removeChild(b)});case 1:case"end":return E.stop()}},j)}));return function(j){return r.apply(this,arguments)}}(),[d,f]);return(0,t.jsxs)("div",{style:{border:"1px solid #d9d9d9",margin:"5px 0",padding:"8px 4px"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)(z.Z,{value:u.name,style:{width:200},placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",onChange:function(j){return o((0,p.Z)((0,p.Z)({},u),{},{name:j.target.value}))}}),(0,t.jsxs)(se.Z,{children:[(0,t.jsx)(L.Z,{icon:(0,t.jsx)(Be.Z,{}),onClick:function(){return F(!0)}}),(0,t.jsx)(pe.Z,{content:(0,t.jsxs)("div",{children:[(0,t.jsx)("img",{src:i,height:150,width:150}),(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsxs)(se.Z,{children:[(0,t.jsx)(L.Z,{size:"small",type:"link",onClick:function(){return g(256)},children:"\u5C0F\u53F7"}),(0,t.jsx)(L.Z,{size:"small",type:"link",onClick:function(){return g(512)},children:"\u4E2D\u53F7"}),(0,t.jsx)(L.Z,{size:"small",type:"link",onClick:function(){return g(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(f.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click"],children:(0,t.jsx)(L.Z,{icon:(0,t.jsx)(Ae.Z,{})})}),(0,t.jsx)(L.Z,{icon:(0,t.jsx)(De.Z,{}),onClick:function(){return h(u.id)}})]})]}),(0,t.jsx)(Pe,{value:d,style:{margin:"5px 0 0 0"},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(f.id,"?id=").concat(u.id))}}),(0,t.jsx)(W.Z,{visible:y,onCancel:function(){return F(!1)},bodyStyle:{maxHeight:600,overflowY:"auto",padding:0},maskClosable:!1,width:650,onOk:function(){F(!1)},children:C.schema&&(0,t.jsx)(B.Z,{ref:l,initialValues:u.value,schema:C.schema,footerVisible:!1,onSubmit:function(j){console.log(j)}})})]})},Oe=function(s){var u=s.visible,o=s.onClose,h=(0,A.useState)([]),f=(0,N.Z)(h,2),d=f[0],x=f[1],Z=(0,X.IE)();return(0,t.jsxs)(W.Z,{visible:u,onCancel:o,title:"\u5E26\u503C\u94FE\u63A5\u8BBE\u7F6E",maskClosable:!1,bodyStyle:{maxHeight:360,overflow:"auto"},children:[d.map(function(i){return(0,t.jsx)(Ie,{item:i,onChange:function(l){var C=d.findIndex(function(v){return v.id===l.id});d.splice(C,1,l),x((0,ue.Z)(d))},onDelete:function(l){x((0,ue.Z)(d.filter(function(C){return C.id!==l})))}},i.id)}),(0,t.jsx)(L.Z,{block:!0,type:"primary",ghost:!0,onClick:function(){var a=(0,ie.Ox)();d.push({id:a,url:"".concat(Ne(Z.id),"?id=").concat(a)}),x((0,ue.Z)(d))},children:"\u6DFB\u52A0"})]})},me=z.Z.Search;function fe(S){return"".concat(window.location.origin,"/s/").concat(S)}var xe=function(){var s=(0,X.IE)(),u=fe(s.id),o=(0,A.useState)(""),h=(0,N.Z)(o,2),f=h[0],d=h[1],x=(0,A.useState)(!1),Z=(0,N.Z)(x,2),i=Z[0],a=Z[1];(0,A.useEffect)(function(){function v(){return m.apply(this,arguments)}function m(){return m=(0,ne.Z)(H().mark(function y(){return H().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:G.toDataURL(u,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:5}).then(function(r){d(r)}).catch(function(r){console.error(r)});case 1:case"end":return g.stop()}},y)})),m.apply(this,arguments)}v()},[u]);var l=(0,A.useCallback)(function(){var v=(0,ne.Z)(H().mark(function m(y){return H().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:G.toDataURL(u,{errorCorrectionLevel:"H",margin:5,width:y}).then(function(r){d(r);var j=document.createElement("a");j.href=r,j.setAttribute("download","".concat(s.name,"_").concat(y,".png")),document.body.appendChild(j),j.click(),document.body.removeChild(j)});case 1:case"end":return g.stop()}},m)}));return function(m){return v.apply(this,arguments)}}(),[u,s]),C=(0,t.jsxs)($.Z,{onClick:function(m){return l(parseInt(m.key))},children:[(0,t.jsx)($.Z.Item,{children:"\u5C0F\u53F7"},256),(0,t.jsx)($.Z.Item,{children:"\u4E2D\u53F7"},512),(0,t.jsx)($.Z.Item,{children:"\u5927\u53F7"},1024)]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsx)("span",{children:"\u95EE\u5377\u94FE\u63A5"}),(0,t.jsx)(me,{value:u,style:{width:300},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(s.id))}})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:10},children:[(0,t.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:100,height:100},children:(0,t.jsx)("img",{src:f,height:95,width:95})}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,t.jsx)(te.Z,{overlay:C,placement:"bottomLeft",children:(0,t.jsx)(L.Z,{children:"\u4E0B\u8F7D\u4E8C\u7EF4\u7801"})}),(0,t.jsxs)(L.Z,{type:"primary",ghost:!0,style:{marginTop:10,visibility:"hidden"},onClick:function(){return a(!0)},children:["\u5E26\u503C\u94FE\u63A5",(0,t.jsx)(Q.Z,{overlay:"\u94FE\u63A5\u6DFB\u52A0\u53C2\u6570\uFF0C\u5C06\u81EA\u52A8\u5E94\u7528\u4E3A\u95EE\u5377\u7684\u7B54\u6848\u3002",children:(0,t.jsx)(e.Z,{className:"setting-prompt",style:{color:"#1891ff"}})})]})]}),(0,t.jsx)(Oe,{visible:i,onClose:function(){return a(!1)}})]})]})},Ke=n(14965),Qe=n(77121),ge=n(30381),je=n.n(ge),Le=function(s){var u=s.value,o=s.onChange,h=s.title,f=s.tooltip,d=s.type,x=d===void 0?"text":d,Z=s.prefix,i=s.suffix,a=s.style,l=(0,A.useState)(u!==void 0),C=(0,N.Z)(l,2),v=C[0],m=C[1];(0,A.useEffect)(function(){u!==void 0&&m(!0)},[u]);var y=function(){return x==="datepicker"?(0,t.jsx)(Qe.Z,{value:u?je()(u):void 0,showTime:!0,style:a,onChange:function(r){o(r?r==null?void 0:r.valueOf():void 0)}}):x==="number"?(0,t.jsx)(J.Z,{value:u,onChange:function(r){return o(r)},style:(0,p.Z)({width:200},a)}):(0,t.jsx)(z.Z,{value:u,onChange:function(r){return o(r.target.value)},style:(0,p.Z)({width:200},a)})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"setting-item",children:[(0,t.jsxs)("div",{className:"setting-item-switch",children:[(0,t.jsxs)("span",{children:[h,(0,t.jsx)(Q.Z,{overlay:f,children:(0,t.jsx)(e.Z,{className:"setting-prompt"})})]}),(0,t.jsx)(k.Z,{checked:u!==void 0,onChange:function(g){g?(m(!0),o("")):(m(!1),o(void 0))}})]}),v&&(0,t.jsxs)("div",{className:"setting-item-content",children:[Z,y(),i]})]})})},Re=function(s){var u=s.name,o=s.basePath,h=(0,Y.Z)(s,["name","basePath"]);return(0,t.jsx)(R.gN,{component:[Le,h],name:u,basePath:o})},Ve=n(25782),be=n(69816),Ce=function(){var s=function(o){var h=o.value,f=o.onChange;return h===1?(0,t.jsx)(L.Z,{type:"primary",icon:(0,t.jsx)(Ve.Z,{}),onClick:function(){return f(0)},children:"\u6B63\u5728\u56DE\u6536"}):(0,t.jsx)(L.Z,{type:"primary",danger:!0,icon:(0,t.jsx)(be.Z,{}),onClick:function(){return f(1)},children:"\u6682\u505C\u56DE\u6536"})};return(0,t.jsx)(R.gN,{component:[s],name:"status",basePath:""})}},76597:function(ke,le,n){"use strict";n.r(le),n.d(le,{Setting:function(){return x},default:function(){return Z}});var Xe=n(13062),R=n(71230),A=n(89032),t=n(15746),Ye=n(34792),oe=n(48086),w=n(94657),p=n(80937),D=n(67294),W=(0,D.createContext)({});function ye(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=(0,D.useContext)(W),l=a.prefixCls;return l+i}var L=n(58024),_=n(39144),k=n(22385),K=n(31097),Q=n(99008),N=n(84387),B=n(23804),e=n(85893);oe.default.config({duration:1,maxCount:1});var Fe=(0,p.Pi)(function(){var i=(0,p.cI)();return(0,e.jsx)(p.RV,{form:i,children:(0,e.jsx)(p.Wo,{name:"answerSetting",children:(0,e.jsx)("div",{children:(0,e.jsxs)(_.Z,{title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(Q.Z,{style:{marginRight:10}}),"\u95EE\u5377\u663E\u793A"]}),className:"answer-setting",extra:(0,e.jsx)(B.kJ,{}),children:[(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u5F00\u542F\u81EA\u52A8\u6682\u5B58",(0,e.jsx)(K.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u53EF\u4EE5\u81EA\u52A8\u4FDD\u5B58\u672C\u6B21\u672A\u63D0\u4EA4\u7684\u586B\u5199\u5185\u5BB9\uFF0C\u518D\u6B21\u6253\u5F00\u95EE\u5377\u53EF\u663E\u793A\u4E0A\u6B21\u672A\u63D0\u4EA4\u7684\u586B\u5199\u5185\u5BB9\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(B.rs,{name:"autoSave"})]})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u663E\u793A\u9898\u76EE\u5E8F\u53F7",(0,e.jsx)(K.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u95EE\u5377\u4E2D\u7684\u9898\u76EE\u4F1A\u6309\u6392\u5217\u987A\u5E8F\u4ECE1\u5F00\u59CB\u663E\u793A\u9898\u76EE\u5E8F\u53F7\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(B.rs,{name:"questionNumber"})]})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u663E\u793A\u8FDB\u5EA6\u6761",(0,e.jsx)(K.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u586B\u5199\u8005\u6ED1\u52A8\u9875\u9762\u53EF\u4EE5\u770B\u5230\u5F53\u524D\u95EE\u5377\u586B\u5199\u8FDB\u5EA6\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(B.rs,{name:"progressBar"})]})}),(0,e.jsx)(B.M6,{name:"initialValues"})]})})})})}),X=n(54421),ee=n(38272),we=n(94233),ce=n(51890),$e=n(71194),de=n(50146),He=n(49111),Y=n(19650),Je=n(71153),J=n(60331),Ge=n(57663),ve=n(71577),Me=n(48736),Ze=n(27049),qe=n(62999),Se=n(51753),te=n(83279),_e=n(43358),$=n(97268),ne=n(18106),z=n(67164),M=n(68489),H=n(60780),G=n.n(H),ue=n(49101),We=$.Z.Option,pe=(0,p.Pi)(function(i){var a=i.onChange,l=i.orgTreeData,C=i.positions,v=(0,D.useState)(),m=(0,w.Z)(v,2),y=m[0],F=m[1],g=(0,D.useState)(),r=(0,w.Z)(g,2),j=r[0],I=r[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(R.Z,{gutter:10,children:[(0,e.jsx)(t.Z,{span:16,children:(0,e.jsx)(Se.Z,{onChange:function(E){return F(E)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:[{title:"\u53D1\u8D77\u4EBA\u5F53\u524D\u90E8\u95E8",value:"${currentOrgId}",key:"${currentOrgId}"},{title:"\u53D1\u8D77\u4EBA\u4E0A\u7EA7\u90E8\u95E8",value:"${parentOrgId}",key:"${parentOrgId}"}].concat((0,te.Z)(l)),placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0,value:y})}),(0,e.jsx)(t.Z,{span:8,children:(0,e.jsx)($.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",allowClear:!0,value:j,onChange:function(E){return I(E)},children:C.map(function(O){return(0,e.jsx)(We,{value:O.id,children:O.name},O.id)})})})]}),(0,e.jsx)(R.Z,{style:{marginTop:10},children:(0,e.jsx)(t.Z,{children:(0,e.jsx)(ve.Z,{icon:(0,e.jsx)(ue.Z,{}),onClick:function(){(y||j)&&a("P:".concat(y||"",":").concat(j||""))},children:"\u6DFB\u52A0"})})})]})}),he=z.Z.TabPane,se=$.Z.Option,Be=(0,p.Pi)(function(i){var a=i.onChange,l=i.tabs,C=l===void 0?["user","role","position"]:l,v=(0,M.m2)(),m=(0,D.useState)(i.value||[]),y=(0,w.Z)(m,2),F=y[0],g=y[1];(0,D.useEffect)(function(){g(i.value||[])},[i.value]);var r=(0,M.LF)(F),j=v.depts,I=v.users,O=v.roles,E=v.positions,V=(0,D.useState)(),b=(0,w.Z)(V,2),Ee=b[0],ae=b[1];(0,D.useEffect)(function(){Ee&&v.loadUsers({orgId:Ee,pageSize:1024})},[Ee,v]);var Ue=(0,D.useMemo)(function(){return G()(j.map(function(c){return{value:c.id,title:c.name,key:c.id,parentId:c.parentId}}),{parentProperty:"parentId",customID:"value"})},[j]),q=function(P){var T=(0,te.Z)(F);P.forEach(function(U){T.includes(U)||T.push(U)}),g(T),a(T)},Te=function(){for(var P=arguments.length,T=new Array(P),U=0;U<P;U++)T[U]=arguments[U];var re=(0,te.Z)(F.filter(function(ze){return!T.includes(ze)}));g(re),a(re)};return(0,e.jsx)("div",{style:{width:400},children:(0,e.jsxs)(z.Z,{defaultActiveKey:"user",children:[(0,e.jsx)(he,{tab:"\u6210\u5458",disabled:!C.includes("user"),children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsxs)(R.Z,{gutter:20,children:[(0,e.jsx)(t.Z,{span:16,children:(0,e.jsx)(Se.Z,{onChange:function(P){return ae(P)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:Ue,placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0})}),(0,e.jsx)(t.Z,{span:8,children:(0,e.jsx)($.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",allowClear:!0,showSearch:!0,mode:"multiple",onChange:function(P){return q(P)},maxTagCount:0,value:F.filter(function(c){return c.startsWith("U:")}),dropdownRender:function(P){return(0,e.jsxs)("div",{children:[P,(0,e.jsx)(Ze.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8},children:(0,e.jsx)(ve.Z,{size:"small",type:"link",onClick:function(){return q(I.map(function(U){return"U:".concat(U.id)}))},children:"\u5168\u9009"})})]})},children:I.map(function(c){return(0,e.jsx)(se,{value:"U:".concat(c.id),children:c.name},c.id)})})})]}),(0,e.jsx)(Y.Z,{style:{marginTop:20},wrap:!0,children:F.filter(function(c){return c.startsWith("U:")}).map(function(c){return(0,e.jsx)(J.Z,{closable:!0,color:"blue",onClose:function(){return Te(c)},children:r.user[c.split(":")[1]]},c)})})]})},"user"),(0,e.jsx)(he,{tab:"\u89D2\u8272",disabled:!C.includes("role"),children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsx)($.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",allowClear:!0,showSearch:!0,mode:"multiple",value:F.filter(function(c){return c.startsWith("R:")}),onChange:function(P){return q(P)},maxTagCount:0,children:O.map(function(c){return(0,e.jsx)(se,{value:"R:".concat(c.id),children:c.name},c.id)})}),(0,e.jsx)(Y.Z,{style:{marginTop:20},wrap:!0,children:F.filter(function(c){return c.startsWith("R:")}).map(function(c){return(0,e.jsx)(J.Z,{closable:!0,color:"blue",onClose:function(){return Te(c)},children:r.role[c.split(":")[1]]},c)})})]})},"role"),(0,e.jsx)(he,{tab:"\u673A\u6784\u5C97\u4F4D",disabled:!C.includes("position"),children:(0,e.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,e.jsx)(pe,{positions:E,orgTreeData:Ue,onChange:function(P){return q([P])}}),(0,e.jsx)(Y.Z,{style:{marginTop:20},wrap:!0,children:F.filter(function(c){return c.startsWith("P:")}).map(function(c){var P=c.split(":"),T=(0,w.Z)(P,3),U=T[1],re=T[2];return(0,e.jsxs)(J.Z,{closable:!0,color:"blue",onClose:function(){return Te(c)},children:[r.org[U],"-",r.position[re]]},U+":"+re)})})]})},"position")]})})}),Ae=Be,De=n(37809),ie=n(11628),Pe=function(a){var l=(0,D.useState)([]),C=(0,w.Z)(l,2),v=C[0],m=C[1];return(0,e.jsx)(de.Z,{title:"\u8BBE\u7F6E\u534F\u4F5C\u7BA1\u7406\u5458",visible:!0,onCancel:a.onCancel,onOk:function(){return a.onOk(v)},children:(0,e.jsx)(Ae,{tabs:["user"],onChange:function(F){m(F.map(function(g){return g.split(":")[1]}))}})})},Ne=function(){var a=(0,ie.IE)(),l=a.id,C=(0,D.useState)([]),v=(0,w.Z)(C,2),m=v[0],y=v[1],F=(0,D.useState)(!1),g=(0,w.Z)(F,2),r=g[0],j=g[1],I=function(){return M.hi.getProjectPartner(l).then(function(E){E&&y(E)})};return(0,D.useEffect)(function(){I()},[]),(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{className:"answer-setting",title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(De.Z,{}),(0,e.jsxs)("div",{children:["\u534F\u4F5C\u7BA1\u7406\u5458\u5217\u8868",(0,e.jsx)(K.Z,{overlay:"\u534F\u4F5C\u8005\u53EF\u4EE5\u534F\u52A9\u521B\u5EFA\u8005\u8FDB\u884C\u7F16\u8F91\u95EE\u5377\u3001\u7BA1\u7406\u6570\u636E\u7B49\u64CD\u4F5C\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt",style:{marginLeft:5}})})]})]}),extra:(0,e.jsx)("a",{href:"#",onClick:function(){return j(!0)},children:"\u8BBE\u7F6E\u534F\u4F5C\u7BA1\u7406\u5458"}),children:(0,e.jsx)(ee.ZP,{itemLayout:"horizontal",dataSource:m,renderItem:function(E){var V,b;return(0,e.jsxs)(ee.ZP.Item,{actions:E.type!==1?[(0,e.jsx)("a",{onClick:function(){var ae;de.Z.confirm({title:"\u5220\u9664\u534F\u4F5C\u8005",content:(0,e.jsxs)("div",{children:["\u786E\u5B9A\u5220\u9664\u534F\u4F5C\u8005 ",(0,e.jsx)("b",{children:(ae=E.user)===null||ae===void 0?void 0:ae.name}),"\u5417\uFF1F"]}),onOk:function(){M.hi.deleteProjectPartner(E.id,l).then(function(q){q.success&&I()})}})},children:"\u5220\u9664"},"list-loadmore-edit")]:[],children:[(0,e.jsx)(ee.ZP.Item.Meta,{avatar:(0,e.jsx)(ce.C,{src:(V=E.user)!==null&&V!==void 0&&V.avatar?"/api/public/preview/".concat(E.user.avatar):""}),title:(b=E.user)===null||b===void 0?void 0:b.name}),(0,e.jsx)("div",{children:E.type===1?"\u521B\u5EFA\u8005":"\u534F\u4F5C\u8005"})]})}})}),r&&(0,e.jsx)(Pe,{onCancel:function(){return j(!1)},onOk:function(E){M.hi.addProjectPartner({userIds:E,projectId:l}).then(function(){I(),j(!1)})}})]})},Ie=n(56931),Oe=(0,p.Pi)(function(){return(0,e.jsx)(p.Wo,{name:"submittedSetting",children:(0,e.jsx)("div",{children:(0,e.jsxs)(_.Z,{title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(Ie.Z,{}),"\u6295\u653E\u4E0E\u5206\u4EAB"]}),className:"submitted-setting",children:[(0,e.jsx)(B.KL,{name:"contentHtml"}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsx)(B.yX,{})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u5141\u8BB8\u4FEE\u6539\u7B54\u6848",(0,e.jsx)(K.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u518D\u6B21\u6253\u5F00\u95EE\u5377\u4F1A\u56DE\u663E\u4E4B\u524D\u586B\u5199\u7684\u7B54\u6848\uFF0C\u5E76\u4E14\u53EF\u4EE5\u4FEE\u6539\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(B.rs,{name:"enableUpdate"})]})})]})})})}),me=n(1603);oe.default.config({duration:1,maxCount:1});var fe=(0,p.Pi)(function(){return(0,e.jsx)("div",{children:(0,e.jsxs)(_.Z,{title:(0,e.jsxs)("div",{className:"setting-title",children:[(0,e.jsx)(me.Z,{style:{marginRight:10}}),"\u56DE\u6536\u8BBE\u7F6E"]}),className:"answer-setting",children:[(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsxs)("span",{children:["\u9700\u8981\u767B\u5F55",(0,e.jsx)(K.Z,{overlay:"\u52FE\u9009\u540E\uFF0C\u53EA\u6709\u767B\u5F55\u7528\u6237\u624D\u53EF\u4EE5\u586B\u5199\u95EE\u5377\u3002",children:(0,e.jsx)(N.Z,{className:"setting-prompt"})})]}),(0,e.jsx)(B.rs,{name:"loginRequired",basePath:"answerSetting"})]})}),(0,e.jsx)("div",{className:"setting-item",children:(0,e.jsxs)("div",{className:"setting-item-switch",children:[(0,e.jsx)("span",{children:"\u53EA\u80FD\u5FAE\u4FE1\u586B\u5199"}),(0,e.jsx)(B.rs,{name:"wechatOnly",basePath:"answerSetting"})]})}),(0,e.jsx)(B.q1,{name:"password",basePath:"answerSetting",title:"\u51ED\u5BC6\u7801\u586B\u5199",tooltip:"\u53EA\u6709\u8F93\u5165\u5BC6\u7801\u624D\u80FD\u586B\u5199\u95EE\u5377"}),(0,e.jsx)(B.qo,{name:"cookieLimit",basePath:"answerSetting",title:"\u6BCF\u53F0\u7535\u8111\u6216\u624B\u673A\u7B54\u9898\u6B21\u6570\u9650\u5236",tooltip:"\u6839\u636E cookie \u8FDB\u884C\u9650\u5236"}),(0,e.jsx)(B.qo,{name:"ipLimit",basePath:"answerSetting",title:"\u6BCF\u4E2AIP\u7B54\u9898\u6B21\u6570\u9650\u5236",tooltip:"\u6839\u636E IP \u8FDB\u884C\u9650\u5236"}),(0,e.jsx)(B.qo,{name:"loginLimit",basePath:"answerSetting",title:"\u6BCF\u4E2A\u767B\u5F55\u8D26\u53F7\u7B54\u9898\u6B21\u6570\u9650\u5236",tooltip:"\u6839\u636E\u767B\u5F55\u8D26\u53F7\u8FDB\u884C\u9650\u5236"}),(0,e.jsx)(B.q1,{name:"endTime",basePath:"answerSetting",title:"\u8BBE\u7F6E\u95EE\u5377\u7ED3\u675F\u65F6\u95F4",type:"datepicker"}),(0,e.jsx)(B.q1,{name:"maxAnswers",basePath:"answerSetting",title:"\u8BBE\u7F6E\u95EE\u5377\u56DE\u6536\u4E0A\u9650",type:"number",prefix:"\u56DE\u6536",suffix:"\u4EFD\u95EE\u5377\u540E\uFF0C\u505C\u6B62\u6536\u96C6",style:{width:80,margin:"0 5px"}})]})})}),xe=n(64031),Ke=(0,p.Pi)(function(){var i=ye("-content"),a=(0,ie.IE)(),l=a.setting,C=(0,D.useMemo)(function(){return(0,xe.Np)({initialValues:a.setting,effects:function(){(0,xe.ge)("*",function(m){var y=m.address.toString();console.log(y);var F=y.split("."),g=(0,w.Z)(F,2),r=g[0],j=g[1];a.setting&&a.setting[r]&&(j?a.setting[r][j]=m.value:a.setting[r]=m.value),M.hi.updateSetting({id:a.id,settingKey:y,settingValue:m.value}).then(function(I){I.success&&oe.default.info("\u4FDD\u5B58\u4E2D")})})}})},[]);return(0,D.useEffect)(function(){l&&C.setInitialValues(l)},[l,C]),(0,e.jsx)(p.RV,{form:C,children:(0,e.jsx)("div",{className:i,children:(0,e.jsxs)(R.Z,{gutter:[2,2],children:[(0,e.jsx)(t.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(Fe,{})}),(0,e.jsx)(t.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(fe,{})}),(0,e.jsx)(t.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(Oe,{})}),(0,e.jsx)(t.Z,{xs:24,sm:8,xl:6,children:(0,e.jsx)(Ne,{})})]})})})}),Qe=n(7359),ge=n(27279),je=n(8212),Le=n(50206),Re=n(25782),Ve=n(94184),be=n.n(Ve),Ce=ge.Z.Panel,S=[{key:"answerSetting",title:"\u6570\u636E\u6536\u96C6\u8BBE\u7F6E",icon:(0,e.jsx)(je.Z,{}),description:"\u57FA\u672C\u7684\u95EE\u5377\u586B\u5199\u8BBE\u7F6E"},{key:"answerLimitSetting",title:"\u7B54\u9898\u9650\u5236",icon:(0,e.jsx)(je.Z,{}),description:"\u95EE\u5377\u7B54\u9898\u9650\u5236"},{key:"memberSetting",title:"\u534F\u540C\u7F16\u8F91",icon:(0,e.jsx)(Le.Z,{}),description:"\u8BBE\u7F6E\u534F\u4F5C\u7BA1\u7406\u5458"},{key:"submittedSetting",title:"\u63D0\u4EA4\u95EE\u5377\u6570\u636E\u540E",icon:(0,e.jsx)(me.Z,{}),description:"\u95EE\u5377\u63D0\u4EA4\u5B8C\u6210\u9875\u9762\u8BBE\u7F6E"}],s=(0,p.Pi)(function(){var i=ye("-nav"),a=(0,D.useContext)(W),l=a.settingStore,C=l.activePanel;return(0,e.jsx)("div",{className:i,children:(0,e.jsxs)(ge.Z,{accordion:!0,expandIcon:function(m){var y=m.isActive;return(0,e.jsx)(Re.Z,{rotate:y?90:0})},defaultActiveKey:"1",children:[(0,e.jsx)(Ce,{header:"\u57FA\u7840\u8BBE\u7F6E",style:{padding:0},children:S.map(function(v){return(0,e.jsxs)(R.Z,{className:be()("nav-panel-item",{active:C===v.key}),onClick:function(){return l.activePanel=v.key},children:[(0,e.jsx)(t.Z,{span:4,children:(0,e.jsx)(ce.C,{icon:v.icon,shape:"square"})}),(0,e.jsx)(t.Z,{span:20,children:(0,e.jsxs)(R.Z,{children:[(0,e.jsx)(t.Z,{span:24,children:v.title}),(0,e.jsx)(t.Z,{span:24,style:{fontSize:12,color:"#8c8c8c"},children:v.description})]})})]},v.key)})},"1"),(0,e.jsx)(Ce,{header:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)("p",{children:"todo"})},"2")]})})}),u=n(69610),o=n(54941),h=n(54531),f=function(){function i(a){(0,u.Z)(this,i),this.rootStore=void 0,this.activePanel=void 0,this.rootStore=a,this.activePanel="answerSetting",this.makeObservable()}return(0,o.Z)(i,[{key:"makeObservable",value:function(){(0,h.Ou)(this,{rootStore:h.LO.ref,activePanel:h.LO.ref})}}]),i}(),d=n(77613),x=(0,d.P)(function(){var i=(0,ie.IE)(),a=(0,D.useMemo)(function(){return new f(i)},[i]);return(0,e.jsx)(W.Provider,{value:{prefixCls:"survey-setting",settingStore:a},children:(0,e.jsx)("div",{className:"survey-setting",children:(0,e.jsx)(Ke,{})})})}),Z=x}}]);
