(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[520],{55686:function(tt,Be,c){"use strict";var U=c(11849),J=c(94233),y=c(51890),H=c(93224),T=c(89366),p=c(85893),C=function(ne){var pe=ne.user,b=(0,H.Z)(ne,["user"]);return!pe||!pe.avatar?(0,p.jsx)(y.C,(0,U.Z)({icon:(0,p.jsx)(T.Z,{}),size:b.size||"small"},b)):(0,p.jsx)(y.C,(0,U.Z)({src:"/api/public/preview/".concat(pe.avatar),size:b.size||"small"},b))};Be.Z=C},78210:function(tt,Be,c){"use strict";var U=c(15020),J=c(85893),y=function(T){var p=T.html,C=p===void 0?"":p,Fe=T.replaceP,ne=Fe===void 0?!0:Fe;return ne?(0,J.jsx)(J.Fragment,{children:typeof C=="string"&&(0,U.ZP)(C.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,J.jsx)(J.Fragment,{children:typeof C=="string"&&(0,U.ZP)(C)})};Be.Z=y},45290:function(tt,Be,c){"use strict";c.d(Be,{Mt:function(){return rt},hl:function(){return S},AT:function(){return De},HN:function(){return ye},we:function(){return Ee},x4:function(){return It},k9:function(){return C},oq:function(){return mt},jI:function(){return it}});var U=c(80937),J=c(67294),y=c(24004),H=c(95522),T=c(87998),p=c(85893);function C(A){var F=(0,J.useContext)(y.ZX),M=F.theme,W=F.footerVisible,ue=F.headerVisible,fe=A.schema,ee=function(D){var w=(0,H.GZ)(M,"Survey");if(w)return J.createElement(w,{schema:fe,footerVisible:W,headerVisible:ue},D)},L=function(){var D,w=-1;return(D=fe.children)===null||D===void 0?void 0:D.map(function(q){var he=q.type,Ze=q.id;return(0,T.nj)(he)||w++,he==="QuestionSet"?(0,p.jsx)(Ee,{schema:q,index:w},Ze):(0,p.jsx)(ye,{schema:q,index:w},Ze)})};return(0,p.jsxs)(p.Fragment,{children:[ee(L()),(0,p.jsx)(U.gN,{name:"_finish"})]})}var Fe=c(32059),ne=c(2824),pe=c(86582),b=c(11849);function ge(A){var F,M=[],W=A.attribute;return W&&W.required&&M.push({required:!0,triggerType:"onInput"}),W&&W.answerLimit&&M.push({answerLimit:!0,schema:A}),(F=A.children)===null||F===void 0||F.forEach(function(ue){M.push.apply(M,(0,pe.Z)(N(ue,A)))}),M.forEach(function(ue){ue.triggerType="manual"}),M}function N(A,F){var M,W,ue,fe,ee=[];if((M=A.attribute)!==null&&M!==void 0&&M.dataType){var L;ee.push((L={},(0,Fe.Z)(L,A.attribute.dataType,!0),(0,Fe.Z)(L,"schema",(0,b.Z)((0,b.Z)({},A),{},{parent:F})),L))}return(W=A.attribute)!==null&&W!==void 0&&W.required&&ee.push({required:!0,schema:(0,b.Z)((0,b.Z)({},A),{},{parent:F})}),(ue=A.attribute)!==null&&ue!==void 0&&ue.textLimit&&ee.push({textLimit:!0,schema:(0,b.Z)((0,b.Z)({},A),{},{parent:F})}),(fe=A.attribute)!==null&&fe!==void 0&&fe.scope&&ee.push({scope:!0,schema:(0,b.Z)((0,b.Z)({},A),{},{parent:F})}),ee}var I=c(80705),K=c(15020),S=function(F){var M=F.html,W=M===void 0?"":M;return(0,p.jsx)(p.Fragment,{children:typeof W=="string"&&(0,K.ZP)(W.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))})},e=function(F){return(0,p.jsx)("div",{className:"preview",children:ze(F)})};function ze(A){var F=A.schema,M=A.value;if(!M)return"";var W;if(F.type==="Radio"||F.type==="Select")Object.entries(M).some(function(L){var P=(0,ne.Z)(L,2),D=P[0],w=P[1];if(w===!0){var q,he;W=(0,p.jsx)(S,{html:(q=F.children)===null||q===void 0||(he=q.find(function(Me){return Me.id===D}))===null||he===void 0?void 0:he.title})}else if(w){var Ze,Pe;W=(0,p.jsx)(S,{html:(Ze=F.children)===null||Ze===void 0||(Pe=Ze.find(function(Me){return Me.id===D}))===null||Pe===void 0?void 0:Pe.title})}return!0});else{if(F.type==="Checkbox")return Object.entries(M).map(function(L){var P=(0,ne.Z)(L,2),D=P[0],w=P[1];if(w===!0){var q,he;return(0,p.jsx)(S,{html:(q=F.children)===null||q===void 0||(he=q.find(function(Me){return Me.id===D}))===null||he===void 0?void 0:he.title},D)}else if(w){var Ze,Pe;return(0,p.jsx)(S,{html:(Ze=F.children)===null||Ze===void 0||(Pe=Ze.find(function(Me){return Me.id===D}))===null||Pe===void 0?void 0:Pe.title},D)}}).reduce(function(L,P){return[L,", ",P]});if(F.type==="Cascader"){var ue=F.children.map(function(L){return L.id}),fe=ue.map(function(L){return M[L]}),ee=F.dataSource;return fe.filter(function(L){return L!==void 0}).map(function(L,P){var D,w=(D=ee)===null||D===void 0?void 0:D.find(function(q){return q.value===L});return ee=w.children,(0,p.jsx)("span",{children:w.label},ue[P])})}else if(F.type==="FillBlank"||F.type==="MultipleBlank"||F.type==="Textarea"||F.type==="Score"||F.type==="Nps")return Object.entries(M).map(function(L){var P=(0,ne.Z)(L,2),D=P[0],w=P[1];return(0,p.jsx)("span",{children:w},D)})}return W}var ye=(0,U.Pi)(function(F){var M=F.schema,W=F.index,ue=F.qsIndex,fe=M.id,ee=M.type,L=(0,J.useContext)(y.ZX),P=L.theme,D=L.optionTypes,w=L.id2title,q=L.schema,he=(0,U.cI)(),Ze=(0,J.useMemo)(function(){return(0,T.cB)(M,"calculate")},[]),Pe=(0,J.useMemo)(function(){var V;return(0,U.$j)((0,H.I8)(P,ee),(0,U.jM)(function(B,z){return(0,b.Z)((0,b.Z)({},B),{},{onChange:function(G){function le(){z.selfErrors.length>0&&z.validate().catch(function(){})}if(!B.readOnly){if((0,I.xb)(G)){z.onInput(void 0),le();return}if(ee.startsWith("Matrix")&&(0,T.hb)(G)){le(),z.onInput(void 0);return}G&&Object.keys(G).forEach(function(_){G[_]===void 0&&(G[_]="")}),z.onInput(G),le()}}})}),(0,U.vl)(((V=(0,H.I8)(P,ee))===null||V===void 0?void 0:V.Preview)||e))},[P,ee]),Me=(0,J.useCallback)(function(V){return(0,p.jsx)("div",{tabIndex:-1,onBlur:V==null?void 0:V.onBlur,"data-id":V.schema.id,children:J.createElement((0,H.GZ)(P,"Question"),V)})},[P]),ut=(0,J.useMemo)(function(){return(0,U.$j)(Me,(0,U.jM)(function(V,B){return(0,b.Z)((0,b.Z)({},V),{},{error:B.selfErrors.length?(0,pe.Z)(B.selfErrors):[],warning:B.selfWarnings.length?B.selfWarnings:[],onBlur:function(){return B.onBlur.apply(B,arguments)},required:B.required})}))},[Me]),Ge=(0,J.useMemo)(function(){return(0,U.$j)((0,H.I8)(P,ee),(0,U.jM)(function(V,B){return(0,b.Z)({},V)}))},[P,ee]);return(0,T.nj)(M.type)?(0,p.jsx)(U.jG,{name:fe,component:[Ge,{schema:M,controlShow:void 0}],reactions:[function(V){var B,z=(B=M.attribute)===null||B===void 0?void 0:B.replaceTextRule;if(z){var O=(0,T.vW)(z,function(le){var _=(0,T.Op)(le),re=(0,ne.Z)(_,1),ce=re[0],oe=V.query(ce).get("value");return(0,T.d0)(D,oe,le,w)}),G="";O.success&&O.result&&(G=O.result),V.setComponentProps((0,b.Z)((0,b.Z)({},V.componentProps),{},{replaceTitle:G}))}}]}):(0,p.jsx)(U.gN,{name:fe,component:[Pe,{schema:M,controlShow:void 0}],decorator:[ut,{schema:M,index:W,qsIndex:ue}],validator:ge(M),reactions:[function(V){Object.entries(Ze).forEach(function(B){var z=(0,ne.Z)(B,2),O=z[0],G=z[1],le=G,_=(0,T.vW)(le,function(re){var ce=(0,T.Op)(re),oe=(0,ne.Z)(ce,2),$e=oe[0],Re=oe[1],et=V.query($e).get("value");return(0,T.d0)(D,et,re)});_.success&&V.setState(function(re){var ce;return re.value=(0,b.Z)((0,b.Z)({},re.value),{},(0,Fe.Z)({},O,(0,T.A7)(_.result,(ce=M.children)===null||ce===void 0?void 0:ce.find(function(oe){return oe.id===O}))))})})},function(V){var B,z=(B=M.attribute)===null||B===void 0?void 0:B.visibleRule;if(z){var O=(0,T.vW)(z,function(_){var re=(0,T.Op)(_),ce=(0,ne.Z)(re,2),oe=ce[0],$e=ce[1],Re=V.query(oe).get("value");return(0,T.d0)(D,Re,_)});if(O.success){var G;O.result?V.display="visible":V.display="none";var le=1;(G=q.children)===null||G===void 0||G.forEach(function(_){var re=_.id,ce=V.query(re).get("display");if(ce==="visible"){var oe=he.query(re).take();oe&&(oe.setDecoratorProps((0,b.Z)((0,b.Z)({},oe.decoratorProps),{},{seqNo:le})),le++);var $e=1;if(_.type==="QuestionSet"){var Re;(Re=_.children)===null||Re===void 0||Re.forEach(function(et){var yt=et.id,Qe=V.query(yt).get("display");if(Qe==="visible"){var Ke=he.query(yt).take();Ke&&(Ke.setDecoratorProps((0,b.Z)((0,b.Z)({},Ke.decoratorProps),{},{seqNo:$e})),$e++)}})}}})}}},function(V){var B,z=(B=M.attribute)===null||B===void 0?void 0:B.requiredRule;if(z){var O=(0,T.vW)(z,function(G){var le=(0,T.Op)(G),_=(0,ne.Z)(le,2),re=_[0],ce=_[1],oe=V.query(re).get("value");return(0,T.d0)(D,oe,G)});O.success&&(O.result?V.required=!0:V.required=!1)}},function(V){var B,z=(B=M.attribute)===null||B===void 0?void 0:B.replaceTextRule;if(z){var O=(0,T.vW)(z,function(le){var _=(0,T.Op)(le),re=(0,ne.Z)(_,1),ce=re[0],oe=V.query(ce).get("value");return(0,T.d0)(D,oe,le,w)}),G="";O.success&&O.result&&(G=O.result),V.setDecoratorProps((0,b.Z)((0,b.Z)({},V.decoratorProps),{},{replaceTitle:G}))}},function(V){var B,z=(B=M.attribute)===null||B===void 0?void 0:B.validateRule;if(z){var O=(0,T.vW)(z,function(G){var le=(0,T.Op)(G),_=(0,ne.Z)(le,1),re=_[0],ce=V.query(re).get("value");return(0,T.d0)(D,ce,G,w)});O.success&&(O.result?V.setSelfErrors([O.result]):V.setSelfErrors([]))}}]})});function Ee(A){var F=A.schema,M=A.index,W=F.id,ue=(0,J.useContext)(y.ZX),fe=ue.theme,ee=function(){var P;return(P=F.children)===null||P===void 0?void 0:P.map(function(D,w){return D.type==="QuestionSet"?(0,p.jsx)(Ee,{schema:D,index:w},D.id):(0,p.jsx)(ye,{schema:D,index:w,qsIndex:M},D.id)})};return(0,p.jsx)(U.jG,{name:W,decorator:[(0,H.GZ)(fe,"QuestionSet"),{schema:F,index:M}],children:ee()})}var qe=function(F){var M=F.progress,W=M===void 0?0:M;return _jsx("div",{className:"progress-bar",style:{width:"".concat(W*100,"%")}})},at=c(16165),Le=function(){return(0,p.jsxs)("svg",{viewBox:"0 0 1024 1024",width:"150",height:"150",children:[(0,p.jsx)("path",{d:"M0 0h1024v1024H0z",fill:"#FFFFFF","p-id":"44112"}),(0,p.jsx)("path",{d:"M160 73.426667h83.173333V0h98.266667v155.010667h75.6v179.485333h37.813333V163.168h22.666667v-40.8h68.053333v24.474667h30.24v342.666666h60.48V40.8h45.36v236.586667h22.666667V179.485333h45.36V16.317333H893.333333V824H160V73.426667z",fill:"#DDEEFF",opacity:".4","p-id":"44113"}),(0,p.jsx)("path",{d:"M362.693333 741.416l635.866667 95.584L689.893333 997.333333 24 852.36z",fill:"#DFE7F7","p-id":"44114"}),(0,p.jsx)("path",{d:"M1002.64 813.370667l-307.6 160.322666-665.893333-144.970666-0.826667-2.629334v-8.213333l20.586667 2.666667v1.701333l318.933333-104.469333 614.213333 92.48v-5.101334H1002.666667v8.213334h-0.026667z",fill:"#5AA12E","p-id":"44115"}),(0,p.jsx)("path",{d:"M1002.64 805.157333l-308.64 160.314667-665.653333-144.92h-0.026667l-0.213333-0.04 0.213333-0.064v-8.104l17.733333 2.296 320.746667-105.066667 615.253333 92.488v-5.098666H1002.666667v8.213333h-0.026667z",fill:"#93C110","p-id":"44116"}),(0,p.jsx)("path",{d:"M366.8 701.333333L1002.666667 796.917333l-308.666667 160.333334L28.106667 812.266667z",fill:"#EEF2F5","p-id":"44117"}),(0,p.jsx)("path",{d:"M629.333333 809.333333a138.666667 6.666667 0 1 0 277.333334 0 138.666667 6.666667 0 1 0-277.333334 0Z",fill:"#E3E7EA","p-id":"44118"}),(0,p.jsx)("path",{d:"M162.666667 773.333333a152 13.333333 0 1 0 304 0 152 13.333333 0 1 0-304 0Z",fill:"#E3E7EA","p-id":"44119"}),(0,p.jsx)("path",{d:"M922.666667 610.666667h-64v170.666666h53.333333a13.333333 13.333333 0 0 1 0 26.666667h-181.333333a13.333333 13.333333 0 0 1 0-26.666667h58.666666v-144h-26.666666a10.666667 10.666667 0 0 1-10.666667-10.666666v-16h-117.333333v82.666666a8 8 0 0 1-16 0v-82.666666h-5.333334a10.666667 10.666667 0 0 1-10.666666-10.666667v-2.666667l48-50.666666h4.48a7.658667 7.658667 0 0 1 1.573333-0.968l187.093333-83.381334a10.4 10.4 0 0 1 14.773334 6.208l72.453333 81.178667a8.066667 8.066667 0 0 1 2.08 5.461333 11.581333 11.581333 0 0 1 0.213333 2.168v42.666667a10.666667 10.666667 0 0 1-10.666666 10.666667z m-272-42.666667l-26.666667 29.333333h26.666667v-29.333333z m117.333333 53.333333h66.666667v-58.666666h-29.333334l-37.333333 37.333333v21.333333z m-16-24l37.333333-37.333333h-37.333333v37.333333z m-45.333333 0h21.333333v-37.333333h-21.333333v37.333333z m-18.666667-37.333333h-21.333333v37.333333h21.333333v-37.333333z m5.84-13.333333h96.693333a9.224 9.224 0 0 1 0.693334-1.6l32.506666-56.290667zM842.666667 487.976L808.773333 546.666667H842.666667v-58.690667zM845.333333 648h-42.666666v26.666667h42.666666v-26.666667z m0 37.333333h-42.666666v42.666667h42.666666v-42.666667z m0 53.333334h-42.666666v42.666666h42.666666v-42.666666z m13.333334-141.333334h21.333333v-37.333333h-21.333333v37.333333z m0-104.690666V546.666667h48.213333zM917.333333 560h-21.333333v37.333333h21.333333v-37.333333z",fill:"#8BC8FF","p-id":"44120"}),(0,p.jsx)("path",{d:"M592 709.333333h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H514.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H592a8 8 0 0 1 0 16z",fill:"#DFF0FF","p-id":"44121"}),(0,p.jsx)("path",{d:"M936 298.666667h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205334 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H858.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205334H936a8 8 0 0 1 0 16z",fill:"#C3E2FF","p-id":"44122"}),(0,p.jsx)("path",{d:"M104 408H45.333333a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205334H26.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205334 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H104a8 8 0 0 1 0 16z",fill:"#DCEEFF","p-id":"44123"}),(0,p.jsx)("path",{d:"M309.333333 522.666667m-245.333333 0a245.333333 245.333333 0 1 0 490.666667 0 245.333333 245.333333 0 1 0-490.666667 0Z",fill:"#FFCC6C","p-id":"44124"}),(0,p.jsx)("path",{d:"M296 730.666667a245.389333 245.389333 0 0 0 237.013333-308.746667 245.333333 245.333333 0 1 1-460.693333 164.16A245.333333 245.333333 0 0 0 296 730.666667z",fill:"#F3B72C","p-id":"44125"}),(0,p.jsx)("path",{d:"M338.666667 464m-50.666667 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#E49817","p-id":"44126"}),(0,p.jsx)("path",{d:"M333.333333 456m-50.666666 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#FFFFFF","p-id":"44127"}),(0,p.jsx)("path",{d:"M303.333333 603.2a37.085333 37.085333 0 1 1-38 37.066667 37.544 37.544 0 0 1 38-37.066667z",fill:"#E49817","p-id":"44128"}),(0,p.jsx)("path",{d:"M299.333333 597.333333A37.085333 37.085333 0 1 1 261.333333 634.4a37.544 37.544 0 0 1 38-37.066667z",fill:"#FFFFFF","p-id":"44129"}),(0,p.jsx)("path",{d:"M182.786667 554.125333m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#E49817","p-id":"44130"}),(0,p.jsx)("path",{d:"M179.88 549.874667m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#FFFFFF","p-id":"44131"}),(0,p.jsx)("path",{d:"M251.733333 320.424a19.794667 19.794667 0 1 1-20.266666 19.789333 20.026667 20.026667 0 0 1 20.266666-19.789333z",fill:"#E49817","p-id":"44132"}),(0,p.jsx)("path",{d:"M249.6 317.333333a19.794667 19.794667 0 1 1-20.266667 19.786667 20.026667 20.026667 0 0 1 20.266667-19.786667z",fill:"#FFFFFF","p-id":"44133"}),(0,p.jsx)("path",{d:"M426.04 365.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44134"}),(0,p.jsx)("path",{d:"M419.293333 357.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44135"}),(0,p.jsx)("path",{d:"M466.04 589.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44136"}),(0,p.jsx)("path",{d:"M459.293333 581.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44137"}),(0,p.jsx)("path",{d:"M490.666667 860a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44138"}),(0,p.jsx)("path",{d:"M480 801.333333a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44139"}),(0,p.jsx)("path",{d:"M526.453333 597.12a48.968 48.968 0 0 0-4.586666-4.722667c55.493333-36.413333 83.466667-80.64 68.986666-121.04-8.746667-24.416-31.866667-44.266667-64.773333-58.512-0.346667-0.984-0.666667-1.970667-1.12-2.946666a40.712 40.712 0 0 0-3.12-5.410667c39.093333 15.2 66.72 37.432 76.72 65.333333 15.306667 42.656-14.026667 89.253333-72.106667 127.298667zM573.333333 856v5.333333s-135.84 11.306667-109.333333-136c19.866667-100.330667-32.586667-80.72-41.386667-80.112 0 0 0 0.016 0.026667 0.026667a595.552 595.552 0 0 1-66.4 17.274667c-160.48 32.136-312.186667-2.04-338.8-76.336-13.413333-37.413333 7.466667-77.866667 51.973333-112.904a31.802667 31.802667 0 0 0 0.293334 7.485333c0.053333 0.24 0.133333 0.464 0.186666 0.701333-39.04 32.48-56.933333 69.181333-44.746666 103.173334 25.493333 71.109333 172.8 103.397333 329.013333 72.114666a589.661333 589.661333 0 0 0 64.533333-16.714666L418.666667 640s72.826667-26.768 50.666666 80c-17.92 86.293333 13.146667 138.845333 104 136z",fill:"#FFE1A9","p-id":"44140"}),(0,p.jsx)("path",{d:"M512 884a74.666667 6.666667 0 1 0 149.333333 0 74.666667 6.666667 0 1 0-149.333333 0Z",fill:"#E3E7EA","p-id":"44141"}),(0,p.jsx)("path",{d:"M608.453333 802.666667h20.426667l17.093333 75.917333h-54.613333z m-6.88 15.165333h34.186667v6.752h-34.186667v-6.752z m-5.066666 16.917333h44.32v6.749334h-44.32v-6.749334z m-5.173334 21.917334h54.666667v6.749333h-54.666667v-6.749333z m-11.946666 21.917333h78.56a3.381333 3.381333 0 0 1 3.386666 3.373333 3.384 3.384 0 0 1-3.386666 3.373334h-78.56a3.384 3.384 0 0 1-3.386667-3.373334 3.381333 3.381333 0 0 1 3.386667-3.373333z",fill:"#F9A303","p-id":"44142"}),(0,p.jsx)("path",{d:"M768 838.666667a58.666667 6.666667 0 1 0 117.333333 0 58.666667 6.666667 0 1 0-117.333333 0Z",fill:"#E3E7EA","p-id":"44143"}),(0,p.jsx)("path",{d:"M880 845.333333a5.181333 5.181333 0 0 0 5.333333-5v-70a5.181333 5.181333 0 0 0-5.333333-5v80z",fill:"#845C45","p-id":"44144"}),(0,p.jsx)("path",{d:"M880 845.333333a5.181333 5.181333 0 0 1-5.333333-5v-70a5.181333 5.181333 0 0 1 5.333333-5v80z",fill:"#BA805A","p-id":"44145"}),(0,p.jsx)("path",{d:"M880 770.666667a45.333333 45.333333 0 0 0 0-90.666667v90.666667z",fill:"#628A21","p-id":"44146"}),(0,p.jsx)("path",{d:"M880 770.666667a45.333333 45.333333 0 0 1 0-90.666667v90.666667z",fill:"#6EA52E","p-id":"44147"}),(0,p.jsx)("path",{d:"M568 786.778667l-1.946667 6.824a1.130667 1.130667 0 0 1-1.173333 0.773333l-4.16-0.349333a19.581333 19.581333 0 0 1-18.88 8.477333l-13.093333-1.664 0.026666-0.04a3.733333 3.733333 0 0 1-0.986666-0.397333c-2.586667-1.504-3.706667-5.986667-3.306667-11.509334l-7.146667-1.816a3.408 3.408 0 0 1-2.56-4.173333 3.656 3.656 0 0 1 4.426667-2.4l6.453333 1.642667c0.293333-1.066667 0.613333-2.154667 1.013334-3.237334 0.213333-0.621333 0.453333-1.221333 0.693333-1.810666l-7.626667-1.938667a3.410667 3.410667 0 0 1-2.56-4.176 3.653333 3.653333 0 0 1 4.426667-2.4l9.12 2.317333a11.101333 11.101333 0 0 1 7.306667-5.472V765.333333l8.906666 1.136a18.562667 18.562667 0 0 1 16.613334 17.386667l3.813333 1.685333a1.066667 1.066667 0 0 1 0.64 1.237334z m-26.693333-20.149334c-2.693333-1.52-6.24 0.429333-9.306667 4.578667l4.08 1.032a3.392 3.392 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-5.68-1.437333c-0.24 0.573333-0.48 1.16-0.693333 1.765333q-0.6 1.642667-1.04 3.274667l6.88 1.744a3.389333 3.389333 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-6.133333-1.557333c-0.32 5.184 0.853333 9.368 3.386667 10.805333 4.053333 2.298667 10.08-3.309333 13.44-12.533333s2.853333-18.52-1.2-20.818667z",fill:"#FF6767","p-id":"44148"}),(0,p.jsx)("path",{d:"M578.666667 789.333333s194 0.666667 98.666666 64l-2.666666-2.666666s100.826667-53-98.666667-58.666667z",fill:"#FFE1A9","p-id":"44149"})]})},De=function(F){return(0,p.jsx)(at.Z,(0,b.Z)({component:Le},F))},ct=c(27484),Ye=c.n(ct),Ft=c(75977),Oe=c(45418),Et=c(62713),ea=c(33852),Ve=c(10285),Mt=c.n(Ve),vt=c(72540),St=c.n(vt),nt=c(96036),Nt=c.n(nt);Ye().locale("zh-cn"),Ye().extend(St()),Ye().extend(Mt()),Ye().extend(Nt());var rt=(0,Oe.default)((0,b.Z)({},Ft.Z)),ht=rt,it=J.forwardRef(function(A,F){return(0,p.jsx)(ht,(0,b.Z)((0,b.Z)({},A),{},{picker:"time",mode:void 0,ref:F}))});it.displayName="TimePicker";var Pt=null,wt=c(57663),se=c(71577);function ft(){return(0,J.useContext)(T.ff)}var mt=(0,U.Pi)(function(){var A,F=ft(),M=((A=F.savedAnswer)===null||A===void 0?void 0:A.progress)||0;return(0,p.jsx)("div",{className:"temp-confirm",children:(0,p.jsxs)("div",{className:"temp-confirm-cont",children:[(0,p.jsx)("div",{children:(0,p.jsxs)("svg",{t:"1647102518492",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4235",width:"128",height:"128",children:[(0,p.jsx)("path",{d:"M876.88894187 362.30785921v463.42517333c0 23.4826304-19.07152853 42.6838976-42.55415894 42.6838976-23.61236907 0-42.6838976-19.07152853-42.6838976-42.6838976V362.30785921h85.23805654z",fill:"#CCCBCA","p-id":"4236","data-spm-anchor-id":"a313x.7781069.0.i0",className:"selected"}),(0,p.jsx)("path",{d:"M791.52114667 825.86277121V235.68328748l-103.27167894-103.27167894H146.98132053v693.45116267c0 10.898016 4.1516256 21.79603307 12.45487574 30.0992832 8.30325013 8.30325013 19.3310048 12.45487573 30.0992832 12.45487573H834.20504427c-23.4826304 0.12973867-42.6838976-19.07152853-42.6838976-42.55415893z",fill:"#FFFFFF","p-id":"4237","data-spm-anchor-id":"a313x.7781069.0.i1",className:"selected"}),(0,p.jsx)("path",{d:"M210.81255893 544.97937174h246.502752v11.4169696h-246.502752zM210.81255893 581.95478508h246.502752v11.28723093h-246.502752zM210.81255893 618.93019734h246.502752v11.4169696h-246.502752zM210.81255893 655.90561068h246.502752v11.4169696h-246.502752zM210.81255893 692.88102294h246.502752v11.4169696h-246.502752zM210.81255893 729.85643628h246.502752v11.4169696h-246.502752zM210.81255893 766.83184854h246.502752v11.4169696h-246.502752z",fill:"#CCCBCA","p-id":"4238"}),(0,p.jsx)("path",{d:"M210.81255893 397.07772054h246.502752V519.42092908h-246.502752z",fill:"#516575","p-id":"4239"}),(0,p.jsx)("path",{d:"M482.8737536 397.07772054h246.63249067v11.4169696H482.8737536zM482.8737536 434.05313388h246.63249067v11.4169696H482.8737536zM482.8737536 471.02854614h246.63249067v11.4169696H482.8737536zM482.8737536 508.00395948h246.63249067v11.4169696H482.8737536zM482.8737536 544.97937174h246.63249067v11.4169696H482.8737536zM482.8737536 581.95478508h246.63249067v11.28723093H482.8737536zM482.8737536 618.93019734h246.63249067v11.4169696H482.8737536zM482.8737536 655.90561068h246.63249067v122.34320746H482.8737536z",fill:"#CCCBCA","p-id":"4240","data-spm-anchor-id":"a313x.7781069.0.i5",className:"selected"}),(0,p.jsx)("path",{d:"M494.1609856 685.87515521h24.00158293V767.22106348h-24.00158293zM527.50372587 732.84041601H551.3755712V767.22106348h-23.87184533zM560.84646613 695.86500374h24.001584v71.35605974h-24.001584zM594.18920747 709.74700054h24.00158293V767.22106348H594.18920747zM627.53194773 675.10687681h24.001584v92.11418667h-24.001584zM660.874688 751.39299201h23.87184533V767.22106348h-23.87184533zM694.21742933 692.88102294h24.00158294V767.22106348h-24.00158294z",fill:"#FFFFFF","p-id":"4241"}),(0,p.jsx)("path",{d:"M209.1259616 245.54339841h520.250544v76.15637547h-520.250544z",fill:"#EC6C3F","p-id":"4242"}),(0,p.jsx)("path",{d:"M209.1259616 344.27423681h520.250544v7.1356064h-520.250544zM209.1259616 215.96306774h520.250544v7.1356064h-520.250544z",fill:"#2B4456","p-id":"4243"}),(0,p.jsx)("path",{d:"M791.52114667 235.68328748h-103.27167894v-103.27167894z",fill:"#CCCBCA","p-id":"4244"})]})}),(0,p.jsxs)("h4",{className:"confirm-title",children:[(0,p.jsx)("span",{children:"\u4E4B\u524D\u7684\u586B\u5199\u8FDB\u5EA6\u4E3A"}),(M*100).toFixed(0),"%",(0,p.jsx)("br",{}),(0,p.jsx)("span",{children:"\u662F\u5426\u7EE7\u7EED\u4E0A\u6B21\u586B\u5199\uFF1F"})]}),(0,p.jsxs)("div",{className:"confirm-btn-group",children:[(0,p.jsx)(se.Z,{type:"primary",block:!0,onClick:function(){F.confirmTempAnswerType=2},children:"\u7EE7\u7EED\u586B\u5199"}),(0,p.jsx)(se.Z,{block:!0,style:{marginTop:15},onClick:function(){F.confirmTempAnswerType=3},children:"\u91CD\u65B0\u586B\u5199"})]})]})})}),At=c(34792),xt=c(48086),st=c(47673),We=c(4107),ta=c(49111),_e=c(19650),pt=c(68489),gt=c(27400),jt=c(74855),Ct=c(73727),It=(0,U.Pi)(function(){var A,F,M=ft(),W=(0,gt.a)(),ue=M.success,fe=(A=M.setting)===null||A===void 0?void 0:A.submittedSetting,ee=(F=M.setting)===null||F===void 0?void 0:F.answerSetting.loginRequired,L=fe||{},P=L.contentHtml,D=M.answerUrl,w=M.answerQrCodeUrl,q=M.answerView;return ue?(0,p.jsx)("div",{className:"survey-end animated",children:(0,p.jsxs)("div",{className:"survey-end-content",children:[(0,p.jsx)("h3",{className:"survey-end-title ",children:(0,p.jsxs)("div",{children:[(0,p.jsx)(S,{html:P||"\u95EE\u5377\u5230\u6B64\u7ED3\u675F\uFF0C\u611F\u8C22\u60A8\u7684\u53C2\u4E0E\uFF01"}),(0,p.jsx)("div",{children:(q==null?void 0:q.examScore)!==void 0?(0,p.jsxs)("span",{children:["\u4F60\u7684\u5F97\u5206\u662F",q.examScore,"\u5206"]}):(0,p.jsx)(p.Fragment,{})}),(0,p.jsx)("div",{children:ee&&(0,p.jsxs)(_e.Z,{children:[(0,p.jsx)(Ct.rU,{to:"/",children:(0,p.jsx)(se.Z,{type:"link",onClick:function(){},children:"\u8FD4\u56DE\u9996\u9875"})}),(0,p.jsx)(se.Z,{type:"link",onClick:function(){W.logout(),(0,pt.on)()},children:"\u9000\u51FA\u5173\u95ED"})]})})]})}),D&&(0,p.jsxs)("div",{className:"survey-end-result",children:[(0,p.jsx)("div",{style:{border:"1px solid #e1e7f2",borderRadius:3,boxShadow:"0px 3px 8px 0px rgb(224 229 236 / 40%)",width:100,height:100},children:(0,p.jsx)("img",{src:w,height:95,width:95})}),(0,p.jsxs)(We.Z.Group,{compact:!0,className:"survey-end-result-copy",children:[(0,p.jsx)(We.Z,{defaultValue:D,style:{width:300,background:"#f6f6f6",border:"1px solid #e1e7f2"}}),(0,p.jsx)(jt.CopyToClipboard,{text:D,onCopy:function(){return xt.default.success("\u590D\u5236\u6210\u529F")},children:(0,p.jsx)(se.Z,{children:"\u590D\u5236"})})]}),(0,p.jsx)("span",{className:"survey-end-result-tip",children:"\u957F\u6309\u4FDD\u5B58\u4E8C\u7EF4\u7801\u6216\u8005\u590D\u5236\u94FE\u63A5\u53EF\u4EE5\u4FEE\u6539\u7B54\u6848"})]})]})}):(0,p.jsx)(p.Fragment,{})})},39017:function(tt,Be,c){"use strict";c.d(Be,{Rk:function(){return pe},AK:function(){return y},Al:function(){return Fe}});var U=c(67294),J=c(24004);function y(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ge=(0,U.useContext)(J.ZX),N=ge.theme;return"survey-".concat(N)+b}function H(b,ge){var N=(ge&&ge.depends||[]).reduce(function(I,K){return I||!K},!1);return T(N?void 0:function(I,K){return fetch(I,K).then(function(S){if(!!S.ok)return S.json()})},b,ge||{})}function T(b){for(var ge=arguments.length,N=new Array(ge>1?ge-1:0),I=1;I<ge;I++)N[I-1]=arguments[I];var K=useState(0),S=_slicedToArray(K,2),e=S[0],ze=S[1],ye=useCallback(function(){ze(Math.random())},[]),Ee=useState({loading:!1,mutate:ye}),qe=_slicedToArray(Ee,2),at=qe[0],Le=qe[1];return useEffect(function(){!b||N[1].manual&&e===0||b.apply(null,N).then(function(De){De.code===200?Le({loading:!1,data:De.data,mutate:ye}):Le({error:De.message,loading:!1,mutate:ye})}).catch(function(De){Le({error:De,loading:!1,mutate:ye})})},p(e,N)),at}function p(){for(var b=arguments.length,ge=new Array(b),N=0;N<b;N++)ge[N]=arguments[N];for(var I=[],K=0;K<arguments.length;K++){var S=arguments[K];if(S instanceof Array)for(var e=0;e<S.length;e++)I=I.concat(p(S[e]));else if(typeof URL!="undefined"&&S instanceof URL)I=I.concat(S.toJSON());else if(S instanceof Object)for(var ze=Object.keys(S),ye=0;ye<ze.length;ye++){var Ee=ze[ye];Ee==="depends"?I=I.concat(S[Ee]):I=I.concat([Ee]).concat(p(S[Ee]))}else I=I.concat(S)}return I}var C=c(87998);function Fe(){return(0,U.useContext)(C.ZX)}function ne(){return useSurvey().attachments}function pe(){var b=(0,U.useContext)(C.ZX);return b.innerStore}},40520:function(tt,Be,c){"use strict";c.d(Be,{O:function(){return Jt},Z:function(){return Ua}});var U=c(91220),J=c(3182),y=c(11849),H=c(2824),T=c(94043),p=c.n(T),C=c(67294),Fe=c(80937),ne=c(64031),pe=c(54531),b=c(45290),ge=c(24004),N=c(95522),I=c(78210),K=c(87998),S=c(39017),e=c(85893);function ze(t){var a=t.schema,i=t.index,n=t.seqNo,r=(0,S.AK)("-body-questionSet"),s=(0,C.useContext)(K.ZX),v=s.questionNumber;return(0,e.jsxs)("div",{className:r,children:[(0,e.jsxs)("div",{className:r+"-title",children:[v?n||"".concat(i+1,"."):"",(0,e.jsx)(I.Z,{html:a.title})]}),t.children,(0,e.jsx)("div",{className:r+"-splitLine"})]})}(0,N.eC)("QuestionSet",ze,"antd");var ye=c(9715),Ee=c(93766);function qe(t){var a=t.schema,i=t.index,n=t.qsIndex,r=t.required,s=t.error,v=t.replaceTitle,d=t.seqNo,u=(0,C.useContext)(K.ZX),h=u.questionNumber,o=(0,S.AK)("-body-question"),l=(0,C.useState)(),m=(0,H.Z)(l,2),f=m[0],x=m[1];(0,C.useEffect)(function(){if(f){var Z,E;(Z=document.querySelector("[data-id='".concat(a.id,"']")))===null||Z===void 0||Z.classList.remove("ant-form-item-has-error"),(E=document.querySelector("[data-id='".concat(a.id,"']")))===null||E===void 0||E.querySelectorAll("[data-id]").forEach(function(ve){ve.classList.remove("ant-form-item-has-error")})}if(s.length>0){var R,ie=s[0].split("^"),$=(0,H.Z)(ie,2),k=$[0],te=$[1],X;te?(X=document.querySelector("[data-id='".concat(k,"']")),x(te)):(X=document.querySelector("[data-id='".concat(a.id,"']")),x(k)),(R=X)===null||R===void 0||R.classList.add("ant-form-item-has-error")}else f&&x(void 0)},[s]);var g="";n!==void 0&&(g+=n+1+"-"),i!==void 0&&(g+=i+1+".");var j=function(){return f?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:f})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsx)("div",{className:o,children:(0,e.jsx)(Ee.Z.Item,{label:(0,e.jsxs)("span",{className:o+"-header",children:[h?d||g:"",(0,e.jsx)(b.hl,{html:v||a.title}),j()]}),labelCol:{span:24},wrapperCol:{span:24},required:r,children:t.children})})}(0,N.eC)("Question",qe,"antd");var at=c(84305),Le=c(88182),De=c(82925),ct=function(){var a=(0,S.AK)(),i=(0,C.useContext)(K.ZX),n=i.schema;return(0,e.jsxs)("div",{className:a+"-header",children:[(0,e.jsx)("div",{className:a+"-header-title",children:(0,e.jsx)(b.hl,{html:n.title})}),(0,e.jsx)("div",{className:a+"-header-description",children:(0,e.jsx)(b.hl,{html:n.description})})]})},Ye=function(a){var i=(0,S.AK)();return(0,e.jsx)("div",{className:i+"-body",children:a.children})},Ft=c(57663),Oe=c(71577);function Et(){var t,a,i,n=(0,S.AK)("-footer"),r=(0,C.useContext)(K.ZX),s=r.schema,v=r.onSubmit,d=r.onPrev,u=r.pagination,h=r.onNext,o=r.loading,l=u.pageSize>1,m=u.current===1,f=u.current===u.pageSize,x=l?(t=s.children)===null||t===void 0?void 0:t.slice(-1)[0]:void 0;return(0,e.jsxs)("div",{className:n,children:[f&&(0,e.jsx)("div",{className:n+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(b.hl,{html:s==null||(a=s.attribute)===null||a===void 0?void 0:a.suffix})}),(0,e.jsxs)("div",{className:n+"-pagination",children:[l&&!m&&(0,e.jsx)("div",{children:(0,e.jsx)(Oe.Z,{type:"primary",block:!0,onClick:function(){return d()},children:"\u4E0A\u4E00\u9875"})}),l&&!f&&(0,e.jsx)("div",{children:(0,e.jsx)(Oe.Z,{type:"primary",block:!0,onClick:function(){return h()},children:"\u4E0B\u4E00\u9875"})}),f&&(0,e.jsx)("div",{children:(0,e.jsx)(Oe.Z,{type:"primary",block:!0,onClick:v,loading:o,children:(0,e.jsx)(b.hl,{html:((i=s.attribute)===null||i===void 0?void 0:i.submitButton)||"\u63D0\u4EA4"})})}),l&&(0,e.jsxs)("div",{className:n+"-pagination-info",children:["\u7B2C",u.current,"\u9875/\u5171",u.pageSize,"\u9875"]})]})]})}var ea=c(47673),Ve=c(4107),Mt=c(39002),vt=c(68351),St=c(14965),nt=c(77121),Nt=c(77883),rt=c(85482),ht=c(29985),it=c(46842),Pt=c(64302),wt=c(27484),se=c.n(wt),ft=c(33852);se().locale("zh-cn");var mt="YYYY-MM-DD",At="YYYY-MM-DD HH:mm:ss",xt="HH:mm:ss";function st(t,a){if(!!t){if(a==="date")return se()(t,mt);if(a==="dateTime")return se()(t,At);if(a==="time")return se()(t,xt)}}var We=function(a){var i=a.onChange,n=a.type,r=a.value,s=a.suffix,v=a.style,d=v===void 0?{width:"100%"}:v;return n==="number"?(0,e.jsx)(rt.Z,{onChange:i,value:r,style:d}):n==="date"?(0,e.jsx)(nt.Z,{onChange:function(h,o){console.log(h),i(o)},value:st(r,n),style:d}):n==="dateTime"?(0,e.jsx)(nt.Z,{showTime:!0,onChange:function(h,o){return i(o)},value:st(r,n),style:d}):n==="time"?(0,e.jsx)(vt.Z,{value:st(r,n),onChange:function(h,o){return i(o)},style:d}):n==="mobile"?(0,e.jsx)(Ve.Z,{prefix:(0,e.jsx)(ht.Z,{}),onChange:function(h){return i(h.target.value)},value:r}):n==="idCard"?(0,e.jsx)(Ve.Z,{prefix:(0,e.jsx)(it.Z,{}),onChange:function(h){return i(h.target.value)},value:r,style:d}):n==="email"?(0,e.jsx)(Ve.Z,{prefix:(0,e.jsx)(Pt.Z,{}),onChange:function(h){return i(h.target.value)},value:r,style:d}):(0,e.jsx)(Ve.Z,{onChange:function(h){return i(h.target.value)},value:r,suffix:s,style:d})},ta=c(49111),_e=c(19650),pt=c(17672),gt=function(a){var i=a.onChange,n=(0,C.useRef)(null),r=(0,C.useRef)(),s=(0,C.useRef)(),v=(0,C.useState)(0),d=(0,H.Z)(v,2),u=d[0],h=d[1];return(0,C.useEffect)(function(){var o=n.current;if(o){var l,m=new pt.Z(n.current,{onBegin:function(){h(1)}});r.current=m;var f=Math.max(window.devicePixelRatio||1,1);o.width=o.offsetWidth*f,o.height=o.offsetHeight*f,(l=o.getContext("2d"))===null||l===void 0||l.scale(f,f)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:s.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:n,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:u!==2?"block":"none"}}),u===2&&(0,e.jsx)("img",{src:s.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(_e.Z,{children:[u===1&&(0,e.jsx)(Oe.Z,{type:"link",onClick:function(){var l;(l=r.current)===null||l===void 0||l.clear(),h(0)},children:"\u6E05\u7A7A"}),(u===0||u===1)&&(0,e.jsx)(Oe.Z,{type:"primary",disabled:u!==1,ghost:!0,size:"small",onClick:function(){var l;i(r.current.toDataURL()),s.current=(l=r.current)===null||l===void 0?void 0:l.toDataURL(),h(2)},children:"\u5B8C\u6210"}),u===2&&(0,e.jsx)(Oe.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var l;h(0),(l=r.current)===null||l===void 0||l.clear()},children:"\u91CD\u7B7E"})]})})]})]})},jt=c(3024),Ct=(0,Fe.Pi)(function(){var t=(0,C.useContext)(K.ZX),a=t.progressBar,i=(0,S.AK)(),n=(0,S.Rk)(),r=n.progress;return a?(0,e.jsx)(jt.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:i+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(r*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),It=c(71194),A=c(50146);function F(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var M=function(a){var i=a.onChange,n=a.value,r=a.mapMove,s=r===void 0?!1:r,v=a.optionId,d=(0,C.useRef)(null),u=(0,C.useRef)(),h=(0,C.useRef)(),o=(0,C.useRef)(),l=(0,C.useState)(function(){if(!!n){var X=n.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(X&&X.length>2)return[parseFloat(X[1]),parseFloat(X[2])]}}),m=(0,H.Z)(l,2),f=m[0],x=m[1],g=(0,C.useState)(function(){return F(n)}),j=(0,H.Z)(g,2),Z=j[0],E=j[1],R=(0,C.useState)(!1),ie=(0,H.Z)(R,2),$=ie[0],k=ie[1],te=(0,C.useCallback)(function(X){h.current.getLocation(X,function(ve,we){if(ve==="complete"&&we.geocodes.length){var Se=we.geocodes[0].location;o.current.start(Se)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,C.useEffect)(function(){if(!!$){window["localMap".concat(v)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(Ae){var Ue=new AMap.Map("map-".concat(v),{zoom:16,center:f,dragEnable:s,zoomEnable:s});if(u.current=Ue,s){var Je=new Ae({mode:"dragMarker",map:Ue});Je.on("success",function(Ie){E(Ie.address),x([Ie.position.lng,Ie.position.lat])}),f?Je.start(f):Je.start(),Ue.panBy(0,1),o.current=Je}var xe=new AMap.Geocoder({city:"010"});h.current=xe;var bt=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});bt.getCurrentPosition(function(Ie,ke){Ie=="complete"?(Ue.setCenter(ke.position),E(ke.formattedAddress),x([ke.position.lng,ke.position.lat])):console.error(ke)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var X="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(v,"&plugin=AMap.Geocoder,AMap.Geolocation"),ve=document.createElement("script");ve.src=X,document.head.appendChild(ve);var we="https://webapi.amap.com/ui/1.1/main-async.js",Se=document.createElement("script");Se.src=we,document.head.appendChild(Se)}},[$]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(Ve.Z.TextArea,{readOnly:!0,value:F(n),onClick:function(){return k(!0)}}),(0,e.jsxs)(A.Z,{visible:$,onCancel:function(){k(!1)},onOk:function(){f&&i("".concat(Z,"[").concat(f[0],", ").concat(f[1],"]")),k(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:s&&(0,e.jsx)(Ve.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(ve){return te(ve)}})}),(0,e.jsx)("div",{ref:d,id:"map-".concat(v),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:Z})]})]})},W=function(a){var i,n=a.optionId,r=a.questionId,s=a.checked,v=a.checkedCount,d=(0,S.Al)(),u=d.statistics,h=u==null?void 0:u.questionStatistics[r],o=((h==null?void 0:h.optionStatistics.reduce(function(f,x){return f+x.count},0))||0)+v,l=(h==null||(i=h.optionStatistics.find(function(f){return f.optionId===n}))===null||i===void 0?void 0:i.count)||0;l=s?l+1:l;var m="".concat(Math.floor(l/o*1e3)/10,"%");return v===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[(0,e.jsxs)("span",{className:"vote-info-cnt ",children:[l,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:m}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:m}})})]})},ue=c(94184),fe=c.n(ue);se().locale("zh-cn");function ee(t){var a=t.headerVisible,i=t.footerVisible,n=t.schema,r=(0,S.AK)(),s=(0,S.Al)(),v=function(){var u,h=(u=n.attribute)===null||u===void 0?void 0:u.headerImage;if(h)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(h),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:fe()(r,{preview:s.isPreview}),children:[(0,e.jsx)(Ct,{}),(0,e.jsx)("div",{className:r+"-banner",children:v()}),a&&(0,e.jsx)(ct,{}),(0,e.jsx)(Le.ZP,{locale:De.Z,children:(0,e.jsx)(Ye,{children:t.children})}),i&&(0,e.jsx)(Et,{})]})}(0,N.eC)("Survey",ee,"antd");var L=c(13062),P=c(71230),D=c(89032),w=c(15746),q=c(76826);function he(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=(0,S.AK)("-body-question");function d(u,h){r[u]=h,h===""&&delete r[u],i((0,y.Z)({},r))}return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(u){var h=u.id,o=u.attribute,l=u.title,m=(0,q.Ck)(o==null?void 0:o.autoSize,[2,4]);return(0,e.jsxs)(P.Z,{style:{marginBottom:10},"data-id":h,children:[l&&(0,e.jsx)(w.Z,{className:v+"-option",span:4,children:u.title&&(0,e.jsx)("span",{className:v+"-option-title",children:u.title})},u.id),(0,e.jsx)(w.Z,{span:12,children:(0,e.jsx)(Ve.Z.TextArea,{autoSize:{minRows:m[1],maxRows:m[2]},value:r[h]||"",onChange:function(x){return d(h,x.target.value)}})})]},h)})})}(0,N.RM)("Textarea",he,"antd");var Ze=c(36877),Pe=c(13876);function Me(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=s===void 0?[]:s;function d(u){var h={};u.forEach(function(o,l){var m=v[l].id;h[m]=o}),i(h)}return(0,e.jsx)(P.Z,{children:(0,e.jsx)(w.Z,{span:12,children:(0,e.jsx)(Pe.Z,{value:v.map(function(u){return r[u.id]}).filter(function(u){return u}),style:{width:260},options:a.dataSource,onChange:d,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,N.RM)("Cascader",Me,"antd");function ut(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=(0,S.AK)("-body-question");function d(u,h){r[u]=h,h===""&&delete r[u],i((0,y.Z)({},r))}return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(u){var h=u.id,o=u.attribute,l=u.title,m=o==null?void 0:o.suffix,f=o==null?void 0:o.dataType;return(0,e.jsxs)(P.Z,{style:{marginBottom:10},"data-id":h,children:[l&&(0,e.jsx)(w.Z,{className:v+"-option",span:4,children:u.title&&(0,e.jsx)("span",{className:v+"-option-title",children:(0,e.jsx)(b.hl,{html:u.title})})},u.id),(0,e.jsx)(w.Z,{span:12,children:(0,e.jsx)(We,{type:f,value:r[h],onChange:function(g){return d(h,g)},suffix:m&&(0,e.jsx)("span",{className:v+"-option-suffix",children:(0,e.jsx)(b.hl,{html:m})})})})]},h)})})}(0,N.RM)("FillBlank",ut,"antd"),(0,N.RM)("MultipleBlank",ut,"antd");var Ge=c(86582),V=c(43358),B=c(97268),z=c(79521),O=c(68489),G=c(54121),le=function(a){var i=(0,O.XI)(200),n=(0,H.Z)(i,2),r=n[0],s=n[1],v=(0,O.XI)(200),d=(0,H.Z)(v,2),u=d[0],h=d[1];return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},a.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:r,children:[a.cells.map(function(o){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},o.getCellProps()),{},{className:"td","data-id":"".concat(a.i,"-").concat(o.column.id),children:o.render("Cell")}))}),a.onDelete&&(0,e.jsx)("div",{ref:u,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(G.Z,{onClick:function(){a.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:s||h?"visible":"hidden"}})})]}))};function _(t){var a=t.columns,i=t.data,n=t.onAdd,r=t.onDelete,s=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),v=(0,z.useTable)({columns:a,data:i,defaultColumn:s},z.useBlockLayout),d=v.getTableProps,u=v.getTableBodyProps,h=v.headerGroups,o=v.rows,l=v.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},d()),{},{className:"table",children:[(0,e.jsx)("div",{children:h.map(function(m){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},m.getHeaderGroupProps()),{},{className:"tr",children:m.headers.map(function(f){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},f.getHeaderProps()),{},{className:"th",children:f.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},u()),{},{children:o.map(function(m,f){return l(m),(0,C.createElement)(le,(0,y.Z)((0,y.Z)({},m),{},{key:f,i:f,onDelete:r?function(){return r(f)}:void 0}))})})),n&&(0,e.jsx)("div",{className:"footer",onClick:n,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function re(t){var a=t.schema,i=t.onChange,n=t.value||[{}],r=a.children,s=r===void 0?[]:r,v=(0,C.useMemo)(function(){return s.map(function(d){var u;return{Header:(0,e.jsx)(I.Z,{html:d.title}),width:(u=d.attribute)===null||u===void 0?void 0:u.width,accessor:d.id,Cell:function(o){var l,m=o.value,f=o.row,x=o.data;if(((l=d.attribute)===null||l===void 0?void 0:l.dataType)==="select"){var g;return(0,e.jsx)(B.Z,{placeholder:"\u8BF7\u9009\u62E9",value:m,style:{minWidth:80},onChange:function(Z){x[f.index][d.id]=Z},options:((g=d.dataSource)===null||g===void 0?void 0:g.map(function(j){return{label:j.label,value:j.value}}))||[]})}else return(0,e.jsx)(Ve.Z,{value:m,onChange:function(Z){x[f.index][d.id]=Z.target.value,i((0,Ge.Z)(x))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(_,{columns:v,data:n,onAdd:function(){n.push({}),i((0,Ge.Z)(n))},onDelete:function(u){n.splice(u,1),i((0,Ge.Z)(n))}})})}var ce=function(a){var i=a.schema,n=a.value||[{},{}],r=i.children,s=r===void 0?[]:r,v=(0,C.useMemo)(function(){return s.map(function(d){var u;return{Header:(0,e.jsx)(I.Z,{html:d.title}),width:(u=d.attribute)===null||u===void 0?void 0:u.width,accessor:d.id,Cell:function(o){var l,m=o.value,f=o.row,x=o.data;if(((l=d.attribute)===null||l===void 0?void 0:l.dataType)==="select"){var g,j,Z=((g=d.dataSource)===null||g===void 0||(j=g.find(function(E){return E.value===m}))===null||j===void 0?void 0:j.label)||"";return(0,e.jsx)("span",{children:Z})}else return(0,e.jsx)("span",{children:m})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(_,{columns:v,data:n})})};re.Preview=ce,(0,N.RM)("MatrixAuto",re,"antd");var oe=c(93224);function $e(t){var a=t.columns,i=t.data,n=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,z.useTable)({columns:a,data:i,defaultColumn:n},z.useBlockLayout),s=r.getTableProps,v=r.getTableBodyProps,d=r.headerGroups,u=r.rows,h=r.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(l){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},l.getHeaderProps()),{},{className:"th",children:l.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},v()),{},{children:u.map(function(o){return h(o),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(l){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},l.getCellProps()),{},{className:"td","data-id":"".concat(o.original.rowId,"-").concat(l.column.id),children:l.render("Cell")}))})}))})}))]}))}function Re(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=s===void 0?[]:s,d=a.row,u=d===void 0?[]:d,h=(0,C.useMemo)(function(){var l,m=v.map(function(f){var x;return{Header:(0,e.jsx)(I.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,E=j.row,R=j.data;return(0,e.jsx)(We,{value:Z,onChange:function($){var k={};R.forEach(function(te,X){var ve=te.title,we=te.rowId,Se=(0,oe.Z)(te,["title","rowId"]);E.index===X&&(Se[f.id]=$),k[we]=Se}),i(k)}})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((l=a.attribute)===null||l===void 0?void 0:l.width)||150,accessor:"title"}),m},[]),o=u.map(function(l,m){var f=l.id,x=r[f]||{};return(0,y.Z)({title:(0,e.jsx)(I.Z,{html:l.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)($e,{columns:h,data:o})})}var et=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,v=s===void 0?[]:s,d=i.row,u=d===void 0?[]:d,h=(0,C.useMemo)(function(){var l,m=v.map(function(f){var x;return{Header:function(){return(0,e.jsx)(I.Z,{html:f.title})},width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value;return(0,e.jsx)("span",{children:Z})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(l=i.attribute)===null||l===void 0?void 0:l.width,accessor:"title"}),m},[]),o=u.map(function(l,m){var f=l.id,x=r[f]||{};return(0,y.Z)({title:l.title,rowId:f},x)});return console.log(h),(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)($e,{columns:h,data:o})})};Re.Preview=et,(0,N.RM)("MatrixFillBlank",Re,"antd");var yt=c(88983),Qe=c(47933);function Ke(t){var a=t.columns,i=t.data,n=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,z.useTable)({columns:a,data:i,defaultColumn:n},z.useBlockLayout),s=r.getTableProps,v=r.getTableBodyProps,d=r.headerGroups,u=r.rows,h=r.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(l){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},l.getHeaderProps()),{},{className:"th",children:l.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},v()),{},{children:u.map(function(o){return h(o),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(l){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},l.getCellProps()),{},{className:"td",children:l.render("Cell")}))})}))})}))]}))}function Vt(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=s===void 0?[]:s,d=a.row,u=d===void 0?[]:d,h=(0,C.useMemo)(function(){var l,m=v.map(function(f){var x;return{Header:(0,e.jsx)(I.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,E=j.row,R=j.data;return(0,e.jsx)("div",{onClick:function(){var $={};R.forEach(function(k,te){var X=k.title,ve=k.rowId,we=(0,oe.Z)(k,["title","rowId"]);E.index===te?($[ve]={},$[ve][f.id]=!0):$[ve]=we}),i($)},children:(0,e.jsx)(Qe.ZP,{checked:!!Z})})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((l=a.attribute)===null||l===void 0?void 0:l.width)||150,accessor:"title"}),m},[]),o=u.map(function(l,m){var f=l.id,x=r[f]||{};return(0,y.Z)({title:(0,e.jsx)(I.Z,{html:l.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Ke,{columns:h,data:o})})}var aa=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,v=s===void 0?[]:s,d=i.row,u=d===void 0?[]:d,h=(0,C.useMemo)(function(){var l,m=v.map(function(f){var x;return{Header:(0,e.jsx)(I.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,E=j.row,R=j.data;return Z?(0,e.jsx)("div",{children:(0,e.jsx)(Qe.ZP,{checked:!!Z,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((l=i.attribute)===null||l===void 0?void 0:l.width)||150,accessor:"title"}),m},[]),o=u.map(function(l,m){var f=l.id,x=r[f]||{};return(0,y.Z)({title:(0,e.jsx)(I.Z,{html:l.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Ke,{columns:h,data:o})})};Vt.Preview=aa,(0,N.RM)("MatrixRadio",Vt,"antd");var Ya=c(63185),lt=c(9676);function Bt(t){var a=t.columns,i=t.data,n=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,z.useTable)({columns:a,data:i,defaultColumn:n},z.useBlockLayout),s=r.getTableProps,v=r.getTableBodyProps,d=r.headerGroups,u=r.rows,h=r.prepareRow;return(0,e.jsxs)("div",(0,y.Z)((0,y.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:d.map(function(o){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},o.getHeaderGroupProps()),{},{className:"tr",children:o.headers.map(function(l){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},l.getHeaderProps()),{},{className:"th",children:l.render("Header")}))})}))})}),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},v()),{},{children:u.map(function(o){return h(o),(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},o.getRowProps()),{},{className:"tr",children:o.cells.map(function(l){return(0,e.jsx)("div",(0,y.Z)((0,y.Z)({},l.getCellProps()),{},{className:"td",children:l.render("Cell")}))})}))})}))]}))}function Dt(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=s===void 0?[]:s,d=a.row,u=d===void 0?[]:d,h=(0,C.useMemo)(function(){var l,m=v.map(function(f){var x;return{Header:(0,e.jsx)(I.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,E=j.row,R=j.data;return(0,e.jsx)("div",{onClick:function($){var k=!Z,te={};R.forEach(function(X,ve){var we=X.title,Se=X.rowId,Ae=(0,oe.Z)(X,["title","rowId"]);E.index===ve&&(k?Ae[f.id]=!0:delete Ae[f.id]),te[Se]=Ae}),i(te)},children:(0,e.jsx)(lt.Z,{checked:!!Z})})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((l=a.attribute)===null||l===void 0?void 0:l.width)||150,accessor:"title"}),m},[]),o=u.map(function(l,m){var f=l.id,x=r[f]||{};return(0,y.Z)({title:(0,e.jsx)(I.Z,{html:l.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(Bt,{columns:h,data:o})})}var na=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,v=s===void 0?[]:s,d=i.row,u=d===void 0?[]:d,h=(0,C.useMemo)(function(){var l,m=v.map(function(f){var x;return{Header:(0,e.jsx)(I.Z,{html:f.title}),width:(x=f.attribute)===null||x===void 0?void 0:x.width,accessor:f.id,Cell:function(j){var Z=j.value,E=j.row,R=j.data;return Z?(0,e.jsx)("div",{children:(0,e.jsx)(lt.Z,{checked:!!Z,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return m.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((l=i.attribute)===null||l===void 0?void 0:l.width)||150,accessor:"title"}),m},[]),o=u.map(function(l,m){var f=l.id,x=r[f]||{};return(0,y.Z)({title:(0,e.jsx)(I.Z,{html:l.title}),rowId:f},x)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(Bt,{columns:h,data:o})})};Dt.Preview=na,(0,N.RM)("MatrixCheckbox",Dt,"antd");var je=c(32059);function ra(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=a.attribute,d=24/((v==null?void 0:v.columns)||1),u=(0,S.AK)("-body-question"),h=!!(v!=null&&v.statEnabled);function o(l,m,f){var x,g,j=(x=a.children)===null||x===void 0?void 0:x.find(function(E){return E.id===l}),Z=j==null||(g=j.attribute)===null||g===void 0?void 0:g.dataType;m?r[l]=Z?f:!0:delete r[l],i((0,y.Z)({},r))}return(0,C.useEffect)(function(){s==null||s.forEach(function(l){var m;(m=l.attribute)!==null&&m!==void 0&&m.defaultChecked&&Object.keys(r).length===0&&i((0,je.Z)({},l.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(P.Z,{children:s==null?void 0:s.map(function(l){var m,f,x=l.title,g=l.id,j=(m=l.attribute)===null||m===void 0?void 0:m.dataType,Z=(f=l.attribute)===null||f===void 0?void 0:f.suffix;return(0,e.jsxs)(w.Z,{span:d,className:u+"-option","data-id":g,children:[(0,e.jsx)(lt.Z,{value:g,checked:r.hasOwnProperty(g),onChange:function(R){return o(g,R.target.checked)},children:(0,e.jsx)(b.hl,{html:x})}),h&&(0,e.jsx)(W,{checked:!!r[g],optionId:g,questionId:a.id,checkedCount:Object.keys(r).length}),j&&(0,e.jsx)(We,{value:r[g],style:{maxWidth:120},type:j,onChange:function(R){return o(g,!0,R)},suffix:Z&&(0,e.jsx)("span",{className:u+"-option-suffix",children:(0,e.jsx)(b.hl,{html:Z})})})]},g)})})})}(0,N.RM)("Checkbox",ra,"antd");function ia(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=s===void 0?[]:s;function d(u){var h,o=(h=a.children)===null||h===void 0?void 0:h.find(function(l){return l.id===u});o&&i((0,je.Z)({},u,!0))}return(0,C.useEffect)(function(){var u;(u=a.children)===null||u===void 0||u.forEach(function(h){var o,l=h.id;(o=h.attribute)!==null&&o!==void 0&&o.defaultChecked&&Object.keys(r).length===0&&i((0,je.Z)({},l,!0))})},[]),(0,e.jsx)(P.Z,{children:(0,e.jsx)(w.Z,{span:12,children:(0,e.jsx)(B.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){i(void 0)},showSearch:!0,value:Object.keys(r)[0],filterOption:function(h,o){return(o==null?void 0:o.label).toLowerCase().indexOf(h.toLowerCase())!==-1},onChange:d,style:{width:260},options:v.map(function(u){return{label:u.title,value:u.id}})})})})}(0,N.RM)("Select",ia,"antd");var sa=Qe.ZP.Group;function ua(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=a.attribute,d=24/((v==null?void 0:v.columns)||1),u=(0,S.AK)("-body-question"),h=!!(v!=null&&v.statEnabled);function o(m){var f,x=m.target.value,g=(f=a.children)===null||f===void 0?void 0:f.find(function(R){return R.id===x});if(g){var j=g.id,Z=g.attribute,E=Z==null?void 0:Z.dataType;i((0,je.Z)({},m.target.value,E?r[j]:!0))}}function l(m,f){i((0,je.Z)({},m,f))}return(0,C.useEffect)(function(){var m;(m=a.children)===null||m===void 0||m.forEach(function(f){var x,g=f.id,j=f.attribute,Z=j==null?void 0:j.dataType;(x=f.attribute)!==null&&x!==void 0&&x.defaultChecked&&Object.keys(r).length===0&&i((0,je.Z)({},g,Z?r[g]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(sa,{onChange:o,value:Object.keys(r)[0],style:{width:"100%"},children:(0,e.jsx)(P.Z,{children:s==null?void 0:s.map(function(m){var f,x,g=m.title,j=m.id,Z=(f=m.attribute)===null||f===void 0?void 0:f.dataType,E=(x=m.attribute)===null||x===void 0?void 0:x.suffix;return(0,e.jsxs)(w.Z,{span:d,className:u+"-option","data-id":j,children:[(0,e.jsx)(Qe.ZP,{value:j,className:"radio-item",children:(0,e.jsx)(b.hl,{html:g})}),h&&(0,e.jsx)(W,{checked:!!r[j],optionId:j,questionId:a.id,checkedCount:Object.keys(r).length}),Z&&(0,e.jsx)(We,{value:r[j],type:Z,style:{maxWidth:120},onChange:function(ie){return l(j,ie)},suffix:E&&(0,e.jsx)("span",{className:u+"-option-suffix",children:(0,e.jsx)(b.hl,{html:E})})})]},j)})})})})}(0,N.RM)("Radio",ua,"antd");var Ga=c(48736),Rt=c(27049);function Tt(t){var a=(0,S.AK)("-body-question");return(0,e.jsx)("div",{className:a,children:(0,e.jsx)(Rt.Z,{plain:!0})})}Tt.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,N.RM)("SplitLine",Tt,"antd");function zt(t){var a=(0,S.AK)("-body-question");return(0,e.jsx)("div",{className:a,children:(0,e.jsx)(b.hl,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}zt.Preview=function(t){return(0,e.jsx)("div",{children:"hello world"})},(0,N.RM)("Remark",zt,"antd");var Qa=c(34792),la=c(48086),Ka=c(43185),Ot=c(11324),oa=c(43347),da=Ot.Z.Dragger;function $t(t){var a=t.schema,i=t.onChange,n=t.value,r=t.readOnly,s=a.children,v=(0,S.Al)(),d=(0,C.useState)(),u=(0,H.Z)(d,2),h=u[0],o=u[1];(0,C.useEffect)(function(){var f=a.children[0].id,x=n&&n[f]||[];h==null&&x.length>0&&O.hi.loadFiles({ids:x}).then(function(g){o(g==null?void 0:g.map(function(j){return{name:j.originalName,uid:j.id,status:"done"}}))})},[n]);var l=function(){var f=(0,J.Z)(p().mark(function x(g){var j,Z,E,R;return p().wrap(function($){for(;;)switch($.prev=$.next){case 0:j=g.onSuccess,Z=g.onError,E=g.file,R=g.onProgress,v.onUpload&&v.onUpload(E,function(k){R&&R({percent:k.loaded/k.total*100})}).then(function(k){if(k.success&&j&&j(k.data),!k.success&&Z){var te=new Error("Some error");Z({event:te})}});case 2:case"end":return $.stop()}},x)}));return function(g){return f.apply(this,arguments)}}(),m=function(x,g){if(o(x.fileList),(x.file.status==="removed"||x.file.status==="done")&&!x.fileList.find(function(Z){return Z.status!=="done"})){var j=x.fileList.filter(function(Z){return Z.status==="done"}).map(function(Z){var E;return((E=Z.response)===null||E===void 0?void 0:E.id)||Z.uid});j.length===0?i(void 0):i((0,je.Z)({},g,j))}};return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(f){var x=f.id,g=f.attribute,j=[];if(g){var Z=g.maxFileCount,E=g.maxFileSize,R=g.fileAccept;Z&&j.push("\u6700\u591A\u4E0A\u4F20".concat(Z,"\u4E2A")),E&&j.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(E,"M\u4EE5\u5185")),R&&j.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(R))}return(0,e.jsxs)(da,{multiple:!0,disabled:r,maxCount:(g==null?void 0:g.maxFileCount)||20,accept:g==null?void 0:g.fileAccept,beforeUpload:function($){return g!=null&&g.maxFileSize&&$.size>g.maxFileSize*1024*1024?(la.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(g.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Ot.Z.LIST_IGNORE):!0},customRequest:l,onChange:function($){return m($,x)},fileList:h,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(oa.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:j.join(",")})]},x)})})}var ca=function(a){var i=a.value,n=(0,C.useState)(),r=(0,H.Z)(n,2),s=r[0],v=r[1];return(0,C.useEffect)(function(){if(i){var d=Object.values(i).reduce(function(u,h){return u.push.apply(u,(0,Ge.Z)(h)),u},[]);O.hi.loadFiles({ids:d}).then(function(u){v(u)})}},[i]),(0,e.jsx)("div",{className:"preview",children:s==null?void 0:s.map(function(d){return(0,e.jsx)("a",{onClick:function(){return O.hi.download("/api/files/".concat(d.id))},children:d.originalName},d.id)})})};$t.Preview=ca,(0,N.RM)("Upload",$t,"antd");var Xa=c(34669),va=c(61873);function Ht(t){var a=t.schema,i=t.onChange,n=a.children,r=(0,S.Al)(),s=(0,C.useState)(0),v=(0,H.Z)(s,2),d=v[0],u=v[1];function h(o,l){var m="signature-".concat(l,"-").concat((0,K.kb)(6),".png");if(!r.onUpload){i((0,je.Z)({},l,[m]));return}fetch(o).then(function(f){return f.blob()}).then(function(f){var x=new File([f],m,{type:"image/png"});r.onUpload(x,function(g){u(g.loaded/g.total*100)}).then(function(g){g.success&&g.data.id&&i((0,je.Z)({},l,[g.data.id]))})})}return(0,e.jsx)("div",{children:n==null?void 0:n.map(function(o){var l=o.id,m=o.title;return(0,e.jsxs)(P.Z,{gutter:[10,0],"data-id":l,children:[m&&(0,e.jsx)(w.Z,{span:24},o.id),(0,e.jsxs)(w.Z,{span:24,children:[(0,e.jsx)(gt,{onChange:function(x){return h(x,l)}}),d>0&&d!==100&&(0,e.jsx)(va.Z,{percent:d,size:"small",showInfo:!1})]})]},l)})})}Ht.Preview=function(t){var a=t.value,i;return a&&(i=Object.values(a)[0][0]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("img",{src:"/api/files/".concat(i)})})},(0,N.RM)("Signature",Ht,"antd");var Ja=c(96433),Zt=c(2864),Lt=c(41687),ha=c(46870),Wt=c(18613),fa=c(57206),ma={1:(0,e.jsx)(Lt.Z,{}),2:(0,e.jsx)(Lt.Z,{}),3:(0,e.jsx)(ha.Z,{}),4:(0,e.jsx)(Wt.Z,{}),5:(0,e.jsx)(Wt.Z,{})};function xa(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=s===void 0?[]:s;function d(h,o){i((0,je.Z)({},h,o))}var u=function(o){var l=o.attribute||{},m=o.id,f=l.scope,x=f===void 0?"[0,5]":f,g=l.scoreStyle,j=x.replace("[","").replace("]","").split(","),Z=(0,H.Z)(j,2),E=Z[0],R=Z[1];return g==="heart"?(0,e.jsx)(Zt.Z,{defaultValue:parseInt(E),character:(0,e.jsx)(fa.Z,{}),style:{color:"#ea7463"},count:parseInt(R),onChange:function($){return d(m,$)}},m):g==="smile"?(0,e.jsx)(Zt.Z,{defaultValue:parseInt(E),character:function($){var k=$.index;return ma[k+1]},count:parseInt(R),onChange:function($){return d(m,$)}},m):(0,e.jsx)(Zt.Z,{defaultValue:parseInt(E),count:parseInt(R),onChange:function($){return d(m,$)}},m)};return(0,e.jsx)(P.Z,{children:v.map(function(h){return u(h)})})}(0,N.RM)("Score",xa,"antd");var qa=c(22385),pa=c(31097),Ut=c(55686),ga=B.Z.Option;function kt(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=s===void 0?[]:s,d=v[0].id,u=(0,C.useState)([]),h=(0,H.Z)(u,2),o=h[0],l=h[1];function m(g){d&&i((0,je.Z)({},d,g))}var f=(0,O.zE)(function(g){O.hi.userSelect({name:g,selected:r[d]||[]}).then(function(j){j.success&&l(j.data)})},5),x=function(j){m(j?o.map(function(Z){return Z.userId}):void 0)};return(0,C.useEffect)(function(){var g;f(""),(g=a.children)===null||g===void 0||g.forEach(function(j){var Z,E=j.id;(Z=j.attribute)!==null&&Z!==void 0&&Z.defaultChecked&&Object.keys(r).length===0&&i((0,je.Z)({},E,!0))})},[]),(0,e.jsx)(P.Z,{children:(0,e.jsx)(w.Z,{span:12,children:(0,e.jsx)(B.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,mode:"multiple",onClear:function(){i(void 0)},value:r[d]||[],onSearch:f,showSearch:!0,onChange:m,filterOption:!1,dropdownRender:function(j){return(0,e.jsxs)("div",{children:[j,(0,e.jsx)(Rt.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(lt.Z,{onChange:function(E){x(E.target.checked)},children:"\u5168\u9009"})})]})},children:o.map(function(g){return(0,e.jsx)(ga,{value:g.userId,label:g.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Ut.Z,{user:g,size:20})}),g.name," ",g.deptName&&"(".concat(g.deptName,")")]})},g.userId)})})})})}var ja=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,v=s===void 0?[]:s,d=v[0].id,u=(0,C.useState)([]),h=(0,H.Z)(u,2),o=h[0],l=h[1];return(0,C.useEffect)(function(){O.hi.userSelect({selected:r[d]||[],name:"^_^"}).then(function(m){m.success&&l(m.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(_e.Z,{children:o.map(function(m){return(0,e.jsx)(pa.Z,{title:m.name,children:(0,e.jsx)(Ut.Z,{user:m,size:24})},m.userId)})})})};kt.Preview=ja,(0,N.RM)("User",kt,"antd");var _a=c(71153),Ca=c(60331),en=c(62999),ya=c(51753),Za=c(60780),ba=c.n(Za);function Yt(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=s===void 0?[]:s,d=v[0].id,u=(0,C.useState)([]),h=(0,H.Z)(u,2),o=h[0],l=h[1];function m(x){d&&((x==null?void 0:x.length)===0?i(void 0):i((0,je.Z)({},d,x==null?void 0:x.map(function(g){return g.value}))))}var f=(0,C.useMemo)(function(){return ba()(o.map(function(x){return{title:x.name,key:x.id,value:x.id,parentId:x.parentId}}),{parentProperty:"parentId",customID:"key"})},[o]);return(0,C.useEffect)(function(){O.hi.deptSelect({}).then(function(x){x.success&&l(x.data)})},[]),(0,e.jsx)(P.Z,{children:(0,e.jsx)(w.Z,{span:12,children:(0,e.jsx)(ya.Z,{style:{width:"100%"},treeCheckable:!0,value:(r[d]||[]).map(function(x){return{value:x}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:f,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:m,showSearch:!1})})})}var Fa=function(a){var i=a.schema,n=a.value,r=n===void 0?{}:n,s=i.children,v=s===void 0?[]:s,d=v[0].id,u=(0,C.useState)([]),h=(0,H.Z)(u,2),o=h[0],l=h[1];return(0,C.useEffect)(function(){O.hi.deptSelect({selected:r[d]||[],name:"^_^"}).then(function(m){m.success&&l(m.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(_e.Z,{children:o.map(function(m){return(0,e.jsx)(Ca.Z,{color:"blue",children:m.name},m.id)})})})};Yt.Preview=Fa,(0,N.RM)("Dept",Yt,"antd");function Ea(t){for(var a=[],i=2;i<t+2;i++)a.push(i/(t+2));return a}function Ma(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=s===void 0?[]:s,d=v[0].id,u=(0,C.useState)(function(){return r[d]||-1}),h=(0,H.Z)(u,2),o=h[0],l=h[1];function m(x){i((0,je.Z)({},d,x))}(0,C.useEffect)(function(){Object.keys(r).length>0&&l(r[d])},[r,d]);var f=function(g){var j=r[d],Z=Ea(o||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){l(j)},children:[(0,e.jsx)("div",{className:"nps-container",children:[0,1,2,3,4,5,6,7,8,9,10].map(function(E){var R={background:"#2672ff",opacity:Z[E]};return(0,e.jsx)("div",{className:"nps-item",style:o>=E?R:void 0,onMouseOver:function(){l(E)},onClick:function(){return m(E)},children:E},E)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:"0\uFF1A\u4E0D\u53EF\u80FD"}),(0,e.jsx)("div",{children:"10\uFF1A\u6781\u6709\u53EF\u80FD"})]})]},g.id)};return(0,e.jsx)(P.Z,{children:v.map(function(x){return f(x)})})}(0,N.RM)("Nps",Ma,"antd");function Gt(t,a,i){var n=RegExp("_{3,}","g"),r=t.matchAll(n),s=[],v=(0,U.Z)(r),d;try{for(v.s();!(d=v.n()).done;){var u=d.value,h=u.index,o=u.index+u[0].length;s.push([h,o])}}catch(E){v.e(E)}finally{v.f()}for(var l=s[0][0]===0?"":t.substring(0,s[0][0]),m=0;m<s.length;m++){var f=s[m],x=s[m+1],g=t.substring(f[0],f[1]),j=t.substring(f[1],x?x[0]:t.length),Z=i?i[a[m].id]:"";l+='<input data-id="'.concat(a[m].id,`" value='`).concat(Z,`' class="mod_fillblank" style="width: `).concat(12*g.length,'px;">'),l+=j}return l}function Qt(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children,v=a.attribute,d=v===void 0?{}:v,u=d.content;function h(o,l){r[o]=l,l===""&&delete r[o],i((0,y.Z)({},r))}return(0,C.useEffect)(function(){s==null||s.forEach(function(o){var l=document.querySelector("[data-id='".concat(o.id,"']"));if(l){var m=r[o.id];m&&(l.value=m),l.onchange=function(f){var x;h(o.id,(x=f.target)===null||x===void 0?void 0:x.value)}}})},[]),(0,C.useEffect)(function(){Object.keys(r).forEach(function(o){var l=r[o],m=document.querySelector("[data-id='".concat(o,"']"));l!==m.value&&(m.value=l===void 0?"":l)})},[r]),(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{html:Gt(u,s),replaceP:!1})})}Qt.Preview=function(t){var a=t.schema,i=t.value,n=a.children,r=a.attribute,s=r===void 0?{}:r,v=s.content;return(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{html:Gt(v,n,i),replaceP:!1})})})},(0,N.RM)("HorzBlank",Qt,"antd");function Sa(t){var a=t.schema,i=t.onChange,n=t.value,r=n===void 0?{}:n,s=a.children;function v(d,u){i((0,je.Z)({},u,d))}return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(d){var u=d.id,h=d.title,o=d.attribute,l=o===void 0?{}:o,m=l.mapMove;return(0,e.jsxs)(P.Z,{gutter:[10,0],"data-id":u,children:[h&&(0,e.jsx)(w.Z,{span:24},d.id),(0,e.jsx)(w.Z,{span:24,children:(0,e.jsx)(M,{optionId:u,onChange:function(x){return v(x,u)},value:r[u],mapMove:m})})]},u)})})}(0,N.RM)("Address",Sa,"antd");var Kt=c(80705),Na=c(99439),Pa=c(66607),wa=c.n(Pa);se().extend(wa()),Number.prototype.isBetween=function(a,i,n){var r=this,s=parseFloat(a);isNaN(s)&&(s=-99999);var v=parseFloat(i);return isNaN(v)&&(v=99999),!(r>v||r<s||n[0]==="("&&s==r||n[1]===")"&&v==r)};function Aa(t,a){var i=ot(t),n=Number(a);return n.isBetween(t.substring(1,t.indexOf(",")),t.substring(t.indexOf(",")+1,t.length-1),i)}function Ia(t,a){if(!a)return!0;var i=se()(a),n=Xe(t.substring(1,t.indexOf(",")),!0),r=Xe(t.substring(t.indexOf(",")+1,t.length-1),!1),s=ot(t);return i.isBetween(n,r,null,s)}function Va(t,a){if(!a)return!0;var i=se()(a),n=Xe(t.substring(1,t.indexOf(",")),!0,"YYYY-MM-DD hh:mm:ss"),r=Xe(t.substring(t.indexOf(",")+1,t.length-1),!1,"YYYY-MM-DD hh:mm:ss"),s=ot(t);return i.isBetween(n,r,null,s)}function Ba(t,a){if(!a)return!0;var i="2018-02-08 ",n=se()(i+a),r=Xe(i+t.substring(1,t.indexOf(",")),!0,"YYYY-MM-DD hh:mm:ss"),s=Xe(i+t.substring(t.indexOf(",")+1,t.length-1),!1,"YYYY-MM-DD hh:mm:ss"),v=ot(t);return n.isBetween(r,s,null,v)}function Xe(t,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"YYYY-MM-DD",n,r=se()(se()().format(i));return t==="undefined"?a?n=se()("1900-01-01"):n=se()("2999-01-01"):t.indexOf("T")!==-1?t==="T"?n=r:/T-\d+/.test(t)?n=r.subtract(parseInt(t.match(/\d+/)[0]),"days"):/T\+\d+/.test(t)&&(n=r.add(parseInt(t.match(/\d+/)[0]),"days")):/\d+-\d+-\d+/.test(t)&&(n=se()(t)),n}function ot(t){var a=t[0],i=t[t.length-1],n="".concat(a).concat(i);return n}function Da(t,a){var i,n=a.id,r=[];if((i=a.parent)!==null&&i!==void 0&&i.type.startsWith("Matrix"))if(a.parent.type==="MatrixAuto"&&Array.isArray(t))t.forEach(function(u,h){r.push(["".concat(h,"-").concat(n),u[a.id]])});else{var s;(s=a.parent.row)===null||s===void 0||s.forEach(function(u){t[u.id]?r.push(["".concat(u.id,"-").concat(n),t[u.id][a.id]]):r.push(["".concat(u.id,"-").concat(n),void 0])})}else{var v,d=(v=a.parent)===null||v===void 0?void 0:v.type;d==="Radio"||d==="Checkbox"?Object.keys(t).includes(a.id)&&r.push([a.id,t[a.id]]):r.push([a.id,t[a.id]])}return r}function Xt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Ra(t){return!!(Xt(t)&&Number.isInteger(parseFloat(t)))}function He(t){var a=t.errMsg,i=t.schema,n=t.regEx,r=t.value;return i?Te({schema:i,value:r,errMsg:a,isValid:function(v){return v?n.test("".concat(v)):!0}}):null}function Te(t){var a=t.value,i=t.schema,n=t.isValid,r=t.errMsg;return!i||a==null?null:Da(a,i).map(function(s){var v=(0,H.Z)(s,2),d=v[0],u=v[1];return n(u)?null:"".concat(d,"^").concat(r)}).filter(function(s){return s})[0]}(0,Na.au)({required:function(a,i){var n=i.schema;return i&&i.required===!1?null:(0,Kt.xb)(a)||typeof a=="object"&&Object.keys(a).length===0?"\u8FD9\u9053\u9898\u672A\u56DE\u7B54":Te({schema:n,value:a,errMsg:"\u8FD9\u4E2A\u9009\u9879\u672A\u56DE\u7B54",isValid:function(s){return!(0,Kt.xb)(s)}})},answerLimit:function(a,i){var n,r=i.schema,s=r==null||(n=r.attribute)===null||n===void 0?void 0:n.answerLimit;if(!s)return null;var v=s.slice(1,s.length-1).split(","),d=parseInt(v[0]||"0"),u=parseInt(v[1]||"0"),h=Object.keys(a||{}).length;return a&&(h<d&&d!==0||h>u&&u!==0)?d===0?"\u6700\u591A\u9009\u62E9".concat(u,"\u9879"):u===0?"\u6700\u5C11\u9009\u62E9".concat(d,"\u9879"):"\u6700\u5C11\u9009\u62E9".concat(d,"\u9879,\u6700\u591A\u9009\u62E9").concat(u,"\u9879"):null},number:function(a,i){var n,r=i.schema,s=r==null||(n=r.attribute)===null||n===void 0?void 0:n.numericScale;if(!r)return null;var v="\u8BF7\u8F93\u5165\u6570\u5B57";return s===0?v="\u8BF7\u8F93\u5165\u6574\u6570":s&&s>0&&(v="\u8BF7\u4FDD\u7559".concat(s,"\u4F4D\u5C0F\u6570")),Te({errMsg:v,schema:r,value:a,isValid:function(u){return!(u!==void 0&&(!Xt(u)||s===0&&!Ra(u)||s!==void 0&&s>0&&("".concat(u).split(".")[1]||"").length>s))}})},date:function(a,i){var n=i.schema;return He({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F",schema:n,regEx:/^(?:(?:1[6-9]|[2-9][0-9])[0-9]{2}([-/.]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:(?:1[6-9]|[2-9][0-9])(?:0[48]|[2468][048]|[13579][26])|(?:16|[2468][048]|[3579][26])00)([-/.]?)0?2\2(?:29))(\s+([01][0-9]:|2[0-3]:)?[0-5][0-9]:[0-5][0-9])?$/,value:a})},dateTime:function(a,i){var n=i.schema;return He({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F\u65F6\u95F4",schema:n,regEx:/^\d{4}[-]([0][1-9]|(1[0-2]))[-]([1-9]|([012]\d)|(3[01]))\s(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:a})},time:function(a,i){var n=i.schema;return He({errMsg:"\u8BF7\u8F93\u5165\u65F6\u95F4",schema:n,regEx:/^(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:a})},mobile:function(a,i){var n=i.schema;return He({errMsg:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",schema:n,regEx:/^1([358][0-9]|4[579]|66|7[01235678]|9[189])[0-9]{8}$/,value:a})},decimal:function(a,i){var n=i.schema;return He({errMsg:"\u8BF7\u8F93\u5165\u6570\u5B57",schema:n,regEx:/^[+-]?\d+(\.\d+)?$/,value:a})},email:function(a,i){var n=i.schema;return He({errMsg:"\u90AE\u4EF6\u683C\u5F0F\u4E0D\u6B63\u786E",schema:n,regEx:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,value:a})},idCard:function(a,i){var n=i.schema;return Te({errMsg:"\u8EAB\u4EFD\u8BC1\u683C\u5F0F\u4E0D\u6B63\u786E",schema:n,value:a,isValid:function(s){return!(s&&!za("".concat(s)))}})},chinese:function(a,i){var n=i.schema;return He({errMsg:"\u8BF7\u8F93\u5165\u6C49\u5B57",schema:n,regEx:/^[\u4e00-\u9fa5]+$/,value:a})},alphabet:function(a,i){var n=i.schema;return He({errMsg:"\u8BF7\u8F93\u5165\u5B57\u6BCD",schema:n,regEx:/^[a-zA-Z]+$/,value:a})},textLimit:function(a,i){var n,r=i.schema,s=r==null||(n=r.attribute)===null||n===void 0?void 0:n.textLimit;if(!s)return null;var v=s.slice(1,s.length-1).split(","),d=parseInt(v[0]||"0"),u=parseInt(v[1]||"0");if(d===0&&u===0)return null;var h=Te({errMsg:d!==u?"\u8BF7\u8F93\u5165".concat(d,"~").concat(u,"\u4E2A\u5B57"):"\u8BF7\u8F93\u5165".concat(d,"\u4E2A\u5B57"),schema:r,value:a,isValid:function(l){return!(l&&("".concat(l).length<d||"".concat(l).length>u))}});return h},scope:function(a,i){var n,r,s=i.schema,v=s==null||(n=s.attribute)===null||n===void 0?void 0:n.scope,d=s==null||(r=s.attribute)===null||r===void 0?void 0:r.dataType;if(v&&d){if(d==="number")return Te({errMsg:"\u6570\u503C\u8303\u56F4\u4E0D\u6B63\u786E ".concat(v),schema:s,value:a,isValid:function(h){return!(h&&!Aa(v,"".concat(h)))}});if(d==="date")return Te({errMsg:"\u65E5\u671F\u8303\u56F4\u4E0D\u6B63\u786E ".concat(v),schema:s,value:a,isValid:function(h){return!(h&&!Ia(v,"".concat(h)))}});if(d==="dateTime")return Te({errMsg:"\u65E5\u671F\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(v),schema:s,value:a,isValid:function(h){return!(h&&!Va(v,"".concat(h)))}});if(d==="time")return Te({errMsg:"\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(v),schema:s,value:a,isValid:function(h){return!(h&&!Ba(v,"".concat(h)))}})}return null}});function Ta(t){var a=t.substring(6,8),i=t.substring(8,10),n=t.substring(10,12),r=new Date(parseFloat(a),parseFloat(i)-1,parseFloat(n));return!(r.getFullYear()-1900!==parseFloat(a)||r.getMonth()!==parseFloat(i)-1||r.getDate()!==parseFloat(n))}function za(t){var a=t;if(t.length!==15&&t.length!==18)return!1;if(t.length===15)return Ta(a);var i={11:"\u5317\u4EAC",12:"\u5929\u6D25",13:"\u6CB3\u5317",14:"\u5C71\u897F",15:"\u5185\u8499\u53E4",21:"\u8FBD\u5B81",22:"\u5409\u6797",23:"\u9ED1\u9F99\u6C5F ",31:"\u4E0A\u6D77",32:"\u6C5F\u82CF",33:"\u6D59\u6C5F",34:"\u5B89\u5FBD",35:"\u798F\u5EFA",36:"\u6C5F\u897F",37:"\u5C71\u4E1C",41:"\u6CB3\u5357",42:"\u6E56\u5317 ",43:"\u6E56\u5357",44:"\u5E7F\u4E1C",45:"\u5E7F\u897F",46:"\u6D77\u5357",50:"\u91CD\u5E86",51:"\u56DB\u5DDD",52:"\u8D35\u5DDE",53:"\u4E91\u5357",54:"\u897F\u85CF ",61:"\u9655\u897F",62:"\u7518\u8083",63:"\u9752\u6D77",64:"\u5B81\u590F",65:"\u65B0\u7586",71:"\u53F0\u6E7E",81:"\u9999\u6E2F",82:"\u6FB3\u95E8",91:"\u56FD\u5916 "},n=!0;if(!a||!/^([1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx])|([1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2})$/i.test(a))n=!1;else if(!i[a.substr(0,2)])n=!1;else if(a.length>18)n=!1;else if(a.length===18){for(var r=a.split(""),s=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],v=[1,0,"X",9,8,7,6,5,4,3,2],d=0,u=0,h=0,o=0;o<17;o+=1)u=parseInt(r[o],10),h=s[o],d+=u*h;var l=r[17].toUpperCase()==="X"?"X":Number(r[17]);v[d%11]!==l&&(n=!1)}return n}function Oa(t,a){}var $a=c(69610),Ha=c(54941),La=function(){function t(){(0,$a.Z)(this,t),this.progress=0,this.makeObservable()}return(0,Ha.Z)(t,[{key:"makeObservable",value:function(){(0,pe.Ou)(this,{progress:pe.LO.ref,changeProgress:pe.aD})}},{key:"changeProgress",value:function(i){this.progress=i}}]),t}(),Wa=c(8166);window.katex=Wa.Z;var Jt=(0,C.forwardRef)(function(t,a){var i=t.theme,n=i===void 0?N.uH:i,r=t.footerVisible,s=r===void 0?!0:r,v=t.headerVisible,d=v===void 0?!0:v,u=t.initialValues,h=t.readOnly,o=t.loading,l=t.onChange,m=t.questionNumber,f=m===void 0?!0:m,x=t.onUpload,g=t.paginationVisible,j=g===void 0?!0:g,Z=t.fieldPermission,E=t.progressBar,R=E===void 0?!1:E,ie=t.statistics,$=t.isPreview,k=(0,C.useMemo)(function(){return new La},[]),te=(0,C.useMemo)(function(){return(0,K.Gt)(t.schema)},[t.schema]),X=(0,C.useMemo)(function(){var de={},ae=function me(Y){de[Y.id]=Y.title,Y.children&&Y.children.forEach(me)};return ae(te),document.title=(0,q.WO)(te.title),de},[te]),ve=(0,C.useMemo)(function(){return j?(0,K._T)(t.schema):[t.schema.children]},[t.schema,j]),we=(0,C.useState)(function(){return(0,K.dr)(t.schema)}),Se=(0,H.Z)(we,2),Ae=Se[0],Ue=Se[1],Je=(0,C.useMemo)(function(){return(0,K.R6)(t.schema)},[t.schema]),xe=(0,C.useMemo)(function(){return(0,ne.Np)({initialValues:u,readOnly:h,validateFirst:!0,effects:function(ae){(0,ne.dQ)(function(){if(ve.map(function(Ce,Q){return Q}).slice(1).forEach(function(Ce){return Ie(Ce,"hidden")}),Z){var me=[],Y=[];Object.entries(Z).forEach(function(Ce){var Q=(0,H.Z)(Ce,2),dt=Q[0],_t=Q[1];_t===0?me.push(dt):_t===1&&Y.push(dt)}),me.length>0&&xe.setFieldState("*(".concat(me.join(","),")"),function(Ce){return Ce.display="none"}),Y.length>0&&xe.setFieldState("*(".concat(Y.join(","),")"),function(Ce){return Ce.pattern="readPretty"})}var Ne=0,be=0;xe.query("*").forEach(function(Ce){Ce.displayName==="Field"&&!Ce.address.toString().startsWith("_")&&(Ce.display==="visible"&&Ne++,(0,K.xb)(Ce.value)||be++)}),l&&(k.changeProgress(be/Ne),l(u,be/Ne))}),(0,ne.pO)(function(me){var Y=0,Ne=0;xe.query("*").forEach(function(be){be.displayName==="Field"&&!be.address.toString().startsWith("_")&&(be.display==="visible"&&Y++,(0,K.xb)(be.value)||Ne++)}),l&&(k.changeProgress(Ne/Y),l((0,pe.ZN)(me.values),Ne/Y))}),Oa(te,ae)}})},[]),bt=(0,C.useCallback)(function(de){return xe.validate("*(".concat(ve[de].map(function(ae){return ae.id}).join(","),")"))},[]),Ie=(0,C.useCallback)(function(de){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"visible";xe.query("*(".concat(ve[de].map(function(me){return me.id}).join(","),")")).forEach(function(me){me.display=ae})},[]),ke=(0,C.useCallback)(function(){Ue(function(de){var ae=de.current-1;return Ie(ae,"hidden"),Ie(ae-1,"visible"),(0,y.Z)((0,y.Z)({},de),{},{current:de.current-1})})},[]),ka=(0,C.useCallback)((0,J.Z)(p().mark(function de(){var ae;return p().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return ae=Ae.current-1,Y.prev=1,Y.next=4,bt(ae);case 4:Ue(function(Ne){return Ie(ae,"hidden"),Ie(ae+1,"visible"),(0,y.Z)((0,y.Z)({},Ne),{},{current:Ae.current+1})}),Y.next=9;break;case 7:Y.prev=7,Y.t0=Y.catch(1);case 9:case"end":return Y.stop()}},de,null,[[1,7]])})),[Ae]),qt=(0,C.useCallback)((0,J.Z)(p().mark(function de(){var ae,me,Y,Ne,be;return p().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:ae="",Q.prev=1,me=xe.query("*").map().filter(function(dt){return!(0,ne.JF)(dt)}),Y=(0,U.Z)(me),Q.prev=4,Y.s();case 6:if((Ne=Y.n()).done){Q.next=15;break}if(be=Ne.value,!(0,ne.JF)(be)){Q.next=10;break}return Q.abrupt("continue",13);case 10:return ae=be.path.toString(),Q.next=13,be.validate();case 13:Q.next=6;break;case 15:Q.next=20;break;case 17:Q.prev=17,Q.t0=Q.catch(4),Y.e(Q.t0);case 20:return Q.prev=20,Y.f(),Q.finish(20);case 23:return t.onSubmit&&t.onSubmit((0,pe.ZN)(xe.values)),Q.abrupt("return",{values:(0,pe.ZN)(xe.values)});case 27:Q.prev=27,Q.t1=Q.catch(1),(0,K.lA)(ae,R?-25:0);case 30:case"end":return Q.stop()}},de,null,[[1,27],[4,17,20,23]])})),[]);return(0,C.useImperativeHandle)(a,function(){return{submit:function(){return qt()},reset:function(){xe.reset()},setValues:function(ae){xe.setValues(ae,"overwrite")},toggleReadOnly:function(ae){xe.setState(function(me){me.pattern=ae?"readPretty":"editable"})},getValues:function(){return xe.values}}}),(0,e.jsx)(Fe.RV,{form:xe,children:(0,e.jsx)(ge.ZX.Provider,{value:(0,C.useMemo)(function(){return{theme:n,schema:te,footerVisible:s,questionNumber:f,headerVisible:d,pagination:Ae,optionTypes:Je,onNext:ka,onPrev:ke,onSubmit:qt,onUpload:x,loading:o,id2title:X,progressBar:R,innerStore:k,statistics:ie,isPreview:$}},[Ae,o,te,ie]),children:(0,e.jsx)(b.k9,{schema:te})})})}),Ua=Jt}}]);
