(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5382],{64317:function($,j,e){"use strict";var A=e(95395),F=e(99653),P=e(97445),m=e(67294),L=e(78729),I=e(22270),M=e(66758),U=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],W=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],d=m.forwardRef(function(t,D){var f=t.fieldProps,c=t.children,E=t.params,Z=t.proFieldProps,C=t.mode,x=t.valueEnum,S=t.request,n=t.showSearch,g=t.options,O=(0,P.Z)(t,U),T=(0,m.useContext)(M.Z);return m.createElement(L.Z,(0,A.Z)({mode:"edit",valueEnum:(0,I.h)(x),request:S,params:E,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({options:g,mode:C,showSearch:n,getPopupContainer:T.getPopupContainer},f),ref:D,proFieldProps:Z},O),c)}),R=m.forwardRef(function(t,D){var f=t.fieldProps,c=t.children,E=t.params,Z=t.proFieldProps,C=t.mode,x=t.valueEnum,S=t.request,n=t.options,g=(0,P.Z)(t,W),O=(0,F.Z)({options:n,mode:C||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},f),T=(0,m.useContext)(M.Z);return m.createElement(L.Z,(0,A.Z)({mode:"edit",valueEnum:(0,I.h)(x),request:S,params:E,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({getPopupContainer:T.getPopupContainer},O),ref:D,proFieldProps:Z},g),c)}),K=d,b=R,y=K;y.SearchSelect=b,y.displayName="ProFormComponent",j.Z=y},59686:function($,j,e){"use strict";e.r(j),e.d(j,{default:function(){return T}});var A=e(57663),F=e(71577),P=e(3182),m=e(34792),L=e(48086),I=e(71194),M=e(50146),U=e(2824),W=e(94043),d=e.n(W),R=e(68489),K=e(57119),b=e(49101),y=e(70844),t=e(16894),D=e(93279),f=e(77613),c=e(67294),E=e(11849),Z=e(64317),C=e(15196),x=e(71975),S=e(5966),n=e(85893),g=(0,f.P)(function(a){var B=a.onOk,N=a.onClose,o=a.position,s=a.readonly,v=(0,c.useRef)(),G=!!(o!=null&&o.id),p=(0,R.m2)();return(0,n.jsxs)(x.Z,{title:G?o!=null&&o.id?"\u4FEE\u6539\u5C97\u4F4D":"\u65B0\u589E\u5C97\u4F4D":"\u67E5\u770B\u5C97\u4F4D",formRef:v,visible:!0,initialValues:o,submitter:{submitButtonProps:{style:{display:s?"none":"block"}}},drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){N()}},onFinish:function(){var r=(0,P.Z)(d().mark(function u(i){var l;return d().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,p.saveOrUpdatePosition((0,E.Z)((0,E.Z)({},o),i));case 2:l=h.sent,l.success&&B();case 4:case"end":return h.stop()}},u)}));return function(u){return r.apply(this,arguments)}}(),children:[(0,n.jsxs)(C.ZP.Group,{children:[(0,n.jsx)(S.Z,{name:"name",width:"md",label:"\u5C97\u4F4D\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u540D\u79F0",readonly:s,required:!0,rules:[{required:!0,message:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,n.jsx)(S.Z,{width:"md",readonly:s,name:"code",label:"\u5C97\u4F4D\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0,message:"\u5C97\u4F4D\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],required:!0})]}),(0,n.jsx)(C.ZP.Group,{children:(0,n.jsx)(Z.Z,{width:"md",readonly:s,request:(0,P.Z)(d().mark(function r(){return d().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[{label:"\u672C\u4EBA",value:"SELF"},{label:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",value:"SELF_AND_SUB"},{label:"\u672C\u90E8\u95E8",value:"DEPT"},{label:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",value:"DEPT_AND_SUB"},{label:"\u5168\u90E8",value:"ALL"}]);case 1:case"end":return i.stop()}},r)})),name:"dataPermissionType",label:"\u6570\u636E\u6743\u9650"})})]})}),O=(0,f.P)(function(){var a=(0,R.m2)(),B=(0,c.useRef)(),N=(0,c.useState)(),o=(0,U.Z)(N,2),s=o[0],v=o[1];(0,c.useEffect)(function(){a.loadPermissions()},[a]);var G=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"name",ellipsis:!0,width:200},{title:"\u7F16\u7801",dataIndex:"code",hideInSearch:!0,width:150},{title:"\u6570\u636E\u6743\u9650",dataIndex:"dataPermissionType",valueEnum:{SELF:"\u672C\u4EBA",SELF_AND_SUB:"\u672C\u4EBA\u53CA\u4E0B\u5C5E",DEPT:"\u672C\u90E8\u95E8",DEPT_AND_SUB:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8",ALL:"\u5168\u90E8"},hideInSearch:!0,width:150},{title:"\u64CD\u4F5C",valueType:"option",render:function(r,u){return[(0,n.jsx)("a",{onClick:function(){v({visible:!0,current:u,readonly:!0})},children:"\u8BE6\u60C5"},"readonly"),(0,n.jsx)(D.Z,{onSelect:function(l){l==="edit"&&v({current:u,visible:!0}),l==="delete"&&M.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u5C97\u4F4D?",icon:(0,n.jsx)(K.Z,{}),onOk:function(){a.deletePosition(u.id).then(function(h){if(h.success){var V;L.default.success("\u5220\u9664\u6210\u529F"),(V=B.current)===null||V===void 0||V.reload()}})}})},menus:[{key:"edit",name:"\u7F16\u8F91"},{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];return(0,n.jsxs)(y.ZP,{title:!1,children:[(0,n.jsx)(t.ZP,{columns:G,actionRef:B,dataSource:a.positions,request:function(){var p=(0,P.Z)(d().mark(function r(u){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",a.loadPositions(u));case 1:case"end":return l.stop()}},r)}));return function(r){return p.apply(this,arguments)}}(),columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:5},scroll:{x:650},dateFormatter:"string",headerTitle:"\u5C97\u4F4D\u5217\u8868",toolBarRender:function(){return[(0,n.jsx)(F.Z,{icon:(0,n.jsx)(b.Z,{}),type:"primary",onClick:function(){v({visible:!0})},children:"\u65B0\u5EFA"},"button")]}}),(s==null?void 0:s.visible)&&(0,n.jsx)(g,{onClose:function(){v(void 0)},readonly:s.readonly,onOk:function(){var r;v(void 0),(r=B.current)===null||r===void 0||r.reload()},position:s.current})]})}),T=O}}]);
