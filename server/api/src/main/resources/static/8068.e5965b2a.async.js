(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8068],{67635:function(Ee,ce,i){"use strict";i.d(ce,{Mt:function(){return n},hl:function(){return q},HN:function(){return oe},we:function(){return ie},k9:function(){return H},jI:function(){return o}});var N=i(80937),Z=i(67294),b=i(40807),ve=i(86052),K=i(48187),j=i(85893);function H(s){var u=(0,Z.useContext)(ve.Z),h=u.theme,d=u.footerVisible,z=u.headerVisible,P=s.schema,$=function(g){var F=(0,K.GZ)(h,"Survey");if(F)return Z.createElement(F,{schema:P,footerVisible:d,headerVisible:z},g)},M=function(){var g,F=-1;return(g=P.children)===null||g===void 0?void 0:g.map(function(B){var A,Q=B.type,G=B.id;return!(0,b.nj)(Q)&&((A=B.attribute)===null||A===void 0?void 0:A.display)!=="hidden"&&F++,Q==="QuestionSet"?(0,j.jsx)(ie,{schema:B,index:F},G):(0,j.jsx)(oe,{schema:B,index:F},G)})};return(0,j.jsxs)(j.Fragment,{children:[$(M()),(0,j.jsx)(N.gN,{name:"_finish"})]})}var I=i(11849),D=i(94657),U=i(54531),Y=i(32059),le=i(83279),pe=i(71194),k=i(50146),fe=i(25278),E=i(54707),w=i(90019),X=i(49111),S=i(19650),R=i(402),W=i(97272),_=W.Z.Text,ue=W.Z.Link,ee={FillBlank:"\u5355\u884C\u6587\u672C\u9898",Textarea:"\u591A\u884C\u6587\u672C\u9898",User:"\u6210\u5458\u9898",Dept:"\u90E8\u95E8\u9898",MultipleBlank:"\u591A\u9879\u586B\u7A7A\u9898",HorzBlank:"\u6A2A\u5411\u586B\u7A7A\u9898",Signature:"\u7B7E\u540D\u9898",Radio:"\u5355\u9009\u9898",Checkbox:"\u591A\u9009\u9898",Select:"\u4E0B\u62C9\u9898",Cascader:"\u7EA7\u8054\u9898",MatrixAuto:"\u77E9\u9635\u81EA\u589E\u9898",MatrixRadio:"\u77E9\u9635\u5355\u9009\u9898",MatrixCheckbox:"\u77E9\u9635\u591A\u9009\u9898",MatrixFillBlank:"\u77E9\u9635\u586B\u7A7A\u9898",MatrixScore:"\u77E9\u9635\u6253\u5206\u63D0",MatrixNps:"\u77E9\u9635NPS\u9898",Upload:"\u4E0A\u4F20\u9898",Score:"\u6253\u5206\u9898",Nps:"Nps \u9898",Address:"\u5730\u7406\u4F4D\u7F6E\u9898",Survey:"\u95EE\u5377",QuestionSet:"\u9898\u7EC4",Pagination:"\u5206\u9875",Remark:"\u5907\u6CE8",SplitLine:"\u5206\u5272\u7EBF",Option:"\u9009\u9879",Barcode:"\u6761\u7801\u9898",Button:"\u6309\u94AE",Drug:"\u836F\u7269\u9898"},re={antd:"PC\u7AEF\u4E3B\u9898",antdForm:"\u8868\u5355\u4E3B\u9898",antdMobile:"\u624B\u673A\u7AEF\u4E3B\u9898"},he=function(u){var h=u.schema,d=(0,E.Al)(),z=d.theme;return(0,j.jsx)("div",{style:{textAlign:"center"},children:(0,j.jsxs)(S.Z,{children:["\u5F53\u524D\u4E3B\u9898",(0,j.jsxs)(_,{mark:!0,children:["(",re[z],")"]}),"\u6682\u4E0D\u652F\u6301",(0,j.jsx)(_,{strong:!0,children:ee[h.type]})," \u9898\u578B"]})})},se=i(15020),q=function(u){var h=u.html,d=h===void 0?"":h;return(0,j.jsx)(j.Fragment,{children:typeof d=="string"&&(0,se.ZP)(d.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))})},de=function(u){return(0,j.jsx)("div",{className:"preview",children:Oe(u)})};function Oe(s){var u=s.schema,h=s.value;if(!h)return"";var d;if(u.type==="Radio"||u.type==="Select")Object.entries(h).some(function(M){var m=(0,D.Z)(M,2),g=m[0],F=m[1];if(F===!0){var B,A;d=(0,j.jsx)(q,{html:(B=u.children)===null||B===void 0||(A=B.find(function(J){return J.id===g}))===null||A===void 0?void 0:A.title})}else if(F){var Q,G;d=(0,j.jsx)(q,{html:(Q=u.children)===null||Q===void 0||(G=Q.find(function(J){return J.id===g}))===null||G===void 0?void 0:G.title})}return!0});else{if(u.type==="Checkbox")return Object.entries(h).map(function(M){var m=(0,D.Z)(M,2),g=m[0],F=m[1];if(F===!0){var B,A;return(0,j.jsx)(q,{html:(B=u.children)===null||B===void 0||(A=B.find(function(J){return J.id===g}))===null||A===void 0?void 0:A.title},g)}else if(F){var Q,G;return(0,j.jsx)(q,{html:(Q=u.children)===null||Q===void 0||(G=Q.find(function(J){return J.id===g}))===null||G===void 0?void 0:G.title},g)}}).reduce(function(M,m){return[M,", ",m]});if(u.type==="Cascader"){var z=u.children.map(function(M){return M.id}),P=z.map(function(M){return h[M]}),$=u.dataSource;return P.filter(function(M){return M!==void 0}).map(function(M,m){var g,F=(g=$)===null||g===void 0?void 0:g.find(function(B){return B.value===M});return $=F.children,(0,j.jsx)("span",{children:F.label},z[m])})}else if(u.type==="FillBlank"||u.type==="MultipleBlank"||u.type==="Textarea"||u.type==="Score"||u.type==="Nps")return Object.entries(h).map(function(M){var m=(0,D.Z)(M,2),g=m[0],F=m[1];return(0,j.jsx)("span",{children:F},g)})}return d}var oe=(0,N.Pi)(function(u){var h,d=u.schema,z=u.index,P=u.qsIndex,$=d.id,M=d.type,m=(0,Z.useContext)(ve.Z),g=m.theme,F=m.optionTypes,B=m.id2title,A=m.schema,Q=(0,N.cI)(),G=(0,E.Rk)(),J=(0,Z.useMemo)(function(){return(0,b.cB)(d,"calculate")},[d]),ne=(0,Z.useRef)(),te=(0,Z.useRef)([]),ye=(0,Z.useMemo)(function(){var v;return((v=d.attribute)===null||v===void 0?void 0:v.display)==="hidden"?["hidden_self"]:[]},[d]),Ce=(0,Z.useMemo)(function(){var v;return(0,N.$j)((0,K.I8)(g,M)||he,(0,N.jM)(function(f,O){return(0,I.Z)((0,I.Z)({},f),{},{onChange:function(x,C){function V(){O.selfErrors.length>0&&O.validate().catch(function(){})}if(!f.readOnly){if((0,fe.xb)(x)){O.onInput(void 0),V();return}if(M.startsWith("Matrix")&&(0,b.hb)(x)){V(),O.onInput(void 0);return}x&&Object.keys(x).forEach(function(T){x[T]===void 0&&(x[T]="")}),O.onInput(x),V()}},onBlur:function(x,C){if(C){var V=(0,b.Pn)(d,x,C);V&&k.Z.confirm({title:"\u63D0\u793A\u4FE1\u606F",content:(0,j.jsx)(q,{html:V}),okText:"\u662F",cancelText:"\u5426",onOk:function(){O.onInput(x)},onCancel:function(){x[C]=void 0,O.onInput(x)}})}}})}),(0,N.vl)(((v=(0,K.I8)(g,M))===null||v===void 0?void 0:v.Preview)||de))},[d,g,M]),je=(0,Z.useCallback)(function(v){return(0,j.jsx)("div",{tabIndex:-1,onBlur:v==null?void 0:v.onBlur,"data-id":v.schema.id,children:Z.createElement((0,K.GZ)(g,"Question"),v)})},[g]),me=(0,Z.useMemo)(function(){return(0,N.$j)(je,(0,N.jM)(function(v,f){return(0,I.Z)((0,I.Z)({},v),{},{error:f.selfErrors.length?(0,le.Z)(f.selfErrors):[],warning:f.selfWarnings.length?f.selfWarnings:[],required:f.required,onChange:function(p,x){function C(){f.selfErrors.length>0&&f.validate().catch(function(){})}if(!v.readOnly){if((0,fe.xb)(p)){f.onInput(void 0),C();return}if(M.startsWith("Matrix")&&(0,b.hb)(p)){C(),f.onInput(void 0);return}p&&Object.keys(p).forEach(function(V){p[V]===void 0&&(p[V]="")}),f.onInput(p),C()}},onBlur:function(p,x){if(x){var C=(0,b.Pn)(d,p,x);C&&k.Z.confirm({title:"\u63D0\u793A\u4FE1\u606F",content:(0,j.jsx)(q,{html:C}),okText:"\u662F",cancelText:"\u5426",onOk:function(){f.onInput(p)},onCancel:function(){p[x]=void 0,f.onInput(p)}})}}})}))},[je]),ge=(0,Z.useMemo)(function(){return(0,N.$j)((0,K.I8)(g,M),(0,N.jM)(function(v,f){return(0,I.Z)({},v)}))},[g,M]);return(0,b.nj)(d.type)?(0,j.jsx)(N.jG,{name:$,data:ye,component:[ge,{schema:d,controlShow:void 0}],reactions:[function(v){var f=v.data||[];f.length===0?v.display="visible":v.display="none"},function(v){var f,O=(f=d.attribute)===null||f===void 0?void 0:f.replaceTextRule;if(O){var p=(0,b.vW)(O,function(C){var V=(0,b.Op)(C),T=(0,D.Z)(V,1),y=T[0],L=v.query(y).get("value");return(0,b.d0)({optionTypes:F,qValue:L,expression:C,id2title:B})}),x="";p.success&&p.result&&(x=p.result),v.setComponentProps((0,I.Z)((0,I.Z)({},v.componentProps),{},{replaceTitle:x}))}},function(v){var f,O=(f=d.attribute)===null||f===void 0?void 0:f.visibleRule;if(O){var p=(0,b.vW)(O,function(V){var T=(0,b.Op)(V),y=(0,D.Z)(T,2),L=y[0],Fe=y[1],Ve=v.query(L).get("value");return(0,b.d0)({optionTypes:F,qValue:Ve,expression:V})});if(p.success){var x="visible_".concat(d.id),C=(0,U.rg)(function(){return v.data});p.result&&C.includes(x)?C.splice(C.findIndex(function(V){return V===x}),1):!p.result&&!C.includes(x)&&C.push(x)}}}]}):(0,j.jsx)(N.gN,{name:$,display:(h=d.attribute)===null||h===void 0?void 0:h.display,component:[Ce,{schema:d,controlShow:void 0}],data:ye,decorator:[me,{schema:d,index:z,qsIndex:P}],validator:(0,w.r)(d,g),reactions:[function(v){var f=v.data||[];f.find(function(O){return O.startsWith("rule_")})?v.display="none":f.find(function(O){return O.startsWith("hidden")})?v.display="hidden":v.display="visible",G.compute()},function(v){var f,O=(f=d.attribute)===null||f===void 0?void 0:f.finishRule;if(O){var p=(0,b.vW)(O,function(C){var V=(0,b.Op)(C),T=(0,D.Z)(V,2),y=T[0],L=T[1],Fe=v.query(y).get("value");return(0,b.d0)({optionTypes:F,qValue:Fe,expression:C})});if(p.success&&p.result!==void 0){var x=(0,b.BB)(d,A);x.forEach(function(C){var V=Q.query(C.id).take();if(V){var T="rule_finish_".concat(d.id),y=(0,U.rg)(function(){return V.data});p.result&&y&&!y.includes(T)?y.push(T):!p.result&&y&&y.includes(T)&&y.splice(y.findIndex(function(L){return L===T}),1)}})}}},function(v){var f,O=(f=d.attribute)===null||f===void 0?void 0:f.jumpRule;if(O){var p=(0,b.vW)(O,function(V){var T=(0,b.Op)(V),y=(0,D.Z)(T,2),L=y[0],Fe=y[1],Ve=v.query(L).get("value");return(0,b.d0)({optionTypes:F,qValue:Ve,expression:V,id2title:B,returnId:!0})}),x="rule_jump_".concat(d.id);if(te.current.forEach(function(V){var T=(0,U.rg)(function(){var y;return((y=Q.query(V).take())===null||y===void 0?void 0:y.data)||[]});T.splice(T.indexOf(x),1)}),te.current=[],p.success&&p.result!==void 0&&p.result){var C=(0,b.BB)(d,A,p.result);C.forEach(function(V){te.current.push(V.id);var T=Q.query(V.id).take();if(T){var y=(0,U.rg)(function(){return T.data||[]});p.result&&!y.includes(x)?y.push(x):!p.result&&y.includes(x)&&y.splice(y.findIndex(function(L){return L===x}),1)}})}}},function(v){var f,O=(f=d.attribute)===null||f===void 0?void 0:f.visibleRule;if(O){var p=(0,b.vW)(O,function(V){var T=(0,b.Op)(V),y=(0,D.Z)(T,2),L=y[0],Fe=y[1],Ve=v.query(L).get("value");return(0,b.d0)({optionTypes:F,qValue:Ve,expression:V})});if(p.success&&v.display!=="hidden"){var x="rule_visible_".concat(d.id),C=(0,U.rg)(function(){return v.data});p.result&&C.includes(x)?C.splice(C.findIndex(function(V){return V===x}),1):!p.result&&!C.includes(x)&&C.push(x)}}},function(v){Object.entries(J).forEach(function(f){var O=(0,D.Z)(f,2),p=O[0],x=O[1],C=x,V=(0,b.vW)(C,function(T){var y=(0,b.Op)(T),L=(0,D.Z)(y,2),Fe=L[0],Ve=L[1],Ie=v.query(Fe),Se=Ie.get("value"),ze=Ie.get("componentProps").schema;return(0,b.d0)({optionTypes:F,qValue:Se,expression:T,id2title:B,qSchema:ze})});V.success&&v.setState(function(T){var y;return T.value=(0,I.Z)((0,I.Z)({},T.value),{},(0,Y.Z)({},p,(0,b.A7)(V.result,(y=d.children)===null||y===void 0?void 0:y.find(function(L){return L.id===p}))))})})},function(v){var f,O=(f=d.attribute)===null||f===void 0?void 0:f.requiredRule;if(O){var p=(0,b.vW)(O,function(x){var C=(0,b.Op)(x),V=(0,D.Z)(C,2),T=V[0],y=V[1],L=v.query(T).get("value");return(0,b.d0)({optionTypes:F,qValue:L,expression:x})});p.success&&(p.result?v.required=!0:v.required=!1)}},function(v){var f,O=(f=d.attribute)===null||f===void 0?void 0:f.replaceTextRule;if(O){var p=(0,b.vW)(O,function(C){var V=(0,b.Op)(C),T=(0,D.Z)(V,1),y=T[0],L=v.query(y).get("value");return(0,b.d0)({optionTypes:F,qValue:L,expression:C,id2title:B})}),x="";p.success&&p.result&&(x=p.result),v.setDecoratorProps((0,I.Z)((0,I.Z)({},v.decoratorProps),{},{replaceTitle:x}))}},function(v){var f,O=(f=d.attribute)===null||f===void 0?void 0:f.validateRule;if(O){var p=(0,b.vW)(O,function(x){var C=(0,b.Op)(x),V=(0,D.Z)(C,1),T=V[0],y=v.query(T).get("value");return(0,b.d0)({optionTypes:F,qValue:y,expression:x,id2title:B})});p.success&&(p.result?v.setSelfErrors([p.result]):v.setSelfErrors([]))}},function(v){var f,O=(f=d.children)===null||f===void 0?void 0:f.filter(function(y){var L;return(L=y.attribute)===null||L===void 0?void 0:L.rejectOtherOption});if(O&&O.length>0){var p=v.value,x=Pe(ne.current,p);if(x){var C,V,T=(C=d.children)===null||C===void 0?void 0:C.find(function(y){return y.id===x});T&&(V=T.attribute)!==null&&V!==void 0&&V.rejectOtherOption?T.attribute.rejectOtherOption==="rejectAll"?p=(0,Y.Z)({},x,p[x]):T.attribute.rejectOtherOption==="rejectOther"&&O.forEach(function(y){y&&y.id!==x&&delete p[y.id]}):O.filter(function(y){var L;return((L=y.attribute)===null||L===void 0?void 0:L.rejectOtherOption)==="rejectAll"}).forEach(function(y){y&&y.id!==x&&delete p[y.id]}),v.setState(function(y){return y.value=(0,I.Z)({},p)})}ne.current=(0,U.ZN)(p)}}]})});function Pe(s,u){if(u){var h=Object.keys(u).filter(function(d){return!(s&&s.hasOwnProperty(d))});if(h.length>0)return h[0]}}function ie(s){var u=s.schema,h=s.index,d=u.id,z=(0,Z.useContext)(ve.Z),P=z.theme,$=z.optionTypes,M=z.id2title,m=function(){var F,B=-1;return(F=u.children)===null||F===void 0?void 0:F.filter(function(A){var Q;return((Q=A.attribute)===null||Q===void 0?void 0:Q.display)!=="hidden"}).map(function(A,Q){var G;return!(0,b.nj)(A.type)&&((G=A.attribute)===null||G===void 0?void 0:G.display)!=="hidden"&&B++,A.type==="QuestionSet"?(0,j.jsx)(ie,{schema:A,index:B},A.id):(0,j.jsx)(oe,{schema:A,index:B,qsIndex:B},A.id)})};return(0,j.jsx)(N.jG,{name:d,data:[],decorator:[(0,K.GZ)(P,"QuestionSet"),{schema:u,index:h}],reactions:[function(g){var F=g.data||[];F.length===0?g.display="visible":g.display="none"},function(g){var F,B=(F=u.attribute)===null||F===void 0?void 0:F.replaceTextRule;if(B){var A=(0,b.vW)(B,function(G){var J=(0,b.Op)(G),ne=(0,D.Z)(J,1),te=ne[0],ye=g.query(te).get("value");return(0,b.d0)({optionTypes:$,qValue:ye,expression:G,id2title:M})}),Q="";A.success&&A.result&&(Q=A.result),g.setComponentProps((0,I.Z)((0,I.Z)({},g.componentProps),{},{replaceTitle:Q}))}},function(g){var F,B=(F=u.attribute)===null||F===void 0?void 0:F.visibleRule;if(B){var A=(0,b.vW)(B,function(J){var ne=(0,b.Op)(J),te=(0,D.Z)(ne,2),ye=te[0],Ce=te[1],je=g.query(ye).get("value");return(0,b.d0)({optionTypes:$,qValue:je,expression:J})});if(console.log(A),A.success){var Q="visible_".concat(u.id),G=(0,U.rg)(function(){return g.data});console.log(G),A.result&&G.includes(Q)?G.splice(G.findIndex(function(J){return J===Q}),1):!A.result&&!G.includes(Q)&&G.push(Q)}}}],children:m()})}var Re=function(u){var h=u.progress,d=h===void 0?0:h;return _jsx("div",{className:"progress-bar",style:{width:"".concat(d*100,"%")}})},Ae=function(){return _jsxs("svg",{viewBox:"0 0 1024 1024",width:"150",height:"150",children:[_jsx("path",{d:"M0 0h1024v1024H0z",fill:"#FFFFFF","p-id":"44112"}),_jsx("path",{d:"M160 73.426667h83.173333V0h98.266667v155.010667h75.6v179.485333h37.813333V163.168h22.666667v-40.8h68.053333v24.474667h30.24v342.666666h60.48V40.8h45.36v236.586667h22.666667V179.485333h45.36V16.317333H893.333333V824H160V73.426667z",fill:"#DDEEFF",opacity:".4","p-id":"44113"}),_jsx("path",{d:"M362.693333 741.416l635.866667 95.584L689.893333 997.333333 24 852.36z",fill:"#DFE7F7","p-id":"44114"}),_jsx("path",{d:"M1002.64 813.370667l-307.6 160.322666-665.893333-144.970666-0.826667-2.629334v-8.213333l20.586667 2.666667v1.701333l318.933333-104.469333 614.213333 92.48v-5.101334H1002.666667v8.213334h-0.026667z",fill:"#5AA12E","p-id":"44115"}),_jsx("path",{d:"M1002.64 805.157333l-308.64 160.314667-665.653333-144.92h-0.026667l-0.213333-0.04 0.213333-0.064v-8.104l17.733333 2.296 320.746667-105.066667 615.253333 92.488v-5.098666H1002.666667v8.213333h-0.026667z",fill:"#93C110","p-id":"44116"}),_jsx("path",{d:"M366.8 701.333333L1002.666667 796.917333l-308.666667 160.333334L28.106667 812.266667z",fill:"#EEF2F5","p-id":"44117"}),_jsx("path",{d:"M629.333333 809.333333a138.666667 6.666667 0 1 0 277.333334 0 138.666667 6.666667 0 1 0-277.333334 0Z",fill:"#E3E7EA","p-id":"44118"}),_jsx("path",{d:"M162.666667 773.333333a152 13.333333 0 1 0 304 0 152 13.333333 0 1 0-304 0Z",fill:"#E3E7EA","p-id":"44119"}),_jsx("path",{d:"M922.666667 610.666667h-64v170.666666h53.333333a13.333333 13.333333 0 0 1 0 26.666667h-181.333333a13.333333 13.333333 0 0 1 0-26.666667h58.666666v-144h-26.666666a10.666667 10.666667 0 0 1-10.666667-10.666666v-16h-117.333333v82.666666a8 8 0 0 1-16 0v-82.666666h-5.333334a10.666667 10.666667 0 0 1-10.666666-10.666667v-2.666667l48-50.666666h4.48a7.658667 7.658667 0 0 1 1.573333-0.968l187.093333-83.381334a10.4 10.4 0 0 1 14.773334 6.208l72.453333 81.178667a8.066667 8.066667 0 0 1 2.08 5.461333 11.581333 11.581333 0 0 1 0.213333 2.168v42.666667a10.666667 10.666667 0 0 1-10.666666 10.666667z m-272-42.666667l-26.666667 29.333333h26.666667v-29.333333z m117.333333 53.333333h66.666667v-58.666666h-29.333334l-37.333333 37.333333v21.333333z m-16-24l37.333333-37.333333h-37.333333v37.333333z m-45.333333 0h21.333333v-37.333333h-21.333333v37.333333z m-18.666667-37.333333h-21.333333v37.333333h21.333333v-37.333333z m5.84-13.333333h96.693333a9.224 9.224 0 0 1 0.693334-1.6l32.506666-56.290667zM842.666667 487.976L808.773333 546.666667H842.666667v-58.690667zM845.333333 648h-42.666666v26.666667h42.666666v-26.666667z m0 37.333333h-42.666666v42.666667h42.666666v-42.666667z m0 53.333334h-42.666666v42.666666h42.666666v-42.666666z m13.333334-141.333334h21.333333v-37.333333h-21.333333v37.333333z m0-104.690666V546.666667h48.213333zM917.333333 560h-21.333333v37.333333h21.333333v-37.333333z",fill:"#8BC8FF","p-id":"44120"}),_jsx("path",{d:"M592 709.333333h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H514.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H592a8 8 0 0 1 0 16z",fill:"#DFF0FF","p-id":"44121"}),_jsx("path",{d:"M936 298.666667h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205334 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H858.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205334H936a8 8 0 0 1 0 16z",fill:"#C3E2FF","p-id":"44122"}),_jsx("path",{d:"M104 408H45.333333a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205334H26.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205334 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H104a8 8 0 0 1 0 16z",fill:"#DCEEFF","p-id":"44123"}),_jsx("path",{d:"M309.333333 522.666667m-245.333333 0a245.333333 245.333333 0 1 0 490.666667 0 245.333333 245.333333 0 1 0-490.666667 0Z",fill:"#FFCC6C","p-id":"44124"}),_jsx("path",{d:"M296 730.666667a245.389333 245.389333 0 0 0 237.013333-308.746667 245.333333 245.333333 0 1 1-460.693333 164.16A245.333333 245.333333 0 0 0 296 730.666667z",fill:"#F3B72C","p-id":"44125"}),_jsx("path",{d:"M338.666667 464m-50.666667 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#E49817","p-id":"44126"}),_jsx("path",{d:"M333.333333 456m-50.666666 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#FFFFFF","p-id":"44127"}),_jsx("path",{d:"M303.333333 603.2a37.085333 37.085333 0 1 1-38 37.066667 37.544 37.544 0 0 1 38-37.066667z",fill:"#E49817","p-id":"44128"}),_jsx("path",{d:"M299.333333 597.333333A37.085333 37.085333 0 1 1 261.333333 634.4a37.544 37.544 0 0 1 38-37.066667z",fill:"#FFFFFF","p-id":"44129"}),_jsx("path",{d:"M182.786667 554.125333m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#E49817","p-id":"44130"}),_jsx("path",{d:"M179.88 549.874667m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#FFFFFF","p-id":"44131"}),_jsx("path",{d:"M251.733333 320.424a19.794667 19.794667 0 1 1-20.266666 19.789333 20.026667 20.026667 0 0 1 20.266666-19.789333z",fill:"#E49817","p-id":"44132"}),_jsx("path",{d:"M249.6 317.333333a19.794667 19.794667 0 1 1-20.266667 19.786667 20.026667 20.026667 0 0 1 20.266667-19.786667z",fill:"#FFFFFF","p-id":"44133"}),_jsx("path",{d:"M426.04 365.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44134"}),_jsx("path",{d:"M419.293333 357.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44135"}),_jsx("path",{d:"M466.04 589.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44136"}),_jsx("path",{d:"M459.293333 581.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44137"}),_jsx("path",{d:"M490.666667 860a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44138"}),_jsx("path",{d:"M480 801.333333a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44139"}),_jsx("path",{d:"M526.453333 597.12a48.968 48.968 0 0 0-4.586666-4.722667c55.493333-36.413333 83.466667-80.64 68.986666-121.04-8.746667-24.416-31.866667-44.266667-64.773333-58.512-0.346667-0.984-0.666667-1.970667-1.12-2.946666a40.712 40.712 0 0 0-3.12-5.410667c39.093333 15.2 66.72 37.432 76.72 65.333333 15.306667 42.656-14.026667 89.253333-72.106667 127.298667zM573.333333 856v5.333333s-135.84 11.306667-109.333333-136c19.866667-100.330667-32.586667-80.72-41.386667-80.112 0 0 0 0.016 0.026667 0.026667a595.552 595.552 0 0 1-66.4 17.274667c-160.48 32.136-312.186667-2.04-338.8-76.336-13.413333-37.413333 7.466667-77.866667 51.973333-112.904a31.802667 31.802667 0 0 0 0.293334 7.485333c0.053333 0.24 0.133333 0.464 0.186666 0.701333-39.04 32.48-56.933333 69.181333-44.746666 103.173334 25.493333 71.109333 172.8 103.397333 329.013333 72.114666a589.661333 589.661333 0 0 0 64.533333-16.714666L418.666667 640s72.826667-26.768 50.666666 80c-17.92 86.293333 13.146667 138.845333 104 136z",fill:"#FFE1A9","p-id":"44140"}),_jsx("path",{d:"M512 884a74.666667 6.666667 0 1 0 149.333333 0 74.666667 6.666667 0 1 0-149.333333 0Z",fill:"#E3E7EA","p-id":"44141"}),_jsx("path",{d:"M608.453333 802.666667h20.426667l17.093333 75.917333h-54.613333z m-6.88 15.165333h34.186667v6.752h-34.186667v-6.752z m-5.066666 16.917333h44.32v6.749334h-44.32v-6.749334z m-5.173334 21.917334h54.666667v6.749333h-54.666667v-6.749333z m-11.946666 21.917333h78.56a3.381333 3.381333 0 0 1 3.386666 3.373333 3.384 3.384 0 0 1-3.386666 3.373334h-78.56a3.384 3.384 0 0 1-3.386667-3.373334 3.381333 3.381333 0 0 1 3.386667-3.373333z",fill:"#F9A303","p-id":"44142"}),_jsx("path",{d:"M768 838.666667a58.666667 6.666667 0 1 0 117.333333 0 58.666667 6.666667 0 1 0-117.333333 0Z",fill:"#E3E7EA","p-id":"44143"}),_jsx("path",{d:"M880 845.333333a5.181333 5.181333 0 0 0 5.333333-5v-70a5.181333 5.181333 0 0 0-5.333333-5v80z",fill:"#845C45","p-id":"44144"}),_jsx("path",{d:"M880 845.333333a5.181333 5.181333 0 0 1-5.333333-5v-70a5.181333 5.181333 0 0 1 5.333333-5v80z",fill:"#BA805A","p-id":"44145"}),_jsx("path",{d:"M880 770.666667a45.333333 45.333333 0 0 0 0-90.666667v90.666667z",fill:"#628A21","p-id":"44146"}),_jsx("path",{d:"M880 770.666667a45.333333 45.333333 0 0 1 0-90.666667v90.666667z",fill:"#6EA52E","p-id":"44147"}),_jsx("path",{d:"M568 786.778667l-1.946667 6.824a1.130667 1.130667 0 0 1-1.173333 0.773333l-4.16-0.349333a19.581333 19.581333 0 0 1-18.88 8.477333l-13.093333-1.664 0.026666-0.04a3.733333 3.733333 0 0 1-0.986666-0.397333c-2.586667-1.504-3.706667-5.986667-3.306667-11.509334l-7.146667-1.816a3.408 3.408 0 0 1-2.56-4.173333 3.656 3.656 0 0 1 4.426667-2.4l6.453333 1.642667c0.293333-1.066667 0.613333-2.154667 1.013334-3.237334 0.213333-0.621333 0.453333-1.221333 0.693333-1.810666l-7.626667-1.938667a3.410667 3.410667 0 0 1-2.56-4.176 3.653333 3.653333 0 0 1 4.426667-2.4l9.12 2.317333a11.101333 11.101333 0 0 1 7.306667-5.472V765.333333l8.906666 1.136a18.562667 18.562667 0 0 1 16.613334 17.386667l3.813333 1.685333a1.066667 1.066667 0 0 1 0.64 1.237334z m-26.693333-20.149334c-2.693333-1.52-6.24 0.429333-9.306667 4.578667l4.08 1.032a3.392 3.392 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-5.68-1.437333c-0.24 0.573333-0.48 1.16-0.693333 1.765333q-0.6 1.642667-1.04 3.274667l6.88 1.744a3.389333 3.389333 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-6.133333-1.557333c-0.32 5.184 0.853333 9.368 3.386667 10.805333 4.053333 2.298667 10.08-3.309333 13.44-12.533333s2.853333-18.52-1.2-20.818667z",fill:"#FF6767","p-id":"44148"}),_jsx("path",{d:"M578.666667 789.333333s194 0.666667 98.666666 64l-2.666666-2.666666s100.826667-53-98.666667-58.666667z",fill:"#FFE1A9","p-id":"44149"})]})},De=function(u){return _jsx(Icon,_objectSpread({component:Ae},u))},ae=i(27484),be=i.n(ae),Te=i(75977),Me=i(45418),Ne=i(62713),xe=i(33852),Ze=i(10285),Be=i.n(Ze),l=i(6833),t=i.n(l),a=i(96036),r=i.n(a);be().locale("zh-cn"),be().extend(t()),be().extend(Be()),be().extend(r());var n=(0,Me.default)((0,I.Z)({},Te.Z)),e=n,o=Z.forwardRef(function(s,u){return(0,j.jsx)(e,(0,I.Z)((0,I.Z)({},s),{},{picker:"time",mode:void 0,ref:u}))});o.displayName="TimePicker";var c=null},54707:function(Ee,ce,i){"use strict";i.d(ce,{Rk:function(){return D},AK:function(){return b},Al:function(){return I},zE:function(){return k}});var N=i(67294),Z=i(86052);function b(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",w=(0,N.useContext)(Z.Z),X=w.theme;return"survey-".concat(X)+E}function ve(E,w){var X=(w&&w.depends||[]).reduce(function(S,R){return S||!R},!1);return K(X?void 0:function(S,R){return fetch(S,R).then(function(W){if(!!W.ok)return W.json()})},E,w||{})}function K(E){for(var w=arguments.length,X=new Array(w>1?w-1:0),S=1;S<w;S++)X[S-1]=arguments[S];var R=useState(0),W=_slicedToArray(R,2),_=W[0],ue=W[1],ee=useCallback(function(){ue(Math.random())},[]),re=useState({loading:!1,mutate:ee}),he=_slicedToArray(re,2),se=he[0],q=he[1];return useEffect(function(){!E||X[1].manual&&_===0||E.apply(null,X).then(function(de){de.code===200?q({loading:!1,data:de.data,mutate:ee}):q({error:de.message,loading:!1,mutate:ee})}).catch(function(de){q({error:de,loading:!1,mutate:ee})})},j(_,X)),se}function j(){for(var E=arguments.length,w=new Array(E),X=0;X<E;X++)w[X]=arguments[X];for(var S=[],R=0;R<arguments.length;R++){var W=arguments[R];if(W instanceof Array)for(var _=0;_<W.length;_++)S=S.concat(j(W[_]));else if(typeof URL!="undefined"&&W instanceof URL)S=S.concat(W.toJSON());else if(W instanceof Object)for(var ue=Object.keys(W),ee=0;ee<ue.length;ee++){var re=ue[ee];re==="depends"?S=S.concat(W[re]):S=S.concat([re]).concat(j(W[re]))}else S=S.concat(W)}return S}var H=i(40807);function I(){return(0,N.useContext)(H.ZX)}function D(){var E=(0,N.useContext)(H.ZX);return E.innerStore}var U=function(w){var X=N.useRef(w);return N.useEffect(function(){X.current=w}),X},Y=U,le=typeof performance!="undefined"?performance:Date,pe=function(){return le.now()};function k(E){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,S=Y(E),R=1e3/w,W=N.useRef(0),_=N.useRef(),ue=function(){return _.current&&clearTimeout(_.current)},ee=[w,X,S];return N.useEffect(function(){return function(){W.current=0,ue()}},ee),N.useCallback(function(){var re=arguments,he=pe(),se=function(){W.current=he,ue(),S.current.apply(null,re)},q=W.current;if(X&&q===0)return se();if(he-q>R){if(q>0)return se();W.current=he}ue(),_.current=setTimeout(function(){se(),W.current=0},R)},ee)}function fe(E,w,X){var S=React.useState(E);return[S[0],k(S[1],w,X)]}},68068:function(Ee,ce,i){"use strict";i.d(ce,{O:function(){return Ze},Z:function(){return Be}});var N=i(80937),Z=i(67294),b=i(67635),ve=i(86052),K=i(48187),j=i(91220),H=i(11849),I=i(83279),D=i(3182),U=i(94657),Y=i(69610),le=i(54941),pe=i(94043),k=i.n(pe),fe=i(64031),E=i(54531),w=i(28579),X=i(20618);function S(l,t){}var R=i(40807),W=function(){function l(t){var a=this;(0,Y.Z)(this,l),this.props=void 0,this.progress=0,this.form=void 0,this.pagination=void 0,this.questionsGroupByPagination=[],this.notNoneInQuestionGroup=[],this.answerSheet=[],this.answerSheetVisible=!1,this.reviewAnswer={},this.compute=void 0;var r=t.initialValues,n=t.readOnly,e=t.fieldPermission,o=t.theme,c=t.schema,s=t.mode,u=t.onePageOneQuestion,h=u===void 0?!1:u,d=t.paginationVisible;this.props=t,this.changeQuestionsGroupByPagination(c,d,h);var z=(0,fe.Np)({initialValues:r,readOnly:n,validateFirst:!0,effects:function($){(0,fe.dQ)(function(){if(a.questionsGroupByPagination.map(function(g,F){return F}).slice(1).forEach(function(g){return a.setDisplay(g,"hidden")}),e){var M=[],m=[];Object.entries(e).forEach(function(g){var F=(0,U.Z)(g,2),B=F[0],A=F[1];A===0?M.push(B):A===1&&m.push(B)}),M.length>0&&z.setFieldState("*(".concat(M.join(","),")"),function(g){return g.display="none"}),m.length>0&&z.setFieldState("*(".concat(m.join(","),")"),function(g){return g.pattern="readPretty"})}a.handleFormValuesChange(),a.highlightJs()}),(0,fe.pO)(function(M){a.handleFormValuesChange()}),(0,fe.Zj)("*",function(M,m){a.handleFieldValueChange(M,m)}),S(c,$)}});this.form=z,this.pagination=(0,R.dr)(c,h),this.answerSheet=(0,R.Xn)(c).filter(function(P){var $;return(0,R.a1)(P.type)&&(($=P.attribute)===null||$===void 0?void 0:$.display)!=="hidden"}).map(function(P){return{finished:!1,id:P.id,marked:!1,display:"visible"}})||[],o==="antd"&&s==="exam"&&(this.answerSheetVisible=!0),this.makeObservable(),this.props.correctAnswerVisible&&r&&(0,R.Xn)(c).forEach(function(P){a.computeReviewAnswer(P,r[P.id]).then(function($){$&&(a.reviewAnswer[P.id].visible=!0)})}),this.compute=_(function(){console.time("compute order/visible/progress"),a.reOrder(),a.computeNotNoneInQuestionGroup(),a.computeProgress(),console.timeEnd("compute order/visible/progress")},10)}return(0,le.Z)(l,[{key:"makeObservable",value:function(){(0,E.Ou)(this,{progress:E.LO.ref,pagination:E.LO.shallow,questionsGroupByPagination:E.LO.ref,form:E.LO.ref,props:E.LO.shallow,answerSheet:E.LO,answerSheetVisible:E.LO.ref,reviewAnswer:E.LO,notNoneInQuestionGroup:E.LO,schema:E.LO.computed,computeProgress:E.aD,changeQuestionsGroupByPagination:E.aD,validate:E.aD,setDisplay:E.aD,handlePrev:E.aD,handleNext:E.aD,submit:E.aD,handleFormValuesChange:E.aD,changePageIndex:E.aD,handleFieldValueChange:E.aD,computeReviewAnswer:E.aD,computeNotNoneInQuestionGroup:E.aD,reOrder:E.aD})}},{key:"schema",get:function(){return this.props.schema}},{key:"changeQuestionsGroupByPagination",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;r?this.questionsGroupByPagination=(0,R._T)(a,n):this.questionsGroupByPagination=[a.children]}},{key:"highlightJs",value:function(){document.querySelectorAll(".ql-syntax").forEach(function(a){w.Z.highlightElement(a)})}},{key:"validate",value:function(){var t=(0,D.Z)(k().mark(function r(n){var e,o;return k().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(o=((e=this.questionsGroupByPagination[n])===null||e===void 0?void 0:e.reduce(function(u,h){return u.push.apply(u,(0,I.Z)((0,R.Xn)(h))),u},[]))||[],o.length!==0){s.next=3;break}return s.abrupt("return",!0);case 3:return s.abrupt("return",this.form.validate("*(".concat(o.map(function(u){return u.id}).join(","),")")));case 4:case"end":return s.stop()}},r,this)}));function a(r){return t.apply(this,arguments)}return a}()},{key:"setDisplay",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"visible",n=this.questionsGroupByPagination[a].filter(function(e){var o;return((o=e.attribute)===null||o===void 0?void 0:o.display)!=="hidden"}).map(function(e){return e.id}).join(",");n&&this.form.query("*(".concat(n,")")).forEach(function(e){r==="visible"&&(e.data=e.data.filter(function(o){return o!=="hidden"})),r==="hidden"&&e.data.indexOf("hidden")===-1&&e.data.push("hidden")})}},{key:"handlePrev",value:function(){var a=this.pagination,r=a.current-1;this.setDisplay(r,"hidden"),this.setDisplay(r-1,"visible"),this.pagination=(0,H.Z)((0,H.Z)({},a),{},{current:a.current-1})}},{key:"handleNext",value:function(){var t=(0,D.Z)(k().mark(function r(n){var e,o;return k().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e=this.pagination.current-1,s.prev=1,s.next=4,this.validate(e);case 4:o=this.pagination,this.setDisplay(e,"hidden"),this.setDisplay(e+1,"visible"),this.pagination=(0,H.Z)((0,H.Z)({},o),{},{current:n||o.current+1}),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.log(s.t0);case 13:case"end":return s.stop()}},r,this,[[1,10]])}));function a(r){return t.apply(this,arguments)}return a}()},{key:"changePageIndex",value:function(a){var r=this.questionsGroupByPagination.findIndex(function(o){return!!(o.reduce(function(c,s){return c.push.apply(c,(0,I.Z)((0,R.Xn)(s))),c},[])||[]).find(function(c){return c.id===a})}),n=this.pagination,e=n.current-1;this.setDisplay(e,"hidden"),this.setDisplay(r,"visible"),this.pagination=(0,H.Z)((0,H.Z)({},n),{},{current:r+1}),this.answerSheetVisible=!1,(0,R.lA)(a,this.props.progressBar?-25:0)}},{key:"handleFormValuesChange",value:function(){var t=(0,D.Z)(k().mark(function r(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.computeProgress(),this.props.onChange&&this.props.onChange(this.form.values,this.progress);case 2:case"end":return e.stop()}},r,this)}));function a(){return t.apply(this,arguments)}return a}()},{key:"handleFieldValueChange",value:function(){var t=(0,D.Z)(k().mark(function r(n,e){var o,c,s;return k().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:s=n.path.toString(),(o=(c=this.props).onFieldChange)===null||o===void 0||o.call(c,s,(0,E.ZN)(n.value)),this.props.exerciseMode&&this.computeReviewAnswer(n.componentProps.schema,n.value);case 3:case"end":return h.stop()}},r,this)}));function a(r,n){return t.apply(this,arguments)}return a}()},{key:"computeReviewAnswer",value:function(){var t=(0,D.Z)(k().mark(function r(n,e){var o,c,s,u;return k().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(o=!1,this.props.mode!=="exam"){d.next=10;break}if(s=this.reviewAnswer[n.id],u=n.type,["FillBlank","MultipleBlank","HorzBlank","Radio","Checkbox"].includes(n.type)){d.next=6;break}return d.abrupt("return");case 6:if((c=n.attribute)!==null&&c!==void 0&&c.examAnswerMode&&["selectAll","selectCorrect","onlyOne","select"].includes(n.attribute.examAnswerMode)){d.next=8;break}return d.abrupt("return");case 8:o=!0,this.reviewAnswer[n.id]=n.children.reduce(function(z,P){var $,M=!!(($=P.attribute)!==null&&$!==void 0&&$.examCorrectAnswer);if(u==="FillBlank"||u==="MultipleBlank"||u==="Textarea"||u==="HorzBlank"){var m,g,F=(m=P.attribute)===null||m===void 0?void 0:m.examMatchRule,B=e==null?void 0:e[P.id],A=(g=P.attribute)===null||g===void 0?void 0:g.examCorrectAnswer;!B||!A?M=!1:F==="contain"&&B.includes(A.trim())||B===A?M=!0:M=!1}return z[P.id]={selected:!!(e!=null&&e.hasOwnProperty(P.id)),isCorrect:M},z},{visible:!!(s!=null&&s.visible)});case 10:return d.abrupt("return",o);case 11:case"end":return d.stop()}},r,this)}));function a(r,n){return t.apply(this,arguments)}return a}()},{key:"computeProgress",value:function(){var a=this;if(!!this.props.progressBar){var r=0,n=0;this.form.query("*").forEach(function(e){var o=a.answerSheet.find(function(c){return c.id===e.path.toString()});e.displayName==="Field"&&!e.path.toString().startsWith("_")&&(o&&(o.display=e.display),e.data.filter(function(c){return c!=="hidden"}).length===0&&r++,!(0,R.xb)(e.value)&&e.componentProps.schema.attribute.display!=="hidden"?(n++,o&&(o.finished=!0)):o&&(o.finished=!1))}),this.progress=n/r}}},{key:"computeNotNoneInQuestionGroup",value:function(){var a=this;this.notNoneInQuestionGroup=this.questionsGroupByPagination.map(function(r){return r.map(function(n){var e,o=a.form.query(n.id).take();if(o&&((e=n.attribute)===null||e===void 0?void 0:e.display)!=="hidden"&&o.display!=="none")return n.id}).filter(function(n){return n!==void 0})})}},{key:"reOrder",value:function(){var a,r=this;if(!!this.props.questionNumber){var n=1;(a=this.schema.children)===null||a===void 0||a.filter(function(e){return!(0,R.nj)(e.type)||e.type==="QuestionSet"}).forEach(function(e){var o,c=e.id,s=r.form.query(c).get("display");if(s!=="none"&&((o=e.attribute)===null||o===void 0?void 0:o.display)!=="hidden"){var u=r.form.query(c).take();u&&(u.setDecoratorProps((0,H.Z)((0,H.Z)({},u.decoratorProps),{},{seqNo:n})),n++);var h=1;if(e.type==="QuestionSet"){var d;(d=e.children)===null||d===void 0||d.filter(function(z){return!(0,R.nj)(z.type)}).forEach(function(z){var P=z.id,$=r.form.query(P).get("display");if($==="visible"){var M=r.form.query(P).take();M&&(M.setDecoratorProps((0,H.Z)((0,H.Z)({},M.decoratorProps),{},{seqNo:h})),h++)}})}}})}}},{key:"submit",value:function(){var t=(0,D.Z)(k().mark(function r(){var n,e,o,c,s,u,h,d,z,P,$;return k().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:n="",e=this.form.query("*").map().filter(function(g){return!(0,fe.JF)(g)}),o=(0,j.Z)(e),m.prev=3,o.s();case 5:if((c=o.n()).done){m.next=31;break}if(d=c.value,!(0,fe.JF)(d)){m.next=9;break}return m.abrupt("continue",29);case 9:if(n=d.path.toString(),z=((s=this.props.schema.children)===null||s===void 0||(u=s.find(function(g){return g.id===n}))===null||u===void 0||(h=u.attribute)===null||h===void 0?void 0:h.display)==="hidden",!z){m.next=13;break}return m.abrupt("continue",29);case 13:if(P=d.display,P!=="none"){m.next=16;break}return m.abrupt("continue",29);case 16:return $=d.selfDisplay,d.display="visible",m.prev=18,m.next=21,d.validate();case 21:d.display=$,m.next=29;break;case 24:return m.prev=24,m.t0=m.catch(18),this.changePageIndex(n),(0,R.lA)(n,this.props.progressBar?-25:0),m.abrupt("return");case 29:m.next=5;break;case 31:m.next=36;break;case 33:m.prev=33,m.t1=m.catch(3),o.e(m.t1);case 36:return m.prev=36,o.f(),m.finish(36);case 39:return this.props.onSubmit&&this.props.onSubmit((0,E.ZN)(this.form.values)),m.abrupt("return",{values:(0,E.ZN)(this.form.values)});case 41:case"end":return m.stop()}},r,this,[[3,33,36,39],[18,24]])}));function a(){return t.apply(this,arguments)}return a}()},{key:"markQuestion",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this.answerSheet,e=n.findIndex(function(o){return o.id===a});this.answerSheet.splice(e,1,(0,H.Z)((0,H.Z)({},n[e]),{},{marked:r}))}}]),l}();function _(l,t,a){var r=void 0,n=void 0;return function(){var e=+new Date;n||(n=e),a&&e-n>a?(l(),n=e,window.clearTimeout(r)):(window.clearTimeout(r),r=window.setTimeout(function(){l(),n=void 0},t))}}var ue=i(99439),ee=i(27484),re=i.n(ee),he=i(90019),se=i(10192);function q(l,t){var a,r,n=t.id,e=[];if((a=t.parent)!==null&&a!==void 0&&(r=a.type)!==null&&r!==void 0&&r.startsWith("Matrix"))if(t.parent.type==="MatrixAuto"&&Array.isArray(l))l.forEach(function(u,h){e.push(["".concat(h,"-").concat(n),u[t.id]])});else{var o;(o=t.parent.row)===null||o===void 0||o.forEach(function(u){l[u.id]?e.push(["".concat(u.id,"-").concat(n),l[u.id][t.id]]):e.push(["".concat(u.id,"-").concat(n),void 0])})}else{var c,s=(c=t.parent)===null||c===void 0?void 0:c.type;s==="Radio"||s==="Checkbox"?Object.keys(l).includes(t.id)&&e.push([t.id,l[t.id]]):e.push([t.id,l[t.id]])}return e}function de(l){return!isNaN(parseFloat(l))&&isFinite(l)}function Oe(l){return!!(de(l)&&Number.isInteger(parseFloat(l)))}function oe(l){var t=l.errMsg,a=l.schema,r=l.regEx,n=l.value;return a?ie({schema:a,value:n,errMsg:t,isValid:function(o){return o?r.test("".concat(o)):!0}}):null}function Pe(l){var t,a=l.schema,r=l.value,n=l.errMsg,e=((t=a.children)===null||t===void 0?void 0:t.filter(function(u){var h;return(h=u.attribute)===null||h===void 0?void 0:h.exclusiveFillBlankInMatrix}))||[],o=JSON.parse(JSON.stringify(r));Object.values(o).forEach(function(u){e.map(function(h){return h.id}).forEach(function(h){delete u[h]})});var c=!1;if(a.type==="MatrixAuto")r&&r.length>0&&(c=!0);else{var s;c=(s=a.row)===null||s===void 0?void 0:s.every(function(u){var h=o[u.id];return!(0,R.xb)(h)})}return c?null:n}function ie(l){var t=l.value,a=l.schema,r=l.isValid,n=l.errMsg;return!a||!a.parent?null:q(t,a).map(function(e){var o=(0,U.Z)(e,2),c=o[0],s=o[1];return r(s)?null:"".concat(c,"^").concat(n)}).filter(function(e){return e})[0]}function Re(l){if(Object.keys(l).length===0)return!0}function Ae(l){var t=l.substring(6,8),a=l.substring(8,10),r=l.substring(10,12),n=new Date(parseFloat(t),parseFloat(a)-1,parseFloat(r));return!(n.getFullYear()-1900!==parseFloat(t)||n.getMonth()!==parseFloat(a)-1||n.getDate()!==parseFloat(r))}function De(l){var t=l;if(l.length!==15&&l.length!==18)return!1;if(l.length===15)return Ae(t);var a={11:"\u5317\u4EAC",12:"\u5929\u6D25",13:"\u6CB3\u5317",14:"\u5C71\u897F",15:"\u5185\u8499\u53E4",21:"\u8FBD\u5B81",22:"\u5409\u6797",23:"\u9ED1\u9F99\u6C5F ",31:"\u4E0A\u6D77",32:"\u6C5F\u82CF",33:"\u6D59\u6C5F",34:"\u5B89\u5FBD",35:"\u798F\u5EFA",36:"\u6C5F\u897F",37:"\u5C71\u4E1C",41:"\u6CB3\u5357",42:"\u6E56\u5317 ",43:"\u6E56\u5357",44:"\u5E7F\u4E1C",45:"\u5E7F\u897F",46:"\u6D77\u5357",50:"\u91CD\u5E86",51:"\u56DB\u5DDD",52:"\u8D35\u5DDE",53:"\u4E91\u5357",54:"\u897F\u85CF ",61:"\u9655\u897F",62:"\u7518\u8083",63:"\u9752\u6D77",64:"\u5B81\u590F",65:"\u65B0\u7586",71:"\u53F0\u6E7E",81:"\u9999\u6E2F",82:"\u6FB3\u95E8",91:"\u56FD\u5916 "},r=!0;if(!t||!/^([1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx])|([1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2})$/i.test(t))r=!1;else if(!a[t.substr(0,2)])r=!1;else if(t.length>18)r=!1;else if(t.length===18){for(var n=t.split(""),e=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o=[1,0,"X",9,8,7,6,5,4,3,2],c=0,s=0,u=0,h=0;h<17;h+=1)s=parseInt(n[h],10),u=e[h],c+=s*u;var d=n[17].toUpperCase()==="X"?"X":Number(n[17]);o[c%11]!==d&&(r=!1)}return r}function ae(l,t){return!!(!l||!t||(0,R.xb)(l[t.id]))}var be={required:function(t,a){var r,n=a.schema,e=a.theme;return a&&a.required===!1?null:(0,R.xb)(t)?e==="antdForm"?"\u8BF7\u8F93\u5165":"\u8FD9\u9053\u9898\u672A\u56DE\u7B54":n!=null&&(r=n.type)!==null&&r!==void 0&&r.startsWith("Matrix")?Pe({schema:n,errMsg:"\u95EE\u9898\u672A\u56DE\u7B54\u5B8C\u6574",value:t}):n!=null&&n.parent?ie({schema:n,value:t,errMsg:"\u8FD9\u4E2A\u9009\u9879\u672A\u56DE\u7B54",isValid:function(c){return!(0,R.xb)(c)}}):null},answerLimit:function(t,a){var r,n=a.schema,e=n==null||(r=n.attribute)===null||r===void 0?void 0:r.answerLimit;if(!e)return null;var o=e.slice(1,e.length-1).split(","),c=parseInt(o[0]||"0"),s=parseInt(o[1]||"0"),u=Object.keys(t||{}).length;return t&&(u<c&&c!==0||u>s&&s!==0)?c===0?"\u6700\u591A\u9009\u62E9".concat(s,"\u9879"):s===0?"\u6700\u5C11\u9009\u62E9".concat(c,"\u9879"):"\u6700\u5C11\u9009\u62E9".concat(c,"\u9879,\u6700\u591A\u9009\u62E9").concat(s,"\u9879"):null},number:function(t,a){var r,n=a.schema;if(ae(t,n))return null;var e=n==null||(r=n.attribute)===null||r===void 0?void 0:r.numericScale,o="\u8BF7\u8F93\u5165\u6570\u5B57";return e===0?o="\u8BF7\u8F93\u5165\u6574\u6570":e&&e>0&&(o="\u8BF7\u4FDD\u7559".concat(e,"\u4F4D\u5C0F\u6570")),ie({errMsg:o,schema:n,value:t,isValid:function(s){return!(s!==void 0&&(!de(s)||e===0&&!Oe(s)||e!==void 0&&e>0&&("".concat(s).split(".")[1]||"").length>e))}})},date:function(t,a){var r,n=a.schema;if(ae(t,n))return null;if(n!=null&&(r=n.attribute)!==null&&r!==void 0&&r.dateTimeFormat&&t&&t[n.id]){var e=re()(t[n.id],n.attribute.dateTimeFormat).isValid();return e?null:"\u65E5\u671F\u683C\u5F0F\u4E0D\u6B63\u786E"}return oe({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F",schema:n,regEx:/^(?:(?:1[6-9]|[2-9][0-9])[0-9]{2}([-/.]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:(?:1[6-9]|[2-9][0-9])(?:0[48]|[2468][048]|[13579][26])|(?:16|[2468][048]|[3579][26])00)([-/.]?)0?2\2(?:29))(\s+([01][0-9]:|2[0-3]:)?[0-5][0-9]:[0-5][0-9])?$/,value:t})},dateTime:function(t,a){var r=a.schema;return ae(t,r)?null:oe({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F\u65F6\u95F4",schema:r,regEx:/^\d{4}[-]([0][1-9]|(1[0-2]))[-]([1-9]|([012]\d)|(3[01]))\s(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:t})},time:function(t,a){var r=a.schema;return ae(t,r)?null:oe({errMsg:"\u8BF7\u8F93\u5165\u65F6\u95F4",schema:r,regEx:/^(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:t})},mobile:function(t,a){var r=a.schema;return ae(t,r)?null:oe({errMsg:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",schema:r,regEx:/^1([358][0-9]|4[579]|66|7[01235678]|9[189])[0-9]{8}$/,value:t})},decimal:function(t,a){var r=a.schema;return ae(t,r)?null:oe({errMsg:"\u8BF7\u8F93\u5165\u6570\u5B57",schema:r,regEx:/^[+-]?\d+(\.\d+)?$/,value:t})},email:function(t,a){var r=a.schema;return ae(t,r)?null:oe({errMsg:"\u90AE\u4EF6\u683C\u5F0F\u4E0D\u6B63\u786E",schema:r,regEx:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,value:t})},idCard:function(t,a){var r=a.schema;return ae(t,r)?null:ie({errMsg:"\u8EAB\u4EFD\u8BC1\u683C\u5F0F\u4E0D\u6B63\u786E",schema:r,value:t,isValid:function(e){return!(e&&!De("".concat(e)))}})},chinese:function(t,a){var r=a.schema;return ae(t,r)?null:oe({errMsg:"\u8BF7\u8F93\u5165\u6C49\u5B57",schema:r,regEx:/^[\u4e00-\u9fa5]+$/,value:t})},alphabet:function(t,a){var r=a.schema;return ae(t,r)?null:oe({errMsg:"\u8BF7\u8F93\u5165\u5B57\u6BCD",schema:r,regEx:/^[a-zA-Z]+$/,value:t})},textLimit:function(t,a){var r,n=a.schema;if(ae(t,n))return null;var e=n==null||(r=n.attribute)===null||r===void 0?void 0:r.textLimit;if(!e)return null;var o=e.slice(1,e.length-1).split(","),c=parseInt(o[0]||"0"),s=parseInt(o[1]||"0");if(c===0&&s===0)return null;var u=ie({errMsg:c!==s?"\u8BF7\u8F93\u5165".concat(c,"~").concat(s,"\u4E2A\u5B57"):"\u8BF7\u8F93\u5165".concat(c,"\u4E2A\u5B57"),schema:n,value:t,isValid:function(d){return!(d&&("".concat(d).length<c||"".concat(d).length>s))}});return u},scope:function(t,a){var r,n,e=a.schema,o=e==null||(r=e.attribute)===null||r===void 0?void 0:r.scope,c=e==null||(n=e.attribute)===null||n===void 0?void 0:n.dataType;if(o&&c){if(c==="number")return ie({errMsg:"\u6570\u503C\u8303\u56F4\u4E0D\u6B63\u786E ".concat(o),schema:e,value:t,isValid:function(u){return!(u&&!(0,se.$l)(o,"".concat(u)))}});if(c==="date")return ie({errMsg:"\u65E5\u671F\u8303\u56F4\u4E0D\u6B63\u786E ".concat(o),schema:e,value:t,isValid:function(u){return!(u&&!(0,se.sm)(o,"".concat(u)))}});if(c==="dateTime")return ie({errMsg:"\u65E5\u671F\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(o),schema:e,value:t,isValid:function(u){return!(u&&!(0,se.de)(o,"".concat(u)))}});if(c==="time")return ie({errMsg:"\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(o),schema:e,value:t,isValid:function(u){return!(u&&!(0,se.YM)(o,"".concat(u)))}})}return null},horzBlank:function(t,a){return(0,D.Z)(k().mark(function r(){var n,e,o,c,s,u,h,d;return k().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(e=a.schema,!((e==null||(n=e.attribute)===null||n===void 0?void 0:n.dataType)!=="horzBlank"||t[e.id]===void 0||!e.children||!e.parent)){P.next=3;break}return P.abrupt("return",null);case 3:o=null,c=0;case 5:if(!(c<((s=e.children)===null||s===void 0?void 0:s.length))){P.next=15;break}return u=e.children[c],h=(0,he.j)(u,e),P.next=10,(0,ue.Gu)(t[e.id],h,{validateFirst:!0});case 10:d=P.sent,d.error&&d.error.length>0&&(o=d.error[0]);case 12:c++,P.next=5;break;case 15:return P.abrupt("return",o);case 16:case"end":return P.stop()}},r)}))()}};(0,ue.au)(be);var Te=i(8166),Me=i(8373),Ne=i(3980),xe=i(85893);window.katex=Te.Z;var Ze=(0,Z.forwardRef)(function(l,t){var a=l.theme,r=a===void 0?K.uH:a,n=l.footerVisible,e=n===void 0?!0:n,o=l.headerVisible,c=o===void 0?!0:o,s=l.loading,u=l.questionNumber,h=u===void 0?!0:u,d=l.onUpload,z=l.progressBar,P=z===void 0?!1:z,$=l.statistics,M=l.isPreview,m=l.mode,g=m===void 0?"survey":m,F=l.correctAnswerVisible,B=F===void 0?!1:F,A=l.examScoreVisible,Q=A===void 0?!1:A,G=l.onDictSearch,J=(0,Z.useMemo)(function(){return new W(l)},[]),ne=J.form,te=(0,Z.useMemo)(function(){return(0,R.Gt)(l.schema)},[l.schema]),ye=(0,Z.useMemo)(function(){var me={},ge=function v(f){me[f.id]=f.title,f.children&&f.children.forEach(v)};return ge(te),document.title=(0,Ne.WO)(te.title),me},[te]),Ce=(0,Z.useMemo)(function(){return(0,R.R6)(l.schema)},[l.schema]);(0,Z.useImperativeHandle)(t,function(){return{submit:function(){return J.submit()},reset:function(){ne.reset()},setValues:function(ge){ne.setValues(ge,"overwrite")},setValue:function(ge,v){ne.setFieldState(ge,function(f){return f.value=v})},toggleReadOnly:function(ge){ne.setState(function(v){v.pattern=ge?"readPretty":"editable"})},getValues:function(){return ne.values}}}),(0,Z.useEffect)(function(){l.onInit&&l.onInit(ne)},[]);var je=(0,Z.useMemo)(function(){return{theme:r,schema:te,footerVisible:e,questionNumber:h,headerVisible:c,optionTypes:Ce,onUpload:d,loading:s,id2title:ye,progressBar:P,innerStore:J,statistics:$,isPreview:M,mode:g,correctAnswerVisible:B,examScoreVisible:Q,onDictSearch:G}},[s,te,$]);return(0,xe.jsx)(Z.Suspense,{fallback:(0,xe.jsx)(Me.gb,{}),children:(0,xe.jsx)(Me.ZP,{theme:r,children:(0,xe.jsx)(N.RV,{form:ne,children:(0,xe.jsx)(ve.Z.Provider,{value:je,children:(0,xe.jsx)(b.k9,{schema:te})})})})})}),Be=Ze},90019:function(Ee,ce,i){"use strict";i.d(ce,{r:function(){return ve},j:function(){return K}});var N=i(32059),Z=i(11849),b=i(83279);function ve(j,H){var I,D=[],U=j.attribute;return U&&U.required&&D.push({required:!0,triggerType:"onInput",theme:H,schema:j}),U&&U.answerLimit&&D.push({answerLimit:!0,schema:j}),(I=j.children)===null||I===void 0||I.forEach(function(Y){D.push.apply(D,(0,b.Z)(K(Y,j)))}),D.forEach(function(Y){Y.triggerType="manual"}),D}function K(j,H){var I,D,U,Y,le=[];if((I=j.attribute)!==null&&I!==void 0&&I.dataType){var pe;le.push((pe={},(0,N.Z)(pe,j.attribute.dataType,!0),(0,N.Z)(pe,"schema",(0,Z.Z)((0,Z.Z)({},j),{},{parent:H})),pe))}return(D=j.attribute)!==null&&D!==void 0&&D.required&&le.push({required:!0,schema:(0,Z.Z)((0,Z.Z)({},j),{},{parent:H})}),(U=j.attribute)!==null&&U!==void 0&&U.textLimit&&le.push({textLimit:!0,schema:(0,Z.Z)((0,Z.Z)({},j),{},{parent:H})}),(Y=j.attribute)!==null&&Y!==void 0&&Y.scope&&le.push({scope:!0,schema:(0,Z.Z)((0,Z.Z)({},j),{},{parent:H})}),le}},8373:function(Ee,ce,i){"use strict";i.d(ce,{gb:function(){return j}});var N=i(67294),Z=i(85893),b=N.lazy(function(){return Promise.all([i.e(1693),i.e(9444),i.e(3546),i.e(2333),i.e(5759),i.e(3894),i.e(9217),i.e(6945),i.e(6917),i.e(780),i.e(1044),i.e(6547),i.e(1464),i.e(7998),i.e(5483)]).then(i.bind(i,5483))}),ve=N.lazy(function(){return Promise.all([i.e(1693),i.e(9444),i.e(3546),i.e(1642),i.e(2333),i.e(9217),i.e(6917),i.e(780),i.e(1044),i.e(6547),i.e(5625),i.e(7998),i.e(9840)]).then(i.bind(i,3857))}),K=N.lazy(function(){return Promise.all([i.e(1693),i.e(3546),i.e(1642),i.e(5759),i.e(3894),i.e(1044),i.e(3672)]).then(i.bind(i,17707))}),j=function(){return(0,Z.jsx)("div",{className:"page-loading-warp",children:(0,Z.jsxs)("div",{className:"spinner",children:[(0,Z.jsx)("div",{className:"rect1"}),(0,Z.jsx)("div",{className:"rect2"}),(0,Z.jsx)("div",{className:"rect3"}),(0,Z.jsx)("div",{className:"rect4"}),(0,Z.jsx)("div",{className:"rect5"})]})})},H=function(D){var U=D.theme,Y=D.children;return U==="antdMobile"?(0,Z.jsx)(ve,{children:Y}):U==="antdForm"?(0,Z.jsx)(K,{children:Y}):(0,Z.jsx)(b,{children:Y})};ce.ZP=H}}]);
