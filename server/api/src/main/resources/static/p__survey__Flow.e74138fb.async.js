(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6132],{55686:function(Pe,re,c){"use strict";var B=c(11849),le=c(94233),X=c(51890),ue=c(93224),b=c(89366),K=c(85893),Oe=function(he){var N=he.user,T=(0,ue.Z)(he,["user"]);return!N||!N.avatar?(0,K.jsx)(X.C,(0,B.Z)({icon:(0,K.jsx)(b.Z,{}),size:T.size||"small"},T)):(0,K.jsx)(X.C,(0,B.Z)({src:"/api/public/preview/".concat(N.avatar),size:T.size||"small"},T))};re.Z=Oe},58977:function(Pe,re,c){"use strict";c.r(re),c.d(re,{Flow:function(){return Ct},default:function(){return Xn}});var B=c(11849),le=c(49111),X=c(19650),ue=c(57663),b=c(71577),K=c(3182),Oe=c(71194),Ie=c(50146),he=c(34792),N=c(48086),T=c(83279),A=c(94657),Ft=c(94043),Le=c.n(Ft),p=c(67294),E=c(59782),P=c.n(E),U=c(86492),j={pluginName:"control",__lf:null,__controlItems:[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"\u7F29\u5C0F\u6D41\u7A0B\u56FE",text:"\u7F29\u5C0F",onClick:function(){j.__lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"\u653E\u5927\u6D41\u7A0B\u56FE",text:"\u653E\u5927",onClick:function(){j.__lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"\u6062\u590D\u6D41\u7A0B\u539F\u6709\u5C3A\u5BF8",text:"\u9002\u5E94",onClick:function(){j.__lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"\u56DE\u5230\u4E0A\u4E00\u6B65",text:"\u4E0A\u4E00\u6B65",onClick:function(){j.__lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"\u79FB\u5230\u4E0B\u4E00\u6B65",text:"\u4E0B\u4E00\u6B65",onClick:function(){j.__lf.redo()}}],addItem:function(n){j.__controlItems.push(n)},removeItem:function(n){var e=j.__controlItems.findIndex(function(a){return a.key===n});return j.__controlItems.splice(e,1)[0]},install:function(){},render:function(n,e){j.__lf=n,j.__domContainer=e,j.__tool=this.__getControlTool(),e.appendChild(j.__tool)},destroy:function(){try{var n;(n=j.__domContainer)===null||n===void 0||n.removeChild(j.__tool)}catch(e){console.warn("unexpect destory error",e)}},__getControlTool:function(){var n="lf-control-item",e="lf-control-item disabled",a=document.createElement("div"),r=[];return a.className="lf-control",j.__controlItems.forEach(function(s){var l=document.createElement("div"),o=document.createElement("i"),u=document.createElement("span");switch(l.className=e,s.onClick&&(l.onclick=s.onClick.bind(null,j.__lf)),s.onMouseEnter&&(l.onmouseenter=s.onMouseEnter.bind(null,j.__lf)),s.onMouseLeave&&(l.onmouseleave=s.onMouseLeave.bind(null,j.__lf)),o.className=s.iconClass,u.className="lf-control-text",u.title=s.title,u.innerText=s.text,l.append(o,u),s.text){case"\u4E0A\u4E00\u6B65":j.__lf.on("history:change",function(d){var v=d.data.undoAble;l.className=v?n:e});break;case"\u4E0B\u4E00\u6B65":j.__lf.on("history:change",function(d){var v=d.data.redoAble;l.className=v?n:e});break;default:l.className=n;break}r.push(l)}),a.append.apply(a,r),a}},Kn=null;function ve(i,n){for(var e=0;e<n;e++)i+="  ";return i}function fe(i,n,e,a){var r="";if(i instanceof Array)for(var s=0,l=i.length;s<l;s++)r+=ve(e,a)+fe(i[s],n,e,a+1);else if(typeof i=="object"){var o=!1;r+=ve(e,a)+"<"+n;for(var u in i)u.charAt(0)=="-"?r+=" "+u.substr(1)+'="'+i[u].toString().replace("<","&lt;")+'"':o=!0;if(r+=o?">":" />",o){for(var d in i)d=="#text"?r+=i[d]:d=="#cdata"?r+="<![CDATA["+i[d]+"]]>":d.charAt(0)!="-"&&(r+=fe(i[d],d,e,a+1));r+=ve(e,a)+"</"+n+">"}}else r+=ve(e,a)+"<"+n+">"+i.toString()+"</"+n+">";return r}function At(i){var n="";for(var e in i)n+=fe(i[e],e,`	
`,0);return n}var Z=function(){};Z.ObjTree=function(){return this},Z.ObjTree.VERSION="0.23",Z.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`,Z.ObjTree.prototype.attr_prefix="-",Z.ObjTree.prototype.parseXML=function(i){var n;if(window.DOMParser){var e=new DOMParser,a=e.parseFromString(i,"application/xml");if(!a)return;n=a.documentElement}else window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(i),n=e.documentElement);if(!!n)return this.parseDOM(n)},Z.ObjTree.prototype.parseHTTP=function(i,n,e){var a={};for(var r in n)a[r]=n[r];if(a.method||(typeof a.postBody=="undefined"&&typeof a.postbody=="undefined"&&typeof a.parameters=="undefined"?a.method="get":a.method="post"),e){a.asynchronous=!0;var s=this,l=e,o=a.onComplete;a.onComplete=function(v){var h;v&&v.responseXML&&v.responseXML.documentElement&&(h=s.parseDOM(v.responseXML.documentElement)),l(h,v),o&&o(v)}}else a.asynchronous=!1;var u;if(typeof HTTP!="undefined"&&HTTP.Request){a.uri=i;var d=new HTTP.Request(a);d&&(u=d.transport)}else if(typeof Ajax!="undefined"&&Ajax.Request){var d=new Ajax.Request(i,a);d&&(u=d.transport)}if(e)return u;if(u&&u.responseXML&&u.responseXML.documentElement)return this.parseDOM(u.responseXML.documentElement)},Z.ObjTree.prototype.parseDOM=function(i){if(!!i){if(this.__force_array={},this.force_array)for(var n=0;n<this.force_array.length;n++)this.__force_array[this.force_array[n]]=1;var e=this.parseElement(i);if(this.__force_array[i.nodeName]&&(e=[e]),i.nodeType!=11){var a={};a[i.nodeName]=e,e=a}return e}},Z.ObjTree.prototype.parseElement=function(i){if(i.nodeType!=7){if(i.nodeType==3||i.nodeType==4){var n=i.nodeValue.match(/[^\x00-\x20]/);return n==null?void 0:i.nodeValue}var e,a={};if(i.attributes&&i.attributes.length){e={};for(var r=0;r<i.attributes.length;r++){var s=i.attributes[r].nodeName;if(typeof s=="string"){var l=i.attributes[r].nodeValue;!l||(s=this.attr_prefix+s,typeof a[s]=="undefined"&&(a[s]=0),a[s]++,this.addNode(e,s,a[s],l))}}}if(i.childNodes&&i.childNodes.length){var o=!0;e&&(o=!1);for(var r=0;r<i.childNodes.length&&o;r++){var u=i.childNodes[r].nodeType;u==3||u==4||(o=!1)}if(o){e||(e="");for(var r=0;r<i.childNodes.length;r++)e+=i.childNodes[r].nodeValue}else{e||(e={});for(var r=0;r<i.childNodes.length;r++){var s=i.childNodes[r].nodeName;if(typeof s=="string"){var l=this.parseElement(i.childNodes[r]);!l||(typeof a[s]=="undefined"&&(a[s]=0),a[s]++,this.addNode(e,s,a[s],l))}}}}return e}},Z.ObjTree.prototype.addNode=function(i,n,e,a){this.__force_array[n]?(e==1&&(i[n]=[]),i[n][i[n].length]=a):e==1?i[n]=a:e==2?i[n]=[i[n],a]:i[n][i[n].length]=a},Z.ObjTree.prototype.writeXML=function(i){var n=this.hash_to_xml(null,i);return this.xmlDecl+n},Z.ObjTree.prototype.hash_to_xml=function(i,n){var e=[],a=[];for(var r in n)if(!!n.hasOwnProperty(r)){var s=n[r];r.charAt(0)!=this.attr_prefix?typeof s=="undefined"||s==null?e[e.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?e[e.length]=this.array_to_xml(r,s):typeof s=="object"?e[e.length]=this.hash_to_xml(r,s):e[e.length]=this.scalar_to_xml(r,s):a[a.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var l=a.join(""),o=e.join("");return typeof i=="undefined"||i==null||(e.length>0?o.match(/\n/)?o="<"+i+l+`>
`+o+"</"+i+`>
`:o="<"+i+l+">"+o+"</"+i+`>
`:o="<"+i+l+` />
`),o},Z.ObjTree.prototype.array_to_xml=function(i,n){for(var e=[],a=0;a<n.length;a++){var r=n[a];typeof r=="undefined"||r==null?e[e.length]="<"+i+" />":typeof r=="object"&&r.constructor==Array?e[e.length]=this.array_to_xml(i,r):typeof r=="object"?e[e.length]=this.hash_to_xml(i,r):e[e.length]=this.scalar_to_xml(i,r)}return e.join("")},Z.ObjTree.prototype.scalar_to_xml=function(i,n){return i=="#text"?this.xml_escape(n):"<"+i+">"+this.xml_escape(n)+"</"+i+`>
`},Z.ObjTree.prototype.xml_escape=function(i){return i.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var Dt=Z,ke={width:40,height:40},Re={width:40,height:40},ze={width:40,height:40},Ue={width:100,height:80},We={width:100,height:80},bt={rect:{radius:5,stroke:"rgb(24, 125, 255)"},circle:{r:18,stroke:"rgb(24, 125, 255)"},polygon:{stroke:"rgb(24, 125, 255)"},polyline:{stroke:"rgb(24, 125, 255)",hoverStroke:"rgb(24, 125, 255)",selectedStroke:"rgb(24, 125, 255)"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}},W;(function(i){i.START="startEvent",i.END="endEvent",i.GATEWAY="exclusiveGateway",i.USER="userTask",i.SYSTEM="serviceTask",i.FLOW="sequenceFlow"})(W||(W={}));var Ve=["startEvent","endEvent","exclusiveGateway","userTask","serviceTask","sequenceFlow","completionCondition","multiInstanceLoopCharacteristics","conditionExpression","#text"],Ge=["-name","-id","incoming","outgoing","-sourceRef","-targetRef"];function pe(i){var n={};return Object.entries(i).forEach(function(e){var a=(0,A.Z)(e,2),r=a[0],s=a[1];s!=null&&(typeof s!="object"?r.indexOf("-")===0||Ve.includes(r)?n[r]=s:n["-".concat(r)]=s:n[r]=pe(s))}),n}function xe(i){var n={};return Object.entries(i).forEach(function(e){var a=(0,A.Z)(e,2),r=a[0],s=a[1];typeof s=="string"?r.indexOf("-")===0?n[r.substr(1)]=s:n[r]=s:typeof s=="object"?n[r]=xe(s):n[r]=s}),n}function Zt(i,n){var e=new Map;n.nodes.forEach(function(r){var s,l={"-id":r.id};if((s=r.text)!==null&&s!==void 0&&s.value&&(l["-name"]=r.text.value),r.properties){var o=pe(r.properties);Object.assign(l,o)}e.set(r.id,l),i[r.type]?Array.isArray(i[r.type])?i[r.type].push(l):i[r.type]=[i[r.type],l]:i[r.type]=l});var a=n.edges.map(function(r){var s,l={"-id":r.id,"-sourceRef":r.sourceNodeId,"-targetRef":r.targetNodeId};if((s=r.text)!==null&&s!==void 0&&s.value){var o;l["-name"]=(o=r.text)===null||o===void 0?void 0:o.value}if(r.properties){var u=pe(r.properties);Object.assign(l,u)}return l});i[W.FLOW]=a}function St(i,n){i["bpmndi:BPMNEdge"]=n.edges.map(function(e){var a,r=e.id,s=e.pointsList.map(function(o){var u=o.x,d=o.y;return{"-x":u,"-y":d}}),l={"-id":"".concat(r,"_di"),"-bpmnElement":r,"di:waypoint":s};return(a=e.text)!==null&&a!==void 0&&a.value&&(l["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":e.text.x-e.text.value.length*10/2,"-y":e.text.y-7,"-width":e.text.value.length*10,"-height":14}}),l}),i["bpmndi:BPMNShape"]=n.nodes.map(function(e){var a,r=e.id,s=100,l=80,o=e.x,u=e.y,d=$.shapeConfigMap.get(e.type);d&&(s=d.width,l=d.height),o-=s/2,u-=l/2;var v={"-id":"".concat(r,"_di"),"-bpmnElement":r,"dc:Bounds":{"-x":o,"-y":u,"-width":s,"-height":l}};return(a=e.text)!==null&&a!==void 0&&a.value&&(v["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":e.text.x-e.text.value.length*10/2,"-y":e.text.y-7,"-width":e.text.value.length*10,"-height":14}}),v})}function Mt(i){var n=[],e=[],a=i.definitions;if(a){var r=a.process;Object.keys(r).forEach(function(s){if(Ve.includes(s)){var l=r[s];if(s===W.FLOW){var o=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];e=Tt(l,o)}else{var u=a["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];n=n.concat(Nt(l,u,s))}}})}return{nodes:n,edges:e}}function Nt(i,n,e){var a=[];if(Array.isArray(i))i.forEach(function(l){var o;Array.isArray(n)?o=n.find(function(d){return d["-bpmnElement"]===l["-id"]}):o=n;var u=He(o,e,l);a.push(u)});else{var r;Array.isArray(n)?r=n.find(function(l){return l["-bpmnElement"]===i["-id"]}):r=n;var s=He(r,e,i);a.push(s)}return a}function He(i,n,e){var a=Number(i["dc:Bounds"]["-x"]),r=Number(i["dc:Bounds"]["-y"]),s=e["-name"],l=$.shapeConfigMap.get(n);l&&(a+=l.width/2,r+=l.height/2);var o;Object.entries(e).forEach(function(h){var f=(0,A.Z)(h,2),C=f[0],L=f[1];Ge.indexOf(C)===-1&&(o||(o={}),o[C]=L)}),o&&(o=xe(o));var u;if(s&&(u={x:a,y:r,value:s},i["bpmndi:BPMNLabel"]&&i["bpmndi:BPMNLabel"]["dc:Bounds"])){var d=i["bpmndi:BPMNLabel"]["dc:Bounds"];u.x=Number(d["-x"])+Number(d["-width"])/2,u.y=Number(d["-y"])+Number(d["-height"])/2}var v={id:i["-bpmnElement"],type:n,x:a,y:r,properties:o};return u&&(v.text=u),v}function Tt(i,n){var e=[];if(Array.isArray(i))i.forEach(function(r){var s;Array.isArray(n)?s=n.find(function(l){return l["-bpmnElement"]===r["-id"]}):s=n,e.push(Xe(s,r))});else{var a;Array.isArray(n)?a=n.find(function(r){return r["-bpmnElement"]===i["-id"]}):a=n,e.push(Xe(a,i))}return e}function Xe(i,n){var e,a=n["-name"];if(a){var r=i["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;a.split(`
`).forEach(function(u){s<u.length&&(s=u.length)}),e={value:a,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var l;Object.entries(n).forEach(function(u){var d=(0,A.Z)(u,2),v=d[0],h=d[1];Ge.indexOf(v)===-1&&(l||(l={}),l[v]=h)}),l&&(l=xe(l));var o={id:n["-id"],type:W.FLOW,pointsList:i["di:waypoint"].map(function(u){return{x:Number(u["-x"]),y:Number(u["-y"])}}),sourceNodeId:n["-sourceRef"],targetNodeId:n["-targetRef"],properties:l};return e&&(o.text=e),o}var $={pluginName:"bpmn-adapter",install:function(n){n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut},shapeConfigMap:new Map,setCustomShape:function(n,e){this.shapeConfigMap.set(n,e)},adapterOut:function(n,e){var a={"-id":"".concat(e),"-isExecutable":"true"};Zt(a,n);var r={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};St(r,n);var s={definitions:{"-id":"Definitions_".concat(e),"-xmlns":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-xmlns:flowable":"http://flowable.org/bpmn","-xmlns:s":"http://surveyking.cn/bpmn","-targetNamespace":"http://bpmn.io/schema/bpmn","-exporter":"bpmn-js (https://demo.bpmn.io)","-exporterVersion":"7.3.0",process:a,"bpmndi:BPMNDiagram":{"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":r}}};return s},adapterIn:function(n){if(n)return Mt(n)}};$.shapeConfigMap.set(W.START,{width:ke.width,height:ke.height}),$.shapeConfigMap.set(W.END,{width:Re.width,height:Re.height}),$.shapeConfigMap.set(W.GATEWAY,{width:ze.width,height:ze.height}),$.shapeConfigMap.set(W.SYSTEM,{width:Ue.width,height:Ue.height}),$.shapeConfigMap.set(W.USER,{width:We.width,height:We.height});var Pt={pluginName:"bpmn-xml-adapter",install:function(n){n.adapterIn=this.adapterXmlIn,n.adapterOut=this.adapterXmlOut},adapterXmlIn:function(n){var e=new Dt.ObjTree().parseXML(n);return $.adapterIn(e)},adapterXmlOut:function(n){var e=$.adapterOut(n,this.options.extraConf.id);return At(e)}},$n=null,S=c(69610),_=c(54941),ge=c(63543),me=c(94663),O=c(43028),I=c(5869),Ke=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(a,r){return(0,S.Z)(this,e),a.id||(a.id="starter"),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),n.call(this,a,r)}return(0,_.Z)(e,[{key:"setAttributes",value:function(){this.r=18}},{key:"getConnectedTargetRules",value:function(){var r=(0,ge.Z)((0,me.Z)(e.prototype),"getConnectedTargetRules",this).call(this),s={message:"\u8D77\u59CB\u8282\u70B9\u4E0D\u80FD\u4F5C\u4E3A\u8FB9\u7684\u7EC8\u70B9",validate:function(){return!1}};return r.push(s),r}}]),e}(E.CircleNodeModel);Ke.extendKey="StartEventModel";var $e=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(){return(0,S.Z)(this,e),n.apply(this,arguments)}return(0,_.Z)(e,[{key:"getShape",value:function(){var r=this.props.model,s=r.x,l=r.y,o=this.props.model.getNodeStyle(),u=o.stroke;return(0,E.h)("svg",{x:s-64/2+10,y:l-64/2+10,width:64,height:64,viewBox:"0 0 32 32"},(0,E.h)("path",{fill:u,d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM10.622 8.415l4.879 3.252a.4.4 0 0 1 0 .666l-4.88 3.252a.4.4 0 0 1-.621-.332V8.747a.4.4 0 0 1 .622-.332z"}))}}]),e}(E.CircleNode);$e.extendKey="StartEventNode";var Ot={type:"startEvent",view:$e,model:Ke},It=Ot,Lt=c(77596),kt=(0,Lt.kP)("_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",10);function ce(){return kt()}var Ye=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(a,r){return(0,S.Z)(this,e),a.id||(a.id="Event_".concat(ce())),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),n.call(this,a,r)}return(0,_.Z)(e,[{key:"setAttributes",value:function(){this.r=18}},{key:"getConnectedSourceRules",value:function(){var r=(0,ge.Z)((0,me.Z)(e.prototype),"getConnectedSourceRules",this).call(this),s={message:"\u7ED3\u675F\u8282\u70B9\u4E0D\u80FD\u4F5C\u4E3A\u8FB9\u7684\u8D77\u70B9",validate:function(){return!1}};return r.push(s),r}}]),e}(E.CircleNodeModel);Ye.extendKey="EndEventModel";var Je=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(){return(0,S.Z)(this,e),n.apply(this,arguments)}return(0,_.Z)(e,[{key:"getAnchorStyle",value:function(){return{visibility:"hidden"}}},{key:"getShape",value:function(){var r=this.props.model,s=r.getNodeStyle(),l=r.x,o=r.y,u=r.r,d=r.width,v=r.height,h=(0,ge.Z)((0,me.Z)(e.prototype),"getShape",this).call(this),f=this.props.model.getNodeStyle(),C=f.fill,L=f.stroke,k=f.strokeWidth,q=(0,E.h)("svg",{x:l-64/2+10,y:o-64/2+10,width:64,height:64,viewBox:"0 0 32 32"},(0,E.h)("path",{fill:L,d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM9 9h6v6H9V9z"}));return q}}]),e}(E.CircleNode);Je.extendKey="EndEventView";var Rt={type:"endEvent",view:Je,model:Ye},zt=Rt,Qe=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(a,r){var s;return(0,S.Z)(this,e),a.id||(a.id="Gateway_".concat(ce())),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),s=n.call(this,a,r),s.points=[[25,0],[50,25],[25,50],[0,25]],s}return e}(E.PolygonNodeModel);Qe.extendKey="ExclusiveGatewayModel";var qe=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(){return(0,S.Z)(this,e),n.apply(this,arguments)}return(0,_.Z)(e,[{key:"getShape",value:function(){var r=this.props.model,s=r.x,l=r.y,o=r.width,u=r.height,d=r.points,v=r.getNodeStyle();return(0,E.h)("g",{transform:"matrix(1 0 0 1 ".concat(s-o/2," ").concat(l-u/2,")")},(0,E.h)("polygon",(0,B.Z)((0,B.Z)({},v),{},{x:s,y:l,points:d})),(0,E.h)("path",(0,B.Z)({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},v)))}}]),e}(E.PolygonNode);qe.extendKey="ExclusiveGatewayNode";var Ut={type:"exclusiveGateway",view:qe,model:Qe},Wt=Ut,_e=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(a,r){return(0,S.Z)(this,e),a.id||(a.id="Activity_".concat(ce())),n.call(this,a,r)}return e}(E.RectNodeModel);_e.extendKey="UserTaskModel";var et=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(){return(0,S.Z)(this,e),n.apply(this,arguments)}return(0,_.Z)(e,[{key:"getLabelShape",value:function(){var r=this.props.model,s=r.x,l=r.y,o=r.width,u=r.height,d=r.getNodeStyle();return(0,E.h)("svg",{x:s-o/2+5,y:l-u/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},(0,E.h)("path",{fill:d.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))}},{key:"getShape",value:function(){var r=this.props.model,s=r.x,l=r.y,o=r.width,u=r.height,d=r.radius,v=r.getNodeStyle();return(0,E.h)("g",{},[(0,E.h)("rect",(0,B.Z)((0,B.Z)({},v),{},{x:s-o/2,y:l-u/2,rx:d,ry:d,width:o,height:u})),this.getLabelShape()])}}]),e}(E.RectNode);et.extendKey="UserTaskNode";var Vt={type:"userTask",view:et,model:_e},Gt=Vt,tt=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(a,r){return(0,S.Z)(this,e),a.id||(a.id="Activity_".concat(ce())),n.call(this,a,r)}return e}(E.RectNodeModel);tt.extendKey="ServiceTaskModel";var nt=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(){return(0,S.Z)(this,e),n.apply(this,arguments)}return(0,_.Z)(e,[{key:"getLabelShape",value:function(){var r=this.props.model,s=r.x,l=r.y,o=r.width,u=r.height,d=r.getNodeStyle();return(0,E.h)("svg",{x:s-o/2+5,y:l-u/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},(0,E.h)("path",{fill:d.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))}},{key:"getShape",value:function(){var r=this.props.model,s=r.x,l=r.y,o=r.width,u=r.height,d=r.radius,v=r.getNodeStyle();return(0,E.h)("g",{},[(0,E.h)("rect",(0,B.Z)({x:s-o/2,y:l-u/2,rx:d,ry:d,width:o,height:u},v)),this.getLabelShape()])}}]),e}(E.RectNode);nt.extendKey="ServiceTaskNode";var Ht={type:"serviceTask",view:nt,model:tt},Xt=Ht,it=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(a,r){return(0,S.Z)(this,e),a.id||(a.id="Flow_".concat(ce())),n.call(this,a,r)}return e}(E.PolylineEdgeModel);it.extendKey="SequenceFlowModel";var rt=function(i){(0,O.Z)(e,i);var n=(0,I.Z)(e);function e(){return(0,S.Z)(this,e),n.apply(this,arguments)}return e}(E.PolylineEdge);rt.extendKey="SequenceFlowEdge";var Kt={type:"sequenceFlow",view:rt,model:it},$t=Kt,at=function i(n){var e=n.lf;(0,S.Z)(this,i),e.setTheme(bt),e.register(It),e.register(zt),e.register(Wt),e.register(Gt),e.register(Xt),e.options.customBpmnEdge||(e.register($t),e.setDefaultEdgeType("sequenceFlow"))};at.pluginName="BpmnElement";var Yn=c(57338),st=c(25084),Yt=c(29656),Jn=c(29589),t=c(85893),Jt={mode:"application/xml",lineWrapping:!0,lineNumbers:!0},Qt=function(n){var e=n.visible,a=n.xml,r=n.onClose,s=(0,p.useState)(),l=(0,A.Z)(s,2),o=l[0],u=l[1];return(0,t.jsx)(st.Z,{visible:e,onClose:function(){return r(o.getValue())},width:850,className:"flow-drawer",children:(0,t.jsx)(Yt.Rt,{autoCursor:!1,value:a,options:Jt,editorDidMount:function(v){return u(v)},onChange:function(){}})})},g=c(80937),ot={};function ae(i,n){ot[i]=n}function ye(i){return ot[i]}var Qn=c(18106),J=c(67164),qn=c(43358),D=c(97268),qt=c(32059),_n=c(13254),lt=c(14277),ei=c(88983),Ee=c(47933),se=c(11628),_t=c(76826),ut=c(96486),en=["FillBlank","MultipleBlank","Textarea","Signature","Radio","Checkbox","Select","Cascader","MatrixAuto","MatrixRadio","MatrixCheckbox","MatrixFillBlank","MatrixScore","Upload","Score","Nps","Remark","SplitLine","User","Dept"],tn=["Pagination","Remark","SplitLine"],nn={Pagination:"\u5206\u9875",Remark:"\u5907\u6CE8",SplitLine:"\u5206\u5272\u7EBF"};function ct(i){var n=[];return i&&((en.includes(i.type)||tn.includes(i.type))&&n.push({id:i.id,title:nn[i.type]||(0,_t.WO)(i.title),type:i.type}),i.children&&i.children.map(function(e){var a=ct(e);a&&n.push.apply(n,(0,T.Z)(a))})),n}var rn=function(n){var e=n.value,a=n.onChange;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:n.title}),(0,t.jsx)("td",{onClick:function(){return a(2)},children:(0,t.jsx)(Ee.ZP,{value:2,checked:e===2})}),(0,t.jsx)("td",{onClick:function(){return a(1)},children:(0,t.jsx)(Ee.ZP,{value:1,checked:e===1})}),(0,t.jsx)("td",{onClick:function(){return a(0)},children:(0,t.jsx)(Ee.ZP,{value:0,checked:e===0})})]},n.id)},je=function(n){var e=n.onChange,a=n.value,r=a===void 0?{}:a,s=(0,se.IE)(),l=s.schema,o=(0,p.useMemo)(function(){return ct(l)},[l]);(0,p.useEffect)(function(){if((0,ut.isEmpty)(r)&&o.length>0){var d={};o.forEach(function(v){return d[v.id]=2}),e&&e(d)}},[l,r,o,e]);var u=function(v){e&&e(o.reduce(function(h,f){return h[f.id]=v,h},{}))};return l?(0,t.jsx)("div",{children:(0,t.jsxs)("table",{className:"field-permission-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:"64%"},children:"\u5B57\u6BB5\u540D"}),(0,t.jsx)("th",{style:{width:"12%"},children:"\u53EF\u7F16\u8F91"}),(0,t.jsx)("th",{style:{width:"12%"},children:"\u4EC5\u53EF\u89C1"}),(0,t.jsx)("th",{style:{width:"12%"},children:"\u9690\u85CF"})]})}),(0,t.jsx)("tbody",{children:o.map(function(d){return(0,p.createElement)(rn,(0,B.Z)((0,B.Z)({},d),{},{value:r[d.id],onChange:function(h){e&&e((0,B.Z)((0,B.Z)({},r),{},(0,qt.Z)({},d.id,h)))},key:d.id}))})}),(0,t.jsx)("tfoot",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{}),(0,t.jsx)("td",{children:(0,t.jsx)(b.Z,{size:"small",type:"link",onClick:function(){return u(2)},children:"\u5168\u9009"})}),(0,t.jsx)("td",{children:(0,t.jsx)(b.Z,{size:"small",type:"link",onClick:function(){return u(1)},children:"\u5168\u9009"})}),(0,t.jsx)("td",{children:(0,t.jsx)(b.Z,{size:"small",type:"link",onClick:function(){return u(0)},children:"\u5168\u9009"})})]})})]})}):(0,t.jsx)("div",{children:(0,t.jsx)(lt.Z,{image:lt.Z.PRESENTED_IMAGE_SIMPLE,description:"\u95EE\u5377\u4E3A\u7A7A"})})},ti=c(20136),an=c(55241),ni=c(94233),Ce=c(51890),ee=c(68489),dt=c(49101),ii=c(22385),vt=c(31097),sn=c(43061),we=function(n){var e=n.title,a=n.onClose,r=(0,p.useState)(!1),s=(0,A.Z)(r,2),l=s[0],o=s[1];return(0,t.jsx)(vt.Z,{title:e,children:(0,t.jsxs)("div",{style:{position:"relative"},onMouseOver:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:[n.children,(0,t.jsx)(sn.Z,{onClick:function(){a&&a()},style:{color:"#f5222d",cursor:"pointer",visibility:l?"visible":"hidden",position:"absolute",right:0,top:0,transform:"translate(25%, -25%)",transformOrigin:"100% 0%"}})]})})},ri=c(71153),Be=c(60331),ai=c(13062),oe=c(71230),si=c(48736),ht=c(27049),oi=c(89032),V=c(15746),li=c(62999),ft=c(51753),on=c(60780),ln=c.n(on),un=D.Z.Option,cn=(0,g.Pi)(function(i){var n=i.onChange,e=i.orgTreeData,a=i.positions,r=(0,p.useState)(),s=(0,A.Z)(r,2),l=s[0],o=s[1],u=(0,p.useState)(),d=(0,A.Z)(u,2),v=d[0],h=d[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(oe.Z,{gutter:10,children:[(0,t.jsx)(V.Z,{span:16,children:(0,t.jsx)(ft.Z,{onChange:function(C){return o(C)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:[{title:"\u53D1\u8D77\u4EBA\u5F53\u524D\u90E8\u95E8",value:"${currentDeptId}",key:"${currentDeptId}"},{title:"\u53D1\u8D77\u4EBA\u4E0A\u7EA7\u90E8\u95E8",value:"${parentDeptId}",key:"${parentDeptId}"}].concat((0,T.Z)(e)),placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0,value:l})}),(0,t.jsx)(V.Z,{span:8,children:(0,t.jsx)(D.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",allowClear:!0,value:v,onChange:function(C){return h(C)},children:a.map(function(f){return(0,t.jsx)(un,{value:f.id,children:f.name},f.id)})})})]}),(0,t.jsx)(oe.Z,{style:{marginTop:10},children:(0,t.jsx)(V.Z,{children:(0,t.jsx)(b.Z,{icon:(0,t.jsx)(dt.Z,{}),onClick:function(){(l||v)&&n("P:".concat(l||"",":").concat(v||""))},children:"\u6DFB\u52A0"})})})]})}),Fe=J.Z.TabPane,pt=D.Z.Option,dn=(0,g.Pi)(function(i){var n=i.value,e=n===void 0?[]:n,a=i.onChange,r=(0,ee.m2)(),s=(0,ee.LF)(e),l=r.depts,o=r.users,u=r.roles,d=r.positions,v=(0,p.useState)(),h=(0,A.Z)(v,2),f=h[0],C=h[1];(0,p.useEffect)(function(){f&&r.loadUsers({deptId:f,pageSize:1024})},[f,r]);var L=(0,p.useMemo)(function(){return ln()(l.map(function(x){return{value:x.id,title:x.name,key:x.id,parentId:x.parentId}}),{parentProperty:"parentId",customID:"value"})},[l]),k=function(w){var y=(0,T.Z)(e);w.forEach(function(m){y.includes(m)||y.push(m)}),a(y)},q=function(){for(var w=arguments.length,y=new Array(w),m=0;m<w;m++)y[m]=arguments[m];a((0,T.Z)(e.filter(function(F){return!y.includes(F)})))};return(0,t.jsx)("div",{style:{width:400},children:(0,t.jsxs)(J.Z,{defaultActiveKey:"1",children:[(0,t.jsx)(Fe,{tab:"\u6210\u5458",children:(0,t.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,t.jsxs)(oe.Z,{gutter:20,children:[(0,t.jsx)(V.Z,{span:16,children:(0,t.jsx)(ft.Z,{onChange:function(w){return C(w)},style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:L,placeholder:"\u8BF7\u9009\u62E9\u673A\u6784",treeDefaultExpandAll:!0,allowClear:!0})}),(0,t.jsx)(V.Z,{span:8,children:(0,t.jsx)(D.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",allowClear:!0,showSearch:!0,mode:"multiple",onChange:function(w){return k(w)},maxTagCount:0,value:e.filter(function(x){return x.startsWith("U:")}),dropdownRender:function(w){return(0,t.jsxs)("div",{children:[w,(0,t.jsx)(ht.Z,{style:{margin:"4px 0"}}),(0,t.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8},children:(0,t.jsx)(b.Z,{size:"small",type:"link",onClick:function(){return k(o.map(function(m){return"U:".concat(m.id)}))},children:"\u5168\u9009"})})]})},children:o.map(function(x){return(0,t.jsx)(pt,{value:"U:".concat(x.id),children:x.name},x.id)})})})]}),(0,t.jsx)(X.Z,{style:{marginTop:20},wrap:!0,children:e.filter(function(x){return x.startsWith("U:")}).map(function(x){return(0,t.jsx)(Be.Z,{closable:!0,color:"blue",onClose:function(){return q(x)},children:s.user[x.split(":")[1]]},x)})})]})},"fieldPermission"),(0,t.jsx)(Fe,{tab:"\u89D2\u8272",children:(0,t.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,t.jsx)(D.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",allowClear:!0,showSearch:!0,mode:"multiple",value:e.filter(function(x){return x.startsWith("R:")}),onChange:function(w){return k(w)},maxTagCount:0,children:u.map(function(x){return(0,t.jsx)(pt,{value:"R:".concat(x.id),children:x.name},x.id)})}),(0,t.jsx)(X.Z,{style:{marginTop:20},wrap:!0,children:e.filter(function(x){return x.startsWith("R:")}).map(function(x){return(0,t.jsx)(Be.Z,{closable:!0,color:"blue",onClose:function(){return q(x)},children:s.role[x.split(":")[1]]},x)})})]})},"basicSetting"),(0,t.jsx)(Fe,{tab:"\u673A\u6784\u5C97\u4F4D",children:(0,t.jsxs)("div",{style:{height:400,overflowY:"auto",overflowX:"hidden"},children:[(0,t.jsx)(cn,{positions:d,orgTreeData:L,onChange:function(w){return k([w])}}),(0,t.jsx)(X.Z,{style:{marginTop:20},wrap:!0,children:e.filter(function(x){return x.startsWith("P:")}).map(function(x){var w=x.split(":"),y=(0,A.Z)(w,3),m=y[1],F=y[2];return(0,t.jsxs)(Be.Z,{closable:!0,color:"blue",onClose:function(){return q(x)},children:[s.org[m],"-",s.position[F]]},m+":"+F)})})]})},"advanceSetting")]})})}),vn=c(55686),de=(0,ee.Gr)(function(i){var n=i.value,e=n===void 0?[]:n,a=i.onChange,r=(0,ee.LF)(e),s=(0,ee.m2)(),l=s.users,o=function(){for(var d=arguments.length,v=new Array(d),h=0;h<d;h++)v[h]=arguments[h];a((0,T.Z)(e.filter(function(f){return!v.includes(f)})))};return(0,t.jsx)("div",{style:{lineHeight:"36px",paddingTop:10},children:(0,t.jsxs)(X.Z,{wrap:!0,children:[(0,t.jsx)(an.Z,{content:(0,t.jsx)(dn,{onChange:a,value:e}),trigger:"click",placement:"leftTop",children:(0,t.jsx)(Ce.C,{className:"add-user",icon:(0,t.jsx)(dt.Z,{}),size:24})}),e.map(function(u){var d=u.split(":"),v=(0,A.Z)(d,3),h=v[0],f=v[1],C=v[2];if(h=="U"){var L=l.find(function(k){return k.id===f});return(0,t.jsx)(we,{title:r.user[f],onClose:function(){return o(u)},children:(0,t.jsx)(vn.Z,{user:{avatar:L==null?void 0:L.avatar},style:{backgroundColor:"#87d068"},size:24})},f)}else return h==="R"?(0,t.jsx)(we,{title:r.role[f],onClose:function(){return o(u)},children:(0,t.jsx)(Ce.C,{style:{backgroundColor:"#40a9ff"},size:24,children:"R"})},f):h==="P"?(0,t.jsx)(we,{title:"".concat(r.org[f],"-").concat(r.position[C]),onClose:function(){return o(u)},children:(0,t.jsx)(Ce.C,{style:{backgroundColor:"#f56a00"},size:24,children:"P"})},"".concat(f,"-").concat(C)):(0,t.jsx)(t.Fragment,{})})]})})},{name:"identity"}),ui=null,ci=c(47673),Ae=c(4107),di=c(77576),hn=c(12028),fn=c(2603),pn=c(11075),xn=c(13105),gn=c(3157),mn=c(65602),yn=c(89792),En=c(15360),te=(0,ee.Gr)(function(i){var n=i.value,e=i.onChange,a=i.initialValue;return(0,t.jsx)(hn.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",defaultChecked:!!a,checked:n,onChange:function(s){return e(s)}})}),jn=(0,ee.Gr)(function(i){var n=i.value,e=i.onChange;return(0,t.jsx)(Ae.Z,{value:n,onChange:e})}),De=(0,g.Pi)(function(i){var n=i.settings;return(0,t.jsxs)(g.Wo,{name:"setting",children:[n.includes("passwordRequired")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(fn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u586B\u5199\u5BC6\u7801"}),(0,t.jsx)(te,{name:"passwordRequired",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u51ED\u5BC6\u7801\u624D\u80FD\u586B\u5199\u8868\u5355"}),(0,t.jsx)("div",{className:"setting-content",children:(0,t.jsx)(jn,{name:"password",syncDisplay:"passwordRequired"})})]})]}),n.includes("allowWithdrawStarter")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(pn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u5141\u8BB8\u64A4\u56DE"}),(0,t.jsx)(te,{name:"allowWithdraw",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u5141\u8BB8\u7533\u8BF7\u4EBA\u5BF9\u672A\u8FDB\u5165\u6D41\u7A0B\uFF08\u7B2C\u4E00\u4E2A\u6D41\u7A0B\u8282\u70B9\u4E3A\u5F85\u5904\u7406\u72B6\u6001\uFF09\u7684\u7533\u8BF7\u8FDB\u884C\u64A4\u56DE"})]})]}),n.includes("flowLogVisible")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(xn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u6D41\u7A0B\u65E5\u5FD7"}),(0,t.jsx)(te,{name:"flowLogVisible",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u5141\u8BB8\u67E5\u770B\u6D41\u7A0B\u65E5\u5FD7"})]})]}),n.includes("allowAssignee")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(gn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u4EE3\u529E\u8F6C\u4EA4"}),(0,t.jsx)(te,{name:"allowAssignee",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u5C06\u5F85\u529E\u4E8B\u9879\u8F6C\u4EA4\u7ED9\u5176\u4ED6\u6210\u5458\u5904\u7406"}),(0,t.jsx)("div",{className:"setting-content",children:(0,t.jsx)(de,{name:"assignee",syncDisplay:"allowAssignee"})})]})]}),n.includes("allowWithdrawUser")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(mn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u6D41\u7A0B\u64A4\u56DE"}),(0,t.jsx)(te,{name:"allowWithdraw",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u5BF9\u5DF2\u5904\u7406\u8FC7\u7684\u5F85\u529E\u6570\u636E\u8FDB\u884C\u64A4\u56DE"})]})]}),n.includes("allowGoBack")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(yn.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u6D41\u7A0B\u56DE\u9000"}),(0,t.jsx)(te,{name:"allowGoBack",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u5C06\u6D41\u7A0B\u56DE\u9000\u5230\u4E4B\u524D\u7684\u8282\u70B9\uFF0C\u4EC5\u5BA1\u6279\u8282\u70B9\u53EF\u7528"})]})]}),n.includes("allowFinishFlow")&&(0,t.jsxs)("div",{className:"basic-setting",children:[(0,t.jsx)(En.Z,{className:"setting-icon"}),(0,t.jsxs)("div",{className:"setting-area",children:[(0,t.jsxs)("div",{className:"setting-title",children:[(0,t.jsx)("span",{children:"\u6D41\u7A0B\u62D2\u7EDD"}),(0,t.jsx)(te,{name:"allowFinishFlow",initialValue:!0})]}),(0,t.jsx)("div",{className:"setting-hint",children:"\u8282\u70B9\u8D1F\u8D23\u4EBA\u53EF\u4EE5\u62D2\u7EDD\u8BE5\u6D41\u7A0B\uFF08\u62D2\u7EDD\u540E\u6D41\u7A0B\u76F4\u63A5\u7ED3\u675F\uFF0C\u6807\u8BB0\u4E3A\u5DF2\u62D2\u7EDD\uFF09"})]})]})]})}),Cn=c(54977),wn=function(n){var e=n.value,a=n.onChange,r=(0,p.useState)(!1),s=(0,A.Z)(r,2),l=s[0],o=s[1],u=(0,p.useRef)(null),d=function(h){a&&a(h)};return(0,p.useEffect)(function(){if(l){var v;(v=u.current)===null||v===void 0||v.focus()}},[l]),l?(0,t.jsx)(Ae.Z,{ref:u,value:e,onChange:function(h){return d(h.target.value)},onKeyUp:function(h){h.key==="Enter"&&o(!1)},onBlur:function(h){d(h.target.value),o(!1)}}):(0,t.jsxs)("div",{style:{cursor:"pointer"},className:"title",onClick:function(){return o(!0)},children:[(0,t.jsx)("span",{children:e||"\u70B9\u51FB\u8BBE\u7F6E\u540D\u79F0"}),(0,t.jsx)(Cn.Z,{style:{marginLeft:10}})]})},Bn=c(93224),Fn=c(30381),xt=c.n(Fn),gt=function(n){var e=n.children,a=n.syncDisplay,r=n.isMoment,s=(0,Bn.Z)(n,["children","syncDisplay","isMoment"]),l=(0,p.useMemo)(function(){return(0,g.$j)(function(o){var u=o.value,d=o.onChange,v=u;return r&&u&&(v=xt()(u)),p.cloneElement(e,{value:v,onChange:function(f){d(f)}})},(0,g.jM)(function(o,u){return{value:o.value,onChange:function(v){xt().isMoment(v)?u.onInput(v.valueOf()):u.onInput(v)}}}))},[]);return(0,t.jsx)(g.gN,(0,B.Z)((0,B.Z)({},s),{},{component:[l,n],reactions:[function(o){if(a)if(typeof a=="string"){var u=o.query(o.path.parent().concat(a)).get("value");u?o.display="visible":o.display="none"}else typeof a=="object"&&Object.keys(a).forEach(function(d){var v=o.query(o.path.parent().concat(d)).get("value");a[d].includes(v)?o.display="visible":o.display="none"})}]}))},G=gt,mt=D.Z.Option,be=J.Z.TabPane,An=(0,g.Pi)(function(){var i=(0,se.IE)(),n=(0,p.useContext)(Q),e=n.active,a=n.flow,r=(0,g.cI)(),s=r.query("".concat(i.id,".identity")).get("value"),l=(0,p.useState)(s?"assign":"all"),o=(0,A.Z)(l,2),u=o[0],d=o[1];return(0,p.useEffect)(function(){var v=u==="all"?"none":"visible",h=r.query("".concat(i.id,".identity")).take();h&&h.setDisplay(v)},[u]),(0,p.useEffect)(function(){a==null||a.setProperties(e.id,{candidateStarterUsers:s?s.filter(function(v){return v.startsWith("U:")}).join(","):void 0,candidateStarterGroups:s?s.map(function(v){return!v.startsWith("U:")}).join(","):void 0})},[s]),(0,t.jsxs)(g.Wo,{name:i.id,children:[(0,t.jsx)(g.gN,{name:"id",value:i.id}),(0,t.jsx)(g.gN,{name:"flowType",value:"process"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u7533\u8BF7\u4EBA"}),(0,t.jsx)("div",{children:(0,t.jsxs)(D.Z,{style:{width:200},onChange:function(h){return d(h)},value:u,children:[(0,t.jsx)(mt,{value:"all",children:"\u6240\u6709\u4EBA\u53EF\u586B"}),(0,t.jsx)(mt,{value:"assign",children:"\u6307\u5B9A\u6210\u5458\u53EF\u586B"})]})}),u==="assign"&&(0,t.jsx)(de,{}),(0,t.jsxs)(J.Z,{defaultActiveKey:"1",children:[(0,t.jsx)(be,{tab:"\u5B57\u6BB5\u8BBE\u7F6E",children:(0,t.jsx)(G,{name:"fieldPermission",children:(0,t.jsx)(je,{})})},"fieldPermission"),(0,t.jsx)(be,{tab:"\u57FA\u7840\u8BBE\u7F6E",children:(0,t.jsx)(De,{settings:["passwordRequired","flowLogVisible","allowWithdrawStarter"]})},"basicSetting"),(0,t.jsx)(be,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",children:"\u9AD8\u7EA7\u8BBE\u7F6E"},"advanceSetting")]})]})]})});ae("Process",An);var Dn=(0,g.Pi)(function(){var i,n=(0,p.useContext)(Q),e=n.flow,a=n.active,r=function(l){e==null||e.updateText(a.id,l)};return(0,t.jsxs)(g.Wo,{name:a.id,children:[(0,t.jsx)(g.gN,{name:"id",value:a.id}),(0,t.jsxs)("div",{children:[(0,t.jsx)(oe.Z,{gutter:[10,10],children:(0,t.jsxs)(V.Z,{span:12,children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u670D\u52A1\u540D\u79F0"}),(0,t.jsx)("div",{children:(0,t.jsx)(Ae.Z,{placeholder:"\u8BBE\u7F6E\u540D\u79F0",onChange:function(l){return r(l.target.value)},defaultValue:(i=a.text)===null||i===void 0?void 0:i.value})})]})}),(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u6761\u4EF6\u516C\u5F0F"})]})]})});ae("StartEvent",Dn);var bn=c(1870),yt=D.Z.Option,Ze=J.Z.TabPane,Zn=(0,g.Pi)(function(){var i=(0,p.useContext)(Q),n=i.flow,e=i.active,a=(0,g.cI)(),r=a.query("".concat(e.id,".setting.isSequential")).get("value"),s=a.query("".concat(e.id,".identity")).get("value"),l=a.query("".concat(e.id,".setting.approveType")).get("value");return(0,p.useEffect)(function(){if((s==null?void 0:s.length)===1&&s[0].startsWith("U:")){n==null||n.setProperties(e.id,{"flowable:assignee":s[0].replace("U:",""),"flowable:candidateUsers":null,"flowable:candidateGroups":null,multiInstanceLoopCharacteristics:null});return}if(s&&r===1&&l===1){s.every(function(o){return o.startsWith("U:")})?n==null||n.setProperties(e.id,{"flowable:assignee":null,"flowable:candidateUsers":s==null?void 0:s.filter(function(o){return o.startsWith("U:")}).map(function(o){return o.replace("U:","")}).join(","),"flowable:candidateGroups":null,multiInstanceLoopCharacteristics:null}):n==null||n.setProperties(e.id,{"flowable:assignee":null,"flowable:candidateUsers":"${t.getUsers('".concat(e.id,"', starterUserId)}"),"flowable:candidateGroups":null,multiInstanceLoopCharacteristics:null});return}n==null||n.setProperties(e.id,{"flowable:assignee":"${t.getAssignee(user)}","flowable:candidateGroups":"${t.getCandidateGroups(user)}",multiInstanceLoopCharacteristics:{isSequential:r===1?"false":"true","flowable:collection":"${t.getUser(execution)}","flowable:elementVariable":"user",completionCondition:"${t.isComplete(execution) }"}})},[r,s,l]),(0,t.jsxs)(g.Wo,{name:e.id,children:[(0,t.jsx)(g.gN,{name:"id",value:e.id}),(0,t.jsx)(g.gN,{name:"flowType",value:"userTask"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(oe.Z,{gutter:[10,10],children:[(0,t.jsxs)(V.Z,{span:12,children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u8D1F\u8D23\u4EBA"}),(0,t.jsx)("div",{children:(0,t.jsx)(g.Wo,{name:"setting",children:(0,t.jsx)(G,{name:"isSequential",initialValue:1,children:(0,t.jsxs)(D.Z,{style:{width:"100%"},children:[(0,t.jsx)(D.Z.Option,{value:1,children:"\u5E38\u89C4\u5BA1\u6279"}),(0,t.jsx)(D.Z.Option,{value:2,children:"\u9010\u7EA7\u5BA1\u6279"})]})})})})]}),r===1&&(0,t.jsxs)(V.Z,{span:12,children:[(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u5BA1\u6279\u7C7B\u578B",(0,t.jsx)(vt.Z,{title:"\u8D1F\u8D23\u4EBA\u4E3A\u591A\u4EBA\u65F6\u7684\u5BA1\u6279\u65B9\u5F0F",children:(0,t.jsx)(bn.Z,{style:{marginLeft:5,color:"rgba(43,52,65,.4)",cursor:"pointer"}})})]}),(0,t.jsx)("div",{children:(0,t.jsx)(g.Wo,{name:"setting",children:(0,t.jsx)(G,{name:"approveType",initialValue:1,syncDisplay:{isSequential:[1]},children:(0,t.jsxs)(D.Z,{style:{width:"100%"},children:[(0,t.jsx)(yt,{value:1,children:"\u6216\u7B7E(\u4E00\u540D\u8D1F\u8D23\u4EBA\u901A\u8FC7\u6216\u8005\u62D2\u7EDD\u5373\u53EF)"}),(0,t.jsx)(yt,{value:2,children:"\u4F1A\u7B7E(\u9700\u6240\u6709\u8D1F\u8D23\u4EBA\u901A\u8FC7)"})]})})})})]}),(0,t.jsx)(V.Z,{span:24,children:(0,t.jsx)(de,{})})]}),(0,t.jsxs)(J.Z,{defaultActiveKey:"1",children:[(0,t.jsx)(Ze,{tab:"\u5B57\u6BB5\u8BBE\u7F6E",children:(0,t.jsx)(G,{name:"fieldPermission",children:(0,t.jsx)(je,{})})},"fieldPermission"),(0,t.jsx)(Ze,{tab:"\u57FA\u7840\u8BBE\u7F6E",children:(0,t.jsx)(De,{settings:["allowAssignee","allowFinishFlow","allowGoBack","allowWithdrawStarter","flowLogVisible"]})},"basicSetting"),(0,t.jsx)(Ze,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",children:"\u9AD8\u7EA7\u8BBE\u7F6E"},"advanceSetting")]})]})]})});ae("userTask",Zn);var Sn=function(){return(0,t.jsx)("div",{})};ae("EndEvent",Sn);var H=c(1997),Mn=(0,g.Pi)(function(){var i=(0,p.useContext)(Q),n=i.flow,e=i.active,a=(0,g.cI)(),r=(0,se.IE)(),s=r.schema,l=(0,p.useState)(!1),o=(0,A.Z)(l,2),u=o[0],d=o[1],v=(0,p.useMemo)(function(){return(0,H.sJ)(r.schema)},[r]),h=a.query("".concat(e.id,".expression")).get("value");return(0,p.useEffect)(function(){n==null||n.setProperties(e.id,{conditionExpression:{"xsi:type":"tFormalExpression","#text":"${t.condition(execution)}"}})},[h]),(0,t.jsxs)(g.Wo,{name:e.id,children:[(0,t.jsx)(g.gN,{name:"id",value:e.id}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u6761\u4EF6\u516C\u5F0F",(0,t.jsx)(b.Z,{type:"link",onClick:function(){return d(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,t.jsx)("div",{className:"formula-container",children:(0,t.jsx)(G,{name:"expression",children:(0,t.jsx)(H.ML,{variable:v,readOnly:!0,placeholder:"\u516C\u5F0F\u4E3A\u7A7A\uFF0C\u8BF7\u8BBE\u7F6E"})})}),r.schema&&(0,t.jsx)(H.ZP,{visible:u,value:h,title:"\u6761\u4EF6\u516C\u5F0F\u8BBE\u7F6E",schema:s,onCancel:function(){return d(!1)},functions:[{name:"\u57FA\u7840",functions:[{name:"hah",description:"heih"}]}],onOk:function(C){a.setValuesIn("".concat(e.id,".expression"),C),d(!1)}})]})]})});ae("sequenceFlow",Mn);var Se=J.Z.TabPane,Nn=(0,g.Pi)(function(){var i=(0,p.useContext)(Q),n=i.flow,e=i.active,a=(0,g.cI)(),r=(0,se.IE)(),s=(0,p.useState)(!1),l=(0,A.Z)(s,2),o=l[0],u=l[1],d=(0,p.useMemo)(function(){return(0,H.sJ)(r.schema)},[r]),v=a.query("".concat(e.id,".expression")).get("value"),h=a.query("".concat(e.id,".flowType")).get("value");return(0,p.useEffect)(function(){n==null||n.setProperties(e.id,{"flowable:expression":"${t.serve(execution)}"})},[v,e]),(0,p.useEffect)(function(){if(h){var f;a.query("*(".concat(e.id,".copyToFlowType,").concat(e.id,".mailFlowType,").concat(e.id,".smsFlowType,").concat(e.id,".httpFlowType)")).forEach(function(C){return C.setDisplay("none")}),(f=a.query("".concat(e.id,".").concat(h,"FlowType")).take())===null||f===void 0||f.setDisplay("visible"),n==null||n.setProperties(e.id,{"s:type":h})}},[h,e]),(0,t.jsxs)(g.Wo,{name:e.id,children:[(0,t.jsx)(g.gN,{name:"id",value:e.id}),(0,t.jsxs)("div",{children:[(0,t.jsx)(oe.Z,{gutter:[10,10],children:(0,t.jsxs)(V.Z,{span:12,children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u670D\u52A1\u7C7B\u578B"}),(0,t.jsx)("div",{children:(0,t.jsx)(G,{name:"flowType",initialValue:"copyTo",children:(0,t.jsxs)(D.Z,{style:{width:200},children:[(0,t.jsx)(D.Z.Option,{value:"copyTo",children:"\u6284\u9001\u4EFB\u52A1"}),(0,t.jsx)(D.Z.Option,{value:"mail",children:"\u53D1\u9001\u90AE\u4EF6"}),(0,t.jsx)(D.Z.Option,{value:"sms",children:"\u53D1\u9001\u77ED\u4FE1"}),(0,t.jsx)(D.Z.Option,{value:"http",children:"\u8C03\u7528\u63A5\u53E3"})]})})})]})}),h==="copyTo"&&(0,t.jsx)(g.jG,{name:"sendFlowType",children:(0,t.jsxs)(J.Z,{defaultActiveKey:"1",children:[(0,t.jsx)(Se,{tab:"\u5B57\u6BB5\u8BBE\u7F6E",children:(0,t.jsx)(G,{name:"fieldPermission",children:(0,t.jsx)(je,{})})},"fieldPermission"),(0,t.jsx)(Se,{tab:"\u57FA\u7840\u8BBE\u7F6E",children:(0,t.jsx)(De,{settings:["flowLogVisible"]})},"basicSetting"),(0,t.jsx)(Se,{tab:"\u9AD8\u7EA7\u8BBE\u7F6E",children:"\u9AD8\u7EA7\u8BBE\u7F6E"},"advanceSetting")]})}),h==="mail"&&(0,t.jsxs)(g.jG,{name:"mailFlowType",children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u6536\u4EF6\u4EBA"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(de,{name:"identity"}),(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u6761\u4EF6\u516C\u5F0F",(0,t.jsx)(b.Z,{type:"link",onClick:function(){return u(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,t.jsx)("div",{className:"formula-container",children:(0,t.jsx)(G,{name:"expression",children:(0,t.jsx)(H.ML,{variable:d,readOnly:!0,placeholder:"\u6A21\u677F\u4E3A\u7A7A\uFF0C\u8BF7\u8BBE\u7F6E"})})}),r.schema&&(0,t.jsx)(H.ZP,{visible:o,value:v,title:"\u90AE\u4EF6\u6A21\u677F\u8BBE\u7F6E",schema:r.schema,onCancel:function(){return u(!1)},functionVisible:!1,onOk:function(C){a.setValuesIn("".concat(e.id,".expression"),C),u(!1)}})]})]}),h==="sms"&&(0,t.jsxs)(g.jG,{name:"smsFlowType",children:[(0,t.jsx)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:"\u6536\u4EF6\u4EBA"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(de,{name:"identity"}),(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u6761\u4EF6\u516C\u5F0F",(0,t.jsx)(b.Z,{type:"link",onClick:function(){return u(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,t.jsx)("div",{className:"formula-container",children:(0,t.jsx)(G,{name:"expression",children:(0,t.jsx)(H.ML,{variable:d,readOnly:!0,placeholder:"\u6A21\u677F\u4E3A\u7A7A\uFF0C\u8BF7\u8BBE\u7F6E"})})}),r.schema&&(0,t.jsx)(H.ZP,{visible:o,value:v,title:"\u77ED\u4FE1\u6A21\u677F\u8BBE\u7F6E",schema:r.schema,onCancel:function(){return u(!1)},functionVisible:!1,onOk:function(C){a.setValuesIn("".concat(e.id,".expression"),C),u(!1)}})]})]}),h==="http"&&(0,t.jsxs)(g.jG,{name:"httpFlowType",children:[(0,t.jsxs)("div",{style:{lineHeight:"40px",fontWeight:"bold"},children:["\u63A5\u53E3\u5730\u5740\u914D\u7F6E",(0,t.jsx)(b.Z,{type:"link",onClick:function(){return u(!0)},children:"\u70B9\u51FB\u8BBE\u7F6E"})]}),(0,t.jsx)("div",{className:"formula-container",children:(0,t.jsx)(G,{name:"expression",children:(0,t.jsx)(H.ML,{variable:d,readOnly:!0,placeholder:"\u8BF7\u8F93\u5165\u63A5\u53E3\u5730\u5740"})})}),r.schema&&(0,t.jsx)(H.ZP,{visible:o,value:v,title:"\u63A5\u53E3\u5730\u5740\u8BBE\u7F6E",schema:r.schema,onCancel:function(){return u(!1)},functionVisible:!1,onOk:function(C){a.setValuesIn("".concat(e.id,".expression"),C),u(!1)}})]})]})]})});ae("serviceTask",Nn);var Tn=c(73171),Pn=c(94184),On=c.n(Pn),In={Process:"\u53D1\u8D77\u4EBA",serviceTask:"\u53D1\u9001\u8282\u70B9",userTask:"\u5BA1\u6279\u8282\u70B9",sequenceFlow:"\u6D41\u7A0B\u5206\u652F"},Ln=(0,g.Pi)(function(){var i=(0,p.useContext)(Q),n=i.active,e=i.flow,a=(0,g.cI)(),r=a.query("".concat(n.id,".name")).get("value");return(0,p.useEffect)(function(){e==null||e.updateText(n.id,r)},[n,r,e]),(0,t.jsxs)("div",{className:On()("header",(0,ut.snakeCase)(n.type)),children:[(0,t.jsx)("div",{children:(0,t.jsx)(gt,{name:"name",basePath:n.id,children:(0,t.jsx)(wn,{})})}),(0,t.jsxs)("div",{className:"action",children:[In[n.type],(0,t.jsx)(ht.Z,{type:"vertical"}),(0,t.jsx)("span",{className:"action-delete",children:(0,t.jsx)(Tn.Z,{})})]})]})}),kn=Ln,Q=p.createContext({}),Rn=(0,g.Pi)(function(){var i=(0,p.useContext)(Q),n=i.active,e=function(){var r=ye(n.type);return n&&n.type&&!r&&console.log(n.type+"\u672A\u6CE8\u518C"),n&&n.type&&r?p.createElement(ye(n.type)):p.createElement(ye("Process"))};return(0,t.jsx)("div",{children:(0,t.jsxs)(st.Z,{visible:!0,mask:!1,closable:!1,width:500,className:"properties-panel",children:[(0,t.jsx)(kn,{}),e()]})})}),zn=Rn,Un=c(99008),Et=c(54531);function Wn(i){var n=i.lf;function e(){n.dnd.startDrag({type:"startEvent",text:"\u5F00\u59CB"})}function a(){n.dnd.startDrag({type:"userTask"})}function r(){n.dnd.startDrag({type:"serviceTask"})}function s(){n.dnd.startDrag({type:"exclusiveGateway"})}function l(){n.dnd.startDrag({type:"endEvent",text:"\u7ED3\u675F"})}function o(){n.updateEditConfig({stopMoveGraph:!0})}return n&&n.on("selection:selected",function(){n.updateEditConfig({stopMoveGraph:!1})}),(0,t.jsxs)("div",{className:"pattern",children:[(0,t.jsx)("div",{className:"pattern-selection",onMouseDown:function(){return o()}}),(0,t.jsx)("div",{children:"\u9009\u533A"}),(0,t.jsx)("div",{className:"pattern-start",onMouseDown:function(){return e()}}),(0,t.jsx)("div",{children:"\u5F00\u59CB"}),(0,t.jsx)("div",{className:"pattern-user",onMouseDown:function(){return a()}}),(0,t.jsx)("div",{children:"\u5BA1\u6279\u8282\u70B9"}),(0,t.jsx)("div",{className:"pattern-send",onMouseDown:function(){return r()}}),(0,t.jsx)("div",{children:"\u6284\u9001\u8282\u70B9"}),(0,t.jsx)("div",{className:"pattern-condition",onMouseDown:function(){return s()}}),(0,t.jsx)("div",{children:"\u6761\u4EF6\u5224\u65AD"}),(0,t.jsx)("div",{className:"pattern-end",onMouseDown:function(){return l()}}),(0,t.jsx)("div",{children:"\u7ED3\u675F"})]})}var Vn=function(n){return`
<definitions id="Definitions_`.concat(n,`" xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:flowable="http://flowable.org/bpmn" xmlns:s="http://surveyking.cn/bpmn" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="7.3.0">
  <process id="`).concat(n,`" isExecutable="true">
    <startEvent id="starter" />
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="`).concat(n,`">
        <bpmndi:BPMNShape id="starter_di" bpmnElement="starter">
          <dc:Bounds x="180" y="120" width="40" height="40" />
        </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
`)},vi={type:"startEvent",text:"\u5F00\u59CB",label:"\u5F00\u59CB",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM10.622 8.415l4.879 3.252a.4.4 0 0 1 0 .666l-4.88 3.252a.4.4 0 0 1-.621-.332V8.747a.4.4 0 0 1 .622-.332z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E"},Me={type:"userTask",label:"\u5BA1\u6279",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M4 22a8 8 0 1 1 16 0h-2a6 6 0 1 0-12 0H4zm8-9c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm0-2c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E",properties:{}},Ne={type:"serviceTask",label:"\u53D1\u9001",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M1.923 9.37c-.51-.205-.504-.51.034-.689l19.086-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.475.553-.717.07L11 13 1.923 9.37zm4.89-.2l5.636 2.255 3.04 6.082 3.546-12.41L6.812 9.17z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E",cls:"import_icon"},jt={type:"exclusiveGateway",label:"\u6761\u4EF6\u5224\u65AD",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0H24V24H0z'/%3E%3Cpath d='M9.536 13H7.329c-.412 1.166-1.523 2-2.829 2-1.657 0-3-1.343-3-3s1.343-3 3-3c1.306 0 2.418.835 2.83 2h2.206L13 5h3.17c.412-1.165 1.524-2 2.83-2 1.657 0 3 1.343 3 3s-1.343 3-3 3c-1.306 0-2.417-.834-2.829-2h-2.017l-2.886 4.999L14.155 17h2.016c.411-1.165 1.523-2 2.829-2 1.657 0 3 1.343 3 3s-1.343 3-3 3c-1.306 0-2.417-.834-2.829-2H13l-3.464-6zM19 17c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zM4.5 11c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zM19 5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E"},Gn={type:"endEvent",label:"\u7ED3\u675F",icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM9 9h6v6H9V9z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E"},hi={label:"\u9009\u533A",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",callback:function(){lf.openSelectionSelect(),lf.once("selection:selected",function(){lf.closeSelectionSelect()})}};function Hn(i){var n={icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='32' height='32'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-4.586 6l1.768 1.768-1.414 1.414L12 15.414l-1.768 1.768-1.414-1.414L10.586 14l-1.768-1.768 1.414-1.414L12 12.586l1.768-1.768 1.414 1.414L13.414 14zM9 4v2h6V4H9z' fill='rgba(24,125,255,1)'/%3E%3C/svg%3E",callback:function(a){i.deleteElement(a.id),i.hideContextMenu()}};i.setContextMenuItems(n),i.setContextMenuByType("startEvent",[Me,Ne,jt]),i.setContextMenuByType("userTask",[Me,Ne,jt,Gn]),i.setContextMenuByType("exclusiveGateway",[Me,Ne])}P().use(at),P().use(Pt),P().use(U.a9),U.a9.init({disabledPlugins:[U.v2.name]}),P().use(U.Qs),P().use(U.jX),P().use(U.Ou),P().use(U.v2),P().use(U.xV),P().use(j),P().use(U.aC),P().use(U.Ju);var Ct=(0,g.Pi)(function(){var i=(0,se.IE)(),n=(0,se.Ge)(),e=i.id,a=i.name,r=n.loading,s=n.bpmnXml,l=(0,p.useRef)(null),o=(0,p.useRef)(),u=(0,p.useMemo)(function(){return{type:"Process",x:0,y:0,id:e}},[]),d=(0,p.useState)(u),v=(0,A.Z)(d,2),h=v[0],f=v[1];(0,p.useEffect)(function(){if(h.id){var y;(y=o.current)===null||y===void 0||y.selectElementById(h.id)}},[h]),(0,p.useEffect)(function(){if(s){var y;(y=o.current)===null||y===void 0||y.render(s)}},[s]),(0,p.useEffect)(function(){n.getFlow(e)},[n,e]);var C=function(){var m,F,ne,Y=(m=o.current)===null||m===void 0?void 0:m.getGraphData(),M=(F=o.current)===null||F===void 0?void 0:F.getGraphRawData(),ie=M==null?void 0:(ne=M.edges.map(function(R){return R.id})).concat.apply(ne,(0,T.Z)(M.nodes.map(function(R){return R.id}))),Te=Object.values(n.form.values).filter(function(R){return(ie==null?void 0:ie.includes(R.id))||R.id===e});Y&&n.saveFlow({bpmnXml:Y,projectId:e,nodes:Te}).then(function(R){R.success?N.default.success("\u4FDD\u5B58\u6210\u529F"):N.default.error(R.message)})},L=function(){var m,F,ne,Y=(m=o.current)===null||m===void 0?void 0:m.getGraphData(),M=(F=o.current)===null||F===void 0?void 0:F.getGraphRawData(),ie=M==null?void 0:(ne=M.edges.map(function(z){return z.id})).concat.apply(ne,(0,T.Z)(M.nodes.map(function(z){return z.id}))),Te=Object.values(n.form.values).filter(function(z){return(ie==null?void 0:ie.includes(z.id))||z.id===e}),R=M.nodes.filter(function(z){return z.type==="startEvent"});if(R.length===0){N.default.error("\u5F00\u59CB\u8282\u70B9\u672A\u8BBE\u7F6E");return}if(R.length!==1){N.default.error("\u5F00\u59CB\u8282\u70B9\u53EA\u80FD\u8BBE\u7F6E\u4E00\u4E2A");return}var wt=M.nodes.filter(function(z){return z.type==="endEvent"});if(wt.length===0){N.default.error("\u7ED3\u675F\u8282\u70B9\u672A\u8BBE\u7F6E");return}if(wt.length!==1){N.default.error("\u7ED3\u675F\u8282\u70B9\u53EA\u80FD\u8BBE\u7F6E\u4E00\u4E2A");return}Y&&n.saveFlow({bpmnXml:Y,projectId:e,nodes:Te}).then(function(z){z.success&&n.deploy(e).then(function(Bt){Bt.success?N.default.success("\u53D1\u5E03\u6210\u529F"):N.default.error(Bt.message)})})};(0,p.useEffect)(function(){if(l.current){j.addItem({key:"save",iconClass:"save-icon",title:"",text:"\u4FDD\u5B58",onClick:function(){return C()}}),j.addItem({key:"deploy",iconClass:"deploy-icon",title:"",text:"\u53D1\u5E03",onClick:function(){Ie.Z.confirm({type:"confirm",title:"\u6D41\u7A0B\u53D1\u5E03",content:"\u786E\u5B9A\u53D1\u5E03\u5F53\u524D\u6D41\u7A0B\u5417\uFF1F",onOk:function(){L()}})}});var y=new(P())({extraConf:{id:e},container:l.current,hideAnchors:!1,grid:{type:"dot",size:20},keyboard:{enabled:!0},snapline:!0});o.current=y,Hn(y),y.render(s||Vn(e)),y.on("element:click",function(m){var F=["starter","exclusiveGateway","endEvent"];F.includes(m.data.type)?f(u):f(m.data)}),y.on("blank:click",function(m){f(u)}),y.on("node:add",function(m){f(m.data)})}return function(){j.removeItem("deploy"),j.removeItem("save")}},[]);var k=(0,p.useState)({visible:!1}),q=(0,A.Z)(k,2),x=q[0],w=q[1];return(0,t.jsx)(g.RV,{form:n.form,children:(0,t.jsxs)("div",{style:{height:"100vh",position:"relative"},className:"flow",children:[(0,t.jsx)("div",{ref:l,style:{height:"100%",flex:1}}),(0,t.jsx)(Wn,{lf:o.current}),(0,t.jsx)("div",{style:{width:500},children:(0,t.jsx)(Q.Provider,{value:{flow:o.current,active:h},children:(0,t.jsx)(zn,{})})}),(0,t.jsxs)(X.Z,{style:{position:"absolute",left:100,bottom:10},children:[(0,t.jsx)(b.Z,{onClick:(0,K.Z)(Le().mark(function y(){var m,F;return Le().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:try{F=(m=o.current)===null||m===void 0?void 0:m.getGraphData(),w({visible:!0,xml:F})}catch(M){console.error(M)}case 1:case"end":return Y.stop()}},y)})),icon:(0,t.jsx)(Un.Z,{}),size:"small",children:"XML"}),(0,t.jsx)(b.Z,{onClick:function(){var m;console.log((m=o.current)===null||m===void 0?void 0:m.getGraphRawData()),console.log((0,Et.ZN)(n.form.values[h.id])),console.log((0,Et.ZN)(n.form.values))},children:"\u6570\u636E"})]}),(0,t.jsx)(Qt,(0,B.Z)((0,B.Z)({},x),{},{onClose:function(m){w({visible:!1})}}))]})})}),Xn=Ct},11628:function(Pe,re,c){"use strict";c.d(re,{xI:function(){return le},Ge:function(){return b},IE:function(){return ue}});var B=c(67294),le=(0,B.createContext)({}),X=le.Provider;function ue(){var K=(0,B.useContext)(le);return K.store}function b(){var K=ue();return K.flowStore}}}]);
