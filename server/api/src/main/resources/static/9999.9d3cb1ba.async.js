(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[9999],{38006:function(S){S.exports={linkGroup:"linkGroup___9Jgdb"}},9016:function(S){S.exports={activitiesList:"activitiesList___H8HBB",username:"username___2ciPn",event:"event___3yvwe",pageHeaderContent:"pageHeaderContent___PWSiu",avatar:"avatar___3ZBop",content:"content___1eLtZ",contentTitle:"contentTitle___Yu-cR",extraContent:"extraContent___3rMo7",statItem:"statItem___2hHyE",members:"members___1FE9G",member:"member___2ERhZ",projectList:"projectList___2xaJs",cardTitle:"cardTitle___Bli-X",projectGrid:"projectGrid___Bia9a",projectItemContent:"projectItemContent___3_r0i",datetime:"datetime___2UCoC",activeCard:"activeCard___10qJg",container:"container___1D3Yy"}},60438:function(S,B,e){"use strict";e.r(B),e.d(B,{default:function(){return me}});var x=e(13062),E=e(71230),ne=e(89032),A=e(15746),ye=e(58024),i=e(91894),U=e(54421),D=e(38272),re=e(94657),le=e(95300),W=e(7277),he=e(94233),F=e(51890),ge=e(71748),se=e(90860),$=e(67294),R=e(27400),ie=e(36450),oe=e(9761),ce=e(30381),G=e.n(ce),de=e(73727),t=e(57663),o=e(71577),c=e(49101),a=e(38006),s=e.n(a),n=e(85893),b=function(d){var r=d.links,f=d.linkElement,v=d.onAdd;return(0,n.jsxs)("div",{className:s().linkGroup,children:[r.map(function(l){return(0,$.createElement)(f,{key:"linkGroup-item-".concat(l.id||l.title),to:l.href,href:l.href},l.title)}),(0,n.jsxs)(o.Z,{size:"small",type:"primary",ghost:!0,onClick:v,children:[(0,n.jsx)(c.Z,{})," \u6DFB\u52A0"]})]})};b.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var Z=b,p=e(9016),u=e.n(p),g=e(18106),L=e(60561),C=e(39428),y=e(11849),N=e(3182),T=e(3980),Y=e(91186),M=e(27484),J=e.n(M),V=function(){var d=[{title:"\u95EE\u5377\u540D\u79F0",dataIndex:"name"},{title:"\u5B8C\u6210\u72B6\u6001",dataIndex:"status",valueType:"select",valueEnum:{0:{text:"\u672A\u5F00\u59CB",status:"Default"},1:{text:"\u8FDB\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u5B8C\u6210",status:"Success"}}},{title:"\u64CD\u4F5C",dataIndex:"operate",renderText:function(f,v){return v.answerId?(0,n.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId,"/").concat(v.answerId,"?pattern=readPretty"))},children:"\u67E5\u770B\u7B54\u6848"}):(0,n.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId))},children:"\u8DF3\u8F6C"})}}];return(0,n.jsx)(Y.ZP,{rowKey:"projectId",request:function(){var r=(0,N.Z)((0,C.Z)().mark(function f(v){var l;return(0,C.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,T.hi.getWithPagination("/api/listUserTask",(0,y.Z)((0,y.Z)({},v),{},{type:"survey"}));case 2:return l=m.sent,m.abrupt("return",(0,y.Z)((0,y.Z)({},l),{},{data:l.list}));case 4:case"end":return m.stop()}},f)}));return function(f){return r.apply(this,arguments)}}(),bordered:!0,columns:d,search:!1,toolbar:{}})},ue=function(){var d=[{title:"\u8003\u8BD5\u540D\u79F0",dataIndex:"name"},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"examStartTime",renderText:function(f){return f?J()(f).format("YYYY-MM-DD HH:mm"):"-"}},{title:"\u5B8C\u6210\u72B6\u6001",dataIndex:"status",valueType:"select",valueEnum:{0:{text:"\u672A\u5F00\u59CB",status:"Default"},1:{text:"\u8FDB\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u5B8C\u6210",status:"Success"}}},{title:"\u64CD\u4F5C",dataIndex:"operate",renderText:function(f,v){return v.answerId?(0,n.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId,"/exam-result/").concat(v.answerId))},children:"\u67E5\u770B\u7ED3\u679C"}):(0,n.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId))},children:"\u8DF3\u8F6C"})}}];return(0,n.jsx)(Y.ZP,{rowKey:"projectId",request:function(){var r=(0,N.Z)((0,C.Z)().mark(function f(v){var l;return(0,C.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,T.hi.getWithPagination("/api/listUserTask",(0,y.Z)((0,y.Z)({},v),{},{type:"exam"}));case 2:return l=m.sent,m.abrupt("return",(0,y.Z)((0,y.Z)({},l),{},{data:l.list}));case 4:case"end":return m.stop()}},f)}));return function(f){return r.apply(this,arguments)}}(),bordered:!0,columns:d,search:!1,toolbar:{}})};function ve(){return(0,n.jsx)(i.Z,{style:{width:"100%",marginBottom:24},children:(0,n.jsx)(L.Z,{items:[{key:"exam",label:"\u6211\u7684\u8003\u8BD5",children:(0,n.jsx)(ue,{})},{key:"survey",label:"\u6211\u7684\u95EE\u5377",children:(0,n.jsx)(V,{})}]})})}var X=[{title:"\u521B\u5EFA\u95EE\u5377",href:"/survey/new?mode=survey"},{title:"\u521B\u5EFA\u8003\u8BD5",href:"/survey/new?mode=exam"}];function w(){var j=new Date,d=j.getHours();return d<6?"\u51CC\u6668\u597D":d<9?"\u65E9\u4E0A\u597D":d<12?"\u4E0A\u5348\u597D":d<14?"\u4E2D\u5348\u597D":d<17?"\u4E0B\u5348\u597D":d<19?"\u508D\u665A\u597D":d<22?"\u665A\u4E0A\u597D":"\u591C\u91CC\u597D"}var z=function(d){var r=d.currentUser,f=r&&Object.keys(r).length;return f?(0,n.jsxs)("div",{className:u().pageHeaderContent,children:[(0,n.jsx)("div",{className:u().avatar,children:(0,n.jsx)(F.C,{size:"large",src:r.avatar})}),(0,n.jsxs)("div",{className:u().content,children:[(0,n.jsxs)("div",{className:u().contentTitle,children:[w(),"\uFF0C",r.name,"\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"]}),(0,n.jsx)("div",{children:r.group})]}),(0,n.jsx)(O,{})]}):(0,n.jsx)(se.Z,{avatar:!0,paragraph:{rows:1},active:!0})},O=function(){var d=(0,R.a)(),r=d.userOverview;return(0,n.jsxs)("div",{className:u().extraContent,children:[(0,n.jsx)("div",{className:u().statItem,children:(0,n.jsx)(W.Z,{title:"\u95EE\u5377\u6570",value:r==null?void 0:r.surveyCount})}),(0,n.jsx)("div",{className:u().statItem,children:(0,n.jsx)(W.Z,{title:"\u8003\u8BD5\u6570",value:r==null?void 0:r.examCount})})]})},Q=void 0==="1",k=function(){var d=(0,R.a)(),r=d.user,f=(0,$.useState)(function(){return!localStorage.getItem("welcome")}),v=(0,re.Z)(f,2),l=v[0],q=v[1],m={},_=m.loading,K=m.data,ee=K===void 0?[]:K,fe=function(h){var xe=h.template.split(/@\{([^{}]*)\}/gi).map(function(P){return h[P]?(0,n.jsx)("a",{href:h[P].link,children:h[P].name},h[P].name):P});return(0,n.jsx)(D.ZP.Item,{children:(0,n.jsx)(D.ZP.Item.Meta,{avatar:(0,n.jsx)(F.C,{src:h.user.avatar}),title:(0,n.jsxs)("span",{children:[(0,n.jsx)("a",{className:u().username,children:h.user.name}),"\xA0",(0,n.jsx)("span",{className:u().event,children:xe})]}),description:(0,n.jsx)("span",{className:u().datetime,title:h.updatedAt,children:G()(h.updatedAt).fromNow()})})},h.id)};return(0,n.jsx)(ie._z,{className:u().container,content:(0,n.jsx)(z,{currentUser:{avatar:"/api/public/preview/".concat(r==null?void 0:r.avatar),name:r==null?void 0:r.name,userid:r==null?void 0:r.userId,email:r==null?void 0:r.email,signature:r==null?void 0:r.profile,group:r==null?void 0:r.deptName}}),children:(0,n.jsxs)(E.Z,{gutter:24,children:[(0,n.jsxs)(A.Z,{xl:16,lg:24,md:24,sm:24,xs:24,children:[(0,n.jsx)(ve,{}),Q&&(0,n.jsx)(i.Z,{bodyStyle:{padding:0},bordered:!1,className:u().activeCard,title:"\u52A8\u6001",loading:_,children:(0,n.jsx)(D.ZP,{loading:_,renderItem:function(h){return fe(h)},dataSource:ee,className:u().activitiesList,size:"large"})})]}),d.hasPermission("project:create")&&(0,n.jsx)(A.Z,{xl:8,lg:24,md:24,sm:24,xs:24,children:(0,n.jsx)(i.Z,{style:{marginBottom:24},title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",bordered:!1,bodyStyle:{padding:0},children:(0,n.jsx)(Z,{onAdd:function(){},links:X,linkElement:de.rU})})})]})})},me=(0,oe.Pi)(k)},91894:function(S,B,e){"use strict";e.d(B,{Z:function(){return de}});var x=e(96156),E=e(22122),ne=e(94184),A=e.n(ne),ye=e(98423),i=e(67294),U=e(53124),D=e(97647),re=e(90860),le=e(60561),W=function(t,o){var c={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&o.indexOf(a)<0&&(c[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)o.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(c[a[s]]=t[a[s]]);return c},he=function(o){var c=o.prefixCls,a=o.className,s=o.hoverable,n=s===void 0?!0:s,b=W(o,["prefixCls","className","hoverable"]);return i.createElement(U.C,null,function(Z){var p=Z.getPrefixCls,u=p("card",c),g=A()("".concat(u,"-grid"),a,(0,x.Z)({},"".concat(u,"-grid-hoverable"),n));return i.createElement("div",(0,E.Z)({},b,{className:g}))})},F=he,ge=function(t,o){var c={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&o.indexOf(a)<0&&(c[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)o.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(c[a[s]]=t[a[s]]);return c};function se(t){var o=t.map(function(c,a){return i.createElement("li",{style:{width:"".concat(100/t.length,"%")},key:"action-".concat(a)},i.createElement("span",null,c))});return o}var $=i.forwardRef(function(t,o){var c,a,s=i.useContext(U.E_),n=s.getPrefixCls,b=s.direction,Z=i.useContext(D.Z),p=function(ae){var I;(I=t.onTabChange)===null||I===void 0||I.call(t,ae)},u=function(){var ae;return i.Children.forEach(t.children,function(I){I&&I.type&&I.type===F&&(ae=!0)}),ae},g=t.prefixCls,L=t.className,C=t.extra,y=t.headStyle,N=y===void 0?{}:y,T=t.bodyStyle,Y=T===void 0?{}:T,M=t.title,J=t.loading,V=t.bordered,ue=V===void 0?!0:V,ve=t.size,X=t.type,w=t.cover,z=t.actions,O=t.tabList,Q=t.children,k=t.activeTabKey,me=t.defaultActiveTabKey,j=t.tabBarExtraContent,d=t.hoverable,r=t.tabProps,f=r===void 0?{}:r,v=ge(t,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),l=n("card",g),q=i.createElement(re.Z,{loading:!0,active:!0,paragraph:{rows:4},title:!1},Q),m=k!==void 0,_=(0,E.Z)((0,E.Z)({},f),(c={},(0,x.Z)(c,m?"activeKey":"defaultActiveKey",m?k:me),(0,x.Z)(c,"tabBarExtraContent",j),c)),K,ee=O&&O.length?i.createElement(le.Z,(0,E.Z)({size:"large"},_,{className:"".concat(l,"-head-tabs"),onChange:p}),O.map(function(H){return i.createElement(le.Z.TabPane,{tab:H.tab,disabled:H.disabled,key:H.key})})):null;(M||C||ee)&&(K=i.createElement("div",{className:"".concat(l,"-head"),style:N},i.createElement("div",{className:"".concat(l,"-head-wrapper")},M&&i.createElement("div",{className:"".concat(l,"-head-title")},M),C&&i.createElement("div",{className:"".concat(l,"-extra")},C)),ee));var fe=w?i.createElement("div",{className:"".concat(l,"-cover")},w):null,te=i.createElement("div",{className:"".concat(l,"-body"),style:Y},J?q:Q),h=z&&z.length?i.createElement("ul",{className:"".concat(l,"-actions")},se(z)):null,xe=(0,ye.Z)(v,["onTabChange"]),P=ve||Z,Ce=A()(l,(a={},(0,x.Z)(a,"".concat(l,"-loading"),J),(0,x.Z)(a,"".concat(l,"-bordered"),ue),(0,x.Z)(a,"".concat(l,"-hoverable"),d),(0,x.Z)(a,"".concat(l,"-contain-grid"),u()),(0,x.Z)(a,"".concat(l,"-contain-tabs"),O&&O.length),(0,x.Z)(a,"".concat(l,"-").concat(P),P),(0,x.Z)(a,"".concat(l,"-type-").concat(X),!!X),(0,x.Z)(a,"".concat(l,"-rtl"),b==="rtl"),a),L);return i.createElement("div",(0,E.Z)({ref:o},xe,{className:Ce}),K,fe,te,h)}),R=$,ie=function(t,o){var c={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&o.indexOf(a)<0&&(c[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)o.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(c[a[s]]=t[a[s]]);return c},oe=function(o){return i.createElement(U.C,null,function(c){var a=c.getPrefixCls,s=o.prefixCls,n=o.className,b=o.avatar,Z=o.title,p=o.description,u=ie(o,["prefixCls","className","avatar","title","description"]),g=a("card",s),L=A()("".concat(g,"-meta"),n),C=b?i.createElement("div",{className:"".concat(g,"-meta-avatar")},b):null,y=Z?i.createElement("div",{className:"".concat(g,"-meta-title")},Z):null,N=p?i.createElement("div",{className:"".concat(g,"-meta-description")},p):null,T=y||N?i.createElement("div",{className:"".concat(g,"-meta-detail")},y,N):null;return i.createElement("div",(0,E.Z)({},u,{className:L}),C,T)})},ce=oe,G=R;G.Grid=F,G.Meta=ce;var de=G},89032:function(S,B,e){"use strict";var x=e(38663),E=e.n(x),ne=e(6999)}}]);
