(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[811],{1997:function(it,be,i){"use strict";i.d(be,{ML:function(){return Ie},tC:function(){return Le},sJ:function(){return l},ZP:function(){return tt}});var Ce=i(71194),v=i(50146),ue=i(57663),oe=i(71577),R=i(49111),Z=i(19650),ae=i(77576),ne=i(12028),K=i(22385),Y=i(94199),ot=i(402),Ee=i(20294),Fe=i(94184),je=i.n(Fe),x=i(67294),F=i(94657),Re=i(29656),at=i(63138),se=i(88386),a=i(85893),Me=(0,x.forwardRef)(function(f,u){var b=f.value,p=f.readOnly,q=f.placeholder,y=(0,x.useState)(),A=(0,F.Z)(y,2),z=A[0],C=A[1];(0,x.useEffect)(function(){z&&z.focus()},[z]),(0,x.useImperativeHandle)(u,function(){return{getValue:function(){return z.getValue()},focus:function(){z.focus()},getDoc:function(){return z.getDoc()}}});var I=(0,x.useMemo)(function(){return{mode:"text/x-spreadsheet",line:!0,lineWrapping:!0,readOnly:p,placeholder:q}},[p]),H=function(k,B,j,W,m){var O=k.getDoc(),S=document.createElement("span");S.innerText=W.title||W.path,S.className="formula-tag ".concat(m||"formula-tag-value"),O.markText(B,j,{replacedWith:S})},$=function U(k,B,j){var W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];(W||[]).forEach(function(m){for(var O="#{".concat(m.path,"}"),S=new RegExp(O,"g");S.exec(B)!==null;){var ge={line:j,ch:S.lastIndex-O.length},xe={line:j,ch:S.lastIndex};H(k,ge,xe,m)}for(O="#{_".concat(m.path,"}"),S=new RegExp(O,"g");S.exec(B)!==null;){var pe={line:j,ch:S.lastIndex-O.length},X={line:j,ch:S.lastIndex};H(k,pe,X,m,"formula-tag-text")}m.children&&m.children.length>0&&U(k,B,j,m.children)})},w=function(k,B){var j=B.split(`
`);j.forEach(function(W,m){return $(k,W,m,f.variable)})},ee=function(k,B){C(k),b!=null&&b!==""&&w(k,B)},te=function(k,B,j){(j!=null||j!=="")&&w(k,j),f.onChange&&f.onChange(j)};return(0,a.jsx)("div",{className:je()("formula-editor-content",{readOnly:p}),children:(0,a.jsx)(Re.Rt,{autoCursor:!1,value:b,options:I,editorDidMount:ee,onChange:te})})}),Ie=Me,Oe=i(1870),bt=i(47673),ke=i(4107),rt=i(83279),ut=i(18106),Se=i(60561),st=i(20136),Q=i(55241),ct=i(7359),Ze=i(7964),we=Ze.Z.Panel,Ue=Ee.Z.Link;function ce(f,u,b){if(f.popover){var p,q;return(0,a.jsx)(Q.Z,{content:(0,a.jsxs)("div",{className:"fn-popover-content",children:[(0,a.jsxs)("div",{className:"fn-popover-content-header",children:["\u516C\u5F0F\u7B80\u4ECB",(0,a.jsx)(Ue,{href:f.popover.docHref,target:"_blank",children:"\u6587\u6863"})]}),(p=f.popover)===null||p===void 0?void 0:p.content]}),title:(q=f.popover)===null||q===void 0?void 0:q.title,placement:"right",className:"fn-popover",children:(0,a.jsxs)("div",{className:"function-item",onClick:function(){return b&&b(f.name)},children:[(0,a.jsx)("div",{className:"function-item__name",children:f.name}),(0,a.jsx)("div",{className:"function-item__desc",children:f.description})]})},u)}return(0,a.jsxs)("div",{className:"function-item",onClick:function(){return b&&b(f.name)},children:[(0,a.jsx)("div",{className:"function-item__name",children:f.name}),(0,a.jsx)("div",{className:"function-item__desc",children:f.description})]},u)}var Pe=function(u){var b=u.dataSource,p=b===void 0?[]:b,q=u.check,y="function-store";return(0,a.jsx)(Ze.Z,{className:y,bordered:!1,defaultActiveKey:[0],expandIconPosition:"right",ghost:!0,children:p.map(function(A,z){return(0,a.jsx)(we,{className:"".concat(y,"-group"),header:A.name,children:A.functions.map(function(C,I){return ce(C,I,q)})},z)})})},Ve=Pe,de=i(11849),Qe=function(f){return(0,a.jsx)("svg",(0,de.Z)((0,de.Z)({width:"1em",height:"1.2em",viewBox:"0 0 24 24"},f),{},{children:(0,a.jsx)("path",{d:"M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 0 1 2 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3c.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 0 1 4.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41l-2.83 2.83l-2.83-2.83l-1.43 1.41l2.85 2.85l-2.85 2.81l1.43 1.41l2.83-2.83l2.83 2.83L22 19.31l-2.83-2.81L22 13.65z",fill:"currentColor"})}))},Be=function(f){return(0,a.jsx)("svg",(0,de.Z)((0,de.Z)({width:"1em",height:"1em",viewBox:"0 0 16 16"},f),{},{children:(0,a.jsx)("g",{fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5h2V4H1.5l-.5.5v8l.5.5H4v-1H2V5zm12.5-1H12v1h2v7h-2v1h2.5l.5-.5v-8l-.5-.5zm-2.74 2.57L12 7v2.51l-.3.45l-4.5 2h-.46l-2.5-1.5l-.24-.43v-2.5l.3-.46l4.5-2h.46l2.5 1.5zM5 9.71l1.5.9V9.28L5 8.38v1.33zm.58-2.15l1.45.87l3.39-1.5l-1.45-.87l-3.39 1.5zm1.95 3.17l3.5-1.56v-1.4l-3.5 1.55v1.41z"})})}))},dt=i(32157),He=i(32138),We=i(57254),ve=function(u){var b=u.id,p=u.type,q=u.title,y=u.pick,A=(0,x.useMemo)(function(){return p==="SplitLine"},[]);return(0,a.jsx)("div",{className:je()("field-variable",{disabled:A}),onClick:function(){y&&y()},children:q})},le=ve;function ie(f,u){return{title:(0,a.jsx)(le,{type:f.type,id:f.id,title:f.title,pick:function(){return u&&u(f)}}),key:f.id,children:(f.children||[]).map(function(b){return ie(b,u)})}}var fe=function(u){var b=u.dataSource,p=u.pick,q=(0,x.useMemo)(function(){return b.map(function(y){return ie(y,p)})},[p]);return(0,a.jsx)(He.Z,{blockNode:!0,defaultExpandAll:!0,showLine:{showLeafIcon:!1},switcherIcon:(0,a.jsx)(We.Z,{}),className:"hide-file-icon",treeData:q,selectable:!1})},Ne=fe,Xe=i(76570),De=i(54421),Ae=i(38272),ze=function(u){var b=u.check,p=u.dataSource;return(0,a.jsx)(Ae.ZP,{bordered:!1,dataSource:p,className:"function-store-group",renderItem:function(y){return(0,a.jsx)(Ae.ZP.Item,{children:ce(y,y.name,b)})}})},Ye=ze,_=Se.Z.TabPane,$e=function(u){var b=u.variables,p=b===void 0?[]:b,q=u.insertFun,y=u.insertVariable,A=u.functionVisible,z=A===void 0?!0:A,C=u.helperVariables,I="formula-editor-toolbar",H=(0,x.useState)([]),$=(0,F.Z)(H,2),w=$[0],ee=$[1],te=(0,x.useCallback)(function(k){return(0,a.jsxs)("span",{children:[k.icon?(0,a.jsx)("span",{role:"img",className:"anticon",children:k.icon}):null,k.name]})},[]),U=function(B){var j;if(!B){ee([]);return}var W=new Set;ee(((j=u.functions)===null||j===void 0?void 0:j.reduce(function(m,O){return m.push.apply(m,(0,rt.Z)(O.functions.filter(function(S){return S.name.includes(B.toUpperCase())}))),m},[]).filter(function(m){return W.has(m.name)?!1:(W.add(m.name),!0)}))||[])};return(0,a.jsx)("div",{className:I,children:(0,a.jsxs)(Se.Z,{defaultActiveKey:"field",centered:z,children:[(0,a.jsx)(_,{tab:(0,a.jsx)(te,{name:"\u95EE\u9898",icon:(0,a.jsx)(Be,{})}),children:(0,a.jsx)("div",{children:(0,a.jsx)(Ne,{dataSource:p,pick:y})})},"field"),C&&(0,a.jsx)(_,{tab:(0,a.jsx)(te,{name:"\u547D\u540D\u53D8\u91CF",icon:(0,a.jsx)(Be,{})}),children:(0,a.jsx)("div",{children:(0,a.jsx)(Ne,{dataSource:C,pick:y})})},"helperFiled"),z&&(0,a.jsxs)(_,{tab:(0,a.jsx)(te,{name:"\u51FD\u6570",icon:(0,a.jsx)(Qe,{})}),children:[(0,a.jsx)(ke.Z,{placeholder:"\u641C\u7D22\u516C\u5F0F",prefix:(0,a.jsx)(Xe.Z,{}),allowClear:!0,onChange:function(B){return U(B.target.value)}}),w.length>0&&(0,a.jsx)(Ye,{dataSource:w,check:q}),w.length===0&&(0,a.jsx)(Ve,{dataSource:u.functions,check:q})]},"fx")]})})};function he(f){for(var u=arguments.length,b=new Array(u>1?u-1:0),p=1;p<u;p++)b[p-1]=arguments[p];return(0,a.jsxs)("div",{className:"fn-popover-title",children:[f,"(",b.map(function(q,y){return(0,a.jsxs)("span",{className:"fn-popover-arg",children:[q," ",y===b.length-1?"":","]},y)}),")"]})}var Te="https://support.microsoft.com/zh-cn/office/",me=[{name:"\u903B\u8F91",functions:[{name:"IF",description:"\u6839\u636E\u5224\u65AD\u6761\u4EF6\uFF0C\u8FD4\u56DE\u6B63\u786E\u6216\u9519\u8BEF\u7684\u503C"},{name:"AND",description:"\u8FD4\u56DE\u903B\u8F91\u503C\uFF1A\u5982\u679C\u6240\u6709\u53C2\u6570\u503C\u5747\u4E3A\u903B\u8F91\u201Ctrue\u201D\uFF0C\u5219\u8FD4\u56DE\u903B\u8F91\u201Ctrue\u201D\uFF0C\u53CD\u4E4B\u8FD4\u56DE\u903B\u8F91\u201Cfalse",popover:{title:he("AND","logical1","logical2","..."),content:(0,a.jsxs)("div",{className:"fn-popover-content",children:["\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Afalse\uFF0C\u5373\u8FD4\u56DE false\uFF1B",(0,a.jsx)("br",{})," \u53EA\u6709\u5F53\u6240\u6709\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u624D\u8FD4\u56DE true\u3002",(0,a.jsx)("br",{}),"logical:\u903B\u8F91\u503C\uFF0C\u4F8B\u5982\uFF0C2>1\u7684\u903B\u8F91\u503C\u4E3A true"]})}},{name:"OR",description:"\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u5373\u8FD4\u56DEtrue\uFF1B\u53EA\u6709\u5F53\u6240\u6709\u903B\u8F91\u53C2\u6570\u503C\u4E3Afalse\uFF0C\u624D\u8FD4\u56DEfalse"},{name:"XOR",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u6570\u7684\u5F02\u6216\u503C"},{name:"NOT",description:"\u5BF9\u53C2\u6570\u903B\u8F91\u503C\u6C42\u53CD"}]},{name:"\u6587\u5B57",functions:[{name:"SUBSTITUTE",description:"\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text",popover:{title:he("SUBSTITUTE","old_text","new_text","[instance_num]"),content:(0,a.jsxs)("div",{className:"fn-popover-content",children:["\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text\u3002",(0,a.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u6307\u5B9A\u7684\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 SUBSTITUTE\uFF1B",(0,a.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u7279\u5B9A\u4F4D\u7F6E\u5904\u7684\u4EFB\u610F\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 REPLACE\u3002"]}),docHref:"".concat(Te,"substitute-\u51FD\u6570-6434944e-a904-4336-a9b0-1e58df3bc332")}},{name:"CONCATENATE",description:"\u5C06\u591A\u4E2A\u6587\u5B57\u5408\u5E76"},{name:"LEFT",description:"\u4ECE\u5DE6\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"RIGHT",description:"\u4ECE\u53F3\u8FB9\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"MID",description:"\u622A\u53D6\u6307\u5B9A\u4F4D\u7F6E\u7684\u6587\u5B57"},{name:"REPLACE",description:"\u66FF\u6362\u6587\u672C\u4E2D\u7684\u6307\u5B9A\u6587\u5B57",popover:{title:he("REPLACE","old_text","start_num","num_chars","new_text"),content:(0,a.jsxs)("div",{className:"fn-popover-content",children:["\u6839\u636E\u6307\u5B9A\u7684\u5B57\u7B26\u6570\uFF0CREPLACE \u5C06\u90E8\u5206\u6587\u672C\u5B57\u7B26\u4E32\u66FF\u6362\u4E3A\u4E0D\u540C\u7684\u6587\u672C\u5B57\u7B26\u4E32\u3002",(0,a.jsx)("br",{}),"REPLACEB \u4F7F\u7528\u5176\u4ED6\u6587\u672C\u5B57\u7B26\u4E32\u5E76\u6839\u636E\u6240\u6307\u5B9A\u7684\u5B57\u8282\u6570\u66FF\u6362\u67D0\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7684\u90E8\u5206\u6587\u672C\u3002"]}),docHref:"".concat(Te,"replace-replaceb-\u51FD\u6570-8d799074-2425-4a8a-84bc-82472868878a")}},{name:"TRIM",description:"\u79FB\u9664\u6587\u5B57\u5934\u5C3E\u7684\u7A7A\u683C"},{name:"LEN",description:"\u540E\u53BB\u6587\u5B57\u7684\u957F\u5EA6"},{name:"LOWER",description:"\u8F6C\u6210\u5C0F\u5199\u6587\u5B57"},{name:"UPPER",description:"\u8F6C\u6210\u5927\u5199\u6587\u5B57"}]},{name:"\u6570\u5B57",functions:[{name:"AVERAGE",description:"\u8BA1\u7B97\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u7684\u5E73\u5747\u503C"},{name:"COUNT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u6570\u5B57\u7684\u6570\u91CF"},{name:"COUNTA",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u4E0D\u4E3A\u7A7A\u7684\u6570\u91CF"},{name:"COUNTIF",description:"COUNTIF(\u8868\u683C[\u91D1\u989D], 100)\uFF0C\u53EF\u5F97\u5230\u8868\u683C\u4E2D\u91D1\u989D\u4E3A100\u7684\u6570\u636E\u6761\u6570"},{name:"MAX",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5927\u503C"},{name:"MIN",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5C0F\u503C"},{name:"ROUND",description:"\u5C06\u6570\u5B57\u56DB\u820D\u4E94\u5165\u5230\u6307\u5B9A\u7684\u4F4D\u6570"},{name:"INT",description:"\u5C06\u6570\u5B57\u5411\u4E0B\u53D6\u6574"},{name:"MOD",description:"\u8FD4\u56DE\u4E24\u6570\u76F8\u9664\u7684\u4F59\u6570"},{name:"PRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u4E58\u79EF"},{name:"SUM",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMPRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMIF",description:"\u7EDF\u8BA1\u8868\u683C\u4E2D\u7B26\u5408\u6761\u4EF6\u7684\u6570\u503C\uFF0C\u5E76\u6C42\u548C"},{name:"ROUNDUP",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0A\u53D6"},{name:"ROUNDDOWN",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0B\u53D6"},{name:"POWER",description:"\u8BA1\u7B97\u6570\u5B57num\u7684n\u6B21\u65B9\uFF0Cn\u53EF\u4EE5\u4E3A\u5206\u6570\u6216\u8005\u6574\u6570"},{name:"LN",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u81EA\u7136\u5BF9\u6570"},{name:"SQRT",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u5E73\u65B9\u6839"}]},{name:"\u65F6\u95F4",functions:[{name:"YEAR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5E74\u4EFD"},{name:"MONTH",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u6708\u4EFD"},{name:"DAY",description:"\u8FD4\u56DE\u65E5\u671F\u5728\u4E00\u4E2A\u6708\u4E2D\u7684\u7B2C\u51E0\u5929\u7684\u6570\u503C"},{name:"HOUR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5C0F\u65F6\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"MINUTE",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5206\u949F\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"SECOND",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u79D2\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"DATE",description:"\u5C06\u6570\u5B57\u62FC\u63A5\u6210\u4E3A\u5E74\u4EFD\uFF0C\u6570\u5B57\u5B57\u6BB5\u987A\u5E8F\u4E3A\uFF1A\u5E74\uFF0F\u6708\uFF0F\u65E5\uFF0F\u65F6\uFF0F\u5206\uFF0F\u79D2"},{name:"CURDATE",description:"\u8FD4\u56DE\u5F53\u524D\u65E5\u671F"},{name:"NOW",description:"\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4\uFF0C\u7CBE\u786E\u5230\u65F6/\u5206/\u79D2"},{name:"DAYS",description:"\u8FD4\u56DE\u65E5\u671F\u5B57\u6BB51\u4E0E\u65E5\u671F\u5B57\u6BB52\u7684\u5DEE\u503C\uFF0C\u5355\u4F4D\u4E3A\u5929"},{name:"DATEDELTA",description:"\u5C06\u6307\u5B9A\u65E5\u671F\u52A0/\u51CF\u6307\u5B9A\u5929\u6570\uFF0C\u5E76\u8FD4\u56DE\u76EE\u6807\u65E5\u671F"}]},{name:"\u81EA\u5B9A\u4E49\u51FD\u6570",functions:[{name:"CURRENT_DATE",description:"\u8FD4\u56DE\u5F53\u524D\u65E5\u671F\uFF0C\u683C\u5F0F 2022-01-01"},{name:"CURRENT_TIME",description:"\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4\uFF0C\u683C\u5F0F 18:20:30"},{name:"CURRENT_DATETIME",description:"\u8FD4\u56DE\u5F53\u524D\u65E5\u671F\u65F6\u95F4\uFF0C\u683C\u5F0F 2022-01-01 18:20:30"}]}];function Ge(f){if(f){var u=me.map(function(p){return p.functions}).reduce(function(p,q){return p.concat(q)},[]),b=f.map(function(p){return u.find(function(q){return q.name===p})});return[{name:"\u5E38\u7528",functions:b}].concat(me)}return me}var re=i(76826);function Ke(f){return f==="SplitLine"||f==="Pagination"||f==="Remark"||f==="Signature"||f==="Upload"}function Je(f){return!!["Dept","FillBlank","User","Score","Nps","Textarea"].includes(f)}var _e=function f(u){var b;(b=u.children)===null||b===void 0||b.forEach(function(p){p.parent=u,f(p)})},l=function f(u,b,p,q,y){var A;if(!u)return[];var z=!1;return((A=u.children)===null||A===void 0?void 0:A.filter(function(C){return C===b&&!p?(z=!0,!1):q&&!q.includes(C.type)?!1:!Ke(C.type)&&!z?!0:((C.type==="Option"||C.type===void 0)&&y===!1,!1)}).map(function(C){var I=C.id,H=C.title,$=C.type,w=C.type===void 0?"".concat(u==null?void 0:u.id,".").concat(I):I;return Je(C.type)?{id:I,path:w,title:(0,re.WO)(H),type:$}:{id:I,path:w,title:(0,re.WO)(H),type:$,children:f(C,b,p,q,y)}}))||[]},et=Ee.Z.Link,Le=function(u){var b=u.title,p=u.subTitle,q=u.helpLink,y=u.onOk,A=u.value,z=u.className,C=u.onCancel,I=u.fieldAll,H=u.visible,$=H===void 0?!0:H,w=u.schema,ee=u.current,te=u.functions,U=u.functionVisible,k=u.fieldTypes,B=u.helperVariables,j=u.optionVisible,W=j===void 0?!0:j,m=(0,x.useRef)(null),O="formula-editor",S=(0,x.useRef)(""),ge=(0,x.useCallback)(function(X){if(m.current!=null){var P=m.current.getDoc(),c=P.getCursor();P.replaceRange("".concat(X,"()"),c),c.ch+=X.length+1,P.setCursor(c),m.current.focus()}},[]),xe=(0,x.useCallback)(function(X){if(m.current!=null){var P=m.current.getDoc(),c=P.getCursor();P.replaceRange("#{".concat(S.current).concat(X.path,"}"),c,c),m.current.focus()}},[]),pe=(0,x.useMemo)(function(){return l(w,ee,I,k,W)},[w,ee,I,k]);return(0,a.jsx)(v.Z,{onCancel:C,open:$,maskClosable:!1,getContainer:u.getContainer,title:b,width:1e3,footer:!1,onOk:function(P){P.stopPropagation(),y(m.current.getValue())},keyboard:!1,children:(0,a.jsxs)("div",{className:je()(O,z),children:[(0,a.jsx)($e,{functionVisible:U,functions:te||Ge(u.commonUseFunctionNames),variables:pe,helperVariables:B,insertFun:ge,insertVariable:xe}),(0,a.jsxs)("div",{className:"".concat(O,"-main"),children:[(0,a.jsxs)("div",{className:"".concat(O,"-main__code"),children:[(0,a.jsxs)("h1",{children:[(0,a.jsxs)("span",{className:"equle",children:[p,"="]}),(0,a.jsxs)("span",{style:{float:"right"},children:[(0,a.jsx)(Y.Z,{title:"\u903B\u8F91\u8868\u793A\u4F7F\u7528\u5177\u4F53\u503C\u53C2\u4E0E\u903B\u8F91\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u4E3A true;\u6587\u672C\u8868\u793A\u4F7F\u7528\u6807\u9898\u53C2\u4E0E\u6587\u672C\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u9009\u9879\u7684\u6587\u672C\u3002",children:(0,a.jsx)(Oe.Z,{style:{fontSize:16,marginRight:10}})}),(0,a.jsx)(ne.Z,{checkedChildren:"\u903B\u8F91",defaultChecked:!0,unCheckedChildren:"\u6587\u672C",onChange:function(P){P?S.current="":S.current="_"}})]})]}),(0,a.jsx)("div",{style:{fontSize:14,color:"#b0b0b9"},children:"\u5728\u5DE6\u4FA7\u9009\u62E9\u51FD\u6570\u6216\u5B57\u6BB5\u53D8\u91CF\uFF0C\u4E14\u5728\u82F1\u6587\u8F93\u5165\u6CD5\u4E0B\u7F16\u8F91"})]}),(0,a.jsx)("div",{className:"".concat(O,"-main__panel"),children:(0,a.jsx)(Ie,{ref:m,variable:pe.concat(B||[]),value:A})}),(0,a.jsxs)("div",{className:"".concat(O,"-main__footer"),children:[(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)("span",{children:q}),(0,a.jsx)(et,{href:"https://surveyking.cn/docs/guides/formula",target:"_blank",children:"\u516C\u5F0F\u6587\u6863"})]}),(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(oe.Z,{onClick:function(){C&&C()},children:"\u53D6\u6D88"}),(0,a.jsx)(oe.Z,{type:"primary",onClick:function(P){P.stopPropagation(),y(m.current.getValue())},children:"\u786E\u5B9A"})]})]})]})]})})},tt=Le},70811:function(it,be,i){"use strict";i.d(be,{Mf:function(){return I},cM:function(){return H},Bn:function(){return X},ZP:function(){return P}});var Ce=i(22385),v=i(94199),ue=i(94657),oe=i(20310),R=i(69610),Z=i(54941),ae=i(63543),ne=i(94663),K=i(43028),Y=i(15818),ot=i(94184),Ee=i.n(ot),Fe=i(28579),je=i(44823),x=i(67294),F=i(71167),Re=i.n(F),at=i(61233),se=i(11849),a=i(71194),Me=i(50146),Ie=i(49111),Oe=i(19650),bt=i(57663),ke=i(71577),rt=i(77576),ut=i(12028),Se=i(93224),st=i(76095),Q=i.n(st),ct=function(){function c(r,t){(0,R.Z)(this,c),this.quill=r,this.options=t,this.container=document.querySelector(t.container),r.on("text-change",this.update.bind(this)),this.update()}return(0,Z.Z)(c,[{key:"calculate",value:function(){var t=this.quill.getText();return this.options.unit==="word"?(t=t.trim(),t.length>0?t.split(/\s+/).length:0):t.length}},{key:"update",value:function(){var t=this.calculate(),e=this.options.unit;t!==1&&(e+="s")}}]),c}();F.Quill.register("modules/counter",ct);var Ze=i(66913),we=i.n(Ze),Ue={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}},ce=(0,Z.Z)(function c(r){(0,R.Z)(this,c),this.onCreate=function(){},this.onDestroy=function(){},this.onUpdate=function(){},this.overlay=r.overlay,this.img=r.img,this.options=r.options,this.requestUpdate=r.onUpdate}),Pe=function(c){(0,K.Z)(t,c);var r=(0,Y.Z)(t);function t(){var e;(0,R.Z)(this,t);for(var o=arguments.length,n=new Array(o),d=0;d<o;d++)n[d]=arguments[d];return e=r.call.apply(r,[this].concat(n)),e.onCreate=function(){e.display=document.createElement("div"),Object.assign(e.display.style,e.options.displayStyles),e.overlay.appendChild(e.display)},e.onDestroy=function(){},e.onUpdate=function(){if(!(!e.display||!e.img)){var s=e.getCurrentSize();if(e.display.innerHTML=s.join(" &times; "),s[0]>120&&s[1]>30)Object.assign(e.display.style,{right:"4px",bottom:"4px",left:"auto"});else if(e.img.style.float=="right"){var h=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"auto",bottom:"-".concat(h.height+4,"px"),left:"-".concat(h.width+4,"px")})}else{var E=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"-".concat(E.width+4,"px"),bottom:"-".concat(E.height+4,"px"),left:"auto"})}}},e.getCurrentSize=function(){return[e.img.width,Math.round(e.img.width/e.img.naturalWidth*e.img.naturalHeight)]},e}return(0,Z.Z)(t)}(ce),Ve=i(20668),de=i.n(Ve),Qe=i(15924),Be=i.n(Qe),dt=i(43203),He=i.n(dt),We=i(76095),ve=We.imports.parchment,le=new ve.Attributor.Style("float","float"),ie=new ve.Attributor.Style("margin","margin"),fe=new ve.Attributor.Style("display","display"),Ne=function(c){(0,K.Z)(t,c);var r=(0,Y.Z)(t);function t(){var e;(0,R.Z)(this,t);for(var o=arguments.length,n=new Array(o),d=0;d<o;d++)n[d]=arguments[d];return e=r.call.apply(r,[this].concat(n)),e.onCreate=function(){e.toolbar=document.createElement("div"),Object.assign(e.toolbar.style,e.options.toolbarStyles),e.overlay.appendChild(e.toolbar),e._defineAlignments(),e._addToolbarButtons()},e.onDestroy=function(){},e.onUpdate=function(){},e._defineAlignments=function(){e.alignments=[{icon:de(),apply:function(){fe.add(e.img,"inline"),le.add(e.img,"left"),ie.add(e.img,"0 1em 1em 0")},isApplied:function(){return le.value(e.img)=="left"}},{icon:Be(),apply:function(){fe.add(e.img,"block"),le.remove(e.img),ie.add(e.img,"auto")},isApplied:function(){return ie.value(e.img)=="auto"}},{icon:He(),apply:function(){fe.add(e.img,"inline"),le.add(e.img,"right"),ie.add(e.img,"0 0 1em 1em")},isApplied:function(){return le.value(e.img)=="right"}}]},e._addToolbarButtons=function(){var s=[];e.alignments.forEach(function(h,E){var g=document.createElement("span");s.push(g),g.innerHTML=h.icon,g.addEventListener("click",function(){s.forEach(function(V){return V.style.filter=""}),h.isApplied()?(le.remove(e.img),ie.remove(e.img),fe.remove(e.img)):(e._selectButton(g),h.apply()),e.requestUpdate()}),Object.assign(g.style,e.options.toolbarButtonStyles),E>0&&(g.style.borderLeftWidth="0"),Object.assign(g.children[0].style,e.options.toolbarButtonSvgStyles),h.isApplied()&&e._selectButton(g),e.toolbar.appendChild(g)})},e._selectButton=function(s){s.style.filter="invert(20%)"},e}return(0,Z.Z)(t)}(ce),Xe=function(c){(0,K.Z)(t,c);var r=(0,Y.Z)(t);function t(){var e;(0,R.Z)(this,t);for(var o=arguments.length,n=new Array(o),d=0;d<o;d++)n[d]=arguments[d];return e=r.call.apply(r,[this].concat(n)),e.onCreate=function(){e.boxes=[],e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.positionBoxes()},e.onDestroy=function(){e.setCursor("")},e.positionBoxes=function(){var s="".concat(-parseFloat(e.options.handleStyles.width)/2,"px"),h="".concat(-parseFloat(e.options.handleStyles.height)/2,"px");[{left:s,top:h},{right:s,top:h},{right:s,bottom:h},{left:s,bottom:h}].forEach(function(E,g){Object.assign(e.boxes[g].style,E)})},e.addBox=function(s){var h=document.createElement("div");Object.assign(h.style,e.options.handleStyles),h.style.cursor=s,h.style.width="".concat(e.options.handleStyles.width,"px"),h.style.height="".concat(e.options.handleStyles.height,"px"),h.addEventListener("mousedown",e.handleMousedown,!1),e.overlay.appendChild(h),e.boxes.push(h)},e.handleMousedown=function(s){e.dragBox=s.target,e.dragStartX=s.clientX,e.preDragWidth=e.img.width||e.img.naturalWidth,e.setCursor(e.dragBox.style.cursor),document.addEventListener("mousemove",e.handleDrag,!1),document.addEventListener("mouseup",e.handleMouseup,!1)},e.handleMouseup=function(){e.setCursor(""),document.removeEventListener("mousemove",e.handleDrag),document.removeEventListener("mouseup",e.handleMouseup)},e.handleDrag=function(s){if(!!e.img){var h=s.clientX-e.dragStartX;e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]?e.img.width=Math.round(e.preDragWidth-h):e.img.width=Math.round(e.preDragWidth+h),e.requestUpdate()}},e.setCursor=function(s){[document.body,e.img].forEach(function(h){h.style.cursor=s})},e}return(0,Z.Z)(t)}(ce),De=i(76095),Ae={DisplaySize:Pe,Toolbar:Ne,Resize:Xe},ze=(0,Z.Z)(function c(r){var t=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,R.Z)(this,c),this.initializeModules=function(){t.removeModules(),t.modules=t.moduleClasses.map(function(n){return new(Ae[n]||n)(t)}),t.modules.forEach(function(n){n.onCreate()}),t.onUpdate()},this.onUpdate=function(){t.repositionElements(),t.modules.forEach(function(n){n.onUpdate()})},this.removeModules=function(){t.modules.forEach(function(n){n.onDestroy()}),t.modules=[]},this.handleClick=function(n){if(n.target&&n.target.tagName&&n.target.tagName.toUpperCase()==="IMG"){if(t.img===n.target)return;t.img&&t.hide(),t.show(n.target)}else t.img&&t.hide()},this.show=function(n){t.img=n,t.showOverlay(),t.initializeModules()},this.showOverlay=function(){t.overlay&&t.hideOverlay(),t.quill.setSelection(null),t.setUserSelect("none"),document.addEventListener("keyup",t.checkImage,!0),t.quill.root.addEventListener("input",t.checkImage,!0),t.overlay=document.createElement("div"),Object.assign(t.overlay.style,t.options.overlayStyles),t.quill.root.parentNode.appendChild(t.overlay),t.repositionElements()},this.hideOverlay=function(){!t.overlay||(t.quill.root.parentNode.removeChild(t.overlay),t.overlay=void 0,document.removeEventListener("keyup",t.checkImage),t.quill.root.removeEventListener("input",t.checkImage),t.setUserSelect(""))},this.repositionElements=function(){if(!(!t.overlay||!t.img)){var n=t.quill.root.parentNode,d=t.img.getBoundingClientRect(),s=n.getBoundingClientRect();Object.assign(t.overlay.style,{left:"".concat(d.left-s.left-1+n.scrollLeft,"px"),top:"".concat(d.top-s.top+n.scrollTop,"px"),width:"".concat(d.width,"px"),height:"".concat(d.height,"px")})}},this.hide=function(){t.hideOverlay(),t.removeModules(),t.img=void 0},this.setUserSelect=function(n){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(function(d){t.quill.root.style[d]=n,document.documentElement.style[d]=n})},this.checkImage=function(n){t.img&&((n.keyCode==46||n.keyCode==8)&&De.find(t.img).deleteAt(0),t.hide())},this.quill=r;var o=!1;e.modules&&(o=e.modules.slice()),this.options=we()({},e,Ue),o!==!1&&(this.options.modules=o),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]});De&&De.register("modules/imageResize",ze);var Ye=Q().import("blots/block"),_=function(c){(0,K.Z)(t,c);var r=(0,Y.Z)(t);function t(){return(0,R.Z)(this,t),r.apply(this,arguments)}return(0,Z.Z)(t,[{key:"deleteAt",value:function(o,n){(0,ae.Z)((0,ne.Z)(t.prototype),"deleteAt",this).call(this,o,n),this.cache={}}}],[{key:"create",value:function(o){var n=(0,ae.Z)((0,ne.Z)(t),"create",this).call(this,o);if(o===!0)return n;var d=document.createElement("img");return d.setAttribute("src",o),n.appendChild(d),n}},{key:"value",value:function(o){var n=o.dataset,d=n.src,s=n.custom;return{src:d,custom:s}}}]),t}(Ye);_.blotName="imageBlot",_.className="image-uploading",_.tagName="span",Q().register({"formats/imageBlot":_});var $e=_,he=function(){function c(r,t){(0,R.Z)(this,c),this.quill=r,this.options=t,this.range=null,typeof this.options.upload!="function"&&console.warn("[Missing config] upload function that returns a promise is required");var e=this.quill.getModule("toolbar");e.addHandler("image",this.selectLocalImage.bind(this)),this.handleDrop=this.handleDrop.bind(this),this.handlePaste=this.handlePaste.bind(this),this.quill.root.addEventListener("drop",this.handleDrop,!1),this.quill.root.addEventListener("paste",this.handlePaste,!1)}return(0,Z.Z)(c,[{key:"selectLocalImage",value:function(){var t=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=this.fileChanged.bind(this),document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){document.body.removeChild(t.fileHolder)})}},{key:"handleDrop",value:function(t){var e=this;if(t.stopPropagation(),t.preventDefault(),t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){if(document.caretRangeFromPoint){var o=document.getSelection(),n=document.caretRangeFromPoint(t.clientX,t.clientY);o&&n&&o.setBaseAndExtent(n.startContainer,n.startOffset,n.startContainer,n.startOffset)}else{var d=document.getSelection(),s=document.caretPositionFromPoint(t.clientX,t.clientY);d&&s&&d.setBaseAndExtent(s.offsetNode,s.offset,s.offsetNode,s.offset)}this.range=this.quill.getSelection();var h=t.dataTransfer.files[0];setTimeout(function(){e.range=e.quill.getSelection(),e.readAndUploadFile(h)},0)}}},{key:"handlePaste",value:function(t){var e=this,o=t.clipboardData||window.clipboardData;if(o&&(o.items||o.files))for(var n=o.items||o.files,d=/^image\/(jpe?g|gif|png|svg|webp)$/i,s=0;s<n.length;s++)d.test(n[s].type)&&function(){var h=n[s].getAsFile?n[s].getAsFile():n[s];h&&(e.range=e.quill.getSelection(),t.preventDefault(),setTimeout(function(){e.range=e.quill.getSelection(),e.readAndUploadFile(h)},0))}()}},{key:"readAndUploadFile",value:function(t){var e=this,o=!1,n=new FileReader;n.addEventListener("load",function(){if(!o){var d=n.result;e.insertBase64Image(d)}},!1),t&&n.readAsDataURL(t),this.options.upload(t).then(function(d){e.insertToEditor(d)},function(d){o=!0,e.removeBase64Image(),console.warn(d)})}},{key:"fileChanged",value:function(){var t=this.fileHolder.files[0];this.readAndUploadFile(t)}},{key:"insertBase64Image",value:function(t){var e=this.range;this.quill.insertEmbed(e.index,$e.blotName,"".concat(t),"user")}},{key:"insertToEditor",value:function(t){var e=this.range;this.quill.deleteText(e.index,3,"user"),this.quill.insertEmbed(e.index,"image","".concat(t)),e.index++,this.quill.setSelection(e,"user")}},{key:"removeBase64Image",value:function(){var t=this.range;this.quill.deleteText(t.index,3,"user")}}]),c}();window.ImageUploader=he;var Te=he,me=F.Quill.import("parchment"),Ge=F.Quill.import("ui/icons");Ge.score='<svg t="1656149207035" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2625"><path d="M905.92 237.76a32 32 0 0 0-52.48 36.48A416 416 0 1 1 96 512a418.56 418.56 0 0 1 297.28-398.72 32 32 0 1 0-18.24-61.44A480 480 0 1 0 992 512a477.12 477.12 0 0 0-86.08-274.24z" fill="#231815" p-id="2626"></path><path d="M630.72 113.28A413.76 413.76 0 0 1 768 185.28a32 32 0 0 0 39.68-50.24 476.8 476.8 0 0 0-160-83.2 32 32 0 0 0-18.24 61.44zM489.28 86.72a36.8 36.8 0 0 0 10.56 6.72 30.08 30.08 0 0 0 24.32 0 37.12 37.12 0 0 0 10.56-6.72A32 32 0 0 0 544 64a33.6 33.6 0 0 0-9.28-22.72A32 32 0 0 0 505.6 32a20.8 20.8 0 0 0-5.76 1.92 23.68 23.68 0 0 0-5.76 2.88l-4.8 3.84a32 32 0 0 0-6.72 10.56A32 32 0 0 0 480 64a32 32 0 0 0 2.56 12.16 37.12 37.12 0 0 0 6.72 10.56zM355.84 313.6a36.8 36.8 0 0 0-13.12 18.56l-107.52 312.96a37.44 37.44 0 0 0 2.56 35.52 32 32 0 0 0 24.96 10.56 27.84 27.84 0 0 0 17.28-5.76 43.84 43.84 0 0 0 10.56-13.44 100.16 100.16 0 0 0 7.04-15.36l4.8-12.8 17.6-49.92h118.72l24.96 69.76a45.76 45.76 0 0 0 10.88 19.2 28.8 28.8 0 0 0 20.48 8.32h2.24a27.52 27.52 0 0 0 27.84-15.68 41.28 41.28 0 0 0 0-29.44l-107.84-313.6a36.8 36.8 0 0 0-13.44-19.2 44.16 44.16 0 0 0-48 0.32z m24.32 96l41.6 125.44h-83.2zM594.88 544a66.56 66.56 0 0 0 25.6 4.16h62.4v78.72a29.12 29.12 0 0 0 32 32 26.24 26.24 0 0 0 27.2-16.32 73.28 73.28 0 0 0 4.16-26.24v-66.88h73.6a27.84 27.84 0 0 0 29.44-32 26.56 26.56 0 0 0-16-27.2 64 64 0 0 0-23.04-4.16h-64v-75.84a28.16 28.16 0 0 0-32-30.08 26.56 26.56 0 0 0-27.2 15.68 64 64 0 0 0-4.16 24v66.88h-62.72a69.44 69.44 0 0 0-25.6 4.16 26.56 26.56 0 0 0-15.68 27.2 25.92 25.92 0 0 0 16 25.92z" fill="#231815" p-id="2627"></path></svg>';var re=function(c){(0,K.Z)(t,c);var r=(0,Y.Z)(t);function t(){return(0,R.Z)(this,t),r.apply(this,arguments)}return(0,Z.Z)(t,null,[{key:"create",value:function(o){var n=(0,ae.Z)((0,ne.Z)(t),"create",this).call(this,o);return n.innerText=o,n.contentEditable="false",n}},{key:"value",value:function(o){return o.childNodes[0].textContent}},{key:"_addRemovalButton",value:function(o){var n=document.createElement("button");n.innerText="x",n.onclick=function(){return o.remove()},n.contentEditable="false",o.appendChild(n);var d=document.createElement("span");d.innerText=" ",o.appendChild(d)}}]),t}(me.Embed);re.blotName="score",re.tagName="SPAN",re.className="ql-label",F.Quill.register(re);var Ke=i(83279),Je=i(1997),_e=i(11628),l=i(85893),et=F.Quill.import("delta"),Le=function(){function c(r,t){(0,R.Z)(this,c),this.quill=r,this.options=t,r.on("text-change",this.update.bind(this)),this.update()}return(0,Z.Z)(c,[{key:"update",value:function(){}}]),c}();F.Quill.register("modules/scoreLogic",Le);var tt=function(r){var t=r.onCancel,e=r.editorRef,o=r.formula,n=(0,_e.IE)(),d=(0,x.useMemo)(function(){var E;return(E=e.current)===null||E===void 0?void 0:E.getSelection()},[]),s=function(g){if(d){var V;(V=e.current)===null||V===void 0||V.updateContents(new et().retain(d.index-1).delete(1).insert({"score-logic":{text:"\u81EA\u5B9A\u4E49\u63D0\u793A\u4FE1\u606F(\u70B9\u51FB\u4FEE\u6539)",formula:g}}))}};if(!n.schema)return(0,l.jsx)(l.Fragment,{});var h=n.mode==="exam"?(0,se.Z)((0,se.Z)({},n.schema),{},{children:[{type:"FillBlank",id:"score",title:"\u5206\u6570",children:[{id:"score",title:"\u5206\u6570",type:"Option",attribute:{dataType:"number"}}]}].concat((0,Ke.Z)(n.schema.children))}):n.schema;return(0,l.jsx)(Je.ZP,{title:"\u81EA\u5B9A\u4E49\u63D0\u793A\u4FE1\u606F\u8BBE\u7F6E",functionVisible:!0,schema:h,value:o,onCancel:t,onOk:function(g){s(g),t()}})},f=F.Quill.import("parchment"),u=F.Quill.import("delta"),b=F.Quill.import("ui/icons");b["score-logic"]='<svg t="1656401750965" class="icon" viewBox="0 0 1128 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5625" ><path d="M473.184 356.632c-23.048-28.336-64.616-32.632-92.816-9.672-28.248 23.048-32.568 64.528-9.616 92.84l473.328 547.152c22.928 28.248 64.376 32.488 92.776 9.552 28.224-22.992 32.512-64.528 9.528-92.752l-473.2-547.12z" fill="#0092D2" p-id="5626"></path><path d="M151.4 65.976l-1.056-0.472 54.912 223.104L52.68 460.32l229.128 16.664 116.12 198.2 56.8-139.376 389.6 450.344c22.224 27.4 61.792 31.984 90.072 11.32L151.4 65.976z" fill="#0085BF" p-id="5627"></path><path d="M150.104 66.304L360.56 158.4 555.752 37.224l-22.52 228.6L708.8 414.016l-224.416 49.24-86.664 212.728-116.152-198.2-229.12-16.672 152.6-171.712z" fill="#F5B146" p-id="5628"></path><path d="M276.192 225.08l95.368 41.712 88.424-54.888-10.2 103.576 79.568 67.144-101.704 22.312-39.28 96.368-52.616-89.816-103.808-7.52 69.144-77.816z" fill="#E5226B" p-id="5629"></path><path d="M484.384 463.256l0.528-0.112L152.072 67.152l-1.208-0.528 54.856 222.92-152.48 171.624 228.328 16.616 0.064 0.08 0.648 0.064 115.68 197.464z" fill="#EF962F" p-id="5630"></path><path d="M434.56 403.408L289.6 230.928l-13.408-5.848 24.896 101.072-69.144 77.816 103.808 7.52 52.616 89.816 39.28-96.368z" fill="#C9005B" p-id="5631"></path></svg>';var p=function(c){(0,K.Z)(t,c);var r=(0,Y.Z)(t);function t(){return(0,R.Z)(this,t),r.apply(this,arguments)}return(0,Z.Z)(t,null,[{key:"create",value:function(o){var n=(0,ae.Z)((0,ne.Z)(t),"create",this).call(this,o);return n.innerText=o.text,n.dataset.formula=o.formula,n.contentEditable="false",this._addClickEvent(n),n}},{key:"value",value:function(o){return{text:o.childNodes[0].textContent,formula:o.dataset.formula}}},{key:"_addClickEvent",value:function(o){o.onclick=function(){var n=o.closest(".custom-quill-editor");if(n){var d=F.Quill.find(n.querySelector(".quill-editor")),s=d.getModule("scoreLogic");s.options.openModal(o.dataset.formula)}}}}]),t}(f.Embed);p.blotName="score-logic",p.tagName="SPAN",p.className="ql-score-logic",F.Quill.register(p);var q=i(40807),y=i(3980),A=["onChange","onClose","value","toolbar"];Q().register("modules/imageResize",ze),Q().register("modules/imageUploader",Te);var z=Q().import("delta"),C=Q().import("attributors/style/size");C.whitelist=["9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","36px"],Q().register(C,!0);var I=function(r){var t=r.toolbar,e=(0,x.useRef)(null),o=(0,x.useRef)(),n=(0,x.useRef)(),d=(0,x.useState)(),s=(0,ue.Z)(d,2),h=s[0],E=s[1],g=(0,_e.IE)(),V=(0,x.useMemo)(function(){return"quill-".concat((0,q.kb)())},[]);return(0,x.useEffect)(function(){return e.current&&(o.current=new(Q())(e.current,{theme:"snow",formats:["size","color","width","background","header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","formula","align","imageBlot","code-block","score","score-logic"],modules:{syntax:{highlight:function(D){return Fe.Z.highlightAuto(D).value}},counter:{container:"#counter",unit:"word"},imageResize:{parchment:Q().import("parchment"),modules:["Resize","DisplaySize"]},imageUploader:{upload:function(D){return new Promise(function(N,M){y.hi.uploadImage(3,D).then(function(G){G.success&&N("/api/public/preview/".concat(G.data.id))}).catch(function(G){M("Upload failed"),console.error("Error:",G)})})}},scoreLogic:{openModal:function(D){E({visible:!0,formula:D})}},toolbar:{container:"#".concat(V),handlers:{score:function(D){var N=o.current;if(N){var M=N.getSelection(!0);N.insertEmbed(M.index,"score","\u5206\u6570"),N.setSelection(M.index+1,1)}},"score-logic":function(D){var N=o.current;if(N){var M=N.getSelection(!0);N.insertEmbed(M.index,"score-logic",{text:"\u81EA\u5B9A\u4E49\u63D0\u793A\u4FE1\u606F(\u70B9\u51FB\u8BBE\u7F6E)",formula:g.mode==="exam"?"#{score}":""}),N.setSelection(M.index+1,1)}}}}}}),o.current.on("text-change",function(T,D,N){var M,G=(M=o.current)===null||M===void 0?void 0:M.root.innerHTML;G!==n.current&&r.onChange&&(r.onChange(G||""),n.current=G)})),function(){}},[]),(0,x.useEffect)(function(){var T,D=n.current,N=(T=r.value)!==null&&T!==void 0?T:"";if(N!==D){var M;n.current=N,(M=o.current)===null||M===void 0||M.setContents(o.current.clipboard.convert(N))}},[r.value]),(0,l.jsxs)("div",{className:"custom-quill-editor",children:[(0,l.jsxs)("div",{id:V,className:"ql-formats",children:[(0,l.jsx)(v.Z,{title:"\u5B57\u53F7",children:(0,l.jsxs)("select",{className:"ql-size",children:[(0,l.jsx)("option",{value:"12px",children:"12px"}),(0,l.jsx)("option",{value:"14px",children:"14px"}),(0,l.jsx)("option",{value:"16px",children:"16px"}),(0,l.jsx)("option",{value:"18px",children:"18px"}),(0,l.jsx)("option",{value:"20px",children:"20px"}),(0,l.jsx)("option",{value:"22px",children:"22px"}),(0,l.jsx)("option",{value:"24px",children:"24px"}),(0,l.jsx)("option",{value:"36px",children:"36px"})]})}),(0,l.jsx)(v.Z,{title:"\u5B57\u4F53\u989C\u8272",children:(0,l.jsx)("select",{className:"ql-color"})}),(0,l.jsx)(v.Z,{title:"\u80CC\u666F\u8272",children:(0,l.jsx)("select",{className:"ql-background"})}),(0,l.jsx)(v.Z,{title:"\u52A0\u7C97",children:(0,l.jsx)("button",{className:"ql-bold"})}),(0,l.jsx)(v.Z,{title:"\u659C\u4F53",children:(0,l.jsx)("button",{className:"ql-italic"})}),(0,l.jsx)(v.Z,{title:"\u4E0B\u5212\u7EBF",children:(0,l.jsx)("button",{className:"ql-underline"})}),(0,l.jsx)(v.Z,{title:"\u5220\u9664\u7EBF",children:(0,l.jsx)("button",{className:"ql-strike"})}),(0,l.jsx)(v.Z,{title:"\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align"})}),(0,l.jsx)(v.Z,{title:"\u5C45\u4E2D\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align",value:"center"})}),(0,l.jsx)(v.Z,{title:"\u53F3\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align",value:"right"})}),(0,l.jsx)(v.Z,{title:"\u4E24\u7AEF\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align",value:"justify"})}),(0,l.jsx)(v.Z,{title:"\u94FE\u63A5",children:(0,l.jsx)("button",{className:"ql-link"})}),(0,l.jsx)(v.Z,{title:"\u56FE\u7247",children:(0,l.jsx)("button",{className:"ql-image"})}),(0,l.jsx)(v.Z,{title:"\u89C6\u9891",children:(0,l.jsx)("button",{className:"ql-video"})}),(0,l.jsx)(v.Z,{title:"\u4EE3\u7801\u5757",children:(0,l.jsx)("button",{className:"ql-code-block"})}),(0,l.jsx)(v.Z,{title:"\u516C\u5F0F",children:(0,l.jsx)("button",{className:"ql-formula"})}),(0,l.jsx)(v.Z,{title:"\u6709\u5E8F\u5217\u8868",children:(0,l.jsx)("button",{className:"ql-list",value:"ordered"})}),(0,l.jsx)(v.Z,{title:"\u65E0\u5E8F\u5217\u8868",children:(0,l.jsx)("button",{className:"ql-list",value:"bullet"})}),(0,l.jsx)(v.Z,{title:"\u5DE6\u7F29\u8FDB",children:(0,l.jsx)("button",{className:"ql-indent",value:"-1"})}),(0,l.jsx)(v.Z,{title:"\u53F3\u7F29\u8FDB",children:(0,l.jsx)("button",{className:"ql-indent",value:"+1"})}),(0,l.jsx)(v.Z,{title:"\u6E05\u9664\u6837\u5F0F",children:(0,l.jsx)("button",{className:"ql-clean"})}),(t==null?void 0:t.includes("score"))&&(0,l.jsx)(v.Z,{title:"\u63D2\u5165\u5206\u6570",children:(0,l.jsx)("button",{className:"ql-score"})}),(t==null?void 0:t.includes("scoreLogic"))&&(0,l.jsx)(v.Z,{title:"\u6839\u636E\u7B54\u6848\u8BBE\u7F6E\u63D0\u793A\u4FE1\u606F",children:(0,l.jsx)("button",{className:"ql-score-logic"})})]}),(0,l.jsx)("pre",{ref:e,className:"quill-editor"}),(h==null?void 0:h.visible)&&(0,l.jsx)(tt,{formula:h.formula,onCancel:function(){return E(void 0)},editorRef:o})]})},H=function(r){var t=r.onChange,e=r.onClose,o=r.value,n=r.toolbar,d=n===void 0?[]:n,s=(0,Se.Z)(r,A),h=(0,x.useState)(o),E=(0,ue.Z)(h,2),g=E[0],V=E[1];return(0,l.jsx)(Me.Z,(0,se.Z)((0,se.Z)({open:!0,onCancel:e,footer:!1,maskClosable:!1,closable:!1,width:650},s),{},{children:(0,l.jsxs)("div",{children:[(0,l.jsx)(I,{value:g,toolbar:d,onChange:function(D){V(D)}}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,l.jsxs)("div",{children:["\u590D\u5236\u683C\u5F0F",(0,l.jsx)(ut.Z,{checkedChildren:"\u6253\u5F00",unCheckedChildren:"\u5173\u95ED",onChange:function(D){localStorage.setItem("rich_copy_enable","".concat(D))},style:{marginLeft:5},defaultChecked:localStorage.getItem("rich_copy_enable")==="true"})]}),(0,l.jsxs)(Oe.Z,{children:[(0,l.jsx)(ke.Z,{onClick:e,children:"\u53D6\u6D88"}),(0,l.jsx)(ke.Z,{type:"primary",onClick:function(){return t(g)},children:"\u4FDD\u5B58"})]})]})]})}))},$=i(8166),w=F.Quill.import("themes/bubble"),ee=function(c){(0,K.Z)(t,c);var r=(0,Y.Z)(t);function t(e,o){var n;return(0,R.Z)(this,t),n=r.call(this,e,o),e.on("selection-change",function(d){if(d){var s;e.theme.tooltip.show(),(s=e.theme.tooltip)===null||s===void 0||s.position((0,se.Z)({},e.getBounds(d)))}}),e.on("text-change",function(d){e.hasFocus()&&e.theme.tooltip.show()}),n}return(0,Z.Z)(t)}(w);F.Quill.register("themes/bubble",ee);var te=Q().import("modules/clipboard"),U=Q().import("delta"),k=function(c){(0,K.Z)(t,c);var r=(0,Y.Z)(t);function t(){return(0,R.Z)(this,t),r.apply(this,arguments)}return(0,Z.Z)(t,[{key:"onPaste",value:function(o){var n=o.clipboardData||window.clipboardData;if(n&&(n.items||n.files)){for(var d=n.items||n.files,s=/^image\/(jpe?g|gif|png|svg|webp)$/i,h=0;h<d.length;h++)if(s.test(d[h].type))return}if(localStorage.getItem("rich_copy_enable")==="true"){(0,ae.Z)((0,ne.Z)(t.prototype),"onPaste",this).call(this,o);return}o.preventDefault();var E=this.quill.getSelection(),g=o.clipboardData.getData("text/plain"),V=new U().retain(E.index).delete(E.length).insert(g),T=g.length+E.index,D=0;this.quill.updateContents(V,"silent"),this.quill.setSelection(T,D,"silent"),this.quill.scrollIntoView()}}]),t}(te),B=k,j,W=F.Quill.import("blots/embed");window.katex=$.Z;var m=F.Quill.import("attributors/style/size");m.whitelist=["9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","36px"],F.Quill.register(m,!0),F.Quill.register("modules/clipboard",B,!0);var O=F.Quill.import("delta"),S=function(c){(0,K.Z)(t,c);var r=(0,Y.Z)(t);function t(){return(0,R.Z)(this,t),r.apply(this,arguments)}return(0,Z.Z)(t,null,[{key:"create",value:function(o){var n=(0,ae.Z)((0,ne.Z)(t),"create",this).call(this);return n.setAttribute("contenteditable","true"),n.classList.add("myspan"),this._addRemovalButton(n),n}},{key:"_addRemovalButton",value:function(o){var n=document.createElement("span");n.innerText="___",n.contentEditable="true",o.appendChild(n)}},{key:"value",value:function(o){return o.childNodes[1].textContent}}]),t}(W);S.blotName="spanEmbed",S.tagName="span",S.className="myclass",F.Quill.register(S);var ge=at.ZP.div(j||(j=(0,oe.Z)([`
  box-sizing: border-box;
  margin: 0;
  font-variant: tabular-nums;
  list-style: none;
  font-feature-settings: 'tnum';
  width: 100%;
  padding: `,`;
  color: rgba(0, 0, 0, 0.65);

  border: `,`;
  transition: all 0.3s;

  &.is-focus {
    border: `,`;
    border-right-width: 1px !important;
    outline: 0;
  }
  &.not-focus:hover {
    border: dashed 1px #aaaaaa !important;
    border-right-width: 1px !important;
  }

  .ql-editor {
    padding: 0;
    font-size: `,`;
    text-align: `,`;
  }

  .ql-tooltip {
    top: -40px !important;
    left: -10px !important;
    width: 240px;
    transform: none;
  }

  .ql-formats > span,
  .ql-formats > button {
    &:hover {
      background-color: hsla(0, 0%, 84.7%, 0.3);
    }
  }

  .ql-bubble .ql-tooltip {
    z-index: 999;
    box-sizing: border-box;
    padding: 0 2px;
    text-align: left;
    /* white-space: nowrap; */
    background-color: #fff;
    /* border: 1px solid #eaeaea; */
    /* border-radius: 2px; rgb(0 0 0 / 20%); */
    border-radius: 2px;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 20%);
    cursor: pointer;
  }

  .ql-bubble .ql-tooltip.ql-flip .ql-tooltip-arrow {
    display: none;
  }

  .ql-tooltip-arrow {
    display: none;
  }

  pre.ql-container {
    overflow: visible;
  }
  .ql-toolbar {
    box-sizing: border-box;
    font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
    /* border: 1px solid #ccc; */
  }

  .ql-bubble .ql-picker {
    position: relative;
    display: inline-block;
    float: left;
    height: 24px;
    color: #444;
    font-weight: 500;
    font-size: 14px;
    vertical-align: middle;
  }

  .ql-bubble .ql-stroke {
    fill: none;
    stroke: #444;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-width: 2;
  }

  .ql-bubble.ql-toolbar button:hover .ql-stroke,
  .ql-bubble .ql-toolbar button:hover .ql-stroke,
  .ql-bubble.ql-toolbar button:focus .ql-stroke,
  .ql-bubble .ql-toolbar button:focus .ql-stroke,
  .ql-bubble.ql-toolbar button.ql-active .ql-stroke,
  .ql-bubble .ql-toolbar button.ql-active .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-bubble.ql-toolbar button:hover .ql-stroke-miter,
  .ql-bubble .ql-toolbar button:hover .ql-stroke-miter,
  .ql-bubble.ql-toolbar button:focus .ql-stroke-miter,
  .ql-bubble .ql-toolbar button:focus .ql-stroke-miter,
  .ql-bubble.ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-bubble .ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {
    stroke: #2196f3;
  }

  .ql-bubble.ql-toolbar button:hover,
  .ql-bubble .ql-toolbar button:hover,
  .ql-bubble.ql-toolbar button:focus,
  .ql-bubble .ql-toolbar button:focus,
  .ql-bubble.ql-toolbar button.ql-active,
  .ql-bubble .ql-toolbar button.ql-active,
  .ql-bubble.ql-toolbar .ql-picker-label:hover,
  .ql-bubble .ql-toolbar .ql-picker-label:hover,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active,
  .ql-bubble.ql-toolbar .ql-picker-item:hover,
  .ql-bubble .ql-toolbar .ql-picker-item:hover,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected {
    color: #2196f3;
  }

  .ql-toolbar.ql-bubble .ql-picker.ql-expanded .ql-picker-options {
    border-color: #ccc;
  }
  .ql-bubble .ql-picker.ql-expanded .ql-picker-options {
    top: 100%;
    z-index: 1;
    display: block;
    margin-top: -1px;
    border: 1px solid #cccccc;
  }
  .ql-toolbar.ql-bubble .ql-picker-options {
    border: 1px solid transparent;
    box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;
  }
  .ql-bubble .ql-picker-options {
    position: absolute;
    display: none;
    min-width: 100%;
    height: 200px;
    padding: 4px 2px;
    overflow-y: auto;
    white-space: nowrap;
    background-color: #fff;
  }

  .ql-bubble .ql-tooltip:not(.ql-flip) .ql-tooltip-arrow {
    top: -6px;
    border-bottom: 6px solid #fff;
  }

  .ql-formats {
    margin: 3px 6px 3px 0px;
  }

  .ql-bubble .ql-toolbar .ql-formats:first-child {
    margin-left: 1px;
  }

  .ql-bubble.ql-toolbar button:hover .ql-fill,
  .ql-bubble .ql-toolbar button:hover .ql-fill,
  .ql-bubble.ql-toolbar button:focus .ql-fill,
  .ql-bubble .ql-toolbar button:focus .ql-fill,
  .ql-bubble.ql-toolbar button.ql-active .ql-fill,
  .ql-bubble .ql-toolbar button.ql-active .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-bubble.ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {
    fill: #2196f3;
  }
  .ql-bubble .ql-picker.ql-size {
    width: 60px;
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='9px']::before {
    font-size: 9px !important;
    content: '9';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='10px']::before {
    font-size: 10px !important;
    content: '10';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='11px']::before {
    font-size: 11px !important;
    content: '11';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='12px']::before {
    font-size: 12px !important;
    content: '12';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='14px']::before {
    font-size: 14px !important;
    content: '14';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='16px']::before {
    font-size: 16px !important;
    content: '16';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='18px']::before {
    font-size: 18px !important;
    content: '18';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='20px']::before {
    font-size: 20px !important;
    content: '20';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='22px']::before {
    font-size: 22px !important;
    content: '22';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='24px']::before {
    font-size: 24px !important;
    content: '24';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='26px']::before {
    font-size: 26px !important;
    content: '26';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='36px']::before {
    font-size: 36px !important;
    content: '36';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-label::before,
  .ql-bubble .ql-picker.ql-size .ql-picker-item::before {
    font-size: 14px !important;
    content: '14px';
  }

  .myclass {
    border: 1px solid transparent;
    cursor: pointer;
    :hover {
      border: 1px solid #58a6e7;
    }
  }
`])),function(c){return c.size==="middle"?"6px 11px 4px 11px":c.size==="small"?"2px 2px 0px 5px":"14px 11px"},function(c){return c.hasError?"1px solid #ff4d4f":"1px solid transparent"},function(c){return c.hasError?"1px solid #ff4d4f !important":"1px solid #1890ff !important"},function(c){return c.innerStyle&&c.innerStyle.fontSize},function(c){return c.innerStyle&&c.innerStyle.textAlign});function xe(c){return typeof c=="symbol"?"":c&&c.startsWith("<p")?c:"<p>".concat(c,"</p>")}var pe=F.Quill.import("ui/icons");pe.tags='<svg style="width:18px;height:18px;"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="512" height="512"><path d="M851.968 167.936l0 109.568-281.6 0 0 587.776-116.736 0 0-587.776-281.6 0 0-109.568 679.936 0z" p-id="3840"></path></svg>';var X=function(r){var t=r.onChange,e=r.value,o=e===void 0?"":e,n=r.placeholder,d=r.style,s=r.className,h=r.bounds,E=r.excludeToolbars,g=E===void 0?[]:E,V=(0,x.useState)(!1),T=(0,ue.Z)(V,2),D=T[0],N=T[1],M=(0,x.useState)(!1),G=(0,ue.Z)(M,2),vt=G[0],nt=G[1],qe=(0,x.useRef)(),ft=(0,x.useMemo)(function(){return"quill-".concat((0,q.kb)())},[]),ht=function(L){var ye=L.replace(/^<p>/,"").replace(/<\/p>$/,"");if(ye==="<br>"){t("");return}ye.includes("<p>")?t(L):t(ye)};function mt(){nt(!0)}return(0,x.useEffect)(function(){var J;setTimeout(function(){return N(!1)},50),(J=qe.current)===null||J===void 0||J.editor.getModule("toolbar").container.addEventListener("mousedown",function(L){L.preventDefault()})},[]),(0,l.jsxs)(ge,{style:d,className:Ee()(s,{"is-focus":D,"not-focus":!D}),innerStyle:r.innerStyle,size:r.size,children:[vt&&(0,l.jsx)(H,{onClose:function(){return nt(!1)},value:o,onChange:function(L){L&&ht(L),nt(!1)}}),(0,l.jsxs)("div",{id:ft,className:"ql-formats",children:[!g.includes("tags")&&(0,l.jsx)(v.Z,{title:"\u9AD8\u7EA7\u7F16\u8F91",children:(0,l.jsx)("button",{className:"ql-tags"})}),!g.includes("size")&&(0,l.jsx)(v.Z,{title:"\u5B57\u53F7",children:(0,l.jsxs)("select",{className:"ql-size",children:[(0,l.jsx)("option",{value:"12px",children:"12px"}),(0,l.jsx)("option",{value:"14px",children:"14px"}),(0,l.jsx)("option",{value:"16px",children:"16px"}),(0,l.jsx)("option",{value:"18px",children:"18px"}),(0,l.jsx)("option",{value:"20px",children:"20px"}),(0,l.jsx)("option",{value:"22px",children:"22px"}),(0,l.jsx)("option",{value:"24px",children:"24px"}),(0,l.jsx)("option",{value:"36px",children:"36px"})]})}),!g.includes("color")&&(0,l.jsx)(v.Z,{title:"\u5B57\u4F53\u989C\u8272",children:(0,l.jsx)("select",{className:"ql-color"})}),!g.includes("background")&&(0,l.jsx)(v.Z,{title:"\u80CC\u666F\u8272",children:(0,l.jsx)("select",{className:"ql-background"})}),!g.includes("bold")&&(0,l.jsx)(v.Z,{title:"\u52A0\u7C97",children:(0,l.jsx)("button",{className:"ql-bold"})}),!g.includes("italic")&&(0,l.jsx)(v.Z,{title:"\u659C\u4F53",children:(0,l.jsx)("button",{className:"ql-italic"})}),!g.includes("clean")&&(0,l.jsx)(v.Z,{title:"\u6E05\u9664\u6837\u5F0F",children:(0,l.jsx)("button",{className:"ql-clean"})})]}),(0,l.jsx)(Re(),{theme:"bubble",value:xe(o),ref:qe,preserveWhitespace:!0,onChange:ht,onChangeSelection:function(L,ye,pt){r.onChangeSelection&&L&&L.index&&r.onChangeSelection(L.index,pt.getText())},style:{textAlign:"center"},bounds:h,onFocus:function(){if(qe.current.editor.theme.tooltip.show(),o.startsWith("\u9009\u9879")||o.startsWith("\u586B\u7A7A")||o.startsWith("\u8BF7\u8F93\u5165\u9898\u5E72\u8BF4\u660E")||["\u8BF7\u8F93\u5165\u6807\u9898","\u5355\u9009\u9898","\u591A\u9009\u9898","\u4E0B\u62C9\u9898","\u7EA7\u8054\u9898","\u4E0A\u4F20\u6587\u4EF6","\u5355\u884C\u6587\u672C\u9898","\u591A\u884C\u6587\u672C\u9898","\u591A\u9879\u586B\u7A7A","\u7535\u5B50\u7B7E\u540D","\u6A2A\u5411\u586B\u7A7A","\u626B\u7801\u9898","\u6253\u5206\u9898","NPS\u9898","\u77E9\u9635\u586B\u7A7A","\u77E9\u9635\u5355\u9009","\u77E9\u9635\u591A\u9009","\u8868\u683C\u81EA\u589E","\u95EE\u9898\u7EC4","\u6587\u5B57\u63CF\u8FF0","\u5206\u9875","\u5206\u5272\u7EBF","\u6210\u5458","\u90E8\u95E8","\u5BCC\u6587\u672C"].includes(o)){var L;(L=qe.current)===null||L===void 0||L.editor.setSelection(0,9999,"silent")}N(!0)},scrollingContainer:"body",className:s,onBlur:function(L,ye,pt){var lt;N(!1),(lt=qe.current)===null||lt===void 0||lt.editor.theme.tooltip.hide()},placeholder:n,formats:["size","color","width","background","header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","formula","align","imageBlot","code-block"],modules:(0,x.useMemo)(function(){return{toolbar:{container:"#".concat(ft),handlers:{tags:mt}},clipboard:{matchVisual:!1},syntax:{highlight:function(L){return Fe.Z.highlightAuto(L).value}}}},[])})]})},P=X},11628:function(it,be,i){"use strict";i.d(be,{xI:function(){return v},Ge:function(){return R},IE:function(){return oe}});var Ce=i(67294),v=(0,Ce.createContext)({}),ue=v.Provider;function oe(){var Z=(0,Ce.useContext)(v);return Z.store}function R(){var Z=oe();return Z.flowStore}}}]);
