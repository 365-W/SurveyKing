(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9,19],{"/mkp":function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s}));var n=r("q1tI"),a=r.n(n),c=a.a.createContext({}),i=a.a.createContext({}),s=a.a.createContext({})},"/zIJ":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return isVoid})),__webpack_require__.d(__webpack_exports__,"c",(function(){return filterSchema})),__webpack_require__.d(__webpack_exports__,"h",(function(){return parseOptionTypes})),__webpack_require__.d(__webpack_exports__,"i",(function(){return parsePagination})),__webpack_require__.d(__webpack_exports__,"f",(function(){return groupByPagination})),__webpack_require__.d(__webpack_exports__,"j",(function(){return parseQuestionVariable})),__webpack_require__.d(__webpack_exports__,"k",(function(){return parseVariableValue})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getQuestionExpress})),__webpack_require__.d(__webpack_exports__,"b",(function(){return cleanValue})),__webpack_require__.d(__webpack_exports__,"a",(function(){return checkIsMobile})),__webpack_require__.d(__webpack_exports__,"d",(function(){return formulaParse}));var _Users_huangrupeng_Code_github_com_javahuang_survey_survey_portal_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("tJVT"),_Users_huangrupeng_Code_github_com_javahuang_survey_survey_portal_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("k1fw"),_formulajs_formulajs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("yxTw"),_formulajs_formulajs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_formulajs_formulajs__WEBPACK_IMPORTED_MODULE_2__),computeFunction={getAgeFromIdNum:e=>{var t=computeFunction.getBirthdayFromIdNum(e),r=new Date(t),n=new Date,a=n.getFullYear()-r.getFullYear();return(n.getMonth()<r.getMonth()||n.getMonth()==r.getMonth()&&n.getDate()<r.getDate())&&a--,a},getBirthdayFromIdNum:e=>{var t=(e+"").length,r="";if(18===t&&(r=e.substr(6,4)+"/"+e.substr(10,2)+"/"+e.substr(12,2)),15===t){var n="";n=e.charAt(6)+e.charAt(7),r=parseInt(n)<10?"20"+e.substr(6,2)+"/"+e.substr(8,2)+"/"+e.substr(10,2):"19"+e.substr(6,2)+"/"+e.substr(8,2)+"/"+e.substr(10,2)}return r}},groupFieldsByName=e=>{var t={};return e.forEach((e=>{var r=e.name;t[r]||(t[r]=[]),t[r].push(e)})),t};function findOptionInExpression(e){return[...new Set(e.match(/(\w+\.\w+\.\w+)/g))].map((e=>{var t=e.startsWith("_"),r=e.substring(0,e.lastIndexOf("."));t&&(r=r.substring(1));var n=e.substring(e.lastIndexOf(".")+1);return{source:e,isFillBlank:t,name:r,optionId:n}}))}function computeExpress(form,express){var fn=computeFunction,expr=express;findOptionInExpression(express).forEach((e=>{var t=e.name,r=e.isFillBlank,n=e.optionId,a=e.source,c=form.query(t).get("value"),i=c&&c[n],s=i;void 0!==i?r||(s="true"):s=r?"undefined":"false",expr=expr.replaceAll(a,s)}));try{return eval(expr)}catch(err){}}function isValid(e){return void 0!==e&&null!==e&&(("number"!==typeof e||"NaN"!==e.toString())&&(("number"!==typeof e||"Infinity"!==e.toString())&&("string"!==typeof e||""!==e.trim())))}function isVoid(e){var t=["SplitLine","Pagination","Remark"];return t.includes(e)}function isDataNode(e){var t=["FillBlank","MultipleBlank","Single","Multi","Select","Cascader","MatrixAuto","MatrixSingle","MatrixMulti","MatrixFillBlank","MatrixScore"];return t.includes(e)}function filterSchema(e){var t,r=(null===(t=e.children)||void 0===t?void 0:t.filter((e=>"Pagination"!==e.type)))||[],n=Object(_Users_huangrupeng_Code_github_com_javahuang_survey_survey_portal_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(_Users_huangrupeng_Code_github_com_javahuang_survey_survey_portal_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__["a"])({},e),{},{children:r});return n}function parseOptionTypes(e){var t,r={};return null===(t=e.children)||void 0===t||t.forEach((e=>{if("QuestionSet"===e.type)e.children&&Object.assign(r,parseOptionTypes(e));else{var t,n=["FillBlank","MultipleBlank","MatrixFillBlank"],a="boolean";n.includes(e.type)&&(a="number"),r[e.id]=a,null===(t=e.children)||void 0===t||t.forEach((e=>{r[e.id]=a}))}})),r}function parsePagination(e){var t,r=(null===(t=e.children)||void 0===t?void 0:t.filter((e=>"Pagination"===e.type)))||[];return{current:1,pageSize:r.length||1,paginationNodes:r}}function groupByPagination(e){var t,r,n=[],a=null===(t=e.children)||void 0===t?void 0:t.find((e=>"Pagination"===e.type));if(!a)return e.children?[e.children]:[];var c=[];return null===(r=e.children)||void 0===r||r.forEach((e=>{"Pagination"===e.type?(c=[],n.push(c)):c.push(e)})),n}function parseExpression(e){var t={},r=0;while(r<e.length){var n=e[r],a=e[r+1];if("#"===n&&"{"===a){r++;var c="#",i="",s=!1;while("}"!==n)n=e[r],c+=n,r++,"."===n||s||"{"===n||"}"===n?"."===n&&(s=!0):i+=n;var o=t[i];o||(o=new Set,t[i]=o),o.add(c)}else r++}return t}function parseQuestionVariable(e){return e.substring(2,e.length-1).split(".")}function parseVariableValue(e,t,r){var n=r.substring(2,r.length-1).split("."),a=Object(_Users_huangrupeng_Code_github_com_javahuang_survey_survey_portal_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["a"])(n,2),c=a[0],i=a[1];return c&&!i?!(!t||"boolean"!==e[c])||(t?Object.values(t)[0]:""):c&&i?"boolean"===e[i]?!(!t||void 0===t[i]):t[i]:void 0}function getQuestionExpress(e,t){var r,n={};return null===(r=e.children)||void 0===r||r.forEach((e=>{var r=e.attribute&&e.attribute[t];r&&(n[e.id]=r)})),n}var ENVS={compile(e,t){var r=Object.keys(t||{}),n=r.map((e=>t[e]));return new Function(...r,"return (".concat(e,");"))(...n)}};function parseAttribute(e,t){var r,n,a={};isDataNode(e.type)?null===(r=e.children)||void 0===r||r.forEach((r=>{var n=r.attribute&&r.attribute[t];n&&(a[e.id]||(a[e.id]={}),a[e.id][r.id]=n)})):null===(n=e.children)||void 0===n||n.forEach((e=>{Object.assign(a,parseAttribute(e,t))}));return a}function cleanValue(e,t){var r;if(t&&null!==(r=t.attribute)&&void 0!==r&&r.numericScale){var n=Math.round(e*Math.pow(10,t.attribute.numericScale))/Math.pow(10,t.attribute.numericScale);return isValid(n)?n:void 0}if(isValid(e))return Number.isNaN(e)?e:Math.round(1e3*e)/1e3}function checkIsMobile(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}var formulaKeys=Object.keys(_formulajs_formulajs__WEBPACK_IMPORTED_MODULE_2___default.a);function formulaParse(e,t){var r=0,n=[],a=!0;while(r<e.length){var c=e[r],i=e[r+1];if("#"===c&&"{"===i){var s="";while("}"!==c)s+=c,r++,c=e[r];s+="}",r++;var o=t(s);if(!isValid(o)){a=!1;break}n.push(o)}else n.push(c),r++}if(!a)return{success:!0,result:void 0};try{var u=ENVS.compile(n.join(""),{});return{success:!0,result:u}}catch(l){return{success:!1}}}formulaKeys.forEach((e=>{window[e]=_formulajs_formulajs__WEBPACK_IMPORTED_MODULE_2___default.a[e]}))},"4FsO":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));var n={components:{},decorators:{}},a="antd";function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;n.components[r]||(n.components[r]={}),n.components[r][e]=t}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;n.decorators[r]||(n.decorators[r]={}),n.decorators[r][e]=t}function s(e,t){return n.components[e][t]}function o(e,t){return n.decorators[e][t]}},"6qww":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("q1tI"),a=r("hF6A");function c(){var e=Object(n["useContext"])(a["a"]);return e.auth}},"770a":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return b}));var n=r("q1tI"),a=Object(n["createContext"])({}),c=a.Provider,i=(r("miYZ"),r("tsqr")),s=r("9og8"),o=r("WmNS"),u=r.n(o);r("bZMm");function l(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n].trim();if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}function d(e,t,r){return p.apply(this,arguments)}function p(){return p=Object(s["a"])(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={method:t.toUpperCase(),credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache","X-XSRF-TOKEN":l("XSRF-TOKEN"),Expires:"-1",Pragma:"no-cache"},body:n},n&&(a.body=JSON.stringify(n)),e.next=4,fetch(r,a).then((e=>e.json())).then((e=>(200!==e.code&&i["default"].error(e.message),e)));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var b={put(e,t){return Object(s["a"])(u.a.mark((function r(){return u.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d("PUT",e,t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},delete(e){return Object(s["a"])(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d("DELETE",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},post(e,t){return Object(s["a"])(u.a.mark((function r(){return u.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d("POST",e,t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},patch(e,t){return Object(s["a"])(u.a.mark((function r(){return u.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d("PATCH",e,t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},get(e){return Object(s["a"])(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d("GET",e).then((e=>{if(200===e.code)return e.data}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getWithPagination(e,t){var r=this;return Object(s["a"])(u.a.mark((function n(){return u.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",r.get(h(e,t)).then((e=>{if(e)return{records:e.records,pagination:{current:e.current,pageSize:e.size,total:e.total}}})));case 1:case"end":return n.stop()}}),n)})))()},loadSchema(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.get("/api/projects/".concat(e,"?fields=").concat(r.join(",")))},loadData(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return this.getWithPagination("/api/answers?shortId=".concat(e,"&fields=").concat(n.join(",")),t)},saveAnswer(e){return this.post("/api/answers",e)},updateAnswer(e){return this.patch("/api/answers",e)},deleteAnswer(e){return this.delete("/api/answers?ids=".concat(e.join(",")))},saveSurvey(e){return this.post("/api/projects",{survey:e})},updateSurvey(e,t){return this.patch("/api/projects",{survey:t,shortId:e})}};function h(e,t){var r=[];return Object.keys(t).forEach((e=>{var n=t[e];r.push("".concat(e,"=").concat(n instanceof Array?n.join(","):n))})),-1!==e.indexOf("?")?"".concat(e,"&").concat(r.join("&")):"".concat(e,"?").concat(r.join("&"))}},DVlV:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return d}));var n=r("9og8"),a=r("WmNS"),c=r.n(a),i=r("nzmB"),s=r("hF6A");class o{constructor(e){this.records=[],this.selected=void 0,this.currentIndex=-1,this.projectStore=void 0,this.loading=void 0,this.reportData=void 0,this.pagination={current:1,pageSize:20,total:0},this.projectStore=e,this.makeObservable()}makeObservable(){Object(i["e"])(this,{loading:i["g"].ref,pagination:i["g"].ref,records:i["g"].ref,selected:i["g"].ref,currentIndex:i["g"].ref,reportData:i["g"].ref,shortId:i["g"].computed,loadData:i["b"],loadReportData:i["b"]})}get shortId(){return this.projectStore.shortId}loadData(e){var t=this;return Object(n["a"])(c.a.mark((function r(){var n;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,s["b"].loadData(t.shortId,e||t.pagination);case 2:n=r.sent,n&&(t.pagination=n.pagination,t.records=n.records);case 4:case"end":return r.stop()}}),r)})))()}saveData(e){var t=this;return Object(n["a"])(c.a.mark((function r(){return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,e.shortId=t.shortId,r.next=4,s["b"].saveAnswer(e);case 4:t.loading=!1;case 5:case"end":return r.stop()}}),r)})))()}updateData(e){var t=this;return Object(n["a"])(c.a.mark((function r(){return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,s["b"].updateAnswer(e);case 2:t.loadData();case 3:case"end":return r.stop()}}),r)})))()}deleteData(e){var t=this;return Object(n["a"])(c.a.mark((function r(){var n,a;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=[],n=void 0!==e?[t.records[e].id]:(null===(a=t.records)||void 0===a?void 0:a.reduce(((e,r,n)=>{var a;return null!==(a=t.selected)&&void 0!==a&&a.includes(n)&&e.push(r.id),e}),[]))||[],r.next=4,s["b"].deleteAnswer(n);case 4:t.loadData();case 5:case"end":return r.stop()}}),r)})))()}loadReportData(e){var t=this;return Object(n["a"])(c.a.mark((function r(){var n;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,s["b"].loadReportData(t.shortId,e);case 3:n=r.sent,n&&(t.reportData=n),t.loading=!1;case 6:case"end":return r.stop()}}),r)})))()}}var u=r("k1fw");class l{constructor(e,t){this.id=void 0,this.shortId=void 0,this.project=void 0,this.loading=void 0,this.isPC=void 0,this.shortId=e,this.id=t,this.makeObservable()}makeObservable(){Object(i["e"])(this,{id:i["g"].ref,shortId:i["g"].ref,loading:i["g"].ref,project:i["g"].ref,schema:i["g"].computed,setting:i["g"].computed,name:i["g"].computed,saveOrUpdateProject:i["b"]})}get name(){var e;return null===(e=this.project)||void 0===e?void 0:e.name}get schema(){var e;return null===(e=this.project)||void 0===e?void 0:e.survey}get setting(){var e;return null===(e=this.project)||void 0===e?void 0:e.setting}loadProject(){var e=this;return Object(n["a"])(c.a.mark((function t(){var r;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.shortId||"new"===e.shortId){t.next=6;break}return e.loading=!0,t.next=4,s["b"].loadProject(e.shortId);case 4:r=t.sent,r&&(e.project=r);case 6:e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}saveOrUpdateProject(e){var t=this;return Object(n["a"])(c.a.mark((function r(){var n,a;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.loading=!0,"new"!==t.shortId){r.next=11;break}return r.next=4,s["b"].saveProject(Object(u["a"])(Object(u["a"])({},e),{},{setting:{answerSetting:{progressBar:!0,autoSave:!0}}}));case 4:return n=r.sent,t.shortId=n.data,t.loadProject(),t.loading=!1,r.abrupt("return",n.data);case 11:return r.next=13,s["b"].updateProject(Object(u["a"])(Object(u["a"])({},e),{},{id:t.id,shortId:t.shortId}));case 13:return a=r.sent,t.loading=!1,r.abrupt("return",a.data);case 16:case"end":return r.stop()}}),r)})))()}updateSetting(e){var t=this;return Object(n["a"])(c.a.mark((function r(){return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(t.setting,e),r.next=3,s["b"].updateSetting(t.shortId,e);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))()}deleteProject(e){return Object(n["a"])(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["b"].deleteProject(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}}class d{constructor(){this.projects=void 0,this.loading=!1,this.makeObservable()}makeObservable(){Object(i["e"])(this,{projects:i["g"].ref,loading:i["g"].ref})}loadProjects(e){var t=this;return Object(n["a"])(c.a.mark((function r(){var n;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,s["b"].loadProjects(e);case 3:n=r.sent,n&&(t.projects=n),t.loading=!1;case 6:case"end":return r.stop()}}),r)})))()}}},MsQj:function(e,t,r){},Nhdc:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return h}));var n=r("k1fw"),a=r("PpiC"),c=r("6qww"),i=r("jOlz"),s=r("q1tI"),o=r("Ty5D"),u=r("nKUr"),l=Object(i["i"])((e=>{var t=e.children,r=Object(a["a"])(e,["children"]),i=Object(c["a"])(),s=i.user;return Object(u["jsx"])(o["b"],Object(n["a"])(Object(n["a"])({},r),{},{render:e=>{var r=e.location;return s?t:Object(u["jsx"])(o["a"],{to:{pathname:"/login",state:{from:r}}})}}))})),d=(r("ZKFF"),r("E0QF")),p=Object(d["a"])(),b=Object(i["i"])((()=>{var e=Object(c["a"])();return Object(s["useEffect"])((()=>{var t=()=>{e.logout()};return p.on("login",t),()=>{p.off("login",t)}}),[]),Object(u["jsx"])(u["Fragment"],{})})),h=function(){p.emit("login")}},PPVq:function(e,t,r){"use strict";r.d(t,"f",(function(){return n["a"]})),r.d(t,"k",(function(){return n["d"]})),r.d(t,"j",(function(){return n["c"]})),r.d(t,"i",(function(){return n["b"]})),r.d(t,"c",(function(){return a["c"]})),r.d(t,"a",(function(){return a["a"]})),r.d(t,"b",(function(){return a["b"]})),r.d(t,"g",(function(){return c})),r.d(t,"m",(function(){return i})),r.d(t,"l",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"n",(function(){return u["d"]})),r.d(t,"h",(function(){return u["b"]})),r.d(t,"e",(function(){return h}));var n=r("vLn2"),a=r("/mkp"),c=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach((t=>e.query(e.path.concat(t)).take((e=>e.display="none"))))},i=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach((t=>e.query(e.path.concat(t)).take((e=>e.display="visible"))))},s=(r("hxAm"),(e,t)=>window["requestIdleCallback"](e,t)),o=e=>{window["cancelIdleCallback"](e)},u=r("pcCm"),l=r("k1fw"),d=r("q1tI"),p=r("jOlz"),b=r("nKUr");function h(e,t){return r=>{var n=r.name||(null===t||void 0===t?void 0:t.name);if(!n)throw new Error("field name \u672a\u5b9a\u4e49");var a=Object(d["useMemo"])((()=>Object(p["g"])(e,Object(p["h"])(((e,t)=>Object(l["a"])(Object(l["a"])({},e),{},{onChange:e=>{t.onInput(e)},hasError:t.errors.length>0}))))),[]);return Object(b["jsx"])(p["b"],Object(l["a"])(Object(l["a"])(Object(l["a"])({},r),t),{},{name:n,component:[a,r],reactions:[e=>{var t=r.syncDisplay;t&&("string"===typeof t||"object"===typeof t&&Object.keys(t).forEach((r=>{var n=e.query(e.path.parent().concat(r)).get("value");t[r].includes(n)?e.display="visible":e.display="none"})));var n=r.mirrorFieldAddress;if(n){var a=e.query(n),c=a.get("value");c?e.visible=!0:void 0!==a.take()&&(e.visible=!1)}},...r.reactions||[]]}))}}},STtH:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"f",(function(){return o})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return j}));var n=r("q1tI"),a=Object(n["createContext"])({}),c=a.Provider,i=r("rsWy"),s=r("PPVq");function o(e){var t,r=[];return null===e||void 0===e||null===(t=e.children)||void 0===t||t.filter((e=>!Object(i["h"])(e.type))).map((e=>{"QuestionSet"===e.type?r.push(...o(e)):r.push({name:e.id,title:Object(s["n"])(e.title),schema:e})})),0===r.length?r.push({name:"\u6682\u65e0\u6570\u636e!"}):(r.push({name:"totalTime",title:"\u7b54\u5377\u65f6\u957f"}),r.push({name:"deviceType",title:"\u8bbe\u5907\u7c7b\u578b"}),r.push({name:"platform",title:"\u5e73\u53f0\u7c7b\u578b"})),r}function u(e){var t={};return e?(e.id&&(t[e.id]=Object(s["n"])(e.title)),e.children&&e.children.forEach((e=>Object.assign(t,u(e)))),t):t}function l(e,t,r){return e.map((e=>{var r={};return t.forEach((t=>{if("totalTime"!==t.name)if("deviceType"!==t.name)if("platform"!==t.name){var n=t.schema||{},a=n.type,c=n.id,i=e.answer[c];if(i){var s=[];s="Cascader"===a?p(i,n):"MatrixAuto"===a?h(i,n):a.startsWith("Matrix")?b(i,n):d(i,n),r[c]=s.join(",")}}else r.platform=e.metaInfo.clientInfo.platform;else r.deviceType=e.metaInfo.clientInfo.deviceType;else r.totalTime=j(e.metaInfo.answerInfo.endTime-e.metaInfo.answerInfo.startTime)})),r}))}function d(e,t){var r,n=[];return null===(r=t.children)||void 0===r||r.forEach((t=>{var r=e[t.id];!0===r?n.push(Object(s["n"])(t.title)):r&&n.push(r)})),n}function p(e,t){var r;console.log(e,t);var n=[],a=null===t||void 0===t?void 0:t.dataSource;return a?(null===(r=t.children)||void 0===r||r.forEach((t=>{if(e.hasOwnProperty(t.id)){var r,c=null===(r=a)||void 0===r?void 0:r.find((r=>r.value===e[t.id]));c?(a=c.children,n.push(c.label)):n.push("")}})),n):n}function b(e,t){var r,n=[];return null===(r=t.row)||void 0===r||r.forEach((r=>{var a=r.id,c=Object(s["n"])(r.title);n.push("".concat(c,":(").concat(d(e[a],t),")"))})),n}function h(e,t){var r=[];return e.forEach((e=>{r.push("(".concat(d(e,t),")"))})),r}function j(e){var t=Math.floor(e/864e5),r=Math.floor(e/36e5%24),n=Math.floor(e/6e4%60),a=Math.floor(e/1e3%60),c="";return t>0&&(c+=t+"\u5929"),r>0&&(c+=r+"\u5c0f\u65f6"),n>0&&(c+=n+"\u5206\u949f"),a>0&&(c+=a+"\u79d2"),c}},ZKFF:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r("hF6A"),a=r("9og8"),c=r("WmNS"),i=r.n(c),s=r("rsWy"),o=r("nzmB");class u{constructor(){this.user=void 0,this.isMobile=!1,this.makeObservable(),this.init(),this.isMobile=Object(s["b"])()}makeObservable(){Object(o["e"])(this,{user:o["g"].ref,logout:o["b"],login:o["b"]})}init(){var e=localStorage.getItem("Authorization");if(e){var t=JSON.parse(Object(n["c"])(e.split(".")[1]));this.user=t.user}}logout(){localStorage.removeItem("Authorization"),this.user=void 0}login(e){var t=this;return Object(a["a"])(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n["b"].post("/api/public/login",e);case 2:if(a=r.sent,200!==a.code){r.next=6;break}return t.user=a.data,r.abrupt("return",!0);case 6:return r.abrupt("return",a.message);case 7:case"end":return r.stop()}}),r)})))()}register(e){return Object(a["a"])(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["b"].post("/api/public/register",e));case 1:case"end":return t.stop()}}),t)})))()}}var l=r("q1tI");function d(){var e=Object(l["useMemo"])((()=>new u),[]);return e}var p=r("nKUr"),b=e=>{var t=d();return Object(p["jsx"])(n["a"].Provider,{value:{auth:t},children:e.children})}},f7qo:function(e,t,r){"use strict";r.r(t),r.d(t,"Overview",(function(){return ce})),r.d(t,"SurveyContext",(function(){return ne["a"]})),r.d(t,"SurveyDataProvider",(function(){return ne["b"]})),r.d(t,"api",(function(){return ne["c"]}));r("GNNt");var n=r("wEI+"),a=r("q1tI"),c=r("Ty5D"),i=r("SA0R"),s=r.n(i),o=(r("bbsP"),r("/wGt")),u=(r("qVdP"),r("jsC+")),l=(r("Telt"),r("Tckk")),d=(r("+L6B"),r("2/Rp")),p=(r("lUTK"),r("BvKs")),b=r("tJVT"),h=r("cJ7L"),j=r("eFNv"),f=r("aIfO"),v=r("wJku"),m=r("/1V0"),_=r("G3dp"),g=r("1013"),O=r("U+PY"),w=r("UdsK"),x=r("uqfK"),y=r("55Ip"),k=r("TSYQ"),I=r.n(k),E=r("6qww"),S=r("+59K"),P=r("nKUr"),N=Object(S["a"])((e=>{var t=Object(a["useState"])(!1),r=Object(b["a"])(t,2),n=r[0],c=r[1],i=Object(E["a"])(),s=Object(P["jsxs"])(p["a"],{className:"",selectedKeys:[],onClick:e=>{"logout"===e.key&&i.logout()},children:[Object(P["jsxs"])(p["a"].Item,{children:[Object(P["jsx"])(h["a"],{}),"\u4e2a\u4eba\u4e2d\u5fc3"]},"center"),Object(P["jsxs"])(p["a"].Item,{children:[Object(P["jsx"])(j["a"],{}),"\u4e2a\u4eba\u8bbe\u7f6e"]},"settings"),Object(P["jsx"])(p["a"].Divider,{}),Object(P["jsxs"])(p["a"].Item,{children:[Object(P["jsx"])(f["a"],{}),"\u9000\u51fa\u767b\u5f55"]},"logout")]});return Object(P["jsx"])("div",{className:"survey-main-header-mobile",children:Object(P["jsxs"])("div",{className:"survey-main-header-mobile-content",children:[Object(P["jsx"])("span",{className:"survey-main-header-mobile-collapsed-button",children:Object(P["jsx"])(d["a"],{type:"text",icon:Object(P["jsx"])(v["a"],{style:{fontSize:24},onClick:()=>c(!0)}),shape:"circle"})}),Object(P["jsx"])("span",{className:"survey-main-header-mobile-user",children:Object(P["jsx"])(u["a"],{overlay:s,overlayClassName:"user-dropdown-menu",overlayStyle:{width:"100%",borderRadius:0},children:Object(P["jsx"])("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault(),children:Object(P["jsx"])(l["a"],{src:"https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png"})})})}),Object(P["jsx"])(o["a"],{width:60,placement:"left",closable:!1,onClose:()=>c(!1),visible:n,bodyStyle:{padding:0},children:e.children})]})})})),M=Object(S["a"])((()=>{var e=Object(c["j"])(),t=(e.path,e.url),r=Object(c["h"])(),n=Object(c["g"])(),i=Object(c["i"])(),s=i.shortId,o=Object(a["useState"])("dashboard"),u=Object(b["a"])(o,2),l=u[0],p=u[1],f=Object(E["a"])(),v=f.isMobile;Object(a["useEffect"])((()=>{var e=r.pathname.split("/").slice(-1)[0];["edit","setting","flow","data","report"].includes(e)?p(e):p("new"===e?"new":"dashboard")}),[r]);var k=()=>Object(P["jsxs"])("div",{className:"survey-main-navigator",children:[Object(P["jsxs"])("div",{className:"actions-container",children:[Object(P["jsx"])("div",{className:"action-item",children:Object(P["jsx"])(y["b"],{to:"".concat(t),className:I()("action-label",{active:"dashboard"===l,disabled:"new"===s}),children:Object(P["jsx"])(d["a"],{type:"text",shape:"circle",icon:Object(P["jsx"])(m["a"],{}),size:"large",children:"\u6982\u8ff0"})})}),Object(P["jsx"])("div",{className:"action-item",children:Object(P["jsx"])(y["b"],{to:"".concat(t,"/edit"),className:I()("action-label",{active:"edit"===l||"new"===l,disabled:"new"===s}),children:Object(P["jsx"])(d["a"],{type:"text",shape:"circle",icon:Object(P["jsx"])(_["a"],{}),size:"large",children:"\u7f16\u8f91"})})}),Object(P["jsx"])("div",{className:"action-item",children:Object(P["jsx"])(y["b"],{to:"".concat(t,"/setting"),className:I()("action-label",{active:"setting"===l,disabled:"new"===s}),children:Object(P["jsx"])(d["a"],{type:"text",shape:"circle",icon:Object(P["jsx"])(j["a"],{}),size:"large",children:"\u8bbe\u7f6e"})})}),Object(P["jsx"])("div",{className:"action-item",children:Object(P["jsx"])(y["b"],{to:"".concat(t,"/flow"),className:I()("action-label",{active:"flow"===l,disabled:"new"===s}),children:Object(P["jsx"])(d["a"],{type:"text",shape:"circle",icon:Object(P["jsx"])(g["a"],{}),size:"large",children:"\u5de5\u4f5c\u6d41"})})}),Object(P["jsx"])("div",{className:"action-item",children:Object(P["jsx"])(y["b"],{to:"".concat(t,"/data"),className:I()("action-label",{active:"data"===l,disabled:"new"===s}),children:Object(P["jsx"])(d["a"],{type:"text",shape:"circle",icon:Object(P["jsx"])(O["a"],{}),size:"large",children:"\u6570\u636e"})})}),Object(P["jsx"])("div",{className:"action-item",children:Object(P["jsx"])(y["b"],{to:"".concat(t,"/report"),className:I()("action-label",{active:"report"===l,disabled:"new"===s}),children:Object(P["jsx"])(d["a"],{type:"text",shape:"circle",icon:Object(P["jsx"])(w["a"],{}),size:"large",children:"\u62a5\u8868"})})})]}),Object(P["jsxs"])("div",{children:[Object(P["jsx"])("div",{className:"action-item",children:Object(P["jsx"])("a",{className:"action-label",children:Object(P["jsx"])(d["a"],{type:"text",shape:"circle",icon:Object(P["jsx"])(x["a"],{}),size:"large",onClick:()=>n.push("/"),children:"\u4e3b\u9875"})})}),Object(P["jsx"])("div",{className:"action-item",children:Object(P["jsx"])("a",{className:"action-label",children:Object(P["jsx"])(d["a"],{type:"text",shape:"circle",icon:Object(P["jsx"])(h["a"],{}),size:"large",children:"\u7528\u6237"})})})]})]});return v?Object(P["jsx"])(N,{children:k()}):k()})),T=r("9og8"),A=r("WmNS"),D=r.n(A),C=r("rlch"),q=r("DAmd"),z=Object(C["c"])({loader:function(){var e=Object(T["a"])(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(2),r.e(3),r.e(5),r.e(14)]).then(r.bind(null,"dtXA"));case 2:return t=e.sent,n=t.default,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),loading:()=>Object(P["jsx"])(q["a"],{})}),F=Object(C["c"])({loader:function(){var e=Object(T["a"])(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.e(23).then(r.bind(null,"aYbn"));case 2:return t=e.sent,n=t.default,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),loading:()=>Object(P["jsx"])(q["a"],{})}),B=Object(C["c"])({loader:function(){var e=Object(T["a"])(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(3),r.e(5),r.e(16),r.e(21)]).then(r.bind(null,"bUpz"));case 2:return t=e.sent,n=t.default,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),loading:()=>Object(P["jsx"])(q["a"],{})}),U=Object(C["c"])({loader:function(){var e=Object(T["a"])(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(17),r.e(22)]).then(r.bind(null,"T4O8"));case 2:return t=e.sent,n=t.default,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),loading:()=>Object(P["jsx"])(q["a"],{})}),K=Object(C["c"])({loader:function(){var e=Object(T["a"])(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(1),r.e(2),r.e(3),r.e(5),r.e(13)]).then(r.bind(null,"Schy"));case 2:return t=e.sent,n=t.default,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),loading:()=>Object(P["jsx"])(q["a"],{})}),V=(r("BoS7"),r("Sdc0")),R=(r("miYZ"),r("tsqr")),W=(r("14J3"),r("BMrR")),L=(r("jCWc"),r("kPKH")),J=(r("IzEo"),r("bx4M")),Q=(r("5Dmo"),r("3S7+")),Y=(r("5NDa"),r("5rEg")),G=r("+YFz"),H=r("STtH"),X=r("j0GH"),Z=Y["a"].Search,$=e=>[{title:"\u95ee\u5377\u603b\u6570",desc:Object(P["jsx"])("span",{children:"\u95ee\u5377\u521b\u5efa\u4e4b\u540e\u586b\u5199\u7684\u95ee\u5377\u6570\u91cf\u603b\u548c"}),total:(null===e||void 0===e?void 0:e.total)||0},{title:"\u4eca\u65e5\u65b0\u589e",desc:Object(P["jsx"])("span",{children:"\u8be5\u6570\u636e\u6307\u7684\u662f\u4eca\u65e5\u5185\uff0c\u6240\u6709\u8bbf\u5ba2\u5728\u8be5\u95ee\u5377\u5185\u63d0\u4ea4\u6570\u636e\u7684\u603b\u548c"}),total:(null===e||void 0===e?void 0:e.totalOfToday)||0},{title:"\u5e73\u5747\u586b\u5199\u65f6\u957f",desc:Object(P["jsx"])("span",{children:"\u5e73\u5747\u586b\u5199\u65f6\u957f=\u5355\u6761\u6570\u636e\u586b\u5199\u65f6\u957f\u603b\u548c/\u6570\u636e\u6761\u6570"}),total:Object(H["e"])((null===e||void 0===e?void 0:e.averageDuration)||0)},{title:"\u6700\u8fd1\u66f4\u65b0\u65f6\u95f4",desc:Object(P["jsx"])("span",{children:"\u6700\u8fd1\u4e00\u6b21\u95ee\u5377\u586b\u5199\u65f6\u95f4"}),total:null!==e&&void 0!==e&&e.lastUpdate?"".concat(Object(H["e"])((new Date).getTime()-(e.lastUpdate||0)),"\u524d"):"\u672a\u5f00\u59cb"}],ee=Object(S["a"])((()=>{var e=Object(X["a"])(),t=e.loading,r=Object(a["useState"])($(e.project)),n=Object(b["a"])(r,2),c=n[0],i=n[1];return Object(a["useEffect"])((()=>{var t=window.setInterval((()=>{i($(e.project))}),1e3);return()=>clearInterval(t)}),[]),Object(P["jsx"])(W["a"],{gutter:[20,20],className:"data-info",children:c.map((e=>Object(P["jsx"])(L["a"],{sm:6,xs:24,children:Object(P["jsxs"])(J["a"],{loading:t,children:[Object(P["jsx"])("div",{className:"title",children:Object(P["jsx"])(d["a"],{type:"link",className:"total",children:e.total})}),Object(P["jsxs"])("div",{className:"desc",children:[e.title,Object(P["jsx"])(Q["a"],{overlay:e.desc,placement:"bottom",children:Object(P["jsx"])(G["a"],{className:"desc-info"})})]})]})},e.title)))})})),te=Object(S["a"])((()=>{var e,t,r=Object(X["a"])(),n=r.loading;return Object(P["jsxs"])("div",{className:"survey-overview",children:[Object(P["jsx"])("div",{className:"survey-title",children:"\u75ab\u60c5\u8c03\u67e5\u95ee\u5377"}),Object(P["jsx"])(ee,{}),Object(P["jsx"])(W["a"],{gutter:[20,20],style:{marginTop:20},children:Object(P["jsx"])(L["a"],{sm:12,xs:24,children:Object(P["jsx"])(J["a"],{loading:n,children:Object(P["jsxs"])(W["a"],{gutter:[10,10],children:[Object(P["jsx"])(L["a"],{span:24,children:Object(P["jsx"])(Z,{value:"https://surveyking.cn/s/".concat(r.shortId),enterButton:"\u6253\u5f00",className:"open-target",onSearch:e=>{window.open("/s/".concat(r.shortId))}})}),Object(P["jsxs"])(L["a"],{className:"setting-item",span:24,children:[Object(P["jsx"])("div",{className:"title",children:"\u95ee\u5377\u5f00\u542f/\u505c\u6b62"}),Object(P["jsx"])("div",{children:Object(P["jsx"])(V["a"],{defaultChecked:1===(null===(e=r.project)||void 0===e?void 0:e.status),onChange:e=>{r.saveOrUpdateProject({status:e?1:0}).then((t=>{200===t.code?e?R["default"].info("\u95ee\u5377\u5df2\u5f00\u542f"):R["default"].warn("\u95ee\u5377\u5df2\u505c\u6b62"):R["default"].error(t.message)}))}})})]}),Object(P["jsxs"])(L["a"],{className:"setting-item",span:24,children:[Object(P["jsx"])("div",{className:"title",children:"\u95ee\u5377\u586b\u5199\u65f6\u81ea\u52a8\u4fdd\u5b58"}),Object(P["jsx"])("div",{children:Object(P["jsx"])(V["a"],{defaultChecked:null===(t=r.project)||void 0===t?void 0:t.setting.answerSetting.autoSave,onChange:e=>{r.updateSetting({answerSetting:{autoSave:e}}).then((t=>{200===t.code?e?R["default"].info("\u6682\u5b58\u5df2\u5f00\u542f"):R["default"].warn("\u6682\u5b58\u5df2\u505c\u6b62"):R["default"].error(t.message)}))}})})]})]})})})})]})})),re=(r("k1fw"),r("8ub7"),()=>{var e=Object(c["j"])(),t=e.path,r=e.url,n=Object(c["i"])(),a=n.shortId,i=()=>"new"===a?Object(P["jsx"])(K,{}):Object(P["jsx"])(te,{});return Object(P["jsx"])("div",{className:"survey-main-content",children:Object(P["jsxs"])(c["d"],{children:[Object(P["jsx"])(c["b"],{exact:!0,path:t,children:i()}),Object(P["jsx"])(c["b"],{path:"/survey/new",children:Object(P["jsx"])(K,{})}),Object(P["jsx"])(c["b"],{path:"/survey/:shortId/edit",children:Object(P["jsx"])(K,{})}),Object(P["jsx"])(c["b"],{path:"/survey/:shortId/setting",children:Object(P["jsx"])(U,{})}),Object(P["jsx"])(c["b"],{path:"/survey/:shortId/flow",children:Object(P["jsx"])(F,{})}),Object(P["jsx"])(c["b"],{path:"/survey/:shortId/data",children:Object(P["jsx"])(z,{id:a})}),Object(P["jsx"])(c["b"],{path:"/survey/:shortId/report",children:Object(P["jsx"])(B,{id:a})}),Object(P["jsx"])(c["b"],{path:"*",render:()=>Object(P["jsx"])(c["a"],{to:r})})]})})}),ne=(r("MsQj"),r("770a")),ae=r("DVlV"),ce=Object(S["a"])((()=>{var e=Object(c["i"])(),t=e.shortId,r=Object(a["useMemo"])((()=>new ae["c"](t)),[t]),i=Object(E["a"])(),o=i.isMobile,u=r.name;return Object(a["useEffect"])((()=>{r.loadProject()}),[r]),Object(a["useEffect"])((()=>(u&&(document.title=u),()=>{document.title="\u5377\u738b"})),[u]),Object(P["jsx"])(n["a"],{locale:s.a,children:Object(P["jsx"])(ne["a"].Provider,{value:{store:r},children:Object(P["jsxs"])("div",{className:"survey-main ".concat(o?"mobile":""),children:[Object(P["jsx"])(M,{}),Object(P["jsx"])(re,{})]})})})}));t["default"]=ce},hF6A:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return h})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return O}));r("miYZ");var n=r("tsqr"),a=r("9og8"),c=r("WmNS"),i=r.n(c),s=(r("bZMm"),r("Nhdc"));function o(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n].trim();if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}function u(e,t,r,n){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(i.a.mark((function e(t,r,a,c){var u,l;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u={method:t.toUpperCase(),credentials:"same-origin",withCredentials:!0,credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache","X-XSRF-TOKEN":o("XSRF-TOKEN"),Authorization:localStorage.getItem("Authorization")||"",Expires:"-1",Pragma:"no-cache"},body:a},l=localStorage.getItem("Authorization"),l&&(u.headers.Authorization="Bearer ".concat(l)),a&&(u.body=JSON.stringify(a)),e.next=6,fetch(r,u).then((e=>{var t=e.headers.get("Authorization");return t&&localStorage.setItem("Authorization",t),e.json()})).then((e=>(200!==e.code&&!1!==c&&"GET"===u.method&&n["default"].error(e.message),401===e.code&&Object(s["c"])(),e)));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}var d={put(e,t){return Object(a["a"])(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u("PUT",e,t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},delete(e){return Object(a["a"])(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u("DELETE",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},post(e,t,r){return Object(a["a"])(i.a.mark((function n(){return i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,u("POST",e,t,r);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},patch(e,t){return Object(a["a"])(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u("PATCH",e,t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},get(e){return Object(a["a"])(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u("GET",e).then((e=>{if(200===e.code)return e.data}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getWithPagination(e,t){var r=this;return Object(a["a"])(i.a.mark((function n(){return i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",r.get(p(e,t)).then((e=>{if(e)return{records:e.records,pagination:{current:e.current,pageSize:e.size,total:e.total}}})));case 1:case"end":return n.stop()}}),n)})))()},loadProjects(e){var t=this;return Object(a["a"])(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",t.get("/api/projects?name=".concat(e)));case 1:case"end":return r.stop()}}),r)})))()},loadProject(e){return this.get("/api/projects/".concat(e))},loadData(e,t){return this.getWithPagination("/api/answers?shortId=".concat(e),t)},saveAnswer(e){return this.post("/api/answers",e)},updateAnswer(e){return this.patch("/api/answers",e)},deleteAnswer(e){return this.delete("/api/answers?ids=".concat(e.join(",")))},saveProject(e){return this.post("/api/projects",e)},updateProject(e){return this.patch("/api/projects",e)},deleteProject(e){return this.delete("/api/projects/".concat(e))},updateSetting(e,t){return this.patch("/api/projects",{setting:t,shortId:e})},loadReportData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.get("/api/reports/".concat(e,"?search=").concat(t))}};function p(e,t){var r=[];return Object.keys(t).forEach((e=>{var n=t[e];r.push("".concat(e,"=").concat(n instanceof Array?n.join(","):n))})),-1!==e.indexOf("?")?"".concat(e,"&").concat(r.join("&")):"".concat(e,"?").concat(r.join("&"))}var b=r("q1tI"),h=Object(b["createContext"])({});function j(e){return decodeURIComponent(Array.prototype.map.call(window.atob(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function f(e){return"function"===typeof e||"[object Object]"===toString.call(e)}function v(e){return"object"===typeof e?null===e:"function"!==typeof e}var m=e=>"__proto__"!==e&&"constructor"!==e&&"prototype"!==e;function _(e){for(var t=0,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(v(e)&&(e=n[t++]),e||(e={});t<n.length;t++)if(f(n[t]))for(var c=0,i=Object.keys(n[t]);c<i.length;c++){var s=i[c];m(s)&&(f(e[s])&&f(n[t][s])?_(e[s],n[t][s]):e[s]=n[t][s])}return e}window.assignDeep=_;var g=r("6qww");function O(){return Object(g["a"])().isMobile}},j0GH:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("q1tI"),a=r("770a"),c=()=>{var e=Object(n["useContext"])(a["a"]);return e.store}},pcCm:function(e,t,r){"use strict";function n(e){var t=1;for(var r in e)if(e.hasOwnProperty(r)&&"object"===typeof e[r]&&a(e[r])){var c=n(e[r])+1;t=Math.max(c,t)}return t}function a(e){return void 0!==e&&null!==e&&(("number"!==typeof e||"NaN"!==e.toString())&&("string"!==typeof e||""!==e.trim()))}r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"b",(function(){return i}));function c(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}function i(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return 0===e.length?n:t>=e.length?e.concat(n):e.reduce(((e,r,a)=>(t===a&&e.push(...n),e.push(r),e)),[])}},rsWy:function(e,t,r){"use strict";var n=r("/zIJ");r.d(t,"b",(function(){return n["a"]})),r.d(t,"c",(function(){return n["b"]})),r.d(t,"d",(function(){return n["c"]})),r.d(t,"e",(function(){return n["d"]})),r.d(t,"f",(function(){return n["e"]})),r.d(t,"g",(function(){return n["f"]})),r.d(t,"h",(function(){return n["g"]})),r.d(t,"i",(function(){return n["h"]})),r.d(t,"j",(function(){return n["i"]})),r.d(t,"k",(function(){return n["j"]})),r.d(t,"l",(function(){return n["k"]}));r("4FsO");var a=r("vzo5");r.d(t,"a",(function(){return a["a"]}))},vLn2:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return u}));var n={},a={},c={questionTypes:{},questionSettings:{},questionOperations:{},registerDesignerIcons:e=>{Object.assign(n,e)},getDesignerIcon:e=>n[e],registerQuestionTemplates:e=>{Object.assign(a,e)},getQuestionTemplate:e=>a[e]||{type:e}},i=()=>c;function s(e,t){c.questionTypes[e]=t}function o(e,t){c.questionSettings[e]=t}function u(e,t){c.questionOperations[e]=t}},vzo5:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("q1tI"),a=r.n(n),c=r("4FsO"),i=a.a.createContext({theme:c["a"]});c["a"]}}]);