(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4459,4628],{51285:function(k,N,e){"use strict";e.r(N),e.d(N,{SurveyLayout:function(){return I},default:function(){return Y}});var q=e(84305),F=e(88182),P=e(89247),h=e(67294),O=e(82925),z=e(2067),_=e(57338),B=e(25084),ee=e(59250),$=e(13013),te=e(94233),A=e(51890),ne=e(57663),c=e(71577),ae=e(30887),m=e(14289),S=e(2824),M=e(89366),E=e(24616),U=e(55035),L=e(76629),H=e(63392),T=e(8212),V=e(92570),G=e(57820),K=e(59271),f=e(73727),C=e(51615),J=e(94184),j=e.n(J),p=e(27400),R=e(77613),t=e(85893),Q=(0,R.P)(function(i){var r=(0,h.useState)(!1),s=(0,S.Z)(r,2),a=s[0],l=s[1],o=(0,p.a)(),n=(0,t.jsxs)(m.Z,{className:"",selectedKeys:[],onClick:function(v){v.key==="logout"&&o.logout()},children:[(0,t.jsxs)(m.Z.Item,{children:[(0,t.jsx)(M.Z,{}),"\u4E2A\u4EBA\u4E2D\u5FC3"]},"center"),(0,t.jsxs)(m.Z.Item,{children:[(0,t.jsx)(E.Z,{}),"\u4E2A\u4EBA\u8BBE\u7F6E"]},"settings"),(0,t.jsx)(m.Z.Divider,{}),(0,t.jsxs)(m.Z.Item,{children:[(0,t.jsx)(U.Z,{}),"\u9000\u51FA\u767B\u5F55"]},"logout")]});return(0,t.jsx)("div",{className:"survey-main-header-mobile",children:(0,t.jsxs)("div",{className:"survey-main-header-mobile-content",children:[(0,t.jsx)("span",{className:"survey-main-header-mobile-collapsed-button",children:(0,t.jsx)(c.Z,{type:"text",icon:(0,t.jsx)(L.Z,{style:{fontSize:24},onClick:function(){return l(!0)}}),shape:"circle"})}),(0,t.jsx)("span",{className:"survey-main-header-mobile-user",children:(0,t.jsx)($.Z,{overlay:n,overlayClassName:"user-dropdown-menu",overlayStyle:{width:"100%",borderRadius:0},children:(0,t.jsx)("a",{className:"ant-dropdown-link",onClick:function(v){return v.preventDefault()},children:(0,t.jsx)(A.C,{src:"https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png"})})})}),(0,t.jsx)(B.Z,{width:60,autoFocus:!1,placement:"left",closable:!1,onClose:function(){return l(!1)},visible:a,bodyStyle:{padding:0},children:i.children})]})})}),W=(0,R.P)(function(i){var r=i.shortId,s="/survey/".concat(r),a=(0,C.TH)(),l=(0,C.k6)(),o=(0,h.useState)("dashboard"),n=(0,S.Z)(o,2),d=n[0],v=n[1],w=(0,p.a)(),b=w.isMobile;(0,h.useEffect)(function(){var Z=a.pathname.split("/").slice(-1)[0];["edit","setting","flow","data","report"].includes(Z)?v(Z):v(Z==="new"?"new":"dashboard")},[a]);var D=function(){return(0,t.jsxs)("div",{className:"survey-main-navigator",children:[(0,t.jsxs)("div",{className:"actions-container",children:[(0,t.jsx)("div",{className:"action-item",children:(0,t.jsx)(f.rU,{to:"".concat(s),className:j()("action-label",{active:d==="dashboard",disabled:r==="new"}),children:(0,t.jsx)(c.Z,{type:"text",shape:"circle",icon:(0,t.jsx)(H.Z,{}),size:"large",children:"\u6982\u8FF0"})})}),(0,t.jsx)("div",{className:"action-item",children:(0,t.jsx)(f.rU,{to:"".concat(s,"/edit"),className:j()("action-label",{active:d==="edit"||d==="new",disabled:r==="new"}),children:(0,t.jsx)(c.Z,{type:"text",shape:"circle",icon:(0,t.jsx)(T.Z,{}),size:"large",children:"\u7F16\u8F91"})})}),(0,t.jsx)("div",{className:"action-item",children:(0,t.jsx)(f.rU,{to:"".concat(s,"/setting"),className:j()("action-label",{active:d==="setting",disabled:r==="new"}),children:(0,t.jsx)(c.Z,{type:"text",shape:"circle",icon:(0,t.jsx)(E.Z,{}),size:"large",children:"\u8BBE\u7F6E"})})}),(0,t.jsx)("div",{className:"action-item",children:(0,t.jsx)(f.rU,{to:"".concat(s,"/data"),className:j()("action-label",{active:d==="data",disabled:r==="new"}),children:(0,t.jsx)(c.Z,{type:"text",shape:"circle",icon:(0,t.jsx)(V.Z,{}),size:"large",children:"\u6570\u636E"})})}),(0,t.jsx)("div",{className:"action-item",children:(0,t.jsx)(f.rU,{to:"".concat(s,"/report"),className:j()("action-label",{active:d==="report",disabled:r==="new"}),children:(0,t.jsx)(c.Z,{type:"text",shape:"circle",icon:(0,t.jsx)(G.Z,{}),size:"large",children:"\u62A5\u8868"})})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"action-item",children:(0,t.jsx)("a",{className:"action-label",children:(0,t.jsx)(c.Z,{type:"text",shape:"circle",icon:(0,t.jsx)(K.Z,{}),size:"large",onClick:function(){return l.push("/")},children:"\u4E3B\u9875"})})})})]})};return b?(0,t.jsx)(Q,{children:D()}):D()}),x=e(3182),X=e(94043),u=e.n(X),y=e(79004),g=e(92725),re=(0,y.D8)({loader:function(){var i=(0,x.Z)(u().mark(function s(){var a,l;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([e.e(9107),e.e(6511),e.e(2790)]).then(e.bind(e,66511));case 2:return a=n.sent,l=a.default,n.abrupt("return",l);case 5:case"end":return n.stop()}},s)}));function r(){return i.apply(this,arguments)}return r}(),loading:function(){return(0,t.jsx)(g.Z,{})}}),se=(0,y.D8)({loader:function(){var i=(0,x.Z)(u().mark(function s(){var a,l;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(9352).then(e.bind(e,63457));case 2:return a=n.sent,l=a.default,n.abrupt("return",l);case 5:case"end":return n.stop()}},s)}));function r(){return i.apply(this,arguments)}return r}(),loading:function(){return(0,t.jsx)(g.Z,{})}}),le=(0,y.D8)({loader:function(){var i=(0,x.Z)(u().mark(function s(){var a,l;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([e.e(3436),e.e(8325),e.e(6185)]).then(e.bind(e,46185));case 2:return a=n.sent,l=a.default,n.abrupt("return",l);case 5:case"end":return n.stop()}},s)}));function r(){return i.apply(this,arguments)}return r}(),loading:function(){return(0,t.jsx)(g.Z,{})}}),ie=(0,y.D8)({loader:function(){var i=(0,x.Z)(u().mark(function s(){var a,l;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.e(7707).then(e.bind(e,17707));case 2:return a=n.sent,l=a.default,n.abrupt("return",l);case 5:case"end":return n.stop()}},s)}));function r(){return i.apply(this,arguments)}return r}(),loading:function(){return(0,t.jsx)(g.Z,{})}}),oe=(0,y.D8)({loader:function(){var i=(0,x.Z)(u().mark(function s(){var a,l;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve().then(e.bind(e,96703));case 2:return a=n.sent,l=a.default,n.abrupt("return",l);case 5:case"end":return n.stop()}},s)}));function r(){return i.apply(this,arguments)}return r}(),loading:function(){return(0,t.jsx)(g.Z,{})}}),de=e(32322),ue=function(){var r=useRouteMatch(),s=r.path,a=r.url,l=useParams(),o=l.shortId,n=function(){return o==="new"?_jsx(SurveyEditor,{}):_jsx(Overview,{})};return _jsx("div",{className:"survey-main-content",children:_jsxs(Switch,{children:[_jsx(Route,{exact:!0,path:s,children:n()}),_jsx(Route,{path:"/survey/new",children:_jsx(SurveyEditor,{})}),_jsx(Route,{path:"/survey/:shortId/edit",children:_jsx(SurveyEditor,{})}),_jsx(Route,{path:"/survey/:shortId/setting",children:_jsx(Setting,{})}),_jsx(Route,{path:"/survey/:shortId/flow",children:_jsx(Flow,{})}),_jsx(Route,{path:"/survey/:shortId/data",children:_jsx(Data,{id:o})}),_jsx(Route,{path:"/survey/:shortId/report",children:_jsx(Report,{id:o})}),_jsx(Route,{path:"*",render:function(){return _jsx(Redirect,{to:a})}})]})})},I=function(r){var s=r.match.params.shortId||"new",a=(0,h.useMemo)(function(){return new z.Uf(s)},[s]),l=(0,p.a)(),o=l.isMobile,n=a.name;return(0,h.useEffect)(function(){a.loadProject()},[a]),(0,h.useEffect)(function(){return n&&(document.title=n),function(){document.title="\u5377\u738B"}},[n]),(0,t.jsx)(F.ZP,{locale:O.Z,children:(0,t.jsx)(P.SurveyContext.Provider,{value:{store:a},children:(0,t.jsxs)("div",{className:"survey-main ".concat(o?"mobile":""),children:[(0,t.jsx)(W,{shortId:s}),(0,t.jsx)("div",{className:"survey-main-content",children:r.children})]})})})},Y=I}}]);
