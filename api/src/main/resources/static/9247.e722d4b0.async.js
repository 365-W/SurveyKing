(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9247],{89239:function(K,x,t){"use strict";t.d(x,{xi:function(){return C},fQ:function(){return R},h8:function(){return S},IR:function(){return I},gh:function(){return T},ZZ:function(){return F}});var N=t(67294),C=(0,N.createContext)({}),R=C.Provider,f=t(86582),W=t(98210),E=t(69646);function F(r){var i,e=[];return r==null||(i=r.children)===null||i===void 0||i.filter(function(n){return!(0,W.nj)(n.type)}).map(function(n){n.type==="QuestionSet"?e.push.apply(e,(0,f.Z)(F(n))):e.push({name:n.id,title:(0,E.WO)(n.title),schema:n,type:n.type==="Upload"||n.type==="Signature"?"image":"string"})}),e.length===0?e.push({name:"\u6682\u65E0\u6570\u636E!"}):(e.push({name:"totalTime",title:"\u7B54\u5377\u65F6\u957F"}),e.push({name:"deviceType",title:"\u8BBE\u5907\u7C7B\u578B"}),e.push({name:"platform",title:"\u5E73\u53F0\u7C7B\u578B"})),e}function S(r){var i={};return r&&(r.id&&(i[r.id]=(0,E.WO)(r.title)),r.children&&r.children.forEach(function(e){return Object.assign(i,S(e))})),i}function I(r,i){return r.map(function(e){var n={};return i.forEach(function(o){if(o.name==="totalTime"){n.totalTime=T(e.metaInfo.answerInfo.endTime-e.metaInfo.answerInfo.startTime);return}else if(o.name==="deviceType"){n.deviceType=e.metaInfo.clientInfo.deviceType;return}else if(o.name==="platform"){n.platform=e.metaInfo.clientInfo.platform;return}var u=o.schema||{},s=u.type,h=u.id,m=e.answer[h];if(!!m){var p=[];s==="Cascader"?p=Q(m,u):s==="MatrixAuto"?p=H(m,u):s.startsWith("Matrix")?p=D(m,u):s==="Upload"||s==="Signature"?p=Z(m,u,e.attachment):p=M(m,u),s==="Upload"||s==="Signature"?n[h]=p:n[h]=p.join(",")}}),n.id=e.id,n})}function M(r,i){var e,n=[];return(e=i.children)===null||e===void 0||e.forEach(function(o){var u=r[o.id];u===!0?n.push((0,E.WO)(o.title)):u&&n.push(u)}),n}function Z(r,i,e){var n,o=[];return(n=i.children)===null||n===void 0||n.forEach(function(u){var s=r[u.id];o=e.filter(function(h){return s.includes(h.id)})}),o}function Q(r,i){var e,n=[],o=i==null?void 0:i.dataSource;return o&&((e=i.children)===null||e===void 0||e.forEach(function(u){if(r.hasOwnProperty(u.id)){var s,h=(s=o)===null||s===void 0?void 0:s.find(function(m){return m.value===r[u.id]});h?(o=h.children,n.push(h.label)):n.push("")}})),n}function D(r,i){var e,n=[];return(e=i.row)===null||e===void 0||e.forEach(function(o){var u=o.id,s=(0,E.WO)(o.title);n.push("".concat(s,":(").concat(M(r[u],i),")"))}),n}function H(r,i){var e=[];return r.forEach(function(n){e.push("(".concat(M(n,i),")"))}),e}function T(r){var i=Math.floor(r/(36e5*24)),e=Math.floor(r/36e5%24),n=Math.floor(r/6e4%60),o=Math.floor(r/1e3%60),u="";return i>0&&(u+=i+"\u5929"),e>0&&(u+=e+"\u5C0F\u65F6"),n>0&&(u+=n+"\u5206\u949F"),o>0&&(u+=o+"\u79D2"),u}},32322:function(K,x,t){"use strict";t.d(x,{g:function(){return at}});var N=t(77576),C=t(12028),R=t(34792),f=t(48086),W=t(20136),E=t(55241),F=t(49111),S=t(19650),I=t(3182),M=t(13062),Z=t(71230),Q=t(89032),D=t(15746),H=t(58024),T=t(39144),r=t(22385),i=t(69713),e=t(57663),n=t(71577),o=t(2824),u=t(402),s=t(59289),h=t(47673),m=t(4107),p=t(94043),z=t.n(p),q=t(68628),_=t(23538),G=t(77613),X=t(89239),U=t(67294),J=t(92592),Y=t(43711),a=t(85893),tt=m.Z.Search,ot=s.Z.Link,w=function(l){return[{title:"\u95EE\u5377\u603B\u6570",desc:(0,a.jsx)("span",{children:"\u95EE\u5377\u521B\u5EFA\u4E4B\u540E\u586B\u5199\u7684\u95EE\u5377\u6570\u91CF\u603B\u548C"}),total:(l==null?void 0:l.total)||0},{title:"\u4ECA\u65E5\u65B0\u589E",desc:(0,a.jsx)("span",{children:"\u8BE5\u6570\u636E\u6307\u7684\u662F\u4ECA\u65E5\u5185\uFF0C\u6240\u6709\u8BBF\u5BA2\u5728\u8BE5\u95EE\u5377\u5185\u63D0\u4EA4\u6570\u636E\u7684\u603B\u548C"}),total:(l==null?void 0:l.totalOfToday)||0},{title:"\u5E73\u5747\u586B\u5199\u65F6\u957F",desc:(0,a.jsx)("span",{children:"\u5E73\u5747\u586B\u5199\u65F6\u957F=\u5355\u6761\u6570\u636E\u586B\u5199\u65F6\u957F\u603B\u548C/\u6570\u636E\u6761\u6570"}),total:(0,X.gh)((l==null?void 0:l.averageDuration)||0)},{title:"\u6700\u8FD1\u66F4\u65B0\u65F6\u95F4",desc:(0,a.jsx)("span",{children:"\u6700\u8FD1\u4E00\u6B21\u95EE\u5377\u586B\u5199\u65F6\u95F4"}),total:l!=null&&l.lastUpdate?"".concat((0,X.gh)(new Date().getTime()-(l.lastUpdate||0)),"\u524D"):"\u672A\u5F00\u59CB"}]},nt=(0,G.P)(function(){var c=(0,Y.o)(),l=c.loading,A=(0,U.useState)(w(c.project)),d=(0,o.Z)(A,2),$=d[0],B=d[1];return(0,U.useEffect)(function(){var j=window.setInterval(function(){B(w(c.project))},1e3);return function(){return clearInterval(j)}},[]),(0,a.jsx)(Z.Z,{gutter:[20,20],className:"data-info",children:$.map(function(j){return(0,a.jsx)(D.Z,{sm:6,xs:24,children:(0,a.jsxs)(T.Z,{loading:l,children:[(0,a.jsx)("div",{className:"title",children:(0,a.jsx)(n.Z,{type:"link",className:"total",children:j.total})}),(0,a.jsxs)("div",{className:"desc",children:[j.title,(0,a.jsx)(i.Z,{overlay:j.desc,placement:"bottom",children:(0,a.jsx)(q.Z,{className:"desc-info"})})]})]})},j.title)})})});function et(c){return"".concat(window.location.origin,"/s/").concat(c)}var at=(0,G.P)(function(){var c,l,A,d=(0,Y.o)(),$=d.loading,B=et(d.shortId),j=(0,U.useState)(""),k=(0,o.Z)(j,2),it=k[0],b=k[1];(0,U.useEffect)(function(){function y(){return v.apply(this,arguments)}function v(){return v=(0,I.Z)(z().mark(function g(){return z().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:J.toDataURL(B,{errorCorrectionLevel:"H",type:"image/jpeg",quality:.3,margin:1,color:{dark:"#010599FF",light:"#FFBF60FF"}}).then(function(P){b(P)}).catch(function(P){console.error(P)});case 1:case"end":return O.stop()}},g)})),v.apply(this,arguments)}y()},[B]);var V=(0,U.useCallback)(function(){var y=(0,I.Z)(z().mark(function v(g){return z().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:J.toDataURL(B,{errorCorrectionLevel:"H",margin:1,color:{dark:"#010599FF",light:"#FFBF60FF"},width:g}).then(function(P){b(P);var L=document.createElement("a");L.href=P,L.setAttribute("download","".concat(d.name,"_").concat(g,".png")),document.body.appendChild(L),L.click(),document.body.removeChild(L)});case 1:case"end":return O.stop()}},v)}));return function(v){return y.apply(this,arguments)}}(),[B,d]);return(0,a.jsxs)("div",{className:"survey-overview",children:[(0,a.jsx)("div",{className:"survey-title",children:d.name}),(0,a.jsx)(nt,{}),(0,a.jsx)(Z.Z,{gutter:[20,20],style:{marginTop:20},children:(0,a.jsx)(D.Z,{sm:12,xs:24,children:(0,a.jsx)(T.Z,{loading:$,children:(0,a.jsxs)(Z.Z,{gutter:[10,10],children:[(0,a.jsxs)(D.Z,{span:24,className:"setting-item",children:[(0,a.jsx)(tt,{value:B,style:{width:360},enterButton:"\u6253\u5F00",className:"open-target",onSearch:function(){window.open("/s/".concat(d.shortId))}}),(0,a.jsx)(E.Z,{content:(0,a.jsxs)("div",{children:[(0,a.jsx)("img",{src:it,height:150,width:150}),(0,a.jsx)("div",{style:{textAlign:"center"},children:(0,a.jsxs)(S.Z,{children:[(0,a.jsx)(n.Z,{size:"small",type:"link",onClick:function(){return V(256)},children:"\u5C0F\u53F7"}),(0,a.jsx)(n.Z,{size:"small",type:"link",onClick:function(){return V(512)},children:"\u4E2D\u53F7"}),(0,a.jsx)(n.Z,{size:"small",type:"link",onClick:function(){return V(1024)},children:"\u5927\u53F7"})]})})]}),title:"".concat(d.name,"(\u4E8C\u7EF4\u7801)"),trigger:["click"],children:(0,a.jsx)(_.Z,{style:{fontSize:30}})})]}),(0,a.jsxs)(D.Z,{className:"setting-item",span:24,children:[(0,a.jsx)("div",{className:"title",children:"\u95EE\u5377\u5F00\u542F/\u505C\u6B62"}),(0,a.jsx)("div",{children:(0,a.jsx)(C.Z,{defaultChecked:((c=d.project)===null||c===void 0?void 0:c.status)===1,onChange:function(v){d.saveOrUpdateProject({status:v?1:0}).then(function(g){g.code===200?v?f.default.info("\u95EE\u5377\u5DF2\u5F00\u542F"):f.default.warn("\u95EE\u5377\u5DF2\u505C\u6B62"):f.default.error(g.message)})}})})]}),(0,a.jsxs)(D.Z,{className:"setting-item",span:24,children:[(0,a.jsx)("div",{className:"title",children:"\u95EE\u5377\u586B\u5199\u65F6\u81EA\u52A8\u4FDD\u5B58"}),(0,a.jsx)("div",{children:(0,a.jsx)(C.Z,{defaultChecked:(l=d.project)===null||l===void 0||(A=l.setting)===null||A===void 0?void 0:A.answerSetting.autoSave,onChange:function(v){d.updateSetting({answerSetting:{autoSave:v}}).then(function(g){g.code===200?v?f.default.info("\u6682\u5B58\u5DF2\u5F00\u542F"):f.default.warn("\u6682\u5B58\u5DF2\u505C\u6B62"):f.default.error(g.message)})}})})]})]})})})})]})}),rt=function(){return _jsxs("svg",{viewBox:"0 0 1024 1024","p-id":"1192",width:"24",height:"24",children:[_jsx("path",{d:"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z",fill:"#fff","p-id":"1193"}),_jsx("path",{d:"M634.8288 787.712a73.8304 73.8304 0 0 1-64.9216-72.6016 75.9296 75.9296 0 0 1 66.56-88.5248 8.6016 8.6016 0 0 0 0-17.152h-346.7264v-344.4224a74.1376 74.1376 0 0 1 59.8016-60.2112h380.0576a69.6832 69.6832 0 0 1 75.264 73.8304 47.6672 47.6672 0 0 1-15.36 31.0784h-69.5296v417.7408a74.1376 74.1376 0 0 1-59.8016 60.2112z m-46.08 0h-312.7808a79.8208 79.8208 0 0 1-71.3728-79.6672 83.2512 83.2512 0 0 1 70.8608-81.5104h305.7664a117.4016 117.4016 0 0 0-28.5184 89.856 100.4032 100.4032 0 0 0 36.1472 71.2704z m15.616-428.5952h-113.8688c-6.5024 0-11.6224 7.8336-11.6224 17.6128s5.12 17.664 11.6224 17.664h113.8688c6.5024 0 11.6224-7.8336 11.6224-17.664s-5.12-17.6128-11.6224-17.6128z m0 136.192h-113.8688c-6.5024 0-11.6224 7.8336-11.6224 17.664s5.12 17.6128 11.6224 17.6128h113.8688c6.5024 0 11.6224-7.8336 11.6224-17.6128s-5.12-17.664-11.6224-17.664z m-194.0992-153.2928a34.304 34.304 0 1 0 34.304 34.304 34.304 34.304 0 0 0-34.048-34.3552z m0 137.1648a34.304 34.304 0 1 0 34.304 34.304 34.304 34.304 0 0 0-34.048-34.4064z m357.6832-202.3936c0-25.1904-7.7824-36.864-25.0368-36.864s-25.1392 11.5712-25.1392 36.864z",fill:"black","p-id":"1194"})]})},lt=function(l){return _jsx(Icon,_objectSpread({component:rt},l))}},89247:function(K,x,t){"use strict";t.r(x),t.d(x,{Overview:function(){return S},SurveyContext:function(){return F.ZX},SurveyDataProvider:function(){return F.fQ},api:function(){return F.hi}});var N=t(11849),C=t(51615),R=t(77613),f=t(96703),W=t(32322),E=t(85893),F=t(78336),S=(0,R.P)(function(I){var M=(0,C.UO)(),Z=M.shortId;return Z==="new"?(0,E.jsx)(f.default,(0,N.Z)({},I)):(0,E.jsx)(W.g,{})});x.default=S}}]);
