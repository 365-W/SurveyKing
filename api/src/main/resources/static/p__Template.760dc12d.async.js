(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2974],{58146:function(I){I.exports={standardFormRow:"standardFormRow___1YytV",label:"label___12r3x",content:"content___1TohL",standardFormRowLast:"standardFormRowLast___3Ewjs",standardFormRowBlock:"standardFormRowBlock___2xtd8",standardFormRowGrid:"standardFormRowGrid___3D9br"}},82843:function(I){I.exports={tagSelect:"tagSelect___28brO",expanded:"expanded___2n85Z",trigger:"trigger___3hQQL",anticon:"anticon___3z9aU",hasExpandTag:"hasExpandTag___2D-qj"}},66514:function(I,k,a){"use strict";a.r(k),a.d(k,{default:function(){return Ae}});var Be=a(47673),ne=a(4107),j=a(2824),re=a(84452),Ve=a(54421),O=a(38272),Z=a(89835),$=a(77613),$e=a(58024),b=a(39144),be=a(9715),Y=a(86585),G=a(11849),F=a(32059),se=a(93224),i=a(67294),le=a(94184),M=a.n(le),oe=a(58146),y=a.n(oe),e=a(85893),ie=function(t){var n,r=t.title,s=t.children,o=t.last,v=t.block,c=t.grid,l=(0,se.Z)(t,["title","children","last","block","grid"]),x=M()(y().standardFormRow,(n={},(0,F.Z)(n,y().standardFormRowBlock,v),(0,F.Z)(n,y().standardFormRowLast,o),(0,F.Z)(n,y().standardFormRowGrid,c),n));return(0,e.jsxs)("div",(0,G.Z)((0,G.Z)({className:x},l),{},{children:[r&&(0,e.jsx)("div",{className:y().label,children:(0,e.jsx)("span",{children:r})}),(0,e.jsx)("div",{className:y().content,children:s})]}))},W=ie,de=a(86582),Ye=a(71153),ce=a(60331),ve=a(58491),ue=a(57254),me=a(82843),E=a.n(me),K=ce.Z.CheckableTag,Q=function(t){var n=t.children,r=t.checked,s=t.onChange,o=t.value;return(0,e.jsx)(K,{checked:!!r,onChange:function(c){return s&&s(o,c)},children:n},o)};Q.isTagSelectOption=!0;var J=function(t){var n,r=t.children,s=t.hideCheckAll,o=s===void 0?!1:s,v=t.className,c=t.style,l=t.expandable,x=t.actionsText,C=x===void 0?{}:x,S=t.onChange,z=(0,i.useState)(!1),B=(0,j.Z)(z,2),N=B[0],R=B[1],A=(0,i.useState)(t.value||[]),V=(0,j.Z)(A,2),f=V[0],P=V[1],m=function(u){return u&&u.type&&(u.type.isTagSelectOption||u.type.displayName==="TagSelectOption")},T=function(){var u=i.Children.toArray(r),p=u.filter(function(g){return m(g)}).map(function(g){return g.props.value});return p||[]},H=function(u){var p=[];u&&(p=T()),S&&S(p),P(p)},Pe=function(u,p){var g=(0,de.Z)(f||[]),U=g.indexOf(u);p&&U===-1?g.push(u):!p&&U>-1&&g.splice(U,1),P(g),S&&S(g)},Ie=T().length===(f==null?void 0:f.length),ee=C.expandText,Oe=ee===void 0?"\u66F4\u591A":ee,ae=C.collapseText,Ee=ae===void 0?"\u6536\u8D77":ae,te=C.selectAllText,Le=te===void 0?"\u5168\u90E8":te,ze=M()(E().tagSelect,v,(n={},(0,F.Z)(n,E().hasExpandTag,l),(0,F.Z)(n,E().expanded,N),n));return(0,e.jsxs)("div",{className:ze,style:c,children:[o?null:(0,e.jsx)(K,{checked:Ie,onChange:H,children:Le},"tag-select-__all__"),r&&i.Children.map(r,function(h){return m(h)?i.cloneElement(h,{key:"tag-select-".concat(h.props.value),value:h.props.value,checked:f&&f.indexOf(h.props.value)>-1,onChange:Pe}):h}),l&&(0,e.jsx)("a",{className:E().trigger,onClick:function(){R(function(u){return!u})},children:N?(0,e.jsxs)(e.Fragment,{children:[Ee," ",(0,e.jsx)(ve.Z,{})]}):(0,e.jsxs)(e.Fragment,{children:[Oe,(0,e.jsx)(ue.Z,{})]})})]})};J.Option=Q;var L=J,X=Y.Z.Item,w=(0,$.P)(function(d){var t=d.shared,n=(0,Z.dk)(t),r=n.tags,s=n.categories,o=Y.Z.useForm(),v=(0,j.Z)(o,1),c=v[0];return(0,e.jsx)(b.Z,{bordered:!1,children:(0,e.jsxs)(Y.Z,{layout:"inline",form:c,onValuesChange:function(x){n.loadTemplates(x)},children:[(0,e.jsx)(W,{title:"\u5206\u7C7B",block:!0,style:{paddingBottom:11},children:(0,e.jsx)(X,{name:"categories",children:(0,e.jsx)(L,{expandable:!0,children:s.map(function(l){return(0,e.jsx)(L.Option,{value:l,children:l},l)})})})}),(0,e.jsx)(W,{title:"\u6807\u7B7E",block:!0,style:{paddingBottom:11},children:(0,e.jsx)(X,{name:"tags",children:(0,e.jsx)(L,{expandable:!0,children:r.map(function(l){return(0,e.jsx)(L.Option,{value:l,children:l},l)})})})})]})})}),De=a(49111),he=a(19650),He=a(57663),q=a(71577),Ue=a(402),ge=a(59289),xe=a(27484),D=a.n(xe),fe=a(42285),ke=a(71194),pe=a(5644),je=a(33760),Se=a(29623),Te=function(t){var n=t.onOk,r=t.schema,s=t.onClose,o=new Se.j$(r).serialize(),v=(0,i.useRef)(null);return(0,e.jsx)(pe.Z,{visible:!0,onCancel:s,width:750,title:"".concat(r.title,"-\u9884\u89C8"),className:"template-preview-modal",okText:"\u7ACB\u5373\u4F7F\u7528",onOk:n,children:(0,e.jsx)("div",{style:{maxHeight:600,overflowY:"auto"},children:(0,e.jsx)(je.Z,{ref:v,schema:o,headerVisible:!1,paginationVisible:!1,footerVisible:!1})})})},ye=a(84110),Ce=a.n(ye),Ge=a(33852);D().locale("zh-cn"),D().extend(Ce());var Ze=ge.Z.Paragraph,_=function(t){var n=t.item,r=(0,i.useRef)(-1),s=(0,i.useState)(0),o=(0,j.Z)(s,2),v=o[0],c=o[1],l=(0,i.useRef)(1),x=(0,i.useState)(!1),C=(0,j.Z)(x,2),S=C[0],z=C[1],B=(0,i.useState)(!1),N=(0,j.Z)(B,2),R=N[0],A=N[1];(0,i.useEffect)(function(){var m=new Image;m.src="/api/public/preview/".concat(n.previewUrl),m.onload=function(){var T=m.height;l.current=T}},[n]);var V=function(){if(!R){z(!0);var T=-1,H=300;clearInterval(r.current),r.current=window.setInterval(function(){T++,c(T*H/l.current)},20)}},f=function(){R||(clearInterval(r.current),c(0),z(!1))};(0,i.useEffect)(function(){clearInterval(r.current)},[]);var P=function(){A(!1),clearInterval(r.current),setTimeout(function(){localStorage.setItem("temp-template",JSON.stringify(n.template)),fe.m8.push("/survey/new?fromTemplate")},20)};return(0,e.jsxs)(b.Z,{onMouseEnter:V,onMouseLeave:f,className:"card",hoverable:!0,cover:(0,e.jsx)("div",{style:{backgroundImage:"url(/api/public/preview/".concat(n.previewUrl,")"),overflowY:"hidden",height:200,width:"100%",backgroundSize:"cover",backgroundPosition:"center top",backgroundPositionY:"".concat(v,"%")}}),children:[(0,e.jsx)(b.Z.Meta,{title:(0,e.jsx)("a",{children:n.name}),description:(0,e.jsx)(Ze,{className:"item",ellipsis:{rows:2}})}),(0,e.jsxs)("div",{className:"cardItemContent",children:[S&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(q.Z,{type:"dashed",onClick:function(){A(!0),clearInterval(r.current)},children:"\u9884\u89C8"}),(0,e.jsx)(q.Z,{type:"dashed",onClick:function(){return P()},children:"\u5E94\u7528"})]})}),!S&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:D()(n.createAt).fromNow()}),(0,e.jsx)("div",{className:"avatarList"})]})]}),R&&(0,e.jsx)(Te,{id:n.id,schema:n.template,onOk:P,onClose:function(){A(!1)}})]})},Fe=(0,$.P)(function(){var d=(0,Z.dk)(1),t=d.loading,n=d.categories,r=d.tags,s=d.templates;(0,i.useEffect)(function(){r.length===0&&d.loadTags(),n.length===0&&d.loadCategories()},[]),(0,i.useEffect)(function(){d.loadTemplates({current:1,pageSize:10})},[]);var o=s&&(0,e.jsx)(O.ZP,{rowKey:"id",loading:t,grid:{gutter:16,xs:1,sm:2,md:3,lg:4,xl:6,xxl:6},dataSource:s,renderItem:function(c){return(0,e.jsx)(O.ZP.Item,{children:(0,e.jsx)(_,{item:c})})}});return(0,e.jsxs)("div",{className:"coverCardList",children:[(0,e.jsx)(w,{shared:1}),(0,e.jsx)("div",{className:"cardList",children:o})]})}),Ne=(0,$.P)(function(){var d=!1,t=(0,Z.dk)(0),n=t.categories,r=t.tags,s=t.templates;(0,i.useEffect)(function(){r.length===0&&t.loadTags(),n.length===0&&t.loadCategories()},[]),(0,i.useEffect)(function(){t.loadTemplates({current:1,pageSize:10})},[]);var o=s&&(0,e.jsx)(O.ZP,{rowKey:"id",loading:d,grid:{gutter:16,xs:1,sm:2,md:3,lg:4,xl:6,xxl:6},dataSource:s,renderItem:function(c){return(0,e.jsx)(O.ZP.Item,{children:(0,e.jsx)(_,{item:c})})}});return(0,e.jsxs)("div",{className:"coverCardList",children:[(0,e.jsx)(w,{shared:0}),(0,e.jsx)("div",{className:"cardList",children:o})]})}),Re=[{key:"public",tab:"\u516C\u5171\u5E93"},{key:"private",tab:"\u79C1\u6709\u5E93"}];function Ae(){var d=(0,i.useState)("public"),t=(0,j.Z)(d,2),n=t[0],r=t[1],s=function(l){r(l)},o=(0,Z.dk)(0),v=(0,Z.dk)(1);return(0,e.jsxs)(re.ZP,{className:"survey-template",tabList:Re,onTabChange:s,content:(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsx)(ne.Z.Search,{className:"search",placeholder:"\u8F93\u5165\u6A21\u677F\u540D\u5B57\u68C0\u7D22",enterButton:"\u641C\u6A21\u677F",size:"large",onSearch:function(l){n==="public"?v.loadTemplates({name:l,current:1,pageSize:10}):o.loadTemplates({name:l,current:1,pageSize:10})},style:{maxWidth:522,width:"100%"}})}),children:[n==="public"&&(0,e.jsx)(Fe,{}),n==="private"&&(0,e.jsx)(Ne,{})]})}}}]);
