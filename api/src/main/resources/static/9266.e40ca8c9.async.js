(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9266],{55317:function(Ye,Pe,s){"use strict";s.d(Pe,{Mt:function(){return $e},hl:function(){return ue},AT:function(){return Ce},ko:function(){return U},HN:function(){return t},we:function(){return oe},k9:function(){return C},jI:function(){return k}});var Y=s(95566),w=s(67294),m=s(86150),ie=s(25837),W=s(98210),f=s(85893);function C(S){var E=(0,w.useContext)(m.ZX),F=E.theme,H=E.footerVisible,q=E.headerVisible,_=S.schema,I=function(J){var ae=(0,ie.GZ)(F,"Survey");if(ae)return w.createElement(ae,{schema:_,footerVisible:H,headerVisible:q},J)},te=function(){var J,ae=-1;return(J=_.children)===null||J===void 0?void 0:J.map(function(je){var T=je.type,P=je.id;return(0,W.nj)(T)||ae++,T==="QuestionSet"?(0,f.jsx)(oe,{schema:je,index:ae},P):(0,f.jsx)(t,{schema:je,index:ae},P)})};return(0,f.jsxs)(f.Fragment,{children:[I(te()),(0,f.jsx)(Y.gN,{name:"_finish"})]})}var pe=s(32059),de=s(2824),K=s(86582),b=s(11849);function Q(S){var E,F=[],H=S.attribute;return H&&H.required&&F.push({required:!0,triggerType:"onInput"}),(E=S.children)===null||E===void 0||E.forEach(function(q){F.push.apply(F,(0,K.Z)(y(q,S)))}),F}function y(S,E){var F,H,q,_,I=[];if((F=S.attribute)!==null&&F!==void 0&&F.dataType){var te;I.push((te={},(0,pe.Z)(te,S.attribute.dataType,!0),(0,pe.Z)(te,"schema",(0,b.Z)((0,b.Z)({},S),{},{parent:E})),te))}return(H=S.attribute)!==null&&H!==void 0&&H.required&&I.push({required:!0,schema:(0,b.Z)((0,b.Z)({},S),{},{parent:E})}),(q=S.attribute)!==null&&q!==void 0&&q.textLimit&&I.push({textLimit:!0,schema:(0,b.Z)((0,b.Z)({},S),{},{parent:E})}),(_=S.attribute)!==null&&_!==void 0&&_.scope&&I.push({scope:!0,schema:(0,b.Z)((0,b.Z)({},S),{},{parent:E})}),I}var B=s(80705),t=(0,Y.Pi)(function(E){var F=E.schema,H=E.index,q=E.qsIndex,_=F.id,I=F.type,te=(0,w.useContext)(m.ZX),O=te.theme,J=te.optionTypes,ae=(0,w.useMemo)(function(){return(0,W.cB)(F,"calculate")},[]);if((0,W.nj)(F.type))return(0,f.jsx)(Y.jG,{name:_,component:[(0,w.useMemo)(function(){return(0,Y.$j)((0,ie.I8)(O,I),(0,Y.jM)(function(T,P){return(0,b.Z)({},T)}))},[O,I]),{schema:F,controlShow:void 0}]});var je=(0,w.useCallback)(function(T){return(0,f.jsx)("div",{tabIndex:-1,onBlur:T==null?void 0:T.onBlur,children:w.createElement((0,ie.GZ)(O,"Question"),T)})},[]);return(0,f.jsx)(Y.gN,{name:_,component:[(0,w.useMemo)(function(){return(0,Y.$j)((0,ie.I8)(O,I),(0,Y.jM)(function(T,P){return(0,b.Z)((0,b.Z)({},T),{},{onChange:function(A){if(!T.readOnly){if((0,B.xb)(A)){P.onInput(void 0);return}if(I.startsWith("Matrix")&&(0,W.hb)(A)){P.onInput(void 0);return}A&&Object.keys(A).forEach(function(le){A[le]===void 0&&(A[le]="")}),P.onInput(A)}}})}))},[O,I]),{schema:F,controlShow:void 0}],decorator:[(0,w.useMemo)(function(){return(0,Y.$j)(je,(0,Y.jM)(function(T,P){return(0,b.Z)((0,b.Z)({},T),{},{error:P.selfErrors.length?(0,K.Z)(P.selfErrors):[],warning:P.selfWarnings.length?P.selfWarnings:[],onBlur:function(){return P.onBlur.apply(P,arguments)},required:P.required})}))},[O]),{schema:F,index:H,qsIndex:q}],validator:Q(F),reactions:[function(T){Object.entries(ae).forEach(function(P){var ne=(0,de.Z)(P,2),A=ne[0],le=ne[1],Me=le,se=(0,W.vW)(Me,function(ce){var fe=(0,W.Op)(ce),me=(0,de.Z)(fe,2),Be=me[0],Ue=me[1],we=T.query(Be).get("value");return(0,W.d0)(J,we,ce)});se.success&&T.setState(function(ce){var fe;return ce.value=(0,b.Z)((0,b.Z)({},ce.value),{},(0,pe.Z)({},A,(0,W.A7)(se.result,(fe=F.children)===null||fe===void 0?void 0:fe.find(function(me){return me.id===A}))))})})},function(T){var P,ne=(P=F.attribute)===null||P===void 0?void 0:P.visibleRule;if(ne){var A=(0,W.vW)(ne,function(le){var Me=(0,W.Op)(le),se=(0,de.Z)(Me,2),ce=se[0],fe=se[1],me=T.query(ce).get("value");return(0,W.d0)(J,me,le)});A.success&&(A.result?T.display="visible":T.display="none")}},function(T){var P,ne=(P=F.attribute)===null||P===void 0?void 0:P.requiredRule;if(ne){var A=(0,W.vW)(ne,function(le){var Me=(0,W.Op)(le),se=(0,de.Z)(Me,2),ce=se[0],fe=se[1],me=T.query(ce).get("value");return(0,W.d0)(J,me,le)});A.success&&(A.result?T.required=!0:T.required=!1)}}]})});function oe(S){var E=S.schema,F=S.index,H=E.id,q=(0,w.useContext)(m.ZX),_=q.theme,I=function(){var O;return(O=E.children)===null||O===void 0?void 0:O.map(function(J,ae){return(0,f.jsx)(t,{schema:J,index:ae,qsIndex:F},J.id)})};return(0,f.jsx)(Y.jG,{name:H,decorator:[(0,ie.GZ)(_,"QuestionSet"),{schema:E,index:F}],children:I()})}var ye=s(15020),ue=function(E){var F=E.html,H=F===void 0?"":F;return(0,f.jsx)(f.Fragment,{children:typeof H=="string"&&(0,ye.ZP)(H.replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))})},U=function(){var E=(0,w.useState)(0),F=(0,de.Z)(E,2),H=F[0],q=F[1];return(0,w.useEffect)(function(){var _=document.querySelector(".survey");_.addEventListener("scroll",function(){var I=_,te=document.body,O="scrollTop",J="scrollHeight",ae=(I[O]||te[O])/((I[J]||te[J])-I.clientHeight)*100;q(ae)})},[]),(0,f.jsx)("div",{className:"progress-bar",style:{width:"".concat(H,"%")}})},Ne=s(16165),Ie=function(){return(0,f.jsxs)("svg",{viewBox:"0 0 1024 1024",width:"150",height:"150",children:[(0,f.jsx)("path",{d:"M0 0h1024v1024H0z",fill:"#FFFFFF","p-id":"44112"}),(0,f.jsx)("path",{d:"M160 73.426667h83.173333V0h98.266667v155.010667h75.6v179.485333h37.813333V163.168h22.666667v-40.8h68.053333v24.474667h30.24v342.666666h60.48V40.8h45.36v236.586667h22.666667V179.485333h45.36V16.317333H893.333333V824H160V73.426667z",fill:"#DDEEFF",opacity:".4","p-id":"44113"}),(0,f.jsx)("path",{d:"M362.693333 741.416l635.866667 95.584L689.893333 997.333333 24 852.36z",fill:"#DFE7F7","p-id":"44114"}),(0,f.jsx)("path",{d:"M1002.64 813.370667l-307.6 160.322666-665.893333-144.970666-0.826667-2.629334v-8.213333l20.586667 2.666667v1.701333l318.933333-104.469333 614.213333 92.48v-5.101334H1002.666667v8.213334h-0.026667z",fill:"#5AA12E","p-id":"44115"}),(0,f.jsx)("path",{d:"M1002.64 805.157333l-308.64 160.314667-665.653333-144.92h-0.026667l-0.213333-0.04 0.213333-0.064v-8.104l17.733333 2.296 320.746667-105.066667 615.253333 92.488v-5.098666H1002.666667v8.213333h-0.026667z",fill:"#93C110","p-id":"44116"}),(0,f.jsx)("path",{d:"M366.8 701.333333L1002.666667 796.917333l-308.666667 160.333334L28.106667 812.266667z",fill:"#EEF2F5","p-id":"44117"}),(0,f.jsx)("path",{d:"M629.333333 809.333333a138.666667 6.666667 0 1 0 277.333334 0 138.666667 6.666667 0 1 0-277.333334 0Z",fill:"#E3E7EA","p-id":"44118"}),(0,f.jsx)("path",{d:"M162.666667 773.333333a152 13.333333 0 1 0 304 0 152 13.333333 0 1 0-304 0Z",fill:"#E3E7EA","p-id":"44119"}),(0,f.jsx)("path",{d:"M922.666667 610.666667h-64v170.666666h53.333333a13.333333 13.333333 0 0 1 0 26.666667h-181.333333a13.333333 13.333333 0 0 1 0-26.666667h58.666666v-144h-26.666666a10.666667 10.666667 0 0 1-10.666667-10.666666v-16h-117.333333v82.666666a8 8 0 0 1-16 0v-82.666666h-5.333334a10.666667 10.666667 0 0 1-10.666666-10.666667v-2.666667l48-50.666666h4.48a7.658667 7.658667 0 0 1 1.573333-0.968l187.093333-83.381334a10.4 10.4 0 0 1 14.773334 6.208l72.453333 81.178667a8.066667 8.066667 0 0 1 2.08 5.461333 11.581333 11.581333 0 0 1 0.213333 2.168v42.666667a10.666667 10.666667 0 0 1-10.666666 10.666667z m-272-42.666667l-26.666667 29.333333h26.666667v-29.333333z m117.333333 53.333333h66.666667v-58.666666h-29.333334l-37.333333 37.333333v21.333333z m-16-24l37.333333-37.333333h-37.333333v37.333333z m-45.333333 0h21.333333v-37.333333h-21.333333v37.333333z m-18.666667-37.333333h-21.333333v37.333333h21.333333v-37.333333z m5.84-13.333333h96.693333a9.224 9.224 0 0 1 0.693334-1.6l32.506666-56.290667zM842.666667 487.976L808.773333 546.666667H842.666667v-58.690667zM845.333333 648h-42.666666v26.666667h42.666666v-26.666667z m0 37.333333h-42.666666v42.666667h42.666666v-42.666667z m0 53.333334h-42.666666v42.666666h42.666666v-42.666666z m13.333334-141.333334h21.333333v-37.333333h-21.333333v37.333333z m0-104.690666V546.666667h48.213333zM917.333333 560h-21.333333v37.333333h21.333333v-37.333333z",fill:"#8BC8FF","p-id":"44120"}),(0,f.jsx)("path",{d:"M592 709.333333h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H514.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H592a8 8 0 0 1 0 16z",fill:"#DFF0FF","p-id":"44121"}),(0,f.jsx)("path",{d:"M936 298.666667h-58.666667a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205334 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205333H858.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205333 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205334H936a8 8 0 0 1 0 16z",fill:"#C3E2FF","p-id":"44122"}),(0,f.jsx)("path",{d:"M104 408H45.333333a8 8 0 0 1 0-16h12.133334a0.656 0.656 0 0 0-0.08-0.205333 5.304 5.304 0 0 0 0-10.256 0.656 0.656 0 0 0 0.08-0.205334H26.666667a8 8 0 0 1 0-16h58.666666a8 8 0 0 1 0 16h-9.466666a0.656 0.656 0 0 0 0.08 0.205334 5.304 5.304 0 0 0 0 10.256 0.656 0.656 0 0 0-0.08 0.205333H104a8 8 0 0 1 0 16z",fill:"#DCEEFF","p-id":"44123"}),(0,f.jsx)("path",{d:"M309.333333 522.666667m-245.333333 0a245.333333 245.333333 0 1 0 490.666667 0 245.333333 245.333333 0 1 0-490.666667 0Z",fill:"#FFCC6C","p-id":"44124"}),(0,f.jsx)("path",{d:"M296 730.666667a245.389333 245.389333 0 0 0 237.013333-308.746667 245.333333 245.333333 0 1 1-460.693333 164.16A245.333333 245.333333 0 0 0 296 730.666667z",fill:"#F3B72C","p-id":"44125"}),(0,f.jsx)("path",{d:"M338.666667 464m-50.666667 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#E49817","p-id":"44126"}),(0,f.jsx)("path",{d:"M333.333333 456m-50.666666 0a50.666667 50.666667 0 1 0 101.333333 0 50.666667 50.666667 0 1 0-101.333333 0Z",fill:"#FFFFFF","p-id":"44127"}),(0,f.jsx)("path",{d:"M303.333333 603.2a37.085333 37.085333 0 1 1-38 37.066667 37.544 37.544 0 0 1 38-37.066667z",fill:"#E49817","p-id":"44128"}),(0,f.jsx)("path",{d:"M299.333333 597.333333A37.085333 37.085333 0 1 1 261.333333 634.4a37.544 37.544 0 0 1 38-37.066667z",fill:"#FFFFFF","p-id":"44129"}),(0,f.jsx)("path",{d:"M182.786667 554.125333m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#E49817","p-id":"44130"}),(0,f.jsx)("path",{d:"M179.88 549.874667m-27.88 0a27.88 27.88 0 1 0 55.76 0 27.88 27.88 0 1 0-55.76 0Z",fill:"#FFFFFF","p-id":"44131"}),(0,f.jsx)("path",{d:"M251.733333 320.424a19.794667 19.794667 0 1 1-20.266666 19.789333 20.026667 20.026667 0 0 1 20.266666-19.789333z",fill:"#E49817","p-id":"44132"}),(0,f.jsx)("path",{d:"M249.6 317.333333a19.794667 19.794667 0 1 1-20.266667 19.786667 20.026667 20.026667 0 0 1 20.266667-19.786667z",fill:"#FFFFFF","p-id":"44133"}),(0,f.jsx)("path",{d:"M426.04 365.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44134"}),(0,f.jsx)("path",{d:"M419.293333 357.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44135"}),(0,f.jsx)("path",{d:"M466.04 589.04m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#E49817","p-id":"44136"}),(0,f.jsx)("path",{d:"M459.293333 581.626667m-13.96 0a13.96 13.96 0 1 0 27.92 0 13.96 13.96 0 1 0-27.92 0Z",fill:"#FFFFFF","p-id":"44137"}),(0,f.jsx)("path",{d:"M490.666667 860a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44138"}),(0,f.jsx)("path",{d:"M480 801.333333a42.666667 4 0 1 0 85.333333 0 42.666667 4 0 1 0-85.333333 0Z",fill:"#E3E7EA","p-id":"44139"}),(0,f.jsx)("path",{d:"M526.453333 597.12a48.968 48.968 0 0 0-4.586666-4.722667c55.493333-36.413333 83.466667-80.64 68.986666-121.04-8.746667-24.416-31.866667-44.266667-64.773333-58.512-0.346667-0.984-0.666667-1.970667-1.12-2.946666a40.712 40.712 0 0 0-3.12-5.410667c39.093333 15.2 66.72 37.432 76.72 65.333333 15.306667 42.656-14.026667 89.253333-72.106667 127.298667zM573.333333 856v5.333333s-135.84 11.306667-109.333333-136c19.866667-100.330667-32.586667-80.72-41.386667-80.112 0 0 0 0.016 0.026667 0.026667a595.552 595.552 0 0 1-66.4 17.274667c-160.48 32.136-312.186667-2.04-338.8-76.336-13.413333-37.413333 7.466667-77.866667 51.973333-112.904a31.802667 31.802667 0 0 0 0.293334 7.485333c0.053333 0.24 0.133333 0.464 0.186666 0.701333-39.04 32.48-56.933333 69.181333-44.746666 103.173334 25.493333 71.109333 172.8 103.397333 329.013333 72.114666a589.661333 589.661333 0 0 0 64.533333-16.714666L418.666667 640s72.826667-26.768 50.666666 80c-17.92 86.293333 13.146667 138.845333 104 136z",fill:"#FFE1A9","p-id":"44140"}),(0,f.jsx)("path",{d:"M512 884a74.666667 6.666667 0 1 0 149.333333 0 74.666667 6.666667 0 1 0-149.333333 0Z",fill:"#E3E7EA","p-id":"44141"}),(0,f.jsx)("path",{d:"M608.453333 802.666667h20.426667l17.093333 75.917333h-54.613333z m-6.88 15.165333h34.186667v6.752h-34.186667v-6.752z m-5.066666 16.917333h44.32v6.749334h-44.32v-6.749334z m-5.173334 21.917334h54.666667v6.749333h-54.666667v-6.749333z m-11.946666 21.917333h78.56a3.381333 3.381333 0 0 1 3.386666 3.373333 3.384 3.384 0 0 1-3.386666 3.373334h-78.56a3.384 3.384 0 0 1-3.386667-3.373334 3.381333 3.381333 0 0 1 3.386667-3.373333z",fill:"#F9A303","p-id":"44142"}),(0,f.jsx)("path",{d:"M768 838.666667a58.666667 6.666667 0 1 0 117.333333 0 58.666667 6.666667 0 1 0-117.333333 0Z",fill:"#E3E7EA","p-id":"44143"}),(0,f.jsx)("path",{d:"M880 845.333333a5.181333 5.181333 0 0 0 5.333333-5v-70a5.181333 5.181333 0 0 0-5.333333-5v80z",fill:"#845C45","p-id":"44144"}),(0,f.jsx)("path",{d:"M880 845.333333a5.181333 5.181333 0 0 1-5.333333-5v-70a5.181333 5.181333 0 0 1 5.333333-5v80z",fill:"#BA805A","p-id":"44145"}),(0,f.jsx)("path",{d:"M880 770.666667a45.333333 45.333333 0 0 0 0-90.666667v90.666667z",fill:"#628A21","p-id":"44146"}),(0,f.jsx)("path",{d:"M880 770.666667a45.333333 45.333333 0 0 1 0-90.666667v90.666667z",fill:"#6EA52E","p-id":"44147"}),(0,f.jsx)("path",{d:"M568 786.778667l-1.946667 6.824a1.130667 1.130667 0 0 1-1.173333 0.773333l-4.16-0.349333a19.581333 19.581333 0 0 1-18.88 8.477333l-13.093333-1.664 0.026666-0.04a3.733333 3.733333 0 0 1-0.986666-0.397333c-2.586667-1.504-3.706667-5.986667-3.306667-11.509334l-7.146667-1.816a3.408 3.408 0 0 1-2.56-4.173333 3.656 3.656 0 0 1 4.426667-2.4l6.453333 1.642667c0.293333-1.066667 0.613333-2.154667 1.013334-3.237334 0.213333-0.621333 0.453333-1.221333 0.693333-1.810666l-7.626667-1.938667a3.410667 3.410667 0 0 1-2.56-4.176 3.653333 3.653333 0 0 1 4.426667-2.4l9.12 2.317333a11.101333 11.101333 0 0 1 7.306667-5.472V765.333333l8.906666 1.136a18.562667 18.562667 0 0 1 16.613334 17.386667l3.813333 1.685333a1.066667 1.066667 0 0 1 0.64 1.237334z m-26.693333-20.149334c-2.693333-1.52-6.24 0.429333-9.306667 4.578667l4.08 1.032a3.392 3.392 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-5.68-1.437333c-0.24 0.573333-0.48 1.16-0.693333 1.765333q-0.6 1.642667-1.04 3.274667l6.88 1.744a3.389333 3.389333 0 0 1 2.533333 4.173333 3.610667 3.610667 0 0 1-4.4 2.4l-6.133333-1.557333c-0.32 5.184 0.853333 9.368 3.386667 10.805333 4.053333 2.298667 10.08-3.309333 13.44-12.533333s2.853333-18.52-1.2-20.818667z",fill:"#FF6767","p-id":"44148"}),(0,f.jsx)("path",{d:"M578.666667 789.333333s194 0.666667 98.666666 64l-2.666666-2.666666s100.826667-53-98.666667-58.666667z",fill:"#FFE1A9","p-id":"44149"})]})},Ce=function(E){return(0,f.jsx)(Ne.Z,(0,b.Z)({component:Ie},E))},he=s(27484),Ve=s.n(he),De=s(75977),We=s(45418),Ae=s(62713),Ge=s(33852),Qe=s(10285),Fe=s.n(Qe),Xe=s(72540),Re=s.n(Xe),He=s(96036),Oe=s.n(He);Ve().locale("zh-cn"),Ve().extend(Re()),Ve().extend(Fe()),Ve().extend(Oe());var $e=(0,We.default)((0,b.Z)({},De.Z)),Le=$e,k=w.forwardRef(function(S,E){return(0,f.jsx)(Le,(0,b.Z)((0,b.Z)({},S),{},{picker:"time",mode:void 0,ref:E}))});k.displayName="TimePicker";var Ke=null},75716:function(Ye,Pe,s){"use strict";s.d(Pe,{Rs:function(){return de},AK:function(){return m},Al:function(){return pe}});var Y=s(67294),w=s(86150);function m(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",b=(0,Y.useContext)(w.ZX),Q=b.theme;return"survey-".concat(Q)+K}function ie(K,b){var Q=(b&&b.depends||[]).reduce(function(y,B){return y||!B},!1);return W(Q?void 0:function(y,B){return fetch(y,B).then(function(t){if(!!t.ok)return t.json()})},K,b||{})}function W(K){for(var b=arguments.length,Q=new Array(b>1?b-1:0),y=1;y<b;y++)Q[y-1]=arguments[y];var B=useState(0),t=_slicedToArray(B,2),oe=t[0],ye=t[1],ue=useCallback(function(){ye(Math.random())},[]),U=useState({loading:!1,mutate:ue}),Ne=_slicedToArray(U,2),Ie=Ne[0],Ce=Ne[1];return useEffect(function(){!K||Q[1].manual&&oe===0||K.apply(null,Q).then(function(he){he.code===200?Ce({loading:!1,data:he.data,mutate:ue}):Ce({error:he.message,loading:!1,mutate:ue})}).catch(function(he){Ce({error:he,loading:!1,mutate:ue})})},f(oe,Q)),Ie}function f(){for(var K=arguments.length,b=new Array(K),Q=0;Q<K;Q++)b[Q]=arguments[Q];for(var y=[],B=0;B<arguments.length;B++){var t=arguments[B];if(t instanceof Array)for(var oe=0;oe<t.length;oe++)y=y.concat(f(t[oe]));else if(typeof URL!="undefined"&&t instanceof URL)y=y.concat(t.toJSON());else if(t instanceof Object)for(var ye=Object.keys(t),ue=0;ue<ye.length;ue++){var U=ye[ue];U==="depends"?y=y.concat(t[U]):y=y.concat([U]).concat(f(t[U]))}else y=y.concat(t)}return y}var C=s(98210);function pe(){return(0,Y.useContext)(C.ZX)}function de(){return pe().attachments}},49266:function(Ye,Pe,s){"use strict";s.d(Pe,{m:function(){return et},Z:function(){return Nt}});var Y=s(86582),w=s(3182),m=s(11849),ie=s(2824),W=s(94043),f=s.n(W),C=s(67294),pe=s(95566),de=s(56436),K=s(77883),b=s(55317),Q=s(86150),y=s(25837),B=s(75716),t=s(85893);function oe(e){var a=e.schema,i=e.index,n=(0,B.AK)("-body-questionSet");return(0,t.jsxs)("div",{className:n,children:[(0,t.jsxs)("div",{className:n+"-title",children:[i+1,".",a.title]}),e.children,(0,t.jsx)("div",{className:n+"-splitLine"})]})}(0,y.eC)("QuestionSet",oe,"antd");var ye=s(9715),ue=s(86585),U=s(98210);function Ne(e){var a=e.schema,i=e.index,n=e.qsIndex,r=e.required,u=e.error,o=(0,C.useContext)(U.ZX),h=o.questionNumber,d=(0,B.AK)("-body-question"),v=e.error.length>0,c=e.warning.length>0,l=(0,C.useState)(),j=(0,ie.Z)(l,2),g=j[0],p=j[1];(0,C.useEffect)(function(){if(g){var x,M;(x=document.querySelector("[data-id='".concat(a.id,"']")))===null||x===void 0||x.classList.remove("ant-form-item-has-error"),(M=document.querySelector("[data-id='".concat(a.id,"']")))===null||M===void 0||M.querySelectorAll("[data-id]").forEach(function(re){re.classList.remove("ant-form-item-has-error")})}if(u.length>0){var N,z=u[0].split("^"),$=(0,ie.Z)(z,2),D=$[0],L=$[1],V;L?(V=document.querySelector("[data-id='".concat(D,"']")),p(L)):(V=document.querySelector("[data-id='".concat(a.id,"']")),p(D)),(N=V)===null||N===void 0||N.classList.add("ant-form-item-has-error")}else g&&p(void 0)},[u]);var Z="";return n!==void 0&&(Z+=n+1+"-"),i!==void 0&&(Z+=i+1+"."),(0,t.jsx)("div",{className:d,"data-id":a.id,children:(0,t.jsx)(ue.Z.Item,{label:(0,t.jsxs)("span",{className:d+"-header",children:[h?Z:"",(0,t.jsx)(b.hl,{html:a.title})]}),labelCol:{span:24},wrapperCol:{span:24},required:r,help:g,children:e.children})})}(0,y.eC)("Question",Ne,"antd");var Ie=s(84305),Ce=s(69224),he=s(82925),Ve=function(){var a=(0,B.AK)(),i=(0,C.useContext)(U.ZX),n=i.schema;return(0,t.jsxs)("div",{className:a+"-header",children:[(0,t.jsx)("div",{className:a+"-header-title",children:(0,t.jsx)(b.hl,{html:n.title})}),(0,t.jsx)("div",{className:a+"-header-description",children:(0,t.jsx)(b.hl,{html:n.description})})]})},De=function(a){var i=(0,B.AK)();return(0,t.jsx)("div",{className:i+"-body",children:a.children})},We=s(57663),Ae=s(71577);function Ge(){var e,a,i,n=(0,B.AK)("-footer"),r=(0,C.useContext)(U.ZX),u=r.schema,o=r.onSubmit,h=r.onPrev,d=r.pagination,v=r.onNext,c=r.loading,l=d.pageSize>1,j=d.current===1,g=d.current===d.pageSize,p=l?(e=u.children)===null||e===void 0?void 0:e.slice(-1)[0]:void 0;return(0,t.jsxs)("div",{className:n,children:[g&&(0,t.jsx)("div",{className:n+"-desc",children:(0,t.jsx)(b.hl,{html:u==null||(a=u.attribute)===null||a===void 0?void 0:a.suffix})}),(0,t.jsxs)("div",{className:n+"-pagination",children:[l&&!j&&(0,t.jsx)("div",{children:(0,t.jsx)(Ae.Z,{type:"primary",block:!0,onClick:function(){return h()},children:"\u4E0A\u4E00\u9875"})}),l&&!g&&(0,t.jsx)("div",{children:(0,t.jsx)(Ae.Z,{type:"primary",block:!0,onClick:function(){return v()},children:"\u4E0B\u4E00\u9875"})}),g&&(0,t.jsx)("div",{children:(0,t.jsx)(Ae.Z,{type:"primary",block:!0,onClick:o,loading:c,children:(0,t.jsx)(b.hl,{html:((i=u.attribute)===null||i===void 0?void 0:i.submitButton)||"\u63D0\u4EA4"})})}),l&&(0,t.jsxs)("div",{className:n+"-pagination-info",children:["\u7B2C",d.current,"\u9875/\u5171",d.pageSize,"\u9875"]})]})]})}var Qe=s(47673),Fe=s(4107),Xe=s(70671),Re=s(51368),He=s(29985),Oe=s(46842),$e=s(64302),Le=s(27484),k=s.n(Le),Ke="YYYY-MM-DD",S="YYYY-MM-DD HH:mm:ss",E="HH:mm:ss";function F(e,a){if(!!e){if(a==="date")return k()(e,Ke);if(a==="dateTime")return k()(e,S);if(a==="time")return k()(e,E)}}var H=function(a){var i=a.onChange,n=a.type,r=a.value,u=a.suffix,o=a.style,h=o===void 0?{width:"100%"}:o;return n==="number"?(0,t.jsx)(Re.Z,{onChange:i,value:r,style:h}):n==="date"?(0,t.jsx)(b.Mt,{onChange:function(v,c){return i(c)},value:F(r,n),style:h}):n==="dateTime"?(0,t.jsx)(b.Mt,{showTime:!0,onChange:function(v,c){return i(c)},value:F(r,n),style:h}):n==="time"?(0,t.jsx)(b.jI,{value:F(r,n),onChange:function(v,c){return i(c)},style:h}):n==="mobile"?(0,t.jsx)(Fe.Z,{prefix:(0,t.jsx)(He.Z,{}),onChange:function(v){return i(v.target.value)},value:r}):n==="idCard"?(0,t.jsx)(Fe.Z,{prefix:(0,t.jsx)(Oe.Z,{}),onChange:function(v){return i(v.target.value)},value:r,style:h}):n==="email"?(0,t.jsx)(Fe.Z,{prefix:(0,t.jsx)($e.Z,{}),onChange:function(v){return i(v.target.value)},value:r,style:h}):(0,t.jsx)(Fe.Z,{onChange:function(v){return i(v.target.value)},value:r,suffix:u,style:h})};function q(e){var a=e.headerVisible,i=e.footerVisible,n=e.schema,r=(0,B.AK)(),u=function(){var h,d=(h=n.attribute)===null||h===void 0?void 0:h.headerImage;if(d)return(0,t.jsx)("img",{src:"/api/public/preview/".concat(d),style:{maxWidth:"100%"}})};return(0,t.jsxs)("div",{className:r,children:[(0,t.jsx)("div",{className:r+"-banner",children:u()}),a&&(0,t.jsx)(Ve,{}),(0,t.jsx)(Ce.ZP,{locale:he.Z,children:(0,t.jsx)(De,{children:e.children})}),i&&(0,t.jsx)(Ge,{})]})}(0,y.eC)("Survey",q,"antd");var _=s(13062),I=s(71230),te=s(89032),O=s(15746),J=s(36877),ae=s(87709);function je(e){var a=e.schema,i=e.onChange,n=e.value,r=n===void 0?{}:n,u=a.children,o=u===void 0?[]:u;function h(d){var v={};d.forEach(function(c,l){var j=o[l].id;v[j]=c}),i(v)}return(0,t.jsx)(I.Z,{children:(0,t.jsx)(O.Z,{span:12,children:(0,t.jsx)(ae.Z,{value:o.map(function(d){return r[d.id]}).filter(function(d){return d}),style:{width:260},options:a.dataSource,onChange:h,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,y.RM)("Cascader",je,"antd");function T(e){var a=e.schema,i=e.onChange,n=e.value,r=n===void 0?{}:n,u=a.children,o=(0,B.AK)("-body-question");function h(d,v){r[d]=v,v===""&&delete r[d],i((0,m.Z)({},r))}return(0,t.jsx)("div",{children:u==null?void 0:u.map(function(d){var v=d.id,c=d.attribute,l=d.title,j=c==null?void 0:c.suffix,g=c==null?void 0:c.dataType;return(0,t.jsxs)(I.Z,{style:{marginBottom:10},"data-id":v,children:[l&&(0,t.jsx)(O.Z,{className:o+"-option",span:4,children:d.title&&(0,t.jsx)("span",{className:o+"-option-title",children:d.title})},d.id),(0,t.jsx)(O.Z,{span:12,children:(0,t.jsx)(H,{type:g,value:r[v]||"",onChange:function(Z){return h(v,Z)},suffix:j&&(0,t.jsx)("span",{className:o+"-option-suffix",children:(0,t.jsx)(b.hl,{html:j})})})})]},v)})})}(0,y.RM)("FillBlank",T,"antd"),(0,y.RM)("MultipleBlank",T,"antd");var P=s(43358),ne=s(90290),A=s(79521);function le(e){var a=e.columns,i=e.data,n=e.onAdd,r=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),u=(0,A.useTable)({columns:a,data:i,defaultColumn:r},A.useBlockLayout),o=u.getTableProps,h=u.getTableBodyProps,d=u.headerGroups,v=u.rows,c=u.prepareRow;return(0,t.jsxs)("div",(0,m.Z)((0,m.Z)({},o()),{},{className:"table",children:[(0,t.jsx)("div",{children:d.map(function(l){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(j){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},j.getHeaderProps()),{},{className:"th",children:j.render("Header")}))})}))})}),(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},h()),{},{children:v.map(function(l,j){return c(l),(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(g){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},g.getCellProps()),{},{className:"td","data-id":"".concat(j,"-").concat(g.column.id),children:g.render("Cell")}))})}))})})),(0,t.jsx)("div",{className:"footer",onClick:n,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Me(e){var a=e.schema,i=e.onChange,n=e.value||[{},{}],r=a.children,u=r===void 0?[]:r,o=(0,C.useMemo)(function(){return u.map(function(h){var d;return{Header:h.title,width:(d=h.attribute)===null||d===void 0?void 0:d.width,accessor:h.id,Cell:function(c){var l,j=c.value,g=c.row,p=c.data;if(((l=h.attribute)===null||l===void 0?void 0:l.dataType)==="select"){var Z;return(0,t.jsx)(ne.Z,{placeholder:"\u8BF7\u9009\u62E9",value:j,style:{minWidth:80},onChange:function(M){p[g.index][h.id]=M},options:((Z=h.dataSource)===null||Z===void 0?void 0:Z.map(function(x){return{label:x.label,value:x.value}}))||[]})}else return(0,t.jsx)(Fe.Z,{value:j,onChange:function(M){p[g.index][h.id]=M.target.value,i((0,Y.Z)(p))}})}}})},[]);return(0,t.jsx)("div",{className:"table-container",children:(0,t.jsx)(le,{columns:o,data:n,onAdd:function(){n.push({}),i((0,Y.Z)(n))}})})}(0,y.RM)("MatrixAuto",Me,"antd");var se=s(93224);function ce(e){var a=e.columns,i=e.data,n=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,A.useTable)({columns:a,data:i,defaultColumn:n},A.useBlockLayout),u=r.getTableProps,o=r.getTableBodyProps,h=r.headerGroups,d=r.rows,v=r.prepareRow;return(0,t.jsxs)("div",(0,m.Z)((0,m.Z)({},u()),{},{className:"table",children:[(0,t.jsx)("div",{children:h.map(function(c){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},c.getHeaderGroupProps()),{},{className:"tr",children:c.headers.map(function(l){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},l.getHeaderProps()),{},{className:"th",children:l.render("Header")}))})}))})}),(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},o()),{},{children:d.map(function(c){return v(c),(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},c.getRowProps()),{},{className:"tr",children:c.cells.map(function(l){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},l.getCellProps()),{},{className:"td","data-id":"".concat(c.original.rowId,"-").concat(l.column.id),children:l.render("Cell")}))})}))})}))]}))}function fe(e){var a=e.schema,i=e.onChange,n=e.value,r=n===void 0?{}:n,u=a.children,o=u===void 0?[]:u,h=a.row,d=h===void 0?[]:h,v=(0,C.useMemo)(function(){var l,j=o.map(function(g){var p;return{Header:g.title,width:(p=g.attribute)===null||p===void 0?void 0:p.width,accessor:g.id,Cell:function(x){var M=x.value,N=x.row,z=x.data;return(0,t.jsx)(H,{value:M,onChange:function(D){var L={};z.forEach(function(V,re){var be=V.title,ee=V.rowId,Se=(0,se.Z)(V,["title","rowId"]);N.index===re&&(Se[g.id]=D),L[ee]=Se}),i(L)}})}}});return j.splice(0,0,{Header:(0,t.jsx)(t.Fragment,{}),width:((l=a.attribute)===null||l===void 0?void 0:l.width)||150,accessor:"title"}),j},[]),c=d.map(function(l,j){var g=l.id,p=r[g]||{};return(0,m.Z)({title:l.title,rowId:g},p)});return(0,t.jsx)("div",{className:"table-container",children:(0,t.jsx)(ce,{columns:v,data:c})})}(0,y.RM)("MatrixFillBlank",fe,"antd");var me=s(88983),Be=s(47933);function Ue(e){var a=e.columns,i=e.data,n=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,A.useTable)({columns:a,data:i,defaultColumn:n},A.useBlockLayout),u=r.getTableProps,o=r.getTableBodyProps,h=r.headerGroups,d=r.rows,v=r.prepareRow;return(0,t.jsxs)("div",(0,m.Z)((0,m.Z)({},u()),{},{className:"table",children:[(0,t.jsx)("div",{children:h.map(function(c){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},c.getHeaderGroupProps()),{},{className:"tr",children:c.headers.map(function(l){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},l.getHeaderProps()),{},{className:"th",children:l.render("Header")}))})}))})}),(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},o()),{},{children:d.map(function(c){return v(c),(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},c.getRowProps()),{},{className:"tr",children:c.cells.map(function(l){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},l.getCellProps()),{},{className:"td",children:l.render("Cell")}))})}))})}))]}))}function we(e){var a=e.schema,i=e.onChange,n=e.value,r=n===void 0?{}:n,u=a.children,o=u===void 0?[]:u,h=a.row,d=h===void 0?[]:h,v=(0,C.useMemo)(function(){var l,j=o.map(function(g){var p;return{Header:g.title,width:(p=g.attribute)===null||p===void 0?void 0:p.width,accessor:g.id,Cell:function(x){var M=x.value,N=x.row,z=x.data;return(0,t.jsx)("div",{onClick:function(){var D={};z.forEach(function(L,V){var re=L.title,be=L.rowId,ee=(0,se.Z)(L,["title","rowId"]);N.index===V?(D[be]={},D[be][g.id]=!0):D[be]=ee}),i(D)},children:(0,t.jsx)(Be.ZP,{checked:!!M})})}}});return j.splice(0,0,{Header:(0,t.jsx)(t.Fragment,{}),width:((l=a.attribute)===null||l===void 0?void 0:l.width)||150,accessor:"title"}),j},[]),c=d.map(function(l,j){var g=l.id,p=r[g]||{};return(0,m.Z)({title:l.title,rowId:g},p)});return(0,t.jsx)("div",{className:"table-container",children:(0,t.jsx)(Ue,{columns:v,data:c})})}(0,y.RM)("MatrixSingle",we,"antd");var Pt=s(63185),Je=s(9676);function at(e){var a=e.columns,i=e.data,n=C.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),r=(0,A.useTable)({columns:a,data:i,defaultColumn:n},A.useBlockLayout),u=r.getTableProps,o=r.getTableBodyProps,h=r.headerGroups,d=r.rows,v=r.prepareRow;return(0,t.jsxs)("div",(0,m.Z)((0,m.Z)({},u()),{},{className:"table",children:[(0,t.jsx)("div",{children:h.map(function(c){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},c.getHeaderGroupProps()),{},{className:"tr",children:c.headers.map(function(l){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},l.getHeaderProps()),{},{className:"th",children:l.render("Header")}))})}))})}),(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},o()),{},{children:d.map(function(c){return v(c),(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},c.getRowProps()),{},{className:"tr",children:c.cells.map(function(l){return(0,t.jsx)("div",(0,m.Z)((0,m.Z)({},l.getCellProps()),{},{className:"td",children:l.render("Cell")}))})}))})}))]}))}function nt(e){var a=e.schema,i=e.onChange,n=e.value,r=n===void 0?{}:n,u=a.children,o=u===void 0?[]:u,h=a.row,d=h===void 0?[]:h,v=(0,C.useMemo)(function(){var l,j=o.map(function(g){var p;return{Header:g.title,width:(p=g.attribute)===null||p===void 0?void 0:p.width,accessor:g.id,Cell:function(x){var M=x.value,N=x.row,z=x.data;return(0,t.jsx)("div",{onClick:function(D){var L=!M,V={};z.forEach(function(re,be){var ee=re.title,Se=re.rowId,ge=(0,se.Z)(re,["title","rowId"]);N.index===be&&(L?ge[g.id]=!0:delete ge[g.id]),V[Se]=ge}),i(V)},children:(0,t.jsx)(Je.Z,{checked:!!M})})}}});return j.splice(0,0,{Header:(0,t.jsx)(t.Fragment,{}),width:((l=a.attribute)===null||l===void 0?void 0:l.width)||150,accessor:"title"}),j},[]),c=d.map(function(l,j){var g=l.id,p=r[g]||{};return(0,m.Z)({title:l.title,rowId:g},p)});return(0,t.jsx)("div",{className:"table-container",children:(0,t.jsx)(at,{columns:v,data:c})})}(0,y.RM)("MatrixMulti",nt,"antd");var Ee=s(32059);function rt(e){var a=e.schema,i=e.onChange,n=e.value,r=n===void 0?{}:n,u=a.children,o=a.attribute,h=24/((o==null?void 0:o.columns)||1),d=(0,B.AK)("-body-question");function v(c,l,j){l?r[c]=j||!0:delete r[c],i((0,m.Z)({},r))}return(0,C.useEffect)(function(){u==null||u.forEach(function(c){var l;(l=c.attribute)!==null&&l!==void 0&&l.defaultChecked&&Object.keys(r).length===0&&i((0,Ee.Z)({},c.id,!0))})},[]),(0,t.jsx)("div",{children:(0,t.jsx)(I.Z,{children:u==null?void 0:u.map(function(c){var l,j=c.title,g=c.id,p=(l=c.attribute)===null||l===void 0?void 0:l.dataType;return(0,t.jsxs)(O.Z,{span:h,className:d+"-option","data-id":g,children:[(0,t.jsx)(Je.Z,{value:g,checked:r.hasOwnProperty(g),onChange:function(x){return v(g,x.target.checked)},children:(0,t.jsx)(b.hl,{html:j})}),p&&(0,t.jsx)(H,{value:r[g],style:{maxWidth:120},type:p,onChange:function(x){return v(g,!0,x)}})]},g)})})})}(0,y.RM)("Multi",rt,"antd");function it(e){var a=e.schema,i=e.onChange,n=e.value,r=n===void 0?{}:n,u=a.children,o=u===void 0?[]:u;function h(d){var v,c=(v=a.children)===null||v===void 0?void 0:v.find(function(l){return l.id===d});c&&i((0,Ee.Z)({},d,!0))}return(0,C.useEffect)(function(){var d;(d=a.children)===null||d===void 0||d.forEach(function(v){var c,l=v.id;(c=v.attribute)!==null&&c!==void 0&&c.defaultChecked&&Object.keys(r).length===0&&i((0,Ee.Z)({},l,!0))})},[]),(0,t.jsx)(I.Z,{children:(0,t.jsx)(O.Z,{span:12,children:(0,t.jsx)(ne.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){i(void 0)},showSearch:!0,value:Object.keys(r)[0],filterOption:function(v,c){return(c==null?void 0:c.label).toLowerCase().indexOf(v.toLowerCase())!==-1},onChange:h,style:{width:260},options:o.map(function(d){return{label:d.title,value:d.id}})})})})}(0,y.RM)("Select",it,"antd");var ut=Be.ZP.Group;function lt(e){var a=e.schema,i=e.onChange,n=e.value,r=n===void 0?{}:n,u=a.children,o=a.attribute,h=24/((o==null?void 0:o.columns)||1),d=(0,B.AK)("-body-question");function v(l){var j,g=l.target.value,p=(j=a.children)===null||j===void 0?void 0:j.find(function(N){return N.id===g});if(p){var Z=p.id,x=p.attribute,M=x==null?void 0:x.dataType;i((0,Ee.Z)({},l.target.value,M?r[Z]:!0))}}function c(l,j){i((0,Ee.Z)({},l,j))}return(0,C.useEffect)(function(){var l;(l=a.children)===null||l===void 0||l.forEach(function(j){var g,p=j.id,Z=j.attribute,x=Z==null?void 0:Z.dataType;(g=j.attribute)!==null&&g!==void 0&&g.defaultChecked&&Object.keys(r).length===0&&i((0,Ee.Z)({},p,x?r[p]:!0))})},[]),(0,t.jsx)("div",{children:(0,t.jsx)(ut,{onChange:v,value:Object.keys(r)[0],style:{width:"100%"},children:(0,t.jsx)(I.Z,{children:u==null?void 0:u.map(function(l){var j,g=l.title,p=l.id,Z=l.attribute,x=(j=l.attribute)===null||j===void 0?void 0:j.dataType;return(0,t.jsxs)(O.Z,{span:h,className:d+"-option","data-id":p,children:[(0,t.jsx)(Be.ZP,{value:p,className:"radio-item",children:(0,t.jsx)(b.hl,{html:g})}),x&&(0,t.jsx)(H,{value:r[p],type:x,style:{maxWidth:120},onChange:function(N){return c(p,N)}})]},p)})})})})}(0,y.RM)("Single",lt,"antd");var Bt=s(48736),st=s(27049);function dt(e){var a=(0,B.AK)("-body-question");return(0,t.jsx)("div",{className:a,children:(0,t.jsx)(st.Z,{plain:!0})})}(0,y.RM)("SplitLine",dt,"antd");function ot(e){var a=(0,B.AK)("-body-question");return(0,t.jsx)("div",{className:a,children:(0,t.jsx)(b.hl,{html:e.schema.title})})}(0,y.RM)("Remark",ot,"antd");var It=s(34792),ct=s(48086),At=s(43185),ke=s(94412),vt=s(43347),ht=ke.Z.Dragger;function ft(e){var a=e.schema,i=e.onChange,n=e.value,r=e.readOnly,u=a.children,o=(0,B.Rs)(),h=(0,B.Al)(),d=(0,C.useState)(),v=(0,ie.Z)(d,2),c=v[0],l=v[1];(0,C.useEffect)(function(){var p=a.children[0].id,Z=n&&n[p]||[],x=o.filter(function(M){return Z.includes(M.id)}).map(function(M){return{name:M.originalName,uid:M.id,status:"done"}});l(x)},[n]);var j=function(){var p=(0,w.Z)(f().mark(function Z(x){var M,N,z,$;return f().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:M=x.onSuccess,N=x.onError,z=x.file,$=x.onProgress,h.onUpload&&h.onUpload(z,function(V){$&&$({percent:V.loaded/V.total*100})}).then(function(V){if(V.success&&M&&M(V.data),!V.success&&N){var re=new Error("Some error");N({event:re})}});case 2:case"end":return L.stop()}},Z)}));return function(x){return p.apply(this,arguments)}}(),g=function(Z,x){if(l(Z.fileList),Z.file.status==="removed"){var M=o.findIndex(function($){var D;return $.id===(((D=Z.file.response)===null||D===void 0?void 0:D.attachmentId)||Z.file.uid)});M!==-1&&o.splice(M,1)}else Z.fileList.length>0&&l(Z.fileList);if(Z.file.status==="done"){var N;o.push({contentType:Z.file.type||Z.file.name.substring(Z.file.name.lastIndexOf(".")+1),id:((N=Z.file.response)===null||N===void 0?void 0:N.attachmentId)||Z.file.uid,originalName:Z.file.name})}if((Z.file.status==="removed"||Z.file.status==="done")&&!Z.fileList.find(function($){return $.status!=="done"})){var z=Z.fileList.filter(function($){return $.status==="done"}).map(function($){var D;return((D=$.response)===null||D===void 0?void 0:D.attachmentId)||$.uid});i((0,Ee.Z)({},x,z))}};return(0,t.jsx)("div",{children:u==null?void 0:u.map(function(p){var Z=p.id,x=p.attribute,M=p.title,N=[];if(x){var z=x.maxFileCount,$=x.maxFileSize,D=x.fileAccept;z&&N.push("\u6700\u591A\u4E0A\u4F20".concat(z,"\u4E2A")),$&&N.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat($,"M\u4EE5\u5185")),D&&N.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(D))}return(0,t.jsxs)(ht,{multiple:!0,disabled:r,maxCount:(x==null?void 0:x.maxFileCount)||20,accept:x==null?void 0:x.fileAccept,beforeUpload:function(V){return x!=null&&x.maxFileSize&&V.size>x.maxFileSize*1024*1024?(ct.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(x.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),ke.Z.LIST_IGNORE):!0},customRequest:j,onChange:function(V){return g(V,Z)},fileList:c,children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(vt.Z,{})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,t.jsx)("p",{className:"ant-upload-hint",children:N.join(",")})]},Z)})})}(0,y.RM)("Upload",ft,"antd");var qe=s(80705),mt=s(99439),xt=s(66607),gt=s.n(xt);k().extend(gt()),Number.prototype.isBetween=function(a,i,n){var r=this,u=parseFloat(a);isNaN(u)&&(u=-99999);var o=parseFloat(i);return isNaN(o)&&(o=99999),!(r>o||r<u||n[0]==="("&&u==r||n[1]===")"&&o==r)};function pt(e,a){var i=ze(e),n=Number(a);return n.isBetween(e.substring(1,e.indexOf(",")),e.substring(e.indexOf(",")+1,e.length-1),i)}function jt(e,a){if(!a)return!0;var i=k()(a),n=Te(e.substring(1,e.indexOf(",")),!0),r=Te(e.substring(e.indexOf(",")+1,e.length-1),!1),u=ze(e);return i.isBetween(n,r,null,u)}function Zt(e,a){if(!a)return!0;var i=k()(a),n=Te(e.substring(1,e.indexOf(",")),!0,"YYYY-MM-DD hh:mm:ss"),r=Te(e.substring(e.indexOf(",")+1,e.length-1),!1,"YYYY-MM-DD hh:mm:ss"),u=ze(e);return i.isBetween(n,r,null,u)}function bt(e,a){if(!a)return!0;var i="2018-02-08 ",n=k()(i+a),r=Te(i+e.substring(1,e.indexOf(",")),!0,"YYYY-MM-DD hh:mm:ss"),u=Te(i+e.substring(e.indexOf(",")+1,e.length-1),!1,"YYYY-MM-DD hh:mm:ss"),o=ze(e);return n.isBetween(r,u,null,o)}function Te(e,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"YYYY-MM-DD",n,r=k()(k()().format(i));return e==="undefined"?a?n=k()("1900-01-01"):n=k()("2999-01-01"):e.indexOf("T")!==-1?e==="T"?n=r:/T-\d+/.test(e)?n=r.subtract(parseInt(e.match(/\d+/)[0]),"days"):/T\+\d+/.test(e)&&(n=r.add(parseInt(e.match(/\d+/)[0]),"days")):/\d+-\d+-\d+/.test(e)&&(n=k()(e)),n}function ze(e){var a=e[0],i=e[e.length-1],n="".concat(a).concat(i);return n}function yt(e,a){var i,n=a.id,r=[];if((i=a.parent)!==null&&i!==void 0&&i.type.startsWith("Matrix"))if(a.parent.type==="MatrixAuto"&&Array.isArray(e))e.forEach(function(o,h){r.push(["".concat(h,"-").concat(n),o[a.id]])});else{var u;(u=a.parent.row)===null||u===void 0||u.forEach(function(o){e[o.id]?r.push(["".concat(o.id,"-").concat(n),e[o.id][a.id]]):r.push(["".concat(o.id,"-").concat(n),void 0])})}else r.push([a.id,e[a.id]]);return r}function _e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Ct(e){return!!(_e(e)&&Number.isInteger(parseFloat(e)))}function Ze(e){var a=e.errMsg,i=e.schema,n=e.regEx,r=e.value;return i?xe({schema:i,value:r,errMsg:a,isValid:function(o){return o?n.test("".concat(o)):!0}}):null}function xe(e){var a=e.value,i=e.schema,n=e.isValid,r=e.errMsg;return i?yt(a,i).map(function(u){var o=(0,ie.Z)(u,2),h=o[0],d=o[1];return n(d)?null:"".concat(h,"^").concat(r)}).filter(function(u){return u})[0]:null}(0,mt.au)({required:function(a,i){var n=i.schema;return i&&i.required===!1?null:(0,qe.xb)(a)||typeof a=="object"&&Object.keys(a).length===0?"\u4E0D\u80FD\u4E3A\u7A7A":xe({schema:n,value:a,errMsg:"\u4E0D\u80FD\u4E3A\u7A7A",isValid:function(u){return!(0,qe.xb)(u)}})},number:function(a,i){var n,r=i.schema,u=r==null||(n=r.attribute)===null||n===void 0?void 0:n.numericScale;if(!r)return null;var o="\u8BF7\u8F93\u5165\u6570\u5B57";return u===0?o="\u8BF7\u8F93\u5165\u6574\u6570":u&&u>0&&(o="\u8BF7\u4FDD\u7559".concat(u,"\u4F4D\u5C0F\u6570")),xe({errMsg:o,schema:r,value:a,isValid:function(d){return!(d!==void 0&&(!_e(d)||u===0&&Ct(d)||u!==void 0&&u>0&&("".concat(d).split(".")[1]||"").length>u))}})},date:function(a,i){var n=i.schema;return Ze({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F",schema:n,regEx:/^(?:(?:1[6-9]|[2-9][0-9])[0-9]{2}([-/.]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:(?:1[6-9]|[2-9][0-9])(?:0[48]|[2468][048]|[13579][26])|(?:16|[2468][048]|[3579][26])00)([-/.]?)0?2\2(?:29))(\s+([01][0-9]:|2[0-3]:)?[0-5][0-9]:[0-5][0-9])?$/,value:a})},dateTime:function(a,i){var n=i.schema;return Ze({errMsg:"\u8BF7\u8F93\u5165\u65E5\u671F\u65F6\u95F4",schema:n,regEx:/^\d{4}[-]([0][1-9]|(1[0-2]))[-]([1-9]|([012]\d)|(3[01]))\s(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:a})},time:function(a,i){var n=i.schema;return Ze({errMsg:"\u8BF7\u8F93\u5165\u65F6\u95F4",schema:n,regEx:/^(([0-1]{1}[0-9]{1})|([2]{1}[0-4]{1}))([:])(([0-5]{1}[0-9]{1}|[6]{1}[0]{1}))([:])((([0-5]{1}[0-9]{1}|[6]{1}[0]{1})))$/,value:a})},mobile:function(a,i){var n=i.schema;return Ze({errMsg:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",schema:n,regEx:/^1([358][0-9]|4[579]|66|7[01235678]|9[189])[0-9]{8}$/,value:a})},decimal:function(a,i){var n=i.schema;return Ze({errMsg:"\u8BF7\u8F93\u5165\u6570\u5B57",schema:n,regEx:/^[+-]?\d+(\.\d+)?$/,value:a})},email:function(a,i){var n=i.schema;return Ze({errMsg:"\u90AE\u4EF6\u683C\u5F0F\u4E0D\u6B63\u786E",schema:n,regEx:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,value:a})},idCard:function(a,i){var n=i.schema;return xe({errMsg:"\u8EAB\u4EFD\u8BC1\u683C\u5F0F\u4E0D\u6B63\u786E",schema:n,value:a,isValid:function(u){return!(u&&!Mt("".concat(u)))}})},chinese:function(a,i){var n=i.schema;return Ze({errMsg:"\u8BF7\u8F93\u5165\u6C49\u5B57",schema:n,regEx:/^[\u4e00-\u9fa5]+$/,value:a})},alphabet:function(a,i){var n=i.schema;return Ze({errMsg:"\u8BF7\u8F93\u5165\u5B57\u6BCD",schema:n,regEx:/^[a-zA-Z]+$/,value:a})},textLimit:function(a,i){var n,r=i.schema,u=r==null||(n=r.attribute)===null||n===void 0?void 0:n.textLimit;if(!u)return null;var o=u.slice(1,u.length-1).split(","),h=parseInt(o[0]||"0"),d=parseInt(o[1]||"0");return xe({errMsg:"\u8BF7\u8F93\u5165".concat(h,"~").concat(d,"\u4E2A\u5B57"),schema:r,value:a,isValid:function(c){return!(c&&("".concat(c).length<h||"".concat(c).length>d))}})},scope:function(a,i){var n,r,u=i.schema,o=u==null||(n=u.attribute)===null||n===void 0?void 0:n.scope,h=u==null||(r=u.attribute)===null||r===void 0?void 0:r.dataType;if(o&&h){if(h==="number")return xe({errMsg:"\u6570\u503C\u8303\u56F4\u4E0D\u6B63\u786E ".concat(o),schema:u,value:a,isValid:function(v){return!(v&&!pt(o,"".concat(v)))}});if(h==="date")return xe({errMsg:"\u65E5\u671F\u8303\u56F4\u4E0D\u6B63\u786E ".concat(o),schema:u,value:a,isValid:function(v){return!(v&&!jt(o,"".concat(v)))}});if(h==="dateTime")return xe({errMsg:"\u65E5\u671F\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(o),schema:u,value:a,isValid:function(v){return!(v&&!Zt(o,"".concat(v)))}});if(h==="time")return xe({errMsg:"\u65F6\u95F4\u8303\u56F4\u4E0D\u6B63\u786E ".concat(o),schema:u,value:a,isValid:function(v){return!(v&&!bt(o,"".concat(v)))}})}return null}});function Ft(e){var a=e.substring(6,8),i=e.substring(8,10),n=e.substring(10,12),r=new Date(parseFloat(a),parseFloat(i)-1,parseFloat(n));return!(r.getFullYear()-1900!==parseFloat(a)||r.getMonth()!==parseFloat(i)-1||r.getDate()!==parseFloat(n))}function Mt(e){var a=e;if(e.length!==15&&e.length!==18)return!1;if(e.length===15)return Ft(a);var i={11:"\u5317\u4EAC",12:"\u5929\u6D25",13:"\u6CB3\u5317",14:"\u5C71\u897F",15:"\u5185\u8499\u53E4",21:"\u8FBD\u5B81",22:"\u5409\u6797",23:"\u9ED1\u9F99\u6C5F ",31:"\u4E0A\u6D77",32:"\u6C5F\u82CF",33:"\u6D59\u6C5F",34:"\u5B89\u5FBD",35:"\u798F\u5EFA",36:"\u6C5F\u897F",37:"\u5C71\u4E1C",41:"\u6CB3\u5357",42:"\u6E56\u5317 ",43:"\u6E56\u5357",44:"\u5E7F\u4E1C",45:"\u5E7F\u897F",46:"\u6D77\u5357",50:"\u91CD\u5E86",51:"\u56DB\u5DDD",52:"\u8D35\u5DDE",53:"\u4E91\u5357",54:"\u897F\u85CF ",61:"\u9655\u897F",62:"\u7518\u8083",63:"\u9752\u6D77",64:"\u5B81\u590F",65:"\u65B0\u7586",71:"\u53F0\u6E7E",81:"\u9999\u6E2F",82:"\u6FB3\u95E8",91:"\u56FD\u5916 "},n=!0;if(!a||!/^([1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx])|([1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2})$/i.test(a))n=!1;else if(!i[a.substr(0,2)])n=!1;else if(a.length>18)n=!1;else if(a.length===18){for(var r=a.split(""),u=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o=[1,0,"X",9,8,7,6,5,4,3,2],h=0,d=0,v=0,c=0;c<17;c+=1)d=parseInt(r[c],10),v=u[c],h+=d*v;var l=r[17].toUpperCase()==="X"?"X":Number(r[17]);o[h%11]!==l&&(n=!1)}return n}function Et(e,a){}var et=(0,C.forwardRef)(function(e,a){var i=e.theme,n=i===void 0?y.uH:i,r=e.footerVisible,u=r===void 0?!0:r,o=e.headerVisible,h=o===void 0?!0:o,d=e.initialValues,v=e.readOnly,c=e.loading,l=e.onChange,j=e.questionNumber,g=j===void 0?!0:j,p=e.attachment,Z=e.onUpload,x=e.paginationVisible,M=x===void 0?!0:x,N=(0,C.useMemo)(function(){return(0,U.Gt)(e.schema)},[e.schema]),z=(0,C.useMemo)(function(){return p||[]},[]),$=(0,C.useMemo)(function(){return M?(0,U._T)(e.schema):[e.schema.children]},[e.schema,M]),D=(0,C.useState)(function(){return(0,U.dr)(e.schema)}),L=(0,ie.Z)(D,2),V=L[0],re=L[1],be=(0,C.useMemo)(function(){return(0,U.R6)(e.schema)},[e.schema]),ee=(0,C.useMemo)(function(){return(0,de.Np)({initialValues:d,readOnly:v,effects:function(G){(0,de.dQ)(function(){$.map(function(R,ve){return ve}).slice(1).forEach(function(R){return ge(R,"hidden")})}),(0,de.pO)(function(R){l&&l((0,K.ZN)(R.values),z)}),Et(N,G)}})},[]),Se=(0,C.useCallback)(function(X){return ee.validate("*(".concat($[X].map(function(G){return G.id}).join(","),")"))},[]),ge=(0,C.useCallback)(function(X){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"visible";ee.query("*(".concat($[X].map(function(R){return R.id}).join(","),")")).forEach(function(R){R.display=G})},[]),Vt=(0,C.useCallback)(function(){re(function(X){var G=X.current-1;return ge(G,"hidden"),ge(G-1,"visible"),(0,m.Z)((0,m.Z)({},X),{},{current:X.current-1})})},[]),Tt=(0,C.useCallback)((0,w.Z)(f().mark(function X(){var G;return f().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return G=V.current-1,ve.prev=1,ve.next=4,Se(G);case 4:re(function(St){return ge(G,"hidden"),ge(G+1,"visible"),(0,m.Z)((0,m.Z)({},St),{},{current:V.current+1})}),ve.next=9;break;case 7:ve.prev=7,ve.t0=ve.catch(1);case 9:case"end":return ve.stop()}},X,null,[[1,7]])})),[V]),tt=(0,C.useCallback)((0,w.Z)(f().mark(function X(){return f().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,ee.validate();case 3:return e.onSubmit&&e.onSubmit((0,K.ZN)(ee.values),z),R.abrupt("return",{values:(0,K.ZN)(ee.values),attachments:z});case 7:R.prev=7,R.t0=R.catch(0);case 9:case"end":return R.stop()}},X,null,[[0,7]])})),[]);return(0,C.useImperativeHandle)(a,function(){return{submit:function(){return tt()},reset:function(){ee.reset()},setValues:function(G,R){ee.setValues(G,"overwrite"),R&&(z.splice(0,z.length),z.push.apply(z,(0,Y.Z)(R)))},toggleReadOnly:function(G){ee.setState(function(R){return R.readOnly=G})},getValues:function(){return ee.values}}}),(0,t.jsx)(pe.RV,{form:ee,children:(0,t.jsx)(Q.ZX.Provider,{value:(0,C.useMemo)(function(){return{theme:n,schema:N,footerVisible:u,questionNumber:g,headerVisible:h,pagination:V,optionTypes:be,onNext:Tt,onPrev:Vt,onSubmit:tt,onUpload:Z,loading:c,attachments:z}},[V,c]),children:(0,t.jsx)(b.k9,{schema:N})})})}),Nt=et}}]);
